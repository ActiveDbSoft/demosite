/*! jQuery v2.2.4 | (c) jQuery Foundation | jquery.org/license */
function createQueryBuilder(n,t){AQB.Web.UI.QueryBuilder(n,$(t[0]),{theme:"jqueryui",language:"en"});AQB.Web.UI.ObjectTreeView(n,$(t[1]));AQB.Web.UI.SubQueryNavigationBar(n,$(t[2]));AQB.Web.UI.Canvas(n,$(t[3]),{linkColor:"#2191c0",linkStyle:AQB.Web.UI.Enums.LinkStyle.MSSQL,resizeMode:"s, e, n, w"});AQB.Web.UI.StatusBar(n,$(t[4]));AQB.Web.UI.Grid(n,$(t[5]),{orColumnCount:0,useCustomExpressionBuilder:AQB.Web.Enum.AffectedColumns.ExpressionColumn});AQB.Web.UI.SqlEditor(n,$(t[6]))}function createQueryResults(){var n="QueryResults";AQB.Web.QueryBuilderContainer.get(n)||(createQueryBuilder(n,["#qrqb","#qrtreeview","#qrnavbar","#qrcanvas","#qrstatusbar","#qrgrid","#qreditor"]),AQB.Web.UI.UserQueries(n,$("#qruserqueries")),AQB.Web.UI.SqlEditor(n,$("#qrsqeditor"),{targetQueryPart:"SubQuery"}),AQB.Web.UI.CriteriaBuilder(n,$("#qrcb"),{autoSubscribe:!1}),AQB.Web.UI.startApplication(n))}function createAlternateNames(){var n="AlternateNames";if(AQB.Web.QueryBuilderContainer.get(n))return resetLayout(n);createQueryBuilder(n,["#anqb","#antreeview","#annavbar","#ancanvas","#anstatusbar","#angrid","#aneditor"]);$(".toggler").change(function(){onToggleAlterNames(n)});AQB.Web.UI.startApplication("/Home/CreateAlternateNames",n)}function createVirtualObjects(){var n="VirtualObjects";if(AQB.Web.QueryBuilderContainer.get(n))return resetLayout(n);createQueryBuilder(n,["#voqb","#votreeview","#vonavbar","#vocanvas","#vostatusbar","#vogrid","#voeditor"]);AQB.Web.UI.startApplication("/Home/CreateVirtualObjects",n)}function subscribeToChanges(n){if((createCodeMirror(n),hideOverlay(n.SessionID),n.SessionID==="QueryResults")&&(loadPreview(n.SessionID),createExpressionEditor(n),n.EditorComponent)){n.on(n.Events.ActiveUnionSubQueryChanged,function(){loadPreview(n.SessionID)});n.on(n.Events.SqlChanged,function(){loadPreview(n.SessionID)});return}}function subscribeToChangesCb(n){n.on(n.Events.AfterSyncCriteriaBuilder,function(){onCriteriaBuilderChanged(n,function(){if($("#qr").is(":visible")){var n=getUniqueQueryParams();clearParams();n.length?(fillJsonEditor.editor&&($("#jqxgrid").jqxGrid("clear"),$("#jsgrid").jsGrid("destroy"),ReactDOM.unmountComponentAtNode(document.getElementById("reactgrid")),fillJsonEditor.editor.destroy(),fillJsonEditor.editor=undefined),createParams(n)):createGrids()}})});n.on(n.Events.CriteriaBuilderChanged,function(){onCriteriaBuilderChanged(n,updateGrids)})}function loadPreview(n){container.is(":visible")&&($(".error-preview").hide(),grid&&(grid.show(),grid.jqxGrid("showloadelement")),$.ajax({url:previewUrl,data:{name:n},success:showPreview,error:errorPreview}))}function showPreview(n){grid&&grid.jqxGrid("destroy");grid=$('<div class="grid">');container.append(grid);var t={localdata:n.Data,datafields:n.Columns.map(function(n,t){return{name:n,map:t.toString()}}),datatype:"array"},i=new $.jqx.dataAdapter(t);grid.jqxGrid({width:"100%",height:227,source:i,columnsresize:!0,columns:n.Columns.map(function(n){return{text:n,datafield:n}})})}function errorPreview(n){grid&&(grid.hide(),grid.jqxGrid("hideloadelement"),grid.jqxGrid("clear"));$(".error-preview").show().text(n.responseText)}function createCodeMirror(n){function t(n){var t=CodeMirror(document.body,{mode:"text/x-sql",indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0});n.setEditor({element:t.display.wrapper,getSql:function(){return t.getValue()},setSql:function(n){t.setValue(n)},setCursorPosition:function(n,i,r){this.focus();t.setCursor(r-1,i-1,{scroll:!0})},focus:function(){t.focus()},onChange:function(n){this.changeCallback=n;t.on("change",this.changeCallback)},remove:function(){t.off("change",this.changeCallback);this.element.remove()}})}n.EditorComponent&&t(n.EditorComponent);n.ActiveSubQueryEditorComponent&&t(n.ActiveSubQueryEditorComponent)}function hideOverlay(n){document.querySelectorAll(".iframe-overlay."+n)[0].style.display="none"}function insertJqueryTheme(){setTimeout(function(){var t=document.getElementsByTagName("title")[0],i=document.getElementsByTagName("head")[0],n=document.createElement("link");n.href="https://code.jquery.com/ui/1.12.1/themes/start/jquery-ui.css";n.rel="stylesheet";n.type="text/css"},1e3)}function createExpressionEditor(n){window.codeMirror=CodeMirror(document.body,{mode:"text/x-sql",indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,width:"500px",height:"250px"});window.codeMirror.display.wrapper.style.display="none";n.GridComponent.on(AQB.Web.QueryBuilder.GridComponent.Events.GridBeforeCustomEditCell,BeforeCustomEditCell)}function BeforeCustomEditCell(n){var r=n.row,u=n.cell,i=$('<p class="ui-state-error" style="display: none;"><\/div>'),t=$("<div>").dialog({modal:!0,width:"auto",title:"Custom expression editor",appendTo:"#qrqb",buttons:[{text:"OK",click:function(){var n=codeMirror.getValue(),r=function(){u.updateValue(n);t.dialog("close")},f=function(n){i.html(n).show()};validate(n,r,f)}},{text:"Cancel",click:function(){t.dialog("close")}}]});window.codeMirror.display.wrapper.style.display="block";t.append(i,window.codeMirror.display.wrapper);t.parent().css({top:"25%",left:"30%",width:600});codeMirror.setValue(r.FormattedExpression||"");codeMirror.refresh()}function validate(n,t,i){AQB.Web.QueryBuilder.validateExpression(n,function(n,r){n?t():i(r)})}function resetLayout(n){setTimeout(function(){AQB.Web.QueryBuilderContainer.get(n).resetLayout()},100)}function onOpenQueryResults(){var n=AQB.Web.CriteriaBuilderContainer.first();n.loadColumns()}function createGrids(){$(".alert-danger").hide();var t=AQB.Web.CriteriaBuilderContainer.first(),n=t.Columns.map(function(n){return{key:n.ResultName,name:n.ResultName,text:n.ResultName,datafield:n.ResultName}});createJqxGrid(n);createJsGrid(n);createReactGrid(n);fillJsonEditor(0)}function updateGrids(){$(".alert-danger").hide();dataAdapter.dataBind();jsgrid.jsGrid();reactGrid.updateRows();fillJsonEditor(0)}function onCriteriaBuilderChanged(n,t){$("#qr").is(":visible")&&n.transformSql(function(n){$(".sql").text(n);t()})}function createJqxGrid(n){var t={type:"POST",contentType:"application/json;",datatype:"json",url:dataUrl,formatData:function(n){return n.params=getParams(),JSON.stringify(n)},loadError:errorCallback,sort:function(){$("#jqxgrid").jqxGrid("updatebounddata")},datafields:n.map(function(n){return{name:n.Name}}),totalrecords:9999999};window.dataAdapter=new $.jqx.dataAdapter(t);try{$("#jqxgrid").jqxGrid({width:"100%",source:dataAdapter,pageable:!0,sortable:!0,virtualmode:!0,rendergridrows:function(){return dataAdapter.loadedData},columns:n})}catch(i){console.log(i)}}function createReactGrid(n){function t(n,t,i,r){$.ajax({url:dataUrl,type:"POST",contentType:"application/json;",datatype:"json",data:JSON.stringify({pagenum:t,pagesize:10,sortdatafield:i,sortorder:r,params:getParams()}),success:n,error:errorCallback})}function i(i){var r=React.createClass({getInitialState:function(){return this._columns=n.map(function(n){return n.sortable=!0,n.width=300,n}),{rows:i,page:0}},sort:function(n,i){t(function(n){this.setState({rows:n})}.bind(this),this.state.page,n,i!=="NONE"?i:undefined);this.setState({field:n,order:i})},page:function(n){t(function(n){this.setState({rows:n})}.bind(this),n,this.state.field,this.state.order!=="NONE"?this.state.order:undefined);this.setState({page:n})},updateRows:function(){t(function(n){this.setState({rows:n})}.bind(this),this.state.page,this.state.field,this.state.order!=="NONE"?this.state.order:undefined)},prevPage:function(){this.page(this.state.page-1)},nextPage:function(){this.page(this.state.page+1)},rowGetter:function(n){return this.state.rows[n]},render:function(){return React.createElement("div",null,[React.createElement(ReactDataGrid,{onGridSort:this.sort,columns:this._columns,rowGetter:this.rowGetter,rowsCount:this.state.rows.length,minHeight:500}),React.createElement("span",{onClick:this.prevPage},["prev "]),React.createElement("span",{onClick:this.nextPage},[" next"])])}}),u=React.createElement(r);window.reactGrid=ReactDOM.render(u,document.getElementById("reactgrid"))}ReactDOM.unmountComponentAtNode(document.getElementById("reactgrid"));t(i,0)}function createJsGrid(n){window.jsgrid=$("#jsgrid").jsGrid({width:"100%",height:"400px",sorting:!0,paging:!0,pageLoading:!0,pageSize:10,autoload:!0,fields:n,controller:{loadData:function(n){var t=$.Deferred();return $.ajax({url:dataUrl,type:"POST",contentType:"application/json;",dataType:"json",data:JSON.stringify({pagenum:n.pageIndex-1,pagesize:n.pageSize,sortdatafield:n.sortField,sortorder:n.sortOrder,params:getParams()})}).done(function(n){t.resolve({data:n,itemsCount:9999999}).fail(errorCallback)}),t.promise()}}});$("jsgrid-header-cell").click(function(){var n=this.innerText;$("#jsgrid").jsGrid("sort",n)})}function fillJsonEditor(n){if(!(n<0)){if(fillJsonEditor.page=n,$(".jsonPage").text(n),!fillJsonEditor.editor){var t=document.getElementById("jsoneditor");fillJsonEditor.editor=new JSONEditor(t,{mode:"code"})}$.ajax({type:"POST",contentType:"application/json;",dataType:"json",url:dataUrl,data:JSON.stringify({pagenum:n,pagesize:10,params:getParams()}),success:function(n){fillJsonEditor.editor.set(n)},error:errorCallback})}}function updateVersion(){$.ajax({type:"GET",url:"https://www.activequerybuilder.com/member/version.php?section=3-11",success:function(n){$("#version-string").html(n)}})}function refreshCodeMirror(){var n=$(this).find(".CodeMirror").get(0);n&&n.CodeMirror.refresh()}function onToggleAlterNames(n){$.ajax({url:"/home/toggle",data:{name:n},success:function(){AQB.Web.QueryBuilderContainer.get(n).fullUpdate()}})}function subscribeToExchangeData(){AQB.Web.Core.on(AQB.Web.Core.Events.UserDataReceived,function(n){n.SessionID==="VirtualObjects"?$(".virtual-sql textarea").text(n.sql):$(".alternate-sql textarea").text(n.sql)})}function createParams(n){for(var r=$(".table-params tbody"),t=0;t<n.length;t++){var i=$("<tr>"),u=$("<td>"+n[t].FullName+"<\/td>"),f=$('<td><input type="text" class="'+n[t].Name+'" /><\/td>');i.append(u).append(f);r.append(i)}$(".table-params").show();$(".params-message").show()}function clearParams(){$(".table-params tbody").empty();$(".table-params").hide();$(".params-message").hide()}function getParams(){for(var i=[],t=getUniqueQueryParams(),n=0;n<t.length;n++)i.push({Name:t[n].FullName,Value:$("input."+t[n].Name).val()});return i}function getUniqueQueryParams(){for(var i,r=AQB.Web.QueryBuilder.queryParams,n=[],t=0,u=r.length;t<u;t++)i=r[t],n.find(n=>n.FullName===i.FullName)==null&&n.push(i);return n}function Demo(){this.syntaxes=[["ANSI SQL-2003",!1,[]],["ANSI SQL-92",!1,[]],["ANSI SQL-89",!1,[]],["Firebird",!1,["Firebird 2.0","Firebird 1.5","Firebird 1.0"]],["IBM DB2",!1,[]],["IBM Informix",!1,["Informix 10","Informix 9","Informix 8"]],["Microsoft Access",!1,["MS Jet 4","MS Jet 3"]],["Microsoft SQL Server",!0,["Auto","SQL Server 2005","SQL Server 2000","SQL Server 7"]],["MySQL",!1,["5.0","4.0","3.0"]],["Oracle",!1,["Oracle 10","Oracle 9","Oracle 8","Oracle 7"]],["PostgreSQL",!1,[]],["SQLite",!1,[]],["Sybase",!1,["ASE","SQL Anywhere"]],["VistaDB",!1,[]],["Universal",!1,[]]];var n=this;this.toolbarSytnaxOnChange=function(t){n.toolbarSytnaxVersionUpdate($(t.target).text());n.toolbarSytnaxChanged()};this.getQueryStatistics=function(){n.QueryStatisticsDialog.html(AQB.Web.QueryBuilder.Localizer.Strings.Loading);n.QueryStatisticsDialog.dialog("open");n.sendRequest("QueryStatistics","")};this.processRequest=function(t){t.Reaction==="update"?AQB.Web.QueryBuilder.fullUpdate():t.Reaction==="QueryStatistics"&&(n.QueryStatisticsDialog.html(t.QueryStatistics),n.QueryStatisticsDialog.dialog("open"))};this.sendRequest=function(t,i){$.ajax({url:"/Home/"+t+i,type:"POST",success:n.processRequest})};this.toolbarSytnaxChanged=function(){var t=$("#qb-ui-syntax-selector-server"),i=$("#qb-ui-syntax-selector-version"),r=t.val(),u=i.val(),f="?Syntax="+r+"&SyntaxVersion="+u;n.sendRequest("ChangeSyntax",f)};this.toolbarSytnaxVersionUpdate=function(t){for(var r,u,i=$("#qb-ui-syntax-selector-version"),f=[],e=0;e<this.syntaxes.length;e++)if(r=this.syntaxes[e],r[0]==t){for(u=0;u<r[2].length;u++)f.push('<option value="'+r[2][u]+'">'+r[2][u]+"<\/option>");break}f.length==0?(f.push('<option value="">Auto<\/option>'),i.attr("disabled","disabled")):i.removeAttr("disabled");i.data("initialized")&&i.selectmenu("destroy");i.html(f.join(""));i.selectmenu();i.data("initialized",!0);$("#qb-ui-syntax-selector-version-menu").click(n.toolbarSytnaxChanged)};this.init=function(){for(var n,e,t=this,r=new Array(this.syntaxes.length),i=0;i<this.syntaxes.length;i++){var u=this.syntaxes[i],f=u[0],o=u[1];r[i]="<option"+(o?" selected":"")+' value="'+f+'">'+f+"<\/option>"}n=$("#qb-ui-syntax-selector-server");n.html(r.join(""));n.selectmenu();n.change(t.toolbarSytnaxOnChange);e=$("#qb-ui-syntax-selector-version");e.change(t.toolbarSytnaxChanged);this.toolbarSytnaxVersionUpdate(n.val());$("#qb-ui-query-statistic").bind("click",t.getQueryStatistics);this.QueryStatisticsDialog=$("#qb-ui-query-statistic-dialog").dialog({autoOpen:!1,zIndex:7e3,width:600,height:300,modal:!0});$("#qb-ui-syntax-selector-server-menu").click(t.toolbarSytnaxOnChange)};this.init()}function errorCallback(n,t,i){$(".alert-danger").show().text(i)}function subscribeDomEvents(){$(".expander").click(function(){$(this).next("div").animate({opacity:"toggle",height:"toggle"})});$(".execute").click(function(){fillJsonEditor.editor?updateGrids():createGrids()});$(".next").button().click(function(){fillJsonEditor(fillJsonEditor.page+1)});$(".prev").button().click(function(){fillJsonEditor(fillJsonEditor.page-1)});$('[href="#qr"]').click(onOpenQueryResults);$(".qb-ui-layout__bottom .qb-ui-structure-tabs__tab").click(refreshCodeMirror);$("#ld-demo-altnames").click(createAlternateNames);$("#ld-demo-virtual").click(createVirtualObjects);$("#qr-tab").click(function(){loadPreview("QueryResults")});$("#nav-tabs > li > a").click(function(n){n.preventDefault();$(".tab-pane").hide();$("#nav-tabs > li").removeClass("active");$(this.parentNode).addClass("active");$(this.getAttribute("href")).show()});$("#main-tabs").tabs();$("#second-tabs").tabs();setTimeout(function(){$("#switcher").themeswitcher({imgpath:"https://www.activequerybuilder.com/cdn/img/themeroller/",loadtheme:"start",jqueryuiversion:"1.12.1"},1e3)})}function addScript(){}var oldBrowser,jqxBaseFramework;!function(n,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=n.document?t(n,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(n)}("undefined"!=typeof window?window:this,function(n,t){function ii(n){var t=!!n&&"length"in n&&n.length,r=i.type(n);return"function"===r||i.isWindow(n)?!1:"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in n}function ri(n,t,r){if(i.isFunction(t))return i.grep(n,function(n,i){return!!t.call(n,i,n)!==r});if(t.nodeType)return i.grep(n,function(n){return n===t!==r});if("string"==typeof t){if(bf.test(t))return i.filter(t,n,r);t=i.filter(t,n)}return i.grep(n,function(n){return lt.call(t,n)>-1!==r})}function hr(n,t){while((n=n[t])&&1!==n.nodeType);return n}function kf(n){var t={};return i.each(n.match(h)||[],function(n,i){t[i]=!0}),t}function yt(){u.removeEventListener("DOMContentLoaded",yt);n.removeEventListener("load",yt);i.ready()}function et(){this.expando=i.expando+et.uid++}function lr(n,t,r){var u;if(void 0===r&&1===n.nodeType)if(u="data-"+t.replace(cr,"-$&").toLowerCase(),r=n.getAttribute(u),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:df.test(r)?i.parseJSON(r):r}catch(f){}e.set(n,t,r)}else r=void 0;return r}function vr(n,t,r,u){var h,e=1,l=20,c=u?function(){return u.cur()}:function(){return i.css(n,t,"")},s=c(),o=r&&r[3]||(i.cssNumber[t]?"":"px"),f=(i.cssNumber[t]||"px"!==o&&+s)&&ot.exec(i.css(n,t));if(f&&f[3]!==o){o=o||f[3];r=r||[];f=+s||1;do e=e||".5",f/=e,i.style(n,t,f+o);while(e!==(e=c()/s)&&1!==e&&--l)}return r&&(f=+f||+s||0,h=r[1]?f+(r[1]+1)*r[2]:+r[2],u&&(u.unit=o,u.start=f,u.end=h)),h}function o(n,t){var r="undefined"!=typeof n.getElementsByTagName?n.getElementsByTagName(t||"*"):"undefined"!=typeof n.querySelectorAll?n.querySelectorAll(t||"*"):[];return void 0===t||t&&i.nodeName(n,t)?i.merge([n],r):r}function ui(n,t){for(var i=0,u=n.length;u>i;i++)r.set(n[i],"globalEval",!t||r.get(t[i],"globalEval"))}function kr(n,t,r,u,f){for(var e,s,p,a,w,v,h=t.createDocumentFragment(),y=[],l=0,b=n.length;b>l;l++)if(e=n[l],e||0===e)if("object"===i.type(e))i.merge(y,e.nodeType?[e]:e);else if(br.test(e)){for(s=s||h.appendChild(t.createElement("div")),p=(pr.exec(e)||["",""])[1].toLowerCase(),a=c[p]||c._default,s.innerHTML=a[1]+i.htmlPrefilter(e)+a[2],v=a[0];v--;)s=s.lastChild;i.merge(y,s.childNodes);s=h.firstChild;s.textContent=""}else y.push(t.createTextNode(e));for(h.textContent="",l=0;e=y[l++];)if(u&&i.inArray(e,u)>-1)f&&f.push(e);else if(w=i.contains(e.ownerDocument,e),s=o(h.appendChild(e),"script"),w&&ui(s),r)for(v=0;e=s[v++];)wr.test(e.type||"")&&r.push(e);return h}function pt(){return!0}function nt(){return!1}function gr(){try{return u.activeElement}catch(n){}}function fi(n,t,r,u,f,e){var o,s;if("object"==typeof t){"string"!=typeof r&&(u=u||r,r=void 0);for(s in t)fi(n,s,r,u,t[s],e);return n}if(null==u&&null==f?(f=r,u=r=void 0):null==f&&("string"==typeof r?(f=u,u=void 0):(f=u,u=r,r=void 0)),f===!1)f=nt;else if(!f)return n;return 1===e&&(o=f,f=function(n){return i().off(n),o.apply(this,arguments)},f.guid=o.guid||(o.guid=i.guid++)),n.each(function(){i.event.add(this,t,f,u,r)})}function nu(n,t){return i.nodeName(n,"table")&&i.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function ee(n){return n.type=(null!==n.getAttribute("type"))+"/"+n.type,n}function oe(n){var t=ue.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function tu(n,t){var u,c,f,s,h,l,a,o;if(1===t.nodeType){if(r.hasData(n)&&(s=r.access(n),h=r.set(t,s),o=s.events)){delete h.handle;h.events={};for(f in o)for(u=0,c=o[f].length;c>u;u++)i.event.add(t,f,o[f][u])}e.hasData(n)&&(l=e.access(n),a=i.extend({},l),e.set(t,a))}}function se(n,t){var i=t.nodeName.toLowerCase();"input"===i&&yr.test(n.type)?t.checked=n.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=n.defaultValue)}function b(n,t,u,e){t=gi.apply([],t);var l,p,c,a,s,w,h=0,v=n.length,d=v-1,y=t[0],k=i.isFunction(y);if(k||v>1&&"string"==typeof y&&!f.checkClone&&re.test(y))return n.each(function(i){var r=n.eq(i);k&&(t[0]=y.call(this,i,r.html()));b(r,t,u,e)});if(v&&(l=kr(t,n[0].ownerDocument,!1,n,e),p=l.firstChild,1===l.childNodes.length&&(l=p),p||e)){for(c=i.map(o(l,"script"),ee),a=c.length;v>h;h++)s=l,h!==d&&(s=i.clone(s,!0,!0),a&&i.merge(c,o(s,"script"))),u.call(n[h],s,h);if(a)for(w=c[c.length-1].ownerDocument,i.map(c,oe),h=0;a>h;h++)s=c[h],wr.test(s.type||"")&&!r.access(s,"globalEval")&&i.contains(w,s)&&(s.src?i._evalUrl&&i._evalUrl(s.src):i.globalEval(s.textContent.replace(fe,"")))}return n}function iu(n,t,r){for(var u,e=t?i.filter(t,n):n,f=0;null!=(u=e[f]);f++)r||1!==u.nodeType||i.cleanData(o(u)),u.parentNode&&(r&&i.contains(u.ownerDocument,u)&&ui(o(u,"script")),u.parentNode.removeChild(u));return n}function ru(n,t){var r=i(t.createElement(n)).appendTo(t.body),u=i.css(r[0],"display");return r.detach(),u}function oi(n){var r=u,t=ei[n];return t||(t=ru(n,r),"none"!==t&&t||(wt=(wt||i("<iframe frameborder='0' width='0' height='0'/>")).appendTo(r.documentElement),r=wt[0].contentDocument,r.write(),r.close(),t=ru(n,r),wt.detach()),ei[n]=t),t}function tt(n,t,r){var o,s,h,u,e=n.style;return r=r||bt(n),u=r?r.getPropertyValue(t)||r[t]:void 0,""!==u&&void 0!==u||i.contains(n.ownerDocument,n)||(u=i.style(n,t)),r&&!f.pixelMarginRight()&&si.test(u)&&uu.test(t)&&(o=e.width,s=e.minWidth,h=e.maxWidth,e.minWidth=e.maxWidth=e.width=u,u=r.width,e.width=o,e.minWidth=s,e.maxWidth=h),void 0!==u?u+"":u}function ci(n,t){return{get:function(){return n()?void delete this.get:(this.get=t).apply(this,arguments)}}}function su(n){if(n in ou)return n;for(var i=n[0].toUpperCase()+n.slice(1),t=eu.length;t--;)if(n=eu[t]+i,n in ou)return n}function hu(n,t,i){var r=ot.exec(t);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):t}function cu(n,t,r,u,f){for(var e=r===(u?"border":"content")?4:"width"===t?1:0,o=0;4>e;e+=2)"margin"===r&&(o+=i.css(n,r+w[e],!0,f)),u?("content"===r&&(o-=i.css(n,"padding"+w[e],!0,f)),"margin"!==r&&(o-=i.css(n,"border"+w[e]+"Width",!0,f))):(o+=i.css(n,"padding"+w[e],!0,f),"padding"!==r&&(o+=i.css(n,"border"+w[e]+"Width",!0,f)));return o}function lu(n,t,r){var o=!0,u="width"===t?n.offsetWidth:n.offsetHeight,e=bt(n),s="border-box"===i.css(n,"boxSizing",!1,e);if(0>=u||null==u){if(u=tt(n,t,e),(0>u||null==u)&&(u=n.style[t]),si.test(u))return u;o=s&&(f.boxSizingReliable()||u===n.style[t]);u=parseFloat(u)||0}return u+cu(n,t,r||(s?"border":"content"),o,e)+"px"}function au(n,t){for(var e,u,s,o=[],f=0,h=n.length;h>f;f++)u=n[f],u.style&&(o[f]=r.get(u,"olddisplay"),e=u.style.display,t?(o[f]||"none"!==e||(u.style.display=""),""===u.style.display&&st(u)&&(o[f]=r.access(u,"olddisplay",oi(u.nodeName)))):(s=st(u),"none"===e&&s||r.set(u,"olddisplay",s?e:i.css(u,"display"))));for(f=0;h>f;f++)u=n[f],u.style&&(t&&"none"!==u.style.display&&""!==u.style.display||(u.style.display=t?o[f]||"":"none"));return n}function s(n,t,i,r,u){return new s.prototype.init(n,t,i,r,u)}function pu(){return n.setTimeout(function(){it=void 0}),it=i.now()}function dt(n,t){var r,u=0,i={height:n};for(t=t?1:0;4>u;u+=2-t)r=w[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function wu(n,t,i){for(var u,f=(l.tweeners[t]||[]).concat(l.tweeners["*"]),r=0,e=f.length;e>r;r++)if(u=f[r].call(i,t,n))return u}function le(n,t,u){var f,a,p,v,o,w,h,b,l=this,y={},s=n.style,c=n.nodeType&&st(n),e=r.get(n,"fxshow");u.queue||(o=i._queueHooks(n,"fx"),null==o.unqueued&&(o.unqueued=0,w=o.empty.fire,o.empty.fire=function(){o.unqueued||w()}),o.unqueued++,l.always(function(){l.always(function(){o.unqueued--;i.queue(n,"fx").length||o.empty.fire()})}));1===n.nodeType&&("height"in t||"width"in t)&&(u.overflow=[s.overflow,s.overflowX,s.overflowY],h=i.css(n,"display"),b="none"===h?r.get(n,"olddisplay")||oi(n.nodeName):h,"inline"===b&&"none"===i.css(n,"float")&&(s.display="inline-block"));u.overflow&&(s.overflow="hidden",l.always(function(){s.overflow=u.overflow[0];s.overflowX=u.overflow[1];s.overflowY=u.overflow[2]}));for(f in t)if(a=t[f],vu.exec(a)){if(delete t[f],p=p||"toggle"===a,a===(c?"hide":"show")){if("show"!==a||!e||void 0===e[f])continue;c=!0}y[f]=e&&e[f]||i.style(n,f)}else h=void 0;if(i.isEmptyObject(y))"inline"===("none"===h?oi(n.nodeName):h)&&(s.display=h);else{e?"hidden"in e&&(c=e.hidden):e=r.access(n,"fxshow",{});p&&(e.hidden=!c);c?i(n).show():l.done(function(){i(n).hide()});l.done(function(){var t;r.remove(n,"fxshow");for(t in y)i.style(n,t,y[t])});for(f in y)v=wu(c?e[f]:0,f,l),f in e||(e[f]=v.start,c&&(v.end=v.start,v.start="width"===f||"height"===f?1:0))}}function ae(n,t){var r,f,e,u,o;for(r in n)if(f=i.camelCase(r),e=t[f],u=n[r],i.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function l(n,t,r){var e,o,s=0,a=l.prefilters.length,f=i.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var s=it||pu(),t=Math.max(0,u.startTime+u.duration-s),h=t/u.duration||0,i=1-h,r=0,e=u.tweens.length;e>r;r++)u.tweens[r].run(i);return f.notifyWith(n,[u,i,t]),1>i&&e?t:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{},easing:i.easing._default},r),originalProperties:t,originalOptions:r,startTime:it||pu(),duration:r.duration,tweens:[],createTween:function(t,r){var f=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(f),f},stop:function(t){var i=0,r=t?u.tweens.length:0;if(o)return this;for(o=!0;r>i;i++)u.tweens[i].run(1);return t?(f.notifyWith(n,[u,1,0]),f.resolveWith(n,[u,t])):f.rejectWith(n,[u,t]),this}}),h=u.props;for(ae(h,u.opts.specialEasing);a>s;s++)if(e=l.prefilters[s].call(u,n,h,u.opts))return i.isFunction(e.stop)&&(i._queueHooks(u.elem,u.opts.queue).stop=i.proxy(e.stop,e)),e;return i.map(h,wu,u),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(c,{elem:n,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function k(n){return n.getAttribute&&n.getAttribute("class")||""}function ff(n){return function(t,r){"string"!=typeof t&&(r=t,t="*");var u,f=0,e=t.toLowerCase().match(h)||[];if(i.isFunction(r))while(u=e[f++])"+"===u[0]?(u=u.slice(1)||"*",(n[u]=n[u]||[]).unshift(r)):(n[u]=n[u]||[]).push(r)}}function ef(n,t,r,u){function e(s){var h;return f[s]=!0,i.each(n[s]||[],function(n,i){var s=i(t,r,u);return"string"!=typeof s||o||f[s]?o?!(h=s):void 0:(t.dataTypes.unshift(s),e(s),!1)}),h}var f={},o=n===yi;return e(t.dataTypes[0])||!f["*"]&&e("*")}function wi(n,t){var r,u,f=i.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((f[r]?n:u||(u={}))[r]=t[r]);return u&&i.extend(!0,n,u),n}function be(n,t,i){for(var e,u,f,o,s=n.contents,r=n.dataTypes;"*"===r[0];)r.shift(),void 0===e&&(e=n.mimeType||t.getResponseHeader("Content-Type"));if(e)for(u in s)if(s[u]&&s[u].test(e)){r.unshift(u);break}if(r[0]in i)f=r[0];else{for(u in i){if(!r[0]||n.converters[u+" "+r[0]]){f=u;break}o||(o=u)}f=f||o}if(f)return(f!==r[0]&&r.unshift(f),i[f])}function ke(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift())if("*"===u)u=e;else if("*"!==e&&e!==u){if(f=o[e+" "+u]||o["* "+u],!f)for(h in o)if(s=h.split(" "),s[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]])){f===!0?f=o[h]:o[h]!==!0&&(u=s[0],c.unshift(s[1]));break}if(f!==!0)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(l){return{state:"parsererror",error:f?l:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}function bi(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||ge.test(n)?u(n,i):bi(n+"["+("object"==typeof i&&null!=i?t:"")+"]",i,r,u)});else if(r||"object"!==i.type(t))u(n,t);else for(f in t)bi(n+"["+f+"]",t[f],r,u)}function hf(n){return i.isWindow(n)?n:9===n.nodeType&&n.defaultView}var y=[],u=n.document,v=y.slice,gi=y.concat,ti=y.push,lt=y.indexOf,at={},af=at.toString,ft=at.hasOwnProperty,f={},nr="2.2.4",i=function(n,t){return new i.fn.init(n,t)},vf=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,yf=/^-ms-/,pf=/-([\da-z])/gi,wf=function(n,t){return t.toUpperCase()},p,ur,fr,er,or,sr,h,vt,a,g,br,wt,ei,it,kt,vu,yu,bu,rt,ku,du,gt,gu,nf,li,sf,ut,ki,ni,di,cf,lf;i.fn=i.prototype={jquery:nr,constructor:i,selector:"",length:0,toArray:function(){return v.call(this)},get:function(n){return null!=n?0>n?this[n+this.length]:this[n]:v.call(this)},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n){return i.each(this,n)},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},slice:function(){return this.pushStack(v.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(0>n?i:0);return this.pushStack(t>=0&&i>t?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:ti,sort:y.sort,splice:y.splice};i.extend=i.fn.extend=function(){var e,f,r,t,o,s,n=arguments[0]||{},u=1,c=arguments.length,h=!1;for("boolean"==typeof n&&(h=n,n=arguments[u]||{},u++),"object"==typeof n||i.isFunction(n)||(n={}),u===c&&(n=this,u--);c>u;u++)if(null!=(e=arguments[u]))for(f in e)r=n[f],t=e[f],n!==t&&(h&&t&&(i.isPlainObject(t)||(o=i.isArray(t)))?(o?(o=!1,s=r&&i.isArray(r)?r:[]):s=r&&i.isPlainObject(r)?r:{},n[f]=i.extend(h,s,t)):void 0!==t&&(n[f]=t));return n};i.extend({expando:"jQuery"+(nr+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n);},noop:function(){},isFunction:function(n){return"function"===i.type(n)},isArray:Array.isArray,isWindow:function(n){return null!=n&&n===n.window},isNumeric:function(n){var t=n&&n.toString();return!i.isArray(n)&&t-parseFloat(t)+1>=0},isPlainObject:function(n){var t;if("object"!==i.type(n)||n.nodeType||i.isWindow(n)||n.constructor&&!ft.call(n,"constructor")&&!ft.call(n.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in n);return void 0===t||ft.call(n,t)},isEmptyObject:function(n){for(var t in n)return!1;return!0},type:function(n){return null==n?n+"":"object"==typeof n||"function"==typeof n?at[af.call(n)]||"object":typeof n},globalEval:function(n){var t,r=eval;n=i.trim(n);n&&(1===n.indexOf("use strict")?(t=u.createElement("script"),t.text=n,u.head.appendChild(t).parentNode.removeChild(t)):r(n))},camelCase:function(n){return n.replace(yf,"ms-").replace(pf,wf)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t){var r,i=0;if(ii(n)){for(r=n.length;r>i;i++)if(t.call(n[i],i,n[i])===!1)break}else for(i in n)if(t.call(n[i],i,n[i])===!1)break;return n},trim:function(n){return null==n?"":(n+"").replace(vf,"")},makeArray:function(n,t){var r=t||[];return null!=n&&(ii(Object(n))?i.merge(r,"string"==typeof n?[n]:n):ti.call(r,n)),r},inArray:function(n,t,i){return null==t?-1:lt.call(t,n,i)},merge:function(n,t){for(var u=+t.length,i=0,r=n.length;u>i;i++)n[r++]=t[i];return n.length=r,n},grep:function(n,t,i){for(var u,f=[],r=0,e=n.length,o=!i;e>r;r++)u=!t(n[r],r),u!==o&&f.push(n[r]);return f},map:function(n,t,i){var e,u,r=0,f=[];if(ii(n))for(e=n.length;e>r;r++)u=t(n[r],r,i),null!=u&&f.push(u);else for(r in n)u=t(n[r],r,i),null!=u&&f.push(u);return gi.apply([],f)},guid:1,proxy:function(n,t){var u,f,r;return"string"==typeof t&&(u=n[t],t=n,n=u),i.isFunction(n)?(f=v.call(arguments,2),r=function(){return n.apply(t||this,f.concat(v.call(arguments)))},r.guid=n.guid=n.guid||i.guid++,r):void 0},now:Date.now,support:f});"function"==typeof Symbol&&(i.fn[Symbol.iterator]=y[Symbol.iterator]);i.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(n,t){at["[object "+t+"]"]=t.toLowerCase()});p=function(n){function u(n,t,r,u){var l,w,a,s,nt,d,y,g,p=t&&t.ownerDocument,v=t?t.nodeType:9;if(r=r||[],"string"!=typeof n||!n||1!==v&&9!==v&&11!==v)return r;if(!u&&((t?t.ownerDocument||t:c)!==i&&b(t),t=t||i,h)){if(11!==v&&(d=sr.exec(n)))if(l=d[1]){if(9===v){if(!(a=t.getElementById(l)))return r;if(a.id===l)return r.push(a),r}else if(p&&(a=p.getElementById(l))&&et(t,a)&&a.id===l)return r.push(a),r}else{if(d[2])return k.apply(r,t.getElementsByTagName(n)),r;if((l=d[3])&&f.getElementsByClassName&&t.getElementsByClassName)return k.apply(r,t.getElementsByClassName(l)),r}if(f.qsa&&!lt[n+" "]&&(!o||!o.test(n))){if(1!==v)p=t,g=n;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(hr,"\\$&"):t.setAttribute("id",s=e),y=ft(n),w=y.length,nt=yi.test(s)?"#"+s:"[id='"+s+"']";w--;)y[w]=nt+" "+yt(y[w]);g=y.join(",");p=gt.test(n)&&ii(t.parentNode)||t}if(g)try{return k.apply(r,p.querySelectorAll(g)),r}catch(tt){}finally{s===e&&t.removeAttribute("id")}}}return si(n.replace(at,"$1"),t,r,u)}function ni(){function n(r,u){return i.push(r+" ")>t.cacheLength&&delete n[i.shift()],n[r+" "]=u}var i=[];return n}function l(n){return n[e]=!0,n}function a(n){var t=i.createElement("div");try{return!!n(t)}catch(r){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function ti(n,i){for(var r=n.split("|"),u=r.length;u--;)t.attrHandle[r[u]]=i}function wi(n,t){var i=t&&n,r=i&&1===n.nodeType&&1===t.nodeType&&(~t.sourceIndex||li)-(~n.sourceIndex||li);if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function cr(n){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===n}}function lr(n){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===n}}function it(n){return l(function(t){return t=+t,l(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ii(n){return n&&"undefined"!=typeof n.getElementsByTagName&&n}function bi(){}function yt(n){for(var t=0,r=n.length,i="";r>t;t++)i+=n[t].value;return i}function ri(n,t,i){var r=t.dir,u=i&&"parentNode"===r,f=ki++;return t.first?function(t,i,f){while(t=t[r])if(1===t.nodeType||u)return n(t,i,f)}:function(t,i,o){var s,h,c,l=[v,f];if(o){while(t=t[r])if((1===t.nodeType||u)&&n(t,i,o))return!0}else while(t=t[r])if(1===t.nodeType||u){if(c=t[e]||(t[e]={}),h=c[t.uniqueID]||(c[t.uniqueID]={}),(s=h[r])&&s[0]===v&&s[1]===f)return l[2]=s[2];if(h[r]=l,l[2]=n(t,i,o))return!0}}}function ui(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function ar(n,t,i){for(var r=0,f=t.length;f>r;r++)u(n,t[r],i);return i}function pt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=null!=t;s>f;f++)(e=n[f])&&(i&&!i(e,r,u)||(o.push(e),h&&t.push(f)));return o}function fi(n,t,i,r,u,f){return r&&!r[e]&&(r=fi(r)),u&&!u[e]&&(u=fi(u,f)),l(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,b=f||ar(t||"*",o.nodeType?[o]:o,[]),v=!n||!f&&t?b:pt(b,p,n,o,s),h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=pt(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?nt(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=pt(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):k.apply(e,h)})}function ei(n){for(var o,u,r,s=n.length,h=t.relative[n[0].type],c=h||t.relative[" "],i=h?1:0,l=ri(function(n){return n===o},c,!0),a=ri(function(n){return nt(o,n)>-1},c,!0),f=[function(n,t,i){var r=!h&&(i||t!==ht)||((o=t).nodeType?l(n,t,i):a(n,t,i));return o=null,r}];s>i;i++)if(u=t.relative[n[i].type])f=[ri(ui(f),u)];else{if(u=t.filter[n[i].type].apply(null,n[i].matches),u[e]){for(r=++i;s>r;r++)if(t.relative[n[r].type])break;return fi(i>1&&ui(f),i>1&&yt(n.slice(0,i-1).concat({value:" "===n[i-2].type?"*":""})).replace(at,"$1"),u,r>i&&ei(n.slice(i,r)),s>r&&ei(n=n.slice(r)),s>r&&yt(n))}f.push(u)}return ui(f)}function vr(n,r){var f=r.length>0,e=n.length>0,o=function(o,s,c,l,a){var y,nt,d,g=0,p="0",tt=o&&[],w=[],it=ht,rt=o||e&&t.find.TAG("*",a),ut=v+=null==it?1:Math.random()||.1,ft=rt.length;for(a&&(ht=s===i||s||a);p!==ft&&null!=(y=rt[p]);p++){if(e&&y){for(nt=0,s||y.ownerDocument===i||(b(y),c=!h);d=n[nt++];)if(d(y,s||i,c)){l.push(y);break}a&&(v=ut)}f&&((y=!d&&y)&&g--,o&&tt.push(y))}if(g+=p,f&&p!==g){for(nt=0;d=r[nt++];)d(tt,w,s,c);if(o){if(g>0)while(p--)tt[p]||w[p]||(w[p]=gi.call(l));w=pt(w)}k.apply(l,w);a&&!o&&w.length>0&&g+r.length>1&&u.uniqueSort(l)}return a&&(v=ut,ht=it),tt};return f?l(o):o}var rt,f,t,st,oi,ft,wt,si,ht,w,ut,b,i,s,h,o,d,ct,et,e="sizzle"+1*new Date,c=n.document,v=0,ki=0,hi=ni(),ci=ni(),lt=ni(),bt=function(n,t){return n===t&&(ut=!0),0},li=-2147483648,di={}.hasOwnProperty,g=[],gi=g.pop,nr=g.push,k=g.push,ai=g.slice,nt=function(n,t){for(var i=0,r=n.length;r>i;i++)if(n[i]===t)return i;return-1},kt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",r="[\\x20\\t\\r\\n\\f]",tt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",vi="\\["+r+"*("+tt+")(?:"+r+"*([*^$|!~]?=)"+r+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+tt+"))|)"+r+"*\\]",dt=":("+tt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+vi+")*)|.*)\\)|)",tr=new RegExp(r+"+","g"),at=new RegExp("^"+r+"+|((?:^|[^\\\\])(?:\\\\.)*)"+r+"+$","g"),ir=new RegExp("^"+r+"*,"+r+"*"),rr=new RegExp("^"+r+"*([>+~]|"+r+")"+r+"*"),ur=new RegExp("="+r+"*([^\\]'\"]*?)"+r+"*\\]","g"),fr=new RegExp(dt),yi=new RegExp("^"+tt+"$"),vt={ID:new RegExp("^#("+tt+")"),CLASS:new RegExp("^\\.("+tt+")"),TAG:new RegExp("^("+tt+"|[*])"),ATTR:new RegExp("^"+vi),PSEUDO:new RegExp("^"+dt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+r+"*(even|odd|(([+-]|)(\\d*)n|)"+r+"*(?:([+-]|)"+r+"*(\\d+)|))"+r+"*\\)|)","i"),bool:new RegExp("^(?:"+kt+")$","i"),needsContext:new RegExp("^"+r+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+r+"*((?:-\\d)?\\d*)"+r+"*\\)|)(?=[^-]|$)","i")},er=/^(?:input|select|textarea|button)$/i,or=/^h\d$/i,ot=/^[^{]+\{\s*\[native \w/,sr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,hr=/'|\\/g,y=new RegExp("\\\\([\\da-f]{1,6}"+r+"?|("+r+")|.)","ig"),p=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},pi=function(){b()};try{k.apply(g=ai.call(c.childNodes),c.childNodes);g[c.childNodes.length].nodeType}catch(yr){k={apply:g.length?function(n,t){nr.apply(n,ai.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}f=u.support={};oi=u.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?"HTML"!==t.nodeName:!1};b=u.setDocument=function(n){var v,u,l=n?n.ownerDocument||n:c;return l!==i&&9===l.nodeType&&l.documentElement?(i=l,s=i.documentElement,h=!oi(i),(u=i.defaultView)&&u.top!==u&&(u.addEventListener?u.addEventListener("unload",pi,!1):u.attachEvent&&u.attachEvent("onunload",pi)),f.attributes=a(function(n){return n.className="i",!n.getAttribute("className")}),f.getElementsByTagName=a(function(n){return n.appendChild(i.createComment("")),!n.getElementsByTagName("*").length}),f.getElementsByClassName=ot.test(i.getElementsByClassName),f.getById=a(function(n){return s.appendChild(n).id=e,!i.getElementsByName||!i.getElementsByName(e).length}),f.getById?(t.find.ID=function(n,t){if("undefined"!=typeof t.getElementById&&h){var i=t.getElementById(n);return i?[i]:[]}},t.filter.ID=function(n){var t=n.replace(y,p);return function(n){return n.getAttribute("id")===t}}):(delete t.find.ID,t.filter.ID=function(n){var t=n.replace(y,p);return function(n){var i="undefined"!=typeof n.getAttributeNode&&n.getAttributeNode("id");return i&&i.value===t}}),t.find.TAG=f.getElementsByTagName?function(n,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(n):f.qsa?t.querySelectorAll(n):void 0}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if("*"===n){while(i=u[f++])1===i.nodeType&&r.push(i);return r}return u},t.find.CLASS=f.getElementsByClassName&&function(n,t){if("undefined"!=typeof t.getElementsByClassName&&h)return t.getElementsByClassName(n)},d=[],o=[],(f.qsa=ot.test(i.querySelectorAll))&&(a(function(n){s.appendChild(n).innerHTML="<a id='"+e+"'><\/a><select id='"+e+"-\r\\' msallowcapture=''><option selected=''><\/option><\/select>";n.querySelectorAll("[msallowcapture^='']").length&&o.push("[*^$]="+r+"*(?:''|\"\")");n.querySelectorAll("[selected]").length||o.push("\\["+r+"*(?:value|"+kt+")");n.querySelectorAll("[id~="+e+"-]").length||o.push("~=");n.querySelectorAll(":checked").length||o.push(":checked");n.querySelectorAll("a#"+e+"+*").length||o.push(".#.+[+~]")}),a(function(n){var t=i.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("name","D");n.querySelectorAll("[name=d]").length&&o.push("name"+r+"*[*^$|!~]?=");n.querySelectorAll(":enabled").length||o.push(":enabled",":disabled");n.querySelectorAll("*,:x");o.push(",.*:")})),(f.matchesSelector=ot.test(ct=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&a(function(n){f.disconnectedMatch=ct.call(n,"div");ct.call(n,"[s!='']:x");d.push("!=",dt)}),o=o.length&&new RegExp(o.join("|")),d=d.length&&new RegExp(d.join("|")),v=ot.test(s.compareDocumentPosition),et=v||ot.test(s.contains)?function(n,t){var r=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},bt=v?function(n,t){if(n===t)return ut=!0,0;var r=!n.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1,1&r||!f.sortDetached&&t.compareDocumentPosition(n)===r?n===i||n.ownerDocument===c&&et(c,n)?-1:t===i||t.ownerDocument===c&&et(c,t)?1:w?nt(w,n)-nt(w,t):0:4&r?-1:1)}:function(n,t){if(n===t)return ut=!0,0;var r,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(!o||!s)return n===i?-1:t===i?1:o?-1:s?1:w?nt(w,n)-nt(w,t):0;if(o===s)return wi(n,t);for(r=n;r=r.parentNode;)f.unshift(r);for(r=t;r=r.parentNode;)e.unshift(r);while(f[u]===e[u])u++;return u?wi(f[u],e[u]):f[u]===c?-1:e[u]===c?1:0},i):i};u.matches=function(n,t){return u(n,null,null,t)};u.matchesSelector=function(n,t){if((n.ownerDocument||n)!==i&&b(n),t=t.replace(ur,"='$1']"),f.matchesSelector&&h&&!lt[t+" "]&&(!d||!d.test(t))&&(!o||!o.test(t)))try{var r=ct.call(n,t);if(r||f.disconnectedMatch||n.document&&11!==n.document.nodeType)return r}catch(e){}return u(t,i,null,[n]).length>0};u.contains=function(n,t){return(n.ownerDocument||n)!==i&&b(n),et(n,t)};u.attr=function(n,r){(n.ownerDocument||n)!==i&&b(n);var e=t.attrHandle[r.toLowerCase()],u=e&&di.call(t.attrHandle,r.toLowerCase())?e(n,r,!h):void 0;return void 0!==u?u:f.attributes||!h?n.getAttribute(r):(u=n.getAttributeNode(r))&&u.specified?u.value:null};u.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};u.uniqueSort=function(n){var r,u=[],t=0,i=0;if(ut=!f.detectDuplicates,w=!f.sortStable&&n.slice(0),n.sort(bt),ut){while(r=n[i++])r===n[i]&&(t=u.push(i));while(t--)n.splice(u[t],1)}return w=null,n};st=u.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=st(n)}else if(3===t||4===t)return n.nodeValue}else while(r=n[u++])i+=st(r);return i};t=u.selectors={cacheLength:50,createPseudo:l,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(y,p),n[3]=(n[3]||n[4]||n[5]||"").replace(y,p),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||u.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&u.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return vt.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&fr.test(t)&&(i=ft(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(y,p).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=hi[n+" "];return t||(t=new RegExp("(^|"+r+")"+n+"("+r+"|$)"))&&hi(n,function(n){return t.test("string"==typeof n.className&&n.className||"undefined"!=typeof n.getAttribute&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(r){var f=u.attr(r,n);return null==f?"!="===t:t?(f+="","="===t?f===i:"!="===t?f!==i:"^="===t?i&&0===f.indexOf(i):"*="===t?i&&f.indexOf(i)>-1:"$="===t?i&&f.slice(-i.length)===i:"~="===t?(" "+f.replace(tr," ")+" ").indexOf(i)>-1:"|="===t?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s="nth"!==n.slice(0,3),o="last"!==n.slice(-4),f="of-type"===t;return 1===r&&0===u?function(n){return!!n.parentNode}:function(t,i,h){var p,w,y,c,a,b,k=s!==o?"nextSibling":"previousSibling",d=t.parentNode,nt=f&&t.nodeName.toLowerCase(),g=!h&&!f,l=!1;if(d){if(s){while(k){for(c=t;c=c[k];)if(f?c.nodeName.toLowerCase()===nt:1===c.nodeType)return!1;b=k="only"===n&&!b&&"nextSibling"}return!0}if(b=[o?d.firstChild:d.lastChild],o&&g){for(c=d,y=c[e]||(c[e]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),p=w[n]||[],a=p[0]===v&&p[1],l=a&&p[2],c=a&&d.childNodes[a];c=++a&&c&&c[k]||(l=a=0)||b.pop();)if(1===c.nodeType&&++l&&c===t){w[n]=[v,a,l];break}}else if(g&&(c=t,y=c[e]||(c[e]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),p=w[n]||[],a=p[0]===v&&p[1],l=a),l===!1)while(c=++a&&c&&c[k]||(l=a=0)||b.pop())if((f?c.nodeName.toLowerCase()===nt:1===c.nodeType)&&++l&&(g&&(y=c[e]||(c[e]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),w[n]=[v,l]),c===t))break;return l-=u,l===r||l%r==0&&l/r>=0}}},PSEUDO:function(n,i){var f,r=t.pseudos[n]||t.setFilters[n.toLowerCase()]||u.error("unsupported pseudo: "+n);return r[e]?r(i):r.length>1?(f=[n,n,"",i],t.setFilters.hasOwnProperty(n.toLowerCase())?l(function(n,t){for(var u,f=r(n,i),e=f.length;e--;)u=nt(n,f[e]),n[u]=!(t[u]=f[e])}):function(n){return r(n,0,f)}):r}},pseudos:{not:l(function(n){var t=[],r=[],i=wt(n.replace(at,"$1"));return i[e]?l(function(n,t,r,u){for(var e,o=i(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(t[f]=e))}):function(n,u,f){return t[0]=n,i(t,null,f,r),t[0]=null,!r.pop()}}),has:l(function(n){return function(t){return u(n,t).length>0}}),contains:l(function(n){return n=n.replace(y,p),function(t){return(t.textContent||t.innerText||st(t)).indexOf(n)>-1}}),lang:l(function(n){return yi.test(n||"")||u.error("unsupported lang: "+n),n=n.replace(y,p).toLowerCase(),function(t){var i;do if(i=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||0===i.indexOf(n+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===s},focus:function(n){return n===i.activeElement&&(!i.hasFocus||i.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!t.pseudos.empty(n)},header:function(n){return or.test(n.nodeName)},input:function(n){return er.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||"text"===t.toLowerCase())},first:it(function(){return[0]}),last:it(function(n,t){return[t-1]}),eq:it(function(n,t,i){return[0>i?i+t:i]}),even:it(function(n,t){for(var i=0;t>i;i+=2)n.push(i);return n}),odd:it(function(n,t){for(var i=1;t>i;i+=2)n.push(i);return n}),lt:it(function(n,t,i){for(var r=0>i?i+t:i;--r>=0;)n.push(r);return n}),gt:it(function(n,t,i){for(var r=0>i?i+t:i;++r<t;)n.push(r);return n})}};t.pseudos.nth=t.pseudos.eq;for(rt in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[rt]=cr(rt);for(rt in{submit:!0,reset:!0})t.pseudos[rt]=lr(rt);return bi.prototype=t.filters=t.pseudos,t.setFilters=new bi,ft=u.tokenize=function(n,i){var e,f,s,o,r,h,c,l=ci[n+" "];if(l)return i?0:l.slice(0);for(r=n,h=[],c=t.preFilter;r;){(!e||(f=ir.exec(r)))&&(f&&(r=r.slice(f[0].length)||r),h.push(s=[]));e=!1;(f=rr.exec(r))&&(e=f.shift(),s.push({value:e,type:f[0].replace(at," ")}),r=r.slice(e.length));for(o in t.filter)(f=vt[o].exec(r))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),r=r.slice(e.length));if(!e)break}return i?r.length:r?u.error(n):ci(n,h).slice(0)},wt=u.compile=function(n,t){var r,u=[],f=[],i=lt[n+" "];if(!i){for(t||(t=ft(n)),r=t.length;r--;)i=ei(t[r]),i[e]?u.push(i):f.push(i);i=lt(n,vr(f,u));i.selector=n}return i},si=u.select=function(n,i,r,u){var s,e,o,a,v,l="function"==typeof n&&n,c=!u&&ft(n=l.selector||n);if(r=r||[],1===c.length){if(e=c[0]=c[0].slice(0),e.length>2&&"ID"===(o=e[0]).type&&f.getById&&9===i.nodeType&&h&&t.relative[e[1].type]){if(i=(t.find.ID(o.matches[0].replace(y,p),i)||[])[0],!i)return r;l&&(i=i.parentNode);n=n.slice(e.shift().value.length)}for(s=vt.needsContext.test(n)?0:e.length;s--;){if(o=e[s],t.relative[a=o.type])break;if((v=t.find[a])&&(u=v(o.matches[0].replace(y,p),gt.test(e[0].type)&&ii(i.parentNode)||i))){if(e.splice(s,1),n=u.length&&yt(e),!n)return k.apply(r,u),r;break}}}return(l||wt(n,c))(u,i,!h,r,!i||gt.test(n)&&ii(i.parentNode)||i),r},f.sortStable=e.split("").sort(bt).join("")===e,f.detectDuplicates=!!ut,b(),f.sortDetached=a(function(n){return 1&n.compareDocumentPosition(i.createElement("div"))}),a(function(n){return n.innerHTML="<a href='#'><\/a>","#"===n.firstChild.getAttribute("href")})||ti("type|href|height|width",function(n,t,i){if(!i)return n.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&a(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),""===n.firstChild.getAttribute("value")})||ti("value",function(n,t,i){if(!i&&"input"===n.nodeName.toLowerCase())return n.defaultValue}),a(function(n){return null==n.getAttribute("disabled")})||ti(kt,function(n,t,i){var r;if(!i)return n[t]===!0?t.toLowerCase():(r=n.getAttributeNode(t))&&r.specified?r.value:null}),u}(n);i.find=p;i.expr=p.selectors;i.expr[":"]=i.expr.pseudos;i.uniqueSort=i.unique=p.uniqueSort;i.text=p.getText;i.isXMLDoc=p.isXML;i.contains=p.contains;var d=function(n,t,r){for(var u=[],f=void 0!==r;(n=n[t])&&9!==n.nodeType;)if(1===n.nodeType){if(f&&i(n).is(r))break;u.push(n)}return u},tr=function(n,t){for(var i=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&i.push(n);return i},ir=i.expr.match.needsContext,rr=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,bf=/^.[^:#\[\.,]*$/;i.filter=function(n,t,r){var u=t[0];return r&&(n=":not("+n+")"),1===t.length&&1===u.nodeType?i.find.matchesSelector(u,n)?[u]:[]:i.find.matches(n,i.grep(t,function(n){return 1===n.nodeType}))};i.fn.extend({find:function(n){var t,u=this.length,r=[],f=this;if("string"!=typeof n)return this.pushStack(i(n).filter(function(){for(t=0;u>t;t++)if(i.contains(f[t],this))return!0}));for(t=0;u>t;t++)i.find(n,f[t],r);return r=this.pushStack(u>1?i.unique(r):r),r.selector=this.selector?this.selector+" "+n:n,r},filter:function(n){return this.pushStack(ri(this,n||[],!1))},not:function(n){return this.pushStack(ri(this,n||[],!0))},is:function(n){return!!ri(this,"string"==typeof n&&ir.test(n)?i(n):n||[],!1).length}});fr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;er=i.fn.init=function(n,t,r){var f,e;if(!n)return this;if(r=r||ur,"string"==typeof n){if(f="<"===n[0]&&">"===n[n.length-1]&&n.length>=3?[null,n,null]:fr.exec(n),!f||!f[1]&&t)return!t||t.jquery?(t||r).find(n):this.constructor(t).find(n);if(f[1]){if(t=t instanceof i?t[0]:t,i.merge(this,i.parseHTML(f[1],t&&t.nodeType?t.ownerDocument||t:u,!0)),rr.test(f[1])&&i.isPlainObject(t))for(f in t)i.isFunction(this[f])?this[f](t[f]):this.attr(f,t[f]);return this}return e=u.getElementById(f[2]),e&&e.parentNode&&(this.length=1,this[0]=e),this.context=u,this.selector=n,this}return n.nodeType?(this.context=this[0]=n,this.length=1,this):i.isFunction(n)?void 0!==r.ready?r.ready(n):n(i):(void 0!==n.selector&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))};er.prototype=i.fn;ur=i(u);or=/^(?:parents|prev(?:Until|All))/;sr={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({has:function(n){var t=i(n,this),r=t.length;return this.filter(function(){for(var n=0;r>n;n++)if(i.contains(this,t[n]))return!0})},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=ir.test(n)||"string"!=typeof n?i(n,t||this.context):0;o>f;f++)for(r=this[f];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(e?e.index(r)>-1:1===r.nodeType&&i.find.matchesSelector(r,n))){u.push(r);break}return this.pushStack(u.length>1?i.uniqueSort(u):u)},index:function(n){return n?"string"==typeof n?lt.call(i(n),this[0]):lt.call(this,n.jquery?n[0]:n):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(i.uniqueSort(i.merge(this.get(),i(n,t))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}});i.each({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return d(n,"parentNode")},parentsUntil:function(n,t,i){return d(n,"parentNode",i)},next:function(n){return hr(n,"nextSibling")},prev:function(n){return hr(n,"previousSibling")},nextAll:function(n){return d(n,"nextSibling")},prevAll:function(n){return d(n,"previousSibling")},nextUntil:function(n,t,i){return d(n,"nextSibling",i)},prevUntil:function(n,t,i){return d(n,"previousSibling",i)},siblings:function(n){return tr((n.parentNode||{}).firstChild,n)},children:function(n){return tr(n.firstChild)},contents:function(n){return n.contentDocument||i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return"Until"!==n.slice(-5)&&(u=r),u&&"string"==typeof u&&(f=i.filter(u,f)),this.length>1&&(sr[n]||i.uniqueSort(f),or.test(n)&&f.reverse()),this.pushStack(f)}});h=/\S+/g;i.Callbacks=function(n){n="string"==typeof n?kf(n):i.extend({},n);var o,r,h,f,t=[],e=[],u=-1,c=function(){for(f=n.once,h=o=!0;e.length;u=-1)for(r=e.shift();++u<t.length;)t[u].apply(r[0],r[1])===!1&&n.stopOnFalse&&(u=t.length,r=!1);n.memory||(r=!1);o=!1;f&&(t=r?[]:"")},s={add:function(){return t&&(r&&!o&&(u=t.length-1,e.push(r)),function f(r){i.each(r,function(r,u){i.isFunction(u)?n.unique&&s.has(u)||t.push(u):u&&u.length&&"string"!==i.type(u)&&f(u)})}(arguments),r&&!o&&c()),this},remove:function(){return i.each(arguments,function(n,r){for(var f;(f=i.inArray(r,t,f))>-1;)t.splice(f,1),u>=f&&u--}),this},has:function(n){return n?i.inArray(n,t)>-1:t.length>0},empty:function(){return t&&(t=[]),this},disable:function(){return f=e=[],t=r="",this},disabled:function(){return!t},lock:function(){return f=e=[],r||(t=r=""),this},locked:function(){return!!f},fireWith:function(n,t){return f||(t=t||[],t=[n,t.slice?t.slice():t],e.push(t),o||c()),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!h}};return s};i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(f){i.each(u,function(u,e){var o=i.isFunction(n[u])&&n[u];t[e[1]](function(){var n=o&&o.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().progress(f.notify).done(f.resolve).fail(f.reject):f[e[0]+"With"](this===r?f.promise():this,o?[n]:arguments)})});n=null}).promise()},promise:function(n){return null!=n?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add;o&&e.add(function(){f=o},u[1^n][2].disable,u[2][2].lock);t[i[0]]=function(){return t[i[0]+"With"](this===t?r:this,arguments),this};t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var t=0,u=v.call(arguments),r=u.length,e=1!==r||n&&i.isFunction(n.promise)?r:0,f=1===e?n:i.Deferred(),h=function(n,t,i){return function(r){t[n]=this;i[n]=arguments.length>1?v.call(arguments):r;i===o?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},o,c,s;if(r>1)for(o=new Array(r),c=new Array(r),s=new Array(r);r>t;t++)u[t]&&i.isFunction(u[t].promise)?u[t].promise().progress(h(t,c,o)).done(h(t,s,u)).fail(f.reject):--e;return e||f.resolveWith(s,u),f.promise()}});i.fn.ready=function(n){return i.ready.promise().done(n),this};i.extend({isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){(n===!0?--i.readyWait:i.isReady)||(i.isReady=!0,n!==!0&&--i.readyWait>0||(vt.resolveWith(u,[i]),i.fn.triggerHandler&&(i(u).triggerHandler("ready"),i(u).off("ready"))))}});i.ready.promise=function(t){return vt||(vt=i.Deferred(),"complete"===u.readyState||"loading"!==u.readyState&&!u.documentElement.doScroll?n.setTimeout(i.ready):(u.addEventListener("DOMContentLoaded",yt),n.addEventListener("load",yt))),vt.promise(t)};i.ready.promise();a=function(n,t,r,u,f,e,o){var s=0,c=n.length,h=null==r;if("object"===i.type(r)){f=!0;for(s in r)a(n,t,s,r[s],!0,e,o)}else if(void 0!==u&&(f=!0,i.isFunction(u)||(o=!0),h&&(o?(t.call(n,u),t=null):(h=t,t=function(n,t,r){return h.call(i(n),r)})),t))for(;c>s;s++)t(n[s],r,o?u:u.call(n[s],s,t(n[s],r)));return f?n:h?t.call(n):c?t(n[0],r):e};g=function(n){return 1===n.nodeType||9===n.nodeType||!+n.nodeType};et.uid=1;et.prototype={register:function(n,t){var i=t||{};return n.nodeType?n[this.expando]=i:Object.defineProperty(n,this.expando,{value:i,writable:!0,configurable:!0}),n[this.expando]},cache:function(n){if(!g(n))return{};var t=n[this.expando];return t||(t={},g(n)&&(n.nodeType?n[this.expando]=t:Object.defineProperty(n,this.expando,{value:t,configurable:!0}))),t},set:function(n,t,i){var r,u=this.cache(n);if("string"==typeof t)u[t]=i;else for(r in t)u[r]=t[r];return u},get:function(n,t){return void 0===t?this.cache(n):n[this.expando]&&n[this.expando][t]},access:function(n,t,r){var u;return void 0===t||t&&"string"==typeof t&&void 0===r?(u=this.get(n,t),void 0!==u?u:this.get(n,i.camelCase(t))):(this.set(n,t,r),void 0!==r?r:t)},remove:function(n,t){var f,r,e,u=n[this.expando];if(void 0!==u){if(void 0===t)this.register(n);else for(i.isArray(t)?r=t.concat(t.map(i.camelCase)):(e=i.camelCase(t),(t in u)?r=[t,e]:(r=e,r=(r in u)?[r]:r.match(h)||[])),f=r.length;f--;)delete u[r[f]];(void 0===t||i.isEmptyObject(u))&&(n.nodeType?n[this.expando]=void 0:delete n[this.expando])}},hasData:function(n){var t=n[this.expando];return void 0!==t&&!i.isEmptyObject(t)}};var r=new et,e=new et,df=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,cr=/[A-Z]/g;i.extend({hasData:function(n){return e.hasData(n)||r.hasData(n)},data:function(n,t,i){return e.access(n,t,i)},removeData:function(n,t){e.remove(n,t)},_data:function(n,t,i){return r.access(n,t,i)},_removeData:function(n,t){r.remove(n,t)}});i.fn.extend({data:function(n,t){var o,f,s,u=this[0],h=u&&u.attributes;if(void 0===n){if(this.length&&(s=e.get(u),1===u.nodeType&&!r.get(u,"hasDataAttrs"))){for(o=h.length;o--;)h[o]&&(f=h[o].name,0===f.indexOf("data-")&&(f=i.camelCase(f.slice(5)),lr(u,f,s[f])));r.set(u,"hasDataAttrs",!0)}return s}return"object"==typeof n?this.each(function(){e.set(this,n)}):a(this,function(t){var r,f;if(u&&void 0===t){if((r=e.get(u,n)||e.get(u,n.replace(cr,"-$&").toLowerCase()),void 0!==r)||(f=i.camelCase(n),r=e.get(u,f),void 0!==r)||(r=lr(u,f,void 0),void 0!==r))return r}else f=i.camelCase(n),this.each(function(){var i=e.get(this,f);e.set(this,f,t);n.indexOf("-")>-1&&void 0!==i&&e.set(this,n,t)})},null,t,arguments.length>1,null,!0)},removeData:function(n){return this.each(function(){e.remove(this,n)})}});i.extend({queue:function(n,t,u){var f;if(n)return(t=(t||"fx")+"queue",f=r.get(n,t),u&&(!f||i.isArray(u)?f=r.access(n,t,i.makeArray(u)):f.push(u)),f||[])},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};"inprogress"===u&&(u=r.shift(),e--);u&&("fx"===t&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f));!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var u=t+"queueHooks";return r.get(n,u)||r.access(n,u,{empty:i.Callbacks("once memory").add(function(){r.remove(n,[t+"queue",u])})})}});i.fn.extend({queue:function(n,t){var r=2;return"string"!=typeof n&&(t=n,n="fx",r--),arguments.length<r?i.queue(this[0],n):void 0===t?this:this.each(function(){var r=i.queue(this,n,t);i._queueHooks(this,n);"fx"===n&&"inprogress"!==r[0]&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,t){var u,e=1,o=i.Deferred(),f=this,s=this.length,h=function(){--e||o.resolveWith(f,[f])};for("string"!=typeof n&&(t=n,n=void 0),n=n||"fx";s--;)u=r.get(f[s],n+"queueHooks"),u&&u.empty&&(e++,u.empty.add(h));return h(),o.promise(t)}});var ar=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ot=new RegExp("^(?:([+-])=|)("+ar+")([a-z%]*)$","i"),w=["Top","Right","Bottom","Left"],st=function(n,t){return n=t||n,"none"===i.css(n,"display")||!i.contains(n.ownerDocument,n)};var yr=/^(?:checkbox|radio)$/i,pr=/<([\w:-]+)/,wr=/^$|\/(?:java|ecma)script/i,c={option:[1,"<select multiple='multiple'>","<\/select>"],thead:[1,"<table>","<\/table>"],col:[2,"<table><colgroup>","<\/colgroup><\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:[0,"",""]};c.optgroup=c.option;c.tbody=c.tfoot=c.colgroup=c.caption=c.thead;c.th=c.td;br=/<|&#?\w+;/;!function(){var i=u.createDocumentFragment(),n=i.appendChild(u.createElement("div")),t=u.createElement("input");t.setAttribute("type","radio");t.setAttribute("checked","checked");t.setAttribute("name","t");n.appendChild(t);f.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked;n.innerHTML="<textarea>x<\/textarea>";f.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue}();var gf=/^key/,ne=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,dr=/^([^.]*)(?:\.(.+)|)/;i.event={global:{},add:function(n,t,u,f,e){var v,y,w,p,b,c,s,l,o,k,d,a=r.get(n);if(a)for(u.handler&&(v=u,u=v.handler,e=v.selector),u.guid||(u.guid=i.guid++),(p=a.events)||(p=a.events={}),(y=a.handle)||(y=a.handle=function(t){if("undefined"!=typeof i&&i.event.triggered!==t.type)return i.event.dispatch.apply(n,arguments)}),t=(t||"").match(h)||[""],b=t.length;b--;)w=dr.exec(t[b])||[],o=d=w[1],k=(w[2]||"").split(".").sort(),o&&(s=i.event.special[o]||{},o=(e?s.delegateType:s.bindType)||o,s=i.event.special[o]||{},c=i.extend({type:o,origType:d,data:f,handler:u,guid:u.guid,selector:e,needsContext:e&&i.expr.match.needsContext.test(e),namespace:k.join(".")},v),(l=p[o])||(l=p[o]=[],l.delegateCount=0,s.setup&&s.setup.call(n,f,k,y)!==!1||n.addEventListener&&n.addEventListener(o,y)),s.add&&(s.add.call(n,c),c.handler.guid||(c.handler.guid=u.guid)),e?l.splice(l.delegateCount++,0,c):l.push(c),i.event.global[o]=!0)},remove:function(n,t,u,f,e){var y,k,c,v,p,s,l,a,o,b,d,w=r.hasData(n)&&r.get(n);if(w&&(v=w.events)){for(t=(t||"").match(h)||[""],p=t.length;p--;)if(c=dr.exec(t[p])||[],o=d=c[1],b=(c[2]||"").split(".").sort(),o){for(l=i.event.special[o]||{},o=(f?l.delegateType:l.bindType)||o,a=v[o]||[],c=c[2]&&new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"),k=y=a.length;y--;)s=a[y],!e&&d!==s.origType||u&&u.guid!==s.guid||c&&!c.test(s.namespace)||f&&f!==s.selector&&("**"!==f||!s.selector)||(a.splice(y,1),s.selector&&a.delegateCount--,l.remove&&l.remove.call(n,s));k&&!a.length&&(l.teardown&&l.teardown.call(n,b,w.handle)!==!1||i.removeEvent(n,o,w.handle),delete v[o])}else for(o in v)i.event.remove(n,o+t[p],u,f,!0);i.isEmptyObject(v)&&r.remove(n,"handle events")}},dispatch:function(n){n=i.event.fix(n);var o,s,e,u,t,h=[],c=v.call(arguments),l=(r.get(this,"events")||{})[n.type]||[],f=i.event.special[n.type]||{};if(c[0]=n,n.delegateTarget=this,!f.preDispatch||f.preDispatch.call(this,n)!==!1){for(h=i.event.handlers.call(this,n,l),o=0;(u=h[o++])&&!n.isPropagationStopped();)for(n.currentTarget=u.elem,s=0;(t=u.handlers[s++])&&!n.isImmediatePropagationStopped();)n.rnamespace&&!n.rnamespace.test(t.namespace)||(n.handleObj=t,n.data=t.data,e=((i.event.special[t.origType]||{}).handle||t.handler).apply(u.elem,c),void 0!==e&&(n.result=e)===!1&&(n.preventDefault(),n.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,n),n.result}},handlers:function(n,t){var e,u,f,o,h=[],s=t.delegateCount,r=n.target;if(s&&r.nodeType&&("click"!==n.type||isNaN(n.button)||n.button<1))for(;r!==this;r=r.parentNode||this)if(1===r.nodeType&&(r.disabled!==!0||"click"!==n.type)){for(u=[],e=0;s>e;e++)o=t[e],f=o.selector+" ",void 0===u[f]&&(u[f]=o.needsContext?i(f,this).index(r)>-1:i.find(f,this,null,[r]).length),u[f]&&u.push(o);u.length&&h.push({elem:r,handlers:u})}return s<t.length&&h.push({elem:this,handlers:t.slice(s)}),h},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return null==n.which&&(n.which=null!=t.charCode?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,t){var e,i,r,f=t.button;return null==n.pageX&&null!=t.clientX&&(e=n.target.ownerDocument||u,i=e.documentElement,r=e.body,n.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),n.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),n.which||void 0===f||(n.which=1&f?1:2&f?3:4&f?2:0),n}},fix:function(n){if(n[i.expando])return n;var f,e,o,r=n.type,s=n,t=this.fixHooks[r];for(t||(this.fixHooks[r]=t=ne.test(r)?this.mouseHooks:gf.test(r)?this.keyHooks:{}),o=t.props?this.props.concat(t.props):this.props,n=new i.Event(s),f=o.length;f--;)e=o[f],n[e]=s[e];return n.target||(n.target=u),3===n.target.nodeType&&(n.target=n.target.parentNode),t.filter?t.filter(n,s):n},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==gr()&&this.focus)return(this.focus(),!1)},delegateType:"focusin"},blur:{trigger:function(){if(this===gr()&&this.blur)return(this.blur(),!1)},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&i.nodeName(this,"input"))return(this.click(),!1)},_default:function(n){return i.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){void 0!==n.result&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}}};i.removeEvent=function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i)};i.Event=function(n,t){return this instanceof i.Event?(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||void 0===n.defaultPrevented&&n.returnValue===!1?pt:nt):this.type=n,t&&i.extend(this,t),this.timeStamp=n&&n.timeStamp||i.now(),void(this[i.expando]=!0)):new i.Event(n,t)};i.Event.prototype={constructor:i.Event,isDefaultPrevented:nt,isPropagationStopped:nt,isImmediatePropagationStopped:nt,isSimulated:!1,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=pt;n&&!this.isSimulated&&n.preventDefault()},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=pt;n&&!this.isSimulated&&n.stopPropagation()},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=pt;n&&!this.isSimulated&&n.stopImmediatePropagation();this.stopPropagation()}};i.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return r&&(r===f||i.contains(f,r))||(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}});i.fn.extend({on:function(n,t,i,r){return fi(this,n,t,i,r)},one:function(n,t,i,r){return fi(this,n,t,i,r,1)},off:function(n,t,r){var u,f;if(n&&n.preventDefault&&n.handleObj)return u=n.handleObj,i(n.delegateTarget).off(u.namespace?u.origType+"."+u.namespace:u.origType,u.selector,u.handler),this;if("object"==typeof n){for(f in n)this.off(f,t,n[f]);return this}return t!==!1&&"function"!=typeof t||(r=t,t=void 0),r===!1&&(r=nt),this.each(function(){i.event.remove(this,n,r,t)})}});var te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ie=/<script|<style|<link/i,re=/checked\s*(?:[^=]|=\s*.checked.)/i,ue=/^true\/(.*)/,fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;i.extend({htmlPrefilter:function(n){return n.replace(te,"<$1><\/$2>")},clone:function(n,t,r){var u,c,s,e,h=n.cloneNode(!0),l=i.contains(n.ownerDocument,n);if(!(f.noCloneChecked||1!==n.nodeType&&11!==n.nodeType||i.isXMLDoc(n)))for(e=o(h),s=o(n),u=0,c=s.length;c>u;u++)se(s[u],e[u]);if(t)if(r)for(s=s||o(n),e=e||o(h),u=0,c=s.length;c>u;u++)tu(s[u],e[u]);else tu(n,h);return e=o(h,"script"),e.length>0&&ui(e,!l&&o(n,"script")),h},cleanData:function(n){for(var u,t,f,s=i.event.special,o=0;void 0!==(t=n[o]);o++)if(g(t)){if(u=t[r.expando]){if(u.events)for(f in u.events)s[f]?i.event.remove(t,f):i.removeEvent(t,f,u.handle);t[r.expando]=void 0}t[e.expando]&&(t[e.expando]=void 0)}}});i.fn.extend({domManip:b,detach:function(n){return iu(this,n,!0)},remove:function(n){return iu(this,n)},text:function(n){return a(this,function(n){return void 0===n?i.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=n)})},null,n,arguments.length)},append:function(){return b(this,arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=nu(this,n);t.appendChild(n)}})},prepend:function(){return b(this,arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=nu(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return b(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return b(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},empty:function(){for(var n,t=0;null!=(n=this[t]);t++)1===n.nodeType&&(i.cleanData(o(n,!1)),n.textContent="");return this},clone:function(n,t){return n=null==n?!1:n,t=null==t?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return a(this,function(n){var t=this[0]||{},r=0,u=this.length;if(void 0===n&&1===t.nodeType)return t.innerHTML;if("string"==typeof n&&!ie.test(n)&&!c[(pr.exec(n)||["",""])[1].toLowerCase()]){n=i.htmlPrefilter(n);try{for(;u>r;r++)t=this[r]||{},1===t.nodeType&&(i.cleanData(o(t,!1)),t.innerHTML=n);t=0}catch(f){}}t&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var n=[];return b(this,arguments,function(t){var r=this.parentNode;i.inArray(this,n)<0&&(i.cleanData(o(this)),r&&r.replaceChild(t,this))},n)}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,f=[],e=i(n),o=e.length-1,r=0;o>=r;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),ti.apply(f,u.get());return this.pushStack(f)}});ei={HTML:"block",BODY:"block"};var uu=/^margin/,si=new RegExp("^("+ar+")(?!px)[a-z%]+$","i"),bt=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=n),i.getComputedStyle(t)},hi=function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f},ht=u.documentElement;!function(){var o,e,s,h,r=u.createElement("div"),t=u.createElement("div");if(t.style){t.style.backgroundClip="content-box";t.cloneNode(!0).style.backgroundClip="";f.clearCloneStyle="content-box"===t.style.backgroundClip;r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";r.appendChild(t);function c(){t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";t.innerHTML="";ht.appendChild(r);var i=n.getComputedStyle(t);o="1%"!==i.top;h="2px"===i.marginLeft;e="4px"===i.width;t.style.marginRight="50%";s="4px"===i.marginRight;ht.removeChild(r)}i.extend(f,{pixelPosition:function(){return c(),o},boxSizingReliable:function(){return null==e&&c(),e},pixelMarginRight:function(){return null==e&&c(),s},reliableMarginLeft:function(){return null==e&&c(),h},reliableMarginRight:function(){var f,i=t.appendChild(u.createElement("div"));return i.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",ht.appendChild(r),f=!parseFloat(n.getComputedStyle(i).marginRight),ht.removeChild(r),t.removeChild(i),f}})}}();var he=/^(none|table(?!-c[ea]).+)/,ce={position:"absolute",visibility:"hidden",display:"block"},fu={letterSpacing:"0",fontWeight:"400"},eu=["Webkit","O","Moz","ms"],ou=u.createElement("div").style;i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=tt(n,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(n,t,r,u){if(n&&3!==n.nodeType&&8!==n.nodeType&&n.style){var e,h,o,s=i.camelCase(t),c=n.style;return t=i.cssProps[s]||(i.cssProps[s]=su(s)||s),o=i.cssHooks[t]||i.cssHooks[s],void 0===r?o&&"get"in o&&void 0!==(e=o.get(n,!1,u))?e:c[t]:(h=typeof r,"string"===h&&(e=ot.exec(r))&&e[1]&&(r=vr(n,t,e),h="number"),null!=r&&r===r&&("number"===h&&(r+=e&&e[3]||(i.cssNumber[s]?"":"px")),f.clearCloneStyle||""!==r||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(n,r,u))||(c[t]=r)),void 0)}},css:function(n,t,r,u){var f,s,o,e=i.camelCase(t);return t=i.cssProps[e]||(i.cssProps[e]=su(e)||e),o=i.cssHooks[t]||i.cssHooks[e],o&&"get"in o&&(f=o.get(n,!0,r)),void 0===f&&(f=tt(n,t,u)),"normal"===f&&t in fu&&(f=fu[t]),""===r||r?(s=parseFloat(f),r===!0||isFinite(s)?s||0:f):f}});i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){if(r)return he.test(i.css(n,"display"))&&0===n.offsetWidth?hi(n,ce,function(){return lu(n,t,u)}):lu(n,t,u)},set:function(n,r,u){var f,e=u&&bt(n),o=u&&cu(n,t,u,"border-box"===i.css(n,"boxSizing",!1,e),e);return o&&(f=ot.exec(r))&&"px"!==(f[3]||"px")&&(n.style[t]=r,r=i.css(n,t)),hu(n,r,o)}}});i.cssHooks.marginLeft=ci(f.reliableMarginLeft,function(n,t){if(t)return(parseFloat(tt(n,"marginLeft"))||n.getBoundingClientRect().left-hi(n,{marginLeft:0},function(){return n.getBoundingClientRect().left}))+"px"});i.cssHooks.marginRight=ci(f.reliableMarginRight,function(n,t){if(t)return hi(n,{display:"inline-block"},tt,[n,"marginRight"])});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u="string"==typeof i?i.split(" "):[i];4>r;r++)f[n+w[r]+t]=u[r]||u[r-2]||u[0];return f}};uu.test(n)||(i.cssHooks[n+t].set=hu)});i.fn.extend({css:function(n,t){return a(this,function(n,t,r){var f,e,o={},u=0;if(i.isArray(t)){for(f=bt(n),e=t.length;e>u;u++)o[t[u]]=i.css(n,t[u],!1,f);return o}return void 0!==r?i.style(n,t,r):i.css(n,t)},n,t,arguments.length>1)},show:function(){return au(this,!0)},hide:function(){return au(this)},toggle:function(n){return"boolean"==typeof n?n?this.show():this.hide():this.each(function(){st(this)?i(this).show():i(this).hide()})}});i.Tween=s;s.prototype={constructor:s,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||i.easing._default;this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=s.propHooks[this.prop];return n&&n.get?n.get(this):s.propHooks._default.get(this)},run:function(n){var t,r=s.propHooks[this.prop];return this.pos=this.options.duration?t=i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):t=n,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):s.propHooks._default.set(this),this}};s.prototype.init.prototype=s.prototype;s.propHooks={_default:{get:function(n){var t;return 1!==n.elem.nodeType||null!=n.elem[n.prop]&&null==n.elem.style[n.prop]?n.elem[n.prop]:(t=i.css(n.elem,n.prop,""),t&&"auto"!==t?t:0)},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):1!==n.elem.nodeType||null==n.elem.style[i.cssProps[n.prop]]&&!i.cssHooks[n.prop]?n.elem[n.prop]=n.now:i.style(n.elem,n.prop,n.now+n.unit)}}};s.propHooks.scrollTop=s.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2},_default:"swing"};i.fx=s.prototype.init;i.fx.step={};vu=/^(?:toggle|show|hide)$/;yu=/queueHooks$/;i.Animation=i.extend(l,{tweeners:{"*":[function(n,t){var i=this.createTween(n,t);return vr(i.elem,n,ot.exec(t),i),i}]},tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.match(h);for(var r,u=0,f=n.length;f>u;u++)r=n[u],l.tweeners[r]=l.tweeners[r]||[],l.tweeners[r].unshift(t)},prefilters:[le],prefilter:function(n,t){t?l.prefilters.unshift(n):l.prefilters.push(n)}});i.speed=function(n,t,r){var u=n&&"object"==typeof n?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:"number"==typeof u.duration?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,null!=u.queue&&u.queue!==!0||(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this);u.queue&&i.dequeue(this,u.queue)},u};i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(st).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,u,f){var s=i.isEmptyObject(n),o=i.speed(t,u,f),e=function(){var t=l(this,i.extend({},n),o);(s||r.get(this,"finish"))&&t.stop(!0)};return e.finish=e,s||o.queue===!1?this.each(e):this.queue(o.queue,e)},stop:function(n,t,u){var f=function(n){var t=n.stop;delete n.stop;t(u)};return"string"!=typeof n&&(u=t,t=n,n=void 0),t&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var s=!0,t=null!=n&&n+"queueHooks",o=i.timers,e=r.get(this);if(t)e[t]&&e[t].stop&&f(e[t]);else for(t in e)e[t]&&e[t].stop&&yu.test(t)&&f(e[t]);for(t=o.length;t--;)o[t].elem!==this||null!=n&&o[t].queue!==n||(o[t].anim.stop(u),s=!1,o.splice(t,1));!s&&u||i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,e=r.get(this),u=e[n+"queue"],o=e[n+"queueHooks"],f=i.timers,s=u?u.length:0;for(e.finish=!0,i.queue(this,n,[]),o&&o.stop&&o.stop.call(this,!0),t=f.length;t--;)f[t].elem===this&&f[t].queue===n&&(f[t].anim.stop(!0),f.splice(t,1));for(t=0;s>t;t++)u[t]&&u[t].finish&&u[t].finish.call(this);delete e.finish})}});i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return null==n||"boolean"==typeof n?r.apply(this,arguments):this.animate(dt(t,!0),n,i,u)}});i.each({slideDown:dt("show"),slideUp:dt("hide"),slideToggle:dt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.timers=[];i.fx.tick=function(){var r,n=0,t=i.timers;for(it=i.now();n<t.length;n++)r=t[n],r()||t[n]!==r||t.splice(n--,1);t.length||i.fx.stop();it=void 0};i.fx.timer=function(n){i.timers.push(n);n()?i.fx.start():i.timers.pop()};i.fx.interval=13;i.fx.start=function(){kt||(kt=n.setInterval(i.fx.tick,i.fx.interval))};i.fx.stop=function(){n.clearInterval(kt);kt=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fn.delay=function(t,r){return t=i.fx?i.fx.speeds[t]||t:t,r=r||"fx",this.queue(r,function(i,r){var u=n.setTimeout(i,t);r.stop=function(){n.clearTimeout(u)}})},function(){var n=u.createElement("input"),t=u.createElement("select"),i=t.appendChild(u.createElement("option"));n.type="checkbox";f.checkOn=""!==n.value;f.optSelected=i.selected;t.disabled=!0;f.optDisabled=!i.disabled;n=u.createElement("input");n.value="t";n.type="radio";f.radioValue="t"===n.value}();rt=i.expr.attrHandle;i.fn.extend({attr:function(n,t){return a(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})}});i.extend({attr:function(n,t,r){var u,f,e=n.nodeType;if(3!==e&&8!==e&&2!==e)return"undefined"==typeof n.getAttribute?i.prop(n,t,r):(1===e&&i.isXMLDoc(n)||(t=t.toLowerCase(),f=i.attrHooks[t]||(i.expr.match.bool.test(t)?bu:void 0)),void 0!==r?null===r?void i.removeAttr(n,t):f&&"set"in f&&void 0!==(u=f.set(n,r,t))?u:(n.setAttribute(t,r+""),r):f&&"get"in f&&null!==(u=f.get(n,t))?u:(u=i.find.attr(n,t),null==u?void 0:u))},attrHooks:{type:{set:function(n,t){if(!f.radioValue&&"radio"===t&&i.nodeName(n,"input")){var r=n.value;return n.setAttribute("type",t),r&&(n.value=r),t}}}},removeAttr:function(n,t){var r,u,e=0,f=t&&t.match(h);if(f&&1===n.nodeType)while(r=f[e++])u=i.propFix[r]||r,i.expr.match.bool.test(r)&&(n[u]=!1),n.removeAttribute(r)}});bu={set:function(n,t,r){return t===!1?i.removeAttr(n,r):n.setAttribute(r,r),r}};i.each(i.expr.match.bool.source.match(/\w+/g),function(n,t){var r=rt[t]||i.find.attr;rt[t]=function(n,t,i){var u,f;return i||(f=rt[t],rt[t]=u,u=null!=r(n,t,i)?t.toLowerCase():null,rt[t]=f),u}});ku=/^(?:input|select|textarea|button)$/i;du=/^(?:a|area)$/i;i.fn.extend({prop:function(n,t){return a(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return this.each(function(){delete this[i.propFix[n]||n]})}});i.extend({prop:function(n,t,r){var f,u,e=n.nodeType;if(3!==e&&8!==e&&2!==e)return 1===e&&i.isXMLDoc(n)||(t=i.propFix[t]||t,u=i.propHooks[t]),void 0!==r?u&&"set"in u&&void 0!==(f=u.set(n,r,t))?f:n[t]=r:u&&"get"in u&&null!==(f=u.get(n,t))?f:n[t]},propHooks:{tabIndex:{get:function(n){var t=i.find.attr(n,"tabindex");return t?parseInt(t,10):ku.test(n.nodeName)||du.test(n.nodeName)&&n.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});f.optSelected||(i.propHooks.selected={get:function(n){var t=n.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(n){var t=n.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}});i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this});gt=/[\t\r\n\f]/g;i.fn.extend({addClass:function(n){var o,t,r,u,f,s,e,c=0;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,k(this)))});if("string"==typeof n&&n)for(o=n.match(h)||[];t=this[c++];)if(u=k(t),r=1===t.nodeType&&(" "+u+" ").replace(gt," ")){for(s=0;f=o[s++];)r.indexOf(" "+f+" ")<0&&(r+=f+" ");e=i.trim(r);u!==e&&t.setAttribute("class",e)}return this},removeClass:function(n){var o,r,t,u,f,s,e,c=0;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,k(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof n&&n)for(o=n.match(h)||[];r=this[c++];)if(u=k(r),t=1===r.nodeType&&(" "+u+" ").replace(gt," ")){for(s=0;f=o[s++];)while(t.indexOf(" "+f+" ")>-1)t=t.replace(" "+f+" "," ");e=i.trim(t);u!==e&&r.setAttribute("class",e)}return this},toggleClass:function(n,t){var u=typeof n;return"boolean"==typeof t&&"string"===u?t?this.addClass(n):this.removeClass(n):i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,k(this),t),t)}):this.each(function(){var t,e,f,o;if("string"===u)for(e=0,f=i(this),o=n.match(h)||[];t=o[e++];)f.hasClass(t)?f.removeClass(t):f.addClass(t);else void 0!==n&&"boolean"!==u||(t=k(this),t&&r.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||n===!1?"":r.get(this,"__className__")||""))})},hasClass:function(n){for(var t,r=0,i=" "+n+" ";t=this[r++];)if(1===t.nodeType&&(" "+k(t)+" ").replace(gt," ").indexOf(i)>-1)return!0;return!1}});gu=/\r/g;nf=/[\x20\t\r\n\f]+/g;i.fn.extend({val:function(n){var t,r,f,u=this[0];return arguments.length?(f=i.isFunction(n),this.each(function(r){var u;1===this.nodeType&&(u=f?n.call(this,r,i(this).val()):n,null==u?u="":"number"==typeof u?u+="":i.isArray(u)&&(u=i.map(u,function(n){return null==n?"":n+""})),t=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,u,"value")||(this.value=u))})):u?(t=i.valHooks[u.type]||i.valHooks[u.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(r=t.get(u,"value"))?r:(r=u.value,"string"==typeof r?r.replace(gu,""):null==r?"":r)):void 0}});i.extend({valHooks:{option:{get:function(n){var t=i.find.attr(n,"value");return null!=t?t:i.trim(i.text(n)).replace(nf," ")}},select:{get:function(n){for(var o,t,s=n.options,r=n.selectedIndex,u="select-one"===n.type||0>r,h=u?null:[],c=u?r+1:s.length,e=0>r?c:u?r:0;c>e;e++)if(t=s[e],(t.selected||e===r)&&(f.optDisabled?!t.disabled:null===t.getAttribute("disabled"))&&(!t.parentNode.disabled||!i.nodeName(t.parentNode,"optgroup"))){if(o=i(t).val(),u)return o;h.push(o)}return h},set:function(n,t){for(var u,r,f=n.options,e=i.makeArray(t),o=f.length;o--;)r=f[o],(r.selected=i.inArray(i.valHooks.option.get(r),e)>-1)&&(u=!0);return u||(n.selectedIndex=-1),e}}}});i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(n,t){if(i.isArray(t))return n.checked=i.inArray(i(n).val(),t)>-1}};f.checkOn||(i.valHooks[this].get=function(n){return null===n.getAttribute("value")?"on":n.value})});li=/^(?:focusinfocus|focusoutblur)$/;i.extend(i.event,{trigger:function(t,f,e,o){var w,s,c,b,a,v,l,p=[e||u],h=ft.call(t,"type")?t.type:t,y=ft.call(t,"namespace")?t.namespace.split("."):[];if(s=c=e=e||u,3!==e.nodeType&&8!==e.nodeType&&!li.test(h+i.event.triggered)&&(h.indexOf(".")>-1&&(y=h.split("."),h=y.shift(),y.sort()),a=h.indexOf(":")<0&&"on"+h,t=t[i.expando]?t:new i.Event(h,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=e),f=null==f?[t]:i.makeArray(f,[t]),l=i.event.special[h]||{},o||!l.trigger||l.trigger.apply(e,f)!==!1)){if(!o&&!l.noBubble&&!i.isWindow(e)){for(b=l.delegateType||h,li.test(b+h)||(s=s.parentNode);s;s=s.parentNode)p.push(s),c=s;c===(e.ownerDocument||u)&&p.push(c.defaultView||c.parentWindow||n)}for(w=0;(s=p[w++])&&!t.isPropagationStopped();)t.type=w>1?b:l.bindType||h,v=(r.get(s,"events")||{})[t.type]&&r.get(s,"handle"),v&&v.apply(s,f),v=a&&s[a],v&&v.apply&&g(s)&&(t.result=v.apply(s,f),t.result===!1&&t.preventDefault());return t.type=h,o||t.isDefaultPrevented()||l._default&&l._default.apply(p.pop(),f)!==!1||!g(e)||a&&i.isFunction(e[h])&&!i.isWindow(e)&&(c=e[a],c&&(e[a]=null),i.event.triggered=h,e[h](),i.event.triggered=void 0,c&&(e[a]=c)),t.result}},simulate:function(n,t,r){var u=i.extend(new i.Event,r,{type:n,isSimulated:!0});i.event.trigger(u,null,t)}});i.fn.extend({trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){var r=this[0];if(r)return i.event.trigger(n,t,r,!0)}});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}});i.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)}});f.focusin="onfocusin"in n;f.focusin||i.each({focus:"focusin",blur:"focusout"},function(n,t){var u=function(n){i.event.simulate(t,n.target,i.event.fix(n))};i.event.special[t]={setup:function(){var i=this.ownerDocument||this,f=r.access(i,t);f||i.addEventListener(n,u,!0);r.access(i,t,(f||0)+1)},teardown:function(){var i=this.ownerDocument||this,f=r.access(i,t)-1;f?r.access(i,t,f):(i.removeEventListener(n,u,!0),r.remove(i,t))}}});var ct=n.location,ai=i.now(),vi=/\?/;i.parseJSON=function(n){return JSON.parse(n+"")};i.parseXML=function(t){var r;if(!t||"string"!=typeof t)return null;try{r=(new n.DOMParser).parseFromString(t,"text/xml")}catch(u){r=void 0}return r&&!r.getElementsByTagName("parsererror").length||i.error("Invalid XML: "+t),r};var ve=/#.*$/,tf=/([?&])_=[^&]*/,ye=/^(.*?):[ \t]*([^\r\n]*)$/gm,pe=/^(?:GET|HEAD)$/,we=/^\/\//,rf={},yi={},uf="*/".concat("*"),pi=u.createElement("a");pi.href=ct.href;i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ct.protocol),global:!0,processData:!0,"async":!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":uf,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?wi(wi(n,i.ajaxSettings),t):wi(i.ajaxSettings,n)},ajaxPrefilter:ff(rf),ajaxTransport:ff(yi),ajax:function(t,r){function b(t,r,u,h){var a,rt,it,p,b,l=r;2!==s&&(s=2,d&&n.clearTimeout(d),v=void 0,k=h||"",e.readyState=t>0?4:0,a=t>=200&&300>t||304===t,u&&(p=be(f,e,u)),p=ke(f,p,e,a),a?(f.ifModified&&(b=e.getResponseHeader("Last-Modified"),b&&(i.lastModified[o]=b),b=e.getResponseHeader("etag"),b&&(i.etag[o]=b)),204===t||"HEAD"===f.type?l="nocontent":304===t?l="notmodified":(l=p.state,rt=p.data,it=p.error,a=!it)):(it=l,!t&&l||(l="error",0>t&&(t=0))),e.status=t,e.statusText=(r||l)+"",a?nt.resolveWith(c,[rt,l,e]):nt.rejectWith(c,[e,l,it]),e.statusCode(w),w=void 0,y&&g.trigger(a?"ajaxSuccess":"ajaxError",[e,f,a?rt:it]),tt.fireWith(c,[e,l]),y&&(g.trigger("ajaxComplete",[e,f]),--i.active||i.event.trigger("ajaxStop")))}"object"==typeof t&&(r=t,t=void 0);r=r||{};var v,o,k,p,d,l,y,a,f=i.ajaxSetup({},r),c=f.context||f,g=f.context&&(c.nodeType||c.jquery)?i(c):i.event,nt=i.Deferred(),tt=i.Callbacks("once memory"),w=f.statusCode||{},it={},rt={},s=0,ut="canceled",e={readyState:0,getResponseHeader:function(n){var t;if(2===s){if(!p)for(p={};t=ye.exec(k);)p[t[1].toLowerCase()]=t[2];t=p[n.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===s?k:null},setRequestHeader:function(n,t){var i=n.toLowerCase();return s||(n=rt[i]=rt[i]||n,it[n]=t),this},overrideMimeType:function(n){return s||(f.mimeType=n),this},statusCode:function(n){var t;if(n)if(2>s)for(t in n)w[t]=[w[t],n[t]];else e.always(n[e.status]);return this},abort:function(n){var t=n||ut;return v&&v.abort(t),b(0,t),this}};if(nt.promise(e).complete=tt.add,e.success=e.done,e.error=e.fail,f.url=((t||f.url||ct.href)+"").replace(ve,"").replace(we,ct.protocol+"//"),f.type=r.method||r.type||f.method||f.type,f.dataTypes=i.trim(f.dataType||"*").toLowerCase().match(h)||[""],null==f.crossDomain){l=u.createElement("a");try{l.href=f.url;l.href=l.href;f.crossDomain=pi.protocol+"//"+pi.host!=l.protocol+"//"+l.host}catch(ft){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=i.param(f.data,f.traditional)),ef(rf,f,r,e),2===s)return e;y=i.event&&f.global;y&&0==i.active++&&i.event.trigger("ajaxStart");f.type=f.type.toUpperCase();f.hasContent=!pe.test(f.type);o=f.url;f.hasContent||(f.data&&(o=f.url+=(vi.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=tf.test(o)?o.replace(tf,"$1_="+ai++):o+(vi.test(o)?"&":"?")+"_="+ai++));f.ifModified&&(i.lastModified[o]&&e.setRequestHeader("If-Modified-Since",i.lastModified[o]),i.etag[o]&&e.setRequestHeader("If-None-Match",i.etag[o]));(f.data&&f.hasContent&&f.contentType!==!1||r.contentType)&&e.setRequestHeader("Content-Type",f.contentType);e.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+uf+"; q=0.01":""):f.accepts["*"]);for(a in f.headers)e.setRequestHeader(a,f.headers[a]);if(f.beforeSend&&(f.beforeSend.call(c,e,f)===!1||2===s))return e.abort();ut="abort";for(a in{success:1,error:1,complete:1})e[a](f[a]);if(v=ef(yi,f,r,e)){if(e.readyState=1,y&&g.trigger("ajaxSend",[e,f]),2===s)return e;f.async&&f.timeout>0&&(d=n.setTimeout(function(){e.abort("timeout")},f.timeout));try{s=1;v.send(it,b)}catch(ft){if(!(2>s))throw ft;b(-1,ft)}}else b(-1,"No Transport");return e},getJSON:function(n,t,r){return i.get(n,t,r,"json")},getScript:function(n,t){return i.get(n,void 0,t,"script")}});i.each(["get","post"],function(n,t){i[t]=function(n,r,u,f){return i.isFunction(r)&&(f=f||u,u=r,r=void 0),i.ajax(i.extend({url:n,type:t,dataType:f,data:r,success:u},i.isPlainObject(n)&&n))}});i._evalUrl=function(n){return i.ajax({url:n,type:"GET",dataType:"script","async":!1,global:!1,throws:!0})};i.fn.extend({wrapAll:function(n){var t;return i.isFunction(n)?this.each(function(t){i(this).wrapAll(n.call(this,t))}):(this[0]&&(t=i(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstElementChild;)n=n.firstElementChild;return n}).append(this)),this)},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()}});i.expr.filters.hidden=function(n){return!i.expr.filters.visible(n)};i.expr.filters.visible=function(n){return n.offsetWidth>0||n.offsetHeight>0||n.getClientRects().length>0};var de=/%20/g,ge=/\[\]$/,of=/\r?\n/g,no=/^(?:submit|button|image|reset|file)$/i,to=/^(?:input|select|textarea|keygen)/i;return i.param=function(n,t){var r,u=[],f=function(n,t){t=i.isFunction(t)?t():null==t?"":t;u[u.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(void 0===t&&(t=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){f(this.name,this.value)});else for(r in n)bi(r,n[r],t,f);return u.join("&").replace(de,"+")},i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&to.test(this.nodeName)&&!no.test(n)&&(this.checked||!yr.test(n))}).map(function(n,t){var r=i(this).val();return null==r?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(of,"\r\n")}}):{name:t.name,value:r.replace(of,"\r\n")}}).get()}}),i.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}},sf={0:200,1223:204},ut=i.ajaxSettings.xhr(),f.cors=!!ut&&"withCredentials"in ut,f.ajax=ut=!!ut,i.ajaxTransport(function(t){var i,r;if(f.cors||ut&&!t.crossDomain)return{send:function(u,f){var o,e=t.xhr();if(e.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)e[o]=t.xhrFields[o];t.mimeType&&e.overrideMimeType&&e.overrideMimeType(t.mimeType);t.crossDomain||u["X-Requested-With"]||(u["X-Requested-With"]="XMLHttpRequest");for(o in u)e.setRequestHeader(o,u[o]);i=function(n){return function(){i&&(i=r=e.onload=e.onerror=e.onabort=e.onreadystatechange=null,"abort"===n?e.abort():"error"===n?"number"!=typeof e.status?f(0,"error"):f(e.status,e.statusText):f(sf[e.status]||e.status,e.statusText,"text"!==(e.responseType||"text")||"string"!=typeof e.responseText?{binary:e.response}:{text:e.responseText},e.getAllResponseHeaders()))}};e.onload=i();r=e.onerror=i("error");void 0!==e.onabort?e.onabort=r:e.onreadystatechange=function(){4===e.readyState&&n.setTimeout(function(){i&&r()})};i=i("abort");try{e.send(t.hasContent&&t.data||null)}catch(s){if(i)throw s;}},abort:function(){i&&i()}}}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){void 0===n.cache&&(n.cache=!1);n.crossDomain&&(n.type="GET")}),i.ajaxTransport("script",function(n){if(n.crossDomain){var r,t;return{send:function(f,e){r=i("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",t=function(n){r.remove();t=null;n&&e("error"===n.type?404:200,n.type)});u.head.appendChild(r[0])},abort:function(){t&&t()}}}}),ki=[],ni=/(=)\?(?=&|$)|\?\?/,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=ki.pop()||i.expando+"_"+ai++;return this[n]=!0,n}}),i.ajaxPrefilter("json jsonp",function(t,r,u){var f,e,o,s=t.jsonp!==!1&&(ni.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return(f=t.jsonpCallback=i.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ni,"$1"+f):t.jsonp!==!1&&(t.url+=(vi.test(t.url)?"&":"?")+t.jsonp+"="+f),t.converters["script json"]=function(){return o||i.error(f+" was not called"),o[0]},t.dataTypes[0]="json",e=n[f],n[f]=function(){o=arguments},u.always(function(){void 0===e?i(n).removeProp(f):n[f]=e;t[f]&&(t.jsonpCallback=r.jsonpCallback,ki.push(f));o&&i.isFunction(e)&&e(o[0]);o=e=void 0}),"script")}),i.parseHTML=function(n,t,r){if(!n||"string"!=typeof n)return null;"boolean"==typeof t&&(r=t,t=!1);t=t||u;var f=rr.exec(n),e=!r&&[];return f?[t.createElement(f[1])]:(f=kr([n],t,e),e&&e.length&&i(e).remove(),i.merge([],f.childNodes))},di=i.fn.load,i.fn.load=function(n,t,r){if("string"!=typeof n&&di)return di.apply(this,arguments);var u,o,s,f=this,e=n.indexOf(" ");return e>-1&&(u=i.trim(n.slice(e)),n=n.slice(0,e)),i.isFunction(t)?(r=t,t=void 0):t&&"object"==typeof t&&(o="POST"),f.length>0&&i.ajax({url:n,type:o||"GET",dataType:"html",data:t}).done(function(n){s=arguments;f.html(u?i("<div>").append(i.parseHTML(n)).find(u):n)}).always(r&&function(n,t){f.each(function(){r.apply(this,s||[n.responseText,t,n])})}),this},i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}}),i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length},i.offset={setOffset:function(n,t,r){var e,o,s,h,u,c,v,l=i.css(n,"position"),a=i(n),f={};"static"===l&&(n.style.position="relative");u=a.offset();s=i.css(n,"top");c=i.css(n,"left");v=("absolute"===l||"fixed"===l)&&(s+c).indexOf("auto")>-1;v?(e=a.position(),h=e.top,o=e.left):(h=parseFloat(s)||0,o=parseFloat(c)||0);i.isFunction(t)&&(t=t.call(n,r,i.extend({},u)));null!=t.top&&(f.top=t.top-u.top+h);null!=t.left&&(f.left=t.left-u.left+o);"using"in t?t.using.call(n,f):a.css(f)}},i.fn.extend({offset:function(n){if(arguments.length)return void 0===n?this:this.each(function(t){i.offset.setOffset(this,n,t)});var t,f,r=this[0],u={top:0,left:0},e=r&&r.ownerDocument;if(e)return t=e.documentElement,i.contains(t,r)?(u=r.getBoundingClientRect(),f=hf(e),{top:u.top+f.pageYOffset-t.clientTop,left:u.left+f.pageXOffset-t.clientLeft}):u},position:function(){if(this[0]){var n,r,u=this[0],t={top:0,left:0};return"fixed"===i.css(u,"position")?r=u.getBoundingClientRect():(n=this.offsetParent(),r=this.offset(),i.nodeName(n[0],"html")||(t=n.offset()),t.top+=i.css(n[0],"borderTopWidth",!0),t.left+=i.css(n[0],"borderLeftWidth",!0)),{top:r.top-t.top-i.css(u,"marginTop",!0),left:r.left-t.left-i.css(u,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent;n&&"static"===i.css(n,"position");)n=n.offsetParent;return n||ht})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,t){var r="pageYOffset"===t;i.fn[n]=function(i){return a(this,function(n,i,u){var f=hf(n);return void 0===u?f?f[t]:n[i]:void(f?f.scrollTo(r?f.pageXOffset:u,r?u:f.pageYOffset):n[i]=u)},n,i,arguments.length)}}),i.each(["top","left"],function(n,t){i.cssHooks[t]=ci(f.pixelPosition,function(n,r){if(r)return(r=tt(n,t),si.test(r)?i(n).position()[t]+"px":r)})}),i.each({Height:"height",Width:"width"},function(n,t){i.each({padding:"inner"+n,content:t,"":"outer"+n},function(r,u){i.fn[u]=function(u,f){var e=arguments.length&&(r||"boolean"!=typeof u),o=r||(u===!0||f===!0?"margin":"border");return a(this,function(t,r,u){var f;return i.isWindow(t)?t.document.documentElement["client"+n]:9===t.nodeType?(f=t.documentElement,Math.max(t.body["scroll"+n],f["scroll"+n],t.body["offset"+n],f["offset"+n],f["client"+n])):void 0===u?i.css(t,r,o):i.style(t,r,u,o)},t,e?u:void 0,e,null)}})}),i.fn.extend({bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return 1===arguments.length?this.off(n,"**"):this.off(t,n||"**",i)},size:function(){return this.length}}),i.fn.andSelf=i.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return i}),cf=n.jQuery,lf=n.$,i.noConflict=function(t){return n.$===i&&(n.$=lf),t&&n.jQuery===i&&(n.jQuery=cf),i},t||(n.jQuery=n.$=i),i});
/*! jQuery UI - v1.12.1 - 2016-09-14
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js, focusable.js, form-reset-mixin.js, jquery-1-7.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/accordion.js, widgets/autocomplete.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/datepicker.js, widgets/dialog.js, widgets/draggable.js, widgets/droppable.js, widgets/menu.js, widgets/mouse.js, widgets/progressbar.js, widgets/resizable.js, widgets/selectable.js, widgets/selectmenu.js, widgets/slider.js, widgets/sortable.js, widgets/spinner.js, widgets/tabs.js, widgets/tooltip.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(n){"function"==typeof define&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){function b(n){for(var t=n.css("visibility");"inherit"===t;)n=n.parent(),t=n.css("visibility");return"hidden"!==t}function k(n){for(var t,i;n.length&&n[0]!==document;){if(t=n.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(n.css("zIndex"),10),!isNaN(i)&&0!==i))return i;n=n.parent()}return 0}function c(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._datepickerShowing=!1;this._inDialog=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};n.extend(this._defaults,this.regional[""]);this.regional.en=n.extend(!0,{},this.regional[""]);this.regional["en-US"]=n.extend(!0,{},this.regional.en);this.dpDiv=l(n("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>"))}function l(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",i,function(){n(this).removeClass("ui-state-hover");-1!==this.className.indexOf("ui-datepicker-prev")&&n(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&n(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",i,a)}function a(){n.datepicker._isDisabledDatepicker(i.inline?i.dpDiv.parent()[0]:i.input[0])||(n(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),n(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&n(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&n(this).addClass("ui-datepicker-next-hover"))}function u(t,i){n.extend(t,i);for(var r in i)null==i[r]&&(t[r]=i[r]);return t}function t(n){return function(){var t=this.element.val();n.apply(this,arguments);this._refresh();t!==this.element.val()&&this._trigger("change")}}var v,o,p,w,i,r,e;n.ui=n.ui||{};n.ui.version="1.12.1";v=0;o=Array.prototype.slice;n.cleanData=function(t){return function(i){for(var r,u,f=0;null!=(u=i[f]);f++)try{r=n._data(u,"events");r&&r.remove&&n(u).triggerHandler("remove")}catch(e){}t(i)}}(n.cleanData);n.widget=function(t,i,r){var f,u,o,h={},e=t.split(".")[0],s;return t=t.split(".")[1],s=e+"-"+t,r||(r=i,i=n.Widget),n.isArray(r)&&(r=n.extend.apply(null,[{}].concat(r))),n.expr[":"][s.toLowerCase()]=function(t){return!!n.data(t,s)},n[e]=n[e]||{},f=n[e][t],u=n[e][t]=function(n,t){return this._createWidget?(arguments.length&&this._createWidget(n,t),void 0):new u(n,t)},n.extend(u,f,{version:r.version,_proto:n.extend({},r),_childConstructors:[]}),o=new i,o.options=n.widget.extend({},o.options),n.each(r,function(t,r){return n.isFunction(r)?(h[t]=function(){function n(){return i.prototype[t].apply(this,arguments)}function u(n){return i.prototype[t].apply(this,n)}return function(){var t,i=this._super,f=this._superApply;return this._super=n,this._superApply=u,t=r.apply(this,arguments),this._super=i,this._superApply=f,t}}(),void 0):(h[t]=r,void 0)}),u.prototype=n.widget.extend(o,{widgetEventPrefix:f?o.widgetEventPrefix||t:t},h,{constructor:u,namespace:e,widgetName:t,widgetFullName:s}),f?(n.each(f._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,u,i._proto)}),delete f._childConstructors):i._childConstructors.push(u),n.widget.bridge(t,u),u};n.widget.extend=function(t){for(var i,r,f=o.call(arguments,1),u=0,e=f.length;e>u;u++)for(i in f[u])r=f[u][i],f[u].hasOwnProperty(i)&&void 0!==r&&(t[i]=n.isPlainObject(r)?n.isPlainObject(t[i])?n.widget.extend({},t[i],r):n.widget.extend({},r):r);return t};n.widget.bridge=function(t,i){var r=i.prototype.widgetFullName||t;n.fn[t]=function(u){var s="string"==typeof u,e=o.call(arguments,1),f=this;return s?this.length||"instance"!==u?this.each(function(){var i,o=n.data(this,r);return"instance"===u?(f=o,!1):o?n.isFunction(o[u])&&"_"!==u.charAt(0)?(i=o[u].apply(o,e),i!==o&&void 0!==i?(f=i&&i.jquery?f.pushStack(i.get()):i,!1):void 0):n.error("no such method '"+u+"' for "+t+" widget instance"):n.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+u+"'")}):f=void 0:(e.length&&(u=n.widget.extend.apply(null,[u].concat(e))),this.each(function(){var t=n.data(this,r);t?(t.option(u||{}),t._init&&t._init()):n.data(this,r,new i(u,this))})),f}};n.Widget=function(){};n.Widget._childConstructors=[];n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,i){i=n(i||this.defaultElement||this)[0];this.element=n(i);this.uuid=v++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=n();this.hoverable=n();this.focusable=n();this.classesElementLookup={};i!==this&&(n.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===i&&this.destroy()}}),this.document=n(i.style?i.ownerDocument:i.document||i),this.window=n(this.document[0].defaultView||this.document[0].parentWindow));this.options=n.widget.extend({},this.options,this._getCreateOptions(),t);this._create();this.options.disabled&&this._setOptionDisabled(this.options.disabled);this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){var t=this;this._destroy();n.each(this.classesElementLookup,function(n,i){t._removeClass(i,n)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:n.noop,widget:function(){return this.element},option:function(t,i){var r,u,f,e=t;if(0===arguments.length)return n.widget.extend({},this.options);if("string"==typeof t)if(e={},r=t.split("."),t=r.shift(),r.length){for(u=e[t]=n.widget.extend({},this.options[t]),f=0;r.length-1>f;f++)u[r[f]]=u[r[f]]||{},u=u[r[f]];if(t=r.pop(),1===arguments.length)return void 0===u[t]?null:u[t];u[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];e[t]=i}return this._setOptions(e),this},_setOptions:function(n){for(var t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return"classes"===n&&this._setOptionClasses(t),this.options[n]=t,"disabled"===n&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,u,r;for(i in t)r=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&r&&r.length&&(u=n(r.get()),this._removeClass(r,i),u.addClass(this._classes({element:u,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(n){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!n);n&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function r(r,f){for(var o,e=0;r.length>e;e++)o=u.classesElementLookup[r[e]]||n(),o=t.add?n(n.unique(o.get().concat(t.element.get()))):n(o.not(t.element).get()),u.classesElementLookup[r[e]]=o,i.push(r[e]),f&&t.classes[r[e]]&&i.push(t.classes[r[e]])}var i=[],u=this;return t=n.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&r(t.keys.match(/\S+/g)||[],!0),t.extra&&r(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var i=this;n.each(i.classesElementLookup,function(r,u){-1!==n.inArray(t.target,u)&&(i.classesElementLookup[r]=n(u.not(t.target).get()))})},_removeClass:function(n,t,i){return this._toggleClass(n,t,i,!1)},_addClass:function(n,t,i){return this._toggleClass(n,t,i,!0)},_toggleClass:function(n,t,i,r){r="boolean"==typeof r?r:i;var u="string"==typeof n||null===n,f={extra:u?t:i,keys:u?n:t,element:u?this.element:n,add:r};return f.element.toggleClass(this._classes(f),r),this},_on:function(t,i,r){var f,u=this;"boolean"!=typeof t&&(r=i,i=t,t=!1);r?(i=f=n(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,f=this.widget());n.each(r,function(r,e){function o(){if(t||u.options.disabled!==!0&&!n(this).hasClass("ui-state-disabled"))return("string"==typeof e?u[e]:e).apply(u,arguments)}"string"!=typeof e&&(o.guid=e.guid=e.guid||o.guid||n.guid++);var s=r.match(/^([\w:-]*)\s*(.*)$/),h=s[1]+u.eventNamespace,c=s[2];c?f.on(h,c,o):i.on(h,o)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.off(i).off(i);this.bindings=n(this.bindings.not(t).get());this.focusable=n(this.focusable.not(t).get());this.hoverable=n(this.hoverable.not(t).get())},_delay:function(n,t){function r(){return("string"==typeof n?i[n]:n).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){this._addClass(n(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(n(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){this._addClass(n(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(n(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&e.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}};n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){"string"==typeof u&&(u={effect:u});var o,e=u?u===!0||"number"==typeof u?i:u.effect||i:t;u=u||{};"number"==typeof u&&(u={duration:u});o=!n.isEmptyObject(u);u.complete=f;u.delay&&r.delay(u.delay);o&&n.effects&&n.effects.effect[e]?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t]();f&&f.call(r[0]);i()})}});n.widget,function(){function f(n,t,i){return[parseFloat(n[0])*(c.test(n[0])?t/100:1),parseFloat(n[1])*(c.test(n[1])?i/100:1)]}function i(t,i){return parseInt(n.css(t,i),10)||0}function l(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:n.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var u,r=Math.max,t=Math.abs,e=/left|center|right/,o=/top|center|bottom/,s=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,c=/%$/,a=n.fn.position;n.position={scrollbarWidth:function(){if(void 0!==u)return u;var r,i,t=n("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),f=t.children()[0];return n("body").append(t),r=f.offsetWidth,t.css("overflow","scroll"),i=f.offsetWidth,r===i&&(i=t[0].clientWidth),t.remove(),u=r-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),u="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,f="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:f?n.position.scrollbarWidth():0,height:u?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=n.isWindow(i[0]),u=!!i[0]&&9===i[0].nodeType,f=!r&&!u;return{element:i,isWindow:r,isDocument:u,offset:f?n(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}};n.fn.position=function(u){if(!u||!u.of)return a.apply(this,arguments);u=n.extend({},u);var w,c,v,p,y,k,d=n(u.of),nt=n.position.getWithinInfo(u.within),tt=n.position.getScrollInfo(nt),b=(u.collision||"flip").split(" "),g={};return k=l(d),d[0].preventDefault&&(u.at="left top"),c=k.width,v=k.height,p=k.offset,y=n.extend({},p),n.each(["my","at"],function(){var t,i,n=(u[this]||"").split(" ");1===n.length&&(n=e.test(n[0])?n.concat(["center"]):o.test(n[0])?["center"].concat(n):["center","center"]);n[0]=e.test(n[0])?n[0]:"center";n[1]=o.test(n[1])?n[1]:"center";t=s.exec(n[0]);i=s.exec(n[1]);g[this]=[t?t[0]:0,i?i[0]:0];u[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===b.length&&(b[1]=b[0]),"right"===u.at[0]?y.left+=c:"center"===u.at[0]&&(y.left+=c/2),"bottom"===u.at[1]?y.top+=v:"center"===u.at[1]&&(y.top+=v/2),w=f(g.at,c,v),y.left+=w[0],y.top+=w[1],this.each(function(){var a,k,o=n(this),s=o.outerWidth(),h=o.outerHeight(),it=i(this,"marginLeft"),rt=i(this,"marginTop"),ut=s+it+i(this,"marginRight")+tt.width,ft=h+rt+i(this,"marginBottom")+tt.height,e=n.extend({},y),l=f(g.my,o.outerWidth(),o.outerHeight());"right"===u.my[0]?e.left-=s:"center"===u.my[0]&&(e.left-=s/2);"bottom"===u.my[1]?e.top-=h:"center"===u.my[1]&&(e.top-=h/2);e.left+=l[0];e.top+=l[1];a={marginLeft:it,marginTop:rt};n.each(["left","top"],function(t,i){n.ui.position[b[t]]&&n.ui.position[b[t]][i](e,{targetWidth:c,targetHeight:v,elemWidth:s,elemHeight:h,collisionPosition:a,collisionWidth:ut,collisionHeight:ft,offset:[w[0]+l[0],w[1]+l[1]],my:u.my,at:u.at,within:nt,elem:o})});u.using&&(k=function(n){var i=p.left-e.left,a=i+c-s,f=p.top-e.top,y=f+v-h,l={target:{element:d,left:p.left,top:p.top,width:c,height:v},element:{element:o,left:e.left,top:e.top,width:s,height:h},horizontal:0>a?"left":i>0?"right":"center",vertical:0>y?"top":f>0?"bottom":"middle"};s>c&&c>t(i+a)&&(l.horizontal="center");h>v&&v>t(f+y)&&(l.vertical="middle");l.important=r(t(i),t(a))>r(t(f),t(y))?"horizontal":"vertical";u.using.call(this,n,l)});o.offset(n.extend(e,{using:k}))})};n.ui.position={fit:{left:function(n,t){var h,e=t.within,u=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,i=u-s,f=s+t.collisionWidth-o-u;t.collisionWidth>o?i>0&&0>=f?(h=n.left+i+t.collisionWidth-o-u,n.left+=i-h):n.left=f>0&&0>=i?u:i>f?u+o-t.collisionWidth:u:i>0?n.left+=i:f>0?n.left-=f:n.left=r(n.left-s,n.left)},top:function(n,t){var h,o=t.within,u=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,i=u-s,f=s+t.collisionHeight-e-u;t.collisionHeight>e?i>0&&0>=f?(h=n.top+i+t.collisionHeight-e-u,n.top+=i-h):n.top=f>0&&0>=i?u:i>f?u+e-t.collisionHeight:u:i>0?n.top+=i:f>0?n.top-=f:n.top=r(n.top-s,n.top)}},flip:{left:function(n,i){var o,s,r=i.within,y=r.offset.left+r.scrollLeft,c=r.width,h=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-i.collisionPosition.marginLeft,a=l-h,v=l+i.collisionWidth-c-h,u="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,f="left"===i.at[0]?i.targetWidth:"right"===i.at[0]?-i.targetWidth:0,e=-2*i.offset[0];0>a?(o=n.left+u+f+e+i.collisionWidth-c-y,(0>o||t(a)>o)&&(n.left+=u+f+e)):v>0&&(s=n.left-i.collisionPosition.marginLeft+u+f+e-h,(s>0||v>t(s))&&(n.left+=u+f+e))},top:function(n,i){var o,s,r=i.within,y=r.offset.top+r.scrollTop,c=r.height,h=r.isWindow?r.scrollTop:r.offset.top,l=n.top-i.collisionPosition.marginTop,a=l-h,v=l+i.collisionHeight-c-h,p="top"===i.my[1],u=p?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,f="top"===i.at[1]?i.targetHeight:"bottom"===i.at[1]?-i.targetHeight:0,e=-2*i.offset[1];0>a?(s=n.top+u+f+e+i.collisionHeight-c-y,(0>s||t(a)>s)&&(n.top+=u+f+e)):v>0&&(o=n.top-i.collisionPosition.marginTop+u+f+e-h,(o>0||v>t(o))&&(n.top+=u+f+e))}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments);n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments);n.ui.position.fit.top.apply(this,arguments)}}}}();n.ui.position;n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])}});n.fn.extend({disableSelection:function(){var n="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(n+".ui-disableSelection",function(n){n.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}});var f="ui-effects-",s="ui-effects-style",h="ui-effects-animated",y=n;n.effects={effect:{}},function(n,t){function f(n,t,i){var r=h[t.type]||{};return null==n?i||!t.def?null:t.def:(n=r.floor?~~n:parseFloat(n),isNaN(n)?t.def:r.mod?(n+r.mod)%r.mod:0>n?0:n>r.max?r.max:n)}function s(f){var o=i(),s=o._rgba=[];return f=f.toLowerCase(),r(v,function(n,i){var r,h=i.re.exec(f),c=h&&i.parse(h),e=i.space||"rgba";return c?(r=o[e](c),o[u[e].cache]=r[u[e].cache],s=o._rgba=r._rgba,!1):t}),s.length?("0,0,0,0"===s.join()&&n.extend(s,e.transparent),o):e[f]}function o(n,t,i){return i=(i+1)%1,1>6*i?n+6*(t-n)*i:1>2*i?t:2>3*i?n+6*(t-n)*(2/3-i):n}var e,a=/^([\-+])=\s*(\d+\.?\d*)/,v=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1],n[2],n[3],n[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[2.55*n[1],2.55*n[2],2.55*n[3],n[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(n){return[n[1],n[2]/100,n[3]/100,n[4]]}}],i=n.Color=function(t,i,r,u){return new n.Color.fn.parse(t,i,r,u)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=i.support={},l=n("<p>")[0],r=n.each;l.style.cssText="background-color:rgba(1,1,1,.5)";c.rgba=l.style.backgroundColor.indexOf("rgba")>-1;r(u,function(n,t){t.cache="_"+n;t.props.alpha={idx:3,type:"percent",def:1}});i.fn=n.extend(i.prototype,{parse:function(o,h,c,l){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=n(o).css(h),h=t);var a=this,v=n.type(o),y=this._rgba=[];return h!==t&&(o=[o,h,c,l],v="array"),"string"===v?this.parse(s(o)||e._default):"array"===v?(r(u.rgba.props,function(n,t){y[t.idx]=f(o[t.idx],t)}),this):"object"===v?(o instanceof i?r(u,function(n,t){o[t.cache]&&(a[t.cache]=o[t.cache].slice())}):r(u,function(t,i){var u=i.cache;r(i.props,function(n,t){if(!a[u]&&i.to){if("alpha"===n||null==o[n])return;a[u]=i.to(a._rgba)}a[u][t.idx]=f(o[n],t,!0)});a[u]&&0>n.inArray(null,a[u].slice(0,3))&&(a[u][3]=1,i.from&&(a._rgba=i.from(a[u])))}),this):t},is:function(n){var o=i(n),f=!0,e=this;return r(u,function(n,i){var s,u=o[i.cache];return u&&(s=e[i.cache]||i.to&&i.to(e._rgba)||[],r(i.props,function(n,i){return null!=u[i.idx]?f=u[i.idx]===s[i.idx]:t})),f}),f},_space:function(){var n=[],t=this;return r(u,function(i,r){t[r.cache]&&n.push(i)}),n.pop()},transition:function(n,t){var e=i(n),c=e._space(),o=u[c],l=0===this.alpha()?i("transparent"):this,a=l[o.cache]||o.to(l._rgba),s=a.slice();return e=e[o.cache],r(o.props,function(n,i){var c=i.idx,r=a[c],u=e[c],o=h[i.type]||{};null!==u&&(null===r?s[c]=u:(o.mod&&(u-r>o.mod/2?r+=o.mod:r-u>o.mod/2&&(r-=o.mod)),s[c]=f((u-r)*t+r,i)))}),this[c](s)},blend:function(t){if(1===this._rgba[3])return this;var r=this._rgba.slice(),u=r.pop(),f=i(t)._rgba;return i(n.map(r,function(n,t){return(1-u)*f[t]+u*n}))},toRgbaString:function(){var i="rgba(",t=n.map(this._rgba,function(n,t){return null==n?t>2?1:0:n});return 1===t[3]&&(t.pop(),i="rgb("),i+t.join()+")"},toHslaString:function(){var i="hsla(",t=n.map(this.hsla(),function(n,t){return null==n&&(n=t>2?1:0),t&&3>t&&(n=Math.round(100*n)+"%"),n});return 1===t[3]&&(t.pop(),i="hsl("),i+t.join()+")"},toHexString:function(t){var i=this._rgba.slice(),r=i.pop();return t&&i.push(~~(255*r)),"#"+n.map(i,function(n){return n=(n||0).toString(16),1===n.length?"0"+n:n}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});i.fn.parse.prototype=i.fn;u.hsla.to=function(n){if(null==n[0]||null==n[1]||null==n[2])return[null,null,null,n[3]];var s,h,i=n[0]/255,r=n[1]/255,f=n[2]/255,c=n[3],u=Math.max(i,r,f),e=Math.min(i,r,f),t=u-e,o=u+e,l=.5*o;return s=e===u?0:i===u?60*(r-f)/t+360:r===u?60*(f-i)/t+120:60*(i-r)/t+240,h=0===t?0:.5>=l?t/o:t/(2-o),[Math.round(s)%360,h,l,null==c?1:c]};u.hsla.from=function(n){if(null==n[0]||null==n[1]||null==n[2])return[null,null,null,n[3]];var r=n[0]/360,u=n[1],t=n[2],e=n[3],i=.5>=t?t*(1+u):t+u-t*u,f=2*t-i;return[Math.round(255*o(f,i,r+1/3)),Math.round(255*o(f,i,r)),Math.round(255*o(f,i,r-1/3)),e]};r(u,function(u,e){var s=e.props,o=e.cache,h=e.to,c=e.from;i.fn[u]=function(u){if(h&&!this[o]&&(this[o]=h(this._rgba)),u===t)return this[o].slice();var l,a=n.type(u),v="array"===a||"object"===a?u:arguments,e=this[o].slice();return r(s,function(n,t){var i=v["object"===a?n:t.idx];null==i&&(i=e[t.idx]);e[t.idx]=f(i,t)}),c?(l=i(c(e)),l[o]=e,l):i(e)};r(s,function(t,r){i.fn[t]||(i.fn[t]=function(i){var f,e=n.type(i),h="alpha"===t?this._hsla?"hsla":"rgba":u,o=this[h](),s=o[r.idx];return"undefined"===e?s:("function"===e&&(i=i.call(this,s),e=n.type(i)),null==i&&r.empty?this:("string"===e&&(f=a.exec(i),f&&(i=s+parseFloat(f[2])*("+"===f[1]?1:-1))),o[r.idx]=i,this[h](o)))})})});i.hook=function(t){var u=t.split(" ");r(u,function(t,r){n.cssHooks[r]={set:function(t,u){var o,f,e="";if("transparent"!==u&&("string"!==n.type(u)||(o=s(u)))){if(u=i(o||u),!c.rgba&&1!==u._rgba[3]){for(f="backgroundColor"===r?t.parentNode:t;(""===e||"transparent"===e)&&f&&f.style;)try{e=n.css(f,"backgroundColor");f=f.parentNode}catch(h){}u=u.blend(e&&"transparent"!==e?e:"_default")}u=u.toRgbaString()}try{t.style[r]=u}catch(h){}}};n.fx.step[r]=function(t){t.colorInit||(t.start=i(t.elem,r),t.end=i(t.end),t.colorInit=!0);n.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})};i.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");n.cssHooks.borderColor={expand:function(n){var t={};return r(["Top","Right","Bottom","Left"],function(i,r){t["border"+r+"Color"]=n}),t}};e=n.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(y),function(){function t(t){var r,u,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,f={};if(i&&i.length&&i[0]&&i[i[0]])for(u=i.length;u--;)r=i[u],"string"==typeof i[r]&&(f[n.camelCase(r)]=i[r]);else for(r in i)"string"==typeof i[r]&&(f[r]=i[r]);return f}function i(t,i){var r,f,e={};for(r in i)f=i[r],t[r]!==f&&(u[r]||(n.fx.step[r]||!isNaN(parseFloat(f)))&&(e[r]=f));return e}var r=["add","remove","toggle"],u={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};n.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){n.fx.step[i]=function(n){("none"===n.end||n.setAttr)&&(1!==n.pos||n.setAttr)||(y.style(n.elem,i,n.end),n.setAttr=!0)}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))});n.effects.animateClass=function(u,f,e,o){var s=n.speed(f,e,o);return this.queue(function(){var o,e=n(this),h=e.attr("class")||"",f=s.children?e.find("*").addBack():e;f=f.map(function(){var i=n(this);return{el:i,start:t(this)}});o=function(){n.each(r,function(n,t){u[t]&&e[t+"Class"](u[t])})};o();f=f.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this});e.attr("class",h);f=f.map(function(){var i=this,t=n.Deferred(),r=n.extend({},s,{queue:!1,complete:function(){t.resolve(i)}});return this.el.animate(this.diff,r),t.promise()});n.when.apply(n,f.get()).done(function(){o();n.each(arguments,function(){var t=this.el;n.each(this.diff,function(n){t.css(n,"")})});s.complete.call(e[0])})})};n.fn.extend({addClass:function(t){return function(i,r,u,f){return r?n.effects.animateClass.call(this,{add:i},r,u,f):t.apply(this,arguments)}}(n.fn.addClass),removeClass:function(t){return function(i,r,u,f){return arguments.length>1?n.effects.animateClass.call(this,{remove:i},r,u,f):t.apply(this,arguments)}}(n.fn.removeClass),toggleClass:function(t){return function(i,r,u,f,e){return"boolean"==typeof r||void 0===r?u?n.effects.animateClass.call(this,r?{add:i}:{remove:i},u,f,e):t.apply(this,arguments):n.effects.animateClass.call(this,{toggle:i},r,u,f)}}(n.fn.toggleClass),switchClass:function(t,i,r,u,f){return n.effects.animateClass.call(this,{add:i,remove:t},r,u,f)}})}(),function(){function t(t,i,r,u){return n.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),n.isFunction(i)&&(u=i,r=null,i={}),("number"==typeof i||n.fx.speeds[i])&&(u=r,r=i,i={}),n.isFunction(r)&&(u=r,r=null),i&&n.extend(t,i),r=r||i.duration,t.duration=n.fx.off?0:"number"==typeof r?r:r in n.fx.speeds?n.fx.speeds[r]:n.fx.speeds._default,t.complete=u||i.complete,t}function i(t){return!t||"number"==typeof t||n.fx.speeds[t]?!0:"string"!=typeof t||n.effects.effect[t]?n.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}function r(n,t){var r=t.outerWidth(),u=t.outerHeight(),i=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(n)||["",0,r,u,0];return{top:parseFloat(i[1])||0,right:"auto"===i[2]?r:parseFloat(i[2]),bottom:"auto"===i[3]?u:parseFloat(i[3]),left:parseFloat(i[4])||0}}n.expr&&n.expr.filters&&n.expr.filters.animated&&(n.expr.filters.animated=function(t){return function(i){return!!n(i).data(h)||t(i)}}(n.expr.filters.animated));n.uiBackCompat!==!1&&n.extend(n.effects,{save:function(n,t){for(var i=0,r=t.length;r>i;i++)null!==t[i]&&n.data(f+t[i],n[0].style[t[i]])},restore:function(n,t){for(var r,i=0,u=t.length;u>i;i++)null!==t[i]&&(r=n.data(f+t[i]),n.css(t[i],r))},setMode:function(n,t){return"toggle"===t&&(t=n.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},u=n("<div><\/div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(u),(t[0]===r||n.contains(t[0],r))&&n(r).trigger("focus"),u=t.parent(),"static"===t.css("position")?(u.css({position:"relative"}),t.css({position:"relative"})):(n.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),n.each(["top","left","bottom","right"],function(n,r){i[r]=t.css(r);isNaN(parseInt(i[r],10))&&(i[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(f),u.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||n.contains(t[0],i))&&n(i).trigger("focus")),t}});n.extend(n.effects,{version:"1.12.1",define:function(t,i,r){return r||(r=i,i="effect"),n.effects.effect[t]=r,n.effects.effect[t].mode=i,r},scaledDimensions:function(n,t,i){if(0===t)return{height:0,width:0,outerHeight:0,outerWidth:0};var r="horizontal"!==i?(t||100)/100:1,u="vertical"!==i?(t||100)/100:1;return{height:n.height()*u,width:n.width()*r,outerHeight:n.outerHeight()*u,outerWidth:n.outerWidth()*r}},clipToBox:function(n){return{width:n.clip.right-n.clip.left,height:n.clip.bottom-n.clip.top,left:n.clip.left,top:n.clip.top}},unshift:function(n,t,i){var r=n.queue();t>1&&r.splice.apply(r,[1,0].concat(r.splice(t,i)));n.dequeue()},saveStyle:function(n){n.data(s,n[0].style.cssText)},restoreStyle:function(n){n[0].style.cssText=n.data(s)||"";n.removeData(s)},mode:function(n,t){var i=n.is(":hidden");return"toggle"===t&&(t=i?"show":"hide"),(i?"hide"===t:"show"===t)&&(t="none"),t},getBaseline:function(n,t){var i,r;switch(n[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=n[0]/t.height}switch(n[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=n[1]/t.width}return{x:r,y:i}},createPlaceholder:function(t){var i,r=t.css("position"),u=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(r)&&(r="absolute",i=n("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(f+"placeholder",i)),t.css({position:r,left:u.left,top:u.top}),i},removePlaceholder:function(n){var t=f+"placeholder",i=n.data(t);i&&(i.remove(),n.removeData(t))},cleanUp:function(t){n.effects.restoreStyle(t);n.effects.removePlaceholder(t)},setTransition:function(t,i,r,u){return u=u||{},n.each(i,function(n,i){var f=t.cssUnit(i);f[0]>0&&(u[i]=f[0]*r+f[1])}),u}});n.fn.extend({effect:function(){function o(t){function c(){o.removeData(h);n.effects.cleanUp(o);"hide"===i.mode&&o.hide();s()}function s(){n.isFunction(f)&&f.call(o[0]);n.isFunction(t)&&t()}var o=n(this);i.mode=l.shift();n.uiBackCompat===!1||u?"none"===i.mode?(o[r](),s()):e.call(o[0],i,c):(o.is(":hidden")?"hide"===r:"show"===r)?(o[r](),s()):e.call(o[0],i,s)}var i=t.apply(this,arguments),e=n.effects.effect[i.effect],u=e.mode,s=i.queue,c=s||"fx",f=i.complete,r=i.mode,l=[],a=function(t){var f=n(this),i=n.effects.mode(f,r)||u;f.data(h,!0);l.push(i);u&&("show"===i||i===u&&"hide"===i)&&f.show();u&&"none"===i||n.effects.saveStyle(f);n.isFunction(t)&&t()};return n.fx.off||!e?r?this[r](i.duration,f):this.each(function(){f&&f.call(this)}):s===!1?this.each(a).each(o):this.queue(c,a).queue(c,o)},show:function(n){return function(r){if(i(r))return n.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="show",this.effect.call(this,u)}}(n.fn.show),hide:function(n){return function(r){if(i(r))return n.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="hide",this.effect.call(this,u)}}(n.fn.hide),toggle:function(n){return function(r){if(i(r)||"boolean"==typeof r)return n.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="toggle",this.effect.call(this,u)}}(n.fn.toggle),cssUnit:function(t){var i=this.css(t),r=[];return n.each(["em","px","%","pt"],function(n,t){i.indexOf(t)>0&&(r=[parseFloat(i),t])}),r},cssClip:function(n){return n?this.css("clip","rect("+n.top+"px "+n.right+"px "+n.bottom+"px "+n.left+"px)"):r(this.css("clip"),this)},transfer:function(t,i){var u=n(this),r=n(t.to),f="fixed"===r.css("position"),e=n("body"),o=f?e.scrollTop():0,s=f?e.scrollLeft():0,h=r.offset(),l={top:h.top-o,left:h.left-s,height:r.innerHeight(),width:r.innerWidth()},c=u.offset(),a=n("<div class='ui-effects-transfer'><\/div>").appendTo("body").addClass(t.className).css({top:c.top-o,left:c.left-s,height:u.innerHeight(),width:u.innerWidth(),position:f?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){a.remove();n.isFunction(i)&&i()})}});n.fx.step.clip=function(t){t.clipInit||(t.start=n(t.elem).cssClip(),"string"==typeof t.end&&(t.end=r(t.end,t.elem)),t.clipInit=!0);n(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),function(){var t={};n.each(["Quad","Cubic","Quart","Quint","Expo"],function(n,i){t[i]=function(t){return Math.pow(t,n+2)}});n.extend(t,{Sine:function(n){return 1-Math.cos(n*Math.PI/2)},Circ:function(n){return 1-Math.sqrt(1-n*n)},Elastic:function(n){return 0===n||1===n?n:-Math.pow(2,8*(n-1))*Math.sin((80*(n-1)-7.5)*Math.PI/15)},Back:function(n){return n*n*(3*n-2)},Bounce:function(n){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>n;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-n,2)}});n.each(t,function(t,i){n.easing["easeIn"+t]=i;n.easing["easeOut"+t]=function(n){return 1-i(1-n)};n.easing["easeInOut"+t]=function(n){return.5>n?i(2*n)/2:1-i(-2*n+2)/2}})}();p=n.effects;n.effects.define("blind","hide",function(t,i){var e={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},u=n(this),o=t.direction||"up",s=u.cssClip(),r={clip:n.extend({},s)},f=n.effects.createPlaceholder(u);r.clip[e[o][0]]=r.clip[e[o][1]];"show"===t.mode&&(u.cssClip(r.clip),f&&f.css(n.effects.clipToBox(r)),r.clip=s);f&&f.animate(n.effects.clipToBox(r),t.duration,t.easing);u.animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:i})});n.effects.define("bounce",function(t,i){var e,o,a,u=n(this),p=t.mode,s="hide"===p,w="show"===p,h=t.direction||"up",r=t.distance,v=t.times||5,b=2*v+(w||s?1:0),c=t.duration/b,l=t.easing,f="up"===h||"down"===h?"top":"left",y="up"===h||"left"===h,k=0,d=u.queue().length;for(n.effects.createPlaceholder(u),a=u.css(f),r||(r=u["top"===f?"outerHeight":"outerWidth"]()/3),w&&(o={opacity:1},o[f]=a,u.css("opacity",0).css(f,y?2*-r:2*r).animate(o,c,l)),s&&(r/=Math.pow(2,v-1)),o={},o[f]=a;v>k;k++)e={},e[f]=(y?"-=":"+=")+r,u.animate(e,c,l).animate(o,c,l),r=s?2*r:r/2;s&&(e={opacity:0},e[f]=(y?"-=":"+=")+r,u.animate(e,c,l));u.queue(i);n.effects.unshift(u,d,b+1)});n.effects.define("clip","hide",function(t,i){var r,u={},f=n(this),e=t.direction||"vertical",o="both"===e,s=o||"horizontal"===e,h=o||"vertical"===e;r=f.cssClip();u.clip={top:h?(r.bottom-r.top)/2:r.top,right:s?(r.right-r.left)/2:r.right,bottom:h?(r.bottom-r.top)/2:r.bottom,left:s?(r.right-r.left)/2:r.left};n.effects.createPlaceholder(f);"show"===t.mode&&(f.cssClip(u.clip),u.clip=r);f.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:i})});n.effects.define("drop","hide",function(t,i){var e,u=n(this),h=t.mode,c="show"===h,f=t.direction||"left",o="up"===f||"down"===f?"top":"left",s="up"===f||"left"===f?"-=":"+=",l="+="===s?"-=":"+=",r={opacity:0};n.effects.createPlaceholder(u);e=t.distance||u["top"===o?"outerHeight":"outerWidth"](!0)/2;r[o]=s+e;c&&(u.css(r),r[o]=l+e,r.opacity=1);u.animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:i})});n.effects.define("explode","hide",function(t,i){function b(){p.push(this);p.length===e*c&&k()}function k(){o.css({visibility:"visible"});n(p).remove();i()}for(var u,l,a,v,y,e=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=e,o=n(this),d=t.mode,f="show"===d,w=o.show().css("visibility","hidden").offset(),s=Math.ceil(o.outerWidth()/c),h=Math.ceil(o.outerHeight()/e),p=[],r=0;e>r;r++)for(a=w.top+r*h,y=r-(e-1)/2,u=0;c>u;u++)l=w.left+u*s,v=u-(c-1)/2,o.clone().appendTo("body").wrap("<div><\/div>").css({position:"absolute",visibility:"visible",left:-u*s,top:-r*h}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:s,height:h,left:l+(f?v*s:0),top:a+(f?y*h:0),opacity:f?0:1}).animate({left:l+(f?0:v*s),top:a+(f?0:y*h),opacity:f?1:0},t.duration||500,t.easing,b)});n.effects.define("fade","toggle",function(t,i){var r="show"===t.mode;n(this).css("opacity",r?0:1).animate({opacity:r?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:i})});n.effects.define("fold","hide",function(t,i){var u=n(this),l=t.mode,v="show"===l,y="hide"===l,o=t.size||15,a=/([0-9]+)%/.exec(o),p=!!t.horizFirst,f=p?["right","bottom"]:["bottom","right"],s=t.duration/2,h=n.effects.createPlaceholder(u),e=u.cssClip(),c={clip:n.extend({},e)},r={clip:n.extend({},e)},w=[e[f[0]],e[f[1]]],b=u.queue().length;a&&(o=parseInt(a[1],10)/100*w[y?0:1]);c.clip[f[0]]=o;r.clip[f[0]]=o;r.clip[f[1]]=0;v&&(u.cssClip(r.clip),h&&h.css(n.effects.clipToBox(r)),r.clip=e);u.queue(function(i){h&&h.animate(n.effects.clipToBox(c),s,t.easing).animate(n.effects.clipToBox(r),s,t.easing);i()}).animate(c,s,t.easing).animate(r,s,t.easing).queue(i);n.effects.unshift(u,b,4)});n.effects.define("highlight","show",function(t,i){var r=n(this),u={backgroundColor:r.css("backgroundColor")};"hide"===t.mode&&(u.opacity=0);n.effects.saveStyle(r);r.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:i})});n.effects.define("size",function(t,i){var l,r,p,u=n(this),v=["fontSize"],s=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],w=t.mode,y="effect"!==w,c=t.scale||"both",b=t.origin||["middle","center"],k=u.css("position"),a=u.position(),o=n.effects.scaledDimensions(u),f=t.from||o,e=t.to||n.effects.scaledDimensions(u,0);n.effects.createPlaceholder(u);"show"===w&&(p=f,f=e,e=p);r={from:{y:f.height/o.height,x:f.width/o.width},to:{y:e.height/o.height,x:e.width/o.width}};("box"===c||"both"===c)&&(r.from.y!==r.to.y&&(f=n.effects.setTransition(u,s,r.from.y,f),e=n.effects.setTransition(u,s,r.to.y,e)),r.from.x!==r.to.x&&(f=n.effects.setTransition(u,h,r.from.x,f),e=n.effects.setTransition(u,h,r.to.x,e)));("content"===c||"both"===c)&&r.from.y!==r.to.y&&(f=n.effects.setTransition(u,v,r.from.y,f),e=n.effects.setTransition(u,v,r.to.y,e));b&&(l=n.effects.getBaseline(b,o),f.top=(o.outerHeight-f.outerHeight)*l.y+a.top,f.left=(o.outerWidth-f.outerWidth)*l.x+a.left,e.top=(o.outerHeight-e.outerHeight)*l.y+a.top,e.left=(o.outerWidth-e.outerWidth)*l.x+a.left);u.css(f);("content"===c||"both"===c)&&(s=s.concat(["marginTop","marginBottom"]).concat(v),h=h.concat(["marginLeft","marginRight"]),u.find("*[width]").each(function(){var i=n(this),u=n.effects.scaledDimensions(i),f={height:u.height*r.from.y,width:u.width*r.from.x,outerHeight:u.outerHeight*r.from.y,outerWidth:u.outerWidth*r.from.x},e={height:u.height*r.to.y,width:u.width*r.to.x,outerHeight:u.height*r.to.y,outerWidth:u.width*r.to.x};r.from.y!==r.to.y&&(f=n.effects.setTransition(i,s,r.from.y,f),e=n.effects.setTransition(i,s,r.to.y,e));r.from.x!==r.to.x&&(f=n.effects.setTransition(i,h,r.from.x,f),e=n.effects.setTransition(i,h,r.to.x,e));y&&n.effects.saveStyle(i);i.css(f);i.animate(e,t.duration,t.easing,function(){y&&n.effects.restoreStyle(i)})}));u.animate(e,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){var t=u.offset();0===e.opacity&&u.css("opacity",f.opacity);y||(u.css("position","static"===k?"relative":k).offset(t),n.effects.saveStyle(u));i()}})});n.effects.define("scale",function(t,i){var u=n(this),f=t.mode,e=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"effect"!==f?0:100),r=n.extend(!0,{from:n.effects.scaledDimensions(u),to:n.effects.scaledDimensions(u,e,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(r.from.opacity=1,r.to.opacity=0);n.effects.effect.size.call(this,r,i)});n.effects.define("puff","hide",function(t,i){var r=n.extend(!0,{},t,{fade:!0,percent:parseInt(t.percent,10)||150});n.effects.effect.scale.call(this,r,i)});n.effects.define("pulsate","show",function(t,i){var r=n(this),e=t.mode,o="show"===e,c="hide"===e,l=o||c,f=2*(t.times||5)+(l?1:0),s=t.duration/f,u=0,h=1,a=r.queue().length;for((o||!r.is(":visible"))&&(r.css("opacity",0).show(),u=1);f>h;h++)r.animate({opacity:u},s,t.easing),u=1-u;r.animate({opacity:u},s,t.easing);r.queue(i);n.effects.unshift(r,a,f+1)});n.effects.define("shake",function(t,i){var l=1,r=n(this),f=t.direction||"left",e=t.distance||20,a=t.times||3,v=2*a+1,u=Math.round(t.duration/v),o="up"===f||"down"===f?"top":"left",s="up"===f||"left"===f,h={},c={},y={},p=r.queue().length;for(n.effects.createPlaceholder(r),h[o]=(s?"-=":"+=")+e,c[o]=(s?"+=":"-=")+2*e,y[o]=(s?"-=":"+=")+2*e,r.animate(h,u,t.easing);a>l;l++)r.animate(c,u,t.easing).animate(y,u,t.easing);r.animate(c,u,t.easing).animate(h,u/2,t.easing).queue(i);n.effects.unshift(r,p,v+1)});n.effects.define("slide","show",function(t,i){var s,o,u=n(this),h={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},c=t.mode,f=t.direction||"left",e="up"===f||"down"===f?"top":"left",l="up"===f||"left"===f,a=t.distance||u["top"===e?"outerHeight":"outerWidth"](!0),r={};n.effects.createPlaceholder(u);s=u.cssClip();o=u.position()[e];r[e]=(l?-1:1)*a+o;r.clip=u.cssClip();r.clip[h[f][1]]=r.clip[h[f][0]];"show"===c&&(u.cssClip(r.clip),u.css(e,r[e]),r.clip=s,r[e]=o);u.animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:i})});n.uiBackCompat!==!1&&(p=n.effects.define("transfer",function(t,i){n(this).transfer(t,i)}));n.ui.focusable=function(t,i){var u,f,e,r,o,s=t.nodeName.toLowerCase();return"area"===s?(u=t.parentNode,f=u.name,t.href&&f&&"map"===u.nodeName.toLowerCase()?(e=n("img[usemap='#"+f+"']"),e.length>0&&e.is(":visible")):!1):(/^(input|select|textarea|button|object)$/.test(s)?(r=!t.disabled,r&&(o=n(t).closest("fieldset")[0],o&&(r=!o.disabled))):r="a"===s?t.href||i:i,r&&n(t).is(":visible")&&b(n(t)))};n.extend(n.expr[":"],{focusable:function(t){return n.ui.focusable(t,null!=n.attr(t,"tabindex"))}});n.ui.focusable;n.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):n(this[0].form)};n.ui.formResetMixin={_formResetHandler:function(){var t=n(this);setTimeout(function(){var i=t.data("ui-form-reset-instances");n.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var n=this.form.data("ui-form-reset-instances")||[];n.length||this.form.on("reset.ui-form-reset",this._formResetHandler);n.push(this);this.form.data("ui-form-reset-instances",n)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(n.inArray(this,t),1);t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}};"1.7"===n.fn.jquery.substring(0,3)&&(n.each(["Width","Height"],function(t,i){function r(t,i,r,u){return n.each(e,function(){i-=parseFloat(n.css(t,"padding"+this))||0;r&&(i-=parseFloat(n.css(t,"border"+this+"Width"))||0);u&&(i-=parseFloat(n.css(t,"margin"+this))||0)}),i}var e="Width"===i?["Left","Right"]:["Top","Bottom"],u=i.toLowerCase(),f={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+i]=function(t){return void 0===t?f["inner"+i].call(this):this.each(function(){n(this).css(u,r(this,t)+"px")})};n.fn["outer"+i]=function(t,e){return"number"!=typeof t?f["outer"+i].call(this,t):this.each(function(){n(this).css(u,r(this,t,!0,e)+"px")})}}),n.fn.addBack=function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))});n.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38};n.ui.escapeSelector=function(){var n=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(n,"\\$1")}}();n.fn.labels=function(){var t,r,u,i,f;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(i=this.eq(0).parents("label"),u=this.attr("id"),u&&(t=this.eq(0).parents().last(),f=t.add(t.length?t.siblings():this.siblings()),r="label[for='"+n.ui.escapeSelector(u)+"']",i=i.add(f.find(r).addBack(r))),this.pushStack(i))};n.fn.scrollParent=function(t){var i=this.css("position"),u="absolute"===i,f=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=n(this);return u&&"static"===t.css("position")?!1:f.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:n(this[0].ownerDocument||document)};n.extend(n.expr[":"],{tabbable:function(t){var i=n.attr(t,"tabindex"),r=null!=i;return(!r||i>=0)&&n.ui.focusable(t,r)}});n.fn.extend({uniqueId:function(){var n=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&n(this).removeAttr("id")})}});n.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=n();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");t.collapsible||t.active!==!1&&null!=t.active||(t.active=0);this._processPanels();0>t.active&&(t.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():n()}},_createIcons:function(){var i,r,t=this.options.icons;t&&(i=n("<span>"),this._addClass(i,"ui-accordion-header-icon","ui-icon "+t.header),i.prependTo(this.headers),r=this.active.children(".ui-accordion-header-icon"),this._removeClass(r,t.header)._addClass(r,null,t.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var n;this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();n=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();"content"!==this.options.heightStyle&&n.css("height","")},_setOption:function(n,t){return"active"===n?(this._activate(t),void 0):("event"===n&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(n,t),"collapsible"!==n||t||this.options.active!==!1||this._activate(0),"icons"===n&&(this._destroyIcons(),t&&this._createIcons()),void 0)},_setOptionDisabled:function(n){this._super(n);this.element.attr("aria-disabled",n);this._toggleClass(null,"ui-state-disabled",!!n);this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!n)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=n.ui.keyCode,u=this.headers.length,f=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(f+1)%u];break;case i.LEFT:case i.UP:r=this.headers[(f-1+u)%u];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[u-1]}r&&(n(t.target).attr("tabIndex",-1),n(r).attr("tabIndex",0),n(r).trigger("focus"),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===n.ui.keyCode.UP&&t.ctrlKey&&n(t.currentTarget).prev().trigger("focus")},refresh:function(){var t=this.options;this._processPanels();t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=n()):t.active===!1?this._activate(0):this.active.length&&!n.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=n()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){var t=this.headers,n=this.panels;this.headers=this.element.find(this.options.header);this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");n&&(this._off(t.not(this.headers)),this._off(n.not(this.panels)))},_refresh:function(){var t,i=this.options,r=i.heightStyle,u=this.element.parent();this.active=this._findActive(i.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each(function(){var t=n(this),r=t.uniqueId().attr("id"),i=t.next(),u=i.uniqueId().attr("id");t.attr("aria-controls",u);i.attr("aria-labelledby",r)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(i.event);"fill"===r?(t=u.height(),this.element.siblings(":visible").each(function(){var i=n(this),r=i.css("position");"absolute"!==r&&"fixed"!==r&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=n(this).outerHeight(!0)}),this.headers.next().each(function(){n(this).height(Math.max(0,t-n(this).innerHeight()+n(this).height()))}).css("overflow","auto")):"auto"===r&&(t=0,this.headers.next().each(function(){var i=n(this).is(":visible");i||n(this).show();t=Math.max(t,n(this).css("height","").height());i||n(this).hide()}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:n.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):n()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&n.each(t.split(" "),function(n,t){i[t]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,i);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(t){var e,o,i=this.options,u=this.active,r=n(t.currentTarget),f=r[0]===u[0],s=f&&i.collapsible,c=s?n():r.next(),l=u.next(),h={oldHeader:u,oldPanel:l,newHeader:s?n():r,newPanel:c};t.preventDefault();f&&!i.collapsible||this._trigger("beforeActivate",t,h)===!1||(i.active=s?!1:this.headers.index(r),this.active=f?n():r,this._toggle(h),this._removeClass(u,"ui-accordion-header-active","ui-state-active"),i.icons&&(e=u.children(".ui-accordion-header-icon"),this._removeClass(e,null,i.icons.activeHeader)._addClass(e,null,i.icons.header)),f||(this._removeClass(r,"ui-accordion-header-collapsed")._addClass(r,"ui-accordion-header-active","ui-state-active"),i.icons&&(o=r.children(".ui-accordion-header-icon"),this._removeClass(o,null,i.icons.header)._addClass(o,null,i.icons.activeHeader)),this._addClass(r.next(),"ui-accordion-content-active")))},_toggle:function(t){var r=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=r;this.prevHide=i;this.options.animate?this._animate(r,i,t):(i.hide(),r.show(),this._toggleComplete(t));i.attr({"aria-hidden":"true"});i.prev().attr({"aria-selected":"false","aria-expanded":"false"});r.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):r.length&&this.headers.filter(function(){return 0===parseInt(n(this).attr("tabIndex"),10)}).attr("tabIndex",-1);r.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(n,t,i){var h,r,u,c=this,o=0,l=n.css("box-sizing"),a=n.length&&(!t.length||n.index()<t.index()),e=this.options.animate||{},f=a&&e.down||e,s=function(){c._toggleComplete(i)};return"number"==typeof f&&(u=f),"string"==typeof f&&(r=f),r=r||f.easing||e.easing,u=u||f.duration||e.duration,t.length?n.length?(h=n.show().outerHeight(),t.animate(this.hideProps,{duration:u,easing:r,step:function(n,t){t.now=Math.round(n)}}),n.hide().animate(this.showProps,{duration:u,easing:r,complete:s,step:function(n,i){i.now=Math.round(n);"height"!==i.prop?"content-box"===l&&(o+=i.now):"content"!==c.options.heightStyle&&(i.now=Math.round(h-t.outerHeight()-o),o=0)}}),void 0):t.animate(this.hideProps,u,r,s):n.animate(this.showProps,u,r,s)},_toggleComplete:function(n){var t=n.oldPanel,i=t.prev();this._removeClass(t,"ui-accordion-content-active");this._removeClass(i,"ui-accordion-header-active")._addClass(i,"ui-accordion-header-collapsed");t.length&&(t.parent()[0].className=t.parent()[0].className);this._trigger("activate",null,n)}});n.ui.safeActiveElement=function(n){var t;try{t=n.activeElement}catch(i){t=n.body}return t||(t=n.body),t.nodeName||(t=n.body),t};n.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().attr({role:this.options.role,tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function(n){n.preventDefault()},"click .ui-menu-item":function(t){var i=n(t.target),r=n(n.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&r.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var r=n(t.target).closest(".ui-menu-item"),i=n(t.currentTarget);r[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(n,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(n,i)},blur:function(t){this._delay(function(){var i=!n.contains(this.element[0],n.ui.safeActiveElement(this.document[0]));i&&this.collapseAll(t)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(n){this._closeOnDocumentClick(n)&&this.collapseAll(n);this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),i=t.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show();i.children().each(function(){var t=n(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var i,u,r,f,e=!0;switch(t.keyCode){case n.ui.keyCode.PAGE_UP:this.previousPage(t);break;case n.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case n.ui.keyCode.HOME:this._move("first","first",t);break;case n.ui.keyCode.END:this._move("last","last",t);break;case n.ui.keyCode.UP:this.previous(t);break;case n.ui.keyCode.DOWN:this.next(t);break;case n.ui.keyCode.LEFT:this.collapse(t);break;case n.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case n.ui.keyCode.ENTER:case n.ui.keyCode.SPACE:this._activate(t);break;case n.ui.keyCode.ESCAPE:this.collapse(t);break;default:e=!1;u=this.previousFilter||"";f=!1;r=t.keyCode>=96&&105>=t.keyCode?""+(t.keyCode-96):String.fromCharCode(t.keyCode);clearTimeout(this.filterTimer);r===u?f=!0:r=u+r;i=this._filterMenuItems(r);i=f&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i;i.length||(r=String.fromCharCode(t.keyCode),i=this._filterMenuItems(r));i.length?(this.focus(t,i),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}e&&t.preventDefault()},_activate:function(n){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(n):this.select(n))},refresh:function(){var u,t,f,i,e,r=this,s=this.options.icons.submenu,o=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length);f=o.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=n(this),i=t.prev(),u=n("<span>").data("ui-menu-submenu-caret",!0);r._addClass(u,"ui-menu-icon","ui-icon "+s);i.attr("aria-haspopup","true").prepend(u);t.attr("aria-labelledby",i.attr("id"))});this._addClass(f,"ui-menu","ui-widget ui-widget-content ui-front");u=o.add(this.element);t=u.find(this.options.items);t.not(".ui-menu-item").each(function(){var t=n(this);r._isDivider(t)&&r._addClass(t,"ui-menu-divider","ui-widget-content")});i=t.not(".ui-menu-item, .ui-menu-divider");e=i.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()});this._addClass(i,"ui-menu-item")._addClass(e,"ui-menu-item-wrapper");t.filter(".ui-state-disabled").attr("aria-disabled","true");this.active&&!n.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(n,t){if("icons"===n){var i=this.element.find(".ui-menu-icon");this._removeClass(i,null,this.options.icons.submenu)._addClass(i,null,t.submenu)}this._super(n,t)},_setOptionDisabled:function(n){this._super(n);this.element.attr("aria-disabled",n+"");this._toggleClass(null,"ui-state-disabled",!!n)},focus:function(n,t){var i,r,u;this.blur(n,n&&"focus"===n.type);this._scrollIntoView(t);this.active=t.first();r=this.active.children(".ui-menu-item-wrapper");this._addClass(r,null,"ui-state-active");this.options.role&&this.element.attr("aria-activedescendant",r.attr("id"));u=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(u,null,"ui-state-active");n&&"keydown"===n.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);i=t.children(".ui-menu");i.length&&n&&/^mouse/.test(n.type)&&this._startOpening(i);this.activeMenu=t.parent();this._trigger("focus",n,{item:t})},_scrollIntoView:function(t){var e,o,i,r,u,f;this._hasScroll()&&(e=parseFloat(n.css(this.activeMenu[0],"borderTopWidth"))||0,o=parseFloat(n.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-e-o,r=this.activeMenu.scrollTop(),u=this.activeMenu.height(),f=t.outerHeight(),0>i?this.activeMenu.scrollTop(r+i):i+f>u&&this.activeMenu.scrollTop(r+i-u+f))},blur:function(n,t){t||clearTimeout(this.timer);this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",n,{item:this.active}),this.active=null)},_startOpening:function(n){clearTimeout(this.timer);"true"===n.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(n)},this.delay))},_open:function(t){var i=n.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true");t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer);this.timer=this._delay(function(){var r=i?this.element:n(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element);this._close(r);this.blur(t);this._removeClass(r.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=r},this.delay)},_close:function(n){n||(n=this.active?this.active.parent():this.element);n.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!n(t.target).closest(".ui-menu").length},_isDivider:function(n){return!/[^\-\u2014\u2013\s]/.test(n.text())},collapse:function(n){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(n,t))},expand:function(n){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(n,t)}))},next:function(n){this._move("next","first",n)},previous:function(n){this._move("prev","last",n)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(n,t,i){var r;this.active&&(r="first"===n||"last"===n?this.active["first"===n?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[n+"All"](".ui-menu-item").eq(0));r&&r.length&&this.active||(r=this.activeMenu.find(this.options.items)[t]());this.focus(i,r)},nextPage:function(t){var i,r,u;return this.active?(this.isLastItem()||(this._hasScroll()?(r=this.active.offset().top,u=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=n(this),0>i.offset().top-r-u}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())),void 0):(this.next(t),void 0)},previousPage:function(t){var i,r,u;return this.active?(this.isFirstItem()||(this._hasScroll()?(r=this.active.offset().top,u=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=n(this),i.offset().top-r+u>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first())),void 0):(this.next(t),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||n(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0);this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),r=RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return r.test(n.trim(n(this).children(".ui-menu-item-wrapper").text()))})}});n.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,r,u=this.element[0].nodeName.toLowerCase(),f="textarea"===u,e="input"===u;this.isMultiLine=f||!e&&this._isContentEditable(this.element);this.valueMethod=this.element[f||e?"val":"text"];this.isNewMenu=!0;this._addClass("ui-autocomplete-input");this.element.attr("autocomplete","off");this._on(this.element,{keydown:function(u){if(this.element.prop("readOnly"))return t=!0,r=!0,i=!0,void 0;t=!1;r=!1;i=!1;var f=n.ui.keyCode;switch(u.keyCode){case f.PAGE_UP:t=!0;this._move("previousPage",u);break;case f.PAGE_DOWN:t=!0;this._move("nextPage",u);break;case f.UP:t=!0;this._keyEvent("previous",u);break;case f.DOWN:t=!0;this._keyEvent("next",u);break;case f.ENTER:this.menu.active&&(t=!0,u.preventDefault(),this.menu.select(u));break;case f.TAB:this.menu.active&&this.menu.select(u);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(u),u.preventDefault());break;default:i=!0;this._searchTimeout(u)}},keypress:function(r){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&r.preventDefault(),void 0;if(!i){var u=n.ui.keyCode;switch(r.keyCode){case u.PAGE_UP:this._move("previousPage",r);break;case u.PAGE_DOWN:this._move("nextPage",r);break;case u.UP:this._keyEvent("previous",r);break;case u.DOWN:this._keyEvent("next",r)}}},input:function(n){return r?(r=!1,n.preventDefault(),void 0):(this._searchTimeout(n),void 0)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(n){return this.cancelBlur?(delete this.cancelBlur,void 0):(clearTimeout(this.searching),this.close(n),this._change(n),void 0)}});this._initSource();this.menu=n("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._addClass(this.menu.element,"ui-autocomplete","ui-front");this._on(this.menu.element,{mousedown:function(t){t.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;this.element[0]!==n.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,i){var r,u;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),this.document.one("mousemove",function(){n(t.target).trigger(t.originalEvent)}),void 0):(u=i.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:u})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(u.value),r=i.item.attr("aria-label")||u.value,r&&n.trim(r).length&&(this.liveRegion.children().hide(),n("<div>").text(r).appendTo(this.liveRegion)),void 0)},menuselect:function(t,i){var r=i.item.data("ui-autocomplete-item"),u=this.previous;this.element[0]!==n.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=u,this._delay(function(){this.previous=u;this.selectedItem=r}));!1!==this._trigger("select",t,{item:r})&&this._value(r.value);this.term=this._value();this.close(t);this.selectedItem=r}});this.liveRegion=n("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(n,t){this._super(n,t);"source"===n&&this._initSource();"appendTo"===n&&this.menu.element.appendTo(this._appendTo());"disabled"===n&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var i=this.menu.element[0];return t.target===this.element[0]||t.target===i||n.contains(i,t.target)},_closeOnClickOutside:function(n){this._isEventTargetInWidget(n)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?n(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var i,r,t=this;n.isArray(this.options.source)?(i=this.options.source,this.source=function(t,r){r(n.ui.autocomplete.filter(i,t.term))}):"string"==typeof this.options.source?(r=this.options.source,this.source=function(i,u){t.xhr&&t.xhr.abort();t.xhr=n.ajax({url:r,data:i,dataType:"json",success:function(n){u(n)},error:function(){u([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching);this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),r=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey;t&&(!t||i||r)||(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(n,t){return n=null!=n?n:this._value(),this.term=this._value(),n.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(n):void 0},_search:function(n){this.pending++;this._addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:n},this._response())},_response:function(){var t=++this.requestIndex;return n.proxy(function(n){t===this.requestIndex&&this.__response(n);this.pending--;this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(n){n&&(n=this._normalize(n));this._trigger("response",null,{content:n});!this.options.disabled&&n&&n.length&&!this.cancelSearch?(this._suggest(n),this._trigger("open")):this._close()},close:function(n){this.cancelSearch=!0;this._close(n)},_close:function(n){this._off(this.document,"mousedown");this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",n))},_change:function(n){this.previous!==this._value()&&this._trigger("change",n,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:n.map(t,function(t){return"string"==typeof t?{label:t,value:t}:n.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t);this.isNewMenu=!0;this.menu.refresh();i.show();this._resizeMenu();i.position(n.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next();this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var n=this.menu.element;n.outerWidth(Math.max(n.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var r=this;n.each(i,function(n,i){r._renderItemData(t,i)})},_renderItemData:function(n,t){return this._renderItem(n,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return n("<li>").append(n("<div>").text(i.label)).appendTo(t)},_move:function(n,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(n)||this.menu.isLastItem()&&/^next/.test(n)?(this.isMultiLine||this._value(this.term),this.menu.blur(),void 0):(this.menu[n](t),void 0):(this.search(null,t),void 0)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(n,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(n,t),t.preventDefault())},_isContentEditable:function(n){if(!n.length)return!1;var t=n.prop("contentEditable");return"inherit"===t?this._isContentEditable(n.parent()):"true"===t}});n.extend(n.ui.autocomplete,{escapeRegex:function(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var r=RegExp(n.ui.autocomplete.escapeRegex(i),"i");return n.grep(t,function(n){return r.test(n.label||n.value||n)})}});n.widget("ui.autocomplete",n.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(n){return n+(n>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;this._superApply(arguments);this.options.disabled||this.cancelSearch||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),n("<div>").text(i).appendTo(this.liveRegion))}});n.ui.autocomplete;w=/ui-corner-([a-z]){2,6}/g;n.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar");this.refresh()},_destroy:function(){this._callChildMethod("destroy");this.childWidgets.removeData("ui-controlgroup-data");this.element.removeAttr("role");this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,i=[];n.each(this.options.items,function(r,u){var f,e={};if(u)return"controlgroupLabel"===r?(f=t.element.find(u),f.each(function(){var t=n(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'><\/span>")}),t._addClass(f,null,"ui-widget ui-widget-content ui-state-default"),i=i.concat(f.get()),void 0):(n.fn[r]&&(e=t["_"+r+"Options"]?t["_"+r+"Options"]("middle"):{classes:{}},t.element.find(u).each(function(){var u=n(this),f=u[r]("instance"),o=n.widget.extend({},e),s;"button"===r&&u.parent(".ui-spinner").length||(f||(f=u[r]()[r]("instance")),f&&(o.classes=t._resolveClassesValues(o.classes,f)),u[r](o),s=u[r]("widget"),n.data(s[0],"ui-controlgroup-data",f?f:u[r]("instance")),i.push(s[0]))})),void 0)});this.childWidgets=n(n.unique(i));this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var r=n(this),i=r.data("ui-controlgroup-data");i&&i[t]&&i[t]()})},_updateCornerClass:function(n,t){var i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(n,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all");this._addClass(n,null,i)},_buildSimpleOptions:function(n,t){var i="vertical"===this.options.direction,r={classes:{}};return r.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[n],r},_spinnerOptions:function(n){var t=this._buildSimpleOptions(n,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(n){return this._buildSimpleOptions(n,"ui-button")},_checkboxradioOptions:function(n){return this._buildSimpleOptions(n,"ui-checkboxradio-label")},_selectmenuOptions:function(n){var t="vertical"===this.options.direction;return{width:t?"auto":!1,classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[n]}},_resolveClassesValues:function(t,i){var r={};return n.each(t,function(u){var f=i.options.classes[u]||"";f=n.trim(f.replace(w,""));r[u]=(f+" "+t[u]).replace(/\s+/g," ")}),r},_setOption:function(n,t){return"direction"===n&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(n,t),"disabled"===n?(this._callChildMethod(t?"disable":"enable"),void 0):(this.refresh(),void 0)},refresh:function(){var t,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction);"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix");this._initWidgets();t=this.childWidgets;this.options.onlyVisible&&(t=t.filter(":visible"));t.length&&(n.each(["first","last"],function(n,r){var u=t[r]().data("ui-controlgroup-data"),f;u&&i["_"+u.widgetName+"Options"]?(f=i["_"+u.widgetName+"Options"](1===t.length?"only":r),f.classes=i._resolveClassesValues(f.classes,u),u.element[u.widgetName](f)):i._updateCornerClass(t[r](),r)}),this._callChildMethod("refresh"))}});n.widget("ui.checkboxradio",[n.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,i,u=this,r=this._super()||{};return this._readType(),i=this.element.labels(),this.label=n(i[i.length-1]),this.label.length||n.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){u.originalLabel+=3===this.nodeType?n(this).text():this.outerHTML}),this.originalLabel&&(r.label=this.originalLabel),t=this.element[0].disabled,null!=t&&(r.disabled=t),r},_create:function(){var n=this.element[0].checked;this._bindFormResetHandler();null==this.options.disabled&&(this.options.disabled=this.element[0].disabled);this._setOption("disabled",this.options.disabled);this._addClass("ui-checkboxradio","ui-helper-hidden-accessible");this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget");"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label");this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel);this._enhance();n&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover"));this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type;"input"===t&&/radio|checkbox/.test(this.type)||n.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t,i=this.element[0].name,r="input[name='"+n.ui.escapeSelector(i)+"']";return i?(t=this.form.length?n(this.form[0].elements).filter(r):n(r).filter(function(){return 0===n(this).form().length}),t.not(this.element)):n([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t);this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t);"radio"===this.type&&this._getRadioGroup().each(function(){var t=n(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler();this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(n,t){if("label"!==n||t)return(this._super(n,t),"disabled"===n?(this._toggleClass(this.label,null,"ui-state-disabled",t),this.element[0].disabled=t,void 0):(this.refresh(),void 0))},_updateIcon:function(t){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=n("<span>"),this.iconSpace=n("<span> <\/span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var n=this.label.contents().not(this.element[0]);this.icon&&(n=n.not(this.icon[0]));this.iconSpace&&(n=n.not(this.iconSpace[0]));n.remove();this.label.append(this.options.label)},refresh:function(){var n=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(n);this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",n);null!==this.options.label&&this._updateLabel();t!==this.options.disabled&&this._setOptions({disabled:t})}}]);n.ui.checkboxradio;n.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var n,t=this._super()||{};return this.isInput=this.element.is("input"),n=this.element[0].disabled,null!=n&&(t.disabled=n),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0);null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1);this.hasTitle=!!this.element.attr("title");this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label));this._addClass("ui-button","ui-widget");this._setOption("disabled",this.options.disabled);this._enhance();this.element.is("a")&&this._on({keyup:function(t){t.keyCode===n.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button");this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title");this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,i){var u="iconPosition"!==t,r=u?this.options.iconPosition:i,f="top"===r||"bottom"===r;this.icon?u&&this._removeClass(this.icon,null,this.options.icon):(this.icon=n("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only"));u&&this._addClass(this.icon,null,i);this._attachIcon(r);f?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=n("<span> <\/span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(r))},_destroy:function(){this.element.removeAttr("role");this.icon&&this.icon.remove();this.iconSpace&&this.iconSpace.remove();this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(n){this.icon[/^(?:end|bottom)/.test(n)?"before":"after"](this.iconSpace)},_attachIcon:function(n){this.element[/^(?:end|bottom)/.test(n)?"append":"prepend"](this.icon)},_setOptions:function(n){var t=void 0===n.showLabel?this.options.showLabel:n.showLabel,i=void 0===n.icon?this.options.icon:n.icon;t||i||(n.showLabel=!0);this._super(n)},_setOption:function(n,t){"icon"===n&&(t?this._updateIcon(n,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove()));"iconPosition"===n&&this._updateIcon(n,t);"showLabel"===n&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip());"label"===n&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition))));this._super(n,t);"disabled"===n&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var n=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");n!==this.options.disabled&&this._setOptions({disabled:n});this._updateTooltip()}});n.uiBackCompat!==!1&&(n.widget("ui.button",n.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text);!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel);this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end");this._super()},_setOption:function(n,t){return"text"===n?(this._super("showLabel",t),void 0):("showLabel"===n&&(this.options.text=t),"icon"===n&&(this.options.icons.primary=t),"icons"===n&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments),void 0)}}),n.fn.button=function(t){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(n.ui.checkboxradio||n.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(n.fn.button),n.fn.buttonset=function(){return n.ui.controlgroup||n.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))});n.ui.button;n.extend(n.ui,{datepicker:{version:"1.12.1"}});n.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(n){return u(this._defaults,n||{}),this},_attachDatepicker:function(t,i){var r,f,u;r=t.nodeName.toLowerCase();f="div"===r||"span"===r;t.id||(this.uuid+=1,t.id="dp"+this.uuid);u=this._newInst(n(t),f);u.settings=n.extend({},i||{});"input"===r?this._connectDatepicker(t,u):f&&this._inlineDatepicker(t,u)},_newInst:function(t,i){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?l(n("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>")):this.dpDiv}},_connectDatepicker:function(t,i){var r=n(t);i.append=n([]);i.trigger=n([]);r.hasClass(this.markerClassName)||(this._attachments(r,i),r.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),n.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var u,r,f,e=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove();e&&(i.append=n("<span class='"+this._appendClass+"'>"+e+"<\/span>"),t[o?"before":"after"](i.append));t.off("focus",this._showDatepicker);i.trigger&&i.trigger.remove();u=this._get(i,"showOn");("focus"===u||"both"===u)&&t.on("focus",this._showDatepicker);("button"===u||"both"===u)&&(r=this._get(i,"buttonText"),f=this._get(i,"buttonImage"),i.trigger=n(this._get(i,"buttonImageOnly")?n("<img/>").addClass(this._triggerClass).attr({src:f,alt:r,title:r}):n("<button type='button'><\/button>").addClass(this._triggerClass).html(f?n("<img/>").attr({src:f,alt:r,title:r}):r)),t[o?"before":"after"](i.trigger),i.trigger.on("click",function(){return n.datepicker._datepickerShowing&&n.datepicker._lastInput===t[0]?n.datepicker._hideDatepicker():n.datepicker._datepickerShowing&&n.datepicker._lastInput!==t[0]?(n.datepicker._hideDatepicker(),n.datepicker._showDatepicker(t[0])):n.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(n){if(this._get(n,"autoSize")&&!n.inline){var r,u,f,t,i=new Date(2009,11,20),e=this._get(n,"dateFormat");e.match(/[DM]/)&&(r=function(n){for(u=0,f=0,t=0;n.length>t;t++)n[t].length>u&&(u=n[t].length,f=t);return f},i.setMonth(r(this._get(n,e.match(/MM/)?"monthNames":"monthNamesShort"))),i.setDate(r(this._get(n,e.match(/DD/)?"dayNames":"dayNamesShort"))+20-i.getDay()));n.input.attr("size",this._formatDate(n,i).length)}},_inlineDatepicker:function(t,i){var r=n(t);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(i.dpDiv),n.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,r,f,e){var s,h,c,l,a,o=this._dialogInst;return o||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=n("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),n("body").append(this._dialogInput),o=this._dialogInst=this._newInst(this._dialogInput,!1),o.settings={},n.data(this._dialogInput[0],"datepicker",o)),u(o.settings,f||{}),i=i&&i.constructor===Date?this._formatDate(o,i):i,this._dialogInput.val(i),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,this._pos||(h=document.documentElement.clientWidth,c=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,a=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+l,c/2-150+a]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),o.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),n.blockUI&&n.blockUI(this.dpDiv),n.data(this._dialogInput[0],"datepicker",o),this},_destroyDatepicker:function(t){var r,u=n(t),f=n.data(t,"datepicker");u.hasClass(this.markerClassName)&&(r=t.nodeName.toLowerCase(),n.removeData(t,"datepicker"),"input"===r?(f.append.remove(),f.trigger.remove(),u.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):("div"===r||"span"===r)&&u.removeClass(this.markerClassName).empty(),i===f&&(i=null))},_enableDatepicker:function(t){var i,r,u=n(t),f=n.data(t,"datepicker");u.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(r=u.children("."+this._inlineClass),r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}))},_disableDatepicker:function(t){var i,r,u=n(t),f=n.data(t,"datepicker");u.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(r=u.children("."+this._inlineClass),r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(n){if(!n)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===n)return!0;return!1},_getInst:function(t){try{return n.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(t,i,r){var e,h,o,s,f=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?n.extend({},n.datepicker._defaults):f?"all"===i?n.extend({},f.settings):this._get(f,i):null:(e=i||{},"string"==typeof i&&(e={},e[i]=r),f&&(this._curInst===f&&this._hideDatepicker(),h=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(f,"min"),s=this._getMinMaxDate(f,"max"),u(f.settings,e),null!==o&&void 0!==e.dateFormat&&void 0===e.minDate&&(f.settings.minDate=this._formatDate(f,o)),null!==s&&void 0!==e.dateFormat&&void 0===e.maxDate&&(f.settings.maxDate=this._formatDate(f,s)),"disabled"in e&&(e.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(n(t),f),this._autoSize(f),this._setDate(f,h),this._updateAlternate(f),this._updateDatepicker(f)),void 0)},_changeDatepicker:function(n,t,i){this._optionDatepicker(n,t,i)},_refreshDatepicker:function(n){var t=this._getInst(n);t&&this._updateDatepicker(t)},_setDateDatepicker:function(n,t){var i=this._getInst(n);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(n,t){var i=this._getInst(n);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var u,e,f,i=n.datepicker._getInst(t.target),r=!0,o=i.dpDiv.is(".ui-datepicker-rtl");if(i._keyEvent=!0,n.datepicker._datepickerShowing)switch(t.keyCode){case 9:n.datepicker._hideDatepicker();r=!1;break;case 13:return f=n("td."+n.datepicker._dayOverClass+":not(."+n.datepicker._currentClass+")",i.dpDiv),f[0]&&n.datepicker._selectDay(t.target,i.selectedMonth,i.selectedYear,f[0]),u=n.datepicker._get(i,"onSelect"),u?(e=n.datepicker._formatDate(i),u.apply(i.input?i.input[0]:null,[e,i])):n.datepicker._hideDatepicker(),!1;case 27:n.datepicker._hideDatepicker();break;case 33:n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 34:n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&n.datepicker._clearDate(t.target);r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&n.datepicker._gotoToday(t.target);r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?1:-1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,-7,"D");r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?-1:1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,7,"D");r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?n.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,r,u=n.datepicker._getInst(t.target);if(n.datepicker._get(u,"constrainInput"))return(i=n.datepicker._possibleChars(n.datepicker._get(u,"dateFormat")),r=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">r||!i||i.indexOf(r)>-1)},_doKeyUp:function(t){var r,i=n.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{r=n.datepicker.parseDate(n.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,n.datepicker._getFormatConfig(i));r&&(n.datepicker._setDateFromField(i),n.datepicker._updateAlternate(i),n.datepicker._updateDatepicker(i))}catch(u){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=n("input",t.parentNode)[0]),!n.datepicker._isDisabledDatepicker(t)&&n.datepicker._lastInput!==t){var i,o,s,r,f,e,h;i=n.datepicker._getInst(t);n.datepicker._curInst&&n.datepicker._curInst!==i&&(n.datepicker._curInst.dpDiv.stop(!0,!0),i&&n.datepicker._datepickerShowing&&n.datepicker._hideDatepicker(n.datepicker._curInst.input[0]));o=n.datepicker._get(i,"beforeShow");s=o?o.apply(t,[t,i]):{};s!==!1&&(u(i.settings,s),i.lastVal=null,n.datepicker._lastInput=t,n.datepicker._setDateFromField(i),n.datepicker._inDialog&&(t.value=""),n.datepicker._pos||(n.datepicker._pos=n.datepicker._findPos(t),n.datepicker._pos[1]+=t.offsetHeight),r=!1,n(t).parents().each(function(){return r|="fixed"===n(this).css("position"),!r}),f={left:n.datepicker._pos[0],top:n.datepicker._pos[1]},n.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),n.datepicker._updateDatepicker(i),f=n.datepicker._checkOffset(i,f,r),i.dpDiv.css({position:n.datepicker._inDialog&&n.blockUI?"static":r?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),i.inline||(e=n.datepicker._get(i,"showAnim"),h=n.datepicker._get(i,"duration"),i.dpDiv.css("z-index",k(n(t))+1),n.datepicker._datepickerShowing=!0,n.effects&&n.effects.effect[e]?i.dpDiv.show(e,n.datepicker._get(i,"showOptions"),h):i.dpDiv[e||"show"](e?h:null),n.datepicker._shouldFocusInput(i)&&i.input.trigger("focus"),n.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4;i=t;t.dpDiv.empty().append(this._generateHTML(t));this._attachHandlers(t);var r,u=this._getNumberOfMonths(t),f=u[1],e=t.dpDiv.find("."+this._dayOverClass+" a");e.length>0&&a.apply(e.get(0));t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");f>1&&t.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",17*f+"em");t.dpDiv[(1!==u[0]||1!==u[1]?"add":"remove")+"Class"]("ui-datepicker-multi");t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");t===n.datepicker._curInst&&n.datepicker._datepickerShowing&&n.datepicker._shouldFocusInput(t)&&t.input.trigger("focus");t.yearshtml&&(r=t.yearshtml,setTimeout(function(){r===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml);r=t.yearshtml=null},0))},_shouldFocusInput:function(n){return n.input&&n.input.is(":visible")&&!n.input.is(":disabled")&&!n.input.is(":focus")},_checkOffset:function(t,i,r){var u=t.dpDiv.outerWidth(),f=t.dpDiv.outerHeight(),h=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,e=document.documentElement.clientWidth+(r?0:n(document).scrollLeft()),s=document.documentElement.clientHeight+(r?0:n(document).scrollTop());return i.left-=this._get(t,"isRTL")?u-h:0,i.left-=r&&i.left===t.input.offset().left?n(document).scrollLeft():0,i.top-=r&&i.top===t.input.offset().top+o?n(document).scrollTop():0,i.left-=Math.min(i.left,i.left+u>e&&e>u?Math.abs(i.left+u-e):0),i.top-=Math.min(i.top,i.top+f>s&&s>f?Math.abs(f+o):0),i},_findPos:function(t){for(var i,r=this._getInst(t),u=this._get(r,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||n.expr.filters.hidden(t));)t=t[u?"previousSibling":"nextSibling"];return i=n(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var r,f,u,e,i=this._curInst;!i||t&&i!==n.data(t,"datepicker")||this._datepickerShowing&&(r=this._get(i,"showAnim"),f=this._get(i,"duration"),u=function(){n.datepicker._tidyDialog(i)},n.effects&&(n.effects.effect[r]||n.effects[r])?i.dpDiv.hide(r,n.datepicker._get(i,"showOptions"),f,u):i.dpDiv["slideDown"===r?"slideUp":"fadeIn"===r?"fadeOut":"hide"](r?f:null,u),r||u(),this._datepickerShowing=!1,e=this._get(i,"onClose"),e&&e.apply(i.input?i.input[0]:null,[i.input?i.input.val():"",i]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),n.blockUI&&(n.unblockUI(),n("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(n){n.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(n.datepicker._curInst){var i=n(t.target),r=n.datepicker._getInst(i[0]);(i[0].id===n.datepicker._mainDivId||0!==i.parents("#"+n.datepicker._mainDivId).length||i.hasClass(n.datepicker.markerClassName)||i.closest("."+n.datepicker._triggerClass).length||!n.datepicker._datepickerShowing||n.datepicker._inDialog&&n.blockUI)&&(!i.hasClass(n.datepicker.markerClassName)||n.datepicker._curInst===r)||n.datepicker._hideDatepicker()}},_adjustDate:function(t,i,r){var f=n(t),u=this._getInst(f[0]);this._isDisabledDatepicker(f[0])||(this._adjustInstDate(u,i+("M"===r?this._get(u,"showCurrentAtPos"):0),r),this._updateDatepicker(u))},_gotoToday:function(t){var r,u=n(t),i=this._getInst(u[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(r=new Date,i.selectedDay=r.getDate(),i.drawMonth=i.selectedMonth=r.getMonth(),i.drawYear=i.selectedYear=r.getFullYear());this._notifyChange(i);this._adjustDate(u)},_selectMonthYear:function(t,i,r){var f=n(t),u=this._getInst(f[0]);u["selected"+("M"===r?"Month":"Year")]=u["draw"+("M"===r?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10);this._notifyChange(u);this._adjustDate(f)},_selectDay:function(t,i,r,u){var f,e=n(t);n(u).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])||(f=this._getInst(e[0]),f.selectedDay=f.currentDay=n("a",u).html(),f.selectedMonth=f.currentMonth=i,f.selectedYear=f.currentYear=r,this._selectDate(t,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(t){var i=n(t);this._selectDate(i,"")},_selectDate:function(t,i){var u,f=n(t),r=this._getInst(f[0]);i=null!=i?i:this._formatDate(r);r.input&&r.input.val(i);this._updateAlternate(r);u=this._get(r,"onSelect");u?u.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change");r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var i,r,u,f=this._get(t,"altField");f&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),u=this.formatDate(i,r,this._getFormatConfig(t)),n(f).val(u))},noWeekends:function(n){var t=n.getDay();return[t>0&&6>t,""]},iso8601Week:function(n){var i,t=new Date(n.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),i=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(t,i,r){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;for(var a,v,u,f=0,y=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof y?y:(new Date).getFullYear()%100+parseInt(y,10),g=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,nt=(r?r.dayNames:null)||this._defaults.dayNames,tt=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,it=(r?r.monthNames:null)||this._defaults.monthNames,e=-1,s=-1,h=-1,p=-1,w=!1,l=function(n){var i=t.length>o+1&&t.charAt(o+1)===n;return i&&o++,i},c=function(n){var u=l(n),r="@"===n?14:"!"===n?20:"y"===n&&u?4:"o"===n?3:2,e="y"===n?r:1,o=RegExp("^\\d{"+e+","+r+"}"),t=i.substring(f).match(o);if(!t)throw"Missing number at position "+f;return f+=t[0].length,parseInt(t[0],10)},k=function(t,r,u){var e=-1,o=n.map(l(t)?u:r,function(n,t){return[[t,n]]}).sort(function(n,t){return-(n[1].length-t[1].length)});if(n.each(o,function(n,t){var r=t[1];if(i.substr(f,r.length).toLowerCase()===r.toLowerCase())return(e=t[0],f+=r.length,!1)}),-1!==e)return e+1;throw"Unknown name at position "+f;},b=function(){if(i.charAt(f)!==t.charAt(o))throw"Unexpected literal at position "+f;f++},o=0;t.length>o;o++)if(w)"'"!==t.charAt(o)||l("'")?b():w=!1;else switch(t.charAt(o)){case"d":h=c("d");break;case"D":k("D",g,nt);break;case"o":p=c("o");break;case"m":s=c("m");break;case"M":s=k("M",tt,it);break;case"y":e=c("y");break;case"@":u=new Date(c("@"));e=u.getFullYear();s=u.getMonth()+1;h=u.getDate();break;case"!":u=new Date((c("!")-this._ticksTo1970)/1e4);e=u.getFullYear();s=u.getMonth()+1;h=u.getDate();break;case"'":l("'")?b():w=!0;break;default:b()}if(i.length>f&&(v=i.substr(f),!/^\s+/.test(v)))throw"Extra/unparsed characters found in date: "+v;if(-1===e?e=(new Date).getFullYear():100>e&&(e+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=e?0:-100)),p>-1)for(s=1,h=p;;){if(a=this._getDaysInMonth(e,s-1),a>=h)break;s++;h-=a}if(u=this._daylightSavingAdjust(new Date(e,s-1,h)),u.getFullYear()!==e||u.getMonth()+1!==s||u.getDate()!==h)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(n,t,i){if(!t)return"";var u,h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,c=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,f=function(t){var i=n.length>u+1&&n.charAt(u+1)===t;return i&&u++,i},e=function(n,t,i){var r=""+t;if(f(n))for(;i>r.length;)r="0"+r;return r},s=function(n,t,i,r){return f(n)?r[t]:i[t]},r="",o=!1;if(t)for(u=0;n.length>u;u++)if(o)"'"!==n.charAt(u)||f("'")?r+=n.charAt(u):o=!1;else switch(n.charAt(u)){case"d":r+=e("d",t.getDate(),2);break;case"D":r+=s("D",t.getDay(),h,c);break;case"o":r+=e("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":r+=e("m",t.getMonth()+1,2);break;case"M":r+=s("M",t.getMonth(),l,a);break;case"y":r+=f("y")?t.getFullYear():(10>t.getFullYear()%100?"0":"")+t.getFullYear()%100;break;case"@":r+=t.getTime();break;case"!":r+=1e4*t.getTime()+this._ticksTo1970;break;case"'":f("'")?r+="'":o=!0;break;default:r+=n.charAt(u)}return r},_possibleChars:function(n){for(var i="",r=!1,u=function(i){var r=n.length>t+1&&n.charAt(t+1)===i;return r&&t++,r},t=0;n.length>t;t++)if(r)"'"!==n.charAt(t)||u("'")?i+=n.charAt(t):r=!1;else switch(n.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":u("'")?i+="'":r=!0;break;default:i+=n.charAt(t)}return i},_get:function(n,t){return void 0!==n.settings[t]?n.settings[t]:this._defaults[t]},_setDateFromField:function(n,t){if(n.input.val()!==n.lastVal){var f=this._get(n,"dateFormat"),r=n.lastVal=n.input?n.input.val():null,u=this._getDefaultDate(n),i=u,e=this._getFormatConfig(n);try{i=this.parseDate(f,r,e)||u}catch(o){r=t?"":r}n.selectedDay=i.getDate();n.drawMonth=n.selectedMonth=i.getMonth();n.drawYear=n.selectedYear=i.getFullYear();n.currentDay=r?i.getDate():0;n.currentMonth=r?i.getMonth():0;n.currentYear=r?i.getFullYear():0;this._adjustInstDate(n)}},_getDefaultDate:function(n){return this._restrictMinMax(n,this._determineDate(n,this._get(n,"defaultDate"),new Date))},_determineDate:function(t,i,r){var f=function(n){var t=new Date;return t.setDate(t.getDate()+n),t},e=function(i){try{return n.datepicker.parseDate(n.datepicker._get(t,"dateFormat"),i,n.datepicker._getFormatConfig(t))}catch(h){}for(var o=(i.toLowerCase().match(/^c/)?n.datepicker._getDate(t):null)||new Date,f=o.getFullYear(),e=o.getMonth(),r=o.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=s.exec(i);u;){switch(u[2]||"d"){case"d":case"D":r+=parseInt(u[1],10);break;case"w":case"W":r+=7*parseInt(u[1],10);break;case"m":case"M":e+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e));break;case"y":case"Y":f+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e))}u=s.exec(i)}return new Date(f,e,r)},u=null==i||""===i?r:"string"==typeof i?e(i):"number"==typeof i?isNaN(i)?r:f(i):new Date(i.getTime());return u=u&&"Invalid Date"==""+u?r:u,u&&(u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0)),this._daylightSavingAdjust(u)},_daylightSavingAdjust:function(n){return n?(n.setHours(n.getHours()>12?n.getHours()+2:0),n):null},_setDate:function(n,t,i){var u=!t,f=n.selectedMonth,e=n.selectedYear,r=this._restrictMinMax(n,this._determineDate(n,t,new Date));n.selectedDay=n.currentDay=r.getDate();n.drawMonth=n.selectedMonth=n.currentMonth=r.getMonth();n.drawYear=n.selectedYear=n.currentYear=r.getFullYear();f===n.selectedMonth&&e===n.selectedYear||i||this._notifyChange(n);this._adjustInstDate(n);n.input&&n.input.val(u?"":this._formatDate(n))},_getDate:function(n){return!n.currentYear||n.input&&""===n.input.val()?null:this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay))},_attachHandlers:function(t){var r=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){n.datepicker._adjustDate(i,-r,"M")},next:function(){n.datepicker._adjustDate(i,+r,"M")},hide:function(){n.datepicker._hideDatepicker()},today:function(){n.datepicker._gotoToday(i)},selectDay:function(){return n.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return n.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return n.datepicker._selectMonthYear(i,this,"Y"),!1}};n(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(n){var b,s,rt,h,ut,k,ft,et,ri,c,ot,ui,fi,ei,oi,st,g,si,ht,nt,o,y,ct,p,lt,l,u,at,vt,yt,pt,tt,wt,i,bt,kt,d,a,it,dt=new Date,gt=this._daylightSavingAdjust(new Date(dt.getFullYear(),dt.getMonth(),dt.getDate())),f=this._get(n,"isRTL"),li=this._get(n,"showButtonPanel"),hi=this._get(n,"hideIfNoPrevNext"),ni=this._get(n,"navigationAsDateFormat"),e=this._getNumberOfMonths(n),ai=this._get(n,"showCurrentAtPos"),ci=this._get(n,"stepMonths"),ti=1!==e[0]||1!==e[1],ii=this._daylightSavingAdjust(n.currentDay?new Date(n.currentYear,n.currentMonth,n.currentDay):new Date(9999,9,9)),w=this._getMinMaxDate(n,"min"),v=this._getMinMaxDate(n,"max"),t=n.drawMonth-ai,r=n.drawYear;if(0>t&&(t+=12,r--),v)for(b=this._daylightSavingAdjust(new Date(v.getFullYear(),v.getMonth()-e[0]*e[1]+1,v.getDate())),b=w&&w>b?w:b;this._daylightSavingAdjust(new Date(r,t,1))>b;)t--,0>t&&(t=11,r--);for(n.drawMonth=t,n.drawYear=r,s=this._get(n,"prevText"),s=ni?this.formatDate(s,this._daylightSavingAdjust(new Date(r,t-ci,1)),this._getFormatConfig(n)):s,rt=this._canAdjustMonth(n,-1,r,t)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"e":"w")+"'>"+s+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"e":"w")+"'>"+s+"<\/span><\/a>",h=this._get(n,"nextText"),h=ni?this.formatDate(h,this._daylightSavingAdjust(new Date(r,t+ci,1)),this._getFormatConfig(n)):h,ut=this._canAdjustMonth(n,1,r,t)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"w":"e")+"'>"+h+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"w":"e")+"'>"+h+"<\/span><\/a>",k=this._get(n,"currentText"),ft=this._get(n,"gotoCurrent")&&n.currentDay?ii:gt,k=ni?this.formatDate(k,ft,this._getFormatConfig(n)):k,et=n.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(n,"closeText")+"<\/button>",ri=li?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(f?et:"")+(this._isInRange(n,ft)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+k+"<\/button>":"")+(f?"":et)+"<\/div>":"",c=parseInt(this._get(n,"firstDay"),10),c=isNaN(c)?0:c,ot=this._get(n,"showWeek"),ui=this._get(n,"dayNames"),fi=this._get(n,"dayNamesMin"),ei=this._get(n,"monthNames"),oi=this._get(n,"monthNamesShort"),st=this._get(n,"beforeShowDay"),g=this._get(n,"showOtherMonths"),si=this._get(n,"selectOtherMonths"),ht=this._getDefaultDate(n),nt="",y=0;e[0]>y;y++){for(ct="",this.maxRows=4,p=0;e[1]>p;p++){if(lt=this._daylightSavingAdjust(new Date(r,t,n.selectedDay)),l=" ui-corner-all",u="",ti){if(u+="<div class='ui-datepicker-group",e[1]>1)switch(p){case 0:u+=" ui-datepicker-group-first";l=" ui-corner-"+(f?"right":"left");break;case e[1]-1:u+=" ui-datepicker-group-last";l=" ui-corner-"+(f?"left":"right");break;default:u+=" ui-datepicker-group-middle";l=""}u+="'>"}for(u+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+l+"'>"+(/all|left/.test(l)&&0===y?f?ut:rt:"")+(/all|right/.test(l)&&0===y?f?rt:ut:"")+this._generateMonthYearHeader(n,t,r,w,v,y>0||p>0,ei,oi)+"<\/div><table class='ui-datepicker-calendar'><thead><tr>",at=ot?"<th class='ui-datepicker-week-col'>"+this._get(n,"weekHeader")+"<\/th>":"",o=0;7>o;o++)vt=(o+c)%7,at+="<th scope='col'"+((o+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+ui[vt]+"'>"+fi[vt]+"<\/span><\/th>";for(u+=at+"<\/tr><\/thead><tbody>",yt=this._getDaysInMonth(r,t),r===n.selectedYear&&t===n.selectedMonth&&(n.selectedDay=Math.min(n.selectedDay,yt)),pt=(this._getFirstDayOfMonth(r,t)-c+7)%7,tt=Math.ceil((pt+yt)/7),wt=ti?this.maxRows>tt?this.maxRows:tt:tt,this.maxRows=wt,i=this._daylightSavingAdjust(new Date(r,t,1-pt)),bt=0;wt>bt;bt++){for(u+="<tr>",kt=ot?"<td class='ui-datepicker-week-col'>"+this._get(n,"calculateWeek")(i)+"<\/td>":"",o=0;7>o;o++)d=st?st.apply(n.input?n.input[0]:null,[i]):[!0,""],a=i.getMonth()!==t,it=a&&!si||!d[0]||w&&w>i||v&&i>v,kt+="<td class='"+((o+c+6)%7>=5?" ui-datepicker-week-end":"")+(a?" ui-datepicker-other-month":"")+(i.getTime()===lt.getTime()&&t===n.selectedMonth&&n._keyEvent||ht.getTime()===i.getTime()&&ht.getTime()===lt.getTime()?" "+this._dayOverClass:"")+(it?" "+this._unselectableClass+" ui-state-disabled":"")+(a&&!g?"":" "+d[1]+(i.getTime()===ii.getTime()?" "+this._currentClass:"")+(i.getTime()===gt.getTime()?" ui-datepicker-today":""))+"'"+(a&&!g||!d[2]?"":" title='"+d[2].replace(/'/g,"&#39;")+"'")+(it?"":" data-handler='selectDay' data-event='click' data-month='"+i.getMonth()+"' data-year='"+i.getFullYear()+"'")+">"+(a&&!g?"&#xa0;":it?"<span class='ui-state-default'>"+i.getDate()+"<\/span>":"<a class='ui-state-default"+(i.getTime()===gt.getTime()?" ui-state-highlight":"")+(i.getTime()===ii.getTime()?" ui-state-active":"")+(a?" ui-priority-secondary":"")+"' href='#'>"+i.getDate()+"<\/a>")+"<\/td>",i.setDate(i.getDate()+1),i=this._daylightSavingAdjust(i);u+=kt+"<\/tr>"}t++;t>11&&(t=0,r++);u+="<\/tbody><\/table>"+(ti?"<\/div>"+(e[0]>0&&p===e[1]-1?"<div class='ui-datepicker-row-break'><\/div>":""):"");ct+=u}nt+=ct}return nt+=ri,n._keyEvent=!1,nt},_generateMonthYearHeader:function(n,t,i,r,u,f,e,o){var k,d,h,v,y,p,s,a,w=this._get(n,"changeMonth"),b=this._get(n,"changeYear"),g=this._get(n,"showMonthAfterYear"),c="<div class='ui-datepicker-title'>",l="";if(f||!w)l+="<span class='ui-datepicker-month'>"+e[t]+"<\/span>";else{for(k=r&&r.getFullYear()===i,d=u&&u.getFullYear()===i,l+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;12>h;h++)(!k||h>=r.getMonth())&&(!d||u.getMonth()>=h)&&(l+="<option value='"+h+"'"+(h===t?" selected='selected'":"")+">"+o[h]+"<\/option>");l+="<\/select>"}if(g||(c+=l+(!f&&w&&b?"":"&#xa0;")),!n.yearshtml)if(n.yearshtml="",f||!b)c+="<span class='ui-datepicker-year'>"+i+"<\/span>";else{for(v=this._get(n,"yearRange").split(":"),y=(new Date).getFullYear(),p=function(n){var t=n.match(/c[+\-].*/)?i+parseInt(n.substring(1),10):n.match(/[+\-].*/)?y+parseInt(n,10):parseInt(n,10);return isNaN(t)?y:t},s=p(v[0]),a=Math.max(s,p(v[1]||"")),s=r?Math.max(s,r.getFullYear()):s,a=u?Math.min(a,u.getFullYear()):a,n.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";a>=s;s++)n.yearshtml+="<option value='"+s+"'"+(s===i?" selected='selected'":"")+">"+s+"<\/option>";n.yearshtml+="<\/select>";c+=n.yearshtml;n.yearshtml=null}return c+=this._get(n,"yearSuffix"),g&&(c+=(!f&&w&&b?"":"&#xa0;")+l),c+"<\/div>"},_adjustInstDate:function(n,t,i){var u=n.selectedYear+("Y"===i?t:0),f=n.selectedMonth+("M"===i?t:0),e=Math.min(n.selectedDay,this._getDaysInMonth(u,f))+("D"===i?t:0),r=this._restrictMinMax(n,this._daylightSavingAdjust(new Date(u,f,e)));n.selectedDay=r.getDate();n.drawMonth=n.selectedMonth=r.getMonth();n.drawYear=n.selectedYear=r.getFullYear();("M"===i||"Y"===i)&&this._notifyChange(n)},_restrictMinMax:function(n,t){var i=this._getMinMaxDate(n,"min"),r=this._getMinMaxDate(n,"max"),u=i&&i>t?i:t;return r&&u>r?r:u},_notifyChange:function(n){var t=this._get(n,"onChangeMonthYear");t&&t.apply(n.input?n.input[0]:null,[n.selectedYear,n.selectedMonth+1,n])},_getNumberOfMonths:function(n){var t=this._get(n,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(n,t){return this._determineDate(n,this._get(n,t+"Date"),null)},_getDaysInMonth:function(n,t){return 32-this._daylightSavingAdjust(new Date(n,t,32)).getDate()},_getFirstDayOfMonth:function(n,t){return new Date(n,t,1).getDay()},_canAdjustMonth:function(n,t,i,r){var f=this._getNumberOfMonths(n),u=this._daylightSavingAdjust(new Date(i,r+(0>t?t:f[0]*f[1]),1));return 0>t&&u.setDate(this._getDaysInMonth(u.getFullYear(),u.getMonth())),this._isInRange(n,u)},_isInRange:function(n,t){var i,f,e=this._getMinMaxDate(n,"min"),o=this._getMinMaxDate(n,"max"),r=null,u=null,s=this._get(n,"yearRange");return s&&(i=s.split(":"),f=(new Date).getFullYear(),r=parseInt(i[0],10),u=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=f),i[1].match(/[+\-].*/)&&(u+=f)),(!e||t.getTime()>=e.getTime())&&(!o||t.getTime()<=o.getTime())&&(!r||t.getFullYear()>=r)&&(!u||u>=t.getFullYear())},_getFormatConfig:function(n){var t=this._get(n,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(n,"dayNamesShort"),dayNames:this._get(n,"dayNames"),monthNamesShort:this._get(n,"monthNamesShort"),monthNames:this._get(n,"monthNames")}},_formatDate:function(n,t,i,r){t||(n.currentDay=n.selectedDay,n.currentMonth=n.selectedMonth,n.currentYear=n.selectedYear);var u=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,i,t)):this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay));return this.formatDate(this._get(n,"dateFormat"),u,this._getFormatConfig(n))}});n.fn.datepicker=function(t){if(!this.length)return this;n.datepicker.initialized||(n(document).on("mousedown",n.datepicker._checkExternalClick),n.datepicker.initialized=!0);0===n("#"+n.datepicker._mainDivId).length&&n("body").append(n.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this].concat(i)):n.datepicker._attachDatepicker(this,t)}):n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i))};n.datepicker=new c;n.datepicker.initialized=!1;n.datepicker.uuid=(new Date).getTime();n.datepicker.version="1.12.1";n.datepicker;n.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());r=!1;n(document).on("mouseup",function(){r=!1});n.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(n){return t._mouseDown(n)}).on("click."+this.widgetName,function(i){if(!0===n.data(i.target,t.widgetName+".preventClickEvent"))return(n.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1)});this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName);this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!r){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(t);this._mouseDownEvent=t;var i=this,u=1===t.which,f="string"==typeof this.options.cancel&&t.target.nodeName?n(t.target).closest(this.options.cancel).length:!1;return u&&!f&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===n.data(t.target,this.widgetName+".preventClickEvent")&&n.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return i._mouseMove(n)},this._mouseUpDelegate=function(n){return i._mouseUp(n)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),r=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(n.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&n.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t));this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer);this.ignoreMissingWhich=!1;r=!1;t.preventDefault()},_mouseDistanceMet:function(n){return Math.max(Math.abs(this._mouseDownEvent.pageX-n.pageX),Math.abs(this._mouseDownEvent.pageY-n.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});n.ui.plugin={add:function(t,i,r){var u,f=n.ui[t].prototype;for(u in r)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([i,r[u]])},call:function(n,t,i,r){var u,f=n.plugins[t];if(f&&(r||n.element[0].parentNode&&11!==n.element[0].parentNode.nodeType))for(u=0;f.length>u;u++)n.options[f[u][0]]&&f[u][1].apply(n.element,i)}};n.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&n(t).trigger("blur")};n.widget("ui.draggable",n.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this._addClass("ui-draggable");this._setHandleClassName();this._mouseInit()},_setOption:function(n,t){this._super(n,t);"handle"===n&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?(this.destroyOnClear=!0,void 0):(this._removeHandleClassName(),this._mouseDestroy(),void 0)},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||n(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blurActiveElement(t),this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=n(this);return n("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=n.ui.safeActiveElement(this.document[0]),r=n(t.target);r.closest(i).length||n.ui.safeBlur(i)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),n.ui.ddmanager&&(n.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===n(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),n.ui.ddmanager&&n.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(n){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:n.pageX-this.offset.left,top:n.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp(new n.Event("mouseup",t)),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var r=this,i=!1;return n.ui.ddmanager&&!this.options.dropBehaviour&&(i=n.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||n.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),n.ui.ddmanager&&n.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),n.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new n.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return this.options.handle?!!n(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var r=this.options,u=n.isFunction(r.helper),i=u?n(r.helper.apply(this.element[0],[t])):"clone"===r.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===r.appendTo?this.element[0].parentNode:r.appendTo),u&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(n){return/(html|body)/i.test(n.tagName)||n===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var n=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:n.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f,t,i,r=this.options,u=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?(this.containment=[n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,n(window).scrollLeft()+n(window).width()-this.helperProportions.width-this.margins.left,n(window).scrollTop()+(n(window).height()||u.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===r.containment?(this.containment=[0,0,n(u).width()-this.helperProportions.width-this.margins.left,(n(u).height()||u.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):r.containment.constructor===Array?(this.containment=r.containment,void 0):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),t=n(r.containment),i=t[0],i&&(f=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(f?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t),void 0):(this.containment=null,void 0)},_convertPositionTo:function(n,t){t||(t=this.position);var i="absolute"===n?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*i}},_generatePosition:function(n,t){var i,s,u,f,r=this.options,h=this._isRootNode(this.scrollParent[0]),e=n.pageX,o=n.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,n.pageX-this.offset.click.left<i[0]&&(e=i[0]+this.offset.click.left),n.pageY-this.offset.click.top<i[1]&&(o=i[1]+this.offset.click.top),n.pageX-this.offset.click.left>i[2]&&(e=i[2]+this.offset.click.left),n.pageY-this.offset.click.top>i[3]&&(o=i[3]+this.offset.click.top)),r.grid&&(u=r.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,o=i?u-this.offset.click.top>=i[1]||u-this.offset.click.top>i[3]?u:u-this.offset.click.top>=i[1]?u-r.grid[1]:u+r.grid[1]:u,f=r.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,e=i?f-this.offset.click.left>=i[0]||f-this.offset.click.left>i[2]?f:f-this.offset.click.left>=i[0]?f-r.grid[0]:f+r.grid[0]:f),"y"===r.axis&&(e=this.originalPageX),"x"===r.axis&&(o=this.originalPageY)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_trigger:function(t,i,r){return r=r||this._uiHash(),n.ui.plugin.call(this,t,[i,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),n.Widget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});n.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,r){var u=n.extend({},i,{item:r.element});r.sortables=[];n(r.options.connectToSortable).each(function(){var i=n(this).sortable("instance");i&&!i.options.disabled&&(r.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,u))})},stop:function(t,i,r){var u=n.extend({},i,{item:r.element});r.cancelHelperRemoval=!1;n.each(r.sortables,function(){var n=this;n.isOver?(n.isOver=0,r.cancelHelperRemoval=!0,n.cancelHelperRemoval=!1,n._storedCSS={position:n.placeholder.css("position"),top:n.placeholder.css("top"),left:n.placeholder.css("left")},n._mouseStop(t),n.options.helper=n.options._helper):(n.cancelHelperRemoval=!0,n._trigger("deactivate",t,u))})},drag:function(t,i,r){n.each(r.sortables,function(){var f=!1,u=this;u.positionAbs=r.positionAbs;u.helperProportions=r.helperProportions;u.offset.click=r.offset.click;u._intersectsWith(u.containerCache)&&(f=!0,n.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==u&&this._intersectsWith(this.containerCache)&&n.contains(u.element[0],this.element[0])&&(f=!1),f}));f?(u.isOver||(u.isOver=1,r._parent=i.helper.parent(),u.currentItem=i.helper.appendTo(u.element).data("ui-sortable-item",!0),u.options._helper=u.options.helper,u.options.helper=function(){return i.helper[0]},t.target=u.currentItem[0],u._mouseCapture(t,!0),u._mouseStart(t,!0,!0),u.offset.click.top=r.offset.click.top,u.offset.click.left=r.offset.click.left,u.offset.parent.left-=r.offset.parent.left-u.offset.parent.left,u.offset.parent.top-=r.offset.parent.top-u.offset.parent.top,r._trigger("toSortable",t),r.dropped=u.element,n.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,u.fromOutside=r),u.currentItem&&(u._mouseDrag(t),i.position=u.position)):u.isOver&&(u.isOver=0,u.cancelHelperRemoval=!0,u.options._revert=u.options.revert,u.options.revert=!1,u._trigger("out",t,u._uiHash(u)),u._mouseStop(t,!0),u.options.revert=u.options._revert,u.options.helper=u.options._helper,u.placeholder&&u.placeholder.remove(),i.helper.appendTo(r._parent),r._refreshOffsets(t),i.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,n.each(r.sortables,function(){this.refreshPositions()}))})}});n.ui.plugin.add("draggable","cursor",{start:function(t,i,r){var u=n("body"),f=r.options;u.css("cursor")&&(f._cursor=u.css("cursor"));u.css("cursor",f.cursor)},stop:function(t,i,r){var u=r.options;u._cursor&&n("body").css("cursor",u._cursor)}});n.ui.plugin.add("draggable","opacity",{start:function(t,i,r){var u=n(i.helper),f=r.options;u.css("opacity")&&(f._opacity=u.css("opacity"));u.css("opacity",f.opacity)},stop:function(t,i,r){var u=r.options;u._opacity&&n(i.helper).css("opacity",u._opacity)}});n.ui.plugin.add("draggable","scroll",{start:function(n,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1));i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,r){var u=r.options,o=!1,e=r.scrollParentNotHidden[0],f=r.document[0];e!==f&&"HTML"!==e.tagName?(u.axis&&"x"===u.axis||(r.overflowOffset.top+e.offsetHeight-t.pageY<u.scrollSensitivity?e.scrollTop=o=e.scrollTop+u.scrollSpeed:t.pageY-r.overflowOffset.top<u.scrollSensitivity&&(e.scrollTop=o=e.scrollTop-u.scrollSpeed)),u.axis&&"y"===u.axis||(r.overflowOffset.left+e.offsetWidth-t.pageX<u.scrollSensitivity?e.scrollLeft=o=e.scrollLeft+u.scrollSpeed:t.pageX-r.overflowOffset.left<u.scrollSensitivity&&(e.scrollLeft=o=e.scrollLeft-u.scrollSpeed))):(u.axis&&"x"===u.axis||(t.pageY-n(f).scrollTop()<u.scrollSensitivity?o=n(f).scrollTop(n(f).scrollTop()-u.scrollSpeed):n(window).height()-(t.pageY-n(f).scrollTop())<u.scrollSensitivity&&(o=n(f).scrollTop(n(f).scrollTop()+u.scrollSpeed))),u.axis&&"y"===u.axis||(t.pageX-n(f).scrollLeft()<u.scrollSensitivity?o=n(f).scrollLeft(n(f).scrollLeft()-u.scrollSpeed):n(window).width()-(t.pageX-n(f).scrollLeft())<u.scrollSensitivity&&(o=n(f).scrollLeft(n(f).scrollLeft()+u.scrollSpeed))));o!==!1&&n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(r,t)}});n.ui.plugin.add("draggable","snap",{start:function(t,i,r){var u=r.options;r.snapElements=[];n(u.snap.constructor!==String?u.snap.items||":data(ui-draggable)":u.snap).each(function(){var t=n(this),i=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,r){for(var e,o,s,h,c,a,l,v,w,b=r.options,f=b.snapTolerance,y=i.offset.left,k=y+r.helperProportions.width,p=i.offset.top,d=p+r.helperProportions.height,u=r.snapElements.length-1;u>=0;u--)c=r.snapElements[u].left-r.margins.left,a=c+r.snapElements[u].width,l=r.snapElements[u].top-r.margins.top,v=l+r.snapElements[u].height,c-f>k||y>a+f||l-f>d||p>v+f||!n.contains(r.snapElements[u].item.ownerDocument,r.snapElements[u].item)?(r.snapElements[u].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item})),r.snapElements[u].snapping=!1):("inner"!==b.snapMode&&(e=f>=Math.abs(l-d),o=f>=Math.abs(v-p),s=f>=Math.abs(c-k),h=f>=Math.abs(a-y),e&&(i.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top),o&&(i.position.top=r._convertPositionTo("relative",{top:v,left:0}).top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a}).left)),w=e||o||s||h,"outer"!==b.snapMode&&(e=f>=Math.abs(l-p),o=f>=Math.abs(v-d),s=f>=Math.abs(c-y),h=f>=Math.abs(a-k),e&&(i.position.top=r._convertPositionTo("relative",{top:l,left:0}).top),o&&(i.position.top=r._convertPositionTo("relative",{top:v-r.helperProportions.height,left:0}).top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c}).left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left)),!r.snapElements[u].snapping&&(e||o||s||h||w)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item})),r.snapElements[u].snapping=e||o||s||h||w)}});n.ui.plugin.add("draggable","stack",{start:function(t,i,r){var f,e=r.options,u=n.makeArray(n(e.stack)).sort(function(t,i){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(i).css("zIndex"),10)||0)});u.length&&(f=parseInt(n(u[0]).css("zIndex"),10)||0,n(u).each(function(t){n(this).css("zIndex",f+t)}),this.css("zIndex",f+u.length))}});n.ui.plugin.add("draggable","zIndex",{start:function(t,i,r){var u=n(i.helper),f=r.options;u.css("zIndex")&&(f._zIndex=u.css("zIndex"));u.css("zIndex",f.zIndex)},stop:function(t,i,r){var u=r.options;u._zIndex&&n(i.helper).css("zIndex",u._zIndex)}});n.ui.draggable;n.widget("ui.resizable",n.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(n){return parseFloat(n)||0},_isNumber:function(n){return!isNaN(parseFloat(n))},_hasScroll:function(t,i){if("hidden"===n(t).css("overflow"))return!1;var r=i&&"left"===i?"scrollLeft":"scrollTop",u=!1;return t[r]>0?!0:(t[r]=1,u=t[r]>0,t[r]=0,u)},_create:function(){var r,t=this.options,i=this;this._addClass("ui-resizable");n.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(n("<div class='ui-wrapper' style='overflow: hidden;'><\/div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,r={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(r),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(r),this._proportionallyResize());this._setupHandles();t.autoHide&&n(this.element).on("mouseenter",function(){t.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){t.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())});this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){n(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(n,t){switch(this._super(n,t),n){case"handles":this._removeHandles();this._setupHandles()}},_setupHandles:function(){var i,r,u,o,t,f=this.options,e=this;if(this.handles=f.handles||(n(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=n(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),u=this.handles.split(","),this.handles={},r=0;u.length>r;r++)i=n.trim(u[r]),o="ui-resizable-"+i,t=n("<div>"),this._addClass(t,"ui-resizable-handle "+o),t.css({zIndex:f.zIndex}),this.handles[i]=".ui-resizable-"+i,this.element.append(t);this._renderAxis=function(t){var i,r,u,f;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=n(this.handles[i]),this._on(this.handles[i],{mousedown:e._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=n(this.handles[i],this.element),f=/sw|ne|nw|se|n|s/.test(i)?r.outerHeight():r.outerWidth(),u=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(u,f),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){e.resizing||(this.className&&(t=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),e.axis=t&&t[1]?t[1]:"se")});f.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var r,i,u=!1;for(r in this.handles)i=n(this.handles[r])[0],(i===t.target||n.contains(i,t.target))&&(u=!0);return!this.options.disabled&&u},_mouseStart:function(t){var u,f,e,r=this.options,i=this.element;return this.resizing=!0,this._renderProxy(),u=this._num(this.helper.css("left")),f=this._num(this.helper.css("top")),r.containment&&(u+=n(r.containment).scrollLeft()||0,f+=n(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:u,top:f},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalPosition={left:u,top:f},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,e=n(".ui-resizable-"+this.axis).css("cursor"),n("body").css("cursor","auto"===e?this.axis+"-resize":e),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,r,u=this.originalMousePosition,e=this.axis,o=t.pageX-u.left||0,s=t.pageY-u.top||0,f=this._change[e];return this._updatePrevProperties(),f?(i=f.apply(this,[t,o,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),n.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var r,u,f,e,o,s,h,c=this.options,i=this;return this._helper&&(r=this._proportionallyResizeElements,u=r.length&&/textarea/i.test(r[0].nodeName),f=u&&this._hasScroll(r[0],"left")?0:i.sizeDiff.height,e=u?0:i.sizeDiff.width,o={width:i.helper.width()-e,height:i.helper.height()-f},s=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,h=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null,c.animate||this.element.css(n.extend(o,{top:h,left:s})),i.helper.height(i.size.height),i.helper.width(i.size.width),this._helper&&!c.animate&&this._proportionallyResize()),n("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var n={};return this.position.top!==this.prevPosition.top&&(n.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(n.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(n.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(n.height=this.size.height+"px"),this.helper.css(n),n},_updateVirtualBoundaries:function(n){var r,u,f,e,t,i=this.options;t={minWidth:this._isNumber(i.minWidth)?i.minWidth:0,maxWidth:this._isNumber(i.maxWidth)?i.maxWidth:1/0,minHeight:this._isNumber(i.minHeight)?i.minHeight:0,maxHeight:this._isNumber(i.maxHeight)?i.maxHeight:1/0};(this._aspectRatio||n)&&(r=t.minHeight*this.aspectRatio,f=t.minWidth/this.aspectRatio,u=t.maxHeight*this.aspectRatio,e=t.maxWidth/this.aspectRatio,r>t.minWidth&&(t.minWidth=r),f>t.minHeight&&(t.minHeight=f),t.maxWidth>u&&(t.maxWidth=u),t.maxHeight>e&&(t.maxHeight=e));this._vBoundaries=t},_updateCache:function(n){this.offset=this.helper.offset();this._isNumber(n.left)&&(this.position.left=n.left);this._isNumber(n.top)&&(this.position.top=n.top);this._isNumber(n.height)&&(this.size.height=n.height);this._isNumber(n.width)&&(this.size.width=n.width)},_updateRatio:function(n){var t=this.position,i=this.size,r=this.axis;return this._isNumber(n.height)?n.width=n.height*this.aspectRatio:this._isNumber(n.width)&&(n.height=n.width/this.aspectRatio),"sw"===r&&(n.left=t.left+(i.width-n.width),n.top=null),"nw"===r&&(n.top=t.top+(i.height-n.height),n.left=t.left+(i.width-n.width)),n},_respectSize:function(n){var t=this._vBoundaries,i=this.axis,r=this._isNumber(n.width)&&t.maxWidth&&t.maxWidth<n.width,u=this._isNumber(n.height)&&t.maxHeight&&t.maxHeight<n.height,f=this._isNumber(n.width)&&t.minWidth&&t.minWidth>n.width,e=this._isNumber(n.height)&&t.minHeight&&t.minHeight>n.height,o=this.originalPosition.left+this.originalSize.width,s=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return f&&(n.width=t.minWidth),e&&(n.height=t.minHeight),r&&(n.width=t.maxWidth),u&&(n.height=t.maxHeight),f&&h&&(n.left=o-t.minWidth),r&&h&&(n.left=o-t.maxWidth),e&&c&&(n.top=s-t.minHeight),u&&c&&(n.top=s-t.maxHeight),n.width||n.height||n.left||!n.top?n.width||n.height||n.top||!n.left||(n.left=null):n.top=null,n},_getPaddingPlusBorderDimensions:function(n){for(var t=0,i=[],r=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],u=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];4>t;t++)i[t]=parseFloat(r[t])||0,i[t]+=parseFloat(u[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var n,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)n=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(n)),n.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset();this._helper?(this.helper=this.helper||n("<div style='overflow:hidden;'><\/div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(n,t){return{width:this.originalSize.width+t}},w:function(n,t){var i=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:i.width-t}},n:function(n,t,i){var r=this.originalSize,u=this.originalPosition;return{top:u.top+i,height:r.height-i}},s:function(n,t,i){return{height:this.originalSize.height+i}},se:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},sw:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,r]))},ne:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},nw:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,r]))}},_propagate:function(t,i){n.ui.plugin.call(this,t,[i,this.ui()]);"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});n.ui.plugin.add("resizable","animate",{stop:function(t){var i=n(this).resizable("instance"),u=i.options,r=i._proportionallyResizeElements,f=r.length&&/textarea/i.test(r[0].nodeName),s=f&&i._hasScroll(r[0],"left")?0:i.sizeDiff.height,h=f?0:i.sizeDiff.width,c={width:i.size.width-h,height:i.size.height-s},e=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,o=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(n.extend(c,o&&e?{top:o,left:e}:{}),{duration:u.animateDuration,easing:u.animateEasing,step:function(){var u={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};r&&r.length&&n(r[0]).css({width:u.width,height:u.height});i._updateCache(u);i._propagate("resize",t)}})}});n.ui.plugin.add("resizable","containment",{start:function(){var r,f,e,o,s,h,c,t=n(this).resizable("instance"),l=t.options,a=t.element,u=l.containment,i=u instanceof n?u.get(0):/parent/.test(u)?a.parent().get(0):u;i&&(t.containerElement=n(i),/document/.test(u)||u===document?(t.containerOffset={left:0,top:0},t.containerPosition={left:0,top:0},t.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight}):(r=n(i),f=[],n(["Top","Right","Left","Bottom"]).each(function(n,i){f[n]=t._num(r.css("padding"+i))}),t.containerOffset=r.offset(),t.containerPosition=r.position(),t.containerSize={height:r.innerHeight()-f[3],width:r.innerWidth()-f[1]},e=t.containerOffset,o=t.containerSize.height,s=t.containerSize.width,h=t._hasScroll(i,"left")?i.scrollWidth:s,c=t._hasScroll(i)?i.scrollHeight:o,t.parentData={element:i,left:e.left,top:e.top,width:h,height:c}))},resize:function(t){var o,s,h,c,i=n(this).resizable("instance"),v=i.options,r=i.containerOffset,l=i.position,f=i._aspectRatio||t.shiftKey,e={top:0,left:0},a=i.containerElement,u=!0;a[0]!==document&&/static/.test(a.css("position"))&&(e=r);l.left<(i._helper?r.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-r.left:i.position.left-e.left),f&&(i.size.height=i.size.width/i.aspectRatio,u=!1),i.position.left=v.helper?r.left:0);l.top<(i._helper?r.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-r.top:i.position.top),f&&(i.size.width=i.size.height*i.aspectRatio,u=!1),i.position.top=i._helper?r.top:0);h=i.containerElement.get(0)===i.element.parent().get(0);c=/relative|absolute/.test(i.containerElement.css("position"));h&&c?(i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top):(i.offset.left=i.element.offset().left,i.offset.top=i.element.offset().top);o=Math.abs(i.sizeDiff.width+(i._helper?i.offset.left-e.left:i.offset.left-r.left));s=Math.abs(i.sizeDiff.height+(i._helper?i.offset.top-e.top:i.offset.top-r.top));o+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-o,f&&(i.size.height=i.size.width/i.aspectRatio,u=!1));s+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-s,f&&(i.size.width=i.size.height*i.aspectRatio,u=!1));u||(i.position.left=i.prevPosition.left,i.position.top=i.prevPosition.top,i.size.width=i.prevSize.width,i.size.height=i.prevSize.height)},stop:function(){var t=n(this).resizable("instance"),r=t.options,u=t.containerOffset,f=t.containerPosition,e=t.containerElement,i=n(t.helper),o=i.offset(),s=i.outerWidth()-t.sizeDiff.width,h=i.outerHeight()-t.sizeDiff.height;t._helper&&!r.animate&&/relative/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h});t._helper&&!r.animate&&/static/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h})}});n.ui.plugin.add("resizable","alsoResize",{start:function(){var t=n(this).resizable("instance"),i=t.options;n(i.alsoResize).each(function(){var t=n(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,i){var r=n(this).resizable("instance"),e=r.options,u=r.originalSize,f=r.originalPosition,o={height:r.size.height-u.height||0,width:r.size.width-u.width||0,top:r.position.top-f.top||0,left:r.position.left-f.left||0};n(e.alsoResize).each(function(){var t=n(this),u=n(this).data("ui-resizable-alsoresize"),r={},f=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];n.each(f,function(n,t){var i=(u[t]||0)+(o[t]||0);i&&i>=0&&(r[t]=i||null)});t.css(r)})},stop:function(){n(this).removeData("ui-resizable-alsoresize")}});n.ui.plugin.add("resizable","ghost",{start:function(){var t=n(this).resizable("instance"),i=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0});t._addClass(t.ghost,"ui-resizable-ghost");n.uiBackCompat!==!1&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost);t.ghost.appendTo(t.helper)},resize:function(){var t=n(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=n(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}});n.ui.plugin.add("resizable","grid",{resize:function(){var h,t=n(this).resizable("instance"),i=t.options,y=t.size,o=t.originalSize,s=t.originalPosition,c=t.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,f=l[0]||1,e=l[1]||1,a=Math.round((y.width-o.width)/f)*f,v=Math.round((y.height-o.height)/e)*e,r=o.width+a,u=o.height+v,p=i.maxWidth&&r>i.maxWidth,w=i.maxHeight&&u>i.maxHeight,b=i.minWidth&&i.minWidth>r,k=i.minHeight&&i.minHeight>u;i.grid=l;b&&(r+=f);k&&(u+=e);p&&(r-=f);w&&(u-=e);/^(se|s|e)$/.test(c)?(t.size.width=r,t.size.height=u):/^(ne)$/.test(c)?(t.size.width=r,t.size.height=u,t.position.top=s.top-v):/^(sw)$/.test(c)?(t.size.width=r,t.size.height=u,t.position.left=s.left-a):((0>=u-e||0>=r-f)&&(h=t._getPaddingPlusBorderDimensions(this)),u-e>0?(t.size.height=u,t.position.top=s.top-v):(u=e-h.height,t.size.height=u,t.position.top=s.top+o.height-u),r-f>0?(t.size.width=r,t.position.left=s.left-a):(r=f-h.width,t.size.width=r,t.position.left=s.left+o.width-r))}});n.ui.resizable;n.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=n(this).css(t).offset().top;0>i&&n(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle);this.options.disabled&&(this.options.disabled=!1);this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();this.options.draggable&&n.fn.draggable&&this._makeDraggable();this.options.resizable&&n.fn.resizable&&this._makeResizable();this._isOpen=!1;this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?n(t):this.document.find(t||"body").eq(0)},_destroy:function(){var n,t=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);n=t.parent.children().eq(t.index);n.length&&n[0]!==this.element[0]?n.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:n.noop,enable:n.noop,close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||n.ui.safeBlur(n.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var r=!1,f=this.uiDialog.siblings(".ui-front:visible").map(function(){return+n(this).css("z-index")}).get(),u=Math.max.apply(null,f);return u>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",u+1),r=!0),r&&!i&&this._trigger("focus",t),r},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=n(n.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable();t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"),void 0)},_focusTabbable:function(){var n=this._focusedElement;n||(n=this.element.find("[autofocus]"));n.length||(n=this.element.find(":tabbable"));n.length||(n=this.uiDialogButtonPane.find(":tabbable"));n.length||(n=this.uiDialogTitlebarClose.filter(":tabbable"));n.length||(n=this.uiDialog);n.eq(0).trigger("focus")},_keepFocus:function(t){function i(){var t=n.ui.safeActiveElement(this.document[0]),i=this.uiDialog[0]===t||n.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault();i.call(this);this._delay(i)},_createWrapper:function(){this.uiDialog=n("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===n.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),void 0;if(t.keyCode===n.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),r=i.filter(":first"),u=i.filter(":last");t.target!==u[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==r[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){u.trigger("focus")}),t.preventDefault()):(this._delay(function(){r.trigger("focus")}),t.preventDefault())}},mousedown:function(n){this._moveToTop(n)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=n("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(t){n(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}});this.uiDialogTitlebarClose=n("<button type='button'><\/button>").button({label:n("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(n){n.preventDefault();this.close(n)}});t=n("<span>").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(t,"ui-dialog-title");this._title(t);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(n){this.options.title?n.text(this.options.title):n.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=n("<div>");this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=n("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons()},_createButtons:function(){var i=this,t=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),n.isEmptyObject(t)||n.isArray(t)&&!t.length?(this._removeClass(this.uiDialog,"ui-dialog-buttons"),void 0):(n.each(t,function(t,r){var u,f;r=n.isFunction(r)?{click:r,text:t}:r;r=n.extend({type:"button"},r);u=r.click;f={icon:r.icon,iconPosition:r.iconPosition,showLabel:r.showLabel,icons:r.icons,text:r.text};delete r.click;delete r.icon;delete r.iconPosition;delete r.showLabel;delete r.icons;"boolean"==typeof r.text&&delete r.text;n("<button><\/button>",r).button(f).appendTo(i.uiButtonSet).on("click",function(){u.apply(i.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function i(n){return{position:n.position,offset:n.offset}}var t=this,r=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,u){t._addClass(n(this),"ui-dialog-dragging");t._blockFrames();t._trigger("dragStart",r,i(u))},drag:function(n,r){t._trigger("drag",n,i(r))},stop:function(u,f){var e=f.offset.left-t.document.scrollLeft(),o=f.offset.top-t.document.scrollTop();r.position={my:"left top",at:"left"+(e>=0?"+":"")+e+" top"+(o>=0?"+":"")+o,of:t.window};t._removeClass(n(this),"ui-dialog-dragging");t._unblockFrames();t._trigger("dragStop",u,i(f))}})},_makeResizable:function(){function r(n){return{originalPosition:n.originalPosition,originalSize:n.originalSize,position:n.position,size:n.size}}var t=this,i=this.options,u=i.resizable,f=this.uiDialog.css("position"),e="string"==typeof u?u:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:e,start:function(i,u){t._addClass(n(this),"ui-dialog-resizing");t._blockFrames();t._trigger("resizeStart",i,r(u))},resize:function(n,i){t._trigger("resize",n,r(i))},stop:function(u,f){var e=t.uiDialog.offset(),o=e.left-t.document.scrollLeft(),s=e.top-t.document.scrollTop();i.height=t.uiDialog.height();i.width=t.uiDialog.width();i.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(s>=0?"+":"")+s,of:t.window};t._removeClass(n(this),"ui-dialog-resizing");t._unblockFrames();t._trigger("resizeStop",u,r(f))}}).css("position",f)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget();this._focusedElement=n(t.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=n.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var n=this.document.data("ui-dialog-instances");return n||(n=[],this.document.data("ui-dialog-instances",n)),n},_minHeight:function(){var n=this.options;return"auto"===n.height?n.minHeight:Math.min(n.minHeight,n.height)},_position:function(){var n=this.uiDialog.is(":visible");n||this.uiDialog.show();this.uiDialog.position(this.options.position);n||this.uiDialog.hide()},_setOptions:function(t){var i=this,r=!1,u={};n.each(t,function(n,t){i._setOption(n,t);n in i.sizeRelatedOptions&&(r=!0);n in i.resizableRelatedOptions&&(u[n]=t)});r&&(this._size(),this._position());this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",u)},_setOption:function(t,i){var f,u,r=this.uiDialog;"disabled"!==t&&(this._super(t,i),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:n("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&(f=r.is(":data(ui-draggable)"),f&&!i&&r.draggable("destroy"),!f&&i&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(u=r.is(":data(ui-resizable)"),u&&!i&&r.resizable("destroy"),u&&"string"==typeof i&&r.resizable("option","handles",i),u||i===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,i,r,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});n.minWidth>n.width&&(n.width=n.minWidth);t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight();i=Math.max(0,n.minHeight-t);r="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-t):"none";"auto"===n.height?this.element.css({minHeight:i,maxHeight:r,height:"auto"}):this.element.height(Math.max(0,n.height-t));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=n(this);return n("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return n(t.target).closest(".ui-dialog").length?!0:!!n(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1});this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(n){t||this._allowInteraction(n)||(n.preventDefault(),this._trackingInstances()[0]._focusTabbable())}});this.overlay=n("<div>").appendTo(this._appendTo());this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var n=this.document.data("ui-dialog-overlays")-1;n?this.document.data("ui-dialog-overlays",n):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays"));this.overlay.remove();this.overlay=null}}});n.uiBackCompat!==!1&&n.widget("ui.dialog",n.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super();this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(n,t){"dialogClass"===n&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t);this._superApply(arguments)}});n.ui.dialog;n.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,r=i.accept;this.isover=!1;this.isout=!0;this.accept=n.isFunction(r)?r:function(n){return n.is(r)};this.proportions=function(){return arguments.length?(t=arguments[0],void 0):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};this._addToManager(i.scope);i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){n.ui.ddmanager.droppables[t]=n.ui.ddmanager.droppables[t]||[];n.ui.ddmanager.droppables[t].push(this)},_splice:function(n){for(var t=0;n.length>t;t++)n[t]===this&&n.splice(t,1)},_destroy:function(){var t=n.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,i){if("accept"===t)this.accept=n.isFunction(i)?i:function(n){return n.is(i)};else if("scope"===t){var r=n.ui.ddmanager.droppables[this.options.scope];this._splice(r);this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=n.ui.ddmanager.current;this._addActiveClass();i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=n.ui.ddmanager.current;this._removeActiveClass();i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var r=i||n.ui.ddmanager.current,u=!1;return r&&(r.currentItem||r.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=n(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===r.options.scope&&i.accept.call(i.element[0],r.currentItem||r.element)&&e(r,n.extend(i,{offset:i.element.offset()}),i.options.tolerance,t))return(u=!0,!1)}),u?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(r)),this.element):!1):!1},ui:function(n){return{draggable:n.currentItem||n.element,helper:n.helper,position:n.position,offset:n.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});e=n.ui.intersect=function(){function n(n,t,i){return n>=t&&t+i>n}return function(t,i,r,u){if(!i.offset)return!1;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,s=(t.positionAbs||t.position.absolute).top+t.margins.top,h=o+t.helperProportions.width,c=s+t.helperProportions.height,f=i.offset.left,e=i.offset.top,l=f+i.proportions().width,a=e+i.proportions().height;switch(r){case"fit":return o>=f&&l>=h&&s>=e&&a>=c;case"intersect":return o+t.helperProportions.width/2>f&&l>h-t.helperProportions.width/2&&s+t.helperProportions.height/2>e&&a>c-t.helperProportions.height/2;case"pointer":return n(u.pageY,e,i.proportions().height)&&n(u.pageX,f,i.proportions().width);case"touch":return(s>=e&&a>=s||c>=e&&a>=c||e>s&&c>a)&&(o>=f&&l>=o||h>=f&&l>=h||f>o&&h>l);default:return!1}}}();n.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var r,f,u=n.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,e=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();n:for(r=0;u.length>r;r++)if(!(u[r].options.disabled||t&&!u[r].accept.call(u[r].element[0],t.currentItem||t.element))){for(f=0;e.length>f;f++)if(e[f]===u[r].element[0]){u[r].proportions().height=0;continue n}u[r].visible="none"!==u[r].element.css("display");u[r].visible&&("mousedown"===o&&u[r]._activate.call(u[r],i),u[r].offset=u[r].element.offset(),u[r].proportions({width:u[r].element[0].offsetWidth,height:u[r].element[0].offsetHeight}))}},drop:function(t,i){var r=!1;return n.each((n.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e(t,this,this.options.tolerance,i)&&(r=this._drop.call(this,i)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),r},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&n.ui.ddmanager.prepareOffsets(t,i);n.each(n.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,o,f,s=e(t,this,this.options.tolerance,i),u=!s&&this.isover?"isout":s&&!this.isover?"isover":null;u&&(this.options.greedy&&(o=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return n(this).droppable("instance").options.scope===o}),f.length&&(r=n(f[0]).droppable("instance"),r.greedyChild="isover"===u)),r&&"isover"===u&&(r.isover=!1,r.isout=!0,r._out.call(r,i)),this[u]=!0,this["isout"===u?"isover":"isout"]=!1,this["isover"===u?"_over":"_out"].call(this,i),r&&"isout"===u&&(r.isout=!1,r.isover=!0,r._over.call(r,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable");t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)}};n.uiBackCompat!==!1&&n.widget("ui.droppable",n.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super();this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super();this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super();this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super();this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});n.ui.droppable;n.widget("ui.progressbar",{version:"1.12.1",options:{classes:{"ui-progressbar":"ui-corner-all","ui-progressbar-value":"ui-corner-left","ui-progressbar-complete":"ui-corner-right"},max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.attr({role:"progressbar","aria-valuemin":this.min});this._addClass("ui-progressbar","ui-widget ui-widget-content");this.valueDiv=n("<div>").appendTo(this.element);this._addClass(this.valueDiv,"ui-progressbar-value","ui-widget-header");this._refreshValue()},_destroy:function(){this.element.removeAttr("role aria-valuemin aria-valuemax aria-valuenow");this.valueDiv.remove()},value:function(n){return void 0===n?this.options.value:(this.options.value=this._constrainedValue(n),this._refreshValue(),void 0)},_constrainedValue:function(n){return void 0===n&&(n=this.options.value),this.indeterminate=n===!1,"number"!=typeof n&&(n=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,n))},_setOptions:function(n){var t=n.value;delete n.value;this._super(n);this.options.value=this._constrainedValue(t);this._refreshValue()},_setOption:function(n,t){"max"===n&&(t=Math.max(this.min,t));this._super(n,t)},_setOptionDisabled:function(n){this._super(n);this.element.attr("aria-disabled",n);this._toggleClass(null,"ui-state-disabled",!!n)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).width(i.toFixed(0)+"%");this._toggleClass(this.valueDiv,"ui-progressbar-complete",null,t===this.options.max)._toggleClass("ui-progressbar-indeterminate",null,this.indeterminate);this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=n("<div>").appendTo(this.valueDiv),this._addClass(this.overlayDiv,"ui-progressbar-overlay"))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null));this.oldValue!==t&&(this.oldValue=t,this._trigger("change"));t===this.options.max&&this._trigger("complete")}});n.widget("ui.selectable",n.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable");this.dragged=!1;this.refresh=function(){t.elementPos=n(t.element[0]).offset();t.selectees=n(t.options.filter,t.element[0]);t._addClass(t.selectees,"ui-selectee");t.selectees.each(function(){var i=n(this),u=i.offset(),r={left:u.left-t.elementPos.left,top:u.top-t.elementPos.top};n.data(this,"selectable-item",{element:this,$element:i,left:r.left,top:r.top,right:r.left+i.outerWidth(),bottom:r.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})};this.refresh();this._mouseInit();this.helper=n("<div>");this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item");this._mouseDestroy()},_mouseStart:function(t){var i=this,r=this.options;this.opos=[t.pageX,t.pageY];this.elementPos=n(this.element[0]).offset();this.options.disabled||(this.selectees=n(r.filter,this.element[0]),this._trigger("start",t),n(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=n.data(this,"selectable-item");r.startselected=!0;t.metaKey||t.ctrlKey||(i._removeClass(r.$element,"ui-selected"),r.selected=!1,i._addClass(r.$element,"ui-unselecting"),r.unselecting=!0,i._trigger("unselecting",t,{unselecting:r.element}))}),n(t.target).parents().addBack().each(function(){var u,r=n.data(this,"selectable-item");if(r)return(u=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),i._removeClass(r.$element,u?"ui-unselecting":"ui-selected")._addClass(r.$element,u?"ui-selecting":"ui-unselecting"),r.unselecting=!u,r.selecting=u,r.selected=u,u?i._trigger("selecting",t,{selecting:r.element}):i._trigger("unselecting",t,{unselecting:r.element}),!1)}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var o,i=this,s=this.options,r=this.opos[0],u=this.opos[1],f=t.pageX,e=t.pageY;return r>f&&(o=f,f=r,r=o),u>e&&(o=e,e=u,u=o),this.helper.css({left:r,top:u,width:f-r,height:e-u}),this.selectees.each(function(){var o=n.data(this,"selectable-item"),c=!1,h={};o&&o.element!==i.element[0]&&(h.left=o.left+i.elementPos.left,h.right=o.right+i.elementPos.left,h.top=o.top+i.elementPos.top,h.bottom=o.bottom+i.elementPos.top,"touch"===s.tolerance?c=!(h.left>f||r>h.right||h.top>e||u>h.bottom):"fit"===s.tolerance&&(c=h.left>r&&f>h.right&&h.top>u&&e>h.bottom),c?(o.selected&&(i._removeClass(o.$element,"ui-selected"),o.selected=!1),o.unselecting&&(i._removeClass(o.$element,"ui-unselecting"),o.unselecting=!1),o.selecting||(i._addClass(o.$element,"ui-selecting"),o.selecting=!0,i._trigger("selecting",t,{selecting:o.element}))):(o.selecting&&((t.metaKey||t.ctrlKey)&&o.startselected?(i._removeClass(o.$element,"ui-selecting"),o.selecting=!1,i._addClass(o.$element,"ui-selected"),o.selected=!0):(i._removeClass(o.$element,"ui-selecting"),o.selecting=!1,o.startselected&&(i._addClass(o.$element,"ui-unselecting"),o.unselecting=!0),i._trigger("unselecting",t,{unselecting:o.element}))),o.selected&&(t.metaKey||t.ctrlKey||o.startselected||(i._removeClass(o.$element,"ui-selected"),o.selected=!1,i._addClass(o.$element,"ui-unselecting"),o.unselecting=!0,i._trigger("unselecting",t,{unselecting:o.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,n(".ui-unselecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");i._removeClass(r.$element,"ui-unselecting");r.unselecting=!1;r.startselected=!1;i._trigger("unselected",t,{unselected:r.element})}),n(".ui-selecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");i._removeClass(r.$element,"ui-selecting")._addClass(r.$element,"ui-selected");r.selecting=!1;r.selected=!0;r.startselected=!0;i._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}});n.widget("ui.selectmenu",[n.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"};this._drawButton();this._drawMenu();this._bindFormResetHandler();this._rendered=!1;this.menuItems=n()},_drawButton:function(){var t,i=this,r=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button);this._on(this.labels,{click:function(n){this.button.focus();n.preventDefault()}});this.element.hide();this.button=n("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element);this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget");t=n("<span>").appendTo(this.button);this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button);this.buttonItem=this._renderButtonItem(r).appendTo(this.button);this.options.width!==!1&&this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){i._rendered||i._refreshMenu()})},_drawMenu:function(){var t=this;this.menu=n("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=n("<div>").append(this.menu);this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front");this.menuWrap.appendTo(this._appendTo());this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(n,i){n.preventDefault();t._setSelection();t._select(i.item.data("ui-selectmenu-item"),n)},focus:function(n,i){var r=i.item.data("ui-selectmenu-item");null!=t.focusIndex&&r.index!==t.focusIndex&&(t._trigger("focus",n,{item:r}),t.isOpen||t._select(r,n));t.focusIndex=r.index;t.button.attr("aria-activedescendant",t.menuItems.eq(r.index).attr("id"))}}).menu("instance");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu();this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{}));null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var n,t=this.element.find("option");this.menu.empty();this._parseOptions(t);this._renderMenu(this.menu,this.items);this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper");this._rendered=!0;t.length&&(n=this._getSelectedItem(),this.menuInstance.focus(null,n),this._setAria(n.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(n){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",n)))},_position:function(){this.menuWrap.position(n.extend({of:this.button},this.options.position))},close:function(n){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",n))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var i=n("<span>");return this._setText(i,t.label),this._addClass(i,"ui-selectmenu-text"),i},_renderMenu:function(t,i){var r=this,u="";n.each(i,function(i,f){var e;f.optgroup!==u&&(e=n("<li>",{text:f.optgroup}),r._addClass(e,"ui-selectmenu-optgroup","ui-menu-divider"+(f.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),e.appendTo(t),u=f.optgroup);r._renderItemData(t,f)})},_renderItemData:function(n,t){return this._renderItem(n,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var r=n("<li>"),u=n("<div>",{title:i.element.attr("title")});return i.disabled&&this._addClass(r,null,"ui-state-disabled"),this._setText(u,i.label),r.append(u).appendTo(t)},_setText:function(n,t){t?n.text(t):n.html("&#160;")},_move:function(n,t){var i,r,u=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex).parent("li"):(i=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),u+=":not(.ui-state-disabled)");r="first"===n||"last"===n?i["first"===n?"prevAll":"nextAll"](u).eq(-1):i[n+"All"](u).eq(0);r.length&&this.menuInstance.focus(t,r)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(n){this[this.isOpen?"close":"open"](n)},_setSelection:function(){var n;this.range&&(window.getSelection?(n=window.getSelection(),n.removeAllRanges(),n.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(n(t.target).closest(".ui-selectmenu-menu, #"+n.ui.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var n;window.getSelection?(n=window.getSelection(),n.rangeCount&&(this.range=n.getRangeAt(0))):this.range=document.selection.createRange()},click:function(n){this._setSelection();this._toggle(n)},keydown:function(t){var i=!0;switch(t.keyCode){case n.ui.keyCode.TAB:case n.ui.keyCode.ESCAPE:this.close(t);i=!1;break;case n.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case n.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case n.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case n.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case n.ui.keyCode.LEFT:this._move("prev",t);break;case n.ui.keyCode.RIGHT:this._move("next",t);break;case n.ui.keyCode.HOME:case n.ui.keyCode.PAGE_UP:this._move("first",t);break;case n.ui.keyCode.END:case n.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t);i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(n){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),n)},_select:function(n,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=n.index;this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(n));this._setAria(n);this._trigger("select",t,{item:n});n.index!==i&&this._trigger("change",t,{item:n});this.close(t)},_setAria:function(n){var t=this.menuItems.eq(n.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t});this.menu.attr("aria-activedescendant",t)},_setOption:function(n,t){if("icons"===n){var i=this.button.find("span.ui-icon");this._removeClass(i,null,this.options.icons.button)._addClass(i,null,t.button)}this._super(n,t);"appendTo"===n&&this.menuWrap.appendTo(this._appendTo());"width"===n&&this._resizeButton()},_setOptionDisabled:function(n){this._super(n);this.menuInstance.option("disabled",n);this.button.attr("aria-disabled",n);this._toggleClass(this.button,null,"ui-state-disabled",n);this.element.prop("disabled",n);n?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?n(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen);this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var n=this.options.width;return n===!1?(this.button.css("width",""),void 0):(null===n&&(n=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(n),void 0)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var n=this._super();return n.disabled=this.element.prop("disabled"),n},_parseOptions:function(t){var r=this,i=[];t.each(function(t,u){i.push(r._parseOption(n(u),t))});this.items=i},_parseOption:function(n,t){var i=n.parent("optgroup");return{element:n,index:t,value:n.val(),label:n.text(),optgroup:i.attr("label")||"",disabled:i.prop("disabled")||n.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler();this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.labels.attr("for",this.ids.element)}}]);n.widget("ui.slider",n.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1;this._mouseSliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var r,i,u=this.options,t=this.element.find(".ui-slider-handle"),f=[];for(i=u.values&&u.values.length||1,t.length>i&&(t.slice(i).remove(),t=t.slice(0,i)),r=t.length;i>r;r++)f.push("<span tabindex='0'><\/span>");this.handles=t.add(n(f.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(t){n(this).data("ui-slider-handle-index",t).attr("tabIndex",0)})},_createRange:function(){var t=this.options;t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:n.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=n("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),("min"===t.range||"max"===t.range)&&this._addClass(this.range,"ui-slider-range-"+t.range)):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this._mouseDestroy()},_mouseCapture:function(t){var s,f,r,i,u,h,e,c,o=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),s={x:t.pageX,y:t.pageY},f=this._normValueFromMouse(s),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(f-o.values(t));(r>e||r===e&&(t===o._lastChangedValue||o.values(t)===l.min))&&(r=e,i=n(this),u=t)}),h=this._start(t,u),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=u,this._addClass(i,null,"ui-state-active"),i.trigger("focus"),e=i.offset(),c=!n(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-e.left-i.width()/2,top:t.pageY-e.top-i.height()/2-(parseInt(i.css("borderTopWidth"),10)||0)-(parseInt(i.css("borderBottomWidth"),10)||0)+(parseInt(i.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,u,f),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(n){var t={x:n.pageX,y:n.pageY},i=this._normValueFromMouse(t);return this._slide(n,this._handleIndex,i),!1},_mouseStop:function(n){return this._removeClass(this.handles,null,"ui-state-active"),this._mouseSliding=!1,this._stop(n,this._handleIndex),this._change(n,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(n){var i,r,t,u,f;return"horizontal"===this.orientation?(i=this.elementSize.width,r=n.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(i=this.elementSize.height,r=n.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=r/i,t>1&&(t=1),0>t&&(t=0),"vertical"===this.orientation&&(t=1-t),u=this._valueMax()-this._valueMin(),f=this._valueMin()+t*u,this._trimAlignValue(f)},_uiHash:function(n,t,i){var r={handle:this.handles[n],handleIndex:n,value:void 0!==t?t:this.value()};return this._hasMultipleValues()&&(r.value=void 0!==t?t:this.values(n),r.values=i||this.values()),r},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(n,t){return this._trigger("start",n,this._uiHash(t))},_slide:function(n,t,i){var u,r,f=this.value(),e=this.values();this._hasMultipleValues()&&(r=this.values(t?0:1),f=this.values(t),2===this.options.values.length&&this.options.range===!0&&(i=0===t?Math.min(r,i):Math.max(r,i)),e[t]=i);i!==f&&(u=this._trigger("slide",n,this._uiHash(t,i,e)),u!==!1&&(this._hasMultipleValues()?this.values(t,i):this.value(i)))},_stop:function(n,t){this._trigger("stop",n,this._uiHash(t))},_change:function(n,t){this._keySliding||this._mouseSliding||(this._lastChangedValue=t,this._trigger("change",n,this._uiHash(t)))},value:function(n){return arguments.length?(this.options.value=this._trimAlignValue(n),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,i){var u,f,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!n.isArray(arguments[0]))return this._hasMultipleValues()?this._values(t):this.value();for(u=this.options.values,f=arguments[0],r=0;u.length>r;r+=1)u[r]=this._trimAlignValue(f[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,i){var r,u=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),n.isArray(this.options.values)&&(u=this.options.values.length),this._super(t,i),t){case"orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();this.options.range&&this._refreshRange(i);this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=u-1;r>=0;r--)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0;this._calculateNewMax();this._refreshValue();this._animateOff=!1;break;case"range":this._animateOff=!0;this._refresh();this._animateOff=!1}},_setOptionDisabled:function(n){this._super(n);this._toggleClass(null,"ui-state-disabled",!!n)},_value:function(){var n=this.options.value;return this._trimAlignValue(n)},_values:function(n){var r,t,i;if(arguments.length)return r=this.options.values[n],r=this._trimAlignValue(r);if(this._hasMultipleValues()){for(t=this.options.values.slice(),i=0;t.length>i;i+=1)t[i]=this._trimAlignValue(t[i]);return t}return[]},_trimAlignValue:function(n){if(this._valueMin()>=n)return this._valueMin();if(n>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(n-this._valueMin())%t,r=n-i;return 2*Math.abs(i)>=t&&(r+=i>0?t:-t),parseFloat(r.toFixed(5))},_calculateNewMax:function(){var n=this.options.max,i=this._valueMin(),t=this.options.step,r=Math.round((n-i)/t)*t;n=r+i;n>this.options.max&&(n-=t);this.max=parseFloat(n.toFixed(this._precision()))},_precision:function(){var n=this._precisionOf(this.options.step);return null!==this.options.min&&(n=Math.max(n,this._precisionOf(this.options.min))),n},_precisionOf:function(n){var t=""+n,i=t.indexOf(".");return-1===i?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(n){"vertical"===n&&this.range.css({width:"",left:""});"horizontal"===n&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var s,t,c,f,h,e=this.options.range,i=this.options,r=this,u=this._animateOff?!1:i.animate,o={};this._hasMultipleValues()?this.handles.each(function(f){t=100*((r.values(f)-r._valueMin())/(r._valueMax()-r._valueMin()));o["horizontal"===r.orientation?"left":"bottom"]=t+"%";n(this).stop(1,1)[u?"animate":"css"](o,i.animate);r.options.range===!0&&("horizontal"===r.orientation?(0===f&&r.range.stop(1,1)[u?"animate":"css"]({left:t+"%"},i.animate),1===f&&r.range[u?"animate":"css"]({width:t-s+"%"},{queue:!1,duration:i.animate})):(0===f&&r.range.stop(1,1)[u?"animate":"css"]({bottom:t+"%"},i.animate),1===f&&r.range[u?"animate":"css"]({height:t-s+"%"},{queue:!1,duration:i.animate})));s=t}):(c=this.value(),f=this._valueMin(),h=this._valueMax(),t=h!==f?100*((c-f)/(h-f)):0,o["horizontal"===this.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[u?"animate":"css"](o,i.animate),"min"===e&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:t+"%"},i.animate),"max"===e&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:100-t+"%"},i.animate),"min"===e&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:t+"%"},i.animate),"max"===e&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:100-t+"%"},i.animate))},_handleEvents:{keydown:function(t){var e,r,i,u,f=n(t.target).data("ui-slider-handle-index");switch(t.keyCode){case n.ui.keyCode.HOME:case n.ui.keyCode.END:case n.ui.keyCode.PAGE_UP:case n.ui.keyCode.PAGE_DOWN:case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,this._addClass(n(t.target),null,"ui-state-active"),e=this._start(t,f),e===!1))return}switch(u=this.options.step,r=i=this._hasMultipleValues()?this.values(f):this.value(),t.keyCode){case n.ui.keyCode.HOME:i=this._valueMin();break;case n.ui.keyCode.END:i=this._valueMax();break;case n.ui.keyCode.PAGE_UP:i=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/this.numPages);break;case n.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/this.numPages);break;case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:if(r===this._valueMax())return;i=this._trimAlignValue(r+u);break;case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:if(r===this._valueMin())return;i=this._trimAlignValue(r-u)}this._slide(t,f,i)},keyup:function(t){var i=n(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),this._removeClass(n(t.target),null,"ui-state-active"))}}});n.widget("ui.sortable",n.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(n,t,i){return n>=t&&t+i>n},_isFloating:function(n){return/left|right/.test(n.css("float"))||/inline|table-cell/.test(n.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(n,t){this._super(n,t);"handle"===n&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");n.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var n=this.items.length-1;n>=0;n--)this.items[n].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var r=null,f=!1,u=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),n(t.target).parents().each(function(){if(n.data(this,u.widgetName+"-item")===u)return(r=n(this),!1)}),n.data(t.target,u.widgetName+"-item")===u&&(r=n(t.target)),r?!this.options.handle||i||(n(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(f=!0)}),f)?(this.currentItem=r,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,r){var f,e,u=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,u.cursorAt&&this._adjustOffsetFromHelper(u.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),u.containment&&this._setContainment(),u.cursor&&"auto"!==u.cursor&&(e=this.document.find("body"),this.storedCursor=e.css("cursor"),e.css("cursor",u.cursor),this.storedStylesheet=n("<style>*{ cursor: "+u.cursor+" !important; }<\/style>").appendTo(e)),u.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",u.opacity)),u.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",u.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",t,this._uiHash(this));return n.ui.ddmanager&&(n.ui.ddmanager.current=this),n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,u,f,o,i=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-this.document.scrollTop()<i.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-i.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<i.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+i.scrollSpeed)),t.pageX-this.document.scrollLeft()<i.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-i.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<i.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+i.scrollSpeed))),r!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;e>=0;e--)if(u=this.items[e],f=u.item[0],o=this._intersectsWithPointer(u),o&&u.instance===this.currentContainer&&f!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==f&&!n.contains(this.placeholder[0],f)&&("semi-dynamic"===this.options.type?!n.contains(this.element[0],f):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(u))break;this._rearrange(t,u);this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(n.ui.ddmanager&&!this.options.dropBehaviour&&n.ui.ddmanager.drop(this,t),this.options.revert){var e=this,f=this.placeholder.offset(),r=this.options.axis,u={};r&&"x"!==r||(u.left=f.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft));r&&"y"!==r||(u.top=f.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop));this.reverting=!0;n(this.helper).animate(u,parseInt(this.options.revert,10)||500,function(){e._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new n.Event("mouseup",{target:null}));"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),n.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?n(this.domPosition.prev).after(this.currentItem):n(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n(r).each(function(){var r=(n(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);r&&i.push((t.key||r[1]+"[]")+"="+(t.key&&t.expression?r[1]:r[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},r.each(function(){i.push(n(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(n){var t=this.positionAbs.left,h=t+this.helperProportions.width,i=this.positionAbs.top,c=i+this.helperProportions.height,r=n.left,f=r+n.width,u=n.top,e=u+n.height,o=this.offset.click.top,s=this.offset.click.left,l="x"===this.options.axis||i+o>u&&e>i+o,a="y"===this.options.axis||t+s>r&&f>t+s,v=l&&a;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>n[this.floating?"width":"height"]?v:t+this.helperProportions.width/2>r&&f>h-this.helperProportions.width/2&&i+this.helperProportions.height/2>u&&e>c-this.helperProportions.height/2},_intersectsWithPointer:function(n){var t,i,r="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,n.top,n.height),u="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,n.left,n.width),f=r&&u;return f?(t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===t?2:1:t&&("down"===t?2:1)):!1},_intersectsWithSides:function(n){var r=this._isOverAxis(this.positionAbs.top+this.offset.click.top,n.top+n.height/2,n.height),u=this._isOverAxis(this.positionAbs.left+this.offset.click.left,n.left+n.width/2,n.width),t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&u||"left"===i&&!u:t&&("down"===t&&r||"up"===t&&!r)},_getDragVerticalDirection:function(){var n=this.positionAbs.top-this.lastPositionAbs.top;return 0!==n&&(n>0?"down":"up")},_getDragHorizontalDirection:function(){var n=this.positionAbs.left-this.lastPositionAbs.left;return 0!==n&&(n>0?"right":"left")},refresh:function(n){return this._refreshItems(n),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var n=this.options;return n.connectWith.constructor===String?[n.connectWith]:n.connectWith},_getItemsAsjQuery:function(t){function h(){s.push(this)}var r,u,e,i,s=[],f=[],o=this._connectWith();if(o&&t)for(r=o.length-1;r>=0;r--)for(e=n(o[r],this.document[0]),u=e.length-1;u>=0;u--)i=n.data(e[u],this.widgetFullName),i&&i!==this&&!i.options.disabled&&f.push([n.isFunction(i.options.items)?i.options.items.call(i.element):n(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i]);for(f.push([n.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):n(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=f.length-1;r>=0;r--)f[r][0].each(h);return n(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=n.grep(this.items,function(n){for(var i=0;t.length>i;i++)if(t[i]===n.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[];this.containers=[this];var r,u,e,i,o,s,h,l,a=this.items,f=[[n.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):n(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(r=c.length-1;r>=0;r--)for(e=n(c[r],this.document[0]),u=e.length-1;u>=0;u--)i=n.data(e[u],this.widgetFullName),i&&i!==this&&!i.options.disabled&&(f.push([n.isFunction(i.options.items)?i.options.items.call(i.element[0],t,{item:this.currentItem}):n(i.options.items,i.element),i]),this.containers.push(i));for(r=f.length-1;r>=0;r--)for(o=f[r][1],s=f[r][0],u=0,l=s.length;l>u;u++)h=n(s[u]),h.data(this.widgetName+"-item",o),a.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1;this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var r,f,u,i=this.items.length-1;i>=0;i--)r=this.items[i],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(f=this.options.toleranceElement?n(this.options.toleranceElement,r.item):r.item,t||(r.width=f.outerWidth(),r.height=f.outerHeight()),u=f.offset(),r.left=u.left,r.top=u.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)u=this.containers[i].element.offset(),this.containers[i].containerCache.left=u.left,this.containers[i].containerCache.top=u.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var r,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(r=i.placeholder,i.placeholder={element:function(){var u=t.currentItem[0].nodeName.toLowerCase(),i=n("<"+u+">",t.document[0]);return t._addClass(i,"ui-sortable-placeholder",r||t.currentItem[0].className)._removeClass(i,"ui-sortable-helper"),"tbody"===u?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),n("<tr>",t.document[0]).appendTo(i)):"tr"===u?t._createTrPlaceholder(t.currentItem,i):"img"===u&&i.attr("src",t.currentItem.attr("src")),r||i.css("visibility","hidden"),i},update:function(n,u){(!r||i.forcePlaceholderSize)&&(u.height()||u.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),u.width()||u.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}});t.placeholder=n(i.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);i.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var r=this;t.children().each(function(){n("<td>&#160;<\/td>",r.document[0]).attr("colspan",n(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){for(var u,c,f,a,v,o,l,s,h,e=null,i=null,r=this.containers.length-1;r>=0;r--)if(!n.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(e&&n.contains(this.containers[r].element[0],e.element[0]))continue;e=this.containers[r];i=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(e)if(1===this.containers.length)this.containers[i].containerCache.over||(this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1);else{for(c=1e4,f=null,s=e.floating||this._isFloating(this.currentItem),a=s?"left":"top",v=s?"width":"height",h=s?"pageX":"pageY",u=this.items.length-1;u>=0;u--)n.contains(this.containers[i].element[0],this.items[u].item[0])&&this.items[u].item[0]!==this.currentItem[0]&&(o=this.items[u].item.offset()[a],l=!1,t[h]-o>this.items[u][v]/2&&(l=!0),c>Math.abs(t[h]-o)&&(c=Math.abs(t[h]-o),f=this.items[u],this.direction=l?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[i])return this.currentContainer.containerCache.over||(this.containers[i]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1),void 0;f?this._rearrange(t,f,null,!0):this._rearrange(t,null,this.containers[i].element,!0);this._trigger("change",t,this._uiHash());this.containers[i]._trigger("change",t,this._uiHash(this));this.currentContainer=this.containers[i];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[i]._trigger("over",t,this._uiHash(this));this.containers[i].containerCache.over=1}},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t,this.currentItem])):"clone"===r.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||n("parent"!==r.appendTo?r.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||r.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||r.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&n.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var n=this.currentItem.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,r,u,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode);("document"===i.containment||"window"===i.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(i.containment)||(t=n(i.containment)[0],r=n(i.containment).offset(),u="hidden"!==n(t).css("overflow"),this.containment=[r.left+(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0)-this.margins.top,r.left+(u?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(u?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var r="absolute"===t?1:-1,u="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(u[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:u.scrollTop())*r,left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*r}},_generatePosition:function(t){var r,u,i=this.options,f=t.pageX,e=t.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(e=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(e=this.containment[3]+this.offset.click.top)),i.grid&&(r=this.originalPageY+Math.round((e-this.originalPageY)/i.grid[1])*i.grid[1],e=this.containment?r-this.offset.click.top>=this.containment[1]&&r-this.offset.click.top<=this.containment[3]?r:r-this.offset.click.top>=this.containment[1]?r-i.grid[1]:r+i.grid[1]:r,u=this.originalPageX+Math.round((f-this.originalPageX)/i.grid[0])*i.grid[0],f=this.containment?u-this.offset.click.left>=this.containment[0]&&u-this.offset.click.left<=this.containment[2]?u:u-this.offset.click.left>=this.containment[0]?u-i.grid[0]:u+i.grid[0]:u)),{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())}},_rearrange:function(n,t,i,r){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var u=this.counter;this._delay(function(){u===this.counter&&this.refreshPositions(!r)})},_clear:function(n,t){function u(n,t,i){return function(r){i._trigger(n,r,t._uiHash(t))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(n){this._trigger("receive",n,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(n){this._trigger("update",n,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(n){this._trigger("remove",n,this._uiHash())}),r.push(function(n){return function(t){n._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(n){return function(t){n._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||r.push(u("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(u("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",n,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;r.length>i;i++)r[i].call(this,n);this._trigger("stop",n,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){n.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||n([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}});n.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);""!==this.value()&&this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super(),i=this.element;return n.each(["min","max","step"],function(n,r){var u=i.attr(r);null!=u&&u.length&&(t[r]=u)}),t},_events:{keydown:function(n){this._start(n)&&this._keydown(n)&&n.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(n){return this.cancelBlur?(delete this.cancelBlur,void 0):(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",n),void 0)},mousewheel:function(n,t){if(t){if(!this.spinning&&!this._start(n))return!1;this._spin((t>0?1:-1)*this.options.step,n);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(n)},100);n.preventDefault()}},"mousedown .ui-spinner-button":function(t){function r(){var t=this.element[0]===n.ui.safeActiveElement(this.document[0]);t||(this.element.trigger("focus"),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===n.ui.safeActiveElement(this.document[0])?this.previous:this.element.val();t.preventDefault();r.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;r.call(this)});this._start(t)!==!1&&this._repeat(null,n(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(n(t.currentTarget).hasClass("ui-state-active"))return this._start(t)===!1?!1:(this._repeat(null,n(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t),void 0)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a><\/a><a><\/a>")},_draw:function(){this._enhance();this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content");this._addClass("ui-spinner-input");this.element.attr("role","spinbutton");this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}});this._removeClass(this.buttons,"ui-corner-all");this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up");this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down");this.buttons.first().button({icon:this.options.icons.up,showLabel:!1});this.buttons.last().button({icon:this.options.icons.down,showLabel:!1});this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var r=this.options,i=n.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,r.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-r.page,t),!0}return!1},_start:function(n){return this.spinning||this._trigger("start",n)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(n,t,i){n=n||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,t,i)},n);this._spin(t*this.options.step,i)},_spin:function(n,t){var i=this.value()||0;this.counter||(this.counter=1);i=this._adjustValue(i+n*this._increment(this.counter));this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?n.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var n=this._precisionOf(this.options.step);return null!==this.options.min&&(n=Math.max(n,this._precisionOf(this.options.min))),n},_precisionOf:function(n){var t=""+n,i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(n){var r,i,t=this.options;return r=null!==t.min?t.min:0,i=n-r,i=Math.round(i/t.step)*t.step,n=r+i,n=parseFloat(n.toFixed(this._precision())),null!==t.max&&n>t.max?t.max:null!==t.min&&t.min>n?t.min:n},_stop:function(n){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",n))},_setOption:function(n,t){var u,i,r;return"culture"===n||"numberFormat"===n?(u=this._parse(this.element.val()),this.options[n]=t,this.element.val(this._format(u)),void 0):(("max"===n||"min"===n||"step"===n)&&"string"==typeof t&&(t=this._parse(t)),"icons"===n&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,t.up),r=this.buttons.last().find(".ui-icon"),this._removeClass(r,null,this.options.icons.down),this._addClass(r,null,t.down)),this._super(n,t),void 0)},_setOptionDisabled:function(n){this._super(n);this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!n);this.element.prop("disabled",!!n);this.buttons.button(n?"disable":"enable")},_setOptions:t(function(n){this._super(n)}),_parse:function(n){return"string"==typeof n&&""!==n&&(n=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(n,10,this.options.culture):+n),""===n||isNaN(n)?null:n},_format:function(n){return""===n?"":window.Globalize&&this.options.numberFormat?Globalize.format(n,this.options.numberFormat,this.options.culture):n},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var n=this.value();return null===n?!1:n===this._adjustValue(n)},_value:function(n,t){var i;""!==n&&(i=this._parse(n),null!==i&&(t||(i=this._adjustValue(i)),n=this._format(i)));this.element.val(n);this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:t(function(n){this._stepUp(n)}),_stepUp:function(n){this._start()&&(this._spin((n||1)*this.options.step),this._stop())},stepDown:t(function(n){this._stepDown(n)}),_stepDown:function(n){this._start()&&(this._spin((n||1)*-this.options.step),this._stop())},pageUp:t(function(n){this._stepUp((n||1)*this.options.page)}),pageDown:t(function(n){this._stepDown((n||1)*this.options.page)}),value:function(n){return arguments.length?(t(this._value).call(this,n),void 0):this._parse(this.element.val())},widget:function(){return this.uiSpinner}});n.uiBackCompat!==!1&&n.widget("ui.spinner",n.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a><\/a><a><\/a>"}});n.ui.spinner;n.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var n=/#.*$/;return function(t){var i,r;i=t.href.replace(n,"");r=location.href.replace(n,"");try{i=decodeURIComponent(i)}catch(u){}try{r=decodeURIComponent(r)}catch(u){}return t.hash.length>1&&i===r}}(),_create:function(){var i=this,t=this.options;this.running=!1;this._addClass("ui-tabs","ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,t.collapsible);this._processTabs();t.active=this._initialActive();n.isArray(t.disabled)&&(t.disabled=n.unique(t.disabled.concat(n.map(this.tabs.filter(".ui-state-disabled"),function(n){return i.tabs.index(n)}))).sort());this.active=this.options.active!==!1&&this.anchors.length?this._findActive(t.active):n();this._refresh();this.active.length&&this.load(t.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,r=location.hash.substring(1);return null===t&&(r&&this.tabs.each(function(i,u){if(n(u).attr("aria-controls")===r)return(t=i,!1)}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):n()}},_tabKeydown:function(t){var r=n(n.ui.safeActiveElement(this.document[0])).closest("li"),i=this.tabs.index(r),u=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case n.ui.keyCode.RIGHT:case n.ui.keyCode.DOWN:i++;break;case n.ui.keyCode.UP:case n.ui.keyCode.LEFT:u=!1;i--;break;case n.ui.keyCode.END:i=this.anchors.length-1;break;case n.ui.keyCode.HOME:i=0;break;case n.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),this._activate(i),void 0;case n.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),this._activate(i===this.options.active?!1:i),void 0;default:return}t.preventDefault();clearTimeout(this.activating);i=this._focusNextTab(i,u);t.ctrlKey||t.metaKey||(r.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===n.ui.keyCode.UP&&(t.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(t){return t.altKey&&t.keyCode===n.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===n.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function u(){return t>r&&(t=0),0>t&&(t=r),t}for(var r=this.tabs.length-1;-1!==n.inArray(u(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(n,t){return n=this._findNextTab(n,t),this.tabs.eq(n).trigger("focus"),n},_setOption:function(n,t){return"active"===n?(this._activate(t),void 0):(this._super(n,t),"collapsible"===n&&(this._toggleClass("ui-tabs-collapsible",null,t),t||this.options.active!==!1||this._activate(0)),"event"===n&&this._setupEvents(t),"heightStyle"===n&&this._setupHeightStyle(t),void 0)},_sanitizeSelector:function(n){return n?n.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=n.map(i.filter(".ui-state-disabled"),function(n){return i.index(n)});this._processTabs();t.active!==!1&&this.anchors.length?this.active.length&&!n.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=n()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=n());this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,r=this.anchors,u=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",function(t){n(this).is(".ui-state-disabled")&&t.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){n(this).closest("li").is(".ui-state-disabled")&&this.blur()});this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map(function(){return n("a",this)[0]}).attr({role:"presentation",tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=n();this.anchors.each(function(i,r){var f,u,e,s=n(r).uniqueId().attr("id"),o=n(r).closest("li"),h=o.attr("aria-controls");t._isLocal(r)?(f=r.hash,e=f.substring(1),u=t.element.find(t._sanitizeSelector(f))):(e=o.attr("aria-controls")||n({}).uniqueId()[0].id,f="#"+e,u=t.element.find(f),u.length||(u=t._createPanel(e),u.insertAfter(t.panels[i-1]||t.tablist)),u.attr("aria-live","polite"));u.length&&(t.panels=t.panels.add(u));h&&o.data("ui-tabs-aria-controls",h);o.attr({"aria-controls":e,"aria-labelledby":s});u.attr("aria-labelledby",s)});this.panels.attr("role","tabpanel");this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");i&&(this._off(i.not(this.tabs)),this._off(r.not(this.anchors)),this._off(u.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(t){return n("<div>").attr("id",t).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(t){var i,u,r;for(n.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1),r=0;u=this.tabs[r];r++)i=n(u),t===!0||-1!==n.inArray(r,t)?(i.attr("aria-disabled","true"),this._addClass(i,null,"ui-state-disabled")):(i.removeAttr("aria-disabled"),this._removeClass(i,null,"ui-state-disabled"));this.options.disabled=t;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,t===!0)},_setupEvents:function(t){var i={};t&&n.each(t.split(" "),function(n,t){i[t]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(!0,this.anchors,{click:function(n){n.preventDefault()}});this._on(this.anchors,i);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,r=this.element.parent();"fill"===t?(i=r.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=n(this),r=t.css("position");"absolute"!==r&&"fixed"!==r&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=n(this).outerHeight(!0)}),this.panels.each(function(){n(this).height(Math.max(0,i-n(this).innerHeight()+n(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,n(this).height("").height())}).height(i))},_eventHandler:function(t){var u=this.options,r=this.active,c=n(t.currentTarget),i=c.closest("li"),f=i[0]===r[0],e=f&&u.collapsible,o=e?n():this._getPanelForTab(i),s=r.length?this._getPanelForTab(r):n(),h={oldTab:r,oldPanel:s,newTab:e?n():i,newPanel:o};t.preventDefault();i.hasClass("ui-state-disabled")||i.hasClass("ui-tabs-loading")||this.running||f&&!u.collapsible||this._trigger("beforeActivate",t,h)===!1||(u.active=e?!1:this.tabs.index(i),this.active=f?n():i,this.xhr&&this.xhr.abort(),s.length||o.length||n.error("jQuery UI Tabs: Mismatching fragment identifier."),o.length&&this.load(this.tabs.index(i),t),this._toggle(t,h))},_toggle:function(t,i){function e(){r.running=!1;r._trigger("activate",t,i)}function o(){r._addClass(i.newTab.closest("li"),"ui-tabs-active","ui-state-active");u.length&&r.options.show?r._show(u,r.options.show,e):(u.show(),e())}var r=this,u=i.newPanel,f=i.oldPanel;this.running=!0;f.length&&this.options.hide?this._hide(f,this.options.hide,function(){r._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active");o()}):(this._removeClass(i.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),f.hide(),o());f.attr("aria-hidden","true");i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});u.length&&f.length?i.oldTab.attr("tabIndex",-1):u.length&&this.tabs.filter(function(){return 0===n(this).attr("tabIndex")}).attr("tabIndex",-1);u.attr("aria-hidden","false");i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var r,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),r=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:r,currentTarget:r,preventDefault:n.noop}))},_findActive:function(t){return t===!1?n():this.tabs.eq(t)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+n.ui.escapeSelector(t)+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort();this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){n.data(this,"ui-tabs-destroy")?n(this).remove():n(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")});this.tabs.each(function(){var t=n(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(void 0===t?i=!1:(t=this._getIndex(t),i=n.isArray(i)?n.map(i,function(n){return n!==t?n:null}):n.map(this.tabs,function(n,i){return i!==t?i:null})),this._setOptionDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(void 0===t)i=!0;else{if(t=this._getIndex(t),-1!==n.inArray(t,i))return;i=n.isArray(i)?n.merge([t],i).sort():[t]}this._setOptionDisabled(i)}},load:function(t,i){t=this._getIndex(t);var r=this,u=this.tabs.eq(t),e=u.find(".ui-tabs-anchor"),f=this._getPanelForTab(u),o={tab:u,panel:f},s=function(n,t){"abort"===t&&r.panels.stop(!1,!0);r._removeClass(u,"ui-tabs-loading");f.removeAttr("aria-busy");n===r.xhr&&delete r.xhr};this._isLocal(e[0])||(this.xhr=n.ajax(this._ajaxSettings(e,i,o)),this.xhr&&"canceled"!==this.xhr.statusText&&(this._addClass(u,"ui-tabs-loading"),f.attr("aria-busy","true"),this.xhr.done(function(n,t,u){setTimeout(function(){f.html(n);r._trigger("load",i,o);s(u,t)},1)}).fail(function(n,t){setTimeout(function(){s(n,t)},1)})))},_ajaxSettings:function(t,i,r){var u=this;return{url:t.attr("href").replace(/#.*$/,""),beforeSend:function(t,f){return u._trigger("beforeLoad",i,n.extend({jqXHR:t,ajaxSettings:f},r))}}},_getPanelForTab:function(t){var i=n(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}});n.uiBackCompat!==!1&&n.widget("ui.tabs",n.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab")}});n.ui.tabs;n.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=n(this).attr("title")||"";return n("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(i);t.data("ui-tooltip-id",i).attr("aria-describedby",n.trim(r.join(" ")))},_removeDescribedBy:function(t){var u=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),r=n.inArray(u,i);-1!==r&&i.splice(r,1);t.removeData("ui-tooltip-id");i=n.trim(i.join(" "));i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.liveRegion=n("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this.disabledTitles=n([])},_setOption:function(t,i){var r=this;this._super(t,i);"content"===t&&n.each(this.tooltips,function(n,t){r._updateContent(t.element)})},_setOptionDisabled:function(n){this[n?"_disable":"_enable"]()},_disable:function(){var t=this;n.each(this.tooltips,function(i,r){var u=n.Event("blur");u.target=u.currentTarget=r.element[0];t.close(u,!0)});this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=n(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=n(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))});this.disabledTitles=n([])},open:function(t){var r=this,i=n(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var i,t=n(this);t.data("ui-tooltip-open")&&(i=n.Event("blur"),i.target=i.currentTarget=this,r.close(i,!0));t.attr("title")&&(t.uniqueId(),r.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._registerCloseHandlers(t,i),this._updateContent(i,t))},_updateContent:function(n,t){var r,i=this.options.content,u=this,f=t?t.type:null;return"string"==typeof i||i.nodeType||i.jquery?this._open(t,n,i):(r=i.call(n[0],function(i){u._delay(function(){n.data("ui-tooltip-open")&&(t&&(t.type=f),this._open(t,n,i))})}),r&&this._open(t,n,r),void 0)},_open:function(t,i,r){function o(n){s.of=n;u.is(":hidden")||u.position(s)}var f,u,h,e,s=n.extend({},this.options.position);if(r){if(f=this._find(i))return f.tooltip.find(".ui-tooltip-content").html(r),void 0;i.is("[title]")&&(t&&"mouseover"===t.type?i.attr("title",""):i.removeAttr("title"));f=this._tooltip(i);u=f.tooltip;this._addDescribedBy(i,u.attr("id"));u.find(".ui-tooltip-content").html(r);this.liveRegion.children().hide();e=n("<div>").html(u.find(".ui-tooltip-content").html());e.removeAttr("name").find("[name]").removeAttr("name");e.removeAttr("id").find("[id]").removeAttr("id");e.appendTo(this.liveRegion);this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:o}),o(t)):u.position(n.extend({of:i},this.options.position));u.hide();this._show(u,this.options.show);this.options.track&&this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){u.is(":visible")&&(o(s.of),clearInterval(h))},n.fx.interval));this._trigger("open",t,{tooltip:u})}},_registerCloseHandlers:function(t,i){var r={keyup:function(t){if(t.keyCode===n.ui.keyCode.ESCAPE){var r=n.Event(t);r.currentTarget=i[0];this.close(r,!0)}}};i[0]!==this.element[0]&&(r.remove=function(){this._removeTooltip(this._find(i).tooltip)});t&&"mouseover"!==t.type||(r.mouseleave="close");t&&"focusin"!==t.type||(r.focusout="close");this._on(!0,i,r)},close:function(t){var u,f=this,i=n(t?t.currentTarget:this.element),r=this._find(i);return r?(u=r.tooltip,r.closing||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),r.hiding=!0,u.stop(!0),this._hide(u,this.options.hide,function(){f._removeTooltip(n(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&n.each(this.parents,function(t,i){n(i.element).attr("title",i.title);delete f.parents[t]}),r.closing=!0,this._trigger("close",t,{tooltip:u}),r.hiding||(r.closing=!1)),void 0):(i.removeData("ui-tooltip-open"),void 0)},_tooltip:function(t){var i=n("<div>").attr("role","tooltip"),r=n("<div>").appendTo(i),u=i.uniqueId().attr("id");return this._addClass(r,"ui-tooltip-content"),this._addClass(i,"ui-tooltip","ui-widget ui-widget-content"),i.appendTo(this._appendTo(t)),this.tooltips[u]={element:t,tooltip:i}},_find:function(n){var t=n.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(n){n.remove();delete this.tooltips[n.attr("id")]},_appendTo:function(n){var t=n.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;n.each(this.tooltips,function(i,r){var f=n.Event("blur"),u=r.element;f.target=f.currentTarget=u[0];t.close(f,!0);n("#"+i).remove();u.data("ui-tooltip-title")&&(u.attr("title")||u.attr("title",u.data("ui-tooltip-title")),u.removeData("ui-tooltip-title"))});this.liveRegion.remove()}});n.uiBackCompat!==!1&&n.widget("ui.tooltip",n.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var n=this._superApply(arguments);return this.options.tooltipClass&&n.tooltip.addClass(this.options.tooltipClass),n}});n.ui.tooltip});!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.CodeMirror=t()}(this,function(){"use strict";function nf(n){return new RegExp("(^|\\s)"+n+"(?:$|\\s)\\s*")}function ci(n){for(var t=n.childNodes.length;t>0;--t)n.removeChild(n.firstChild);return n}function ct(n,t){return ci(n).appendChild(t)}function i(n,t,i,r){var u=document.createElement(n),f;if(i&&(u.className=i),r&&(u.style.cssText=r),"string"==typeof t)u.appendChild(document.createTextNode(t));else if(t)for(f=0;f<t.length;++f)u.appendChild(t[f]);return u}function kr(n,t,r,u){var f=i(n,t,r,u);return f.setAttribute("role","presentation"),f}function li(n,t){if(3==t.nodeType&&(t=t.parentNode),n.contains)return n.contains(t);do if(11==t.nodeType&&(t=t.host),t==n)return!0;while(t=t.parentNode)}function fi(){var n;try{n=document.activeElement}catch(t){n=document.body||null}for(;n&&n.shadowRoot&&n.shadowRoot.activeElement;)n=n.shadowRoot.activeElement;return n}function nr(n,t){var i=n.className;nf(t).test(i)||(n.className+=(i?" ":"")+t)}function es(n,t){for(var r=n.split(" "),i=0;i<r.length;i++)r[i]&&!nf(r[i]).test(t)&&(t+=" "+r[i]);return t}function os(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t)}}function tr(n,t,i){t||(t={});for(var r in n)!n.hasOwnProperty(r)||i===!1&&t.hasOwnProperty(r)||(t[r]=n[r]);return t}function at(n,t,i,r,u){var f,e,o;for(null==t&&(t=n.search(/[^\s\u00a0]/),t==-1&&(t=n.length)),f=r||0,e=u||0;;){if(o=n.indexOf("\t",f),o<0||o>=t)return e+(t-f);e+=o-f;e+=i-e%i;f=o+1}}function d(n,t){for(var i=0;i<n.length;++i)if(n[i]==t)return i;return-1}function ss(n,t,i){for(var f,e,r=0,u=0;;){if(f=n.indexOf("\t",r),f==-1&&(f=n.length),e=f-r,f==n.length||u+e>=t)return r+Math.min(e,t-u);if(u+=f-r,u+=i-u%i,r=f+1,u>=t)return r}}function hs(n){for(;go.length<=n;)go.push(o(go)+" ");return go[n]}function o(n){return n[n.length-1]}function ve(n,t){for(var r=[],i=0;i<n.length;i++)r[i]=t(n[i],i);return r}function ub(n,t,i){for(var r=0,u=i(t);r<n.length&&i(n[r])<=u;)r++;n.splice(r,0,t)}function fl(){}function el(n,t){var i;return Object.create?i=Object.create(n):(fl.prototype=n,i=new fl),t&&tr(t,i),i}function cs(n){return/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||ftt.test(n))}function ye(n,t){return t?!!(t.source.indexOf("\\w")>-1&&cs(n))||t.test(n):cs(n)}function ol(n){for(var t in n)if(n.hasOwnProperty(t)&&n[t])return!1;return!0}function ls(n){return n.charCodeAt(0)>=768&&ett.test(n)}function sl(n,t,i){for(;(i<0?t>0:t<n.length)&&ls(n.charAt(t));)t+=i;return t}function pe(n,t,i){for(;;){if(Math.abs(t-i)<=1)return n(t)?t:i;var r=Math.floor((t+i)/2);n(r)?i=r:t=r}}function fb(n,t,r){var u=this,f;this.input=r;u.scrollbarFiller=i("div",null,"CodeMirror-scrollbar-filler");u.scrollbarFiller.setAttribute("cm-not-content","true");u.gutterFiller=i("div",null,"CodeMirror-gutter-filler");u.gutterFiller.setAttribute("cm-not-content","true");u.lineDiv=kr("div",null,"CodeMirror-code");u.selectionDiv=i("div",null,null,"position: relative; z-index: 1");u.cursorDiv=i("div",null,"CodeMirror-cursors");u.measure=i("div",null,"CodeMirror-measure");u.lineMeasure=i("div",null,"CodeMirror-measure");u.lineSpace=kr("div",[u.measure,u.lineMeasure,u.selectionDiv,u.cursorDiv,u.lineDiv],null,"position: relative; outline: none");f=kr("div",[u.lineSpace],"CodeMirror-lines");u.mover=i("div",[f],null,"position: relative");u.sizer=i("div",[u.mover],"CodeMirror-sizer");u.sizerWidth=null;u.heightForcer=i("div",null,null,"position: absolute; height: "+yw+"px; width: 1px;");u.gutters=i("div",null,"CodeMirror-gutters");u.lineGutter=null;u.scroller=i("div",[u.sizer,u.heightForcer,u.gutters],"CodeMirror-scroll");u.scroller.setAttribute("tabIndex","-1");u.wrapper=i("div",[u.scrollbarFiller,u.gutterFiller,u.scroller],"CodeMirror");e&&l<8&&(u.gutters.style.zIndex=-1,u.scroller.style.paddingRight=0);nt||bi&&fe||(u.scroller.draggable=!0);n&&(n.appendChild?n.appendChild(u.wrapper):n(u.wrapper));u.viewFrom=u.viewTo=t.first;u.reportedViewFrom=u.reportedViewTo=t.first;u.view=[];u.renderedView=null;u.externalMeasured=null;u.viewOffset=0;u.lastWrapHeight=u.lastWrapWidth=0;u.updateLineNumbers=null;u.nativeBarWidth=u.barHeight=u.barWidth=0;u.scrollbarsClipped=!1;u.lineNumWidth=u.lineNumInnerWidth=u.lineNumChars=null;u.alignWidgets=!1;u.cachedCharWidth=u.cachedTextHeight=u.cachedPaddingH=null;u.maxLine=null;u.maxLineLength=0;u.maxLineChanged=!1;u.wheelDX=u.wheelDY=u.wheelStartX=u.wheelStartY=null;u.shift=!1;u.selForContextMenu=null;u.activeTouch=null;r.init(u)}function t(n,t){var i,r,u,f;if(t-=n.first,t<0||t>=n.size)throw new Error("There is no line "+(t+n.first)+" in the document.");for(i=n;!i.lines;)for(r=0;;++r){if(u=i.children[r],f=u.chunkSize(),t<f){i=u;break}t-=f}return i.lines[t]}function ir(n,t,i){var u=[],r=t.line;return n.iter(t.line,i.line+1,function(n){var f=n.text;r==i.line&&(f=f.slice(0,i.ch));r==t.line&&(f=f.slice(t.ch));u.push(f);++r}),u}function as(n,t,i){var r=[];return n.iter(t,i,function(n){r.push(n.text)}),r}function gt(n,t){var r=t-n.height,i;if(r)for(i=n;i;i=i.parent)i.height+=r}function s(n){var r;if(null==n.parent)return null;for(var i=n.parent,u=d(i.lines,n),t=i.parent;t;i=t,t=t.parent)for(r=0;t.children[r]!=i;++r)u+=t.children[r].chunkSize();return u+i.first}function rr(n,t){var f=n.first,r,u,e,i,s,o;n:do{for(r=0;r<n.children.length;++r){if(u=n.children[r],e=u.height,t<e){n=u;continue n}t-=e;f+=u.chunkSize()}return f}while(!n.lines);for(i=0;i<n.lines.length;++i){if(s=n.lines[i],o=s.height,t<o)break;t-=o}return f+i}function tf(n,t){return t>=n.first&&t<n.first+n.size}function vs(n,t){return String(n.lineNumberFormatter(t+n.firstLineNumber))}function n(t,i,r){return void 0===r&&(r=null),this instanceof n?(this.line=t,this.ch=i,void(this.sticky=r)):new n(t,i,r)}function u(n,t){return n.line-t.line||n.ch-t.ch}function ys(n,t){return n.sticky==t.sticky&&0==u(n,t)}function ps(t){return n(t.line,t.ch)}function we(n,t){return u(n,t)<0?t:n}function be(n,t){return u(n,t)<0?n:t}function hl(n,t){return Math.max(n.first,Math.min(t,n.first+n.size-1))}function f(i,r){if(r.line<i.first)return n(i.first,0);var u=i.first+i.size-1;return r.line>u?n(u,t(i,u).text.length):eb(r,t(i,r.line).text.length)}function eb(t,i){var r=t.ch;return null==r||r>i?n(t.line,i):r<0?n(t.line,0):t}function cl(n,t){for(var r=[],i=0;i<t.length;i++)r[i]=f(n,t[i]);return r}function ob(){pw=!0}function sb(){di=!0}function ke(n,t,i){this.marker=n;this.from=t;this.to=i}function rf(n,t){var i,r;if(n)for(i=0;i<n.length;++i)if(r=n[i],r.marker==t)return r}function hb(n,t){for(var r,i=0;i<n.length;++i)n[i]!=t&&(r||(r=[])).push(n[i]);return r}function cb(n,t){n.markedSpans=n.markedSpans?n.markedSpans.concat([t]):[t];t.marker.attachLine(n)}function lb(n,t,i){var e,u,o;if(n)for(u=0;u<n.length;++u){var r=n[u],f=r.marker,s=null==r.from||(f.inclusiveLeft?r.from<=t:r.from<t);!s&&(r.from!=t||"bookmark"!=f.type||i&&r.marker.insertLeft)||(o=null==r.to||(f.inclusiveRight?r.to>=t:r.to>t),(e||(e=[])).push(new ke(f,r.from,o?null:r.to)))}return e}function ab(n,t,i){var e,u,o;if(n)for(u=0;u<n.length;++u){var r=n[u],f=r.marker,s=null==r.to||(f.inclusiveRight?r.to>=t:r.to>t);(s||r.from==t&&"bookmark"==f.type&&(!i||r.marker.insertLeft))&&(o=null==r.from||(f.inclusiveLeft?r.from<=t:r.from<t),(e||(e=[])).push(new ke(f,o?null:r.from-t,null==r.to?null:r.to-t)))}return e}function ws(n,i){var w,b,a,h,v,y,e,it,p,d,g,c,nt;if(i.full||(w=tf(n,i.from.line)&&t(n,i.from.line).markedSpans,b=tf(n,i.to.line)&&t(n,i.to.line).markedSpans,!w&&!b))return null;var k=i.from.ch,rt=i.to.ch,tt=0==u(i.from,i.to),r=lb(w,k,tt),f=ab(b,rt,tt),s=1==i.text.length,l=o(i.text).length+(s?k:0);if(r)for(a=0;a<r.length;++a)h=r[a],null==h.to&&(v=rf(f,h.marker),v?s&&(h.to=null==v.to?null:v.to+l):h.to=k);if(f)for(y=0;y<f.length;++y)e=f[y],(null!=e.to&&(e.to+=l),null==e.from)?(it=rf(r,e.marker),it||(e.from=l,s&&(r||(r=[])).push(e))):(e.from+=l,s&&(r||(r=[])).push(e));if(r&&(r=ll(r)),f&&f!=r&&(f=ll(f)),p=[r],!s){if(g=i.text.length-2,g>0&&r)for(c=0;c<r.length;++c)null==r[c].to&&(d||(d=[])).push(new ke(r[c].marker,null,null));for(nt=0;nt<g;++nt)p.push(d);p.push(f)}return p}function ll(n){for(var i,t=0;t<n.length;++t)i=n[t],null!=i.from&&i.from==i.to&&i.marker.clearWhenEmpty!==!1&&n.splice(t--,1);return n.length?n:null}function vb(n,t,i){var r=null,e,h,f;if(n.iter(t.line,i.line+1,function(n){var t,i;if(n.markedSpans)for(t=0;t<n.markedSpans.length;++t)i=n.markedSpans[t].marker,!i.readOnly||r&&d(r,i)!=-1||(r||(r=[])).push(i)}),!r)return null;for(e=[{from:t,to:i}],h=0;h<r.length;++h)for(var l=r[h],o=l.find(0),s=0;s<e.length;++s)if(f=e[s],!(u(f.to,o.from)<0||u(f.from,o.to)>0)){var c=[s,1],a=u(f.from,o.from),v=u(f.to,o.to);(a<0||!l.inclusiveLeft&&!a)&&c.push({from:f.from,to:o.from});(v>0||!l.inclusiveRight&&!v)&&c.push({from:o.to,to:f.to});e.splice.apply(e,c);s+=c.length-3}return e}function al(n){var i=n.markedSpans,t;if(i){for(t=0;t<i.length;++t)i[t].marker.detachLine(n);n.markedSpans=null}}function vl(n,t){if(t){for(var i=0;i<t.length;++i)t[i].marker.attachLine(n);n.markedSpans=t}}function de(n){return n.inclusiveLeft?-1:0}function ge(n){return n.inclusiveRight?1:0}function yl(n,t){var r=n.lines.length-t.lines.length,i;if(0!=r)return r;var f=n.find(),e=t.find(),o=u(f.from,e.from)||de(n)-de(t);return o?-o:(i=u(f.to,e.to)||ge(n)-ge(t),i?i:t.id-n.id)}function pl(n,t){var r,f=di&&n.markedSpans,i,u;if(f)for(i=void 0,u=0;u<f.length;++u)i=f[u],i.marker.collapsed&&null==(t?i.from:i.to)&&(!r||yl(r,i.marker)<0)&&(r=i.marker);return r}function wl(n){return pl(n,!0)}function uf(n){return pl(n,!1)}function bl(n,i,r,f,e){var v=t(n,i),l=di&&v.markedSpans,h,o;if(l)for(h=0;h<l.length;++h)if(o=l[h],o.marker.collapsed){var s=o.marker.find(0),c=u(s.from,r)||de(o.marker)-de(e),a=u(s.to,f)||ge(o.marker)-ge(e);if(!(c>=0&&a<=0||c<=0&&a>=0)&&(c<=0&&(o.marker.inclusiveRight&&e.inclusiveLeft?u(s.to,r)>=0:u(s.to,r)>0)||c>=0&&(o.marker.inclusiveRight&&e.inclusiveLeft?u(s.from,f)<=0:u(s.from,f)<0)))return!0}}function ni(n){for(var t;t=wl(n);)n=t.find(-1,!0).line;return n}function yb(n){for(var t;t=uf(n);)n=t.find(1,!0).line;return n}function pb(n){for(var i,t;i=uf(n);)n=i.find(1,!0).line,(t||(t=[])).push(n);return t}function bs(n,i){var r=t(n,i),u=ni(r);return r==u?i:s(u)}function kl(n,i){if(i>n.lastLine())return i;var u,r=t(n,i);if(!ur(n,r))return i;for(;u=uf(r);)r=u.find(1,!0).line;return s(r)+1}function ur(n,t){var u=di&&t.markedSpans,i,r;if(u)for(i=void 0,r=0;r<u.length;++r)if((i=u[r],i.marker.collapsed)&&(null==i.from||!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&ks(n,t,i)))return!0}function ks(n,t,i){var f,r,u;if(null==i.to)return f=i.marker.find(1,!0),ks(n,f.line,rf(f.line.markedSpans,i.marker));if(i.marker.inclusiveRight&&i.to==t.text.length)return!0;for(r=void 0,u=0;u<t.markedSpans.length;++u)if(r=t.markedSpans[u],r.marker.collapsed&&!r.marker.widgetNode&&r.from==i.to&&(null==r.to||r.to!=i.from)&&(r.marker.inclusiveLeft||i.marker.inclusiveRight)&&ks(n,t,r))return!0}function ei(n){var e,i,r,o;n=ni(n);for(var u=0,t=n.parent,f=0;f<t.lines.length;++f){if(e=t.lines[f],e==n)break;u+=e.height}for(i=t.parent;i;t=i,i=t.parent)for(r=0;r<i.children.length;++r){if(o=i.children[r],o==t)break;u+=o.height}return u}function no(n){var r,i,t,u,f;if(0==n.height)return 0;for(i=n.text.length,t=n;r=wl(t);)u=r.find(0,!0),t=u.from.line,i+=u.from.ch-u.to.ch;for(t=n;r=uf(t);)f=r.find(0,!0),i-=t.text.length-f.from.ch,t=f.to.line,i+=t.text.length-f.to.ch;return i}function ds(n){var i=n.display,r=n.doc;i.maxLine=t(r,r.first);i.maxLineLength=no(i.maxLine);i.maxLineChanged=!0;r.iter(function(n){var t=no(n);t>i.maxLineLength&&(i.maxLineLength=t,i.maxLine=n)})}function wb(n,t,i,r){var e,f,u;if(!n)return r(t,i,"ltr");for(e=!1,f=0;f<n.length;++f)u=n[f],(u.from<i&&u.to>t||t==i&&u.to==t)&&(r(Math.max(u.from,t),Math.min(u.to,i),1==u.level?"rtl":"ltr"),e=!0);e||r(t,i,"ltr")}function gs(n,t,i){var f,r,u;for(oe=null,r=0;r<n.length;++r){if(u=n[r],u.from<t&&u.to>t)return r;u.to==t&&(u.from!=u.to&&"before"==i?f=r:oe=r);u.from==t&&(u.from!=u.to&&"before"!=i?f=r:oe=r)}return null!=f?f:oe}function ai(n,t){var i=n.order;return null==i&&(i=n.order=ott(n.text,t)),i}function nh(n,t,i){var r=sl(n.text,t+i,i);return r<0||r>n.text.length?null:r}function th(t,i,r){var u=nh(t,i.ch,r);return null==u?null:new n(i.line,u,r<0?"after":"before")}function ih(t,i,r,u,f){var h,c,a;if(t&&(h=ai(r,i.doc.direction),h)){var e,s=f<0?o(h):h[0],v=f<0==(1==s.level),l=v?"after":"before";return s.level>0?(c=hf(i,r),e=f<0?r.text.length-1:0,a=er(i,c,e).top,e=pe(function(n){return er(i,c,n).top==a},f<0==(1==s.level)?s.from:s.to-1,e),"before"==l&&(e=nh(r,e,1))):e=f<0?s.to:s.from,new n(u,e,l)}return new n(u,f<0?r.text.length:0,f<0?"before":"after")}function dl(t,i,r,u){var o=ai(i,t.doc.direction),v,f,l,e,b,p,c,a;if(!o||(r.ch>=i.text.length?(r.ch=i.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after"),v=gs(o,r.ch,r.sticky),f=o[v],"ltr"==t.doc.direction&&f.level%2==0&&(u>0?f.to>r.ch:f.from<r.ch)))return th(i,r,u);var y,s=function(t,r){return nh(i,t instanceof n?t.ch:t,r)},w=function(n){return t.options.lineWrapping?(y=y||hf(t,i),rd(t,i,y,n)):{begin:0,end:i.text.length}},h=w("before"==r.sticky?s(r,-1):r.ch);return("rtl"==t.doc.direction||1==f.level)&&(l=1==f.level==u<0,e=s(r,l?1:-1),null!=e&&(l?e<=f.to&&e<=h.end:e>=f.from&&e>=h.begin))?(b=l?"before":"after",new n(r.line,e,b)):(p=function(t,i,u){for(var c=function(t,i){return i?new n(r.line,s(t,1),"before"):new n(r.line,t,"after")};t>=0&&t<o.length;t+=i){var e=o[t],h=i>0==(1!=e.level),f=h?u.begin:s(u.end,-1);if(e.from<=f&&f<e.to||(f=h?e.from:s(e.to,-1),u.begin<=f&&f<u.end))return c(f,h)}},c=p(v+u,u,h),c)?c:(a=u>0?h.end:s(h.begin,-1),null==a||u>0&&a==i.text.length||!(c=p(u>0?0:o.length-1,u,w(a)))?null:c)}function rh(n,t){return n._handlers&&n._handlers[t]||ww}function lt(n,t,i){var u,r,f;n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent?n.detachEvent("on"+t,i):(u=n._handlers,r=u&&u[t],r&&(f=d(r,i),f>-1&&(u[t]=r.slice(0,f).concat(r.slice(f+1)))))}function v(n,t){var r=rh(n,t),u,i;if(r.length)for(u=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,u)}function p(n,t,i){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),v(n,i||t.type,n,t),uh(t)||t.codemirrorIgnore}function gl(n){var i=n._handlers&&n._handlers.cursorActivity,r,t;if(i)for(r=n.curOp.cursorActivityHandlers||(n.curOp.cursorActivityHandlers=[]),t=0;t<i.length;++t)d(r,i[t])==-1&&r.push(i[t])}function vt(n,t){return rh(n,t).length>0}function dr(n){n.prototype.on=function(n,t){r(this,n,t)};n.prototype.off=function(n,t){lt(this,n,t)}}function tt(n){n.preventDefault?n.preventDefault():n.returnValue=!1}function na(n){n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}function uh(n){return null!=n.defaultPrevented?n.defaultPrevented:0==n.returnValue}function ff(n){tt(n);na(n)}function fh(n){return n.target||n.srcElement}function ta(n){var t=n.which;return null==t&&(1&n.button?t=1:2&n.button?t=3:4&n.button&&(t=2)),kt&&n.ctrlKey&&1==t&&(t=3),t}function bb(n){var t,r;return null==bc&&(t=i("span",""),ct(n,i("span",[t,document.createTextNode("x")])),0!=n.firstChild.offsetHeight&&(bc=t.offsetWidth<=1&&t.offsetHeight>2&&!(e&&l<8))),r=bc?i("span",""):i("span","",null,"display: inline-block; width: 1px; margin-right: -1px"),r.setAttribute("cm-text",""),r}function kb(n){if(null!=kc)return kc;var i=ct(n,document.createTextNode("AA")),t=au(i,0,1).getBoundingClientRect(),r=au(i,1,2).getBoundingClientRect();return ci(n),!(!t||t.left==t.right)&&(kc=r.right-t.right<3)}function db(n){if(null!=tl)return tl;var t=ct(n,i("span","x")),r=t.getBoundingClientRect(),u=au(t,0,1).getBoundingClientRect();return tl=Math.abs(r.left-u.left)>1}function gb(n,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2));il[n]=t}function nk(n,t){vu[n]=t}function to(n){if("string"==typeof n&&vu.hasOwnProperty(n))n=vu[n];else if(n&&"string"==typeof n.name&&vu.hasOwnProperty(n.name)){var t=vu[n.name];"string"==typeof t&&(t={name:t});n=el(t,n);n.name=t.name}else{if("string"==typeof n&&/^[\w\-]+\/[\w\-]+\+xml$/.test(n))return to("application/xml");if("string"==typeof n&&/^[\w\-]+\/[\w\-]+\+json$/.test(n))return to("application/json")}return"string"==typeof n?{name:n}:n||{name:"null"}}function eh(n,t){var f,i,u,r,e;if(t=to(t),f=il[t.name],!f)return eh(n,"text/plain");if(i=f(n,t),yu.hasOwnProperty(t.name)){u=yu[t.name];for(r in u)u.hasOwnProperty(r)&&(i.hasOwnProperty(r)&&(i["_"+r]=i[r]),i[r]=u[r])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(e in t.modeProps)i[e]=t.modeProps[e];return i}function tk(n,t){var i=yu.hasOwnProperty(n)?yu[n]:yu[n]={};tr(t,i)}function oi(n,t){var r,u,i;if(t===!0)return t;if(n.copyState)return n.copyState(t);r={};for(u in t)i=t[u],i instanceof Array&&(i=i.concat([])),r[u]=i;return r}function oh(n,t){for(var i;n.innerMode&&(i=n.innerMode(t),i&&i.mode!=n);)t=i.state,n=i.mode;return i||{mode:n,state:t}}function ia(n,t,i){return!n.startState||n.startState(t,i)}function ra(n,t,i,r){var u=[n.state.modeGen],f={},o,e;for(sa(n,t.text,n.doc.mode,i,function(n,t){return u.push(n,t)},f,r),o=function(i){var e=n.state.overlays[i],r=1,o=0;sa(n,t.text,e.mode,!0,function(n,t){for(var f,s,i=r;o<n;)f=u[r],f>n&&u.splice(r,1,n,u[r+1],f),r+=2,o=Math.min(n,f);if(t)if(e.opaque)u.splice(i,r-i,n,"overlay "+t),r=i+2;else for(;i<r;i+=2)s=u[i+1],u[i+1]=(s?s+" ":"")+"overlay "+t},f)},e=0;e<n.state.overlays.length;++e)o(e);return{styles:u,classes:f.bgClass||f.textClass?f:null}}function ua(n,t,i){if(!t.styles||t.styles[0]!=n.state.modeGen){var r=ef(n,s(t)),u=ra(n,t,t.text.length>n.options.maxHighlightLength?oi(n.doc.mode,r):r);t.stateAfter=r;t.styles=u.styles;u.classes?t.styleClasses=u.classes:t.styleClasses&&(t.styleClasses=null);i===n.doc.frontier&&n.doc.frontier++}return t.styles}function ef(n,i,r){var f=n.doc,o=n.display,u,e;return f.mode.startState?(u=ik(n,i,r),e=u>f.first&&t(f,u-1).stateAfter,e=e?oi(f.mode,e):ia(f.mode),f.iter(u,i,function(t){sh(n,t.text,e);var r=u==i-1||u%5==0||u>=o.viewFrom&&u<o.viewTo;t.stateAfter=r?oi(f.mode,e):null;++u}),r&&(f.frontier=u),e):!0}function sh(n,t,i,r){var f=n.doc.mode,u=new k(t,n.options.tabSize);for(u.start=u.pos=r||0,""==t&&fa(f,i);!u.eol();)hh(f,u,i),u.start=u.pos}function fa(n,t){if(n.blankLine)return n.blankLine(t);if(n.innerMode){var i=oh(n,t);return i.mode.blankLine?i.mode.blankLine(i.state):void 0}}function hh(n,t,i,r){for(var f,u=0;u<10;u++)if(r&&(r[0]=oh(n,i).mode),f=n.token(t,i),t.pos>t.start)return f;throw new Error("Mode "+n.name+" failed to advance stream.");}function ea(n,i,r,u){var c,l=function(n){return{start:e.start,end:e.pos,string:e.current(),type:c||null,state:n?oi(o.mode,h):h}},o=n.doc,a=o.mode;i=f(o,i);var s,v=t(o,i.line),h=ef(n,i.line,r),e=new k(v.text,n.options.tabSize);for(u&&(s=[]);(u||e.pos<i.ch)&&!e.eol();)e.start=e.pos,c=hh(a,e,h),u&&s.push(l(!0));return u?s:l()}function oa(n,t){var i,r;if(n)for(;;){if(i=n.match(/(?:^|\s+)line-(background-)?(\S+)/),!i)break;n=n.slice(0,i.index)+n.slice(i.index+i[0].length);r=i[1]?"bgClass":"textClass";null==t[r]?t[r]=i[2]:new RegExp("(?:^|s)"+i[2]+"(?:$|s)").test(t[r])||(t[r]+=" "+i[2])}return n}function sa(n,t,i,r,u,f,e){var c=i.flattenSpans,a,y;null==c&&(c=n.options.flattenSpans);var s,h=0,l=null,o=new k(t,n.options.tabSize),v=n.options.addModeClass&&[null];for(""==t&&oa(fa(i,r),f);!o.eol();){if((o.pos>n.options.maxHighlightLength?(c=!1,e&&sh(n,t,r,o.pos),o.pos=t.length,s=null):s=oa(hh(i,o,r,v),f),v)&&(a=v[0].name,a&&(s="m-"+(s?a+" "+s:a))),!c||l!=s){for(;h<o.start;)h=Math.min(o.start,h+5e3),u(h,l);l=s}o.start=o.pos}for(;h<o.pos;)y=Math.min(o.pos,h+5e3),u(y,l),h=y}function ik(n,i,r){for(var o,s,h,e,f=n.doc,c=r?-1:i-(n.doc.mode.innerMode?1e3:100),u=i;u>c;--u){if(u<=f.first)return f.first;if(o=t(f,u-1),o.stateAfter&&(!r||u<=f.frontier))return u;s=at(o.text,null,n.options.tabSize);(null==e||h>s)&&(e=u-1,h=s)}return e}function rk(n,t,i,r){n.text=t;n.stateAfter&&(n.stateAfter=null);n.styles&&(n.styles=null);null!=n.order&&(n.order=null);al(n);vl(n,i);var u=r?r(n):1;u!=n.height&&gt(n,u)}function uk(n){n.parent=null;al(n)}function ha(n,t){if(!n||/^\s*$/.test(n))return null;var i=t.addModeClass?ltt:ctt;return i[n]||(i[n]=n.replace(/\S+/g,"cm-$&"))}function ca(n,t){var h=kr("span",null,null,nt?"padding-right: .1px":null),i={pre:kr("pre",[h],"CodeMirror-line"),content:h,col:0,pos:0,cm:n,trailingSpace:!1,splitSpaces:(e||nt)&&n.getOption("lineWrapping")},u,r,o,c,f;for(t.measure={},u=0;u<=(t.rest?t.rest.length:0);u++)r=u?t.rest[u-1]:t.line,o=void 0,i.pos=0,i.addToken=ek,kb(n.display.measure)&&(o=ai(r,n.doc.direction))&&(i.addToken=sk(i.addToken,o)),i.map=[],c=t!=n.display.externalMeasured&&s(r),hk(r,i,ua(n,r,c)),r.styleClasses&&(r.styleClasses.bgClass&&(i.bgClass=es(r.styleClasses.bgClass,i.bgClass||"")),r.styleClasses.textClass&&(i.textClass=es(r.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(bb(n.display.measure))),0==u?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}));return nt&&(f=i.content.lastChild,(/\bcm-tab\b/.test(f.className)||f.querySelector&&f.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")),v(n,"renderLine",n,t.line,i.pre),i.pre.className&&(i.textClass=es(i.pre.className,i.textClass||"")),i}function fk(n){var t=i("span","","cm-invalidchar");return t.title="\\u"+n.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function ek(n,t,r,u,f,o,s){var v,c,y,p,a,d,g,w,nt;if(t){var h,b=n.splitSpaces?ok(t,n.trailingSpace):t,k=n.cm.state.specialChars,tt=!1;if(k.test(t))for(h=document.createDocumentFragment(),v=0;;){if(k.lastIndex=v,c=k.exec(t),y=c?c.index-v:t.length-v,y&&(p=document.createTextNode(b.slice(v,v+y)),e&&l<9?h.appendChild(i("span",[p])):h.appendChild(p),n.map.push(n.pos,n.pos+y,p),n.col+=y,n.pos+=y),!c)break;v+=y+1;a=void 0;"\t"==c[0]?(d=n.cm.options.tabSize,g=d-n.col%d,a=h.appendChild(i("span",hs(g),"cm-tab")),a.setAttribute("role","presentation"),a.setAttribute("cm-text","\t"),n.col+=g):"\r"==c[0]||"\n"==c[0]?(a=h.appendChild(i("span","\r"==c[0]?"":"","cm-invalidchar")),a.setAttribute("cm-text",c[0]),n.col+=1):(a=n.cm.options.specialCharPlaceholder(c[0]),a.setAttribute("cm-text",c[0]),e&&l<9?h.appendChild(i("span",[a])):h.appendChild(a),n.col+=1);n.map.push(n.pos,n.pos+1,a);n.pos++}else n.col+=t.length,h=document.createTextNode(b),n.map.push(n.pos,n.pos+t.length,h),e&&l<9&&(tt=!0),n.pos+=t.length;if(n.trailingSpace=32==b.charCodeAt(t.length-1),r||u||f||tt||s)return w=r||"",u&&(w+=u),f&&(w+=f),nt=i("span",[h],w,s),o&&(nt.title=o),n.content.appendChild(nt);n.content.appendChild(h)}}function ok(n,t){var r;if(n.length>1&&!/  /.test(n))return n;for(var u=t,f="",i=0;i<n.length;i++)r=n.charAt(i)," "==r&&u&&(i==n.length-1||32==n.charCodeAt(i+1))&&(r=""),f+=r,u=" "==r;return f}function sk(n,t){return function(i,r,u,f,e,o,s){var c,a,h,l;for(u=u?u+" cm-force-border":"cm-force-border",c=i.pos,a=c+r.length;;){for(h=void 0,l=0;l<t.length&&(h=t[l],!(h.to>c&&h.from<=c));l++);if(h.to>=a)return n(i,r,u,f,e,o,s);n(i,r.slice(0,h.to-c),u,f,null,o,s);f=null;r=r.slice(h.to-c);c=h.to}}}function la(n,t,i,r){var u=!r&&i.widgetNode;u&&n.map.push(n.pos,n.pos+t,u);!r&&n.cm.display.input.needsContentAttribute&&(u||(u=n.content.appendChild(document.createElement("span"))),u.setAttribute("cm-marker",i.id));u&&(n.cm.display.input.setUneditable(u),n.content.appendChild(u));n.pos+=t;n.trailingSpace=!1}function hk(n,t,i){var nt=n.markedSpans,tt=n.text,y=0,u,f,a,d,c,g,et,v;if(nt)for(var it,l,p,w,b,k,e,rt=tt.length,r=0,ot=1,s="",o=0;;){if(o==r){p=w=b=k=l="";e=null;o=1/0;for(var ut=[],h=void 0,ft=0;ft<nt.length;++ft)u=nt[ft],f=u.marker,"bookmark"==f.type&&u.from==r&&f.widgetNode?ut.push(f):u.from<=r&&(null==u.to||u.to>r||f.collapsed&&u.to==r&&u.from==r)?(null!=u.to&&u.to!=r&&o>u.to&&(o=u.to,w=""),f.className&&(p+=" "+f.className),f.css&&(l=(l?l+";":"")+f.css),f.startStyle&&u.from==r&&(b+=" "+f.startStyle),f.endStyle&&u.to==o&&(h||(h=[])).push(f.endStyle,u.to),f.title&&!k&&(k=f.title),f.collapsed&&(!e||yl(e.marker,f)<0)&&(e=u)):u.from>r&&o>u.from&&(o=u.from);if(h)for(a=0;a<h.length;a+=2)h[a+1]==o&&(w+=" "+h[a]);if(!e||e.from==r)for(d=0;d<ut.length;++d)la(t,0,ut[d]);if(e&&(e.from||0)==r){if(la(t,(null==e.to?rt+1:e.to)-r,e.marker,null==e.from),null==e.to)return;e.to==r&&(e=!1)}}if(r>=rt)break;for(c=Math.min(rt,o);;){if(s){if(g=r+s.length,e||(et=g>c?s.slice(0,c-r):s,t.addToken(t,et,it?it+p:p,b,r+et.length==o?w:"",k,l)),g>=c){s=s.slice(c-r);r=c;break}r=g;b=""}s=tt.slice(y,y=i[ot++]);it=ha(i[ot++],t.cm.options)}}else for(v=1;v<i.length;v+=2)t.addToken(t,tt.slice(y,y=i[v]),ha(i[v+1],t.cm.options))}function aa(n,t,i){this.line=t;this.rest=pb(t);this.size=this.rest?s(o(this.rest))-i+1:1;this.node=this.text=null;this.hidden=ur(n,t)}function io(n,i,r){for(var o,e,f=[],u=i;u<r;u=o)e=new aa(n.doc,t(n.doc,u),u),o=u+e.size,f.push(e);return f}function ck(n){pu?pu.ops.push(n):n.ownsGroup=pu={ops:[n],delayedCallbacks:[]}}function lk(n){var u=n.delayedCallbacks,i=0,r,t;do{for(;i<u.length;i++)u[i].call(null);for(r=0;r<n.ops.length;r++)if(t=n.ops[r],t.cursorActivityHandlers)for(;t.cursorActivityCalled<t.cursorActivityHandlers.length;)t.cursorActivityHandlers[t.cursorActivityCalled++].call(null,t.cm)}while(i<u.length)}function ak(n,t){var i=n.ownsGroup;if(i)try{lk(i)}finally{pu=null;t(i)}}function g(n,t){var u=rh(n,t),i,f,e,r;if(u.length)for(f=Array.prototype.slice.call(arguments,2),pu?i=pu.delayedCallbacks:se?i=se:(i=se=[],setTimeout(vk,0)),e=function(n){i.push(function(){return u[n].apply(null,f)})},r=0;r<u.length;++r)e(r)}function vk(){var t=se,n;for(se=null,n=0;n<t.length;++n)t[n]()}function va(n,t,i,r){for(var u,f=0;f<t.changes.length;f++)u=t.changes[f],"text"==u?pk(n,t):"gutter"==u?pa(n,t,i,r):"class"==u?ch(n,t):"widget"==u&&wk(n,t,r);t.changes=null}function of(n){return n.node==n.text&&(n.node=i("div",null,null,"position: relative"),n.text.parentNode&&n.text.parentNode.replaceChild(n.node,n.text),n.node.appendChild(n.text),e&&l<8&&(n.node.style.zIndex=2)),n.node}function yk(n,t){var r=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass,u;(r&&(r+=" CodeMirror-linebackground"),t.background)?r?t.background.className=r:(t.background.parentNode.removeChild(t.background),t.background=null):r&&(u=of(t),t.background=u.insertBefore(i("div",null,r),u.firstChild),n.display.input.setUneditable(t.background))}function ya(n,t){var i=n.display.externalMeasured;return i&&i.line==t.line?(n.display.externalMeasured=null,t.measure=i.measure,i.built):ca(n,t)}function pk(n,t){var r=t.text.className,i=ya(n,t);t.text==t.node&&(t.node=i.pre);t.text.parentNode.replaceChild(i.pre,t.text);t.text=i.pre;i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,ch(n,t)):r&&(t.text.className=r)}function ch(n,t){yk(n,t);t.line.wrapClass?of(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""}function pa(n,t,r,u){var c,f,l,e,s,o,h;if((t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass)&&(c=of(t),t.gutterBackground=i("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(n.options.fixedGutter?u.fixedPos:-u.gutterTotalWidth)+"px; width: "+u.gutterTotalWidth+"px"),n.display.input.setUneditable(t.gutterBackground),c.insertBefore(t.gutterBackground,t.text)),f=t.line.gutterMarkers,(n.options.lineNumbers||f)&&(l=of(t),e=t.gutter=i("div",null,"CodeMirror-gutter-wrapper","left: "+(n.options.fixedGutter?u.fixedPos:-u.gutterTotalWidth)+"px"),n.display.input.setUneditable(e),l.insertBefore(e,t.text),t.line.gutterClass&&(e.className+=" "+t.line.gutterClass),!n.options.lineNumbers||f&&f["CodeMirror-linenumbers"]||(t.lineNumber=e.appendChild(i("div",vs(n.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+u.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+n.display.lineNumInnerWidth+"px"))),f))for(s=0;s<n.options.gutters.length;++s)o=n.options.gutters[s],h=f.hasOwnProperty(o)&&f[o],h&&e.appendChild(i("div",[h],"CodeMirror-gutter-elt","left: "+u.gutterLeft[o]+"px; width: "+u.gutterWidth[o]+"px"))}function wk(n,t,i){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,u=void 0;r;r=u)u=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);wa(n,t,i)}function bk(n,t,i,r){var u=ya(n,t);return t.text=t.node=u.pre,u.bgClass&&(t.bgClass=u.bgClass),u.textClass&&(t.textClass=u.textClass),ch(n,t),pa(n,t,i,r),wa(n,t,r),t.node}function wa(n,t,i){if(ba(n,t.line,t,i,!0),t.rest)for(var r=0;r<t.rest.length;r++)ba(n,t.rest[r],t,i,!1)}function ba(n,t,r,u,f){var e,o;if(t.widgets)for(var h=of(r),s=0,c=t.widgets;s<c.length;++s)e=c[s],o=i("div",[e.node],"CodeMirror-linewidget"),e.handleMouseEvents||o.setAttribute("cm-ignore-events","true"),kk(e,o,r,u),n.display.input.setUneditable(o),f&&e.above?h.insertBefore(o,r.gutter||r.text):h.appendChild(o),g(e,"redraw")}function kk(n,t,i,r){if(n.noHScroll){(i.alignable||(i.alignable=[])).push(t);var u=r.wrapperWidth;t.style.left=r.fixedPos+"px";n.coverGutter||(u-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px");t.style.width=u+"px"}n.coverGutter&&(t.style.zIndex=5,t.style.position="relative",n.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function sf(n){var t,r;return null!=n.height?n.height:(t=n.doc.cm,!t)?0:(li(document.body,n.node)||(r="position: relative;",n.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),n.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),ct(t.display.measure,i("div",[n.node],null,r))),n.height=n.node.parentNode.offsetHeight)}function si(n,t){for(var i=fh(t);i!=n.wrapper;i=i.parentNode)if(!i||1==i.nodeType&&"true"==i.getAttribute("cm-ignore-events")||i.parentNode==n.sizer&&i!=n.mover)return!0}function ro(n){return n.lineSpace.offsetTop}function lh(n){return n.mover.offsetHeight-n.lineSpace.offsetHeight}function ka(n){if(n.cachedPaddingH)return n.cachedPaddingH;var r=ct(n.measure,i("pre","x")),u=window.getComputedStyle?window.getComputedStyle(r):r.currentStyle,t={left:parseInt(u.paddingLeft),right:parseInt(u.paddingRight)};return isNaN(t.left)||isNaN(t.right)||(n.cachedPaddingH=t),t}function ti(n){return yw-n.display.nativeBarWidth}function fr(n){return n.display.scroller.clientWidth-ti(n)-n.display.barWidth}function ah(n){return n.display.scroller.clientHeight-ti(n)-n.display.barHeight}function dk(n,t,i){var f=n.options.lineWrapping,h=f&&fr(n),e,u,r,o,s;if(!t.measure.heights||f&&t.measure.width!=h){if(e=t.measure.heights=[],f)for(t.measure.width=h,u=t.text.firstChild.getClientRects(),r=0;r<u.length-1;r++)o=u[r],s=u[r+1],Math.abs(o.bottom-s.bottom)>2&&e.push((o.bottom+s.top)/2-i.top);e.push(i.bottom-i.top)}}function da(n,t,i){var r,u;if(n.line==t)return{map:n.measure.map,cache:n.measure.cache};for(r=0;r<n.rest.length;r++)if(n.rest[r]==t)return{map:n.measure.maps[r],cache:n.measure.caches[r]};for(u=0;u<n.rest.length;u++)if(s(n.rest[u])>i)return{map:n.measure.maps[u],cache:n.measure.caches[u],before:!0}}function gk(n,t){var r,i,u;return t=ni(t),r=s(t),i=n.display.externalMeasured=new aa(n.doc,t,r),i.lineN=r,u=i.built=ca(n,i),i.text=u.pre,ct(n.display.lineMeasure,u.pre),i}function ga(n,t,i,r){return er(n,hf(n,t),i,r)}function vh(n,t){if(t>=n.display.viewFrom&&t<n.display.viewTo)return n.display.view[hr(n,t)];var i=n.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size)return i}function hf(n,t){var u=s(t),i=vh(n,u),r;return i&&!i.text?i=null:i&&i.changes&&(va(n,i,u,wh(n)),n.curOp.forceUpdate=!0),i||(i=gk(n,t)),r=da(i,t,u),{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function er(n,t,i,r,u){t.before&&(i=-1);var f,e=i+(r||"");return t.cache.hasOwnProperty(e)?f=t.cache[e]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(dk(n,t.view,t.rect),t.hasHeights=!0),f=td(n,t,i,r),f.bogus||(t.cache[e]=f)),{left:f.left,right:f.right,top:u?f.rtop:f.top,bottom:u?f.rbottom:f.bottom}}function nv(n,t,i){for(var s,u,h,o,e,f,r=0;r<n.length;r+=3)if(e=n[r],f=n[r+1],t<e?(u=0,h=1,o="left"):t<f?(u=t-e,h=u+1):(r==n.length-3||t==f&&n[r+3]>t)&&(h=f-e,u=h-1,t>=f&&(o="right")),null!=u){if(s=n[r+2],e==f&&i==(s.insertLeft?"left":"right")&&(o=i),"left"==i&&0==u)for(;r&&n[r-2]==n[r-3]&&n[r-1].insertLeft;)s=n[(r-=3)+2],o="left";if("right"==i&&u==f-e)for(;r<n.length-3&&n[r+3]==n[r+4]&&!n[r+5].insertLeft;)s=n[(r+=3)+2],o="right";break}return{node:s,start:u,end:h,collapse:o,coverStart:e,coverEnd:f}}function nd(n,t){var i=kw,r,u;if("left"==t)for(r=0;r<n.length&&(i=n[r]).left==i.right;r++);else for(u=n.length-1;u>=0&&(i=n[u]).left==i.right;u--);return i}function td(n,t,i,r){var u,f=nv(t.map,i,r),s=f.node,o=f.start,h=f.end,v=f.collapse,w,b,c;if(3==s.nodeType){for(w=0;w<4;w++){for(;o&&ls(t.line.text.charAt(f.coverStart+o));)--o;for(;f.coverStart+h<f.coverEnd&&ls(t.line.text.charAt(f.coverStart+h));)++h;if(u=e&&l<9&&0==o&&h==f.coverEnd-f.coverStart?s.parentNode.getBoundingClientRect():nd(au(s,o,h).getClientRects(),r),u.left||u.right||0==o)break;h=o;o-=1;v="right"}e&&l<11&&(u=id(n.display.measure,u))}else o>0&&(v=r="right"),u=n.options.lineWrapping&&(b=s.getClientRects()).length>1?b["right"==r?b.length-1:0]:s.getBoundingClientRect();e&&l<9&&!o&&(!u||!u.left&&!u.right)&&(c=s.parentNode.getClientRects()[0],u=c?{left:c.left,right:c.left+lf(n.display),top:c.top,bottom:c.bottom}:kw);for(var k=u.top-t.rect.top,d=u.bottom-t.rect.top,g=(k+d)/2,y=t.view.measure.heights,a=0;a<y.length-1&&!(g<y[a]);a++);var nt=a?y[a-1]:0,tt=y[a],p={left:("right"==v?u.right:u.left)-t.rect.left,right:("left"==v?u.left:u.right)-t.rect.left,top:nt,bottom:tt};return u.left||u.right||(p.bogus=!0),n.options.singleCursorHeightPerLine||(p.rtop=k,p.rbottom=d),p}function id(n,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!db(n))return t;var i=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*r,bottom:t.bottom*r}}function tv(n){if(n.measure&&(n.measure.cache={},n.measure.heights=null,n.rest))for(var t=0;t<n.rest.length;t++)n.measure.caches[t]={}}function iv(n){n.display.externalMeasure=null;ci(n.display.lineMeasure);for(var t=0;t<n.display.view.length;t++)tv(n.display.view[t])}function cf(n){iv(n);n.display.cachedCharWidth=n.display.cachedTextHeight=n.display.cachedPaddingH=null;n.options.lineWrapping||(n.display.maxLineChanged=!0);n.display.lineNumChars=null}function rv(){return bo&&ko?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function uv(){return bo&&ko?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function gr(n,t,i,r,u){var e,o,f,s,h;if(!u&&t.widgets)for(e=0;e<t.widgets.length;++e)t.widgets[e].above&&(o=sf(t.widgets[e]),i.top+=o,i.bottom+=o);return"line"==r?i:(r||(r="local"),f=ei(t),("local"==r?f+=ro(n.display):f-=n.display.viewOffset,"page"==r||"window"==r)&&(s=n.display.lineSpace.getBoundingClientRect(),f+=s.top+("window"==r?0:uv()),h=s.left+("window"==r?0:rv()),i.left+=h,i.right+=h),i.top+=f,i.bottom+=f,i)}function fv(n,t,i){var r,u,f,e;return"div"==i?t:(r=t.left,u=t.top,"page"==i?(r-=rv(),u-=uv()):"local"!=i&&i||(f=n.display.sizer.getBoundingClientRect(),r+=f.left,u+=f.top),e=n.display.lineSpace.getBoundingClientRect(),{left:r-e.left,top:u-e.top})}function yh(n,i,r,u,f){return u||(u=t(n.doc,i.line)),gr(n,u,ga(n,u,i.ch,f),r)}function pt(n,i,r,u,f,e){function c(t,i){var o=er(n,f,t,i?"right":"left",e);return i?o.left=o.right:o.right=o.left,gr(n,u,o,r)}function l(n,t,i){var r=h[t],u=r.level%2!=0;return c(i?n-1:n,u!=i)}u=u||t(n.doc,i.line);f||(f=hf(n,u));var h=ai(u,n.doc.direction),o=i.ch,s=i.sticky;if(o>=u.text.length?(o=u.text.length,s="before"):o<=0&&(o=0,s="after"),!h)return c("before"==s?o-1:o,"before"==s);var y=gs(h,o,s),a=oe,v=l(o,y,"before"==s);return null!=a&&(v.other=l(o,a,"before"!=s)),v}function ev(n,i){var r=0,u,e;return i=f(n.doc,i),n.options.lineWrapping||(r=lf(n.display)*i.ch),u=t(n.doc,i.line),e=ei(u)+ro(n.display),{left:r,right:r,top:e,bottom:e+u.height}}function ov(t,i,r,u,f){var e=n(t,i,r);return e.xRel=f,u&&(e.outside=!0),e}function ph(n,i,r){var u=n.doc,f,h,e;if(r+=n.display.viewOffset,r<0)return ov(u.first,0,null,!0,-1);if(f=rr(u,r),h=u.first+u.size-1,f>h)return ov(u.first+u.size-1,t(u,h).text.length,null,!0,1);for(i<0&&(i=0),e=t(u,f);;){var o=ud(n,e,f,i,r),c=uf(e),l=c&&c.find(0,!0);if(!c||!(o.ch>l.from.ch||o.ch==l.from.ch&&o.xRel>0))return o;f=s(e=l.to.line)}}function sv(n,t,i,r){var f=function(r){return gr(n,t,er(n,i,r),"line")},u=t.text.length,e=pe(function(n){return f(n-1).bottom<=r},u,0);return u=pe(function(n){return f(n).top>r},e,u),{begin:e,end:u}}function rd(n,t,i,r){var u=gr(n,t,er(n,i,r),"line").top;return sv(n,t,i,u)}function ud(t,i,r,u,f){var v,c,l;f-=ei(i);var e,a=0,o=i.text.length,h=hf(t,i),k=ai(i,t.doc.direction);if(k){t.options.lineWrapping&&(v=sv(t,i,h,f),a=v.begin,o=v.end,v);e=new n(r,a);var y,p,w=pt(t,e,"line",i,h).left,b=w<u?1:-1,s=w-u;do{if(y=s,p=e,e=dl(t,i,e,b),null==e||e.ch<a||o<=("before"==e.sticky?e.ch-1:e.ch)){e=p;break}s=pt(t,e,"line",i,h).left-u}while(b<0!=s<0&&Math.abs(s)<=Math.abs(y));if(Math.abs(s)>Math.abs(y)){if(s<0==y<0)throw new Error("Broke out of infinite loop in coordsCharInner");e=p}}else c=pe(function(n){var r=gr(t,i,er(t,h,n),"line");return r.top>f?(o=Math.min(n,o),!0):!(r.bottom<=f)&&(r.left>u||!(r.right<u)&&u-r.left<r.right-u)},a,o),c=sl(i.text,c,1),e=new n(r,c,c==o?"before":"after");return l=pt(t,e,"line",i,h),(f<l.top||l.bottom<f)&&(e.outside=!0),e.xRel=u<l.left?-1:u>l.right?1:0,e}function or(n){var r,t;if(null!=n.cachedTextHeight)return n.cachedTextHeight;if(null==wr){for(wr=i("pre"),r=0;r<49;++r)wr.appendChild(document.createTextNode("x")),wr.appendChild(i("br"));wr.appendChild(document.createTextNode("x"))}return ct(n.measure,wr),t=wr.offsetHeight/50,t>3&&(n.cachedTextHeight=t),ci(n.measure),t||1}function lf(n){var r,f,u,t;return null!=n.cachedCharWidth?n.cachedCharWidth:(r=i("span","xxxxxxxxxx"),f=i("pre",[r]),ct(n.measure,f),u=r.getBoundingClientRect(),t=(u.right-u.left)/10,t>2&&(n.cachedCharWidth=t),t||10)}function wh(n){for(var i=n.display,u={},f={},e=i.gutters.clientLeft,t=i.gutters.firstChild,r=0;t;t=t.nextSibling,++r)u[n.options.gutters[r]]=t.offsetLeft+t.clientLeft+e,f[n.options.gutters[r]]=t.clientWidth;return{fixedPos:bh(i),gutterTotalWidth:i.gutters.offsetWidth,gutterLeft:u,gutterWidth:f,wrapperWidth:i.wrapper.clientWidth}}function bh(n){return n.scroller.getBoundingClientRect().left-n.sizer.getBoundingClientRect().left}function hv(n){var t=or(n.display),i=n.options.lineWrapping,r=i&&Math.max(5,n.display.scroller.clientWidth/lf(n.display)-3);return function(u){var e,f;if(ur(n.doc,u))return 0;if(e=0,u.widgets)for(f=0;f<u.widgets.length;f++)u.widgets[f].height&&(e+=u.widgets[f].height);return i?e+(Math.ceil(u.text.length/r)||1)*t:e+t}}function kh(n){var t=n.doc,i=hv(n);t.iter(function(n){var t=i(n);t!=n.height&&gt(n,t)})}function sr(i,r,u,f){var a=i.display,s,c,h,o,e,l;if(!u&&"true"==fh(r).getAttribute("cm-not-content"))return null;h=a.lineSpace.getBoundingClientRect();try{s=r.clientX-h.left;c=r.clientY-h.top}catch(i){return null}return e=ph(i,s,c),f&&1==e.xRel&&(o=t(i.doc,e.line).text).length==e.ch&&(l=at(o,o.length,i.options.tabSize)-o.length,e=n(e.line,Math.max(0,Math.round((s-ka(i.display).left)/lf(i.display))-l))),e}function hr(n,t){if(t>=n.display.viewTo||(t-=n.display.viewFrom,t<0))return null;for(var r=n.display.view,i=0;i<r.length;i++)if(t-=r[i].size,t<0)return i}function af(n){n.display.input.showSelection(n.display.input.prepareSelection())}function cv(n,t){for(var i,e,u=n.doc,f={},o=f.cursors=document.createDocumentFragment(),s=f.selection=document.createDocumentFragment(),r=0;r<u.sel.ranges.length;r++)(t!==!1||r!=u.sel.primIndex)&&(i=u.sel.ranges[r],i.from().line>=n.display.viewTo||i.to().line<n.display.viewFrom||(e=i.empty(),(e||n.options.showCursorWhenSelecting)&&lv(n,i.head,o),e||fd(n,i,s)));return f}function lv(n,t,r){var u=pt(n,t,"div",null,null,!n.options.singleCursorHeightPerLine),e=r.appendChild(i("div","","CodeMirror-cursor")),f;(e.style.left=u.left+"px",e.style.top=u.top+"px",e.style.height=Math.max(0,u.bottom-u.top)*n.options.cursorHeight+"px",u.other)&&(f=r.appendChild(i("div","","CodeMirror-cursor CodeMirror-secondarycursor")),f.style.display="",f.style.left=u.other.left+"px",f.style.top=u.other.top+"px",f.style.height=.85*(u.other.bottom-u.other.top)+"px")}function fd(r,u,f){function o(n,t,r,u){t<0&&(t=0);t=Math.round(t);u=Math.round(u);w.appendChild(i("div",null,"CodeMirror-selected","position: absolute; left: "+n+"px;\n                             top: "+t+"px; width: "+(null==r?k-n:r)+"px;\n                             height: "+(u-t)+"px"))}function v(i,u,f){function l(t,u){return yh(r,n(i,t),"div",c,u)}var e,s,c=t(a,i),v=c.text.length;return wb(ai(c,a.direction),u||0,null==f?v:f,function(n,t,i){var r,a,y,c=l(n,"left"),p;n==t?(r=c,a=y=c.left):((r=l(t-1,"right"),"rtl"==i)&&(p=c,c=r,r=p),a=c.left,y=r.right);null==u&&0==n&&(a=h);r.top-c.top>3&&(o(a,c.top,null,c.bottom),a=h,c.bottom<r.top&&o(a,c.bottom,null,r.top));null==f&&t==v&&(y=k);(!e||c.top<e.top||c.top==e.top&&c.left<e.left)&&(e=c);(!s||r.bottom>s.bottom||r.bottom==s.bottom&&r.right>s.right)&&(s=r);a<h+1&&(a=h);o(a,r.top,y-a,r.bottom)}),{start:e,end:s}}var p=r.display,a=r.doc,w=document.createDocumentFragment(),b=ka(r.display),h=b.left,k=Math.max(p.sizerWidth,fr(r)-p.sizer.offsetLeft)-b.right,c=u.from(),l=u.to();if(c.line==l.line)v(c.line,c.ch,l.ch);else{var d=t(a,c.line),g=t(a,l.line),y=ni(d)==ni(g),e=v(c.line,c.ch,y?d.text.length+1:null).end,s=v(l.line,y?0:null,l.ch).start;y&&(e.top<s.top-2?(o(e.right,e.top,null,e.bottom),o(h,s.top,s.left,s.bottom)):o(e.right,e.top,s.left-e.right,e.bottom));e.bottom<s.top&&o(h,e.bottom,null,s.top)}f.appendChild(w)}function dh(n){var t,i;n.state.focused&&(t=n.display,clearInterval(t.blinker),i=!0,t.cursorDiv.style.visibility="",n.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},n.options.cursorBlinkRate):n.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden"))}function av(n){n.state.focused||(n.display.input.focus(),gh(n))}function vv(n){n.state.delayingBlurEvent=!0;setTimeout(function(){n.state.delayingBlurEvent&&(n.state.delayingBlurEvent=!1,vf(n))},100)}function gh(n,t){n.state.delayingBlurEvent&&(n.state.delayingBlurEvent=!1);"nocursor"!=n.options.readOnly&&(n.state.focused||(v(n,"focus",n,t),n.state.focused=!0,nr(n.display.wrapper,"CodeMirror-focused"),n.curOp||n.display.selForContextMenu==n.doc.sel||(n.display.input.reset(),nt&&setTimeout(function(){return n.display.input.reset(!0)},20)),n.display.input.receivedFocus()),dh(n))}function vf(n,t){n.state.delayingBlurEvent||(n.state.focused&&(v(n,"blur",n,t),n.state.focused=!1,vr(n.display.wrapper,"CodeMirror-focused")),clearInterval(n.display.blinker),setTimeout(function(){n.state.focused||(n.display.shift=!1)},150))}function uo(n){for(var t,i,o,s,h,u,r=n.display,c=r.lineDiv.offsetTop,f=0;f<r.view.length;f++)if(t=r.view[f],i=void 0,!t.hidden&&(e&&l<8?(o=t.node.offsetTop+t.node.offsetHeight,i=o-c,c=o):(s=t.node.getBoundingClientRect(),i=s.bottom-s.top),h=t.line.height-i,i<2&&(i=or(r)),(h>.001||h<-.001)&&(gt(t.line,i),yv(t.line),t.rest)))for(u=0;u<t.rest.length;u++)yv(t.rest[u])}function yv(n){if(n.widgets)for(var t=0;t<n.widgets.length;++t)n.widgets[t].height=n.widgets[t].node.parentNode.offsetHeight}function nc(n,i,r){var f=r&&null!=r.top?Math.max(0,r.top):n.scroller.scrollTop,o,s;f=Math.floor(f-ro(n));var h=r&&null!=r.bottom?r.bottom:f+n.wrapper.clientHeight,u=rr(i,f),e=rr(i,h);return r&&r.ensure&&(o=r.ensure.from.line,s=r.ensure.to.line,o<u?(u=o,e=rr(i,ei(t(i,o))+n.wrapper.clientHeight)):Math.min(s,i.lastLine())>=e&&(u=rr(i,ei(t(i,s))-n.wrapper.clientHeight),e=s)),{from:u,to:Math.max(e,u+1)}}function pv(n){var i=n.display,r=i.view,u,f;if(i.alignWidgets||i.gutters.firstChild&&n.options.fixedGutter){for(var o=bh(i)-i.scroller.scrollLeft+n.doc.scrollLeft,s=i.gutters.offsetWidth,e=o+"px",t=0;t<r.length;t++)if(!r[t].hidden&&(n.options.fixedGutter&&(r[t].gutter&&(r[t].gutter.style.left=e),r[t].gutterBackground&&(r[t].gutterBackground.style.left=e)),u=r[t].alignable,u))for(f=0;f<u.length;f++)u[f].style.left=e;n.options.fixedGutter&&(i.gutters.style.left=o+s+"px")}}function wv(n){if(!n.options.lineNumbers)return!1;var u=n.doc,r=vs(n.options,u.first+u.size-1),t=n.display;if(r.length!=t.lineNumChars){var f=t.measure.appendChild(i("div",[i("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=f.firstChild.offsetWidth,o=f.offsetWidth-e;return t.lineGutter.style.width="",t.lineNumInnerWidth=Math.max(e,t.lineGutter.offsetWidth-o)+1,t.lineNumWidth=t.lineNumInnerWidth+o,t.lineNumChars=t.lineNumInnerWidth?r.length:-1,t.lineGutter.style.width=t.lineNumWidth+"px",fc(n),!0}return!1}function ed(n,t){var u;if(!p(n,"scrollCursorIntoView")){var f=n.display,e=f.sizer.getBoundingClientRect(),r=null;(t.top+e.top<0?r=!0:t.bottom+e.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null==r||itt)||(u=i("div","",null,"position: absolute;\n                         top: "+(t.top-f.viewOffset-ro(n.display))+"px;\n                         height: "+(t.bottom-t.top+ti(n)+f.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;"),n.display.lineSpace.appendChild(u),u.scrollIntoView(r),n.display.lineSpace.removeChild(u))}}function od(n,t,i,r){var o,s;for(null==r&&(r=0),s=0;s<5;s++){var h=!1,u=pt(n,t),f=i&&i!=t?pt(n,i):u;o={left:Math.min(u.left,f.left),top:Math.min(u.top,f.top)-r,right:Math.max(u.left,f.left),bottom:Math.max(u.bottom,f.bottom)+r};var e=tc(n,o),c=n.doc.scrollTop,l=n.doc.scrollLeft;if(null!=e.scrollTop&&(pf(n,e.scrollTop),Math.abs(n.doc.scrollTop-c)>1&&(h=!0)),null!=e.scrollLeft&&(cr(n,e.scrollLeft),Math.abs(n.doc.scrollLeft-l)>1&&(h=!0)),!h)break}return o}function sd(n,t){var i=tc(n,t);null!=i.scrollTop&&pf(n,i.scrollTop);null!=i.scrollLeft&&cr(n,i.scrollLeft)}function tc(n,t){var r=n.display,h=or(n.display),o;t.top<0&&(t.top=0);var e=n.curOp&&null!=n.curOp.scrollTop?n.curOp.scrollTop:r.scroller.scrollTop,u=ah(n),i={};t.bottom-t.top>u&&(t.bottom=t.top+u);var c=n.doc.height+lh(r),a=t.top<h,v=t.bottom>c-h;t.top<e?i.scrollTop=a?0:t.top:t.bottom>e+u&&(o=Math.min(t.top,(v?c:t.bottom)-u),o!=e&&(i.scrollTop=o));var l=n.curOp&&null!=n.curOp.scrollLeft?n.curOp.scrollLeft:r.scroller.scrollLeft,f=fr(n)-(n.options.fixedGutter?r.gutters.offsetWidth:0),s=t.right-t.left>f;return s&&(t.right=t.left+f),t.left<10?i.scrollLeft=0:t.left<l?i.scrollLeft=Math.max(0,t.left-(s?0:10)):t.right>f+l-3&&(i.scrollLeft=t.right+(s?0:10)-f),i}function ic(n,t){null!=t&&(fo(n),n.curOp.scrollTop=(null==n.curOp.scrollTop?n.doc.scrollTop:n.curOp.scrollTop)+t)}function nu(t){fo(t);var i=t.getCursor(),r=i,u=i;t.options.lineWrapping||(r=i.ch?n(i.line,i.ch-1):i,u=n(i.line,i.ch+1));t.curOp.scrollToPos={from:r,to:u,margin:t.options.cursorScrollMargin}}function yf(n,t,i){null==t&&null==i||fo(n);null!=t&&(n.curOp.scrollLeft=t);null!=i&&(n.curOp.scrollTop=i)}function hd(n,t){fo(n);n.curOp.scrollToPos=t}function fo(n){var t=n.curOp.scrollToPos,i,r;t&&(n.curOp.scrollToPos=null,i=ev(n,t.from),r=ev(n,t.to),bv(n,i,r,t.margin))}function bv(n,t,i,r){var u=tc(n,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-r,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+r});yf(n,u.scrollLeft,u.scrollTop)}function pf(n,t){Math.abs(n.doc.scrollTop-t)<2||(bi||uc(n,{top:t}),kv(n,t,!0),bi&&uc(n),bf(n,100))}function kv(n,t,i){t=Math.min(n.display.scroller.scrollHeight-n.display.scroller.clientHeight,t);(n.display.scroller.scrollTop!=t||i)&&(n.doc.scrollTop=t,n.display.scrollbars.setScrollTop(t),n.display.scroller.scrollTop!=t&&(n.display.scroller.scrollTop=t))}function cr(n,t,i,r){t=Math.min(t,n.display.scroller.scrollWidth-n.display.scroller.clientWidth);(i?t==n.doc.scrollLeft:Math.abs(n.doc.scrollLeft-t)<2)&&!r||(n.doc.scrollLeft=t,pv(n),n.display.scroller.scrollLeft!=t&&(n.display.scroller.scrollLeft=t),n.display.scrollbars.setScrollLeft(t))}function wf(n){var t=n.display,i=t.gutters.offsetWidth,r=Math.round(n.doc.height+lh(n.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:n.options.fixedGutter?i:0,docHeight:r,scrollHeight:r+ti(n)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}}function tu(n,t){var i,r,u;for(t||(t=wf(n)),i=n.display.barWidth,r=n.display.barHeight,dv(n,t),u=0;u<4&&i!=n.display.barWidth||r!=n.display.barHeight;u++)i!=n.display.barWidth&&n.options.lineWrapping&&uo(n),dv(n,wf(n)),i=n.display.barWidth,r=n.display.barHeight}function dv(n,t){var i=n.display,r=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=r.right)+"px";i.sizer.style.paddingBottom=(i.barHeight=r.bottom)+"px";i.heightForcer.style.borderBottom=r.bottom+"px solid transparent";r.right&&r.bottom?(i.scrollbarFiller.style.display="block",i.scrollbarFiller.style.height=r.bottom+"px",i.scrollbarFiller.style.width=r.right+"px"):i.scrollbarFiller.style.display="";r.bottom&&n.options.coverGutterNextToScrollbar&&n.options.fixedGutter?(i.gutterFiller.style.display="block",i.gutterFiller.style.height=r.bottom+"px",i.gutterFiller.style.width=t.gutterWidth+"px"):i.gutterFiller.style.display=""}function gv(n){n.display.scrollbars&&(n.display.scrollbars.clear(),n.display.scrollbars.addClass&&vr(n.display.wrapper,n.display.scrollbars.addClass));n.display.scrollbars=new dw[n.options.scrollbarStyle](function(t){n.display.wrapper.insertBefore(t,n.display.scrollbarFiller);r(t,"mousedown",function(){n.state.focused&&setTimeout(function(){return n.display.input.focus()},0)});t.setAttribute("cm-not-content","true")},function(t,i){"horizontal"==i?cr(n,t):pf(n,t)},n);n.display.scrollbars.addClass&&nr(n.display.wrapper,n.display.scrollbars.addClass)}function iu(n){n.curOp={cm:n,viewChanged:!1,startHeight:n.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++att};ck(n.curOp)}function ru(n){var t=n.curOp;ak(t,function(n){for(var t=0;t<n.ops.length;t++)n.ops[t].cm.curOp=null;cd(n)})}function cd(n){for(var r,u,f,e,t=n.ops,i=0;i<t.length;i++)ld(t[i]);for(r=0;r<t.length;r++)ad(t[r]);for(u=0;u<t.length;u++)vd(t[u]);for(f=0;f<t.length;f++)yd(t[f]);for(e=0;e<t.length;e++)pd(t[e])}function ld(n){var t=n.cm,i=t.display;kd(t);n.updateMaxLine&&ds(t);n.mustUpdate=n.viewChanged||n.forceUpdate||null!=n.scrollTop||n.scrollToPos&&(n.scrollToPos.from.line<i.viewFrom||n.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping;n.update=n.mustUpdate&&new ns(t,n.mustUpdate&&{top:n.scrollTop,ensure:n.scrollToPos},n.forceUpdate)}function ad(n){n.updatedDisplay=n.mustUpdate&&rc(n.cm,n.update)}function vd(n){var t=n.cm,i=t.display;n.updatedDisplay&&uo(t);n.barMeasure=wf(t);i.maxLineChanged&&!t.options.lineWrapping&&(n.adjustWidthTo=ga(t,i.maxLine,i.maxLine.text.length).left+3,t.display.sizerWidth=n.adjustWidthTo,n.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+n.adjustWidthTo+ti(t)+t.display.barWidth),n.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+n.adjustWidthTo-fr(t)));(n.updatedDisplay||n.selectionChanged)&&(n.preparedSelection=i.input.prepareSelection(n.focus))}function yd(n){var t=n.cm,i;null!=n.adjustWidthTo&&(t.display.sizer.style.minWidth=n.adjustWidthTo+"px",n.maxScrollLeft<t.doc.scrollLeft&&cr(t,Math.min(t.display.scroller.scrollLeft,n.maxScrollLeft),!0),t.display.maxLineChanged=!1);i=n.focus&&n.focus==fi()&&(!document.hasFocus||document.hasFocus());n.preparedSelection&&t.display.input.showSelection(n.preparedSelection,i);(n.updatedDisplay||n.startHeight!=t.doc.height)&&tu(t,n.barMeasure);n.updatedDisplay&&ec(t,n.barMeasure);n.selectionChanged&&dh(t);t.state.focused&&n.updateInput&&t.display.input.reset(n.typing);i&&av(n.cm)}function pd(n){var t=n.cm,o=t.display,s=t.doc,h,i,r,u,e;if((n.updatedDisplay&&ty(t,n.update),null==o.wheelStartX||null==n.scrollTop&&null==n.scrollLeft&&!n.scrollToPos||(o.wheelStartX=o.wheelStartY=null),null!=n.scrollTop&&kv(t,n.scrollTop,n.forceScroll),null!=n.scrollLeft&&cr(t,n.scrollLeft,!0,!0),n.scrollToPos)&&(h=od(t,f(s,n.scrollToPos.from),f(s,n.scrollToPos.to),n.scrollToPos.margin),ed(t,h)),i=n.maybeHiddenMarkers,r=n.maybeUnhiddenMarkers,i)for(u=0;u<i.length;++u)i[u].lines.length||v(i[u],"hide");if(r)for(e=0;e<r.length;++e)r[e].lines.length&&v(r[e],"unhide");o.wrapper.offsetHeight&&(s.scrollTop=t.display.scroller.scrollTop);n.changeObjs&&v(t,"changes",t,n.changeObjs);n.update&&n.update.finish()}function ot(n,t){if(n.curOp)return t();iu(n);try{return t()}finally{ru(n)}}function w(n,t){return function(){if(n.curOp)return t.apply(n,arguments);iu(n);try{return t.apply(n,arguments)}finally{ru(n)}}}function ft(n){return function(){if(this.curOp)return n.apply(this,arguments);iu(this);try{return n.apply(this,arguments)}finally{ru(this)}}}function b(n){return function(){var t=this.cm;if(!t||t.curOp)return n.apply(this,arguments);iu(t);try{return n.apply(this,arguments)}finally{ru(t)}}}function et(n,t,i,r){var u,e,o,s,h,f;null==t&&(t=n.doc.first);null==i&&(i=n.doc.first+n.doc.size);r||(r=0);u=n.display;(r&&i<u.viewTo&&(null==u.updateLineNumbers||u.updateLineNumbers>t)&&(u.updateLineNumbers=t),n.curOp.viewChanged=!0,t>=u.viewTo)?di&&bs(n.doc,t)<u.viewTo&&yi(n):i<=u.viewFrom?di&&kl(n.doc,i+r)>u.viewFrom?yi(n):(u.viewFrom+=r,u.viewTo+=r):t<=u.viewFrom&&i>=u.viewTo?yi(n):t<=u.viewFrom?(e=eo(n,i,i+r,1),e?(u.view=u.view.slice(e.index),u.viewFrom=e.lineN,u.viewTo+=r):yi(n)):i>=u.viewTo?(o=eo(n,t,t,-1),o?(u.view=u.view.slice(0,o.index),u.viewTo=o.lineN):yi(n)):(s=eo(n,t,t,-1),h=eo(n,i,i+r,1),s&&h?(u.view=u.view.slice(0,s.index).concat(io(n,s.lineN,h.lineN)).concat(u.view.slice(h.index)),u.viewTo+=r):yi(n));f=u.externalMeasured;f&&(i<f.lineN?f.lineN+=r:t<f.lineN+f.size&&(u.externalMeasured=null))}function vi(n,t,i){var r,u,f,e;n.curOp.viewChanged=!0;r=n.display;u=n.display.externalMeasured;(u&&t>=u.lineN&&t<u.lineN+u.size&&(r.externalMeasured=null),t<r.viewFrom||t>=r.viewTo)||(f=r.view[hr(n,t)],null!=f.node&&(e=f.changes||(f.changes=[]),d(e,i)==-1&&e.push(i)))}function yi(n){n.display.viewFrom=n.display.viewTo=n.doc.first;n.display.view=[];n.display.viewOffset=0}function eo(n,t,i,r){var o,u=hr(n,t),f=n.display.view,e,s;if(!di||i==n.doc.first+n.doc.size)return{index:u,lineN:i};for(e=n.display.viewFrom,s=0;s<u;s++)e+=f[s].size;if(e!=t){if(r>0){if(u==f.length-1)return null;o=e+f[u].size-t;u++}else o=e-t;t+=o;i+=o}for(;bs(n.doc,i)!=i;){if(u==(r<0?0:f.length-1))return null;i+=r*f[u-(r<0?1:0)].size;u+=r}return{index:u,lineN:i}}function wd(n,t,i){var r=n.display,u=r.view;0==u.length||t>=r.viewTo||i<=r.viewFrom?(r.view=io(n,t,i),r.viewFrom=t):(r.viewFrom>t?r.view=io(n,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(hr(n,t))),r.viewFrom=t,r.viewTo<i?r.view=r.view.concat(io(n,r.viewTo,i)):r.viewTo>i&&(r.view=r.view.slice(0,hr(n,i))));r.viewTo=i}function ny(n){for(var t,r=n.display.view,u=0,i=0;i<r.length;i++)t=r[i],t.hidden||t.node&&!t.changes||++u;return u}function bf(n,t){n.doc.mode.startState&&n.doc.frontier<n.display.viewTo&&n.state.highlight.set(t,os(bd,n))}function bd(n){var t=n.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=n.display.viewTo)){var u=+new Date+n.options.workTime,i=oi(t.mode,ef(n,t.frontier)),r=[];t.iter(t.frontier,Math.min(t.first+t.size,n.display.viewTo+500),function(f){var o,e,c,s;if(t.frontier>=n.display.viewFrom){var h=f.styles,l=f.text.length>n.options.maxHighlightLength,a=ra(n,f,l?oi(t.mode,i):i,!0);for(f.styles=a.styles,o=f.styleClasses,e=a.classes,e?f.styleClasses=e:o&&(f.styleClasses=null),c=!h||h.length!=f.styles.length||o!=e&&(!o||!e||o.bgClass!=e.bgClass||o.textClass!=e.textClass),s=0;!c&&s<h.length;++s)c=h[s]!=f.styles[s];c&&r.push(t.frontier);f.stateAfter=l?i:oi(t.mode,i)}else f.text.length<=n.options.maxHighlightLength&&sh(n,f.text,i),f.stateAfter=t.frontier%5==0?oi(t.mode,i):null;if(++t.frontier,+new Date>u)return bf(n,n.options.workDelay),!0});r.length&&ot(n,function(){for(var t=0;t<r.length;t++)vi(n,r[t],"text")})}}function kd(n){var t=n.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=ti(n)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=ti(n)+"px",t.scrollbarsClipped=!0)}function dd(n){var r,i,t;return n.hasFocus()?null:(r=fi(),!r||!li(n.display.lineDiv,r))?null:(i={activeElt:r},window.getSelection&&(t=window.getSelection(),t.anchorNode&&t.extend&&li(n.display.lineDiv,t.anchorNode)&&(i.anchorNode=t.anchorNode,i.anchorOffset=t.anchorOffset,i.focusNode=t.focusNode,i.focusOffset=t.focusOffset)),i)}function gd(n){if(n&&n.activeElt&&n.activeElt!=fi()&&(n.activeElt.focus(),n.anchorNode&&li(document.body,n.anchorNode)&&li(document.body,n.focusNode))){var t=window.getSelection(),i=document.createRange();i.setEnd(n.anchorNode,n.anchorOffset);i.collapse(!1);t.removeAllRanges();t.addRange(i);t.extend(n.focusNode,n.focusOffset)}}function rc(n,i){var r=n.display,e=n.doc,s,o,c;if(i.editorIsHidden)return yi(n),!1;if(!i.force&&i.visible.from>=r.viewFrom&&i.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==ny(n))return!1;wv(n)&&(yi(n),i.dims=wh(n));var h=e.first+e.size,u=Math.max(i.visible.from-n.options.viewportMargin,e.first),f=Math.min(h,i.visible.to+n.options.viewportMargin);return(r.viewFrom<u&&u-r.viewFrom<20&&(u=Math.max(e.first,r.viewFrom)),r.viewTo>f&&r.viewTo-f<20&&(f=Math.min(h,r.viewTo)),di&&(u=bs(n.doc,u),f=kl(n.doc,f)),s=u!=r.viewFrom||f!=r.viewTo||r.lastWrapHeight!=i.wrapperHeight||r.lastWrapWidth!=i.wrapperWidth,wd(n,u,f),r.viewOffset=ei(t(n.doc,r.viewFrom)),n.display.mover.style.top=r.viewOffset+"px",o=ny(n),!s&&0==o&&!i.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))?!1:(c=dd(n),o>4&&(r.lineDiv.style.display="none"),ng(n,r.updateLineNumbers,i.dims),o>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,gd(c),ci(r.cursorDiv),ci(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,s&&(r.lastWrapHeight=i.wrapperHeight,r.lastWrapWidth=i.wrapperWidth,bf(n,400)),r.updateLineNumbers=null,!0)}function ty(n,t){for(var u,i=t.viewport,r=!0;(r&&n.options.lineWrapping&&t.oldDisplayWidth!=fr(n)||(i&&null!=i.top&&(i={top:Math.min(n.doc.height+lh(n.display)-ah(n),i.top)}),t.visible=nc(n.display,n.doc,i),!(t.visible.from>=n.display.viewFrom&&t.visible.to<=n.display.viewTo)))&&rc(n,t);r=!1)uo(n),u=wf(n),af(n),tu(n,u),ec(n,u);t.signal(n,"update",n);n.display.viewFrom==n.display.reportedViewFrom&&n.display.viewTo==n.display.reportedViewTo||(t.signal(n,"viewportChange",n,n.display.viewFrom,n.display.viewTo),n.display.reportedViewFrom=n.display.viewFrom,n.display.reportedViewTo=n.display.viewTo)}function uc(n,t){var i=new ns(n,t),r;rc(n,i)&&(uo(n),ty(n,i),r=wf(n),af(n),tu(n,r),ec(n,r),i.finish())}function ng(n,t,i){function c(t){var i=t.nextSibling;return nt&&kt&&n.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),i}for(var r,h,a,e=n.display,v=n.options.lineNumbers,o=e.lineDiv,u=o.firstChild,l=e.view,f=e.viewFrom,s=0;s<l.length;s++){if(r=l[s],!r.hidden)if(r.node&&r.node.parentNode==o){for(;u!=r.node;)u=c(u);h=v&&null!=t&&t<=f&&r.lineNumber;r.changes&&(d(r.changes,"gutter")>-1&&(h=!1),va(n,r,f,i));h&&(ci(r.lineNumber),r.lineNumber.appendChild(document.createTextNode(vs(n.options,f))));u=r.node.nextSibling}else a=bk(n,r,f,i),o.insertBefore(a,u);f+=r.size}for(;u;)u=c(u)}function fc(n){var t=n.display.gutters.offsetWidth;n.display.sizer.style.marginLeft=t+"px"}function ec(n,t){n.display.sizer.style.minHeight=t.docHeight+"px";n.display.heightForcer.style.top=t.docHeight+"px";n.display.gutters.style.height=t.docHeight+n.display.barHeight+ti(n)+"px"}function iy(n){var r=n.display.gutters,e=n.options.gutters,t,u,f;for(ci(r),t=0;t<e.length;++t)u=e[t],f=r.appendChild(i("div",null,"CodeMirror-gutter "+u)),"CodeMirror-linenumbers"==u&&(n.display.lineGutter=f,f.style.width=(n.display.lineNumWidth||1)+"px");r.style.display=t?"":"none";fc(n)}function oc(n){var t=d(n.gutters,"CodeMirror-linenumbers");t==-1&&n.lineNumbers?n.gutters=n.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!n.lineNumbers&&(n.gutters=n.gutters.slice(0),n.gutters.splice(t,1))}function ry(n){var i=n.wheelDeltaX,t=n.wheelDeltaY;return null==i&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(i=n.detail),null==t&&n.detail&&n.axis==n.VERTICAL_AXIS?t=n.detail:null==t&&(t=n.wheelDelta),{x:i,y:t}}function tg(n){var t=ry(n);return t.x*=st,t.y*=st,t}function uy(n,t){var v=ry(t),e=v.x,u=v.y,i=n.display,r=i.scroller,y=r.scrollWidth>r.clientWidth,h=r.scrollHeight>r.clientHeight,f,c,o;if(e&&y||u&&h){if(u&&kt&&nt)n:for(f=t.target,c=i.view;f!=r;f=f.parentNode)for(o=0;o<c.length;o++)if(c[o].node==f){n.display.currentWheelTarget=f;break n}if(e&&!bi&&!bt&&null!=st)return u&&h&&pf(n,Math.max(0,r.scrollTop+u*st)),cr(n,Math.max(0,r.scrollLeft+e*st)),(!u||u&&h)&&tt(t),void(i.wheelStartX=null);if(u&&null!=st){var l=u*st,s=n.doc.scrollTop,a=s+i.wrapper.clientHeight;l<0?s=Math.max(0,s+l-50):a=Math.min(n.doc.height,a+l+50);uc(n,{top:s,bottom:a})}he<20&&(null==i.wheelStartX?(i.wheelStartX=r.scrollLeft,i.wheelStartY=r.scrollTop,i.wheelDX=e,i.wheelDY=u,setTimeout(function(){if(null!=i.wheelStartX){var n=r.scrollLeft-i.wheelStartX,t=r.scrollTop-i.wheelStartY,u=t&&i.wheelDY&&t/i.wheelDY||n&&i.wheelDX&&n/i.wheelDX;i.wheelStartX=i.wheelStartY=null;u&&(st=(st*he+u)/(he+1),++he)}},200)):(i.wheelDX+=e,i.wheelDY+=u))}}function wt(n,t){var c=n[t],i,f,r;for(n.sort(function(n,t){return u(n.from(),t.from())}),t=d(n,c),i=1;i<n.length;i++)if(f=n[i],r=n[i-1],u(r.to(),f.from())>=0){var e=be(r.from(),f.from()),o=we(r.to(),f.to()),s=r.empty()?f.from()==f.head:r.from()==r.head;i<=t&&--t;n.splice(--i,2,new h(s?o:e,s?e:o))}return new ht(n,t)}function pi(n,t){return new ht([new h(n,t||n)],0)}function wi(t){return t.text?n(t.from.line+t.text.length-1,o(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function fy(t,i){if(u(t,i.from)<0)return t;if(u(t,i.to)<=0)return wi(i);var f=t.line+i.text.length-(i.to.line-i.from.line)-1,r=t.ch;return t.line==i.to.line&&(r+=wi(i).ch-i.to.ch),n(f,r)}function sc(n,t){for(var u,r=[],i=0;i<n.sel.ranges.length;i++)u=n.sel.ranges[i],r.push(new h(fy(u.anchor,t),fy(u.head,t)));return wt(r,n.sel.primIndex)}function ey(t,i,r){return t.line==i.line?n(r.line,t.ch-i.ch+r.ch):n(r.line+(t.line-i.line),t.ch)}function ig(t,i,r){for(var v,y,s=[],e=n(t.first,0),c=e,f=0;f<i.length;f++){var l=i[f],o=ey(l.from,e,c),a=ey(wi(l),e,c);(e=l.to,c=a,"around"==r)?(v=t.sel.ranges[f],y=u(v.head,v.anchor)<0,s[f]=new h(y?a:o,y?o:a)):s[f]=new h(o,o)}return new ht(s,t.sel.primIndex)}function hc(n){n.doc.mode=eh(n.options,n.doc.modeOption);kf(n)}function kf(n){n.doc.iter(function(n){n.stateAfter&&(n.stateAfter=null);n.styles&&(n.styles=null)});n.doc.frontier=n.doc.first;bf(n,100);n.state.modeGen++;n.curOp&&et(n)}function oy(n,t){return 0==t.from.ch&&0==t.to.ch&&""==o(t.text)&&(!n.cm||n.cm.options.wholeLineUpdateBefore)}function cc(n,i,r,u){function a(n){return r?r[n]:null}function h(n,t,r){rk(n,t,r,u);g(n,"change",n,i)}function y(n,t){for(var r=[],i=n;i<t;++i)r.push(new pr(f[i],a(i),u));return r}var e=i.from,c=i.to,f=i.text,s=t(n,e.line),l=t(n,c.line),w=o(f),p=a(f.length-1),v=c.line-e.line,b,k,d;i.full?(n.insert(0,y(0,f.length)),n.remove(f.length,n.size-f.length)):oy(n,i)?(b=y(0,f.length-1),h(l,l.text,p),v&&n.remove(e.line,v),b.length&&n.insert(e.line,b)):s==l?1==f.length?h(s,s.text.slice(0,e.ch)+w+s.text.slice(c.ch),p):(k=y(1,f.length-1),k.push(new pr(w+s.text.slice(c.ch),p,u)),h(s,s.text.slice(0,e.ch)+f[0],a(0)),n.insert(e.line+1,k)):1==f.length?(h(s,s.text.slice(0,e.ch)+f[0]+l.text.slice(c.ch),a(0)),n.remove(e.line+1,v)):(h(s,s.text.slice(0,e.ch)+f[0],a(0)),h(l,w+l.text.slice(c.ch),p),d=y(1,f.length-1),v>1&&n.remove(e.line+1,v-1),n.insert(e.line+1,d));g(n,"change",n,i)}function lr(n,t,i){function r(n,u,f){var o,e,s;if(n.linked)for(o=0;o<n.linked.length;++o)e=n.linked[o],e.doc!=u&&(s=f&&e.sharedHist,i&&!s||(t(e.doc,s),r(e.doc,n,s)))}r(n,null,!0)}function sy(n,t){if(t.cm)throw new Error("This document is already in use.");n.doc=t;t.cm=n;kh(n);hc(n);hy(n);n.options.lineWrapping||ds(n);n.options.mode=t.modeOption;et(n)}function hy(n){("rtl"==n.doc.direction?nr:vr)(n.display.lineDiv,"CodeMirror-rtl")}function rg(n){ot(n,function(){hy(n);et(n)})}function oo(n){this.done=[];this.undone=[];this.undoDepth=1/0;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=n||1}function lc(n,t){var i={from:ps(t.from),to:wi(t),text:ir(n,t.from,t.to)};return ay(n,i,t.from.line,t.to.line+1),lr(n,function(n){return ay(n,i,t.from.line,t.to.line+1)},!0),i}function cy(n){for(;n.length;){var t=o(n);if(!t.ranges)break;n.pop()}}function ug(n,t){return t?(cy(n.done),o(n.done)):n.done.length&&!o(n.done).ranges?o(n.done):n.done.length>1&&!n.done[n.done.length-2].ranges?(n.done.pop(),o(n.done)):void 0}function ly(n,t,i,r){var f=n.history,e,s,h,c;if(f.undone.length=0,h=+new Date,(f.lastOp==r||f.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&n.cm&&f.lastModTime>h-n.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(e=ug(f,f.lastOp==r)))s=o(e.changes),0==u(t.from,t.to)&&0==u(t.from,s.to)?s.to=wi(t):e.changes.push(lc(n,t));else for(c=o(f.done),c&&c.ranges||so(n.sel,f.done),e={changes:[lc(n,t)],generation:f.generation},f.done.push(e);f.done.length>f.undoDepth;)f.done.shift(),f.done[0].ranges||f.done.shift();f.done.push(i);f.generation=++f.maxGeneration;f.lastModTime=f.lastSelTime=h;f.lastOp=f.lastSelOp=r;f.lastOrigin=f.lastSelOrigin=t.origin;s||v(n,"historyAdded")}function fg(n,t,i,r){var u=t.charAt(0);return"*"==u||"+"==u&&i.ranges.length==r.ranges.length&&i.somethingSelected()==r.somethingSelected()&&new Date-n.history.lastSelTime<=(n.cm?n.cm.options.historyEventDelay:500)}function eg(n,t,i,r){var u=n.history,f=r&&r.origin;i==u.lastSelOp||f&&u.lastSelOrigin==f&&(u.lastModTime==u.lastSelTime&&u.lastOrigin==f||fg(n,f,o(u.done),t))?u.done[u.done.length-1]=t:so(t,u.done);u.lastSelTime=+new Date;u.lastSelOrigin=f;u.lastSelOp=i;r&&r.clearRedo!==!1&&cy(u.undone)}function so(n,t){var i=o(t);i&&i.ranges&&i.equals(n)||t.push(n)}function ay(n,t,i,r){var u=t["spans_"+n.id],f=0;n.iter(Math.max(n.first,i),Math.min(n.first+n.size,r),function(i){i.markedSpans&&((u||(u=t["spans_"+n.id]={}))[f]=i.markedSpans);++f})}function og(n){if(!n)return null;for(var t,i=0;i<n.length;++i)n[i].marker.explicitlyCleared?t||(t=n.slice(0,i)):t&&t.push(n[i]);return t?t.length?t:null:n}function sg(n,t){var u=t["spans_"+n.id],r,i;if(!u)return null;for(r=[],i=0;i<t.text.length;++i)r.push(og(u[i]));return r}function vy(n,t){var i=sg(n,t),s=ws(n,t),r,f,u,e,h,o;if(!i)return s;if(!s)return i;for(r=0;r<i.length;++r)if(f=i[r],u=s[r],f&&u)n:for(e=0;e<u.length;++e){for(h=u[e],o=0;o<f.length;++o)if(f[o].marker==h.marker)continue n;f.push(h)}else u&&(i[r]=u);return i}function uu(n,t,i){for(var u,l,h,c,r,a,f,e=[],s=0;s<n.length;++s)if(u=n[s],u.ranges)e.push(i?ht.prototype.deepCopy.call(u):u);else for(l=u.changes,h=[],e.push({changes:h}),c=0;c<l.length;++c)if(r=l[c],a=void 0,h.push({from:r.from,to:r.to,text:r.text}),t)for(f in r)(a=f.match(/^spans_(\d+)$/))&&d(t,Number(a[1]))>-1&&(o(h)[f]=r[f],delete r[f]);return e}function df(n,t,i,r){var f,e;return n.cm&&n.cm.display.shift||n.extend?(f=t.anchor,r&&(e=u(i,f)<0,e!=u(r,f)<0?(f=i,i=r):e!=u(i,r)<0&&(i=r)),new h(f,i)):new h(r||i,i)}function ho(n,t,i,r){it(n,new ht([df(n,n.sel.primary(),t,i)],0),r)}function yy(n,t,i){for(var f,u=[],r=0;r<n.sel.ranges.length;r++)u[r]=df(n,n.sel.ranges[r],t[r],null);f=wt(u,n.sel.primIndex);it(n,f,i)}function ac(n,t,i,r){var u=n.sel.ranges.slice(0);u[t]=i;it(n,wt(u,n.sel.primIndex),r)}function py(n,t,i,r){it(n,pi(t,i),r)}function hg(n,t,i){var r={ranges:t.ranges,update:function(t){var r=this,i;for(this.ranges=[],i=0;i<t.length;i++)r.ranges[i]=new h(f(n,t[i].anchor),f(n,t[i].head))},origin:i&&i.origin};return v(n,"beforeSelectionChange",n,r),n.cm&&v(n.cm,"beforeSelectionChange",n.cm,r),r.ranges!=t.ranges?wt(r.ranges,r.ranges.length-1):t}function wy(n,t,i){var r=n.history.done,u=o(r);u&&u.ranges?(r[r.length-1]=t,co(n,t,i)):it(n,t,i)}function it(n,t,i){co(n,t,i);eg(n,n.sel,n.cm?n.cm.curOp.id:NaN,i)}function co(n,t,i){(vt(n,"beforeSelectionChange")||n.cm&&vt(n.cm,"beforeSelectionChange"))&&(t=hg(n,t,i));var r=i&&i.bias||(u(t.primary().head,n.sel.primary().head)<0?-1:1);by(n,dy(n,t,r,!0));i&&i.scroll===!1||!n.cm||nu(n.cm)}function by(n,t){t.equals(n.sel)||(n.sel=t,n.cm&&(n.cm.curOp.updateInput=n.cm.curOp.selectionChanged=!0,gl(n.cm)),g(n,"cursorActivity",n))}function ky(n){by(n,dy(n,n.sel,null,!1))}function dy(n,t,i,r){for(var f,u=0;u<t.ranges.length;u++){var e=t.ranges[u],o=t.ranges.length==n.sel.ranges.length&&n.sel.ranges[u],s=vc(n,e.anchor,o&&o.anchor,i,r),c=vc(n,e.head,o&&o.head,i,r);(f||s!=e.anchor||c!=e.head)&&(f||(f=t.ranges.slice(0,u)),f[u]=new h(s,c))}return f?wt(f,t.primIndex):t}function fu(n,i,r,f,e){var c=t(n,i.line),a,h,o,s,y,l;if(c.markedSpans)for(a=0;a<c.markedSpans.length;++a)if(h=c.markedSpans[a],o=h.marker,(null==h.from||(o.inclusiveLeft?h.from<=i.ch:h.from<i.ch))&&(null==h.to||(o.inclusiveRight?h.to>=i.ch:h.to>i.ch))){if(e&&(v(o,"beforeCursorEnter"),o.explicitlyCleared)){if(c.markedSpans){--a;continue}break}if(!o.atomic)continue;return r&&(s=o.find(f<0?1:-1),y=void 0,(f<0?o.inclusiveRight:o.inclusiveLeft)&&(s=gy(n,s,-f,s&&s.line==i.line?c:null)),s&&s.line==i.line&&(y=u(s,r))&&(f<0?y<0:y>0))?fu(n,s,i,f,e):(l=o.find(f<0?-1:1),(f<0?o.inclusiveLeft:o.inclusiveRight)&&(l=gy(n,l,f,l.line==i.line?c:null)),l?fu(n,l,i,f,e):null)}return i}function vc(t,i,r,u,f){var e=u||1,o=fu(t,i,r,e,f)||!f&&fu(t,i,r,e,!0)||fu(t,i,r,-e,f)||!f&&fu(t,i,r,-e,!0);return o?o:(t.cantEdit=!0,n(t.first,0))}function gy(i,r,u,e){return u<0&&0==r.ch?r.line>i.first?f(i,n(r.line-1)):null:u>0&&r.ch==(e||t(i,r.line)).text.length?r.line<i.first+i.size-1?n(r.line+1,0):null:new n(r.line,r.ch+u)}function np(t){t.setSelection(n(t.firstLine(),0),n(t.lastLine()),ii)}function tp(n,t,i){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return i&&(r.update=function(t,i,u,e){t&&(r.from=f(n,t));i&&(r.to=f(n,i));u&&(r.text=u);void 0!==e&&(r.origin=e)}),v(n,"beforeChange",n,r),n.cm&&v(n.cm,"beforeChange",n.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function eu(n,t,i){var u,r;if(n.cm){if(!n.cm.curOp)return w(n.cm,eu)(n,t,i);if(n.cm.state.suppressEdits)return}if(!(vt(n,"beforeChange")||n.cm&&vt(n.cm,"beforeChange"))||(t=tp(n,t,!0)))if(u=pw&&!i&&vb(n,t.from,t.to),u)for(r=u.length-1;r>=0;--r)ip(n,{from:u[r].from,to:u[r].to,text:r?[""]:t.text});else ip(n,t)}function ip(n,t){var i,r;(1!=t.text.length||""!=t.text[0]||0!=u(t.from,t.to))&&(i=sc(n,t),ly(n,t,i,n.cm?n.cm.curOp.id:NaN),gf(n,t,i,ws(n,t)),r=[],lr(n,function(n,i){i||d(r,n.history)!=-1||(ep(n.history,t),r.push(n.history));gf(n,t,null,ws(n,t))}))}function lo(n,t,i){var h,l;if(!n.cm||!n.cm.state.suppressEdits||i){for(var r,u=n.history,a=n.sel,f="undo"==t?u.done:u.undone,s="undo"==t?u.undone:u.done,e=0;e<f.length&&(r=f[e],i?!r.ranges||r.equals(n.sel):r.ranges);e++);if(e!=f.length){for(u.lastOrigin=u.lastSelOrigin=null;r=f.pop(),r.ranges;){if(so(r,s),i&&!r.equals(n.sel))return void it(n,r,{clearRedo:!1});a=r}h=[];so(a,s);s.push({changes:h,generation:u.generation});u.generation=r.generation||++u.maxGeneration;for(var v=vt(n,"beforeChange")||n.cm&&vt(n.cm,"beforeChange"),y=function(i){var u=r.changes[i],s,e;if(u.origin=t,v&&!tp(n,u,!1))return f.length=0,{};h.push(lc(n,u));s=i?sc(n,u):o(f);gf(n,u,s,vy(n,u));!i&&n.cm&&n.cm.scrollIntoView({from:u.from,to:wi(u)});e=[];lr(n,function(n,t){t||d(e,n.history)!=-1||(ep(n.history,u),e.push(n.history));gf(n,u,null,vy(n,u))})},c=r.changes.length-1;c>=0;--c)if(l=y(c),l)return l.v}}}function rp(t,i){if(0!=i&&(t.first+=i,t.sel=new ht(ve(t.sel.ranges,function(t){return new h(n(t.anchor.line+i,t.anchor.ch),n(t.head.line+i,t.head.ch))}),t.sel.primIndex),t.cm)){et(t.cm,t.first,t.first-i,i);for(var u=t.cm.display,r=u.viewFrom;r<u.viewTo;r++)vi(t.cm,r,"gutter")}}function gf(i,r,u,f){var s,e;if(i.cm&&!i.cm.curOp)return w(i.cm,gf)(i,r,u,f);if(r.to.line<i.first)return void rp(i,r.text.length-1-(r.to.line-r.from.line));r.from.line>i.lastLine()||(r.from.line<i.first&&(s=r.text.length-1-(i.first-r.from.line),rp(i,s),r={from:n(i.first,0),to:n(r.to.line+s,r.to.ch),text:[o(r.text)],origin:r.origin}),e=i.lastLine(),r.to.line>e&&(r={from:r.from,to:n(e,t(i,e).text.length),text:[r.text[0]],origin:r.origin}),r.removed=ir(i,r.from,r.to),u||(u=sc(i,r)),i.cm?cg(i.cm,r,f):cc(i,r,f),co(i,u,ii))}function cg(n,i,r){var f=n.doc,e=n.display,u=i.from,o=i.to,h=!1,c=u.line,y,l,a,v;n.options.lineWrapping||(c=s(ni(t(f,u.line))),f.iter(c,o.line+1,function(n){if(n==e.maxLine)return h=!0,!0}));f.sel.contains(i.from,i.to)>-1&&gl(n);cc(f,i,r,hv(n));n.options.lineWrapping||(f.iter(c,u.line+i.text.length,function(n){var t=no(n);t>e.maxLineLength&&(e.maxLine=n,e.maxLineLength=t,e.maxLineChanged=!0,h=!1)}),h&&(n.curOp.updateMaxLine=!0));f.frontier=Math.min(f.frontier,u.line);bf(n,400);y=i.text.length-(o.line-u.line)-1;i.full?et(n):u.line!=o.line||1!=i.text.length||oy(n.doc,i)?et(n,u.line,o.line+1,y):vi(n,u.line,"text");l=vt(n,"changes");a=vt(n,"change");(a||l)&&(v={from:u,to:o,text:i.text,removed:i.removed,origin:i.origin},a&&g(n,"change",n,v),l&&(n.curOp.changeObjs||(n.curOp.changeObjs=[])).push(v));n.display.selForContextMenu=null}function ou(n,t,i,r,f){if(r||(r=i),u(r,i)<0){var e=r;r=i;i=e}"string"==typeof t&&(t=n.splitLines(t));eu(n,{from:i,to:r,text:t,origin:f})}function up(n,t,i,r){i<n.line?n.line+=r:t<n.line&&(n.line=t,n.ch=0)}function fp(t,i,r,u){for(var f,c,s,h,e,o=0;o<t.length;++o)if(f=t[o],c=!0,f.ranges)for(f.copied||(f=t[o]=f.deepCopy(),f.copied=!0),s=0;s<f.ranges.length;s++)up(f.ranges[s].anchor,i,r,u),up(f.ranges[s].head,i,r,u);else{for(h=0;h<f.changes.length;++h)if(e=f.changes[h],r<e.from.line)e.from=n(e.from.line+u,e.from.ch),e.to=n(e.to.line+u,e.to.ch);else if(i<=e.to.line){c=!1;break}c||(t.splice(0,o+1),o=0)}}function ep(n,t){var i=t.from.line,r=t.to.line,u=t.text.length-(r-i)-1;fp(n.done,i,r,u);fp(n.undone,i,r,u)}function ne(n,i,r,u){var f=i,e=i;return"number"==typeof i?e=t(n,hl(n,i)):f=s(i),null==f?null:(u(e,f)&&n.cm&&vi(n.cm,f,r),e)}function op(n,t,i){ei(t)<(n.curOp&&n.curOp.scrollTop||n.doc.scrollTop)&&ic(n,i)}function lg(n,t,i,r){var u=new bu(n,i,r),f=n.cm;return f&&u.noHScroll&&(f.display.alignWidgets=!0),ne(n,t,"widget",function(t){var i=t.widgets||(t.widgets=[]),r;return(null==u.insertAt?i.push(u):i.splice(Math.min(i.length-1,Math.max(0,u.insertAt)),0,u),u.line=t,f&&!ur(n,t))&&(r=ei(t)<n.scrollTop,gt(t,t.height+sf(u)),r&&ic(f,u.height),f.curOp.forceUpdate=!0),!0}),g(f,"lineWidgetAdded",f,u,"number"==typeof t?t:s(t)),u}function su(n,t,i,f,e){var o,l,a,h,s,c;if(f&&f.shared)return ag(n,t,i,f,e);if(n.cm&&!n.cm.curOp)return w(n.cm,su)(n,t,i,f,e);if(o=new hi(n,e),l=u(t,i),f&&tr(f,o,!1),l>0||0==l&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=kr("span",[o.replacedWith],"CodeMirror-widget"),f.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),f.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(bl(n,t.line,t,i,o)||t.line!=i.line&&bl(n,i.line,t,i,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");sb()}if(o.addToHistory&&ly(n,{from:t,to:i,origin:"markText"},n.sel,NaN),h=t.line,s=n.cm,n.iter(h,i.line+1,function(n){s&&o.collapsed&&!s.options.lineWrapping&&ni(n)==s.display.maxLine&&(a=!0);o.collapsed&&h!=t.line&&gt(n,0);cb(n,new ke(o,h==t.line?t.ch:null,h==i.line?i.ch:null));++h}),o.collapsed&&n.iter(t.line,i.line+1,function(t){ur(n,t)&&gt(t,0)}),o.clearOnEnter&&r(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(ob(),(n.history.done.length||n.history.undone.length)&&n.clearHistory()),o.collapsed&&(o.id=++rl,o.atomic=!0),s){if(a&&(s.curOp.updateMaxLine=!0),o.collapsed)et(s,t.line,i.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(c=t.line;c<=i.line;c++)vi(s,c,"text");o.atomic&&ky(s.doc);g(s,"markerAdded",s,o)}return o}function ag(n,t,i,r,u){r=tr(r);r.shared=!1;var e=[su(n,t,i,r,u)],s=e[0],h=r.widgetNode;return lr(n,function(n){h&&(r.widgetNode=h.cloneNode(!0));e.push(su(n,f(n,t),f(n,i),r,u));for(var c=0;c<n.linked.length;++c)if(n.linked[c].isParent)return;s=o(e)}),new ku(e,s)}function sp(t){return t.findMarks(n(t.first,0),t.clipPos(n(t.lastLine())),function(n){return n.parent})}function vg(n,t){for(var f,r=0;r<t.length;r++){var i=t[r],e=i.find(),o=n.clipPos(e.from),s=n.clipPos(e.to);u(o,s)&&(f=su(n,o,s,i.primary,i.primary.type),i.markers.push(f),f.parent=i)}}function yg(n){for(var i=function(t){var i=n[t],f=[i.primary.doc],r,u;for(lr(i.primary.doc,function(n){return f.push(n)}),r=0;r<i.markers.length;r++)u=i.markers[r],d(f,u.doc)==-1&&(u.parent=null,i.markers.splice(r--,1))},t=0;t<n.length;t++)i(t)}function pg(n){var t=this,i,r,c,u,o;if((hp(t),!p(t,n)&&!si(t.display,n))&&(tt(n),e&&(nb=+new Date),i=sr(t,n,!0),r=n.dataTransfer.files,i&&!t.isReadOnly()))if(r&&r.length&&window.FileReader&&window.File)for(var h=r.length,l=Array(h),a=0,v=function(n,r){if(!t.options.allowDropFileTypes||d(t.options.allowDropFileTypes,n.type)!=-1){var u=new FileReader;u.onload=w(t,function(){var n=u.result,e;(/[\x00-\x08\x0e-\x1f]{2}/.test(n)&&(n=""),l[r]=n,++a==h)&&(i=f(t.doc,i),e={from:i,to:i,text:t.doc.splitLines(l.join(t.doc.lineSeparator())),origin:"paste"},eu(t.doc,e),wy(t.doc,pi(i,wi(e))))});u.readAsText(n)}},s=0;s<h;++s)v(r[s],s);else{if(t.state.draggingText&&t.doc.sel.contains(i)>-1)return t.state.draggingText(n),void setTimeout(function(){return t.display.input.focus()},20);try{if(c=n.dataTransfer.getData("Text"),c){if(t.state.draggingText&&!t.state.draggingText.copy&&(u=t.listSelections()),co(t.doc,pi(i,i)),u)for(o=0;o<u.length;++o)ou(t.doc,"",u[o].anchor,u[o].head,"drag");t.replaceSelection(c,"around","paste");t.display.input.focus()}}catch(n){}}}function wg(n,t){if(e&&(!n.state.draggingText||+new Date-nb<100))return void ff(t);if(!p(n,t)&&!si(n.display,t)&&(t.dataTransfer.setData("Text",n.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!aw)){var r=i("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";bt&&(r.width=r.height=1,n.display.wrapper.appendChild(r),r._top=r.offsetTop);t.dataTransfer.setDragImage(r,0,0);bt&&r.parentNode.removeChild(r)}}function bg(n,t){var u=sr(n,t),r;u&&(r=document.createDocumentFragment(),lv(n,u,r),n.display.dragCursor||(n.display.dragCursor=i("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),n.display.lineSpace.insertBefore(n.display.dragCursor,n.display.cursorDiv)),ct(n.display.dragCursor,r))}function hp(n){n.display.dragCursor&&(n.display.lineSpace.removeChild(n.display.dragCursor),n.display.dragCursor=null)}function cp(n){var i,t,r;if(document.body.getElementsByClassName)for(i=document.body.getElementsByClassName("CodeMirror"),t=0;t<i.length;t++)r=i[t].CodeMirror,r&&n(r)}function kg(){tb||(dg(),tb=!0)}function dg(){var n;r(window,"resize",function(){null==n&&(n=setTimeout(function(){n=null;cp(gg)},100))});r(window,"blur",function(){return cp(vf)})}function gg(n){var t=n.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,n.setSize())}function nn(n){var i=n.split(/-(?!$)/),u,f,e,o,r,t;for(n=i[i.length-1],r=0;r<i.length-1;r++)if(t=i[r],/^(cmd|meta|m)$/i.test(t))o=!0;else if(/^a(lt)?$/i.test(t))u=!0;else if(/^(c|ctrl|control)$/i.test(t))f=!0;else{if(!/^s(hift)?$/i.test(t))throw new Error("Unrecognized modifier name: "+t);e=!0}return u&&(n="Alt-"+n),f&&(n="Ctrl-"+n),o&&(n="Cmd-"+n),e&&(n="Shift-"+n),n}function tn(n){var e={},t,o,r,u,f,i,s,h;for(t in n)if(n.hasOwnProperty(t)){if(o=n[t],/^(name|fallthrough|(de|at)tach)$/.test(t))continue;if("..."==o){delete n[t];continue}for(r=ve(t.split(" "),nn),u=0;u<r.length;u++)if(f=void 0,i=void 0,u==r.length-1?(i=r.join(" "),f=o):(i=r.slice(0,u+1).join(" "),f="..."),s=e[i],s){if(s!=f)throw new Error("Inconsistent bindings for "+i);}else e[i]=f;delete n[t]}for(h in e)n[h]=e[h];return n}function hu(n,t,i,r){var u,f,e;if(t=ao(t),u=t.call?t.call(n,r):t[n],u===!1)return"nothing";if("..."===u)return"multi";if(null!=u&&i(u))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return hu(n,t.fallthrough,i,r);for(f=0;f<t.fallthrough.length;f++)if(e=hu(n,t.fallthrough[f],i,r),e)return e}}function lp(n){var t="string"==typeof n?n:gi[n.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function ap(n,t){if(bt&&34==n.keyCode&&n.char)return!1;var r=gi[n.keyCode],i=r;return null!=i&&!n.altGraphKey&&(n.altKey&&"Alt"!=r&&(i="Alt-"+i),(vw?n.metaKey:n.ctrlKey)&&"Ctrl"!=r&&(i="Ctrl-"+i),(vw?n.ctrlKey:n.metaKey)&&"Cmd"!=r&&(i="Cmd-"+i),!t&&n.shiftKey&&"Shift"!=r&&(i="Shift-"+i),i)}function ao(n){return"string"==typeof n?ui[n]:n}function cu(n,t){for(var r,e,s=n.doc.sel.ranges,i=[],f=0;f<s.length;f++){for(r=t(s[f]);i.length&&u(r.from,o(i).to)<=0;)if(e=i.pop(),u(e.from,r.from)<0){r.from=e.from;break}i.push(r)}ot(n,function(){for(var t=i.length-1;t>=0;t--)ou(n.doc,"",i[t].from,i[t].to,"+delete");nu(n)})}function vp(n,i){var u=t(n.doc,i),r=ni(u);return r!=u&&(i=s(r)),ih(!0,n,r,i,1)}function rn(n,i){var r=t(n.doc,i),u=yb(r);return u!=r&&(i=s(u)),ih(!0,n,r,i,-1)}function yp(i,r){var u=vp(i,r.line),e=t(i.doc,u.line),o=ai(e,i.doc.direction),f,s;return!o||0==o[0].level?(f=Math.max(0,e.text.search(/\S/)),s=r.line==u.line&&r.ch<=f&&r.ch,n(u.line,s?0:f,u.sticky)):u}function vo(n,t,i){if("string"==typeof t&&(t=rs[t],!t))return!1;n.display.input.ensurePolled();var u=n.display.shift,r=!1;try{n.isReadOnly()&&(n.state.suppressEdits=!0);i&&(n.display.shift=!1);r=t(n)!=dc}finally{n.display.shift=u;n.state.suppressEdits=!1}return r}function un(n,t,i){for(var u,r=0;r<n.state.keyMaps.length;r++)if(u=hu(t,n.state.keyMaps[r],i,n),u)return u;return n.options.extraKeys&&hu(t,n.options.extraKeys,i,n)||hu(t,n.options.keyMap,i,n)}function yo(n,t,i,r){var f=n.state.keySeq,u;if(f){if(lp(t))return"handled";vtt.set(50,function(){n.state.keySeq==f&&(n.state.keySeq=null,n.display.input.reset())});t=f+" "+t}return u=un(n,t,r),"multi"==u&&(n.state.keySeq=t),"handled"==u&&g(n,"keyHandled",n,t,i),"handled"!=u&&"multi"!=u||(tt(i),dh(n)),f&&!u&&/\'$/.test(t)?(tt(i),!0):!!u}function pp(n,t){var i=ap(t,!0);return!!i&&(t.shiftKey&&!n.state.keySeq?yo(n,"Shift-"+i,t,function(t){return vo(n,t,!0)})||yo(n,i,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return vo(n,t)}):yo(n,i,t,function(t){return vo(n,t)}))}function fn(n,t,i){return yo(n,"'"+i+"'",t,function(t){return vo(n,t,!0)})}function wp(n){var t=this,i,r;(t.curOp.focus=fi(),p(t,n))||(e&&l<11&&27==n.keyCode&&(n.returnValue=!1),i=n.keyCode,t.display.shift=16==i||n.shiftKey,r=pp(t,n),bt&&(ul=r?i:null,!r&&88==i&&!bw&&(kt?n.metaKey:n.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=i||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||en(t))}function en(n){function t(n){18!=n.keyCode&&n.altKey||(vr(i,"CodeMirror-crosshair"),lt(document,"keyup",t),lt(document,"mouseover",t))}var i=n.display.lineDiv;nr(i,"CodeMirror-crosshair");r(document,"keyup",t);r(document,"mouseover",t)}function bp(n){16==n.keyCode&&(this.doc.sel.shift=!1);p(this,n)}function kp(n){var t=this,i,r,u;if(!(si(t.display,n)||p(t,n)||n.ctrlKey&&!n.altKey||kt&&n.metaKey)){if(i=n.keyCode,r=n.charCode,bt&&i==ul)return ul=null,void tt(n);bt&&(!n.which||n.which<10)&&pp(t,n)||(u=String.fromCharCode(null==r?i:r),"\b"!=u&&(fn(t,n,u)||t.display.input.onKeyPress(n)))}}function on(n){var t=this,i=t.display,r;if(!(p(t,n)||i.activeTouch&&i.input.supportsTouch())){if(i.input.ensurePolled(),i.shift=n.shiftKey,si(i,n))return void(nt||(i.scroller.draggable=!1,setTimeout(function(){return i.scroller.draggable=!0},100)));if(!gp(t,n)){r=sr(t,n);switch(window.focus(),ta(n)){case 1:t.state.selectingText?t.state.selectingText(n):r?sn(t,n,r):fh(n)==i.scroller&&tt(n);break;case 2:nt&&(t.state.lastMiddleDown=+new Date);r&&ho(t.doc,r);setTimeout(function(){return i.input.focus()},20);tt(n);break;case 3:wc?nw(t,n):vv(t)}}}}function sn(n,t,i){var r,f,o,s,h;e?setTimeout(os(av,n),0):n.curOp.focus=fi();f=+new Date;is&&is.time>f-400&&0==u(is.pos,i)?r="triple":ts&&ts.time>f-400&&0==u(ts.pos,i)?(r="double",is={time:f,pos:i}):(r="single",ts={time:f,pos:i});s=n.doc.sel;h=kt?t.metaKey:t.ctrlKey;n.options.dragDrop&&stt&&!n.isReadOnly()&&"single"==r&&(o=s.contains(i))>-1&&(u((o=s.ranges[o]).from(),i)<0||i.xRel>0)&&(u(o.to(),i)>0||i.xRel<0)?hn(n,t,i,h):cn(n,t,i,r,h)}function hn(n,t,i,u){var f=n.display,s=!1,o=w(n,function(t){nt&&(f.scroller.draggable=!1);n.state.draggingText=!1;lt(document,"mouseup",o);lt(document,"mousemove",h);lt(f.scroller,"dragstart",c);lt(f.scroller,"drop",o);s||(tt(t),u||ho(n.doc,i),nt||e&&9==l?setTimeout(function(){document.body.focus();f.input.focus()},20):f.input.focus())}),h=function(n){s=s||Math.abs(t.clientX-n.clientX)+Math.abs(t.clientY-n.clientY)>=10},c=function(){return s=!0};nt&&(f.scroller.draggable=!0);n.state.draggingText=o;o.copy=kt?t.altKey:t.ctrlKey;f.scroller.dragDrop&&f.scroller.dragDrop();r(document,"mouseup",o);r(document,"mousemove",h);r(f.scroller,"dragstart",c);r(f.scroller,"drop",o);vv(n);setTimeout(function(){return f.input.focus()},20)}function cn(i,e,o,s,c){function st(r){var k,w,c,tt;if(0!=u(rt,r))if(rt=r,"rect"==s){for(var y=[],b=i.options.tabSize,ut=at(t(l,o.line).text,o.ch,b),ft=at(t(l,r.line).text,r.ch,b),et=Math.min(ut,ft),ot=Math.max(ut,ft),e=Math.min(o.line,r.line),st=Math.min(i.lastLine(),Math.max(o.line,r.line));e<=st;e++)k=t(l,e).text,w=ss(k,et,b),et==ot?y.push(new h(n(e,w),n(e,w))):k.length>w&&y.push(new h(n(e,w),n(e,ss(k,ot,b))));y.length||y.push(new h(o,o));it(l,wt(p.ranges.slice(0,a).concat(y),a),{origin:"*mouse",scroll:!1});i.scrollIntoView(r)}else{var g=v,d=g.anchor,nt=r;"single"!=s&&(c="double"==s?i.findWordAt(r):new h(n(r.line,0),f(l,n(r.line+1,0))),u(c.anchor,d)>0?(nt=c.head,d=be(g.from(),c.anchor)):(nt=c.anchor,d=we(g.to(),c.head)));tt=p.ranges.slice(0);tt[a]=new h(f(l,d),nt);it(l,wt(tt,a),gc)}}function nt(n){var e=++g,t=sr(i,n,!0,"rect"==s),r,f;t&&(0!=u(t,rt)?(i.curOp.focus=fi(),st(t),r=nc(b,l),(t.line>=r.to||t.line<r.from)&&setTimeout(w(i,function(){g==e&&nt(n)}),150)):(f=n.clientY<et.top?-20:n.clientY>et.bottom?20:0,f&&setTimeout(w(i,function(){g==e&&(b.scroller.scrollTop+=f,nt(n))}),50)))}function ft(n){i.state.selectingText=!1;g=1/0;tt(n);b.input.focus();lt(document,"mousemove",ot);lt(document,"mouseup",ut);l.history.lastSelOrigin=null}var b=i.display,l=i.doc,v,a,p,y,k,d;tt(e);p=l.sel;y=p.ranges;(c&&!e.shiftKey?(a=l.sel.contains(o),v=a>-1?y[a]:new h(o,o)):(v=l.sel.primary(),a=l.sel.primIndex),rtt?e.shiftKey&&e.metaKey:e.altKey)?(s="rect",c||(v=new h(o,o)),o=sr(i,e,!0,!0),a=-1):"double"==s?(k=i.findWordAt(o),v=i.display.shift||l.extend?df(l,v,k.anchor,k.head):k):"triple"==s?(d=new h(n(o.line,0),f(l,n(o.line+1,0))),v=i.display.shift||l.extend?df(l,v,d.anchor,d.head):d):v=df(l,v,o);c?a==-1?(a=y.length,it(l,wt(y.concat([v]),a),{scroll:!1,origin:"*mouse"})):y.length>1&&y[a].empty()&&"single"==s&&!e.shiftKey?(it(l,wt(y.slice(0,a).concat(y.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),p=l.sel):ac(l,a,v,gc):(a=0,it(l,new ht([v],0),gc),p=l.sel);var rt=o,et=b.wrapper.getBoundingClientRect(),g=0,ot=w(i,function(n){ta(n)?nt(n):ft(n)}),ut=w(i,ft);i.state.selectingText=ut;r(document,"mousemove",ot);r(document,"mouseup",ut)}function dp(n,t,i,r){var o,f,e,s,u,h,c,l;try{o=t.clientX;f=t.clientY}catch(n){return!1}if(o>=Math.floor(n.display.gutters.getBoundingClientRect().right))return!1;if(r&&tt(t),e=n.display,s=e.lineDiv.getBoundingClientRect(),f>s.bottom||!vt(n,i))return uh(t);for(f-=s.top-e.viewOffset,u=0;u<n.options.gutters.length;++u)if(h=e.gutters.childNodes[u],h&&h.getBoundingClientRect().right>=o)return c=rr(n.doc,f),l=n.options.gutters[u],v(n,i,n,c,l,t),uh(t)}function gp(n,t){return dp(n,t,"gutterClick",!0)}function nw(n,t){si(n.display,t)||ln(n,t)||p(n,t,"contextmenu")||n.display.input.onContextMenu(t)}function ln(n,t){return!!vt(n,"gutterContextMenu")&&dp(n,t,"gutterContextMenu",!1)}function tw(n){n.display.wrapper.className=n.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+n.options.theme.replace(/(^|\s)\s*/g," cm-s-");cf(n)}function an(t){function i(n,i,u,f){t.defaults[n]=i;u&&(r[n]=f?function(n,t,i){i!=gu&&u(n,t,i)}:u)}var r=t.optionHandlers;t.defineOption=i;t.Init=gu;i("value","",function(n,t){return n.setValue(t)},!0);i("mode",null,function(n,t){n.doc.modeOption=t;hc(n)},!0);i("indentUnit",2,hc,!0);i("indentWithTabs",!1);i("smartIndent",!0);i("tabSize",4,function(n){kf(n);cf(n);et(n)},!0);i("lineSeparator",null,function(t,i){var r,f,u;if(t.doc.lineSep=i,i)for(r=[],f=t.doc.first,t.doc.iter(function(t){for(var u,e=0;;){if(u=t.text.indexOf(i,e),u==-1)break;e=u+i.length;r.push(n(f,u))}f++}),u=r.length-1;u>=0;u--)ou(t.doc,i,r[u],n(r[u].line,r[u].ch+i.length))});i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(n,t,i){n.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g");i!=gu&&n.refresh()});i("specialCharPlaceholder",fk,function(n){return n.refresh()},!0);i("electricChars",!0);i("inputStyle",fe?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor");},!0);i("spellcheck",!1,function(n,t){return n.getInputField().spellcheck=t},!0);i("rtlMoveVisually",!utt);i("wholeLineUpdateBefore",!0);i("theme","default",function(n){tw(n);te(n)},!0);i("keyMap","default",function(n,t,i){var u=ao(t),r=i!=gu&&ao(i);r&&r.detach&&r.detach(n,u);u.attach&&u.attach(n,r||null)});i("extraKeys",null);i("lineWrapping",!1,yn,!0);i("gutters",[],function(n){oc(n.options);te(n)},!0);i("fixedGutter",!0,function(n,t){n.display.gutters.style.left=t?bh(n.display)+"px":"0";n.refresh()},!0);i("coverGutterNextToScrollbar",!1,function(n){return tu(n)},!0);i("scrollbarStyle","native",function(n){gv(n);tu(n);n.display.scrollbars.setScrollTop(n.doc.scrollTop);n.display.scrollbars.setScrollLeft(n.doc.scrollLeft)},!0);i("lineNumbers",!1,function(n){oc(n.options);te(n)},!0);i("firstLineNumber",1,te,!0);i("lineNumberFormatter",function(n){return n},te,!0);i("showCursorWhenSelecting",!1,af,!0);i("resetSelectionOnContextMenu",!0);i("lineWiseCopyCut",!0);i("readOnly",!1,function(n,t){"nocursor"==t?(vf(n),n.display.input.blur(),n.display.disabled=!0):n.display.disabled=!1;n.display.input.readOnlyChanged(t)});i("disableInput",!1,function(n,t){t||n.display.input.reset()},!0);i("dragDrop",!0,vn);i("allowDropFileTypes",null);i("cursorBlinkRate",530);i("cursorScrollMargin",0);i("cursorHeight",1,af,!0);i("singleCursorHeightPerLine",!0,af,!0);i("workTime",100);i("workDelay",100);i("flattenSpans",!0,kf,!0);i("addModeClass",!1,kf,!0);i("pollInterval",100);i("undoDepth",200,function(n,t){return n.doc.history.undoDepth=t});i("historyEventDelay",1250);i("viewportMargin",10,function(n){return n.refresh()},!0);i("maxHighlightLength",1e4,kf,!0);i("moveInputWithCursor",!0,function(n,t){t||n.display.input.resetPosition()});i("tabindex",null,function(n,t){return n.display.input.getField().tabIndex=t||""});i("autofocus",null);i("direction","ltr",function(n,t){return n.doc.setDirection(t)},!0)}function te(n){iy(n);et(n);pv(n)}function vn(n,t,i){var e=i&&i!=gu,u,f;!t!=!e&&(u=n.display.dragFunctions,f=t?r:lt,f(n.display.scroller,"dragstart",u.start),f(n.display.scroller,"dragenter",u.enter),f(n.display.scroller,"dragover",u.over),f(n.display.scroller,"dragleave",u.leave),f(n.display.scroller,"drop",u.drop))}function yn(n){n.options.lineWrapping?(nr(n.display.wrapper,"CodeMirror-wrap"),n.display.sizer.style.minWidth="",n.display.sizerWidth=null):(vr(n.display.wrapper,"CodeMirror-wrap"),ds(n));kh(n);et(n);cf(n);setTimeout(function(){return tu(n)},100)}function a(n,t){var o=this,i,s,r,u,f;if(!(this instanceof a))return new a(n,t);this.options=t=t?tr(t):{};tr(ib,t,!1);oc(t);i=t.value;"string"==typeof i&&(i=new ut(i,t.mode,null,t.lineSeparator,t.direction));this.doc=i;s=new a.inputStyles[t.inputStyle](this);r=this.display=new fb(n,i,s);r.wrapper.CodeMirror=this;iy(this);tw(this);t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");gv(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new ki,keySeq:null,specialChars:null};t.autofocus&&!fe&&r.input.focus();e&&l<11&&setTimeout(function(){return o.display.input.reset(!0)},20);pn(this);kg();iu(this);this.curOp.forceUpdate=!0;sy(this,i);t.autofocus&&!fe||this.hasFocus()?setTimeout(os(gh,this),20):vf(this);for(u in us)us.hasOwnProperty(u)&&us[u](o,t[u],gu);for(wv(this),t.finishInit&&t.finishInit(this),f=0;f<fs.length;++f)fs[f](o);ru(this);nt&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(r.lineDiv).textRendering&&(r.lineDiv.style.textRendering="auto")}function pn(t){function s(){i.activeTouch&&(a=setTimeout(function(){return i.activeTouch=null},1e3),o=i.activeTouch,o.end=+new Date)}function y(n){if(1!=n.touches.length)return!1;var t=n.touches[0];return t.radiusX<=1&&t.radiusY<=1}function c(n,t){if(null==t.left)return!0;var i=t.left-n.left,r=t.top-n.top;return i*i+r*r>400}var i=t.display,a,o,u;r(i.scroller,"mousedown",w(t,on));e&&l<11?r(i.scroller,"dblclick",w(t,function(n){var i,r;p(t,n)||(i=sr(t,n),!i||gp(t,n)||si(t.display,n)||(tt(n),r=t.findWordAt(i),ho(t.doc,r.anchor,r.head)))})):r(i.scroller,"dblclick",function(n){return p(t,n)||tt(n)});wc||r(i.scroller,"contextmenu",function(n){return nw(t,n)});o={end:0};r(i.scroller,"touchstart",function(n){if(!p(t,n)&&!y(n)){i.input.ensurePolled();clearTimeout(a);var r=+new Date;i.activeTouch={start:r,moved:!1,prev:r-o.end<=300?o:null};1==n.touches.length&&(i.activeTouch.left=n.touches[0].pageX,i.activeTouch.top=n.touches[0].pageY)}});r(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)});r(i.scroller,"touchend",function(r){var u=i.activeTouch,o,e;u&&!si(i,r)&&null!=u.left&&!u.moved&&new Date-u.start<300&&(e=t.coordsChar(i.activeTouch,"page"),o=!u.prev||c(u,u.prev)?new h(e,e):!u.prev.prev||c(u,u.prev.prev)?t.findWordAt(e):new h(n(e.line,0),f(t.doc,n(e.line+1,0))),t.setSelection(o.anchor,o.head),t.focus(),tt(r));s()});r(i.scroller,"touchcancel",s);r(i.scroller,"scroll",function(){i.scroller.clientHeight&&(pf(t,i.scroller.scrollTop),cr(t,i.scroller.scrollLeft,!0),v(t,"scroll",t))});r(i.scroller,"mousewheel",function(n){return uy(t,n)});r(i.scroller,"DOMMouseScroll",function(n){return uy(t,n)});r(i.wrapper,"scroll",function(){return i.wrapper.scrollTop=i.wrapper.scrollLeft=0});i.dragFunctions={enter:function(n){p(t,n)||ff(n)},over:function(n){p(t,n)||(bg(t,n),ff(n))},start:function(n){return wg(t,n)},drop:w(t,pg),leave:function(n){p(t,n)||hp(t)}};u=i.input.getField();r(u,"keyup",function(n){return bp.call(t,n)});r(u,"keydown",w(t,wp));r(u,"keypress",w(t,kp));r(u,"focus",function(n){return gh(t,n)});r(u,"blur",function(n){return vf(t,n)})}function ie(i,r,u,f){var d,o=i.doc,e,c,l,y,w,a,b,k;null==u&&(u="add");"smart"==u&&(o.mode.indent?d=ef(i,r):u="prev");var v=i.options.tabSize,s=t(o,r),p=at(s.text,null,v);if(s.stateAfter&&(s.stateAfter=null),c=s.text.match(/^\s*/)[0],f||/\S/.test(s.text)){if("smart"==u&&(e=o.mode.indent(d,s.text.slice(c.length),s.text),e==dc||e>150)){if(!f)return;u="prev"}}else e=0,u="not";if("prev"==u?e=r>o.first?at(t(o,r-1).text,null,v):0:"add"==u?e=p+i.options.indentUnit:"subtract"==u?e=p-i.options.indentUnit:"number"==typeof u&&(e=p+u),e=Math.max(0,e),l="",y=0,i.options.indentWithTabs)for(w=Math.floor(e/v);w;--w)y+=v,l+="\t";if(y<e&&(l+=hs(e-y)),l!=c)return ou(o,l,n(r,0),n(r,c.length),"+input"),s.stateAfter=null,!0;for(a=0;a<o.sel.ranges.length;a++)if(b=o.sel.ranges[a],b.head.line==r&&b.head.ch<c.length){k=n(r,c.length);ac(o,a,new h(k,k));break}}function po(n){yt=n}function yc(i,r,u,f,e){var p=i.doc,y,k,l,b;i.display.shift=!1;f||(f=p.sel);var a=i.state.pasteIncoming||"paste"==e,v=nl(r),s=null;if(a&&f.ranges.length>1)if(yt&&yt.text.join("\n")==r){if(f.ranges.length%yt.text.length==0)for(s=[],y=0;y<yt.text.length;y++)s.push(p.splitLines(yt.text[y]))}else v.length==f.ranges.length&&(s=ve(v,function(n){return[n]}));for(l=f.ranges.length-1;l>=0;l--){var w=f.ranges[l],h=w.from(),c=w.to();w.empty()&&(u&&u>0?h=n(h.line,h.ch-u):i.state.overwrite&&!a?c=n(c.line,Math.min(t(p,c.line).text.length,c.ch+o(v).length)):yt&&yt.lineWise&&yt.text.join("\n")==r&&(h=c=n(h.line,0)));k=i.curOp.updateInput;b={from:h,to:c,text:s?s[l%s.length]:v,origin:e||(a?"paste":i.state.cutIncoming?"cut":"+input")};eu(i.doc,b);g(i,"inputRead",i,b)}r&&!a&&rw(i,r);nu(i);i.curOp.updateInput=k;i.curOp.typing=!0;i.state.pasteIncoming=i.state.cutIncoming=!1}function iw(n,t){var i=n.clipboardData&&n.clipboardData.getData("Text");if(i)return n.preventDefault(),t.isReadOnly()||t.options.disableInput||ot(t,function(){return yc(t,i,0,null,"paste")}),!0}function rw(n,i){var e,u,r,f,o,s;if(n.options.electricChars&&n.options.smartIndent)for(e=n.doc.sel,u=e.ranges.length-1;u>=0;u--)if(r=e.ranges[u],!(r.head.ch>100||u&&e.ranges[u-1].head.line==r.head.line)){if(f=n.getModeAt(r.head),o=!1,f.electricChars){for(s=0;s<f.electricChars.length;s++)if(i.indexOf(f.electricChars.charAt(s))>-1){o=ie(n,r.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(t(n.doc,r.head.line).text.slice(0,r.head.ch))&&(o=ie(n,r.head.line,"smart"));o&&g(n,"electricInput",n,r.head.line)}}function uw(t){for(var u,i,f=[],e=[],r=0;r<t.doc.sel.ranges.length;r++)u=t.doc.sel.ranges[r].head.line,i={anchor:n(u,0),head:n(u+1,0)},e.push(i),f.push(t.getRange(i.anchor,i.head));return{text:f,ranges:e}}function fw(n,t){n.setAttribute("autocorrect","off");n.setAttribute("autocapitalize","off");n.setAttribute("spellcheck",!!t)}function ew(){var n=i("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=i("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return nt?n.style.width="1000px":n.setAttribute("wrap","off"),ue&&(n.style.border="1px solid black"),fw(n),t}function pc(i,r,u,f,e){function w(){var f=r.line+u;return!(f<i.first||f>=i.first+i.size)&&(r=new n(f,r.ch,r.sticky),h=t(i,f))}function s(n){var t;if(t=e?dl(i.cm,h,r,u):th(h,r,u),null==t){if(n||!w())return!1;r=ih(e,i.cm,h,r.line,u)}else r=t;return!0}var p=r,b=u,h=t(i,r.line),l,o,a;if("char"==f)s();else if("column"==f)s(!0);else if("word"==f||"group"==f)for(var v=null,y="group"==f,k=i.cm&&i.cm.getHelper(r,"wordChars"),c=!0;!(u<0)||s(!c);c=!1){if(l=h.text.charAt(r.ch)||"\n",o=ye(l,k)?"w":y&&"\n"==l?"n":!y||/\s/.test(l)?null:"p",!y||c||o||(o="s"),v&&v!=o){u<0&&(u=1,s(),r.sticky="after");break}if(o&&(v=o),u>0&&!s(!c))break}return a=vc(i,r,p,b,!0),ys(p,a)&&(a.hitSide=!0),a}function ow(n,t,i,r){var u,s=n.doc,h=t.left,e,o,f;for("page"==r?(e=Math.min(n.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),o=Math.max(e-.5*or(n.display),3),u=(i>0?t.bottom:t.top)+i*o):"line"==r&&(u=i>0?t.bottom+3:t.top-3);f=ph(n,h,u),f.outside;){if(i<0?u<=0:u>=s.height){f.hitSide=!0;break}u+=5*i}return f}function sw(n,i){var u=vh(n,i.line),s,r;if(!u||u.hidden)return null;var f=t(n.doc,i.line),h=da(u,f,i.line),e=ai(f,n.doc.direction),o="left";return e&&(s=gs(e,i.ch),o=s%2?"right":"left"),r=nv(h.map,i.ch,o),r.offset="right"==r.collapse?r.end:r.start,r}function wn(n){for(var t=n;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function lu(n,t){return t&&(n.bad=!0),n}function bn(t,i,r,u,f){function a(n){return function(t){return t.id==n}}function h(){s&&(o+=l,s=!1)}function e(n){n&&(h(),o+=n)}function c(i){var o,v,y,p,w,r;if(1==i.nodeType){if(o=i.getAttribute("cm-text"),null!=o)return void e(o||i.textContent.replace(/\u200b/g,""));if(y=i.getAttribute("cm-marker"),y)return p=t.findMarks(n(u,0),n(f+1,0),a(+y)),void(p.length&&(v=p[0].find())&&e(ir(t.doc,v.from,v.to).join(l)));if("false"==i.getAttribute("contenteditable"))return;for(w=/^(pre|div|p)$/i.test(i.nodeName),w&&h(),r=0;r<i.childNodes.length;r++)c(i.childNodes[r]);w&&(s=!0)}else 3==i.nodeType&&e(i.nodeValue)}for(var o="",s=!1,l=t.doc.lineSeparator();c(i),i!=r;)i=i.nextSibling;return o}function wo(t,i,r){var u,f,e;if(i==t.display.lineDiv){if(u=t.display.lineDiv.childNodes[r],!u)return lu(t.clipPos(n(t.display.viewTo-1)),!0);i=null;r=0}else for(u=i;;u=u.parentNode){if(!u||u==t.display.lineDiv)return null;if(u.parentNode&&u.parentNode==t.display.lineDiv)break}for(f=0;f<t.display.view.length;f++)if(e=t.display.view[f],e.node==u)return kn(e,i,r)}function kn(t,i,r){function v(i,r,u){for(var o,e,h,l,c,f=-1;f<(p?p.length:0);f++)for(o=f<0?k.map:p[f],e=0;e<o.length;e+=3)if(h=o[e+2],h==i||h==r)return l=s(f<0?t.line:t.rest[f]),c=o[e]+u,(u<0||h!=i)&&(c=o[e+(u?1:0)]),n(l,c)}var a=t.text.firstChild,l=!1,y,f,e,h,w,c,b;if(!i||!li(a,i))return lu(n(s(t.line),0),!0);if(i==a&&(l=!0,i=a.childNodes[r],r=0,!i))return y=t.rest?o(t.rest):t.line,lu(n(s(y),y.text.length),l);for(f=3==i.nodeType?i:null,e=i,f||1!=i.childNodes.length||3!=i.firstChild.nodeType||(f=i.firstChild,r&&(r=f.nodeValue.length));e.parentNode!=a;)e=e.parentNode;var k=t.measure,p=k.maps,u=v(f,e,r);if(u)return lu(u,l);for(h=e.nextSibling,w=f?f.nodeValue.length-r:0;h;h=h.nextSibling){if(u=v(h,h.firstChild,0))return lu(n(u.line,u.ch-w),l);w+=h.textContent.length}for(c=e.previousSibling,b=r;c;c=c.previousSibling){if(u=v(c,c.firstChild,-1))return lu(n(u.line,u.ch+b),l);b+=c.textContent.length}}function dn(n,t){function u(){n.value=s.getValue()}var f,e,i,o,s;if((t=t?tr(t):{},t.value=n.value,!t.tabindex&&n.tabIndex&&(t.tabindex=n.tabIndex),!t.placeholder&&n.placeholder&&(t.placeholder=n.placeholder),null==t.autofocus)&&(f=fi(),t.autofocus=f==n||null!=n.getAttribute("autofocus")&&f==document.body),n.form&&(r(n.form,"submit",u),!t.leaveSubmitMethodAlone)){i=n.form;e=i.submit;try{o=i.submit=function(){u();i.submit=e;i.submit();i.submit=o}}catch(n){}}return t.finishInit=function(t){t.save=u;t.getTextArea=function(){return n};t.toTextArea=function(){t.toTextArea=isNaN;u();n.parentNode.removeChild(t.getWrapperElement());n.style.display="";n.form&&(lt(n.form,"submit",u),"function"==typeof n.form.submit&&(n.form.submit=e))}},n.style.display="none",s=a(function(t){return n.parentNode.insertBefore(t,n.nextSibling)},t)}function gn(t){t.off=lt;t.on=r;t.wheelEventPixels=tg;t.Doc=ut;t.splitLines=nl;t.countColumn=at;t.findColumn=ss;t.isWordChar=cs;t.Pass=dc;t.signal=v;t.Line=pr;t.changeEnd=wi;t.scrollbarModel=dw;t.Pos=n;t.cmpPos=u;t.modes=il;t.mimeModes=vu;t.resolveMode=to;t.getMode=eh;t.modeExtensions=yu;t.extendMode=tk;t.copyState=oi;t.startState=ia;t.innerMode=oh;t.commands=rs;t.keyMap=ui;t.keyName=ap;t.isModifierKey=lp;t.lookupKey=hu;t.normalizeKeyMap=tn;t.StringStream=k;t.SharedTextMarker=ku;t.TextMarker=hi;t.LineWidget=bu;t.e_preventDefault=tt;t.e_stopPropagation=na;t.e_stop=ff;t.addClass=nr;t.contains=li;t.rmClass=vr;t.keyNames=gi}var rt=navigator.userAgent,hw=navigator.platform,bi=/gecko\/\d/i.test(rt),cw=/MSIE \d/.test(rt),lw=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(rt),re=/Edge\/(\d+)/.exec(rt),e=cw||lw||re,l=e&&(cw?document.documentMode||6:+(re||lw)[1]),nt=!re&&/WebKit\//.test(rt),ntt=nt&&/Qt\/\d+\.\d+/.test(rt),bo=!re&&/Chrome\//.test(rt),bt=/Opera\//.test(rt),aw=/Apple Computer/.test(navigator.vendor),ttt=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(rt),itt=/PhantomJS/.test(rt),ue=!re&&/AppleWebKit/.test(rt)&&/Mobile\/\w+/.test(rt),ko=/Android/.test(rt),fe=ue||ko||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(rt),kt=ue||/Mac/.test(hw),rtt=/\bCrOS\b/.test(rt),utt=/win/i.test(hw),ar=bt&&rt.match(/Version\/(\d*\.\d*)/),yr,ki,pr,wu,he,st,ht,h,ri,dt,bu,rl,hi,ku,gw,ut,le,du,ui,fs,y,rb,ae;ar&&(ar=Number(ar[1]));ar&&ar>=15&&(bt=!1,nt=!0);var au,vw=kt&&(ntt||bt&&(null==ar||ar<12.11)),wc=bi||e&&l>=9,vr=function(n,t){var r=n.className,i=nf(t).exec(r),u;i&&(u=r.slice(i.index+i[0].length),n.className=r.slice(0,i.index)+(u?i[1]+u:""))};au=document.createRange?function(n,t,i,r){var u=document.createRange();return u.setEnd(r||n,i),u.setStart(n,t),u}:function(n,t,i){var r=document.body.createTextRange();try{r.moveToElementText(n.parentNode)}catch(n){return r}return r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r};yr=function(n){n.select()};ue?yr=function(n){n.selectionStart=0;n.selectionEnd=n.value.length}:e&&(yr=function(n){try{n.select()}catch(n){}});ki=function(){this.id=null};ki.prototype.set=function(n,t){clearTimeout(this.id);this.id=setTimeout(t,n)};var bc,kc,yw=30,dc={toString:function(){return"CodeMirror.Pass"}},ii={scroll:!1},gc={origin:"*mouse"},ee={origin:"+move"},go=[""],ftt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ett=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,pw=!1,di=!1,oe=null,ott=function(){function f(n){return n<=247?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1785?s.charAt(n-1536):1774<=n&&n<=2220?"r":8192<=n&&n<=8203?"w":8204==n?"b":"L"}function n(n,t,i){this.level=n;this.from=t;this.to=i}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",h=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,i=/[LRr]/,r=/[Lb1n]/,u=/[1n]/;return function(e,s){var tt="ltr"==s?"L":"R",ut,at,vt,it,yt,ft,d,g,ot,p,pt,w,kt,st,et,wt,ht,b,k,rt,v,l,gt,nt,ct,y,ni;if(0==e.length||"ltr"==s&&!h.test(e))return!1;for(var a=e.length,c=[],lt=0;lt<a;++lt)c.push(f(e.charCodeAt(lt)));for(ut=0,at=tt;ut<a;++ut)vt=c[ut],"m"==vt?c[ut]=at:at=vt;for(it=0,yt=tt;it<a;++it)ft=c[it],"1"==ft&&"r"==yt?c[it]="n":i.test(ft)&&(yt=ft,"r"==ft&&(c[it]="R"));for(d=1,g=c[0];d<a-1;++d)ot=c[d],"+"==ot&&"1"==g&&"1"==c[d+1]?c[d]="1":","!=ot||g!=c[d+1]||"1"!=g&&"n"!=g||(c[d]=g),g=ot;for(p=0;p<a;++p)if(pt=c[p],","==pt)c[p]="N";else if("%"==pt){for(w=void 0,w=p+1;w<a&&"%"==c[w];++w);for(kt=p&&"!"==c[p-1]||w<a&&"1"==c[w]?"1":"N",st=p;st<w;++st)c[st]=kt;p=w-1}for(et=0,wt=tt;et<a;++et)ht=c[et],"L"==wt&&"1"==ht?c[et]="L":i.test(ht)&&(wt=ht);for(b=0;b<a;++b)if(t.test(c[b])){for(k=void 0,k=b+1;k<a&&t.test(c[k]);++k);for(var dt="L"==(b?c[b-1]:tt),ti="L"==(k<a?c[k]:tt),ii=dt==ti?dt?"L":"R":tt,bt=b;bt<k;++bt)c[bt]=ii;b=k-1}for(v=[],l=0;l<a;)if(r.test(c[l])){for(gt=l,++l;l<a&&r.test(c[l]);++l);v.push(new n(0,gt,l))}else{for(nt=l,ct=v.length,++l;l<a&&"L"!=c[l];++l);for(y=nt;y<l;)if(u.test(c[y])){for(nt<y&&v.splice(ct,0,new n(1,nt,y)),ni=y,++y;y<l&&u.test(c[y]);++y);v.splice(ct,0,new n(2,ni,y));nt=y}else++y;nt<l&&v.splice(ct,0,new n(1,nt,l))}return 1==v[0].level&&(rt=e.match(/^\s+/))&&(v[0].from=rt[0].length,v.unshift(new n(0,0,rt[0].length))),1==o(v).level&&(rt=e.match(/\s+$/))&&(o(v).to-=rt[0].length,v.push(new n(0,a-rt[0].length,a))),"rtl"==s?v.reverse():v}}(),ww=[],r=function(n,t,i){if(n.addEventListener)n.addEventListener(t,i,!1);else if(n.attachEvent)n.attachEvent("on"+t,i);else{var r=n._handlers||(n._handlers={});r[t]=(r[t]||ww).concat(i)}},stt=function(){if(e&&l<9)return!1;var n=i("div");return"draggable"in n||"dragDrop"in n}(),nl=3!="\n\nb".split(/\n/).length?function(n){for(var t,r,u,i=0,f=[],e=n.length;i<=e;)t=n.indexOf("\n",i),t==-1&&(t=n.length),r=n.slice(i,"\r"==n.charAt(t-1)?t-1:t),u=r.indexOf("\r"),u!=-1?(f.push(r.slice(0,u)),i+=u+1):(f.push(r),i=t+1);return f}:function(n){return n.split(/\r\n?|\n/)},htt=window.getSelection?function(n){try{return n.selectionStart!=n.selectionEnd}catch(n){return!1}}:function(n){var t;try{t=n.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=n)&&0!=t.compareEndPoints("StartToEnd",t)},bw=function(){var n=i("div");return"oncopy"in n||(n.setAttribute("oncopy","return;"),"function"==typeof n.oncopy)}(),tl=null,il={},vu={},yu={},k=function(n,t){this.pos=this.start=0;this.string=n;this.tabSize=t||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};k.prototype.eol=function(){return this.pos>=this.string.length};k.prototype.sol=function(){return this.pos==this.lineStart};k.prototype.peek=function(){return this.string.charAt(this.pos)||void 0};k.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)};k.prototype.eat=function(n){var i,t=this.string.charAt(this.pos);if(i="string"==typeof n?t==n:t&&(n.test?n.test(t):n(t)))return++this.pos,t};k.prototype.eatWhile=function(n){for(var t=this.pos;this.eat(n););return this.pos>t};k.prototype.eatSpace=function(){for(var n=this,t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++n.pos;return this.pos>t};k.prototype.skipToEnd=function(){this.pos=this.string.length};k.prototype.skipTo=function(n){var t=this.string.indexOf(n,this.pos);if(t>-1)return this.pos=t,!0};k.prototype.backUp=function(n){this.pos-=n};k.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=at(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?at(this.string,this.lineStart,this.tabSize):0)};k.prototype.indentation=function(){return at(this.string,null,this.tabSize)-(this.lineStart?at(this.string,this.lineStart,this.tabSize):0)};k.prototype.match=function(n,t,i){var r,u,f;return"string"!=typeof n?(r=this.string.slice(this.pos).match(n),r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)):(u=function(n){return i?n.toLowerCase():n},f=this.string.substr(this.pos,n.length),u(f)==u(n)?(t!==!1&&(this.pos+=n.length),!0):void 0)};k.prototype.current=function(){return this.string.slice(this.start,this.pos)};k.prototype.hideFirstChars=function(n,t){this.lineStart+=n;try{return t()}finally{this.lineStart-=n}};pr=function(n,t,i){this.text=n;vl(this,t);this.height=i?i(this):1};pr.prototype.lineNo=function(){return s(this)};dr(pr);var wr,ctt={},ltt={},pu=null,se=null,kw={left:0,right:0,top:0,bottom:0},br=function(n,t,u){this.cm=u;var f=this.vert=i("div",[i("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=i("div",[i("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");n(f);n(o);r(f,"scroll",function(){f.clientHeight&&t(f.scrollTop,"vertical")});r(o,"scroll",function(){o.clientWidth&&t(o.scrollLeft,"horizontal")});this.checkedZeroWidth=!1;e&&l<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};br.prototype.update=function(n){var i=n.scrollWidth>n.clientWidth+1,r=n.scrollHeight>n.clientHeight+1,t=n.nativeBarWidth,u,f;return r?(this.vert.style.display="block",this.vert.style.bottom=i?t+"px":"0",u=n.viewHeight-(i?t:0),this.vert.firstChild.style.height=Math.max(0,n.scrollHeight-n.clientHeight+u)+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),i?(this.horiz.style.display="block",this.horiz.style.right=r?t+"px":"0",this.horiz.style.left=n.barLeft+"px",f=n.viewWidth-n.barLeft-(r?t:0),this.horiz.firstChild.style.width=Math.max(0,n.scrollWidth-n.clientWidth+f)+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&n.clientHeight>0&&(0==t&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?t:0,bottom:i?t:0}};br.prototype.setScrollLeft=function(n){this.horiz.scrollLeft!=n&&(this.horiz.scrollLeft=n);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")};br.prototype.setScrollTop=function(n){this.vert.scrollTop!=n&&(this.vert.scrollTop=n);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")};br.prototype.zeroWidthHack=function(){var n=kt&&!ttt?"12px":"18px";this.horiz.style.height=this.vert.style.width=n;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new ki;this.disableVert=new ki};br.prototype.enableZeroWidthBar=function(n,t,i){function r(){var u=n.getBoundingClientRect(),f="vert"==i?document.elementFromPoint(u.right-1,(u.top+u.bottom)/2):document.elementFromPoint((u.right+u.left)/2,u.bottom-1);f!=n?n.style.pointerEvents="none":t.set(1e3,r)}n.style.pointerEvents="auto";t.set(1e3,r)};br.prototype.clear=function(){var n=this.horiz.parentNode;n.removeChild(this.horiz);n.removeChild(this.vert)};wu=function(){};wu.prototype.update=function(){return{bottom:0,right:0}};wu.prototype.setScrollLeft=function(){};wu.prototype.setScrollTop=function(){};wu.prototype.clear=function(){};var dw={"native":br,"null":wu},att=0,ns=function(n,t,i){var r=n.display;this.viewport=t;this.visible=nc(r,n.doc,t);this.editorIsHidden=!r.wrapper.offsetWidth;this.wrapperHeight=r.wrapper.clientHeight;this.wrapperWidth=r.wrapper.clientWidth;this.oldDisplayWidth=fr(n);this.force=i;this.dims=wh(n);this.events=[]};ns.prototype.signal=function(n,t){vt(n,t)&&this.events.push(arguments)};ns.prototype.finish=function(){for(var t=this,n=0;n<this.events.length;n++)v.apply(null,t.events[n])};he=0;st=null;e?st=-.53:bi?st=15:bo?st=-.7:aw&&(st=-1/3);ht=function(n,t){this.ranges=n;this.primIndex=t};ht.prototype.primary=function(){return this.ranges[this.primIndex]};ht.prototype.equals=function(n){var u=this,t,i,r;if(n==this)return!0;if(n.primIndex!=this.primIndex||n.ranges.length!=this.ranges.length)return!1;for(t=0;t<this.ranges.length;t++)if(i=u.ranges[t],r=n.ranges[t],!ys(i.anchor,r.anchor)||!ys(i.head,r.head))return!1;return!0};ht.prototype.deepCopy=function(){for(var t=this,i=[],n=0;n<this.ranges.length;n++)i[n]=new h(ps(t.ranges[n].anchor),ps(t.ranges[n].head));return new ht(i,this.primIndex)};ht.prototype.somethingSelected=function(){for(var t=this,n=0;n<this.ranges.length;n++)if(!t.ranges[n].empty())return!0;return!1};ht.prototype.contains=function(n,t){var f=this,i,r;for(t||(t=n),i=0;i<this.ranges.length;i++)if(r=f.ranges[i],u(t,r.from())>=0&&u(n,r.to())<=0)return i;return-1};h=function(n,t){this.anchor=n;this.head=t};h.prototype.from=function(){return be(this.anchor,this.head)};h.prototype.to=function(){return we(this.anchor,this.head)};h.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};ri=function(n){var r=this,i,t;for(this.lines=n,this.parent=null,i=0,t=0;t<n.length;++t)n[t].parent=r,i+=n[t].height;this.height=i};ri.prototype.chunkSize=function(){return this.lines.length};ri.prototype.removeInner=function(n,t){for(var i,u=this,r=n,f=n+t;r<f;++r)i=u.lines[r],u.height-=i.height,uk(i),g(i,"delete");this.lines.splice(n,t)};ri.prototype.collapse=function(n){n.push.apply(n,this.lines)};ri.prototype.insertInner=function(n,t,i){var u=this,r;for(this.height+=i,this.lines=this.lines.slice(0,n).concat(t).concat(this.lines.slice(n)),r=0;r<t.length;++r)t[r].parent=u};ri.prototype.iterN=function(n,t,i){for(var r=this,u=n+t;n<u;++n)if(i(r.lines[n]))return!0};dt=function(n){var f=this,t;this.children=n;for(var r=0,u=0,i=0;i<n.length;++i)t=n[i],r+=t.chunkSize(),u+=t.height,t.parent=f;this.size=r;this.height=u;this.parent=null};dt.prototype.chunkSize=function(){return this.size};dt.prototype.removeInner=function(n,t){var e=this,r,i,u,f,s,o;for(this.size-=t,r=0;r<this.children.length;++r)if(i=e.children[r],u=i.chunkSize(),n<u){if(f=Math.min(t,u-n),s=i.height,i.removeInner(n,f),e.height-=s-i.height,u==f&&(e.children.splice(r--,1),i.parent=null),0==(t-=f))break;n=0}else n-=u;this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof ri))&&(o=[],this.collapse(o),this.children=[new ri(o)],this.children[0].parent=this)};dt.prototype.collapse=function(n){for(var i=this,t=0;t<this.children.length;++t)i.children[t].collapse(n)};dt.prototype.insertInner=function(n,t,i){var f=this,u,r,s,h,e,o;for(this.size+=t.length,this.height+=i,u=0;u<this.children.length;++u){if(r=f.children[u],s=r.chunkSize(),n<=s){if(r.insertInner(n,t,i),r.lines&&r.lines.length>50){for(h=r.lines.length%25+25,e=h;e<r.lines.length;)o=new ri(r.lines.slice(e,e+=25)),r.height-=o.height,f.children.splice(++u,0,o),o.parent=f;r.lines=r.lines.slice(0,h);f.maybeSpill()}break}n-=s}};dt.prototype.maybeSpill=function(){var n,r,t,u,i;if(!(this.children.length<=10)){n=this;do r=n.children.splice(n.children.length-5,5),t=new dt(r),n.parent?(n.size-=t.size,n.height-=t.height,u=d(n.parent.children,n),n.parent.children.splice(u+1,0,t)):(i=new dt(n.children),i.parent=n,n.children=[i,t],n=i),t.parent=n.parent;while(n.children.length>10);n.parent.maybeSpill()}};dt.prototype.iterN=function(n,t,i){for(var f,u,e,o=this,r=0;r<this.children.length;++r)if(f=o.children[r],u=f.chunkSize(),n<u){if(e=Math.min(t,u-n),f.iterN(n,e,i))return!0;if(0==(t-=e))break;n=0}else n-=u};bu=function(n,t,i){var u=this,r;if(i)for(r in i)i.hasOwnProperty(r)&&(u[r]=i[r]);this.doc=n;this.node=t};bu.prototype.clear=function(){var e=this,n=this.doc.cm,t=this.line.widgets,i=this.line,u=s(i),r,f;if(null!=u&&t){for(r=0;r<t.length;++r)t[r]==e&&t.splice(r--,1);t.length||(i.widgets=null);f=sf(this);gt(i,Math.max(0,i.height-f));n&&(ot(n,function(){op(n,i,-f);vi(n,u,"widget")}),g(n,"lineWidgetCleared",n,this,u))}};bu.prototype.changed=function(){var r=this,u=this.height,n=this.doc.cm,t=this.line,i;this.height=null;i=sf(this)-u;i&&(gt(t,t.height+i),n&&ot(n,function(){n.curOp.forceUpdate=!0;op(n,t,i);g(n,"lineWidgetChanged",n,r,s(t))}))};dr(bu);rl=0;hi=function(n,t){this.lines=[];this.type=t;this.doc=n;this.id=++rl};hi.prototype.clear=function(){var i=this,n,o,u,t,r,e,l,a;if(!this.explicitlyCleared){n=this.doc.cm;o=n&&!n.curOp;(o&&iu(n),vt(this,"clear"))&&(u=this.find(),u&&g(this,"clear",u.from,u.to));for(var f=null,h=null,c=0;c<this.lines.length;++c)t=i.lines[c],r=rf(t.markedSpans,i),n&&!i.collapsed?vi(n,s(t),"text"):n&&(null!=r.to&&(h=s(t)),null!=r.from&&(f=s(t))),t.markedSpans=hb(t.markedSpans,r),null==r.from&&i.collapsed&&!ur(i.doc,t)&&n&&gt(t,or(n.display));if(n&&this.collapsed&&!n.options.lineWrapping)for(e=0;e<this.lines.length;++e)l=ni(i.lines[e]),a=no(l),a>n.display.maxLineLength&&(n.display.maxLine=l,n.display.maxLineLength=a,n.display.maxLineChanged=!0);null!=f&&n&&this.collapsed&&et(n,f,h+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,n&&ky(n.doc));n&&g(n,"markerCleared",n,this,f,h);o&&ru(n);this.parent&&this.parent.clear()}};hi.prototype.find=function(t,i){var h=this,f,o,e,r,u;for(null==t&&"bookmark"==this.type&&(t=1),e=0;e<this.lines.length;++e){if(r=h.lines[e],u=rf(r.markedSpans,h),null!=u.from&&(f=n(i?r:s(r),u.from),t==-1))return f;if(null!=u.to&&(o=n(i?r:s(r),u.to),1==t))return o}return f&&{from:f,to:o}};hi.prototype.changed=function(){var r=this,i=this.find(-1,!0),t=this,n=this.doc.cm;i&&n&&ot(n,function(){var u=i.line,h=s(i.line),e=vh(n,h),o,f;(e&&(tv(e),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,ur(t.doc,u)||null==t.height)||(o=t.height,t.height=null,f=sf(t)-o,f&&gt(u,u.height+f));g(n,"markerChanged",n,r)})};hi.prototype.attachLine=function(n){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&d(t.maybeHiddenMarkers,this)!=-1||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(n)};hi.prototype.detachLine=function(n){if(this.lines.splice(d(this.lines,n),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};dr(hi);ku=function(n,t){var r=this,i;for(this.markers=n,this.primary=t,i=0;i<n.length;++i)n[i].parent=r};ku.prototype.clear=function(){var t=this,n;if(!this.explicitlyCleared){for(this.explicitlyCleared=!0,n=0;n<this.markers.length;++n)t.markers[n].clear();g(this,"clear")}};ku.prototype.find=function(n,t){return this.primary.find(n,t)};dr(ku);gw=0;ut=function(t,i,r,u,f){if(!(this instanceof ut))return new ut(t,i,r,u,f);null==r&&(r=0);dt.call(this,[new ri([new pr("",null)])]);this.first=r;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=r;var e=n(r,0);this.sel=pi(e);this.history=new oo(null);this.id=++gw;this.modeOption=i;this.lineSep=u;this.direction="rtl"==f?"rtl":"ltr";this.extend=!1;"string"==typeof t&&(t=this.splitLines(t));cc(this,{from:e,to:e,text:t});it(this,pi(e),ii)};ut.prototype=el(dt.prototype,{constructor:ut,iter:function(n,t,i){i?this.iterN(n-this.first,t-n,i):this.iterN(this.first,this.first+this.size,n)},insert:function(n,t){for(var r=0,i=0;i<t.length;++i)r+=t[i].height;this.insertInner(n-this.first,t,r)},remove:function(n,t){this.removeInner(n-this.first,t)},getValue:function(n){var t=as(this,this.first,this.first+this.size);return n===!1?t:t.join(n||this.lineSeparator())},setValue:b(function(i){var r=n(this.first,0),u=this.first+this.size-1;eu(this,{from:r,to:n(u,t(this,u).text.length),text:this.splitLines(i),origin:"setValue",full:!0},!0);this.cm&&yf(this.cm,0,0);it(this,pi(r),ii)}),replaceRange:function(n,t,i,r){t=f(this,t);i=i?f(this,i):t;ou(this,n,t,i,r)},getRange:function(n,t,i){var r=ir(this,f(this,n),f(this,t));return i===!1?r:r.join(i||this.lineSeparator())},getLine:function(n){var t=this.getLineHandle(n);return t&&t.text},getLineHandle:function(n){if(tf(this,n))return t(this,n)},getLineNumber:function(n){return s(n)},getLineHandleVisualStart:function(n){return"number"==typeof n&&(n=t(this,n)),ni(n)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(n){return f(this,n)},getCursor:function(n){var t=this.sel.primary();return null==n||"head"==n?t.head:"anchor"==n?t.anchor:"end"==n||"to"==n||n===!1?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:b(function(t,i,r){py(this,f(this,"number"==typeof t?n(t,i||0):t),null,r)}),setSelection:b(function(n,t,i){py(this,f(this,n),f(this,t||n),i)}),extendSelection:b(function(n,t,i){ho(this,f(this,n),t&&f(this,t),i)}),extendSelections:b(function(n,t){yy(this,cl(this,n),t)}),extendSelectionsBy:b(function(n,t){var i=ve(this.sel.ranges,n);yy(this,cl(this,i),t)}),setSelections:b(function(n,t,i){var e=this,u,r;if(n.length){for(u=[],r=0;r<n.length;r++)u[r]=new h(f(e,n[r].anchor),f(e,n[r].head));null==t&&(t=Math.min(n.length-1,this.sel.primIndex));it(this,wt(u,t),i)}}),addSelection:b(function(n,t,i){var r=this.sel.ranges.slice(0);r.push(new h(f(this,n),f(this,t||n)));it(this,wt(r,r.length-1),i)}),getSelection:function(n){for(var u,t,f=this,r=this.sel.ranges,i=0;i<r.length;i++)u=ir(f,r[i].from(),r[i].to()),t=t?t.concat(u):u;return n===!1?t:t.join(n||this.lineSeparator())},getSelections:function(n){for(var i,u=this,f=[],r=this.sel.ranges,t=0;t<r.length;t++)i=ir(u,r[t].from(),r[t].to()),n!==!1&&(i=i.join(n||u.lineSeparator())),f[t]=i;return f},replaceSelection:function(n,t,i){for(var u=[],r=0;r<this.sel.ranges.length;r++)u[r]=n;this.replaceSelections(u,t,i||"+input")},replaceSelections:b(function(n,t,i){for(var e,o,f,s=this,u=[],h=this.sel,r=0;r<h.ranges.length;r++)e=h.ranges[r],u[r]={from:e.from(),to:e.to(),text:s.splitLines(n[r]),origin:i};for(o=t&&"end"!=t&&ig(this,u,t),f=u.length-1;f>=0;f--)eu(s,u[f]);o?wy(this,o):this.cm&&nu(this.cm)}),undo:b(function(){lo(this,"undo")}),redo:b(function(){lo(this,"redo")}),undoSelection:b(function(){lo(this,"undo",!0)}),redoSelection:b(function(){lo(this,"redo",!0)}),setExtending:function(n){this.extend=n},getExtending:function(){return this.extend},historySize:function(){for(var t,n=this.history,r=0,u=0,i=0;i<n.done.length;i++)n.done[i].ranges||++r;for(t=0;t<n.undone.length;t++)n.undone[t].ranges||++u;return{undo:r,redo:u}},clearHistory:function(){this.history=new oo(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(n){return n&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(n){return this.history.generation==(n||this.cleanGeneration)},getHistory:function(){return{done:uu(this.history.done),undone:uu(this.history.undone)}},setHistory:function(n){var t=this.history=new oo(this.history.maxGeneration);t.done=uu(n.done.slice(0),null,!0);t.undone=uu(n.undone.slice(0),null,!0)},setGutterMarker:b(function(n,t,i){return ne(this,n,"gutter",function(n){var r=n.gutterMarkers||(n.gutterMarkers={});return r[t]=i,!i&&ol(r)&&(n.gutterMarkers=null),!0})}),clearGutter:b(function(n){var t=this;this.iter(function(i){i.gutterMarkers&&i.gutterMarkers[n]&&ne(t,i,"gutter",function(){return i.gutterMarkers[n]=null,ol(i.gutterMarkers)&&(i.gutterMarkers=null),!0})})}),lineInfo:function(n){var i;if("number"==typeof n){if(!tf(this,n)||(i=n,n=t(this,n),!n))return null}else if(i=s(n),null==i)return null;return{line:i,handle:n,text:n.text,gutterMarkers:n.gutterMarkers,textClass:n.textClass,bgClass:n.bgClass,wrapClass:n.wrapClass,widgets:n.widgets}},addLineClass:b(function(n,t,i){return ne(this,n,"gutter"==t?"gutter":"class",function(n){var r="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(n[r]){if(nf(i).test(n[r]))return!1;n[r]+=" "+i}else n[r]=i;return!0})}),removeLineClass:b(function(n,t,i){return ne(this,n,"gutter"==t?"gutter":"class",function(n){var f="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",u=n[f],r,e;if(!u)return!1;if(null==i)n[f]=null;else{if(r=u.match(nf(i)),!r)return!1;e=r.index+r[0].length;n[f]=u.slice(0,r.index)+(r.index&&e!=u.length?" ":"")+u.slice(e)||null}return!0})}),addLineWidget:b(function(n,t,i){return lg(this,n,t,i)}),removeLineWidget:function(n){n.clear()},markText:function(n,t,i){return su(this,f(this,n),f(this,t),i,i&&i.type||"range")},setBookmark:function(n,t){var i={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return n=f(this,n),su(this,n,n,i,"bookmark")},findMarksAt:function(n){var e,r,u,i;if(n=f(this,n),e=[],r=t(this,n.line).markedSpans,r)for(u=0;u<r.length;++u)i=r[u],(null==i.from||i.from<=n.ch)&&(null==i.to||i.to>=n.ch)&&e.push(i.marker.parent||i.marker);return e},findMarks:function(n,t,i){n=f(this,n);t=f(this,t);var u=[],r=n.line;return this.iter(n.line,t.line+1,function(f){var s=f.markedSpans,o,e;if(s)for(o=0;o<s.length;o++)e=s[o],null!=e.to&&r==n.line&&n.ch>=e.to||null==e.from&&r!=n.line||null!=e.from&&r==t.line&&e.from>=t.ch||i&&!i(e.marker)||u.push(e.marker.parent||e.marker);++r}),u},getAllMarks:function(){var n=[];return this.iter(function(t){var r=t.markedSpans,i;if(r)for(i=0;i<r.length;++i)null!=r[i].from&&n.push(r[i].marker)}),n},posFromIndex:function(t){var i,r=this.first,u=this.lineSeparator().length;return this.iter(function(n){var f=n.text.length+u;return f>t?(i=t,!0):(t-=f,void++r)}),f(this,n(r,i))},indexFromPos:function(n){var t,i;return(n=f(this,n),t=n.ch,n.line<this.first||n.ch<0)?0:(i=this.lineSeparator().length,this.iter(this.first,n.line,function(n){t+=n.text.length+i}),t)},copy:function(n){var t=new ut(as(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,n&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(n){var i,r,t;return n||(n={}),i=this.first,r=this.first+this.size,null!=n.from&&n.from>i&&(i=n.from),null!=n.to&&n.to<r&&(r=n.to),t=new ut(as(this,i,r),n.mode||this.modeOption,i,this.lineSep,this.direction),n.sharedHist&&(t.history=this.history),(this.linked||(this.linked=[])).push({doc:t,sharedHist:n.sharedHist}),t.linked=[{doc:this,isParent:!0,sharedHist:n.sharedHist}],vg(t,sp(this)),t},unlinkDoc:function(n){var i=this,t,u,r;if(n instanceof a&&(n=n.doc),this.linked)for(t=0;t<this.linked.length;++t)if(u=i.linked[t],u.doc==n){i.linked.splice(t,1);n.unlinkDoc(i);yg(sp(i));break}n.history==this.history&&(r=[n.id],lr(n,function(n){return r.push(n.id)},!0),n.history=new oo(null),n.history.done=uu(this.history.done,r),n.history.undone=uu(this.history.undone,r))},iterLinkedDocs:function(n){lr(this,n)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(n){return this.lineSep?n.split(this.lineSep):nl(n)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:b(function(n){"rtl"!=n&&(n="ltr");n!=this.direction&&(this.direction=n,this.iter(function(n){return n.order=null}),this.cm&&rg(this.cm))})});ut.prototype.eachLine=ut.prototype.iter;for(var nb=0,tb=!1,gi={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ce=0;ce<10;ce++)gi[ce+48]=gi[ce+96]=String(ce);for(le=65;le<=90;le++)gi[le]=String.fromCharCode(le);for(du=1;du<=12;du++)gi[du+111]=gi[du+63235]="F"+du;ui={};ui.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};ui.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};ui.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};ui.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};ui.default=kt?ui.macDefault:ui.pcDefault;var ts,is,rs={selectAll:np,singleSelection:function(n){return n.setSelection(n.getCursor("anchor"),n.getCursor("head"),ii)},killLine:function(i){return cu(i,function(r){if(r.empty()){var u=t(i.doc,r.head.line).text.length;return r.head.ch==u&&r.head.line<i.lastLine()?{from:r.head,to:n(r.head.line+1,0)}:{from:r.head,to:n(r.head.line,u)}}return{from:r.from(),to:r.to()}})},deleteLine:function(t){return cu(t,function(i){return{from:n(i.from().line,0),to:f(t.doc,n(i.to().line+1,0))}})},delLineLeft:function(t){return cu(t,function(t){return{from:n(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(n){return cu(n,function(t){var i=n.charCoords(t.head,"div").top+5,r=n.coordsChar({left:0,top:i},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(n){return cu(n,function(t){var i=n.charCoords(t.head,"div").top+5,r=n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:r}})},undo:function(n){return n.undo()},redo:function(n){return n.redo()},undoSelection:function(n){return n.undoSelection()},redoSelection:function(n){return n.redoSelection()},goDocStart:function(t){return t.extendSelection(n(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(n(t.lastLine()))},goLineStart:function(n){return n.extendSelectionsBy(function(t){return vp(n,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(n){return n.extendSelectionsBy(function(t){return yp(n,t.head)},{origin:"+move",bias:1})},goLineEnd:function(n){return n.extendSelectionsBy(function(t){return rn(n,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(n){return n.extendSelectionsBy(function(t){var i=n.charCoords(t.head,"div").top+5;return n.coordsChar({left:n.display.lineDiv.offsetWidth+100,top:i},"div")},ee)},goLineLeft:function(n){return n.extendSelectionsBy(function(t){var i=n.charCoords(t.head,"div").top+5;return n.coordsChar({left:0,top:i},"div")},ee)},goLineLeftSmart:function(n){return n.extendSelectionsBy(function(t){var r=n.charCoords(t.head,"div").top+5,i=n.coordsChar({left:0,top:r},"div");return i.ch<n.getLine(i.line).search(/\S/)?yp(n,t.head):i},ee)},goLineUp:function(n){return n.moveV(-1,"line")},goLineDown:function(n){return n.moveV(1,"line")},goPageUp:function(n){return n.moveV(-1,"page")},goPageDown:function(n){return n.moveV(1,"page")},goCharLeft:function(n){return n.moveH(-1,"char")},goCharRight:function(n){return n.moveH(1,"char")},goColumnLeft:function(n){return n.moveH(-1,"column")},goColumnRight:function(n){return n.moveH(1,"column")},goWordLeft:function(n){return n.moveH(-1,"word")},goGroupRight:function(n){return n.moveH(1,"group")},goGroupLeft:function(n){return n.moveH(-1,"group")},goWordRight:function(n){return n.moveH(1,"word")},delCharBefore:function(n){return n.deleteH(-1,"char")},delCharAfter:function(n){return n.deleteH(1,"char")},delWordBefore:function(n){return n.deleteH(-1,"word")},delWordAfter:function(n){return n.deleteH(1,"word")},delGroupBefore:function(n){return n.deleteH(-1,"group")},delGroupAfter:function(n){return n.deleteH(1,"group")},indentAuto:function(n){return n.indentSelection("smart")},indentMore:function(n){return n.indentSelection("add")},indentLess:function(n){return n.indentSelection("subtract")},insertTab:function(n){return n.replaceSelection("\t")},insertSoftTab:function(n){for(var r,e,u=[],f=n.listSelections(),t=n.options.tabSize,i=0;i<f.length;i++)r=f[i].from(),e=at(n.getLine(r.line),r.ch,t),u.push(hs(t-e%t));n.replaceSelections(u)},defaultTab:function(n){n.somethingSelected()?n.indentSelection("add"):n.execCommand("insertTab")},transposeChars:function(i){return ot(i,function(){for(var r,u,f,o=i.listSelections(),s=[],e=0;e<o.length;e++)o[e].empty()&&(r=o[e].head,u=t(i.doc,r.line).text,u&&((r.ch==u.length&&(r=new n(r.line,r.ch-1)),r.ch>0)?(r=new n(r.line,r.ch+1),i.replaceRange(u.charAt(r.ch-1)+u.charAt(r.ch-2),n(r.line,r.ch-2),r,"+transpose")):r.line>i.doc.first&&(f=t(i.doc,r.line-1).text,f&&(r=new n(r.line,1),i.replaceRange(u.charAt(0)+i.doc.lineSeparator()+f.charAt(f.length-1),n(r.line-1,f.length-1),r,"+transpose")))),s.push(new h(r,r)));i.setSelections(s)})},newlineAndIndent:function(n){return ot(n,function(){for(var r,t=n.listSelections(),i=t.length-1;i>=0;i--)n.replaceRange(n.doc.lineSeparator(),t[i].anchor,t[i].head,"+input");for(t=n.listSelections(),r=0;r<t.length;r++)n.indentLine(t[r].from().line,null,!0);nu(n)})},openLine:function(n){return n.replaceSelection("\n","start")},toggleOverwrite:function(n){return n.toggleOverwrite()}},vtt=new ki,ul=null,gu={toString:function(){return"CodeMirror.Init"}},ib={},us={};a.defaults=ib;a.optionHandlers=us;fs=[];a.defineInitHook=function(n){return fs.push(n)};var yt=null,ytt=function(i){var u=i.optionHandlers,r=i.helpers={};i.prototype={constructor:i,focus:function(){window.focus();this.display.input.focus()},setOption:function(n,t){var i=this.options,r=i[n];i[n]==t&&"mode"!=n||(i[n]=t,u.hasOwnProperty(n)&&w(this,u[n])(this,t,r),v(this,"optionChange",this,n))},getOption:function(n){return this.options[n]},getDoc:function(){return this.doc},addKeyMap:function(n,t){this.state.keyMaps[t?"push":"unshift"](ao(n))},removeKeyMap:function(n){for(var i=this.state.keyMaps,t=0;t<i.length;++t)if(i[t]==n||i[t].name==n)return i.splice(t,1),!0},addOverlay:ft(function(n,t){var r=n.token?n:i.getMode(this.options,n);if(r.startState)throw new Error("Overlays may not be stateful.");ub(this.state.overlays,{mode:r,modeSpec:n,opaque:t&&t.opaque,priority:t&&t.priority||0},function(n){return n.priority});this.state.modeGen++;et(this)}),removeOverlay:ft(function(n){for(var r,u=this,i=this.state.overlays,t=0;t<i.length;++t)if(r=i[t].modeSpec,r==n||"string"==typeof n&&r.name==n)return i.splice(t,1),u.state.modeGen++,void et(u)}),indentLine:ft(function(n,t,i){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract");tf(this.doc,n)&&ie(this,n,t,i)}),indentSelection:ft(function(n){for(var r,f,e,t=this,o=this.doc.sel.ranges,u=-1,i=0;i<o.length;i++)if(r=o[i],r.empty())r.head.line>u&&(ie(t,r.head.line,n,!0),u=r.head.line,i==t.doc.sel.primIndex&&nu(t));else{var s=r.from(),c=r.to(),l=Math.max(u,s.line);for(u=Math.min(t.lastLine(),c.line-(c.ch?0:1))+1,f=l;f<u;++f)ie(t,f,n);e=t.doc.sel.ranges;0==s.ch&&o.length==e.length&&e[i].from().ch>0&&ac(t.doc,i,new h(s,e[i].to()),ii)}}),getTokenAt:function(n,t){return ea(this,n,t)},getLineTokens:function(t,i){return ea(this,n(t),i,!0)},getTokenTypeAt:function(n){var i,e;n=f(this.doc,n);var r,u=ua(this,t(this.doc,n.line)),s=0,h=(u.length-1)/2,o=n.ch;if(0==o)r=u[2];else for(;;)if(i=s+h>>1,(i?u[2*i-1]:0)>=o)h=i;else{if(!(u[2*i+1]<o)){r=u[2*i+2];break}s=i+1}return e=r?r.indexOf("overlay "):-1,e<0?r:0==e?null:r.slice(0,e-1)},getModeAt:function(n){var t=this.doc.mode;return t.innerMode?i.innerMode(t,this.getTokenAt(n).state).mode:t},getHelper:function(n,t){return this.getHelpers(n,t)[0]},getHelpers:function(n,t){var c=this,f=[],u,i,e,h,o,s;if(!r.hasOwnProperty(t))return f;if(u=r[t],i=this.getModeAt(n),"string"==typeof i[t])u[i[t]]&&f.push(u[i[t]]);else if(i[t])for(e=0;e<i[t].length;e++)h=u[i[t][e]],h&&f.push(h);else i.helperType&&u[i.helperType]?f.push(u[i.helperType]):u[i.name]&&f.push(u[i.name]);for(o=0;o<u._global.length;o++)s=u._global[o],s.pred(i,c)&&d(f,s.val)==-1&&f.push(s.val);return f},getStateAfter:function(n,t){var i=this.doc;return n=hl(i,null==n?i.first+i.size-1:n),ef(this,n+1,t)},cursorCoords:function(n,t){var r,i=this.doc.sel.primary();return r=null==n?i.head:"object"==typeof n?f(this.doc,n):n?i.from():i.to(),pt(this,r,t||"page")},charCoords:function(n,t){return yh(this,f(this.doc,n),t||"page")},coordsChar:function(n,t){return n=fv(this,n,t||"page"),ph(this,n.left,n.top)},lineAtHeight:function(n,t){return n=fv(this,{top:n,left:0},t||"page").top,rr(this.doc,n+this.display.viewOffset)},heightAtLine:function(n,i,r){var u,f=!1,e;return"number"==typeof n?(e=this.doc.first+this.doc.size-1,n<this.doc.first?n=this.doc.first:n>e&&(n=e,f=!0),u=t(this.doc,n)):u=n,gr(this,u,{top:0,left:0},i||"page",r||f).top+(f?this.doc.height-ei(u):0)},defaultTextHeight:function(){return or(this.display)},defaultCharWidth:function(){return lf(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(n,t,i,r,u){var s=this.display,o,e,h,c;n=pt(this,f(this.doc,n));o=n.bottom;e=n.left;(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==r)?o=n.top:("above"==r||"near"==r)&&(h=Math.max(s.wrapper.clientHeight,this.doc.height),c=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth),("above"==r||n.bottom+t.offsetHeight>h)&&n.top>t.offsetHeight?o=n.top-t.offsetHeight:n.bottom+t.offsetHeight<=h&&(o=n.bottom),e+t.offsetWidth>c&&(e=c-t.offsetWidth));t.style.top=o+"px";t.style.left=t.style.right="";"right"==u?(e=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==u?e=0:"middle"==u&&(e=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=e+"px");i&&sd(this,{left:e,top:o,right:e+t.offsetWidth,bottom:o+t.offsetHeight})},triggerOnKeyDown:ft(wp),triggerOnKeyPress:ft(kp),triggerOnKeyUp:bp,execCommand:function(n){if(rs.hasOwnProperty(n))return rs[n].call(null,this)},triggerElectric:ft(function(n){rw(this,n)}),findPosH:function(n,t,i,r){var s=this,o=1,u,e;for(t<0&&(o=-1,t=-t),u=f(this.doc,n),e=0;e<t&&(u=pc(s.doc,u,o,i,r),!u.hitSide);++e);return u},moveH:ft(function(n,t){var i=this;this.extendSelectionsBy(function(r){return i.display.shift||i.doc.extend||r.empty()?pc(i.doc,r.head,n,t,i.options.rtlMoveVisually):n<0?r.from():r.to()},ee)}),deleteH:ft(function(n,t){var r=this.doc.sel,i=this.doc;r.somethingSelected()?i.replaceSelection("",null,"+delete"):cu(this,function(r){var u=pc(i,r.head,n,t,!1);return n<0?{from:u,to:r.head}:{from:r.head,to:u}})}),findPosV:function(n,t,i,r){var h=this,c=1,o=r,u,s,e;for(t<0&&(c=-1,t=-t),u=f(this.doc,n),s=0;s<t;++s)if(e=pt(h,u,"div"),null==o?o=e.left:e.left=o,u=ow(h,e,c,i),u.hitSide)break;return u},moveV:ft(function(n,t){var u=this,i=this.doc,f=[],e=!this.display.shift&&!i.extend&&i.sel.somethingSelected(),r;if(i.extendSelectionsBy(function(r){var o,s;return e?n<0?r.from():r.to():(o=pt(u,r.head,"div"),null!=r.goalColumn&&(o.left=r.goalColumn),f.push(o.left),s=ow(u,o,n,t),"page"==t&&r==i.sel.primary()&&ic(u,yh(u,s,"div").top-o.top),s)},ee),f.length)for(r=0;r<i.sel.ranges.length;r++)i.sel.ranges[r].goalColumn=f[r]}),findWordAt:function(i){var c=this.doc,u=t(c,i.line).text,r=i.ch,f=i.ch,e,o,s;if(u){for(e=this.getHelper(i,"wordChars"),"before"!=i.sticky&&f!=u.length||!r?++f:--r,o=u.charAt(r),s=ye(o,e)?function(n){return ye(n,e)}:/\s/.test(o)?function(n){return/\s/.test(n)}:function(n){return!/\s/.test(n)&&!ye(n)};r>0&&s(u.charAt(r-1));)--r;for(;f<u.length&&s(u.charAt(f));)++f}return new h(n(i.line,r),n(i.line,f))},toggleOverwrite:function(n){null!=n&&n==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?nr(this.display.cursorDiv,"CodeMirror-overwrite"):vr(this.display.cursorDiv,"CodeMirror-overwrite"),v(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==fi()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ft(function(n,t){yf(this,n,t)}),getScrollInfo:function(){var n=this.display.scroller;return{left:n.scrollLeft,top:n.scrollTop,height:n.scrollHeight-ti(this)-this.display.barHeight,width:n.scrollWidth-ti(this)-this.display.barWidth,clientHeight:ah(this),clientWidth:fr(this)}},scrollIntoView:ft(function(t,i){null==t?(t={from:this.doc.sel.primary().head,to:null},null==i&&(i=this.options.cursorScrollMargin)):"number"==typeof t?t={from:n(t,0),to:null}:null==t.from&&(t={from:t,to:null});t.to||(t.to=t.from);t.margin=i||0;null!=t.from.line?hd(this,t):bv(this,t.from,t.to,t.margin)}),setSize:ft(function(n,t){var u=this,r=function(n){return"number"==typeof n||/^\d+$/.test(String(n))?n+"px":n},i;null!=n&&(this.display.wrapper.style.width=r(n));null!=t&&(this.display.wrapper.style.height=r(t));this.options.lineWrapping&&iv(this);i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(n){if(n.widgets)for(var t=0;t<n.widgets.length;t++)if(n.widgets[t].noHScroll){vi(u,i,"widget");break}++i});this.curOp.forceUpdate=!0;v(this,"refresh",this)}),operation:function(n){return ot(this,n)},refresh:ft(function(){var n=this.display.cachedTextHeight;et(this);this.curOp.forceUpdate=!0;cf(this);yf(this,this.doc.scrollLeft,this.doc.scrollTop);fc(this);(null==n||Math.abs(n-or(this.display))>.5)&&kh(this);v(this,"refresh",this)}),swapDoc:ft(function(n){var t=this.doc;return t.cm=null,sy(this,n),cf(this),this.display.input.reset(),yf(this,n.scrollLeft,n.scrollTop),this.curOp.forceScroll=!0,g(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};dr(i);i.registerHelper=function(n,t,u){r.hasOwnProperty(n)||(r[n]=i[n]={_global:[]});r[n][t]=u};i.registerGlobalHelper=function(n,t,u,f){i.registerHelper(n,t,f);r[n]._global.push({pred:u,val:f})}},c=function(n){this.cm=n;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new ki;this.composing=null;this.gracePeriod=!1;this.readDOMTimeout=null};c.prototype.init=function(n){function e(n){var r,e,i,o,s;if(!p(t,n)){if(t.somethingSelected())po({lineWise:!1,text:t.getSelections()}),"cut"==n.type&&t.replaceSelection("",null,"cut");else{if(!t.options.lineWiseCopyCut)return;r=uw(t);po({lineWise:!0,text:r.text});"cut"==n.type&&t.operation(function(){t.setSelections(r.ranges,0,ii);t.replaceSelection("",null,"cut")})}if(n.clipboardData&&(n.clipboardData.clearData(),e=yt.text.join("\n"),n.clipboardData.setData("Text",e),n.clipboardData.getData("Text")==e))return void n.preventDefault();i=ew();o=i.firstChild;t.display.lineSpace.insertBefore(i,t.display.lineSpace.firstChild);o.value=yt.text.join("\n");s=document.activeElement;yr(o);setTimeout(function(){t.display.lineSpace.removeChild(i);s.focus();s==u&&f.showPrimarySelection()},50)}}var i=this,f=this,t=f.cm,u=f.div=n.lineDiv;fw(u,t.options.spellcheck);r(u,"paste",function(n){p(t,n)||iw(n,t)||l<=11&&setTimeout(w(t,function(){return i.updateFromDOM()}),20)});r(u,"compositionstart",function(n){i.composing={data:n.data,done:!1}});r(u,"compositionupdate",function(n){i.composing||(i.composing={data:n.data,done:!1})});r(u,"compositionend",function(n){i.composing&&(n.data!=i.composing.data&&i.readFromDOMSoon(),i.composing.done=!0)});r(u,"touchstart",function(){return f.forceCompositionEnd()});r(u,"input",function(){i.composing||i.readFromDOMSoon()});r(u,"copy",e);r(u,"cut",e)};c.prototype.prepareSelection=function(){var n=cv(this.cm,!1);return n.focus=this.cm.state.focused,n};c.prototype.showSelection=function(n,t){n&&this.cm.display.view.length&&((n.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(n))};c.prototype.showPrimarySelection=function(){var n=window.getSelection(),t=this.cm,y=t.doc.sel.primary(),c=y.from(),l=y.to(),r,f,s,i,h,v;if(t.display.viewTo==t.display.viewFrom||c.line>=t.display.viewTo||l.line<t.display.viewFrom)return void n.removeAllRanges();if(r=wo(t,n.anchorNode,n.anchorOffset),f=wo(t,n.focusNode,n.focusOffset),!r||r.bad||!f||f.bad||0!=u(be(r,f),c)||0!=u(we(r,f),l)){var a=t.display.view,e=c.line>=t.display.viewFrom&&sw(t,c)||{node:a[0].measure.map[2],offset:0},o=l.line<t.display.viewTo&&sw(t,l);if(o||(s=a[a.length-1].measure,i=s.maps?s.maps[s.maps.length-1]:s.map,o={node:i[i.length-1],offset:i[i.length-2]-i[i.length-3]}),!e||!o)return void n.removeAllRanges();v=n.rangeCount&&n.getRangeAt(0);try{h=au(e.node,e.offset,o.offset,o.node)}catch(n){}h&&(!bi&&t.state.focused?(n.collapse(e.node,e.offset),h.collapsed||(n.removeAllRanges(),n.addRange(h))):(n.removeAllRanges(),n.addRange(h)),v&&null==n.anchorNode?n.addRange(v):bi&&this.startGracePeriod());this.rememberSelection()}};c.prototype.startGracePeriod=function(){var n=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){n.gracePeriod=!1;n.selectionChanged()&&n.cm.operation(function(){return n.cm.curOp.selectionChanged=!0})},20)};c.prototype.showMultipleSelections=function(n){ct(this.cm.display.cursorDiv,n.cursors);ct(this.cm.display.selectionDiv,n.selection)};c.prototype.rememberSelection=function(){var n=window.getSelection();this.lastAnchorNode=n.anchorNode;this.lastAnchorOffset=n.anchorOffset;this.lastFocusNode=n.focusNode;this.lastFocusOffset=n.focusOffset};c.prototype.selectionInEditor=function(){var n=window.getSelection(),t;return n.rangeCount?(t=n.getRangeAt(0).commonAncestorContainer,li(this.div,t)):!1};c.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())};c.prototype.blur=function(){this.div.blur()};c.prototype.getField=function(){return this.div};c.prototype.supportsTouch=function(){return!0};c.prototype.receivedFocus=function(){function t(){n.cm.state.focused&&(n.pollSelection(),n.polling.set(n.cm.options.pollInterval,t))}var n=this;this.selectionInEditor()?this.pollSelection():ot(this.cm,function(){return n.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,t)};c.prototype.selectionChanged=function(){var n=window.getSelection();return n.anchorNode!=this.lastAnchorNode||n.anchorOffset!=this.lastAnchorOffset||n.focusNode!=this.lastFocusNode||n.focusOffset!=this.lastFocusOffset};c.prototype.pollSelection=function(){var n,t,i,r;if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){if(n=window.getSelection(),t=this.cm,ko&&bo&&this.cm.options.gutters.length&&wn(n.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();this.composing||(this.rememberSelection(),i=wo(t,n.anchorNode,n.anchorOffset),r=wo(t,n.focusNode,n.focusOffset),i&&r&&ot(t,function(){it(t.doc,pi(i,r),ii);(i.bad||r.bad)&&(t.curOp.selectionChanged=!0)}))}};c.prototype.pollContent=function(){var d,v,b,y,g,k,i,e,nt,tt;null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var r=this.cm,f=r.display,it=r.doc.sel.primary(),c=it.from(),a=it.to();if((0==c.ch&&c.line>r.firstLine()&&(c=n(c.line-1,t(r.doc,c.line-1).length)),a.ch==t(r.doc,a.line).text.length&&a.line<r.lastLine()&&(a=n(a.line+1,0)),c.line<f.viewFrom||a.line>f.viewTo-1)||(c.line==f.viewFrom||0==(d=hr(r,c.line))?(v=s(f.view[0].line),b=f.view[0].node):(v=s(f.view[d].line),b=f.view[d-1].node.nextSibling),k=hr(r,a.line),k==f.view.length-1?(y=f.viewTo-1,g=f.lineDiv.lastChild):(y=s(f.view[k+1].line)-1,g=f.view[k+1].node.previousSibling),!b))return!1;for(i=r.doc.splitLines(bn(r,b,g,v,y)),e=ir(r.doc,n(v,0),n(y,t(r.doc,y).text.length));i.length>1&&e.length>1;)if(o(i)==o(e))i.pop(),e.pop(),y--;else{if(i[0]!=e[0])break;i.shift();e.shift();v++}for(var h=0,l=0,rt=i[0],ut=e[0],ft=Math.min(rt.length,ut.length);h<ft&&rt.charCodeAt(h)==ut.charCodeAt(h);)++h;for(var p=o(i),w=o(e),et=Math.min(p.length-(1==i.length?h:0),w.length-(1==e.length?h:0));l<et&&p.charCodeAt(p.length-l-1)==w.charCodeAt(w.length-l-1);)++l;if(1==i.length&&1==e.length&&v==c.line)for(;h&&h>c.ch&&p.charCodeAt(p.length-l-1)==w.charCodeAt(w.length-l-1);)h--,l++;return i[i.length-1]=p.slice(0,p.length-l).replace(/^\u200b+/,""),i[0]=i[0].slice(h).replace(/\u200b+$/,""),nt=n(v,h),tt=n(y,e.length?o(e).length-l:0),i.length>1||i[0]||u(nt,tt)?(ou(r.doc,i,nt,tt,"+input"),!0):void 0};c.prototype.ensurePolled=function(){this.forceCompositionEnd()};c.prototype.reset=function(){this.forceCompositionEnd()};c.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())};c.prototype.readFromDOMSoon=function(){var n=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(n.readDOMTimeout=null,n.composing){if(!n.composing.done)return;n.composing=null}n.updateFromDOM()},80))};c.prototype.updateFromDOM=function(){var n=this;!this.cm.isReadOnly()&&this.pollContent()||ot(this.cm,function(){return et(n.cm)})};c.prototype.setUneditable=function(n){n.contentEditable="false"};c.prototype.onKeyPress=function(n){0!=n.charCode&&(n.preventDefault(),this.cm.isReadOnly()||w(this.cm,yc)(this.cm,String.fromCharCode(null==n.charCode?n.keyCode:n.charCode),0))};c.prototype.readOnlyChanged=function(n){this.div.contentEditable=String("nocursor"!=n)};c.prototype.onContextMenu=function(){};c.prototype.resetPosition=function(){};c.prototype.needsContentAttribute=!0;y=function(n){this.cm=n;this.prevInput="";this.pollingFast=!1;this.polling=new ki;this.inaccurateSelection=!1;this.hasSelection=!1;this.composing=null};y.prototype.init=function(n){function f(n){if(!p(t,n)){if(t.somethingSelected())po({lineWise:!1,text:t.getSelections()}),i.inaccurateSelection&&(i.prevInput="",i.inaccurateSelection=!1,u.value=yt.text.join("\n"),yr(u));else{if(!t.options.lineWiseCopyCut)return;var r=uw(t);po({lineWise:!0,text:r.text});"cut"==n.type?t.setSelections(r.ranges,null,ii):(i.prevInput="",u.value=r.text.join("\n"),yr(u))}"cut"==n.type&&(t.state.cutIncoming=!0)}}var o=this,i=this,t=this.cm,s=this.wrapper=ew(),u=this.textarea=s.firstChild;n.wrapper.insertBefore(s,n.wrapper.firstChild);ue&&(u.style.width="0px");r(u,"input",function(){e&&l>=9&&o.hasSelection&&(o.hasSelection=null);i.poll()});r(u,"paste",function(n){p(t,n)||iw(n,t)||(t.state.pasteIncoming=!0,i.fastPoll())});r(u,"cut",f);r(u,"copy",f);r(n.scroller,"paste",function(r){si(n,r)||p(t,r)||(t.state.pasteIncoming=!0,i.focus())});r(n.lineSpace,"selectstart",function(t){si(n,t)||tt(t)});r(u,"compositionstart",function(){var n=t.getCursor("from");i.composing&&i.composing.range.clear();i.composing={start:n,range:t.markText(n,t.getCursor("to"),{className:"CodeMirror-composing"})}});r(u,"compositionend",function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)})};y.prototype.prepareSelection=function(){var n=this.cm,t=n.display,e=n.doc,i=cv(n);if(n.options.moveInputWithCursor){var r=pt(n,e.sel.primary().head,"div"),u=t.wrapper.getBoundingClientRect(),f=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+f.top-u.top));i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+f.left-u.left))}return i};y.prototype.showSelection=function(n){var i=this.cm,t=i.display;ct(t.cursorDiv,n.cursors);ct(t.selectionDiv,n.selection);null!=n.teTop&&(this.wrapper.style.top=n.teTop+"px",this.wrapper.style.left=n.teLeft+"px")};y.prototype.reset=function(n){var i,f,t,o,r,u;this.contextMenuPending||this.composing||(t=this.cm,o=t.doc,t.somethingSelected()?(this.prevInput="",r=o.sel.primary(),i=bw&&(r.to().line-r.from().line>100||(f=t.getSelection()).length>1e3),u=i?"-":f||t.getSelection(),this.textarea.value=u,t.state.focused&&yr(this.textarea),e&&l>=9&&(this.hasSelection=u)):n||(this.prevInput=this.textarea.value="",e&&l>=9&&(this.hasSelection=null)),this.inaccurateSelection=i)};y.prototype.getField=function(){return this.textarea};y.prototype.supportsTouch=function(){return!1};y.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!fe||fi()!=this.textarea))try{this.textarea.focus()}catch(n){}};y.prototype.blur=function(){this.textarea.blur()};y.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};y.prototype.receivedFocus=function(){this.slowPoll()};y.prototype.slowPoll=function(){var n=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){n.poll();n.cm.state.focused&&n.slowPoll()})};y.prototype.fastPoll=function(){function t(){var r=n.poll();r||i?(n.pollingFast=!1,n.slowPoll()):(i=!0,n.polling.set(60,t))}var i=!1,n=this;n.pollingFast=!0;n.polling.set(20,t)};y.prototype.poll=function(){var i=this,n=this.cm,f=this.textarea,r=this.prevInput,t,o,u,s;if(this.contextMenuPending||!n.state.focused||htt(f)&&!r&&!this.composing||n.isReadOnly()||n.options.disableInput||n.state.keySeq||(t=f.value,t==r&&!n.somethingSelected()))return!1;if(e&&l>=9&&this.hasSelection===t||kt&&/[\uf700-\uf7ff]/.test(t))return n.display.input.reset(),!1;if(n.doc.sel==n.display.selForContextMenu&&(o=t.charCodeAt(0),8203!=o||r||(r=""),8666==o))return this.reset(),this.cm.execCommand("undo");for(u=0,s=Math.min(r.length,t.length);u<s&&r.charCodeAt(u)==t.charCodeAt(u);)++u;return ot(n,function(){yc(n,t.slice(u),r.length-u,null,i.composing?"*compose":null);t.length>1e3||t.indexOf("\n")>-1?f.value=i.prevInput="":i.prevInput=t;i.composing&&(i.composing.range.clear(),i.composing.range=n.markText(i.composing.start,n.getCursor("to"),{className:"CodeMirror-composing"}))}),!0};y.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)};y.prototype.onKeyPress=function(){e&&l>=9&&(this.hasSelection=null);this.fastPoll()};y.prototype.onContextMenu=function(n){function c(){if(null!=u.selectionStart){var n=t.somethingSelected(),r=""+(n?u.value:"");u.value="";u.value=r;f.prevInput=n?"":"";u.selectionStart=1;u.selectionEnd=r.length;i.selForContextMenu=t.doc.sel}}function a(){if(f.contextMenuPending=!1,f.wrapper.style.cssText=p,u.style.cssText=y,e&&l<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=k),null!=u.selectionStart){(!e||e&&l<9)&&c();var r=0,n=function(){i.selForContextMenu==t.doc.sel&&0==u.selectionStart&&u.selectionEnd>0&&""==f.prevInput?w(t,np)(t):r++<10?i.detectingSelectAll=setTimeout(n,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(n,200)}}var f=this,t=f.cm,i=t.display,u=f.textarea,o=sr(t,n),k=i.scroller.scrollTop,v,y,p,s,b,h;o&&!bt&&(v=t.options.resetSelectionOnContextMenu,v&&t.doc.sel.contains(o)==-1&&w(t,it)(t.doc,pi(o),ii),y=u.style.cssText,p=f.wrapper.style.cssText,f.wrapper.style.cssText="position: absolute",s=f.wrapper.getBoundingClientRect(),u.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(n.clientY-s.top-5)+"px; left: "+(n.clientX-s.left-5)+"px;\n      z-index: 1000; background: "+(e?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",(nt&&(b=window.scrollY),i.input.focus(),nt&&window.scrollTo(null,b),i.input.reset(),t.somethingSelected()||(u.value=f.prevInput=" "),f.contextMenuPending=!0,i.selForContextMenu=t.doc.sel,clearTimeout(i.detectingSelectAll),e&&l>=9&&c(),wc)?(ff(n),h=function(){lt(window,"mouseup",h);setTimeout(a,20)},r(window,"mouseup",h)):setTimeout(a,50))};y.prototype.readOnlyChanged=function(n){n||this.reset()};y.prototype.setUneditable=function(){};y.prototype.needsContentAttribute=!1;an(a);ytt(a);rb="iter insert remove copy getEditor constructor".split(" ");for(ae in ut.prototype)ut.prototype.hasOwnProperty(ae)&&d(rb,ae)<0&&(a.prototype[ae]=function(n){return function(){return n.apply(this.doc,arguments)}}(ut.prototype[ae]));return dr(ut),a.inputStyles={textarea:y,contenteditable:c},a.defineMode=function(n){a.defaults.mode||"null"==n||(a.defaults.mode=n);gb.apply(this,arguments)},a.defineMIME=nk,a.defineMode("null",function(){return{token:function(n){return n.skipToEnd()}}}),a.defineMIME("text/plain","null"),a.defineExtension=function(n,t){a.prototype[n]=t},a.defineDocExtension=function(n,t){ut.prototype[n]=t},a.fromTextArea=dn,gn(a),a.version="5.26.0",a});!function(n){"object"==typeof exports&&"object"==typeof module?n(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)}(function(n){"use strict";n.defineMode("sql",function(t,i){function u(n,t){var i=n.next(),f,u;return o[i]&&(f=o[i](n,t),f!==!1)?f:r.hexNumber&&("0"==i&&n.match(/^[xX][0-9a-fA-F]+/)||("x"==i||"X"==i)&&n.match(/^'[0-9a-fA-F]+'/))?"number":r.binaryNumber&&(("b"==i||"B"==i)&&n.match(/^'[01]+'/)||"0"==i&&n.match(/^b[01]+/))?"number":i.charCodeAt(0)>47&&i.charCodeAt(0)<58?(n.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/),r.decimallessFloat&&n.eat("."),"number"):"?"==i&&(n.eatSpace()||n.eol()||n.eat(";"))?"variable-3":"'"==i||'"'==i&&r.doubleQuote?(t.tokenize=s(i),t.tokenize(n,t)):(r.nCharCast&&("n"==i||"N"==i)||r.charsetCast&&"_"==i&&n.match(/[a-z][a-z0-9]*/i))&&("'"==n.peek()||'"'==n.peek())?"keyword":/^[\(\),\;\[\]]/.test(i)?null:r.commentSlashSlash&&"/"==i&&n.eat("/")?(n.skipToEnd(),"comment"):r.commentHash&&"#"==i||"-"==i&&n.eat("-")&&(!r.commentSpaceRequired||n.eat(" "))?(n.skipToEnd(),"comment"):"/"==i&&n.eat("*")?(t.tokenize=h,t.tokenize(n,t)):"."!=i?e.test(i)?(n.eatWhile(e),null):"{"==i&&(n.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||n.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/))?"number":(n.eatWhile(/^[_\w\d]/),u=n.current().toLowerCase(),p.hasOwnProperty(u)&&(n.match(/^( )+'[^']*'/)||n.match(/^( )+"[^"]*"/))?"number":a.hasOwnProperty(u)?"atom":v.hasOwnProperty(u)?"builtin":y.hasOwnProperty(u)?"keyword":l.hasOwnProperty(u)?"string-2":null):r.zerolessFloat&&n.match(/^(?:\d+(?:e[+-]?\d+)?)/i)?"number":r.ODBCdotTable&&n.match(/^[a-zA-Z_]+/)?"variable-2":void 0}function s(n){return function(t,i){for(var r,f=!1;null!=(r=t.next());){if(r==n&&!f){i.tokenize=u;break}f=!f&&"\\"==r}return"string"}}function h(n,t){for(;;){if(!n.skipTo("*")){n.skipToEnd();break}if(n.next(),n.eat("/")){t.tokenize=u;break}}return"comment"}function f(n,t,i){t.context={prev:t.context,indent:n.indentation(),col:n.column(),type:i}}function c(n){n.indent=n.context.indent;n.context=n.context.prev}var l=i.client||{},a=i.atoms||{"false":!0,"true":!0,"null":!0},v=i.builtin||{},y=i.keywords||{},e=i.operatorChars||/^[*+\-%<>!=&|~^]/,r=i.support||{},o=i.hooks||{},p=i.dateSQL||{date:!0,time:!0,timestamp:!0};return{startState:function(){return{tokenize:u,context:null}},token:function(n,t){var i,r;return(n.sol()&&t.context&&null==t.context.align&&(t.context.align=!1),n.eatSpace())?null:(i=t.tokenize(n,t),"comment"==i)?i:(t.context&&null==t.context.align&&(t.context.align=!0),r=n.current(),"("==r?f(n,t,")"):"["==r?f(n,t,"]"):t.context&&t.context.type==r&&c(t),i)},indent:function(i,r){var u=i.context,f;return u?(f=r.charAt(0)==u.type,u.align?u.col+(f?0:1):u.indent+(f?0:t.indentUnit)):n.Pass},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:r.commentSlashSlash?"//":r.commentHash?"#":null}}),function(){function u(n){for(var t;null!=(t=n.next());)if("`"==t&&!n.eat("`"))return"variable-2";return n.backUp(n.current().length-1),n.eatWhile(/\w/)?"variable-2":null}function e(n){for(var t;null!=(t=n.next());)if('"'==t&&!n.eat('"'))return"variable-2";return n.backUp(n.current().length-1),n.eatWhile(/\w/)?"variable-2":null}function i(n){return n.eat("@")&&(n.match(/^session\./),n.match(/^local\./),n.match(/^global\./)),n.eat("'")?(n.match(/^.*'/),"variable-2"):n.eat('"')?(n.match(/^.*"/),"variable-2"):n.eat("`")?(n.match(/^.*`/),"variable-2"):n.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function f(n){return n.eat("N")?"atom":n.match(/^[a-zA-Z.#!?]/)?"variable-2":null}function t(n){for(var i={},r=n.split(" "),t=0;t<r.length;++t)i[r[t]]=!0;return i}var r="alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit ";n.defineMIME("text/x-sql",{name:"sql",keywords:t(r+"begin"),builtin:t("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),atoms:t("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:t("date time timestamp"),support:t("ODBCdotTable doubleQuote binaryNumber hexNumber")});n.defineMIME("text/x-mssql",{name:"sql",client:t("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:t(r+"begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered declare exec"),builtin:t("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:t("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:t("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":i}});n.defineMIME("text/x-mysql",{name:"sql",client:t("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:t(r+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group group_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:t("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:t("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:t("date time timestamp"),support:t("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":i,"`":u,"\\":f}});n.defineMIME("text/x-mariadb",{name:"sql",client:t("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:t(r+"accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:t("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:t("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:t("date time timestamp"),support:t("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":i,"`":u,"\\":f}});n.defineMIME("text/x-sqlite",{name:"sql",client:t("auth backup bail binary changes check clone databases dbinfo dump echo eqp exit explain fullschema headers help import imposter indexes iotrace limit lint load log mode nullvalue once open output print prompt quit read restore save scanstats schema separator session shell show stats system tables testcase timeout timer trace vfsinfo vfslist vfsname width"),keywords:t(r+"abort action add after all analyze attach autoincrement before begin cascade case cast check collate column commit conflict constraint cross current_date current_time current_timestamp database default deferrable deferred detach each else end escape except exclusive exists explain fail for foreign full glob if ignore immediate index indexed initially inner instead intersect isnull key left limit match natural no notnull null of offset outer plan pragma primary query raise recursive references regexp reindex release rename replace restrict right rollback row savepoint temp temporary then to transaction trigger unique using vacuum view virtual when with without"),builtin:t("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text clob bigint int int2 int8 integer float double char varchar date datetime year unsigned signed numeric real"),atoms:t("null current_date current_time current_timestamp"),operatorChars:/^[*+\-%<>!=&|\/~]/,dateSQL:t("date time timestamp datetime"),support:t("decimallessFloat zerolessFloat"),identifierQuote:'"',hooks:{"@":i,":":i,"?":i,$:i,'"':e,"`":u}});n.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:t("add all allow alter and any apply as asc authorize batch begin by clustering columnfamily compact consistency count create custom delete desc distinct drop each_quorum exists filtering from grant if in index insert into key keyspace keyspaces level limit local_one local_quorum modify nan norecursive nosuperuser not of on one order password permission permissions primary quorum rename revoke schema select set storage superuser table three to token truncate ttl two type unlogged update use user users using values where with writetime"),builtin:t("ascii bigint blob boolean counter decimal double float frozen inet int list map static text timestamp timeuuid tuple uuid varchar varint"),atoms:t("false true infinity NaN"),operatorChars:/^[<>=]/,dateSQL:{},support:t("commentSlashSlash decimallessFloat"),hooks:{}});n.defineMIME("text/x-plsql",{name:"sql",client:t("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),keywords:t("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),builtin:t("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least length lengthb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),operatorChars:/^[*+\-%<>!=~]/,dateSQL:t("date time timestamp"),support:t("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")});n.defineMIME("text/x-hive",{name:"sql",keywords:t("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external false fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger true unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with"),builtin:t("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype"),atoms:t("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:t("date timestamp"),support:t("ODBCdotTable doubleQuote binaryNumber hexNumber")});n.defineMIME("text/x-pgsql",{name:"sql",client:t("source"),keywords:t(r+"a abort abs absent absolute access according action ada add admin after aggregate all allocate also always analyse analyze any are array array_agg array_max_cardinality asensitive assertion assignment asymmetric at atomic attribute attributes authorization avg backward base64 before begin begin_frame begin_partition bernoulli binary bit_length blob blocked bom both breadth c cache call called cardinality cascade cascaded case cast catalog catalog_name ceil ceiling chain characteristics characters character_length character_set_catalog character_set_name character_set_schema char_length check checkpoint class class_origin clob close cluster coalesce cobol collate collation collation_catalog collation_name collation_schema collect column columns column_name command_function command_function_code comment comments commit committed concurrently condition condition_number configuration conflict connect connection connection_name constraint constraints constraint_catalog constraint_name constraint_schema constructor contains content continue control conversion convert copy corr corresponding cost covar_pop covar_samp cross csv cube cume_dist current current_catalog current_date current_default_transform_group current_path current_role current_row current_schema current_time current_timestamp current_transform_group_for_type current_user cursor cursor_name cycle data database datalink datetime_interval_code datetime_interval_precision day db deallocate dec declare default defaults deferrable deferred defined definer degree delimiter delimiters dense_rank depth deref derived describe descriptor deterministic diagnostics dictionary disable discard disconnect dispatch dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue do document domain dynamic dynamic_function dynamic_function_code each element else empty enable encoding encrypted end end-exec end_frame end_partition enforced enum equals escape event every except exception exclude excluding exclusive exec execute exists exp explain expression extension external extract false family fetch file filter final first first_value flag float floor following for force foreign fortran forward found frame_row free freeze fs full function functions fusion g general generated get global go goto grant granted greatest grouping groups handler header hex hierarchy hold hour id identity if ignore ilike immediate immediately immutable implementation implicit import including increment indent index indexes indicator inherit inherits initially inline inner inout input insensitive instance instantiable instead integrity intersect intersection invoker isnull isolation k key key_member key_type label lag language large last last_value lateral lead leading leakproof least left length level library like_regex link listen ln load local localtime localtimestamp location locator lock locked logged lower m map mapping match matched materialized max maxvalue max_cardinality member merge message_length message_octet_length message_text method min minute minvalue mod mode modifies module month more move multiset mumps name names namespace national natural nchar nclob nesting new next nfc nfd nfkc nfkd nil no none normalize normalized nothing notify notnull nowait nth_value ntile null nullable nullif nulls number object occurrences_regex octets octet_length of off offset oids old only open operator option options ordering ordinality others out outer output over overlaps overlay overriding owned owner p pad parameter parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partial partition pascal passing passthrough password percent percentile_cont percentile_disc percent_rank period permission placing plans pli policy portion position position_regex power precedes preceding prepare prepared preserve primary prior privileges procedural procedure program public quote range rank read reads reassign recheck recovery recursive ref references referencing refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex relative release rename repeatable replace replica requiring reset respect restart restore restrict result return returned_cardinality returned_length returned_octet_length returned_sqlstate returning returns revoke right role rollback rollup routine routine_catalog routine_name routine_schema row rows row_count row_number rule savepoint scale schema schema_name scope scope_catalog scope_name scope_schema scroll search second section security selective self sensitive sequence sequences serializable server server_name session session_user setof sets share show similar simple size skip snapshot some source space specific specifictype specific_name sql sqlcode sqlerror sqlexception sqlstate sqlwarning sqrt stable standalone start state statement static statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset substring substring_regex succeeds sum symmetric sysid system system_time system_user t tables tablesample tablespace table_name temp template temporary then ties timezone_hour timezone_minute to token top_level_count trailing transaction transactions_committed transactions_rolled_back transaction_active transform transforms translate translate_regex translation treat trigger trigger_catalog trigger_name trigger_schema trim trim_array true truncate trusted type types uescape unbounded uncommitted under unencrypted unique unknown unlink unlisten unlogged unnamed unnest until untyped upper uri usage user user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema using vacuum valid validate validator value value_of varbinary variadic var_pop var_samp verbose version versioning view views volatile when whenever whitespace width_bucket window within work wrapper write xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate year yes loop repeat"),builtin:t("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float8 inet integer int int4 interval json jsonb line lseg macaddr money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),atoms:t("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^\/#@?~]/,dateSQL:t("date time timestamp"),support:t("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast")});n.defineMIME("text/x-gql",{name:"sql",keywords:t("ancestor and asc by contains desc descendant distinct from group has in is limit offset on order select superset where"),atoms:t("false true"),builtin:t("blob datetime first key __key__ string integer double boolean null"),operatorChars:/^[*+\-%<>!=]/})}()});!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AQB=t():n.AQB=t()}("undefined"!=typeof self?self:this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=94)}([function(n,t){var u,i,r;i="undefined"!=typeof window?window:this;r=function(i,r){function si(n){var t=!!n&&"length"in n&&n.length,i=f.type(n);return"function"!==i&&!f.isWindow(n)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in n)}function hi(n,t,i){if(f.isFunction(t))return f.grep(n,function(n,r){return!!t.call(n,r,n)!==i});if(t.nodeType)return f.grep(n,function(n){return n===t!==i});if("string"==typeof t){if(de.test(t))return f.filter(t,n,i);t=f.filter(t,n)}return f.grep(n,function(n){return f.inArray(n,t)>-1!==i})}function iu(n,t){do n=n[t];while(n&&1!==n.nodeType);return n}function uu(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",k),i.removeEventListener("load",k)):(o.detachEvent("onreadystatechange",k),i.detachEvent("onload",k))}function k(){(o.addEventListener||"load"===i.event.type||"complete"===o.readyState)&&(uu(),f.ready())}function fu(n,t,i){if(void 0===i&&1===n.nodeType){var r="data-"+t.replace(no,"-$1").toLowerCase();if("string"==typeof(i=n.getAttribute(r))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:ge.test(i)?f.parseJSON(i):i)}catch(n){}f.data(n,t,i)}else i=void 0}return i}function li(n){for(var t in n)if(("data"!==t||!f.isEmptyObject(n[t]))&&"toJSON"!==t)return!1;return!0}function eu(n,t,i,r){if(vt(n)){var h,e,s=f.expando,c=n.nodeType,o=c?f.cache:n,u=c?n[s]:n[s]&&s;if(u&&o[u]&&(r||o[u].data)||void 0!==i||"string"!=typeof t)return u||(u=c?n[s]=y.pop()||f.guid++:s),o[u]||(o[u]=c?{}:{toJSON:f.noop}),"object"!=typeof t&&"function"!=typeof t||(r?o[u]=f.extend(o[u],t):o[u].data=f.extend(o[u].data,t)),e=o[u],r||(e.data||(e.data={}),e=e.data),void 0!==i&&(e[f.camelCase(t)]=i),"string"==typeof t?null==(h=e[t])&&(h=e[f.camelCase(t)]):h=e,h}}function ou(n,t,i){if(vt(n)){var o,s,h=n.nodeType,r=h?f.cache:n,u=h?n[f.expando]:f.expando;if(r[u]){if(t&&(o=i?r[u]:r[u].data)){for(s=(t=f.isArray(t)?t.concat(f.map(t,f.camelCase)):t in o?[t]:(t=f.camelCase(t))in o?[t]:t.split(" ")).length;s--;)delete o[t[s]];if(i?!li(o):!f.isEmptyObject(o))return}(i||(delete r[u].data,li(r[u])))&&(h?f.cleanData([n],!0):e.deleteExpando||r!=r.window?delete r[u]:r[u]=void 0)}}}function su(n,t,i,r){var h,o=1,l=20,c=r?function(){return r.cur()}:function(){return f.css(n,t,"")},s=c(),e=i&&i[3]||(f.cssNumber[t]?"":"px"),u=(f.cssNumber[t]||"px"!==e&&+s)&&vi.exec(f.css(n,t));if(u&&u[3]!==e){e=e||u[3];i=i||[];u=+s||1;do u/=o=o||".5",f.style(n,t,u+e);while(o!==(o=c()/s)&&1!==o&&--l)}return i&&(u=+u||+s||0,h=i[1]?u+(i[1]+1)*i[2]:+i[2],r&&(r.unit=e,r.start=u,r.end=h)),h}function au(n){var i=lu.split("|"),t=n.createDocumentFragment();if(t.createElement)for(;i.length;)t.createElement(i.pop());return t}function s(n,t){var u,r,e=0,i=void 0!==n.getElementsByTagName?n.getElementsByTagName(t||"*"):void 0!==n.querySelectorAll?n.querySelectorAll(t||"*"):void 0;if(!i)for(i=[],u=n.childNodes||n;null!=(r=u[e]);e++)!t||f.nodeName(r,t)?i.push(r):f.merge(i,s(r,t));return void 0===t||t&&f.nodeName(n,t)?f.merge([n],i):i}function bi(n,t){for(var r,i=0;null!=(r=n[i]);i++)f._data(r,"globalEval",!t||f._data(t[i],"globalEval"))}function to(n){pi.test(n.type)&&(n.defaultChecked=n.checked)}function yu(n,t,i,r,u){for(var c,o,k,h,w,b,v,d=n.length,y=au(t),a=[],p=0;p<d;p++)if((o=n[p])||0===o)if("object"===f.type(o))f.merge(a,o.nodeType?[o]:o);else if(vu.test(o)){for(h=h||y.appendChild(t.createElement("div")),w=(hu.exec(o)||["",""])[1].toLowerCase(),v=l[w]||l._default,h.innerHTML=v[1]+f.htmlPrefilter(o)+v[2],c=v[0];c--;)h=h.lastChild;if(!e.leadingWhitespace&&wi.test(o)&&a.push(t.createTextNode(wi.exec(o)[0])),!e.tbody)for(c=(o="table"!==w||ki.test(o)?"<table>"!==v[1]||ki.test(o)?0:h:h.firstChild)&&o.childNodes.length;c--;)f.nodeName(b=o.childNodes[c],"tbody")&&!b.childNodes.length&&o.removeChild(b);for(f.merge(a,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=y.lastChild}else a.push(t.createTextNode(o));for(h&&y.removeChild(h),e.appendChecked||f.grep(s(a,"input"),to),p=0;o=a[p++];)if(r&&f.inArray(o,r)>-1)u&&u.push(o);else if(k=f.contains(o.ownerDocument,o),h=s(y.appendChild(o),"script"),k&&bi(h),i)for(c=0;o=h[c++];)cu.test(o.type||"")&&i.push(o);return h=null,y}function bt(){return!0}function st(){return!1}function bu(){try{return o.activeElement}catch(n){}}function gi(n,t,i,r,u,e){var o,s;if("object"==typeof t){for(s in"string"!=typeof i&&(r=r||i,i=void 0),t)gi(n,s,i,r,t[s],e);return n}if(null==r&&null==u?(u=i,r=i=void 0):null==u&&("string"==typeof i?(u=r,r=void 0):(u=r,r=i,i=void 0)),!1===u)u=st;else if(!u)return n;return 1===e&&(o=u,(u=function(n){return f().off(n),o.apply(this,arguments)}).guid=o.guid||(o.guid=f.guid++)),n.each(function(){f.event.add(this,t,u,r,i)})}function du(n,t){return f.nodeName(n,"table")&&f.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function gu(n){return n.type=(null!==f.find.attr(n,"type"))+"/"+n.type,n}function nf(n){var t=so.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function tf(n,t){if(1===t.nodeType&&f.hasData(n)){var r,u,o,s=f._data(n),i=f._data(t,s),e=s.events;if(e)for(r in delete i.handle,i.events={},e)for(u=0,o=e[r].length;u<o;u++)f.event.add(t,r,e[r][u]);i.data&&(i.data=f.extend({},i.data))}}function co(n,t){var i,r,u;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!e.noCloneEvent&&t[f.expando]){for(r in(u=f._data(t)).events)f.removeEvent(t,r,u.handle);t.removeAttribute(f.expando)}"script"===i&&t.text!==n.text?(gu(t).text=n.text,nf(t)):"object"===i?(t.parentNode&&(t.outerHTML=n.outerHTML),e.html5Clone&&n.innerHTML&&!f.trim(t.innerHTML)&&(t.innerHTML=n.innerHTML)):"input"===i&&pi.test(n.type)?(t.defaultChecked=t.checked=n.checked,t.value!==n.value&&(t.value=n.value)):"option"===i?t.defaultSelected=t.selected=n.defaultSelected:"input"!==i&&"textarea"!==i||(t.defaultValue=n.defaultValue)}}function it(n,t,i,r){t=pr.apply([],t);var l,u,a,h,p,c,o=0,v=n.length,b=v-1,y=t[0],w=f.isFunction(y);if(w||v>1&&"string"==typeof y&&!e.checkClone&&oo.test(y))return n.each(function(u){var f=n.eq(u);w&&(t[0]=y.call(this,u,f.html()));it(f,t,i,r)});if(v&&(l=(c=yu(t,n[0].ownerDocument,!1,n,r)).firstChild,1===c.childNodes.length&&(c=l),l||r)){for(a=(h=f.map(s(c,"script"),gu)).length;o<v;o++)u=c,o!==b&&(u=f.clone(u,!0,!0),a&&f.merge(h,s(u,"script"))),i.call(n[o],u,o);if(a)for(p=h[h.length-1].ownerDocument,f.map(h,nf),o=0;o<a;o++)u=h[o],cu.test(u.type||"")&&!f._data(u,"globalEval")&&f.contains(p,u)&&(u.src?f._evalUrl&&f._evalUrl(u.src):f.globalEval((u.text||u.textContent||u.innerHTML||"").replace(ho,"")));c=l=null}return n}function rf(n,t,i){for(var r,e=t?f.filter(t,n):n,u=0;null!=(r=e[u]);u++)i||1!==r.nodeType||f.cleanData(s(r)),r.parentNode&&(i&&f.contains(r.ownerDocument,r)&&bi(s(r,"script")),r.parentNode.removeChild(r));return n}function uf(n,t){var i=f(t.createElement(n)).appendTo(t.body),r=f.css(i[0],"display");return i.detach(),r}function dt(n){var i=o,t=tr[n];return t||("none"!==(t=uf(n,i))&&t||((i=((kt=(kt||f("<iframe frameborder='0' width='0' height='0'/>")).appendTo(i.documentElement))[0].contentWindow||kt[0].contentDocument).document).write(),i.close(),t=uf(n,i),kt.detach()),tr[n]=t),t}function rr(n,t){return{get:function(){if(!n())return(this.get=t).apply(this,arguments);delete this.get}}}function lf(n){if(n in cf)return n;for(var i=n.charAt(0).toUpperCase()+n.slice(1),t=hf.length;t--;)if((n=hf[t]+i)in cf)return n}function af(n,t){for(var u,i,o,e=[],r=0,s=n.length;r<s;r++)(i=n[r]).style&&(e[r]=f._data(i,"olddisplay"),u=i.style.display,t?(e[r]||"none"!==u||(i.style.display=""),""===i.style.display&&yt(i)&&(e[r]=f._data(i,"olddisplay",dt(i.nodeName)))):(o=yt(i),(u&&"none"!==u||!o)&&f._data(i,"olddisplay",o?u:f.css(i,"display"))));for(r=0;r<s;r++)(i=n[r]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?e[r]||"":"none"));return n}function vf(n,t,i){var r=vo.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function yf(n,t,i,r,u){for(var e=i===(r?"border":"content")?4:"width"===t?1:0,o=0;e<4;e+=2)"margin"===i&&(o+=f.css(n,i+tt[e],!0,u)),r?("content"===i&&(o-=f.css(n,"padding"+tt[e],!0,u)),"margin"!==i&&(o-=f.css(n,"border"+tt[e]+"Width",!0,u))):(o+=f.css(n,"padding"+tt[e],!0,u),"padding"!==i&&(o+=f.css(n,"border"+tt[e]+"Width",!0,u)));return o}function pf(n,t,r){var h=!0,u="width"===t?n.offsetWidth:n.offsetHeight,s=rt(n),c=e.boxSizing&&"border-box"===f.css(n,"boxSizing",!1,s);if(o.msFullscreenElement&&i.top!==i&&n.getClientRects().length&&(u=Math.round(100*n.getBoundingClientRect()[t])),u<=0||null==u){if(((u=g(n,t,s))<0||null==u)&&(u=n.style[t]),gt.test(u))return u;h=c&&(e.boxSizingReliable()||u===n.style[t]);u=parseFloat(u)||0}return u+yf(n,t,r||(c?"border":"content"),h,s)+"px"}function h(n,t,i,r,u){return new h.prototype.init(n,t,i,r,u)}function kf(){return i.setTimeout(function(){ht=void 0}),ht=f.now()}function ti(n,t){var u,i={height:n},r=0;for(t=t?1:0;r<4;r+=2-t)i["margin"+(u=tt[r])]=i["padding"+u]=n;return t&&(i.opacity=i.width=n),i}function df(n,t,i){for(var u,f=(v.tweeners[t]||[]).concat(v.tweeners["*"]),r=0,e=f.length;r<e;r++)if(u=f[r].call(i,t,n))return u}function v(n,t,i){var e,o,s=0,l=v.prefilters.length,u=f.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var s=ht||kf(),t=Math.max(0,r.startTime+r.duration-s),i=1-(t/r.duration||0),f=0,e=r.tweens.length;f<e;f++)r.tweens[f].run(i);return u.notifyWith(n,[r,i,t]),i<1&&e?t:(u.resolveWith(n,[r]),!1)},r=u.promise({elem:n,props:f.extend({},t),opts:f.extend(!0,{specialEasing:{},easing:f.easing._default},i),originalProperties:t,originalOptions:i,startTime:ht||kf(),duration:i.duration,tweens:[],createTween:function(t,i){var u=f.Tween(n,r.opts,t,i,r.opts.specialEasing[t]||r.opts.easing);return r.tweens.push(u),u},stop:function(t){var i=0,f=t?r.tweens.length:0;if(o)return this;for(o=!0;i<f;i++)r.tweens[i].run(1);return t?(u.notifyWith(n,[r,1,0]),u.resolveWith(n,[r,t])):u.rejectWith(n,[r,t]),this}}),h=r.props;for(!function(n,t){var i,u,e,r,o;for(i in n)if(e=t[u=f.camelCase(i)],r=n[i],f.isArray(r)&&(e=r[1],r=n[i]=r[0]),i!==u&&(n[u]=r,delete n[i]),(o=f.cssHooks[u])&&"expand"in o)for(i in r=o.expand(r),delete n[u],r)i in n||(n[i]=r[i],t[i]=e);else t[u]=e}(h,r.opts.specialEasing);s<l;s++)if(e=v.prefilters[s].call(r,n,h,r.opts))return f.isFunction(e.stop)&&(f._queueHooks(r.elem,r.opts.queue).stop=f.proxy(e.stop,e)),e;return f.map(h,df,r),f.isFunction(r.opts.start)&&r.opts.start.call(n,r),f.fx.timer(f.extend(c,{elem:n,anim:r,queue:r.opts.queue})),r.progress(r.opts.progress).done(r.opts.done,r.opts.complete).fail(r.opts.fail).always(r.opts.always)}function ft(n){return f.attr(n,"class")||""}function oe(n){return function(t,i){"string"!=typeof t&&(i=t,t="*");var r,u=0,e=t.toLowerCase().match(a)||[];if(f.isFunction(i))for(;r=e[u++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(n[r]=n[r]||[]).unshift(i)):(n[r]=n[r]||[]).push(i)}}function se(n,t,i,r){function e(s){var h;return u[s]=!0,f.each(n[s]||[],function(n,f){var s=f(t,i,r);return"string"!=typeof s||o||u[s]?o?!(h=s):void 0:(t.dataTypes.unshift(s),e(s),!1)}),h}var u={},o=n===sr;return e(t.dataTypes[0])||!u["*"]&&e("*")}function cr(n,t){var r,i,u=f.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((u[i]?n:r||(r={}))[i]=t[i]);return r&&f.extend(!0,n,r),n}function ts(n){return n.style&&n.style.display||f.css(n,"display")}function lr(n,t,i,r){var u;if(f.isArray(t))f.each(t,function(t,u){i||rs.test(n)?r(n,u):lr(n+"["+("object"==typeof u&&null!=u?t:"")+"]",u,i,r)});else if(i||"object"!==f.type(t))r(n,t);else for(u in t)lr(n+"["+u+"]",t[u],i,r)}function ar(){try{return new i.XMLHttpRequest}catch(n){}}function ce(){try{return new i.ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}function le(n){return f.isWindow(n)?n:9===n.nodeType&&(n.defaultView||n.parentWindow)}var y=[],o=i.document,b=y.slice,pr=y.concat,oi=y.push,wr=y.indexOf,pt={},ye=pt.toString,et=pt.hasOwnProperty,e={},f=function(n,t){return new f.fn.init(n,t)},pe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,we=/^-ms-/,be=/-([\da-z])/gi,ke=function(n,t){return t.toUpperCase()},nt,ci,gr,nu,tu,wt,ru,a,l,vu,ki,kt,tr,rt,g,of,ht,ni,wf,bf,gf,te,ie,ri,vr,ei,yr,ae,ve;f.fn=f.prototype={jquery:"1.12.1",constructor:f,selector:"",length:0,toArray:function(){return b.call(this)},get:function(n){return null!=n?n<0?this[n+this.length]:this[n]:b.call(this)},pushStack:function(n){var t=f.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n){return f.each(this,n)},map:function(n){return this.pushStack(f.map(this,function(t,i){return n.call(t,i,t)}))},slice:function(){return this.pushStack(b.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(n<0?i:0);return this.pushStack(t>=0&&t<i?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:oi,sort:y.sort,splice:y.splice};f.extend=f.fn.extend=function(){var t,e,i,u,o,s,n=arguments[0]||{},r=1,c=arguments.length,h=!1;for("boolean"==typeof n&&(h=n,n=arguments[r]||{},r++),"object"==typeof n||f.isFunction(n)||(n={}),r===c&&(n=this,r--);r<c;r++)if(null!=(o=arguments[r]))for(u in o)t=n[u],n!==(i=o[u])&&(h&&i&&(f.isPlainObject(i)||(e=f.isArray(i)))?(e?(e=!1,s=t&&f.isArray(t)?t:[]):s=t&&f.isPlainObject(t)?t:{},n[u]=f.extend(h,s,i)):void 0!==i&&(n[u]=i));return n};f.extend({expando:"jQuery"+("1.12.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n);},noop:function(){},isFunction:function(n){return"function"===f.type(n)},isArray:Array.isArray||function(n){return"array"===f.type(n)},isWindow:function(n){return null!=n&&n==n.window},isNumeric:function(n){var t=n&&n.toString();return!f.isArray(n)&&t-parseFloat(t)+1>=0},isEmptyObject:function(n){for(var t in n)return!1;return!0},isPlainObject:function(n){var t;if(!n||"object"!==f.type(n)||n.nodeType||f.isWindow(n))return!1;try{if(n.constructor&&!et.call(n,"constructor")&&!et.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(!e.ownFirst)for(t in n)return et.call(n,t);for(t in n);return void 0===t||et.call(n,t)},type:function(n){return null==n?n+"":"object"==typeof n||"function"==typeof n?pt[ye.call(n)]||"object":typeof n},globalEval:function(n){n&&f.trim(n)&&(i.execScript||function(n){i.eval.call(i,n)})(n)},camelCase:function(n){return n.replace(we,"ms-").replace(be,ke)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t){var r,i=0;if(si(n))for(r=n.length;i<r&&!1!==t.call(n[i],i,n[i]);i++);else for(i in n)if(!1===t.call(n[i],i,n[i]))break;return n},trim:function(n){return null==n?"":(n+"").replace(pe,"")},makeArray:function(n,t){var i=t||[];return null!=n&&(si(Object(n))?f.merge(i,"string"==typeof n?[n]:n):oi.call(i,n)),i},inArray:function(n,t,i){var r;if(t){if(wr)return wr.call(t,n,i);for(r=t.length,i=i?i<0?Math.max(0,r+i):i:0;i<r;i++)if(i in t&&t[i]===n)return i}return-1},merge:function(n,t){for(var r=+t.length,i=0,u=n.length;i<r;)n[u++]=t[i++];if(r!=r)for(;void 0!==t[i];)n[u++]=t[i++];return n.length=u,n},grep:function(n,t,i){for(var u=[],r=0,f=n.length,e=!i;r<f;r++)!t(n[r],r)!==e&&u.push(n[r]);return u},map:function(n,t,i){var e,u,r=0,f=[];if(si(n))for(e=n.length;r<e;r++)null!=(u=t(n[r],r,i))&&f.push(u);else for(r in n)null!=(u=t(n[r],r,i))&&f.push(u);return pr.apply([],f)},guid:1,proxy:function(n,t){var i,r,u;if("string"==typeof t&&(u=n[t],t=n,n=u),f.isFunction(n))return i=b.call(arguments,2),(r=function(){return n.apply(t||this,i.concat(b.call(arguments)))}).guid=n.guid=n.guid||f.guid++,r},now:function(){return+new Date},support:e});"function"==typeof Symbol&&(f.fn[Symbol.iterator]=y[Symbol.iterator]);f.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(n,t){pt["[object "+t+"]"]=t.toLowerCase()});nt=function(n){function u(n,t,r,u){var l,p,a,s,nt,w,d,g,y=t&&t.ownerDocument,v=t?t.nodeType:9;if(r=r||[],"string"!=typeof n||!n||1!==v&&9!==v&&11!==v)return r;if(!u&&((t?t.ownerDocument||t:c)!==i&&b(t),t=t||i,h)){if(11!==v&&(w=sr.exec(n)))if(l=w[1]){if(9===v){if(!(a=t.getElementById(l)))return r;if(a.id===l)return r.push(a),r}else if(y&&(a=y.getElementById(l))&&et(t,a)&&a.id===l)return r.push(a),r}else{if(w[2])return k.apply(r,t.getElementsByTagName(n)),r;if((l=w[3])&&f.getElementsByClassName&&t.getElementsByClassName)return k.apply(r,t.getElementsByClassName(l)),r}if(f.qsa&&!lt[n+" "]&&(!o||!o.test(n))){if(1!==v)y=t,g=n;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(hr,"\\$&"):t.setAttribute("id",s=e),p=(d=ft(n)).length,nt=yi.test(s)?"#"+s:"[id='"+s+"']";p--;)d[p]=nt+" "+yt(d[p]);g=d.join(",");y=gt.test(n)&&ii(t.parentNode)||t}if(g)try{return k.apply(r,y.querySelectorAll(g)),r}catch(n){}finally{s===e&&t.removeAttribute("id")}}}return si(n.replace(at,"$1"),t,r,u)}function ni(){var n=[];return function i(r,u){return n.push(r+" ")>t.cacheLength&&delete i[n.shift()],i[r+" "]=u}}function l(n){return n[e]=!0,n}function a(n){var t=i.createElement("div");try{return!!n(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function ti(n,i){for(var r=n.split("|"),u=r.length;u--;)t.attrHandle[r[u]]=i}function wi(n,t){var i=t&&n,r=i&&1===n.nodeType&&1===t.nodeType&&(~t.sourceIndex||li)-(~n.sourceIndex||li);if(r)return r;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return n?1:-1}function cr(n){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===n}}function lr(n){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===n}}function it(n){return l(function(t){return t=+t,l(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ii(n){return n&&void 0!==n.getElementsByTagName&&n}function bi(){}function yt(n){for(var t=0,r=n.length,i="";t<r;t++)i+=n[t].value;return i}function ri(n,t,i){var r=t.dir,u=i&&"parentNode"===r,f=ki++;return t.first?function(t,i,f){for(;t=t[r];)if(1===t.nodeType||u)return n(t,i,f)}:function(t,i,o){var s,c,l,h=[v,f];if(o){for(;t=t[r];)if((1===t.nodeType||u)&&n(t,i,o))return!0}else for(;t=t[r];)if(1===t.nodeType||u){if((s=(c=(l=t[e]||(t[e]={}))[t.uniqueID]||(l[t.uniqueID]={}))[r])&&s[0]===v&&s[1]===f)return h[2]=s[2];if(c[r]=h,h[2]=n(t,i,o))return!0}}}function ui(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function pt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=null!=t;f<s;f++)(e=n[f])&&(i&&!i(e,r,u)||(o.push(e),h&&t.push(f)));return o}function fi(n,t,i,r,f,o){return r&&!r[e]&&(r=fi(r)),f&&!f[e]&&(f=fi(f,o)),l(function(e,o,s,h){var a,l,v,w=[],p=[],b=o.length,d=e||function(n,t,i){for(var r=0,f=t.length;r<f;r++)u(n,t[r],i);return i}(t||"*",s.nodeType?[s]:s,[]),y=!n||!e&&t?d:pt(d,w,n,s,h),c=i?f||(e?n:b||r)?[]:o:y;if(i&&i(y,c,s,h),r)for(a=pt(c,p),r(a,[],s,h),l=a.length;l--;)(v=a[l])&&(c[p[l]]=!(y[p[l]]=v));if(e){if(f||n){if(f){for(a=[],l=c.length;l--;)(v=c[l])&&a.push(y[l]=v);f(null,c=[],a,h)}for(l=c.length;l--;)(v=c[l])&&(a=f?nt(e,v):w[l])>-1&&(e[a]=!(o[a]=v))}}else c=pt(c===o?c.splice(b,c.length):c),f?f(null,o,c,h):k.apply(o,c)})}function ei(n){for(var o,u,r,s=n.length,h=t.relative[n[0].type],c=h||t.relative[" "],i=h?1:0,l=ri(function(n){return n===o},c,!0),a=ri(function(n){return nt(o,n)>-1},c,!0),f=[function(n,t,i){var r=!h&&(i||t!==ht)||((o=t).nodeType?l(n,t,i):a(n,t,i));return o=null,r}];i<s;i++)if(u=t.relative[n[i].type])f=[ri(ui(f),u)];else{if((u=t.filter[n[i].type].apply(null,n[i].matches))[e]){for(r=++i;r<s&&!t.relative[n[r].type];r++);return fi(i>1&&ui(f),i>1&&yt(n.slice(0,i-1).concat({value:" "===n[i-2].type?"*":""})).replace(at,"$1"),u,i<r&&ei(n.slice(i,r)),r<s&&ei(n=n.slice(r)),r<s&&yt(n))}f.push(u)}return ui(f)}var rt,f,t,st,oi,ft,wt,si,ht,w,ut,b,i,s,h,o,d,ct,et,e="sizzle"+1*new Date,c=n.document,v=0,ki=0,hi=ni(),ci=ni(),lt=ni(),bt=function(n,t){return n===t&&(ut=!0),0},li=-2147483648,di={}.hasOwnProperty,g=[],gi=g.pop,nr=g.push,k=g.push,ai=g.slice,nt=function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},kt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",r="[\\x20\\t\\r\\n\\f]",tt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",vi="\\["+r+"*("+tt+")(?:"+r+"*([*^$|!~]?=)"+r+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+tt+"))|)"+r+"*\\]",dt=":("+tt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+vi+")*)|.*)\\)|)",tr=new RegExp(r+"+","g"),at=new RegExp("^"+r+"+|((?:^|[^\\\\])(?:\\\\.)*)"+r+"+$","g"),ir=new RegExp("^"+r+"*,"+r+"*"),rr=new RegExp("^"+r+"*([>+~]|"+r+")"+r+"*"),ur=new RegExp("="+r+"*([^\\]'\"]*?)"+r+"*\\]","g"),fr=new RegExp(dt),yi=new RegExp("^"+tt+"$"),vt={ID:new RegExp("^#("+tt+")"),CLASS:new RegExp("^\\.("+tt+")"),TAG:new RegExp("^("+tt+"|[*])"),ATTR:new RegExp("^"+vi),PSEUDO:new RegExp("^"+dt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+r+"*(even|odd|(([+-]|)(\\d*)n|)"+r+"*(?:([+-]|)"+r+"*(\\d+)|))"+r+"*\\)|)","i"),bool:new RegExp("^(?:"+kt+")$","i"),needsContext:new RegExp("^"+r+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+r+"*((?:-\\d)?\\d*)"+r+"*\\)|)(?=[^-]|$)","i")},er=/^(?:input|select|textarea|button)$/i,or=/^h\d$/i,ot=/^[^{]+\{\s*\[native \w/,sr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,hr=/'|\\/g,y=new RegExp("\\\\([\\da-f]{1,6}"+r+"?|("+r+")|.)","ig"),p=function(n,t,i){var r="0x"+t-65536;return r!=r||i?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},pi=function(){b()};try{k.apply(g=ai.call(c.childNodes),c.childNodes);g[c.childNodes.length].nodeType}catch(n){k={apply:g.length?function(n,t){nr.apply(n,ai.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}for(rt in f=u.support={},oi=u.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return!!t&&"HTML"!==t.nodeName},b=u.setDocument=function(n){var v,u,l=n?n.ownerDocument||n:c;return l!==i&&9===l.nodeType&&l.documentElement?(s=(i=l).documentElement,h=!oi(i),(u=i.defaultView)&&u.top!==u&&(u.addEventListener?u.addEventListener("unload",pi,!1):u.attachEvent&&u.attachEvent("onunload",pi)),f.attributes=a(function(n){return n.className="i",!n.getAttribute("className")}),f.getElementsByTagName=a(function(n){return n.appendChild(i.createComment("")),!n.getElementsByTagName("*").length}),f.getElementsByClassName=ot.test(i.getElementsByClassName),f.getById=a(function(n){return s.appendChild(n).id=e,!i.getElementsByName||!i.getElementsByName(e).length}),f.getById?(t.find.ID=function(n,t){if(void 0!==t.getElementById&&h){var i=t.getElementById(n);return i?[i]:[]}},t.filter.ID=function(n){var t=n.replace(y,p);return function(n){return n.getAttribute("id")===t}}):(delete t.find.ID,t.filter.ID=function(n){var t=n.replace(y,p);return function(n){var i=void 0!==n.getAttributeNode&&n.getAttributeNode("id");return i&&i.value===t}}),t.find.TAG=f.getElementsByTagName?function(n,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(n):f.qsa?t.querySelectorAll(n):void 0}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if("*"===n){for(;i=u[f++];)1===i.nodeType&&r.push(i);return r}return u},t.find.CLASS=f.getElementsByClassName&&function(n,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(n)},d=[],o=[],(f.qsa=ot.test(i.querySelectorAll))&&(a(function(n){s.appendChild(n).innerHTML="<a id='"+e+"'><\/a><select id='"+e+"-\r\\' msallowcapture=''><option selected=''><\/option><\/select>";n.querySelectorAll("[msallowcapture^='']").length&&o.push("[*^$]="+r+"*(?:''|\"\")");n.querySelectorAll("[selected]").length||o.push("\\["+r+"*(?:value|"+kt+")");n.querySelectorAll("[id~="+e+"-]").length||o.push("~=");n.querySelectorAll(":checked").length||o.push(":checked");n.querySelectorAll("a#"+e+"+*").length||o.push(".#.+[+~]")}),a(function(n){var t=i.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("name","D");n.querySelectorAll("[name=d]").length&&o.push("name"+r+"*[*^$|!~]?=");n.querySelectorAll(":enabled").length||o.push(":enabled",":disabled");n.querySelectorAll("*,:x");o.push(",.*:")})),(f.matchesSelector=ot.test(ct=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&a(function(n){f.disconnectedMatch=ct.call(n,"div");ct.call(n,"[s!='']:x");d.push("!=",dt)}),o=o.length&&new RegExp(o.join("|")),d=d.length&&new RegExp(d.join("|")),v=ot.test(s.compareDocumentPosition),et=v||ot.test(s.contains)?function(n,t){var r=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)for(;t=t.parentNode;)if(t===n)return!0;return!1},bt=v?function(n,t){if(n===t)return ut=!0,0;var r=!n.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(n)===r?n===i||n.ownerDocument===c&&et(c,n)?-1:t===i||t.ownerDocument===c&&et(c,t)?1:w?nt(w,n)-nt(w,t):0:4&r?-1:1)}:function(n,t){if(n===t)return ut=!0,0;var r,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(!o||!s)return n===i?-1:t===i?1:o?-1:s?1:w?nt(w,n)-nt(w,t):0;if(o===s)return wi(n,t);for(r=n;r=r.parentNode;)f.unshift(r);for(r=t;r=r.parentNode;)e.unshift(r);for(;f[u]===e[u];)u++;return u?wi(f[u],e[u]):f[u]===c?-1:e[u]===c?1:0},i):i},u.matches=function(n,t){return u(n,null,null,t)},u.matchesSelector=function(n,t){if((n.ownerDocument||n)!==i&&b(n),t=t.replace(ur,"='$1']"),f.matchesSelector&&h&&!lt[t+" "]&&(!d||!d.test(t))&&(!o||!o.test(t)))try{var r=ct.call(n,t);if(r||f.disconnectedMatch||n.document&&11!==n.document.nodeType)return r}catch(n){}return u(t,i,null,[n]).length>0},u.contains=function(n,t){return(n.ownerDocument||n)!==i&&b(n),et(n,t)},u.attr=function(n,r){(n.ownerDocument||n)!==i&&b(n);var e=t.attrHandle[r.toLowerCase()],u=e&&di.call(t.attrHandle,r.toLowerCase())?e(n,r,!h):void 0;return void 0!==u?u:f.attributes||!h?n.getAttribute(r):(u=n.getAttributeNode(r))&&u.specified?u.value:null},u.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);},u.uniqueSort=function(n){var r,u=[],t=0,i=0;if(ut=!f.detectDuplicates,w=!f.sortStable&&n.slice(0),n.sort(bt),ut){for(;r=n[i++];)r===n[i]&&(t=u.push(i));for(;t--;)n.splice(u[t],1)}return w=null,n},st=u.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=st(n)}else if(3===t||4===t)return n.nodeValue}else for(;r=n[u++];)i+=st(r);return i},(t=u.selectors={cacheLength:50,createPseudo:l,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(y,p),n[3]=(n[3]||n[4]||n[5]||"").replace(y,p),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||u.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&u.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return vt.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&fr.test(t)&&(i=ft(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(y,p).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=hi[n+" "];return t||(t=new RegExp("(^|"+r+")"+n+"("+r+"|$)"))&&hi(n,function(n){return t.test("string"==typeof n.className&&n.className||void 0!==n.getAttribute&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(r){var f=u.attr(r,n);return null==f?"!="===t:!t||(f+="","="===t?f===i:"!="===t?f!==i:"^="===t?i&&0===f.indexOf(i):"*="===t?i&&f.indexOf(i)>-1:"$="===t?i&&f.slice(-i.length)===i:"~="===t?(" "+f.replace(tr," ")+" ").indexOf(i)>-1:"|="===t&&(f===i||f.slice(0,i.length+1)===i+"-"))}},CHILD:function(n,t,i,r,u){var s="nth"!==n.slice(0,3),o="last"!==n.slice(-4),f="of-type"===t;return 1===r&&0===u?function(n){return!!n.parentNode}:function(t,i,h){var p,d,y,c,a,w,b=s!==o?"nextSibling":"previousSibling",k=t.parentNode,nt=f&&t.nodeName.toLowerCase(),g=!h&&!f,l=!1;if(k){if(s){for(;b;){for(c=t;c=c[b];)if(f?c.nodeName.toLowerCase()===nt:1===c.nodeType)return!1;w=b="only"===n&&!w&&"nextSibling"}return!0}if(w=[o?k.firstChild:k.lastChild],o&&g){for(l=(a=(p=(d=(y=(c=k)[e]||(c[e]={}))[c.uniqueID]||(y[c.uniqueID]={}))[n]||[])[0]===v&&p[1])&&p[2],c=a&&k.childNodes[a];c=++a&&c&&c[b]||(l=a=0)||w.pop();)if(1===c.nodeType&&++l&&c===t){d[n]=[v,a,l];break}}else if(g&&(l=a=(p=(d=(y=(c=t)[e]||(c[e]={}))[c.uniqueID]||(y[c.uniqueID]={}))[n]||[])[0]===v&&p[1]),!1===l)for(;(c=++a&&c&&c[b]||(l=a=0)||w.pop())&&((f?c.nodeName.toLowerCase()!==nt:1!==c.nodeType)||!++l||(g&&((d=(y=c[e]||(c[e]={}))[c.uniqueID]||(y[c.uniqueID]={}))[n]=[v,l]),c!==t)););return(l-=u)===r||l%r==0&&l/r>=0}}},PSEUDO:function(n,i){var f,r=t.pseudos[n]||t.setFilters[n.toLowerCase()]||u.error("unsupported pseudo: "+n);return r[e]?r(i):r.length>1?(f=[n,n,"",i],t.setFilters.hasOwnProperty(n.toLowerCase())?l(function(n,t){for(var e,u=r(n,i),f=u.length;f--;)n[e=nt(n,u[f])]=!(t[e]=u[f])}):function(n){return r(n,0,f)}):r}},pseudos:{not:l(function(n){var t=[],r=[],i=wt(n.replace(at,"$1"));return i[e]?l(function(n,t,r,u){for(var e,o=i(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(t[f]=e))}):function(n,u,f){return t[0]=n,i(t,null,f,r),t[0]=null,!r.pop()}}),has:l(function(n){return function(t){return u(n,t).length>0}}),contains:l(function(n){return n=n.replace(y,p),function(t){return(t.textContent||t.innerText||st(t)).indexOf(n)>-1}}),lang:l(function(n){return yi.test(n||"")||u.error("unsupported lang: "+n),n=n.replace(y,p).toLowerCase(),function(t){var i;do if(i=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===n||0===i.indexOf(n+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===s},focus:function(n){return n===i.activeElement&&(!i.hasFocus||i.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return!1===n.disabled},disabled:function(n){return!0===n.disabled},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,!0===n.selected},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!t.pseudos.empty(n)},header:function(n){return or.test(n.nodeName)},input:function(n){return er.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||"text"===t.toLowerCase())},first:it(function(){return[0]}),last:it(function(n,t){return[t-1]}),eq:it(function(n,t,i){return[i<0?i+t:i]}),even:it(function(n,t){for(var i=0;i<t;i+=2)n.push(i);return n}),odd:it(function(n,t){for(var i=1;i<t;i+=2)n.push(i);return n}),lt:it(function(n,t,i){for(var r=i<0?i+t:i;--r>=0;)n.push(r);return n}),gt:it(function(n,t,i){for(var r=i<0?i+t:i;++r<t;)n.push(r);return n})}}).pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[rt]=cr(rt);for(rt in{submit:!0,reset:!0})t.pseudos[rt]=lr(rt);return bi.prototype=t.filters=t.pseudos,t.setFilters=new bi,ft=u.tokenize=function(n,i){var e,f,s,o,r,h,c,l=ci[n+" "];if(l)return i?0:l.slice(0);for(r=n,h=[],c=t.preFilter;r;){for(o in e&&!(f=ir.exec(r))||(f&&(r=r.slice(f[0].length)||r),h.push(s=[])),e=!1,(f=rr.exec(r))&&(e=f.shift(),s.push({value:e,type:f[0].replace(at," ")}),r=r.slice(e.length)),t.filter)(f=vt[o].exec(r))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),r=r.slice(e.length));if(!e)break}return i?r.length:r?u.error(n):ci(n,h).slice(0)},wt=u.compile=function(n,r){var o,s=[],c=[],f=lt[n+" "];if(!f){for(r||(r=ft(n)),o=r.length;o--;)(f=ei(r[o]))[e]?s.push(f):c.push(f);(f=lt(n,function(n,r){var f=r.length>0,e=n.length>0,o=function(o,s,c,l,a){var y,nt,d,g=0,p="0",tt=o&&[],w=[],it=ht,rt=o||e&&t.find.TAG("*",a),ut=v+=null==it?1:Math.random()||.1,ft=rt.length;for(a&&(ht=s===i||s||a);p!==ft&&null!=(y=rt[p]);p++){if(e&&y){for(nt=0,s||y.ownerDocument===i||(b(y),c=!h);d=n[nt++];)if(d(y,s||i,c)){l.push(y);break}a&&(v=ut)}f&&((y=!d&&y)&&g--,o&&tt.push(y))}if(g+=p,f&&p!==g){for(nt=0;d=r[nt++];)d(tt,w,s,c);if(o){if(g>0)for(;p--;)tt[p]||w[p]||(w[p]=gi.call(l));w=pt(w)}k.apply(l,w);a&&!o&&w.length>0&&g+r.length>1&&u.uniqueSort(l)}return a&&(v=ut,ht=it),tt};return f?l(o):o}(c,s))).selector=n}return f},si=u.select=function(n,i,r,u){var s,e,o,a,v,l="function"==typeof n&&n,c=!u&&ft(n=l.selector||n);if(r=r||[],1===c.length){if((e=c[0]=c[0].slice(0)).length>2&&"ID"===(o=e[0]).type&&f.getById&&9===i.nodeType&&h&&t.relative[e[1].type]){if(!(i=(t.find.ID(o.matches[0].replace(y,p),i)||[])[0]))return r;l&&(i=i.parentNode);n=n.slice(e.shift().value.length)}for(s=vt.needsContext.test(n)?0:e.length;s--&&(o=e[s],!t.relative[a=o.type]);)if((v=t.find[a])&&(u=v(o.matches[0].replace(y,p),gt.test(e[0].type)&&ii(i.parentNode)||i))){if(e.splice(s,1),!(n=u.length&&yt(e)))return k.apply(r,u),r;break}}return(l||wt(n,c))(u,i,!h,r,!i||gt.test(n)&&ii(i.parentNode)||i),r},f.sortStable=e.split("").sort(bt).join("")===e,f.detectDuplicates=!!ut,b(),f.sortDetached=a(function(n){return 1&n.compareDocumentPosition(i.createElement("div"))}),a(function(n){return n.innerHTML="<a href='#'><\/a>","#"===n.firstChild.getAttribute("href")})||ti("type|href|height|width",function(n,t,i){if(!i)return n.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&a(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),""===n.firstChild.getAttribute("value")})||ti("value",function(n,t,i){if(!i&&"input"===n.nodeName.toLowerCase())return n.defaultValue}),a(function(n){return null==n.getAttribute("disabled")})||ti(kt,function(n,t,i){var r;if(!i)return!0===n[t]?t.toLowerCase():(r=n.getAttributeNode(t))&&r.specified?r.value:null}),u}(i);f.find=nt;f.expr=nt.selectors;f.expr[":"]=f.expr.pseudos;f.uniqueSort=f.unique=nt.uniqueSort;f.text=nt.getText;f.isXMLDoc=nt.isXML;f.contains=nt.contains;var ot=function(n,t,i){for(var r=[],u=void 0!==i;(n=n[t])&&9!==n.nodeType;)if(1===n.nodeType){if(u&&f(n).is(i))break;r.push(n)}return r},br=function(n,t){for(var i=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&i.push(n);return i},kr=f.expr.match.needsContext,dr=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,de=/^.[^:#\[\.,]*$/;f.filter=function(n,t,i){var r=t[0];return i&&(n=":not("+n+")"),1===t.length&&1===r.nodeType?f.find.matchesSelector(r,n)?[r]:[]:f.find.matches(n,f.grep(t,function(n){return 1===n.nodeType}))};f.fn.extend({find:function(n){var t,i=[],r=this,u=r.length;if("string"!=typeof n)return this.pushStack(f(n).filter(function(){for(t=0;t<u;t++)if(f.contains(r[t],this))return!0}));for(t=0;t<u;t++)f.find(n,r[t],i);return(i=this.pushStack(u>1?f.unique(i):i)).selector=this.selector?this.selector+" "+n:n,i},filter:function(n){return this.pushStack(hi(this,n||[],!1))},not:function(n){return this.pushStack(hi(this,n||[],!0))},is:function(n){return!!hi(this,"string"==typeof n&&kr.test(n)?f(n):n||[],!1).length}});gr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(f.fn.init=function(n,t,i){var r,u;if(!n)return this;if(i=i||ci,"string"==typeof n){if(!(r="<"===n.charAt(0)&&">"===n.charAt(n.length-1)&&n.length>=3?[null,n,null]:gr.exec(n))||!r[1]&&t)return!t||t.jquery?(t||i).find(n):this.constructor(t).find(n);if(r[1]){if(t=t instanceof f?t[0]:t,f.merge(this,f.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:o,!0)),dr.test(r[1])&&f.isPlainObject(t))for(r in t)f.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}if((u=o.getElementById(r[2]))&&u.parentNode){if(u.id!==r[2])return ci.find(n);this.length=1;this[0]=u}return this.context=o,this.selector=n,this}return n.nodeType?(this.context=this[0]=n,this.length=1,this):f.isFunction(n)?void 0!==i.ready?i.ready(n):n(f):(void 0!==n.selector&&(this.selector=n.selector,this.context=n.context),f.makeArray(n,this))}).prototype=f.fn;ci=f(o);nu=/^(?:parents|prev(?:Until|All))/;tu={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({has:function(n){var t,i=f(n,this),r=i.length;return this.filter(function(){for(t=0;t<r;t++)if(f.contains(this,i[t]))return!0})},closest:function(n,t){for(var i,u=0,o=this.length,r=[],e=kr.test(n)||"string"!=typeof n?f(n,t||this.context):0;u<o;u++)for(i=this[u];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(e?e.index(i)>-1:1===i.nodeType&&f.find.matchesSelector(i,n))){r.push(i);break}return this.pushStack(r.length>1?f.uniqueSort(r):r)},index:function(n){return n?"string"==typeof n?f.inArray(this[0],f(n)):f.inArray(n.jquery?n[0]:n,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(f.uniqueSort(f.merge(this.get(),f(n,t))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}});f.each({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return ot(n,"parentNode")},parentsUntil:function(n,t,i){return ot(n,"parentNode",i)},next:function(n){return iu(n,"nextSibling")},prev:function(n){return iu(n,"previousSibling")},nextAll:function(n){return ot(n,"nextSibling")},prevAll:function(n){return ot(n,"previousSibling")},nextUntil:function(n,t,i){return ot(n,"nextSibling",i)},prevUntil:function(n,t,i){return ot(n,"previousSibling",i)},siblings:function(n){return br((n.parentNode||{}).firstChild,n)},children:function(n){return br(n.firstChild)},contents:function(n){return f.nodeName(n,"iframe")?n.contentDocument||n.contentWindow.document:f.merge([],n.childNodes)}},function(n,t){f.fn[n]=function(i,r){var u=f.map(this,t,i);return"Until"!==n.slice(-5)&&(r=i),r&&"string"==typeof r&&(u=f.filter(r,u)),this.length>1&&(tu[n]||(u=f.uniqueSort(u)),nu.test(n)&&(u=u.reverse())),this.pushStack(u)}});a=/\S+/g;for(ru in f.Callbacks=function(n){n="string"==typeof n?function(n){var t={};return f.each(n.match(a)||[],function(n,i){t[i]=!0}),t}(n):f.extend({},n);var u,i,h,e,t=[],o=[],r=-1,c=function(){for(e=n.once,h=u=!0;o.length;r=-1)for(i=o.shift();++r<t.length;)!1===t[r].apply(i[0],i[1])&&n.stopOnFalse&&(r=t.length,i=!1);n.memory||(i=!1);u=!1;e&&(t=i?[]:"")},s={add:function(){return t&&(i&&!u&&(r=t.length-1,o.push(i)),function u(i){f.each(i,function(i,r){f.isFunction(r)?n.unique&&s.has(r)||t.push(r):r&&r.length&&"string"!==f.type(r)&&u(r)})}(arguments),i&&!u&&c()),this},remove:function(){return f.each(arguments,function(n,i){for(var u;(u=f.inArray(i,t,u))>-1;)t.splice(u,1),u<=r&&r--}),this},has:function(n){return n?f.inArray(n,t)>-1:t.length>0},empty:function(){return t&&(t=[]),this},disable:function(){return e=o=[],t=i="",this},disabled:function(){return!t},lock:function(){return e=!0,i||s.disable(),this},locked:function(){return!!e},fireWith:function(n,t){return e||(t=[n,(t=t||[]).slice?t.slice():t],o.push(t),u||c()),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!h}};return s},f.extend({Deferred:function(n){var r=[["resolve","done",f.Callbacks("once memory"),"resolved"],["reject","fail",f.Callbacks("once memory"),"rejected"],["notify","progress",f.Callbacks("memory")]],u="pending",i={state:function(){return u},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return f.Deferred(function(u){f.each(r,function(r,e){var o=f.isFunction(n[r])&&n[r];t[e[1]](function(){var n=o&&o.apply(this,arguments);n&&f.isFunction(n.promise)?n.promise().progress(u.notify).done(u.resolve).fail(u.reject):u[e[0]+"With"](this===i?u.promise():this,o?[n]:arguments)})});n=null}).promise()},promise:function(n){return null!=n?f.extend(n,i):i}},t={};return i.pipe=i.then,f.each(r,function(n,f){var e=f[2],o=f[3];i[f[1]]=e.add;o&&e.add(function(){u=o},r[1^n][2].disable,r[2][2].lock);t[f[0]]=function(){return t[f[0]+"With"](this===t?i:this,arguments),this};t[f[0]+"With"]=e.fireWith}),i.promise(t),n&&n.call(t,t),t},when:function(n){var o,h,s,t=0,r=b.call(arguments),i=r.length,e=1!==i||n&&f.isFunction(n.promise)?i:0,u=1===e?n:f.Deferred(),c=function(n,t,i){return function(r){t[n]=this;i[n]=arguments.length>1?b.call(arguments):r;i===o?u.notifyWith(t,i):--e||u.resolveWith(t,i)}};if(i>1)for(o=new Array(i),h=new Array(i),s=new Array(i);t<i;t++)r[t]&&f.isFunction(r[t].promise)?r[t].promise().progress(c(t,h,o)).done(c(t,s,r)).fail(u.reject):--e;return e||u.resolveWith(s,r),u.promise()}}),f.fn.ready=function(n){return f.ready.promise().done(n),this},f.extend({isReady:!1,readyWait:1,holdReady:function(n){n?f.readyWait++:f.ready(!0)},ready:function(n){(!0===n?--f.readyWait:f.isReady)||(f.isReady=!0,!0!==n&&--f.readyWait>0||(wt.resolveWith(o,[f]),f.fn.triggerHandler&&(f(o).triggerHandler("ready"),f(o).off("ready"))))}}),f.ready.promise=function(n){if(!wt)if(wt=f.Deferred(),"complete"!==o.readyState&&("loading"===o.readyState||o.documentElement.doScroll))if(o.addEventListener)o.addEventListener("DOMContentLoaded",k),i.addEventListener("load",k);else{o.attachEvent("onreadystatechange",k);i.attachEvent("onload",k);var t=!1;try{t=null==i.frameElement&&o.documentElement}catch(n){}t&&t.doScroll&&function n(){if(!f.isReady){try{t.doScroll("left")}catch(t){return i.setTimeout(n,50)}uu();f.ready()}}()}else i.setTimeout(f.ready);return wt.promise(n)},f.ready.promise(),f(e))break;e.ownFirst="0"===ru;e.inlineBlockNeedsLayout=!1;f(function(){var r,n,t,i;(t=o.getElementsByTagName("body")[0])&&t.style&&(n=o.createElement("div"),(i=o.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(i).appendChild(n),void 0!==n.style.zoom&&(n.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",e.inlineBlockNeedsLayout=r=3===n.offsetWidth,r&&(t.style.zoom=1)),t.removeChild(i))}),function(){var n=o.createElement("div");e.deleteExpando=!0;try{delete n.test}catch(n){e.deleteExpando=!1}n=null}();var at,vt=function(n){var t=f.noData[(n.nodeName+" ").toLowerCase()],i=+n.nodeType||1;return(1===i||9===i)&&(!t||!0!==t&&n.getAttribute("classid")===t)},ge=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,no=/([A-Z])/g;f.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(n){return!!(n=n.nodeType?f.cache[n[f.expando]]:n[f.expando])&&!li(n)},data:function(n,t,i){return eu(n,t,i)},removeData:function(n,t){return ou(n,t)},_data:function(n,t,i){return eu(n,t,i,!0)},_removeData:function(n,t){return ou(n,t,!0)}});f.fn.extend({data:function(n,t){var r,u,e,i=this[0],o=i&&i.attributes;if(void 0===n){if(this.length&&(e=f.data(i),1===i.nodeType&&!f._data(i,"parsedAttrs"))){for(r=o.length;r--;)o[r]&&0===(u=o[r].name).indexOf("data-")&&fu(i,u=f.camelCase(u.slice(5)),e[u]);f._data(i,"parsedAttrs",!0)}return e}return"object"==typeof n?this.each(function(){f.data(this,n)}):arguments.length>1?this.each(function(){f.data(this,n,t)}):i?fu(i,n,f.data(i,n)):void 0},removeData:function(n){return this.each(function(){f.removeData(this,n)})}});f.extend({queue:function(n,t,i){var r;if(n)return t=(t||"fx")+"queue",r=f._data(n,t),i&&(!r||f.isArray(i)?r=f._data(n,t,f.makeArray(i)):r.push(i)),r||[]},dequeue:function(n,t){t=t||"fx";var i=f.queue(n,t),e=i.length,r=i.shift(),u=f._queueHooks(n,t);"inprogress"===r&&(r=i.shift(),e--);r&&("fx"===t&&i.unshift("inprogress"),delete u.stop,r.call(n,function(){f.dequeue(n,t)},u));!e&&u&&u.empty.fire()},_queueHooks:function(n,t){var i=t+"queueHooks";return f._data(n,i)||f._data(n,i,{empty:f.Callbacks("once memory").add(function(){f._removeData(n,t+"queue");f._removeData(n,i)})})}});f.fn.extend({queue:function(n,t){var i=2;return"string"!=typeof n&&(t=n,n="fx",i--),arguments.length<i?f.queue(this[0],n):void 0===t?this:this.each(function(){var i=f.queue(this,n,t);f._queueHooks(this,n);"fx"===n&&"inprogress"!==i[0]&&f.dequeue(this,n)})},dequeue:function(n){return this.each(function(){f.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,t){var i,u=1,e=f.Deferred(),r=this,o=this.length,s=function(){--u||e.resolveWith(r,[r])};for("string"!=typeof n&&(t=n,n=void 0),n=n||"fx";o--;)(i=f._data(r[o],n+"queueHooks"))&&i.empty&&(u++,i.empty.add(s));return s(),e.promise(t)}});e.shrinkWrapBlocks=function(){return null!=at?at:(at=!1,(t=o.getElementsByTagName("body")[0])&&t.style?(n=o.createElement("div"),(i=o.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(i).appendChild(n),void 0!==n.style.zoom&&(n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",n.appendChild(o.createElement("div")).style.width="5px",at=3!==n.offsetWidth),t.removeChild(i),at):void 0);var n,t,i};var ai=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,vi=new RegExp("^(?:([+-])=|)("+ai+")([a-z%]*)$","i"),tt=["Top","Right","Bottom","Left"],yt=function(n,t){return n=t||n,"none"===f.css(n,"display")||!f.contains(n.ownerDocument,n)};var c,yi,p,d=function(n,t,i,r,u,e,o){var s=0,c=n.length,h=null==i;if("object"===f.type(i))for(s in u=!0,i)d(n,t,s,i[s],!0,e,o);else if(void 0!==r&&(u=!0,f.isFunction(r)||(o=!0),h&&(o?(t.call(n,r),t=null):(h=t,t=function(n,t,i){return h.call(f(n),i)})),t))for(;s<c;s++)t(n[s],i,o?r:r.call(n[s],s,t(n[s],i)));return u?n:h?t.call(n):c?t(n[0],i):e},pi=/^(?:checkbox|radio)$/i,hu=/<([\w:-]+)/,cu=/^$|\/(?:java|ecma)script/i,wi=/^\s+/,lu="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";c=o.createElement("div");yi=o.createDocumentFragment();p=o.createElement("input");c.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>";e.leadingWhitespace=3===c.firstChild.nodeType;e.tbody=!c.getElementsByTagName("tbody").length;e.htmlSerialize=!!c.getElementsByTagName("link").length;e.html5Clone="<:nav><\/:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML;p.type="checkbox";p.checked=!0;yi.appendChild(p);e.appendChecked=p.checked;c.innerHTML="<textarea>x<\/textarea>";e.noCloneChecked=!!c.cloneNode(!0).lastChild.defaultValue;yi.appendChild(c);(p=o.createElement("input")).setAttribute("type","radio");p.setAttribute("checked","checked");p.setAttribute("name","t");c.appendChild(p);e.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked;e.noCloneEvent=!!c.addEventListener;c[f.expando]=1;e.attributes=!c.getAttribute(f.expando);l={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],area:[1,"<map>","<\/map>"],param:[1,"<object>","<\/object>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:e.htmlSerialize?[0,"",""]:[1,"X<div>","<\/div>"]};l.optgroup=l.option;l.tbody=l.tfoot=l.colgroup=l.caption=l.thead;l.th=l.td;vu=/<|&#?\w+;/;ki=/<tbody/i;!function(){var n,t,r=o.createElement("div");for(n in{submit:!0,change:!0,focusin:!0})t="on"+n,(e[n]=t in i)||(r.setAttribute(t,"t"),e[n]=!1===r.attributes[t].expando);r=null}();var di=/^(?:input|select|textarea)$/i,io=/^key/,ro=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,pu=/^(?:focusinfocus|focusoutblur)$/,wu=/^([^.]*)(?:\.(.+)|)/;f.event={global:{},add:function(n,t,i,r,u){var b,v,y,p,o,s,h,c,e,w,k,l=f._data(n);if(l){for(i.handler&&(i=(p=i).handler,u=p.selector),i.guid||(i.guid=f.guid++),(v=l.events)||(v=l.events={}),(s=l.handle)||((s=l.handle=function(n){if(void 0!==f&&(!n||f.event.triggered!==n.type))return f.event.dispatch.apply(s.elem,arguments)}).elem=n),y=(t=(t||"").match(a)||[""]).length;y--;)e=k=(b=wu.exec(t[y])||[])[1],w=(b[2]||"").split(".").sort(),e&&(o=f.event.special[e]||{},e=(u?o.delegateType:o.bindType)||e,o=f.event.special[e]||{},h=f.extend({type:e,origType:k,data:r,handler:i,guid:i.guid,selector:u,needsContext:u&&f.expr.match.needsContext.test(u),namespace:w.join(".")},p),(c=v[e])||((c=v[e]=[]).delegateCount=0,o.setup&&!1!==o.setup.call(n,r,w,s)||(n.addEventListener?n.addEventListener(e,s,!1):n.attachEvent&&n.attachEvent("on"+e,s))),o.add&&(o.add.call(n,h),h.handler.guid||(h.handler.guid=i.guid)),u?c.splice(c.delegateCount++,0,h):c.push(h),f.event.global[e]=!0);n=null}},remove:function(n,t,i,r,u){var y,o,h,b,p,l,s,c,e,w,k,v=f.hasData(n)&&f._data(n);if(v&&(l=v.events)){for(p=(t=(t||"").match(a)||[""]).length;p--;)if(e=k=(h=wu.exec(t[p])||[])[1],w=(h[2]||"").split(".").sort(),e){for(s=f.event.special[e]||{},c=l[e=(r?s.delegateType:s.bindType)||e]||[],h=h[2]&&new RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"),b=y=c.length;y--;)o=c[y],!u&&k!==o.origType||i&&i.guid!==o.guid||h&&!h.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(c.splice(y,1),o.selector&&c.delegateCount--,s.remove&&s.remove.call(n,o));b&&!c.length&&(s.teardown&&!1!==s.teardown.call(n,w,v.handle)||f.removeEvent(n,e,v.handle),delete l[e])}else for(e in l)f.event.remove(n,e+t[p],i,r,!0);f.isEmptyObject(l)&&(delete v.handle,f._removeData(n,"events"))}},trigger:function(n,t,r,u){var a,l,e,p,h,c,w,v=[r||o],s=et.call(n,"type")?n.type:n,y=et.call(n,"namespace")?n.namespace.split("."):[];if(e=c=r=r||o,3!==r.nodeType&&8!==r.nodeType&&!pu.test(s+f.event.triggered)&&(s.indexOf(".")>-1&&(s=(y=s.split(".")).shift(),y.sort()),l=s.indexOf(":")<0&&"on"+s,(n=n[f.expando]?n:new f.Event(s,"object"==typeof n&&n)).isTrigger=u?2:3,n.namespace=y.join("."),n.rnamespace=n.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=void 0,n.target||(n.target=r),t=null==t?[n]:f.makeArray(t,[n]),h=f.event.special[s]||{},u||!h.trigger||!1!==h.trigger.apply(r,t))){if(!u&&!h.noBubble&&!f.isWindow(r)){for(p=h.delegateType||s,pu.test(p+s)||(e=e.parentNode);e;e=e.parentNode)v.push(e),c=e;c===(r.ownerDocument||o)&&v.push(c.defaultView||c.parentWindow||i)}for(w=0;(e=v[w++])&&!n.isPropagationStopped();)n.type=w>1?p:h.bindType||s,(a=(f._data(e,"events")||{})[n.type]&&f._data(e,"handle"))&&a.apply(e,t),(a=l&&e[l])&&a.apply&&vt(e)&&(n.result=a.apply(e,t),!1===n.result&&n.preventDefault());if(n.type=s,!u&&!n.isDefaultPrevented()&&(!h._default||!1===h._default.apply(v.pop(),t))&&vt(r)&&l&&r[s]&&!f.isWindow(r)){(c=r[l])&&(r[l]=null);f.event.triggered=s;try{r[s]()}catch(n){}f.event.triggered=void 0;c&&(r[l]=c)}return n.result}},dispatch:function(n){n=f.event.fix(n);var u,e,o,i,t,s,h=b.call(arguments),c=(f._data(this,"events")||{})[n.type]||[],r=f.event.special[n.type]||{};if(h[0]=n,n.delegateTarget=this,!r.preDispatch||!1!==r.preDispatch.call(this,n)){for(s=f.event.handlers.call(this,n,c),u=0;(i=s[u++])&&!n.isPropagationStopped();)for(n.currentTarget=i.elem,e=0;(t=i.handlers[e++])&&!n.isImmediatePropagationStopped();)n.rnamespace&&!n.rnamespace.test(t.namespace)||(n.handleObj=t,n.data=t.data,void 0!==(o=((f.event.special[t.origType]||{}).handle||t.handler).apply(i.elem,h))&&!1===(n.result=o)&&(n.preventDefault(),n.stopPropagation()));return r.postDispatch&&r.postDispatch.call(this,n),n.result}},handlers:function(n,t){var e,r,u,s,h=[],o=t.delegateCount,i=n.target;if(o&&i.nodeType&&("click"!==n.type||isNaN(n.button)||n.button<1))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(!0!==i.disabled||"click"!==n.type)){for(r=[],e=0;e<o;e++)void 0===r[u=(s=t[e]).selector+" "]&&(r[u]=s.needsContext?f(u,this).index(i)>-1:f.find(u,this,null,[i]).length),r[u]&&r.push(s);r.length&&h.push({elem:i,handlers:r})}return o<t.length&&h.push({elem:this,handlers:t.slice(o)}),h},fix:function(n){if(n[f.expando])return n;var u,s,e,i=n.type,r=n,t=this.fixHooks[i];for(t||(this.fixHooks[i]=t=ro.test(i)?this.mouseHooks:io.test(i)?this.keyHooks:{}),e=t.props?this.props.concat(t.props):this.props,n=new f.Event(r),u=e.length;u--;)n[s=e[u]]=r[s];return n.target||(n.target=r.srcElement||o),3===n.target.nodeType&&(n.target=n.target.parentNode),n.metaKey=!!n.metaKey,t.filter?t.filter(n,r):n},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return null==n.which&&(n.which=null!=t.charCode?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,t){var i,e,r,u=t.button,f=t.fromElement;return null==n.pageX&&null!=t.clientX&&(r=(e=n.target.ownerDocument||o).documentElement,i=e.body,n.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),n.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!n.relatedTarget&&f&&(n.relatedTarget=f===n.target?t.toElement:f),n.which||void 0===u||(n.which=1&u?1:2&u?3:4&u?2:0),n}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==bu()&&this.focus)try{return this.focus(),!1}catch(n){}},delegateType:"focusin"},blur:{trigger:function(){if(this===bu()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(f.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(n){return f.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){void 0!==n.result&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}},simulate:function(n,t,i){var r=f.extend(new f.Event,i,{type:n,isSimulated:!0});f.event.trigger(r,null,t);r.isDefaultPrevented()&&i.preventDefault()}};f.removeEvent=o.removeEventListener?function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i)}:function(n,t,i){var r="on"+t;n.detachEvent&&(void 0===n[r]&&(n[r]=null),n.detachEvent(r,i))};f.Event=function(n,t){if(!(this instanceof f.Event))return new f.Event(n,t);n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||void 0===n.defaultPrevented&&!1===n.returnValue?bt:st):this.type=n;t&&f.extend(this,t);this.timeStamp=n&&n.timeStamp||f.now();this[f.expando]=!0};f.Event.prototype={constructor:f.Event,isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=bt;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=bt;n&&!this.isSimulated&&(n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0)},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=bt;n&&n.stopImmediatePropagation&&n.stopImmediatePropagation();this.stopPropagation()}};f.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,t){f.event.special[n]={delegateType:t,bindType:t,handle:function(n){var r,i=n.relatedTarget,u=n.handleObj;return i&&(i===this||f.contains(this,i))||(n.type=u.origType,r=u.handler.apply(this,arguments),n.type=t),r}}});e.submit||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(n){var i=n.target,t=f.nodeName(i,"input")||f.nodeName(i,"button")?f.prop(i,"form"):void 0;t&&!f._data(t,"submit")&&(f.event.add(t,"submit._submit",function(n){n._submitBubble=!0}),f._data(t,"submit",!0))})},postDispatch:function(n){n._submitBubble&&(delete n._submitBubble,this.parentNode&&!n.isTrigger&&f.event.simulate("submit",this.parentNode,n))},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}});e.change||(f.event.special.change={setup:function(){if(di.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(f.event.add(this,"propertychange._change",function(n){"checked"===n.originalEvent.propertyName&&(this._justChanged=!0)}),f.event.add(this,"click._change",function(n){this._justChanged&&!n.isTrigger&&(this._justChanged=!1);f.event.simulate("change",this,n)})),!1;f.event.add(this,"beforeactivate._change",function(n){var t=n.target;di.test(t.nodeName)&&!f._data(t,"change")&&(f.event.add(t,"change._change",function(n){!this.parentNode||n.isSimulated||n.isTrigger||f.event.simulate("change",this.parentNode,n)}),f._data(t,"change",!0))})},handle:function(n){var t=n.target;if(this!==t||n.isSimulated||n.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return n.handleObj.handler.apply(this,arguments)},teardown:function(){return f.event.remove(this,"._change"),!di.test(this.nodeName)}});e.focusin||f.each({focus:"focusin",blur:"focusout"},function(n,t){var i=function(n){f.event.simulate(t,n.target,f.event.fix(n))};f.event.special[t]={setup:function(){var r=this.ownerDocument||this,u=f._data(r,t);u||r.addEventListener(n,i,!0);f._data(r,t,(u||0)+1)},teardown:function(){var r=this.ownerDocument||this,u=f._data(r,t)-1;u?f._data(r,t,u):(r.removeEventListener(n,i,!0),f._removeData(r,t))}}});f.fn.extend({on:function(n,t,i,r){return gi(this,n,t,i,r)},one:function(n,t,i,r){return gi(this,n,t,i,r,1)},off:function(n,t,i){var r,u;if(n&&n.preventDefault&&n.handleObj)return r=n.handleObj,f(n.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof n){for(u in n)this.off(u,t,n[u]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=st),this.each(function(){f.event.remove(this,n,i,t)})},trigger:function(n,t){return this.each(function(){f.event.trigger(n,t,this)})},triggerHandler:function(n,t){var i=this[0];if(i)return f.event.trigger(n,t,i,!0)}});var uo=/ jQuery\d+="(?:null|\d+)"/g,ku=new RegExp("<(?:"+lu+")[\\s/>]","i"),fo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,eo=/<script|<style|<link/i,oo=/checked\s*(?:[^=]|=\s*.checked.)/i,so=/^true\/(.*)/,ho=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,nr=au(o).appendChild(o.createElement("div"));f.extend({htmlPrefilter:function(n){return n.replace(fo,"<$1><\/$2>")},clone:function(n,t,i){var r,c,o,u,h,l=f.contains(n.ownerDocument,n);if(e.html5Clone||f.isXMLDoc(n)||!ku.test("<"+n.nodeName+">")?o=n.cloneNode(!0):(nr.innerHTML=n.outerHTML,nr.removeChild(o=nr.firstChild)),!(e.noCloneEvent&&e.noCloneChecked||1!==n.nodeType&&11!==n.nodeType||f.isXMLDoc(n)))for(r=s(o),h=s(n),u=0;null!=(c=h[u]);++u)r[u]&&co(c,r[u]);if(t)if(i)for(h=h||s(n),r=r||s(o),u=0;null!=(c=h[u]);u++)tf(c,r[u]);else tf(n,o);return(r=s(o,"script")).length>0&&bi(r,!l&&s(n,"script")),r=h=c=null,o},cleanData:function(n,t){for(var i,u,r,o,c=0,s=f.expando,h=f.cache,l=e.attributes,a=f.event.special;null!=(i=n[c]);c++)if((t||vt(i))&&(o=(r=i[s])&&h[r])){if(o.events)for(u in o.events)a[u]?f.event.remove(i,u):f.removeEvent(i,u,o.handle);h[r]&&(delete h[r],l||void 0===i.removeAttribute?i[s]=void 0:i.removeAttribute(s),y.push(r))}}});f.fn.extend({domManip:it,detach:function(n){return rf(this,n,!0)},remove:function(n){return rf(this,n)},text:function(n){return d(this,function(n){return void 0===n?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(n))},null,n,arguments.length)},append:function(){return it(this,arguments,function(n){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||du(this,n).appendChild(n)})},prepend:function(){return it(this,arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=du(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return it(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return it(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},empty:function(){for(var n,t=0;null!=(n=this[t]);t++){for(1===n.nodeType&&f.cleanData(s(n,!1));n.firstChild;)n.removeChild(n.firstChild);n.options&&f.nodeName(n,"select")&&(n.options.length=0)}return this},clone:function(n,t){return n=null!=n&&n,t=null==t?n:t,this.map(function(){return f.clone(this,n,t)})},html:function(n){return d(this,function(n){var t=this[0]||{},i=0,r=this.length;if(void 0===n)return 1===t.nodeType?t.innerHTML.replace(uo,""):void 0;if("string"==typeof n&&!eo.test(n)&&(e.htmlSerialize||!ku.test(n))&&(e.leadingWhitespace||!wi.test(n))&&!l[(hu.exec(n)||["",""])[1].toLowerCase()]){n=f.htmlPrefilter(n);try{for(;i<r;i++)1===(t=this[i]||{}).nodeType&&(f.cleanData(s(t,!1)),t.innerHTML=n);t=0}catch(n){}}t&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var n=[];return it(this,arguments,function(t){var i=this.parentNode;f.inArray(this,n)<0&&(f.cleanData(s(this)),i&&i.replaceChild(t,this))},n)}});f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){f.fn[n]=function(n){for(var r,i=0,u=[],e=f(n),o=e.length-1;i<=o;i++)r=i===o?this:this.clone(!0),f(e[i])[t](r),oi.apply(u,r.get());return this.pushStack(u)}});tr={HTML:"block",BODY:"block"};var ff=/^margin/,gt=new RegExp("^("+ai+")(?!px)[a-z%]+$","i"),ir=function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];for(u in f=i.apply(n,r||[]),t)n.style[u]=e[u];return f},ef=o.documentElement;!function(){function r(){var r,f,e=o.documentElement;e.appendChild(s);n.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";t=c=a=!1;h=l=!0;i.getComputedStyle&&(f=i.getComputedStyle(n),t="1%"!==(f||{}).top,a="2px"===(f||{}).marginLeft,c="4px"===(f||{width:"4px"}).width,n.style.marginRight="50%",h="4px"===(f||{marginRight:"4px"}).marginRight,(r=n.appendChild(o.createElement("div"))).style.cssText=n.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",n.style.width="1px",l=!parseFloat((i.getComputedStyle(r)||{}).marginRight),n.removeChild(r));n.style.display="none";(u=0===n.getClientRects().length)&&(n.style.display="",n.innerHTML="<table><tr><td><\/td><td>t<\/td><\/tr><\/table>",(r=n.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(u=0===r[0].offsetHeight)&&(r[0].style.display="",r[1].style.display="none",u=0===r[0].offsetHeight));e.removeChild(s)}var t,h,c,u,l,a,s=o.createElement("div"),n=o.createElement("div");n.style&&(n.style.cssText="float:left;opacity:.5",e.opacity="0.5"===n.style.opacity,e.cssFloat=!!n.style.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===n.style.backgroundClip,(s=o.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",n.innerHTML="",s.appendChild(n),e.boxSizing=""===n.style.boxSizing||""===n.style.MozBoxSizing||""===n.style.WebkitBoxSizing,f.extend(e,{reliableHiddenOffsets:function(){return null==t&&r(),u},boxSizingReliable:function(){return null==t&&r(),c},pixelMarginRight:function(){return null==t&&r(),h},pixelPosition:function(){return null==t&&r(),t},reliableMarginRight:function(){return null==t&&r(),l},reliableMarginLeft:function(){return null==t&&r(),a}}))}();of=/^(top|right|bottom|left)$/;i.getComputedStyle?(rt=function(n){var t=n.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(n)},g=function(n,t,i){var o,s,h,r,u=n.style;return""!==(r=(i=i||rt(n))?i.getPropertyValue(t)||i[t]:void 0)&&void 0!==r||f.contains(n.ownerDocument,n)||(r=f.style(n,t)),i&&!e.pixelMarginRight()&&gt.test(r)&&ff.test(t)&&(o=u.width,s=u.minWidth,h=u.maxWidth,u.minWidth=u.maxWidth=u.width=r,r=i.width,u.width=o,u.minWidth=s,u.maxWidth=h),void 0===r?r:r+""}):ef.currentStyle&&(rt=function(n){return n.currentStyle},g=function(n,t,i){var o,f,e,r,u=n.style;return null==(r=(i=i||rt(n))?i[t]:void 0)&&u&&u[t]&&(r=u[t]),gt.test(r)&&!of.test(t)&&(o=u.left,(e=(f=n.runtimeStyle)&&f.left)&&(f.left=n.currentStyle.left),u.left="fontSize"===t?"1em":r,r=u.pixelLeft+"px",u.left=o,e&&(f.left=e)),void 0===r?r:r+""||"auto"});var ur=/alpha\([^)]*\)/i,lo=/opacity\s*=\s*([^)]*)/i,ao=/^(none|table(?!-c[ea]).+)/,vo=new RegExp("^("+ai+")(.*)$","i"),yo={position:"absolute",visibility:"hidden",display:"block"},sf={letterSpacing:"0",fontWeight:"400"},hf=["Webkit","O","Moz","ms"],cf=o.createElement("div").style;f.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=g(n,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:e.cssFloat?"cssFloat":"styleFloat"},style:function(n,t,i,r){if(n&&3!==n.nodeType&&8!==n.nodeType&&n.style){var u,h,o,s=f.camelCase(t),c=n.style;if(t=f.cssProps[s]||(f.cssProps[s]=lf(s)||s),o=f.cssHooks[t]||f.cssHooks[s],void 0===i)return o&&"get"in o&&void 0!==(u=o.get(n,!1,r))?u:c[t];if("string"==(h=typeof i)&&(u=vi.exec(i))&&u[1]&&(i=su(n,t,u),h="number"),null!=i&&i==i&&("number"===h&&(i+=u&&u[3]||(f.cssNumber[s]?"":"px")),e.clearCloneStyle||""!==i||0!==t.indexOf("background")||(c[t]="inherit"),!(o&&"set"in o&&void 0===(i=o.set(n,i,r)))))try{c[t]=i}catch(n){}}},css:function(n,t,i,r){var o,u,s,e=f.camelCase(t);return t=f.cssProps[e]||(f.cssProps[e]=lf(e)||e),(s=f.cssHooks[t]||f.cssHooks[e])&&"get"in s&&(u=s.get(n,!0,i)),void 0===u&&(u=g(n,t,r)),"normal"===u&&t in sf&&(u=sf[t]),""===i||i?(o=parseFloat(u),!0===i||isFinite(o)?o||0:u):u}});f.each(["height","width"],function(n,t){f.cssHooks[t]={get:function(n,i,r){if(i)return ao.test(f.css(n,"display"))&&0===n.offsetWidth?ir(n,yo,function(){return pf(n,t,r)}):pf(n,t,r)},set:function(n,i,r){var u=r&&rt(n);return vf(0,i,r?yf(n,t,r,e.boxSizing&&"border-box"===f.css(n,"boxSizing",!1,u),u):0)}}});e.opacity||(f.cssHooks.opacity={get:function(n,t){return lo.test((t&&n.currentStyle?n.currentStyle.filter:n.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(n,t){var i=n.style,r=n.currentStyle,e=f.isNumeric(t)?"alpha(opacity="+100*t+")":"",u=r&&r.filter||i.filter||"";i.zoom=1;(t>=1||""===t)&&""===f.trim(u.replace(ur,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||r&&!r.filter)||(i.filter=ur.test(u)?u.replace(ur,e):u+" "+e)}});f.cssHooks.marginRight=rr(e.reliableMarginRight,function(n,t){if(t)return ir(n,{display:"inline-block"},g,[n,"marginRight"])});f.cssHooks.marginLeft=rr(e.reliableMarginLeft,function(n,t){if(t)return(parseFloat(g(n,"marginLeft"))||(f.contains(n.ownerDocument,n)?n.getBoundingClientRect().left-ir(n,{marginLeft:0},function(){return n.getBoundingClientRect().left}):0))+"px"});f.each({margin:"",padding:"",border:"Width"},function(n,t){f.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u="string"==typeof i?i.split(" "):[i];r<4;r++)f[n+tt[r]+t]=u[r]||u[r-2]||u[0];return f}};ff.test(n)||(f.cssHooks[n+t].set=vf)});f.fn.extend({css:function(n,t){return d(this,function(n,t,i){var u,e,o={},r=0;if(f.isArray(t)){for(u=rt(n),e=t.length;r<e;r++)o[t[r]]=f.css(n,t[r],!1,u);return o}return void 0!==i?f.style(n,t,i):f.css(n,t)},n,t,arguments.length>1)},show:function(){return af(this,!0)},hide:function(){return af(this)},toggle:function(n){return"boolean"==typeof n?n?this.show():this.hide():this.each(function(){yt(this)?f(this).show():f(this).hide()})}});f.Tween=h;h.prototype={constructor:h,init:function(n,t,i,r,u,e){this.elem=n;this.prop=i;this.easing=u||f.easing._default;this.options=t;this.start=this.now=this.cur();this.end=r;this.unit=e||(f.cssNumber[i]?"":"px")},cur:function(){var n=h.propHooks[this.prop];return n&&n.get?n.get(this):h.propHooks._default.get(this)},run:function(n){var t,i=h.propHooks[this.prop];return this.pos=this.options.duration?t=f.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):t=n,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):h.propHooks._default.set(this),this}};h.prototype.init.prototype=h.prototype;h.propHooks={_default:{get:function(n){var t;return 1!==n.elem.nodeType||null!=n.elem[n.prop]&&null==n.elem.style[n.prop]?n.elem[n.prop]:(t=f.css(n.elem,n.prop,""))&&"auto"!==t?t:0},set:function(n){f.fx.step[n.prop]?f.fx.step[n.prop](n):1!==n.elem.nodeType||null==n.elem.style[f.cssProps[n.prop]]&&!f.cssHooks[n.prop]?n.elem[n.prop]=n.now:f.style(n.elem,n.prop,n.now+n.unit)}}};h.propHooks.scrollTop=h.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};f.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2},_default:"swing"};f.fx=h.prototype.init;f.fx.step={};wf=/^(?:toggle|show|hide)$/;bf=/queueHooks$/;f.Animation=f.extend(v,{tweeners:{"*":[function(n,t){var i=this.createTween(n,t);return su(i.elem,n,vi.exec(t),i),i}]},tweener:function(n,t){f.isFunction(n)?(t=n,n=["*"]):n=n.match(a);for(var i,r=0,u=n.length;r<u;r++)i=n[r],v.tweeners[i]=v.tweeners[i]||[],v.tweeners[i].unshift(t)},prefilters:[function(n,t,i){var r,a,p,v,s,w,c,l=this,y={},o=n.style,h=n.nodeType&&yt(n),u=f._data(n,"fxshow");for(r in i.queue||(null==(s=f._queueHooks(n,"fx")).unqueued&&(s.unqueued=0,w=s.empty.fire,s.empty.fire=function(){s.unqueued||w()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--;f.queue(n,"fx").length||s.empty.fire()})})),1===n.nodeType&&("height"in t||"width"in t)&&(i.overflow=[o.overflow,o.overflowX,o.overflowY],"inline"===("none"===(c=f.css(n,"display"))?f._data(n,"olddisplay")||dt(n.nodeName):c)&&"none"===f.css(n,"float")&&(e.inlineBlockNeedsLayout&&"inline"!==dt(n.nodeName)?o.zoom=1:o.display="inline-block")),i.overflow&&(o.overflow="hidden",e.shrinkWrapBlocks()||l.always(function(){o.overflow=i.overflow[0];o.overflowX=i.overflow[1];o.overflowY=i.overflow[2]})),t)if(a=t[r],wf.exec(a)){if(delete t[r],p=p||"toggle"===a,a===(h?"hide":"show")){if("show"!==a||!u||void 0===u[r])continue;h=!0}y[r]=u&&u[r]||f.style(n,r)}else c=void 0;if(f.isEmptyObject(y))"inline"===("none"===c?dt(n.nodeName):c)&&(o.display=c);else for(r in u?"hidden"in u&&(h=u.hidden):u=f._data(n,"fxshow",{}),p&&(u.hidden=!h),h?f(n).show():l.done(function(){f(n).hide()}),l.done(function(){for(var t in f._removeData(n,"fxshow"),y)f.style(n,t,y[t])}),y)v=df(h?u[r]:0,r,l),r in u||(u[r]=v.start,h&&(v.end=v.start,v.start="width"===r||"height"===r?1:0))}],prefilter:function(n,t){t?v.prefilters.unshift(n):v.prefilters.push(n)}});f.speed=function(n,t,i){var r=n&&"object"==typeof n?f.extend({},n):{complete:i||!i&&t||f.isFunction(n)&&n,duration:n,easing:i&&t||t&&!f.isFunction(t)&&t};return r.duration=f.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in f.fx.speeds?f.fx.speeds[r.duration]:f.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){f.isFunction(r.old)&&r.old.call(this);r.queue&&f.dequeue(this,r.queue)},r};f.fn.extend({fadeTo:function(n,t,i,r){return this.filter(yt).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,i,r){var o=f.isEmptyObject(n),e=f.speed(t,i,r),u=function(){var t=v(this,f.extend({},n),e);(o||f._data(this,"finish"))&&t.stop(!0)};return u.finish=u,o||!1===e.queue?this.each(u):this.queue(e.queue,u)},stop:function(n,t,i){var r=function(n){var t=n.stop;delete n.stop;t(i)};return"string"!=typeof n&&(i=t,t=n,n=void 0),t&&!1!==n&&this.queue(n||"fx",[]),this.each(function(){var o=!0,t=null!=n&&n+"queueHooks",e=f.timers,u=f._data(this);if(t)u[t]&&u[t].stop&&r(u[t]);else for(t in u)u[t]&&u[t].stop&&bf.test(t)&&r(u[t]);for(t=e.length;t--;)e[t].elem!==this||null!=n&&e[t].queue!==n||(e[t].anim.stop(i),o=!1,e.splice(t,1));!o&&i||f.dequeue(this,n)})},finish:function(n){return!1!==n&&(n=n||"fx"),this.each(function(){var t,u=f._data(this),i=u[n+"queue"],e=u[n+"queueHooks"],r=f.timers,o=i?i.length:0;for(u.finish=!0,f.queue(this,n,[]),e&&e.stop&&e.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===n&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete u.finish})}});f.each(["toggle","show","hide"],function(n,t){var i=f.fn[t];f.fn[t]=function(n,r,u){return null==n||"boolean"==typeof n?i.apply(this,arguments):this.animate(ti(t,!0),n,r,u)}});f.each({slideDown:ti("show"),slideUp:ti("hide"),slideToggle:ti("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){f.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});f.timers=[];f.fx.tick=function(){var i,n=f.timers,t=0;for(ht=f.now();t<n.length;t++)(i=n[t])()||n[t]!==i||n.splice(t--,1);n.length||f.fx.stop();ht=void 0};f.fx.timer=function(n){f.timers.push(n);n()?f.fx.start():f.timers.pop()};f.fx.interval=13;f.fx.start=function(){ni||(ni=i.setInterval(f.fx.tick,f.fx.interval))};f.fx.stop=function(){i.clearInterval(ni);ni=null};f.fx.speeds={slow:600,fast:200,_default:400};f.fn.delay=function(n,t){return n=f.fx&&f.fx.speeds[n]||n,t=t||"fx",this.queue(t,function(t,r){var u=i.setTimeout(t,n);r.stop=function(){i.clearTimeout(u)}})},function(){var i,n=o.createElement("input"),t=o.createElement("div"),r=o.createElement("select"),u=r.appendChild(o.createElement("option"));(t=o.createElement("div")).setAttribute("className","t");t.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>";i=t.getElementsByTagName("a")[0];n.setAttribute("type","checkbox");t.appendChild(n);(i=t.getElementsByTagName("a")[0]).style.cssText="top:1px";e.getSetAttribute="t"!==t.className;e.style=/top/.test(i.getAttribute("style"));e.hrefNormalized="/a"===i.getAttribute("href");e.checkOn=!!n.value;e.optSelected=u.selected;e.enctype=!!o.createElement("form").enctype;r.disabled=!0;e.optDisabled=!u.disabled;(n=o.createElement("input")).setAttribute("value","");e.input=""===n.getAttribute("value");n.value="t";n.setAttribute("type","radio");e.radioValue="t"===n.value}();gf=/\r/g;f.fn.extend({val:function(n){var t,i,u,r=this[0];return arguments.length?(u=f.isFunction(n),this.each(function(i){var r;1===this.nodeType&&(null==(r=u?n.call(this,i,f(this).val()):n)?r="":"number"==typeof r?r+="":f.isArray(r)&&(r=f.map(r,function(n){return null==n?"":n+""})),(t=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=f.valHooks[r.type]||f.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(gf,""):null==i?"":i:void 0}});f.extend({valHooks:{option:{get:function(n){var t=f.find.attr(n,"value");return null!=t?t:f.trim(f.text(n))}},select:{get:function(n){for(var o,t,s=n.options,i=n.selectedIndex,r="select-one"===n.type||i<0,h=r?null:[],c=r?i+1:s.length,u=i<0?c:r?i:0;u<c;u++)if(((t=s[u]).selected||u===i)&&(e.optDisabled?!t.disabled:null===t.getAttribute("disabled"))&&(!t.parentNode.disabled||!f.nodeName(t.parentNode,"optgroup"))){if(o=f(t).val(),r)return o;h.push(o)}return h},set:function(n,t){for(var u,i,r=n.options,o=f.makeArray(t),e=r.length;e--;)if(i=r[e],f.inArray(f.valHooks.option.get(i),o)>=0)try{i.selected=u=!0}catch(n){i.scrollHeight}else i.selected=!1;return u||(n.selectedIndex=-1),r}}}});f.each(["radio","checkbox"],function(){f.valHooks[this]={set:function(n,t){if(f.isArray(t))return n.checked=f.inArray(f(n).val(),t)>-1}};e.checkOn||(f.valHooks[this].get=function(n){return null===n.getAttribute("value")?"on":n.value})});var ct,ne,w=f.expr.attrHandle,fr=/^(?:checked|selected)$/i,ut=e.getSetAttribute,ii=e.input;f.fn.extend({attr:function(n,t){return d(this,f.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){f.removeAttr(this,n)})}});f.extend({attr:function(n,t,i){var u,r,e=n.nodeType;if(3!==e&&8!==e&&2!==e)return void 0===n.getAttribute?f.prop(n,t,i):(1===e&&f.isXMLDoc(n)||(t=t.toLowerCase(),r=f.attrHooks[t]||(f.expr.match.bool.test(t)?ne:ct)),void 0!==i?null===i?void f.removeAttr(n,t):r&&"set"in r&&void 0!==(u=r.set(n,i,t))?u:(n.setAttribute(t,i+""),i):r&&"get"in r&&null!==(u=r.get(n,t))?u:null==(u=f.find.attr(n,t))?void 0:u)},attrHooks:{type:{set:function(n,t){if(!e.radioValue&&"radio"===t&&f.nodeName(n,"input")){var i=n.value;return n.setAttribute("type",t),i&&(n.value=i),t}}}},removeAttr:function(n,t){var i,r,e=0,u=t&&t.match(a);if(u&&1===n.nodeType)for(;i=u[e++];)r=f.propFix[i]||i,f.expr.match.bool.test(i)?ii&&ut||!fr.test(i)?n[r]=!1:n[f.camelCase("default-"+i)]=n[r]=!1:f.attr(n,i,""),n.removeAttribute(ut?i:r)}});ne={set:function(n,t,i){return!1===t?f.removeAttr(n,i):ii&&ut||!fr.test(i)?n.setAttribute(!ut&&f.propFix[i]||i,i):n[f.camelCase("default-"+i)]=n[i]=!0,i}};f.each(f.expr.match.bool.source.match(/\w+/g),function(n,t){var i=w[t]||f.find.attr;w[t]=ii&&ut||!fr.test(t)?function(n,t,r){var u,f;return r||(f=w[t],w[t]=u,u=null!=i(n,t,r)?t.toLowerCase():null,w[t]=f),u}:function(n,t,i){if(!i)return n[f.camelCase("default-"+t)]?t.toLowerCase():null}});ii&&ut||(f.attrHooks.value={set:function(n,t,i){if(!f.nodeName(n,"input"))return ct&&ct.set(n,t,i);n.defaultValue=t}});ut||(ct={set:function(n,t,i){var r=n.getAttributeNode(i);if(r||n.setAttributeNode(r=n.ownerDocument.createAttribute(i)),r.value=t+="","value"===i||t===n.getAttribute(i))return t}},w.id=w.name=w.coords=function(n,t,i){var r;if(!i)return(r=n.getAttributeNode(t))&&""!==r.value?r.value:null},f.valHooks.button={get:function(n,t){var i=n.getAttributeNode(t);if(i&&i.specified)return i.value},set:ct.set},f.attrHooks.contenteditable={set:function(n,t,i){ct.set(n,""!==t&&t,i)}},f.each(["width","height"],function(n,t){f.attrHooks[t]={set:function(n,i){if(""===i)return n.setAttribute(t,"auto"),i}}}));e.style||(f.attrHooks.style={get:function(n){return n.style.cssText||void 0},set:function(n,t){return n.style.cssText=t+""}});te=/^(?:input|select|textarea|button|object)$/i;ie=/^(?:a|area)$/i;f.fn.extend({prop:function(n,t){return d(this,f.prop,n,t,arguments.length>1)},removeProp:function(n){return n=f.propFix[n]||n,this.each(function(){try{this[n]=void 0;delete this[n]}catch(n){}})}});f.extend({prop:function(n,t,i){var u,r,e=n.nodeType;if(3!==e&&8!==e&&2!==e)return 1===e&&f.isXMLDoc(n)||(t=f.propFix[t]||t,r=f.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(u=r.set(n,i,t))?u:n[t]=i:r&&"get"in r&&null!==(u=r.get(n,t))?u:n[t]},propHooks:{tabIndex:{get:function(n){var t=f.find.attr(n,"tabindex");return t?parseInt(t,10):te.test(n.nodeName)||ie.test(n.nodeName)&&n.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});e.hrefNormalized||f.each(["href","src"],function(n,t){f.propHooks[t]={get:function(n){return n.getAttribute(t,4)}}});e.optSelected||(f.propHooks.selected={get:function(n){var t=n.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}});f.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){f.propFix[this.toLowerCase()]=this});e.enctype||(f.propFix.enctype="encoding");ri=/[\t\r\n\f]/g;f.fn.extend({addClass:function(n){var e,t,i,r,u,o,s,h=0;if(f.isFunction(n))return this.each(function(t){f(this).addClass(n.call(this,t,ft(this)))});if("string"==typeof n&&n)for(e=n.match(a)||[];t=this[h++];)if(r=ft(t),i=1===t.nodeType&&(" "+r+" ").replace(ri," ")){for(o=0;u=e[o++];)i.indexOf(" "+u+" ")<0&&(i+=u+" ");r!==(s=f.trim(i))&&f.attr(t,"class",s)}return this},removeClass:function(n){var e,i,t,r,u,o,s,h=0;if(f.isFunction(n))return this.each(function(t){f(this).removeClass(n.call(this,t,ft(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof n&&n)for(e=n.match(a)||[];i=this[h++];)if(r=ft(i),t=1===i.nodeType&&(" "+r+" ").replace(ri," ")){for(o=0;u=e[o++];)for(;t.indexOf(" "+u+" ")>-1;)t=t.replace(" "+u+" "," ");r!==(s=f.trim(t))&&f.attr(i,"class",s)}return this},toggleClass:function(n,t){var i=typeof n;return"boolean"==typeof t&&"string"===i?t?this.addClass(n):this.removeClass(n):f.isFunction(n)?this.each(function(i){f(this).toggleClass(n.call(this,i,ft(this),t),t)}):this.each(function(){var t,u,r,e;if("string"===i)for(u=0,r=f(this),e=n.match(a)||[];t=e[u++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==n&&"boolean"!==i||((t=ft(this))&&f._data(this,"__className__",t),f.attr(this,"class",t||!1===n?"":f._data(this,"__className__")||""))})},hasClass:function(n){for(var t,r=0,i=" "+n+" ";t=this[r++];)if(1===t.nodeType&&(" "+ft(t)+" ").replace(ri," ").indexOf(i)>-1)return!0;return!1}});f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){f.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}});f.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)}});var po=i.location,er=f.now(),or=/\?/,wo=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;f.parseJSON=function(n){if(i.JSON&&i.JSON.parse)return i.JSON.parse(n+"");var u,t=null,r=f.trim(n+"");return r&&!f.trim(r.replace(wo,function(n,i,r,f){return u&&i&&(t=0),0===t?n:(u=r||i,t+=!f-!r,"")}))?Function("return "+r)():f.error("Invalid JSON: "+n)};f.parseXML=function(n){var t;if(!n||"string"!=typeof n)return null;try{i.DOMParser?t=(new i.DOMParser).parseFromString(n,"text/xml"):((t=new i.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(n))}catch(n){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||f.error("Invalid XML: "+n),t};var bo=/#.*$/,re=/([?&])_=[^&]*/,ko=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,go=/^(?:GET|HEAD)$/,ns=/^\/\//,ue=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,fe={},sr={},ee="*/".concat("*"),hr=po.href,lt=ue.exec(hr.toLowerCase())||[];f.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:hr,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(lt[1]),global:!0,processData:!0,"async":!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ee,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?cr(cr(n,f.ajaxSettings),t):cr(f.ajaxSettings,n)},ajaxPrefilter:oe(fe),ajaxTransport:oe(sr),ajax:function(n,t){function w(n,t,h,c){var y,rt,tt,w,it,a=t;2!==o&&(o=2,k&&i.clearTimeout(k),l=void 0,b=c||"",u.readyState=n>0?4:0,y=n>=200&&n<300||304===n,h&&(w=function(n,t,i){for(var o,e,u,f,s=n.contents,r=n.dataTypes;"*"===r[0];)r.shift(),void 0===e&&(e=n.mimeType||t.getResponseHeader("Content-Type"));if(e)for(f in s)if(s[f]&&s[f].test(e)){r.unshift(f);break}if(r[0]in i)u=r[0];else{for(f in i){if(!r[0]||n.converters[f+" "+r[0]]){u=f;break}o||(o=f)}u=u||o}if(u)return u!==r[0]&&r.unshift(u),i[u]}(r,u,h)),w=function(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift())if("*"===u)u=e;else if("*"!==e&&e!==u){if(!(f=o[e+" "+u]||o["* "+u]))for(h in o)if((s=h.split(" "))[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]])){!0===f?f=o[h]:!0!==o[h]&&(u=s[0],c.unshift(s[1]));break}if(!0!==f)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(n){return{state:"parsererror",error:f?n:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}(r,w,u,y),y?(r.ifModified&&((it=u.getResponseHeader("Last-Modified"))&&(f.lastModified[e]=it),(it=u.getResponseHeader("etag"))&&(f.etag[e]=it)),204===n||"HEAD"===r.type?a="nocontent":304===n?a="notmodified":(a=w.state,rt=w.data,y=!(tt=w.error))):(tt=a,!n&&a||(a="error",n<0&&(n=0))),u.status=n,u.statusText=(t||a)+"",y?g.resolveWith(s,[rt,a,u]):g.rejectWith(s,[u,a,tt]),u.statusCode(p),p=void 0,v&&d.trigger(y?"ajaxSuccess":"ajaxError",[u,r,y?rt:tt]),nt.fireWith(s,[u,a]),v&&(d.trigger("ajaxComplete",[u,r]),--f.active||f.event.trigger("ajaxStop")))}"object"==typeof n&&(t=n,n=void 0);t=t||{};var h,c,e,b,k,v,l,y,r=f.ajaxSetup({},t),s=r.context||r,d=r.context&&(s.nodeType||s.jquery)?f(s):f.event,g=f.Deferred(),nt=f.Callbacks("once memory"),p=r.statusCode||{},tt={},it={},o=0,rt="canceled",u={readyState:0,getResponseHeader:function(n){var t;if(2===o){if(!y)for(y={};t=ko.exec(b);)y[t[1].toLowerCase()]=t[2];t=y[n.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===o?b:null},setRequestHeader:function(n,t){var i=n.toLowerCase();return o||(n=it[i]=it[i]||n,tt[n]=t),this},overrideMimeType:function(n){return o||(r.mimeType=n),this},statusCode:function(n){var t;if(n)if(o<2)for(t in n)p[t]=[p[t],n[t]];else u.always(n[u.status]);return this},abort:function(n){var t=n||rt;return l&&l.abort(t),w(0,t),this}};if(g.promise(u).complete=nt.add,u.success=u.done,u.error=u.fail,r.url=((n||r.url||hr)+"").replace(bo,"").replace(ns,lt[1]+"//"),r.type=t.method||t.type||r.method||r.type,r.dataTypes=f.trim(r.dataType||"*").toLowerCase().match(a)||[""],null==r.crossDomain&&(h=ue.exec(r.url.toLowerCase()),r.crossDomain=!(!h||h[1]===lt[1]&&h[2]===lt[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(lt[3]||("http:"===lt[1]?"80":"443")))),r.data&&r.processData&&"string"!=typeof r.data&&(r.data=f.param(r.data,r.traditional)),se(fe,r,t,u),2===o)return u;for(c in(v=f.event&&r.global)&&0==f.active++&&f.event.trigger("ajaxStart"),r.type=r.type.toUpperCase(),r.hasContent=!go.test(r.type),e=r.url,r.hasContent||(r.data&&(e=r.url+=(or.test(e)?"&":"?")+r.data,delete r.data),!1===r.cache&&(r.url=re.test(e)?e.replace(re,"$1_="+er++):e+(or.test(e)?"&":"?")+"_="+er++)),r.ifModified&&(f.lastModified[e]&&u.setRequestHeader("If-Modified-Since",f.lastModified[e]),f.etag[e]&&u.setRequestHeader("If-None-Match",f.etag[e])),(r.data&&r.hasContent&&!1!==r.contentType||t.contentType)&&u.setRequestHeader("Content-Type",r.contentType),u.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+("*"!==r.dataTypes[0]?", "+ee+"; q=0.01":""):r.accepts["*"]),r.headers)u.setRequestHeader(c,r.headers[c]);if(r.beforeSend&&(!1===r.beforeSend.call(s,u,r)||2===o))return u.abort();for(c in rt="abort",{success:1,error:1,complete:1})u[c](r[c]);if(l=se(sr,r,t,u)){if(u.readyState=1,v&&d.trigger("ajaxSend",[u,r]),2===o)return u;r.async&&r.timeout>0&&(k=i.setTimeout(function(){u.abort("timeout")},r.timeout));try{o=1;l.send(tt,w)}catch(n){if(!(o<2))throw n;w(-1,n)}}else w(-1,"No Transport");return u},getJSON:function(n,t,i){return f.get(n,t,i,"json")},getScript:function(n,t){return f.get(n,void 0,t,"script")}});f.each(["get","post"],function(n,t){f[t]=function(n,i,r,u){return f.isFunction(i)&&(u=u||r,r=i,i=void 0),f.ajax(f.extend({url:n,type:t,dataType:u,data:i,success:r},f.isPlainObject(n)&&n))}});f._evalUrl=function(n){return f.ajax({url:n,type:"GET",dataType:"script",cache:!0,"async":!1,global:!1,throws:!0})};f.fn.extend({wrapAll:function(n){if(f.isFunction(n))return this.each(function(t){f(this).wrapAll(n.call(this,t))});if(this[0]){var t=f(n,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]);t.map(function(){for(var n=this;n.firstChild&&1===n.firstChild.nodeType;)n=n.firstChild;return n}).append(this)}return this},wrapInner:function(n){return f.isFunction(n)?this.each(function(t){f(this).wrapInner(n.call(this,t))}):this.each(function(){var t=f(this),i=t.contents();i.length?i.wrapAll(n):t.append(n)})},wrap:function(n){var t=f.isFunction(n);return this.each(function(i){f(this).wrapAll(t?n.call(this,i):n)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()}});f.expr.filters.hidden=function(n){return e.reliableHiddenOffsets()?n.offsetWidth<=0&&n.offsetHeight<=0&&!n.getClientRects().length:function(n){for(;n&&1===n.nodeType;){if("none"===ts(n)||"hidden"===n.type)return!0;n=n.parentNode}return!1}(n)};f.expr.filters.visible=function(n){return!f.expr.filters.hidden(n)};var is=/%20/g,rs=/\[\]$/,he=/\r?\n/g,us=/^(?:submit|button|image|reset|file)$/i,fs=/^(?:input|select|textarea|keygen)/i;f.param=function(n,t){var i,r=[],u=function(n,t){t=f.isFunction(t)?t():null==t?"":t;r[r.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(void 0===t&&(t=f.ajaxSettings&&f.ajaxSettings.traditional),f.isArray(n)||n.jquery&&!f.isPlainObject(n))f.each(n,function(){u(this.name,this.value)});else for(i in n)lr(i,n[i],t,u);return r.join("&").replace(is,"+")};f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=f.prop(this,"elements");return n?f.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!f(this).is(":disabled")&&fs.test(this.nodeName)&&!us.test(n)&&(this.checked||!pi.test(n))}).map(function(n,t){var i=f(this).val();return null==i?null:f.isArray(i)?f.map(i,function(n){return{name:t.name,value:n.replace(he,"\r\n")}}):{name:t.name,value:i.replace(he,"\r\n")}}).get()}});f.ajaxSettings.xhr=void 0!==i.ActiveXObject?function(){return this.isLocal?ce():o.documentMode>8?ar():/^(get|post|head|put|delete|options)$/i.test(this.type)&&ar()||ce()}:ar;var es=0,ui={},fi=f.ajaxSettings.xhr();return i.attachEvent&&i.attachEvent("onunload",function(){for(var n in ui)ui[n](void 0,!0)}),e.cors=!!fi&&"withCredentials"in fi,(fi=e.ajax=!!fi)&&f.ajaxTransport(function(n){var t;if(!n.crossDomain||e.cors)return{send:function(r,u){var o,e=n.xhr(),s=++es;if(e.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(o in n.xhrFields)e[o]=n.xhrFields[o];for(o in n.mimeType&&e.overrideMimeType&&e.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)void 0!==r[o]&&e.setRequestHeader(o,r[o]+"");e.send(n.hasContent&&n.data||null);t=function(i,r){var o,c,h;if(t&&(r||4===e.readyState))if(delete ui[s],t=void 0,e.onreadystatechange=f.noop,r)4!==e.readyState&&e.abort();else{h={};o=e.status;"string"==typeof e.responseText&&(h.text=e.responseText);try{c=e.statusText}catch(n){c=""}o||!n.isLocal||n.crossDomain?1223===o&&(o=204):o=h.text?200:404}h&&u(o,c,h,e.getAllResponseHeaders())};n.async?4===e.readyState?i.setTimeout(t):e.onreadystatechange=ui[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}),f.ajaxPrefilter(function(n){n.crossDomain&&(n.contents.script=!1)}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(n){return f.globalEval(n),n}}}),f.ajaxPrefilter("script",function(n){void 0===n.cache&&(n.cache=!1);n.crossDomain&&(n.type="GET",n.global=!1)}),f.ajaxTransport("script",function(n){if(n.crossDomain){var t,i=o.head||f("head")[0]||o.documentElement;return{send:function(r,u){(t=o.createElement("script")).async=!0;n.scriptCharset&&(t.charset=n.scriptCharset);t.src=n.url;t.onload=t.onreadystatechange=function(n,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||u(200,"success"))};i.insertBefore(t,i.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}}),vr=[],ei=/(=)\?(?=&|$)|\?\?/,f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=vr.pop()||f.expando+"_"+er++;return this[n]=!0,n}}),f.ajaxPrefilter("json jsonp",function(n,t,r){var u,e,o,s=!1!==n.jsonp&&(ei.test(n.url)?"url":"string"==typeof n.data&&0===(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&ei.test(n.data)&&"data");if(s||"jsonp"===n.dataTypes[0])return u=n.jsonpCallback=f.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,s?n[s]=n[s].replace(ei,"$1"+u):!1!==n.jsonp&&(n.url+=(or.test(n.url)?"&":"?")+n.jsonp+"="+u),n.converters["script json"]=function(){return o||f.error(u+" was not called"),o[0]},n.dataTypes[0]="json",e=i[u],i[u]=function(){o=arguments},r.always(function(){void 0===e?f(i).removeProp(u):i[u]=e;n[u]&&(n.jsonpCallback=t.jsonpCallback,vr.push(u));o&&f.isFunction(e)&&e(o[0]);o=e=void 0}),"script"}),e.createHTMLDocument=function(){if(!o.implementation.createHTMLDocument)return!1;var n=o.implementation.createHTMLDocument("");return n.body.innerHTML="<form><\/form><form><\/form>",2===n.body.childNodes.length}(),f.parseHTML=function(n,t,i){if(!n||"string"!=typeof n)return null;"boolean"==typeof t&&(i=t,t=!1);t=t||(e.createHTMLDocument?o.implementation.createHTMLDocument(""):o);var r=dr.exec(n),u=!i&&[];return r?[t.createElement(r[1])]:(r=yu([n],t,u),u&&u.length&&f(u).remove(),f.merge([],r.childNodes))},yr=f.fn.load,f.fn.load=function(n,t,i){if("string"!=typeof n&&yr)return yr.apply(this,arguments);var u,o,s,r=this,e=n.indexOf(" ");return e>-1&&(u=f.trim(n.slice(e,n.length)),n=n.slice(0,e)),f.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),r.length>0&&f.ajax({url:n,type:o||"GET",dataType:"html",data:t}).done(function(n){s=arguments;r.html(u?f("<div>").append(f.parseHTML(n)).find(u):n)}).always(i&&function(n,t){r.each(function(){i.apply(r,s||[n.responseText,t,n])})}),this},f.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){f.fn[t]=function(n){return this.on(t,n)}}),f.expr.filters.animated=function(n){return f.grep(f.timers,function(t){return n===t.elem}).length},f.offset={setOffset:function(n,t,i){var a,e,o,s,r,h,c=f.css(n,"position"),l=f(n),u={};"static"===c&&(n.style.position="relative");r=l.offset();o=f.css(n,"top");h=f.css(n,"left");("absolute"===c||"fixed"===c)&&f.inArray("auto",[o,h])>-1?(s=(a=l.position()).top,e=a.left):(s=parseFloat(o)||0,e=parseFloat(h)||0);f.isFunction(t)&&(t=t.call(n,i,f.extend({},r)));null!=t.top&&(u.top=t.top-r.top+s);null!=t.left&&(u.left=t.left-r.left+e);"using"in t?t.using.call(n,u):l.css(u)}},f.fn.extend({offset:function(n){if(arguments.length)return void 0===n?this:this.each(function(t){f.offset.setOffset(this,n,t)});var t,u,r={top:0,left:0},i=this[0],e=i&&i.ownerDocument;if(e)return(t=e.documentElement,f.contains(t,i)?(void 0!==i.getBoundingClientRect&&(r=i.getBoundingClientRect()),u=le(e),{top:r.top+(u.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(u.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r)},position:function(){if(this[0]){var n,i,t={top:0,left:0},r=this[0];return"fixed"===f.css(r,"position")?i=r.getBoundingClientRect():(n=this.offsetParent(),i=this.offset(),f.nodeName(n[0],"html")||(t=n.offset()),t.top+=f.css(n[0],"borderTopWidth",!0),t.left+=f.css(n[0],"borderLeftWidth",!0)),{top:i.top-t.top-f.css(r,"marginTop",!0),left:i.left-t.left-f.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent;n&&!f.nodeName(n,"html")&&"static"===f.css(n,"position");)n=n.offsetParent;return n||ef})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,t){var i=/Y/.test(t);f.fn[n]=function(r){return d(this,function(n,r,u){var e=le(n);if(void 0===u)return e?t in e?e[t]:e.document.documentElement[r]:n[r];e?e.scrollTo(i?f(e).scrollLeft():u,i?u:f(e).scrollTop()):n[r]=u},n,r,arguments.length,null)}}),f.each(["top","left"],function(n,t){f.cssHooks[t]=rr(e.pixelPosition,function(n,i){if(i)return i=g(n,t),gt.test(i)?f(n).position()[t]+"px":i})}),f.each({Height:"height",Width:"width"},function(n,t){f.each({padding:"inner"+n,content:t,"":"outer"+n},function(i,r){f.fn[r]=function(r,u){var e=arguments.length&&(i||"boolean"!=typeof r),o=i||(!0===r||!0===u?"margin":"border");return d(this,function(t,i,r){var u;return f.isWindow(t)?t.document.documentElement["client"+n]:9===t.nodeType?(u=t.documentElement,Math.max(t.body["scroll"+n],u["scroll"+n],t.body["offset"+n],u["offset"+n],u["client"+n])):void 0===r?f.css(t,i,o):f.style(t,i,r,o)},t,e?r:void 0,e,null)}})}),f.fn.extend({bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return 1===arguments.length?this.off(n,"**"):this.off(t,n||"**",i)}}),f.fn.size=function(){return this.length},f.fn.andSelf=f.fn.addBack,void 0===(u=function(){return f}.apply(t,[]))||(n.exports=u),ae=i.jQuery,ve=i.$,f.noConflict=function(n){return i.$===f&&(i.$=ve),n&&i.jQuery===f&&(i.jQuery=ae),f},r||(i.jQuery=i.$=f),f};"object"==typeof n&&"object"==typeof n.exports?n.exports=i.document?r(i,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return r(n)}:r(i)},function(n,t,i){function y(n){return!n.nodeName||-1!==r.inArray(n.nodeName.toLowerCase(),["iframe","#document","html","body"])}function s(n){return r.isFunction(n)||r.isPlainObject(n)?n:{top:n,left:n}}function p(n,t,i){var r=document.querySelectorAll(n),o=r.length,e,u,f;if(i){for(e=[],u=0;u<o;u++)w(r[u],t)&&e.push(r[u]);return e}for(f=0;f<o;f++)if(w(r[f],t))return r[f]}function w(n,t){return n.getAttribute("SessionID")===t}var h,e,c,r,l,a,f,u,v,o,g;Object.defineProperty(t,"__esModule",{value:!0});t.createCheckbox=t.arraysEquals=t.isIe11=t.isTouchable=t.isMobile=t.getTempId=t.scrollPreventer=t.getEditorControl=t.getControl=t.strcmp=t.compareArrays=t.removeEmptyArray=t.mergeObj=t.nbsp=t.escapeHTML=t.Utils=t.isEmpty=void 0;e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};c=i(5);(h=c)&&h.__esModule;r=i(0);i(19);i(45);i(46);i(47);i(49);i(55);f={getUID:(a=0,function(){return++a}),getUTabIndex:(l=r("[tabindex]").toArray().reduce(function(n,t){var i=t.getAttribute("tabindex");return n>i?n:i},0),function(){return++l}),asyncArrayTask:function(n,t,i,r){function e(){null!=r&&(0===u?r():u--)}for(var o=n.length,u=0,s=function(r){var f=n.slice(r,r+t);setTimeout(function(){i(f,r);e()},4);u++},f=0;f<o;f+=t)s(f);e()},toString:function(n){return null==n?"":n.toString()},canvasDroppableClass:"qb-ui-canvas-droppable",get canvasDroppableSelector(){return"."+this.canvasDroppableClass},gridDroppableClass:"qb-ui-grid-droppable",get gridDroppableSelector(){return"."+this.gridDroppableClass},globalTempLink:null,globalFieldDragHelper:null};f.Copy=function(n,t){var i,r;for(i in n)"function"==typeof n[i]?t[i]=n[i]:(r=n[i],t[i]=r);return t};f.CopyInner=function(n,t){var i,r;for(i in n)void 0!==t[i]&&("function"==typeof n[i]?t[i]=n[i]:(r=n[i],t[i]=r));return t};f.AriaLabel=function(n,t){n.length&&!u(t)&&n.attr("aria-label",t.replace(/&nbsp;/g," ").replace(/&amp;/g,"&"))};f.getRec=function(n,t){var i=n.getBoundingClientRect(),r={left:Math.floor(i.left),right:Math.floor(i.right),top:Math.floor(i.top),bottom:Math.floor(i.bottom)};return r.width=i.width?i.width:i.right-i.left,r.height=i.height?i.height:i.bottom-i.top,t&&(r=f.relativeRec(r,t)),r};f.relativeRec=function(n,t){return{left:n.left-t.left,top:n.top-t.top,right:n.right-t.left,bottom:n.bottom-t.top,height:n.height,width:n.width}};f.getCoords=function(n){var t=n.getBoundingClientRect();return{top:t.top+pageYOffset,left:t.left+pageXOffset}};r.fn.valEx=function(n){var t=this.attr("type"),i,f,e;if(t=u(t)?"":t.toLowerCase(),void 0===n)return"checkbox"==t?this[0].checked:"radio"==t?this[0].checked?this.attr("value"):null:this.val();if("checkbox"==t)return 1!=n||this.attr("checked")||this.attr("checked","checked"),1!=n&&this.attr("checked")&&this.removeAttr("checked"),1!=n||this.prop("checked")||this.prop("checked",!0),void(1!=n&&this.prop("checked")&&this.prop("checked",!1));"radio"!=t?(i="",(u(this[0])||u(this[0].tagName)||(i=this[0].tagName),"select"!=i.toLowerCase())?(null==n&&(n=""),this.val(n)):(n=u(n)?"":n.toString(),f=this.get(0),e=f.options,r.each(e,function(t,i){i.value===n&&(f.selectedIndex=t)}))):this.attr("value")==n?(this.attr("checked","true"),this[0].checked=!0):this.removeAttr("checked")};u=function(n){return null==n||""===n};Array.prototype.sortBy=function(n,t,i){return this.sort(function(n,t,i){return function(r,f){return!u(n)&&r[n]<f[n]?-1:!u(n)&&r[n]>f[n]?1:!u(t)&&r[t]<f[t]?-1:!u(t)&&r[t]>f[t]?1:!u(i)&&r[i]<f[i]?-1:!u(i)&&r[i]>f[i]?1:0}}(n,t,i))};f.isEqual=function(n,t){return!(!u(n)||!u(t))||n==t};Date.prototype.format=function(n){for(var t,r="",u=Date.replaceChars,i=0;i<n.length;i++)t=n.charAt(i),r+=u[t]?u[t].call(this):t;return r};Date.replaceChars={shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.replaceChars.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.replaceChars.longDays[this.getDay()]},N:function(){return this.getDay()+1},S:function(){return this.getDate()%10==1&&11!=this.getDate()?"st":this.getDate()%10==2&&12!=this.getDate()?"nd":this.getDate()%10==3&&13!=this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){return"Not Yet Supported"},W:function(){return"Not Yet Supported"},F:function(){return Date.replaceChars.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.replaceChars.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){return"Not Yet Supported"},L:function(){return this.getFullYear()%4==0&&this.getFullYear()%100!=0||this.getFullYear()%400==0?"1":"0"},o:function(){return"Not Supported"},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return"Not Yet Supported"},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},e:function(){return"Not Yet Supported"},I:function(){return"Not Supported"},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+"00"},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.abs(this.getTimezoneOffset()/60)+":"+(Math.abs(this.getTimezoneOffset()%60)<10?"0":"")+Math.abs(this.getTimezoneOffset()%60)},T:function(){var t=this.getMonth(),n;return this.setMonth(0),n=this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1"),this.setMonth(t),n},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d")+"T"+this.format("H:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}};Array.prototype.remove=function(n,t){return"object"==(void 0===n?"undefined":e(n))&&(n=this.indexOf(n)),this.splice(n,!t||1+t-n+(!(t<0^n>=0)&&(t<0||-1)*this.length)),this.length};v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,i=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(u){if("object"!==(void 0===u?"undefined":e(u))&&("function"!=typeof u||null===u))throw new TypeError("Object.keys called on non-object");var o,f,s=[];for(o in u)t.call(u,o)&&s.push(o);if(i)for(f=0;f<r;f++)t.call(u,n[f])&&s.push(n[f]);return s}}());o=r.scrollTo=function(n,t,i){return r(window).scrollTo(n,t,i)};o.defaults={axis:"xy",duration:0,limit:!0};r.fn.setCursorPosition=function(n){return this.each(function(t,i){if(i.createTextRange){var r=i.createTextRange();r.collapse(!0);r.moveEnd("character",n);r.moveStart("character",n);r.select()}else i.setSelectionRange&&"checkbox"!==i.type&&i.setSelectionRange(n,n);i.scrollLeft&&(i.scrollLeft=0)}),this};r.fn.scrollTo=function(n,t,i){"object"===(void 0===t?"undefined":e(t))&&(i=t,t=0);"function"==typeof i&&(i={onAfter:i});"max"===n&&(n=9e9);i=r.extend({},o.defaults,i);t=t||i.duration;var u=i.queue&&i.axis.length>1;return u&&(t/=2),i.offset=s(i.offset),i.over=s(i.over),this.each(function(){function w(n){var u=r.extend({},i,{queue:!0,duration:t,complete:n&&function(){n.call(c,f,i)}});v.animate(h,u)}var p;if(null!==n){var l,a=y(this),c=a?this.contentWindow||window:this,v=r(c),f=n,h={};switch(void 0===f?"undefined":e(f)){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(f)){f=s(f);break}if(!(f=a?r(f):r(f,c)).length)return;case"object":(f.is||f.style)&&(l=(f=r(f)).offset())}p=r.isFunction(i.offset)&&i.offset(c,f)||i.offset;r.each(i.axis.split(""),function(n,t){var y="x"===t?"Left":"Top",e=y.toLowerCase(),r="scroll"+y,b=v[r](),k=o.max(c,t),s;l?(h[r]=l[e]+(a?0:b-v.offset()[e]),i.margin&&(h[r]-=parseInt(f.css("margin"+y),10)||0,h[r]-=parseInt(f.css("border"+y+"Width"),10)||0),h[r]+=p[e]||0,i.over[e]&&(h[r]+=f["x"===t?"width":"height"]()*i.over[e])):(s=f[e],h[r]=s.slice&&"%"===s.slice(-1)?parseFloat(s)/100*k:s);i.limit&&/^\d+$/.test(h[r])&&(h[r]=h[r]<=0?0:Math.min(h[r],k));!n&&i.axis.length>1&&(b===h[r]?h={}:u&&(w(i.onAfterFirst),h={}))});w(i.onAfter)}})};o.max=function(n,t){var i="x"===t?"Width":"Height",u="scroll"+i;if(!y(n))return n[u]-r(n)[i.toLowerCase()]();var f="client"+i,e=n.ownerDocument||n.document,o=e.documentElement,s=e.body;return Math.max(o[u],s[u])-Math.min(o[f],s[f])};Array.prototype.reduce||(Array.prototype.reduce=function(n){var r=this.length,t,i;if("function"!=typeof n)throw new TypeError;if(0==r&&1==arguments.length)throw new TypeError;if(t=0,arguments.length>=2)i=arguments[1];else for(;;){if(t in this){i=this[t++];break}if(++t>=r)throw new TypeError;}for(;t<r;t++)t in this&&(i=n.call(null,i,this[t],t,this));return i});Array.prototype.contains||(Array.prototype.contains=function(n){for(var t in this)if(this[t]===n)return!0;return!1});Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]});Array.prototype.some||(Array.prototype.some=function(n){"use strict";if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof n)throw new TypeError;for(var i=Object(this),r=i.length>>>0,u=arguments.length>=2?arguments[1]:void 0,t=0;t<r;t++)if(t in i&&n.call(u,i[t],t,i))return!0;return!1});r.fn.longClickContextMenu=function(){throw new Error("Not implemented");};r.fn.hasAttr=function(n){return void 0!==this.attr(n)};r.fn.uiHoverable=function(n){var t=this;return this.mouseenter(function(){return t.addClass(n)}),this.mouseleave(function(){return t.removeClass(n)}),this},function(n){n.extend({debounce:function(n,t,i,r){var u;return function(){var f=arguments;i=i||this;r&&!u&&n.apply(i,f);clearTimeout(u);u=setTimeout(function(){r||n.apply(i,f);u=null},t)}},throttle:function(n,t,i){var r,f,u;return function(){f=arguments;u=!0;i=i||this;r||function e(){u?(n.apply(i,f),u=!1,r=setTimeout(e,t)):r=null}()}}})}(r);Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(n){var i,u,f,t,r;if(null==this)throw new TypeError('"this" is null or not defined');if(i=Object(this),u=i.length>>>0,"function"!=typeof n)throw new TypeError("predicate must be a function");for(f=arguments[1],t=0;t<u;){if(r=i[t],n.call(f,r,t,i))return r;t++}}});"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(n){"use strict";var u,i,t,r;if(null==n)throw new TypeError("Cannot convert undefined or null to object");for(u=Object(n),i=1;i<arguments.length;i++)if(t=arguments[i],null!=t)for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(u[r]=t[r]);return u},writable:!0,configurable:!0});"function"!=typeof requestAnimationFrame&&(window.requestAnimationFrame=function(n){window.setTimeout(n,16)});r.fn.jQButton=r.fn.button;var b,nt=(b=0,function(){return b++}),k="ontouchstart"in window||!!(window.DocumentTouch&&document instanceof DocumentTouch),d=function(){if(!k)return!1;var n=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))||!!window.matchMedia&&!!window.matchMedia("only screen and (max-width: 760px)").matches}();d&&function(n){function t(n,t){if(!(n.originalEvent.touches.length>1)){n.preventDefault();var i=n.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null);n.target.dispatchEvent(r)}}if(n.support.touch="ontouchend"in document,n.support.touch){var r,i=n.ui.mouse.prototype,u=i._mouseInit,f=i._mouseDestroy;i._touchStart=function(n){!r&&this._mouseCapture(n.originalEvent.changedTouches[0])&&(r=!0,this._touchMoved=!1,t(n,"mouseover"),t(n,"mousemove"),t(n,"mousedown"))};i._touchMove=function(n){r&&(this._touchMoved=!0,t(n,"mousemove"))};i._touchEnd=function(n){r&&(t(n,"mouseup"),t(n,"mouseout"),this._touchMoved||t(n,"click"),r=!1)};i._mouseInit=function(){var t=this;t.element.bind({touchstart:n.proxy(t,"_touchStart"),touchmove:n.proxy(t,"_touchMove"),touchend:n.proxy(t,"_touchEnd")});u.call(t)};i._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:n.proxy(t,"_touchStart"),touchmove:n.proxy(t,"_touchMove"),touchend:n.proxy(t,"_touchEnd")});f.call(t)}}}(r);g=window.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./);t.isEmpty=u;t.Utils=f;t.escapeHTML=function(n){return u(n)?n:(n+"").replace(/[&<>"'\/]/g,function(n){return v[n]})};t.nbsp=function(n){return n?n.replace(/ /g,"&nbsp;"):""};t.mergeObj=function(n,t){u(n)&&(n={});u(t)&&(t={});var i={};return r.extend(i,n,t),i};t.removeEmptyArray=function(n,t){var i=n[t];null!=i&&i.length>0||delete n[t]};t.compareArrays=function(n,t){if(n.length!==t.length)return!1;for(var i=0;i<n.length;i++)if(n[i]!=n[2])return!1;return!0};t.strcmp=function(n,t){return!(!u(n)||!u(t))||!u(n)&&!u(t)&&n.toLowerCase()===t.toLowerCase()};t.getControl=p;t.getEditorControl=function(n,t,i){for(var u=p(n,t,!0),f=u.length,r=0;r<f;r++)if(u[r].getAttribute("type")===i)return u[r]};t.scrollPreventer=function(n){n.wheelDeltaY<0&&this.getBoundingClientRect().height+this.scrollTop>=this.scrollHeight&&n.preventDefault()};t.getTempId=nt;t.isMobile=d;t.isTouchable=k;t.isIe11=g;t.arraysEquals=function(n,t){if(null==n||null==t||n.length!=t.length)return!1;for(var i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0};t.createCheckbox=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=r('<input type="checkbox"'+(t?" checked":"")+" />");return{root:r("<label>").append(n).append(r("<span>")),checkbox:n}}},function(n,t){Object.defineProperty(t,"__esModule",{value:!0});var i={CanvasDto:function(){this.DataSources=[];this.Links=null;this.Layout={DataSources:[]}},GridDto:function(){this.Rows=[]},GridRowDto:function(){this.Aggregate=null;this.Alias=null;this.ConditionType=null;this.Criteria=[];this.Expression=null;this.Grouping=!1;this.Guid=null;this.TempId=null;this.IsDeleted=!1;this.IsNew=!1;this.Select=!1;this.SortOrder=null;this.SortType=null;this.Index=0;this.ExpressionSubQueries=null;this.ConditionSubQueries=null},DataSourceDto:function(){this.Alias=null;this.AliasNotQuoted=null;this.Caption=null;this.NameInQuery=null;this.DataSourceType=0;this.Fields=[];this.UserFields=null;this.Guid=null;this.Name=null;this.Object=null;this.ObjectReadOnly=!0;this.Description=null;this.NameNotQuoted="";this.System=!1;this.Database=null;this.Schema=null;this.IsDeleted=!1;this.IsTrashed=!1;this.IsNew=!1;this.IsCTE=!1;this.TempId=null;this.QueryGuid=null;this.CteGuid=null;this.DataSourceOptions={IsUpdating:!1,MaxHeight:160,DefaultWidth:250,SelectedFieldsCountInCaption:!1,HideAsteriskItem:!1,SortType:0,KeyFieldsFirst:!1,Font:null,BackgroundColor:null,FocusedBackgroundColor:null,ShowCollapseExpandButton:!1,CollapseExpandButtonAtTop:!1,ShowLinkedObjectsButton:!1,ShowDescriptionTooltips:!1,DescriptionTooltipsDelay:0,IsDisposing:!1,MaxToolTipWidth:0,MarkColumnOptions:{IsUpdating:!1,Visible:!0,DrawOrder:0,Margin:0,Width:0,Prefix:"",Postfix:"",PrimaryKeyIcon:null},NameColumnOptions:{IsUpdating:!1,Visible:!0,DrawOrder:0,Margin:0,Width:0,Prefix:"",Postfix:"",FontStyle:0,Color:null,PrimaryKeyFontStyle:0,PrimaryKeyColor:null},TypeColumnOptions:{IsUpdating:!1,Visible:!0,DrawOrder:0,Margin:0,Width:0,Prefix:"",Postfix:"",FontStyle:0,Color:null,Case:0},DescriptionColumnOptions:{IsUpdating:!1,Visible:!1,DrawOrder:0,Margin:0,Width:0,Prefix:"",Postfix:"",FontStyle:0,Color:null},LinkColor:null,LinkStyle:0,DisplayKeyCardinality:!1};this.LinkedObjects=[];this.Link=null;this.X=null;this.Y=null;this.NameFull=null;this.ProcParam=null;this.EnableUserFields=!1;this.LinkManipulations=0},LinkObjectDto:function(){this.Direction=0;this.Caption=null;this.Name=null;this.LeftFields=[];this.RightFields=[];this.Disabled=!1;this.DataSourceGuid=null},DataSourceLinkDto:function(){this.IsDeleted=null;this.IsNew=null;this.Left=null;this.LinkExpression=null;this.Right=null},DataSourceLinkPartDto:function(){this.Cardinality=0;this.Type=0;this.FieldName=null},MetaDataDto:function(){this.Objects=null},MetadataFieldDto:function(){this.AltName=null;this.Expression=null;this.FieldTypeName=null;this.Guid=null;this.IsSelected=!1;this.LongDescription=null;this.NameStr=null;this.NameFull=null;this.NameStrNotQuoted=null;this.PrimaryKey=!1;this.ReadOnly=!1;this.IsUserField=!1;this.ShortDescription=null},DataSourceLayoutDto:function(){this.Caption=null;this.X=0;this.Y=0;this.Width=0;this.Height=0;this.DefaultHeight=0;this.FieldCount=null},TreeViewDto:function(){this.Action="";this.Filter="";this.IsFiltered=!1;this.Type=0;this.TypeStr=null;this.Index=0;this.Caption=null;this.NameFull=null;this.Path=null;this.Items=null;this.Description=null;this.Name=null;this.IsLoaded=!1;this.IsMetadataObject=!1;this.QualifiedName=null;this.IsExpandable=!1},MetadataStructureItemDto:function(){this.Type=0;this.TypeStr=null;this.Index=0;this.Caption=null;this.NameFull=null;this.Path=null;this.Items=null;this.Description=null;this.Name=null;this.IsLoaded=!1;this.IsMetadataObject=!1;this.QualifiedName=null;this.IsExpandable=!1},ContextMenu:function(){this.Action=null;this.Data=null;this.ClientData=null;this.Canvas=null;this.CanvasLink=null;this.Add=null;this.CTE=null;this.TableCTE=null;this.UnionsAdd=null;this.Table=null;this.Grid=null},ContextMenuDto:function(){this.Items=[]},UnionSubQueryActionDto:function(){this.Guid=null;this.Caption=null;this.Key=null;this.Data=null},UnionNavBar:function(){this.Items=[]},ContextMenuItemDto:function(){this.Checked=!1;this.Items=[];this.Key=null;this.Name=null;this.Data=null;this.Guid=null;this.Action=null},QueryStructureDto:function(){this.Guid=null;this.UnionSubQuery=null;this.SubQuery=null;this.Active=!1;this.Selected=!1;this.Visible=!0;this.Caption=null;this.Class=null;this.SQL=null;this.Expanded=!1;this.CTE=[];this.ContextItems=[];this.Items=[]},CriteriaBuilderDto:function(){this.SessionID=null;this.Columns=[];this.JunctionType=0;this.Groups=[];this.Conditions=[]},CriteriaBuilderItemDto:function(){this.Items=[];this.Column=null;this.Operator=0;this.Value1=null;this.Value2=null;this.Type=0;this.Condition=null},CriteriaBuilderGroupDto:function(){this.JunctionType=0;this.Groups=[];this.Conditions=[]},OutputColumnDto:function(){this.Name=null;this.FieldType=0;this.Kind=1;this.ValueKind=1},QueryParamDto:function(){this.Symbol=null;this.Name=null;this.FullName="";this.DataType="String";this.DataTypeDB=0;this.CompareOperator=null;this.ComparedField=null;this.ComparedObject=null;this.Value=null},SqlErrorEventArgs:function(){this.SQL=null;this.Error=null;this.ErrorToken=null;this.ErrorTokenPos={pos:0,col:0,line:0}},DataSourceOptions:function(){this.IsUpdating=!1;this.MaxHeight=160;this.DefaultWidth=250;this.SelectedFieldsCountInCaption=!1;this.HideAsteriskItem=!1;this.SortType=0;this.KeyFieldsFirst=!1;this.Font=null;this.BackgroundColor=null;this.FocusedBackgroundColor=null;this.ShowCollapseExpandButton=!1;this.CollapseExpandButtonAtTop=!1;this.ShowLinkedObjectsButton=!1;this.ShowDescriptionTooltips=!1;this.DescriptionTooltipsDelay=0;this.IsDisposing=!1;this.MaxToolTipWidth=0;this.MarkColumnOptions={IsUpdating:!1,Visible:!0,DrawOrder:0,Margin:0,Width:0,Prefix:"",Postfix:"",PrimaryKeyIcon:null};this.NameColumnOptions={IsUpdating:!1,Visible:!0,DrawOrder:0,Margin:0,Width:0,Prefix:"",Postfix:"",FontStyle:0,Color:null,PrimaryKeyFontStyle:0,PrimaryKeyColor:null};this.TypeColumnOptions={IsUpdating:!1,Visible:!0,DrawOrder:0,Margin:0,Width:0,Prefix:"",Postfix:"",FontStyle:0,Color:null,Case:0};this.DescriptionColumnOptions={IsUpdating:!1,Visible:!1,DrawOrder:0,Margin:0,Width:0,Prefix:"",Postfix:"",FontStyle:0,Color:null};this.LinkColor=null;this.LinkStyle=0;this.DisplayKeyCardinality=!1},Localizer:{Strings:{Criteria:{Language:"en",Output:"Visible",Expression:"Expression",Aggregate:"Aggregate",Alias:"Column Name",SortType:"Sort Type",SortOrder:"Sort Order",Grouping:"Grouping",CriteriaType:"Criteria for",CriteriaItem:"Criteria",CriteriaOr:"Or..."},Language:"en",Remove:"Remove",RemoveBrackets:"Remove brackets",EncloseWithBrackets:"Enclose with brackets",CopyToNewUnionSubQuery:"Copy union subquery",NewUnionSubQuery:"New union sub-query",MoveBackward:"Move backward",MoveForward:"Move forward",MoveUp:"Move up",MoveDown:"Move down",RemoveItem:"Delete item",InsertEmptyItem:"Insert empty item",Fields:"Fields",Properties:"Properties",Delete:"Delete",DeleteCTE:"Delete CTE",SelectAll:"Select All",Select:"Select...",All:"satisfy all conditions",Tables:"Tables",Views:"Views",Procedures:"Procedures",Synonyms:"Synonyms",CheckAll:"Check All",UncheckAll:"Uncheck All",AddUserField:"Add user field",EditUserField:"Edit user field",RemoveUserField:"Remove user field",SelectAllRowsFrom:"Select all rows from {0}",SqlChanged:"Query is changed, need to be updated",Updating:"Update",Loading:"Loading...",Refresh:"Refresh",RefreshSQL:"SQL query text is changed. Click to update the visual representation.",Reconnect:"Reconnect",SessionRestored:"Your work session on the server has been expired. The previous SQL query text has been restored. Please wait...",SessionRestoreError:"Your session had expired. Unexpected error has occurred while trying to restore it. Please, reload the web page to restart.",DataSource:"Data source",Field:"Field",Close:"Close",AddSubQuery:"Add derived table",AddCTE:"Add Common Table Expression",AddNewCTE:"Add New Common Table Expression",UnionSubMenu:"Union",InsertSubQuery:"Insert sub-query",ColumnNameAlreadyUsed:"The column with same name already exists in the current sub-query.",ConditionTypeWhere:"For values",ConditionTypeHaving:"For groups",GotoSubquery:"Edit sub-query",EditExpression:"Edit expression",EditCondition:"Edit condition",Root:"Root",Server:"Server",Database:"Database",Schema:"Schema",Package:"Package",Namespaces:"Namespaces",Table:"Table",View:"View",Procedure:"Procedure",Synonym:"Synonym",Objects:"Objects",Aggregate:"Aggregate",Parameter:"Parameter",ForeignKey:"Foreign Key",UserQuery:"User Query",MainQuery:"Main",Subqueries:"Subqueries",Unions:"Unions",ProcParamsFormTitle:"Procedure Parameters",ProcParamsFormLabel:"Edit parameters for selected procedure:",Ok:"Ok",Cancel:"Cancel",NewFolder:"New Folder",NewUserQuery:"New Query",AddConditionForColumn:"Add condition for column",AddGeneralCondition:"Add logical SQL expression",AddGroupOfConditions:"Add group of conditions"}}};t.Dto=i;t.Enum={DataSourceType:{Table:0,View:1,StoredProc:2,Function:3,SubQuery:4,Other:5},LinkCardinality:{Unknown:0,One:1,Many:2},LinkSideType:{Inner:0,Outer:1},ItemSortType:{None:0,Asc:1,Desc:2},AffectedColumns:{None:0,ExpressionColumn:1,ConditionColumns:2,AllColumns:3},LinkManipulations:{Allow:0,Deny:1,AllowForeignKeysOnly:2,LinkCompatibleTypesOnly:3},DbType:{AnsiString:0,Binary:1,Byte:2,Boolean:3,Currency:4,Date:5,DateTime:6,Decimal:7,Double:8,Guid:9,Int16:10,Int32:11,Int64:12,Object:13,SByte:14,Single:15,String:16,Time:17,UInt16:18,UInt32:19,UInt64:20,VarNumeric:21,AnsiStringFixedLength:22,StringFixedLength:23,Xml:25,DateTime2:26,DateTimeOffset:27},ConditionOperator:{StartsWith:0,Contains:1,EndsWith:2,IsEqualTo:3,DoesNotStartWith:4,DoesNotContain:5,DoesNotEndWith:6,IsEmpty:7,IsNotEmpty:8,IsInList:9,IsNotInList:10,IsNotEqualTo:11,IsNull:12,IsNotNull:13,IsBetween:14,IsNotBetween:15,IsLessThan:16,IsLessThanOrEqualTo:17,IsGreaterThan:18,IsGreaterThanOrEqualTo:19,IsBefore:20,IsBeforeOrEqualTo:21,IsAfter:22,IsAfterOrEqualTo:23},KindOfField:{Unknown:0,Text:1,Numeric:2,Date:3,Boolean:4},KindOfType:{Unknown:0,String:1,NumericFrac:2,NumericInt:3,Date:4,Time:5,DateTime:6,Boolean:7},JunctionItemType:{All:0,NotAll:1,Any:2,None:3},MetadataType:{None:0,Root:1,Server:2,Database:4,Schema:8,Package:16,Namespaces:30,Table:32,View:64,Procedure:128,Synonym:256,Objects:480,Aggregate:512,Parameter:1024,Field:2048,ForeignKey:4096,ObjectMetadata:7168,UserQuery:8192,UserField:16384,All:32766},FieldListSortType:{None:0,Name:1,Description:2},LinkStyle:{MSAccess:0,MSSQL:1,Simple:2}}},function(n,t,i){var r,u,f,e;e=function(n){return n.ui=n.ui||{},n.ui.version="1.12.1"};u=[i(0)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n){"use strict";function t(){t.init.call(this)}function r(n){if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);}function s(n){return void 0===n._maxListeners?t.defaultMaxListeners:n._maxListeners}function h(n,t,i,u){var h,e,f,c,o;return(r(i),void 0===(e=n._events)?(e=n._events=Object.create(null),n._eventsCount=0):(void 0!==e.newListener&&(n.emit("newListener",t,i.listener?i.listener:i),e=n._events),f=e[t]),void 0===f)?(f=e[t]=i,++n._eventsCount):("function"==typeof f?f=e[t]=u?[i,f]:[f,i]:u?f.unshift(i):f.push(i),(h=s(n))>0&&f.length>h&&!f.warned)&&(f.warned=!0,o=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit"),o.name="MaxListenersExceededWarning",o.emitter=n,o.type=t,o.count=f.length,c=o,console&&console.warn&&console.warn(c)),n}function c(n,t,i){var u={fired:!1,wrapFn:void 0,target:n,type:t,listener:i},r=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(u);return r.listener=i,u.wrapFn=r,r}function l(n,t,i){var u=n._events,r;return void 0===u?[]:(r=u[t],void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(n){for(var i=new Array(n.length),t=0;t<i.length;++t)i[t]=n[t].listener||n[t];return i}(r):v(r,r.length))}function a(n){var i=this._events,t;if(void 0!==i){if(t=i[n],"function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function v(n,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=n[i];return r}function y(n,t,i,r){if("function"==typeof n.on)r.once?n.once(t,i):n.on(t,i);else{if("function"!=typeof n.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n);n.addEventListener(t,function u(f){r.once&&n.removeEventListener(t,u);i(f)})}}var e,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(n,t,i){return Function.prototype.apply.call(n,t,i)},u,f;e=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:function(n){return Object.getOwnPropertyNames(n)};u=Number.isNaN||function(n){return n!=n};n.exports=t;n.exports.once=function(n,t){return new Promise(function(i,r){function u(i){n.removeListener(t,f);r(i)}function f(){"function"==typeof n.removeListener&&n.removeListener("error",u);i([].slice.call(arguments))}y(n,t,f,{once:!0});"error"!==t&&function(n,t,i){"function"==typeof n.on&&y(n,"error",t,i)}(n,u,{once:!0})})};t.EventEmitter=t;t.prototype._events=void 0;t.prototype._eventsCount=0;t.prototype._maxListeners=void 0;f=10;Object.defineProperty(t,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(n){if("number"!=typeof n||n<0||u(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");f=n}});t.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};t.prototype.setMaxListeners=function(n){if("number"!=typeof n||n<0||u(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};t.prototype.getMaxListeners=function(){return s(this)};t.prototype.emit=function(n){for(var f,e,r,s,u,h,c,i=[],t=1;t<arguments.length;t++)i.push(arguments[t]);if(f="error"===n,e=this._events,void 0!==e)f=f&&void 0===e.error;else if(!f)return!1;if(f){if(i.length>0&&(r=i[0]),r instanceof Error)throw r;s=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw s.context=r,s;}if(u=e[n],void 0===u)return!1;if("function"==typeof u)o(u,this,i);else for(h=u.length,c=v(u,h),t=0;t<h;++t)o(c[t],this,i);return!0};t.prototype.addListener=function(n,t){return h(this,n,t,!1)};t.prototype.on=t.prototype.addListener;t.prototype.prependListener=function(n,t){return h(this,n,t,!0)};t.prototype.once=function(n,t){return r(t),this.on(n,c(this,n,t)),this};t.prototype.prependOnceListener=function(n,t){return r(t),this.prependListener(n,c(this,n,t)),this};t.prototype.removeListener=function(n,t){var i,f,e,u,o;if((r(t),void 0===(f=this._events))||void 0===(i=f[n]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete f[n],f.removeListener&&this.emit("removeListener",n,i.listener||t));else if("function"!=typeof i){for(e=-1,u=i.length-1;u>=0;u--)if(i[u]===t||i[u].listener===t){o=i[u].listener;e=u;break}if(e<0)return this;0===e?i.shift():function(n,t){for(;t+1<n.length;t++)n[t]=n[t+1];n.pop()}(i,e);1===i.length&&(f[n]=i[0]);void 0!==f.removeListener&&this.emit("removeListener",n,o||t)}return this};t.prototype.off=t.prototype.removeListener;t.prototype.removeAllListeners=function(n){var r,i,t,f,u;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[n]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[n]),this;if(0===arguments.length){for(u=Object.keys(i),t=0;t<u.length;++t)"removeListener"!==(f=u[t])&&this.removeAllListeners(f);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(r=i[n]))this.removeListener(n,r);else if(void 0!==r)for(t=r.length-1;t>=0;t--)this.removeListener(n,r[t]);return this};t.prototype.listeners=function(n){return l(this,n,!0)};t.prototype.rawListeners=function(n){return l(this,n,!1)};t.listenerCount=function(n,t){return"function"==typeof n.listenerCount?n.listenerCount(t):a.call(n,t)};t.prototype.listenerCount=a;t.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var u,f=i(0),r=(u=f)&&u.__esModule?u:{"default":u};i(17)(r.default);t.default=function(){function h(n,t){if(null==n.app)throw new Error("App is undefined");var i=function(n,t,i){return'[sessionid="'+n.SessionID+'"]'+(i?"":" ")+t}(n.app,n.selector,n.mergeSelector),u=n.build,f=n.callback,e=n.items,o=n.parent,s=n.position,h=n.events;return r.default.contextMenu("destroy",i),r.default.contextMenu({selector:i,zIndex:6e3,appendTo:o,reposition:!1,items:e,build:u,callback:f,trigger:t,position:s,events:h,className:n.className})}function c(n){var t=r.default(n).contextMenu("element");return 0===t.length&&(t=r.default(n).parent().contextMenu("element")),t}function n(n,t,i,r){return{Key:n,Name:t,Items:i,callback:r}}function l(t,i){if(0!=t.length){for(var u=[],r=0;r<t.length;r++)u.push(n(i+".UserExpressions."+r,t[r].Caption));return u}}function s(n){var r,i,t;if(null==n||0==n.length)return null;for(r={},i=0;i<n.length;i++)t=n[i],null!=t&&(null!=t.Name&&"-"==t.Name.substr(0,1)?r[t.Key+i]=t.Name:r[t.Key]={name:t.Name,icon:t.Key+(t.Checked?" checked":""),items:s(t.Items),key:t.Key,callback:t.callback});return r}var f={moveUp:"move-up",moveDown:"move-down",removeItem:"row-delete",insertEmptyItemAfter:"row-insert",insertEmptyItemBefore:"row-prepend"},i={hide:"hide",show:"show",sort:"sort",revertSort:"revertSort",filter:"filter",checkAll:"check",uncheckAll:"uncheck",properties:"properties",addUserField:"addUserField"},e={checkAll:i.checkAll,uncheckAll:i.uncheckAll,properties:i.properties,"delete":"deleteCTE"},o={"delete":"delete",allFrom:"all-from",allTo:"all-to",properties:"properties"},t={orderByField:"orderByField",groupByField:"groupByField",aggregateField:"aggregateField",whereField:"whereField",havingField:"havingField",editUserField:"editUserField",removeUserField:"removeUserField",startLinkFrom:"startLinkFrom",createLink:"createLink"},u={Key:"separator",Name:"------"};return{left:function(n){return h(n,"left")},right:function(n){return h(n,"right")},show:function(n){var t=r.default(n);return t.contextMenu(),c(t)},showForElement:function(n,t){var i=r.default(n),u;i.contextMenu();u=c(i);t&&u.position(t)},destroy:function(){return r.default.contextMenu("destroy")},getGridItems:function(t){var i=t.Strings;return[n(f.moveUp,i.MoveUp),n(f.moveDown,i.MoveDown),u,n(f.removeItem,i.RemoveItem),n(f.insertEmptyItemAfter,i.InsertEmptyItemAfter),n(f.insertEmptyItemBefore,i.InsertEmptyItemBefore)]},gridKeys:f,getDataSourceItems:function(t){var r=t.Localizer.Strings;return[n(i.hide,r.HideUnusedFields),n(i.show,r.ShowUnusedFields),n(i.sort,r.SortFieldsAlph),n(i.revertSort,r.RevertSortFieldsAlph),n(i.filter,r.ShowFilterFieldsByName),u,n(i.checkAll,r.CheckAll),n(i.uncheckAll,r.UncheckAll),u,n(i.properties,r.Properties),u,n(i.addUserField,r.AddUserField)]},dataSourceKeys:i,getCteItems:function(t){var i=t.Strings;return[n(e.checkAll,i.CheckAll),n(e.uncheckAll,i.UncheckAll),u,n(e.delete,i.DeleteCTE),u,n(e.properties,i.Properties)]},cteKeys:e,getLinkItems:function(t,i){var r=t.Strings,f=[n(o.delete,r.Delete)];return i||f.push(u,n(o.allFrom,r.SelectAllRowsFrom+" <strong><\/strong>"),n(o.allTo,r.SelectAllRowsFrom+" <strong><\/strong>")),f.push(u,n(o.properties,r.Properties)),f},linkKeys:o,getDataSourceFieldItems:function(r,f,e,o,s,h,c){var a=r.Localizer.Strings,w=[function(i){return n(t.orderByField,i.OrderByField,[n(t.orderByField+".Asc",i.OrderByFieldAscending),n(t.orderByField+".Desc",i.OrderByFieldDescending),n(t.orderByField+".None",i.OrderByFieldNone)])}(a),n(t.groupByField,a.GroupByField),function(i,r){var f=i.filter(function(n){return""!==n.trim()}).map(function(i){return n(t.aggregateField+"."+i,i)});return f.unshift(n(t.aggregateField+".",r.ClearAggregation),u),n(t.aggregateField,r.AggregateField,f)}(r.options.SyntaxProviderOptions.AggregateList,a),function(i,r){return n(t.whereField,r.WhereField,[u,n(t.whereField+".IsNull",r.WhereFieldIsNull),n(t.whereField+".IsNotNull",r.WhereFieldIsNotNull),u,n(t.whereField+".NewCondition",r.WhereFieldNewCondition),i.length?n(t.whereField,r.AddPredefinedCondition,l(i,t.whereField)):null,n(t.whereField+".In",r.WhereFieldIn),n(t.whereField+".NotIn",r.WhereFieldNotIn)])}(r.options.SyntaxProviderOptions.UserExpressions,a),function(i,r){return n(t.havingField,r.HavingField,[u,n(t.havingField+".IsNull",r.WhereFieldIsNull),n(t.havingField+".IsNotNull",r.WhereFieldIsNotNull),u,n(t.havingField+".NewCondition",r.WhereFieldNewCondition),i.length?n(t.havingField,r.AddPredefinedCondition,l(i,t.havingField)):null,n(t.havingField+".In",r.WhereFieldIn),n(t.havingField+".NotIn",r.WhereFieldNotIn)])}(r.options.SyntaxProviderOptions.UserExpressions,a)],b=[n(i.checkAll,a.CheckAll),n(i.uncheckAll,a.UncheckAll)],y=[];h&&(y.push(n(t.startLinkFrom,a.StartLinkFromField.replace("{0}",f.NameStr))),null!=c&&y.push(n(t.createLink,a.CreateLinkFrom.replace("{0}",c.NameStr).replace("{1}",f.NameStr))));var k=[n(i.addUserField,a.AddUserField),n(t.editUserField,a.EditUserField),n(t.removeUserField,a.RemoveUserField)],v=[],p=function(n){0!=v.length&&v.push(u);v.push.apply(v,function(n){if(Array.isArray(n)){for(var t=0,i=Array(n.length);t<n.length;t++)i[t]=n[t];return i}return Array.from(n)}(n))};return e&&p(w),0!=y.length&&p(y),o&&p(b),s&&p(k),v},dataSourceFieldKeys:t,getSwitchLinkItems:function(t,i){return s(t.map(function(t,r){return n("item"+r,t.Caption,null,function(){return i(t)})}))},updateItems:s}}()},function(n,t,i){var r,u,f,e;e=function(n){var t,r=0,i=Array.prototype.slice;return n.cleanData=(t=n.cleanData,function(i){for(var f,r,u=0;null!=(r=i[u]);u++)try{(f=n._data(r,"events"))&&f.remove&&n(r).triggerHandler("remove")}catch(n){}t(i)}),n.widget=function(t,i,r){var f,u,o,s={},e=t.split(".")[0],h=e+"-"+(t=t.split(".")[1]);return r||(r=i,i=n.Widget),n.isArray(r)&&(r=n.extend.apply(null,[{}].concat(r))),n.expr[":"][h.toLowerCase()]=function(t){return!!n.data(t,h)},n[e]=n[e]||{},f=n[e][t],u=n[e][t]=function(n,t){if(!this._createWidget)return new u(n,t);arguments.length&&this._createWidget(n,t)},n.extend(u,f,{version:r.version,_proto:n.extend({},r),_childConstructors:[]}),(o=new i).options=n.widget.extend({},o.options),n.each(r,function(t,r){s[t]=n.isFunction(r)?function(){function n(){return i.prototype[t].apply(this,arguments)}function u(n){return i.prototype[t].apply(this,n)}return function(){var t,i=this._super,f=this._superApply;return this._super=n,this._superApply=u,t=r.apply(this,arguments),this._super=i,this._superApply=f,t}}():r}),u.prototype=n.widget.extend(o,{widgetEventPrefix:f&&o.widgetEventPrefix||t},s,{constructor:u,namespace:e,widgetName:t,widgetFullName:h}),f?(n.each(f._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,u,i._proto)}),delete f._childConstructors):i._childConstructors.push(u),n.widget.bridge(t,u),u},n.widget.extend=function(t){for(var r,u,e=i.call(arguments,1),f=0,o=e.length;f<o;f++)for(r in e[f])u=e[f][r],e[f].hasOwnProperty(r)&&void 0!==u&&(t[r]=n.isPlainObject(u)?n.isPlainObject(t[r])?n.widget.extend({},t[r],u):n.widget.extend({},u):u);return t},n.widget.bridge=function(t,r){var u=r.prototype.widgetFullName||t;n.fn[t]=function(f){var s="string"==typeof f,o=i.call(arguments,1),e=this;return s?this.length||"instance"!==f?this.each(function(){var i,r=n.data(this,u);return"instance"===f?(e=r,!1):r?n.isFunction(r[f])&&"_"!==f.charAt(0)?(i=r[f].apply(r,o))!==r&&void 0!==i?(e=i&&i.jquery?e.pushStack(i.get()):i,!1):void 0:n.error("no such method '"+f+"' for "+t+" widget instance"):n.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+f+"'")}):e=void 0:(o.length&&(f=n.widget.extend.apply(null,[f].concat(o))),this.each(function(){var t=n.data(this,u);t?(t.option(f||{}),t._init&&t._init()):n.data(this,u,new r(f,this))})),e}},n.Widget=function(){},n.Widget._childConstructors=[],n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,i){i=n(i||this.defaultElement||this)[0];this.element=n(i);this.uuid=r++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=n();this.hoverable=n();this.focusable=n();this.classesElementLookup={};i!==this&&(n.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===i&&this.destroy()}}),this.document=n(i.style?i.ownerDocument:i.document||i),this.window=n(this.document[0].defaultView||this.document[0].parentWindow));this.options=n.widget.extend({},this.options,this._getCreateOptions(),t);this._create();this.options.disabled&&this._setOptionDisabled(this.options.disabled);this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){var t=this;this._destroy();n.each(this.classesElementLookup,function(n,i){t._removeClass(i,n)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:n.noop,widget:function(){return this.element},option:function(t,i){var u,r,f,e=t;if(0===arguments.length)return n.widget.extend({},this.options);if("string"==typeof t)if(e={},t=(u=t.split(".")).shift(),u.length){for(r=e[t]=n.widget.extend({},this.options[t]),f=0;f<u.length-1;f++)r[u[f]]=r[u[f]]||{},r=r[u[f]];if(t=u.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];e[t]=i}return this._setOptions(e),this},_setOptions:function(n){for(var t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return"classes"===n&&this._setOptionClasses(t),this.options[n]=t,"disabled"===n&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,u,r;for(i in t)r=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&r&&r.length&&(u=n(r.get()),this._removeClass(r,i),u.addClass(this._classes({element:u,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(n){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!n);n&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function u(u,f){for(var o,e=0;e<u.length;e++)o=r.classesElementLookup[u[e]]||n(),o=t.add?n(n.unique(o.get().concat(t.element.get()))):n(o.not(t.element).get()),r.classesElementLookup[u[e]]=o,i.push(u[e]),f&&t.classes[u[e]]&&i.push(t.classes[u[e]])}var i=[],r=this;return t=n.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&u(t.keys.match(/\S+/g)||[],!0),t.extra&&u(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var i=this;n.each(i.classesElementLookup,function(r,u){-1!==n.inArray(t.target,u)&&(i.classesElementLookup[r]=n(u.not(t.target).get()))})},_removeClass:function(n,t,i){return this._toggleClass(n,t,i,!1)},_addClass:function(n,t,i){return this._toggleClass(n,t,i,!0)},_toggleClass:function(n,t,i,r){r="boolean"==typeof r?r:i;var u="string"==typeof n||null===n,f={extra:u?t:i,keys:u?n:t,element:u?this.element:n,add:r};return f.element.toggleClass(this._classes(f),r),this},_on:function(t,i,r){var f,u=this;"boolean"!=typeof t&&(r=i,i=t,t=!1);r?(i=f=n(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,f=this.widget());n.each(r,function(r,e){function o(){if(t||!0!==u.options.disabled&&!n(this).hasClass("ui-state-disabled"))return("string"==typeof e?u[e]:e).apply(u,arguments)}"string"!=typeof e&&(o.guid=e.guid=e.guid||o.guid||n.guid++);var s=r.match(/^([\w:-]*)\s*(.*)$/),h=s[1]+u.eventNamespace,c=s[2];c?f.on(h,c,o):i.on(h,o)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.off(i).off(i);this.bindings=n(this.bindings.not(t).get());this.focusable=n(this.focusable.not(t).get());this.hoverable=n(this.hoverable.not(t).get())},_delay:function(n,t){var i=this;return setTimeout(function(){return("string"==typeof n?i[n]:n).apply(i,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){this._addClass(n(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(n(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){this._addClass(n(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(n(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},(i=n.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&!1===e.apply(this.element[0],[i].concat(r))||i.isDefaultPrevented())}},n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){var o,e;"string"==typeof u&&(u={effect:u});e=u?!0===u||"number"==typeof u?i:u.effect||i:t;"number"==typeof(u=u||{})&&(u={duration:u});o=!n.isEmptyObject(u);u.complete=f;u.delay&&r.delay(u.delay);o&&n.effects&&n.effects.effect[e]?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t]();f&&f.call(r[0]);i()})}}),n.widget};u=[i(0),i(3)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={plus:'<svg class="svg--plus" width="16" height="16" viewBox="0 0 16 16"><path d="M2.556 1C1.692 1 1 1.7 1 2.556v10.888C1 14.3 1.692 15 2.556 15h10.888C14.3 15 15 14.3 15 13.444V2.556C15 1.7 14.3 1 13.444 1H2.556z"/><path d="M12 9H9v3H7V9H4V7h3V4h2v3h3v2z"/><\/svg>',settingsWorkTool:'<svg class="svg--work-tool" width="16" height="16" viewBox="0 0 16 16"><g fill="none" fill-rule="evenodd"><path d="M-110-441h240V759h-240z"/><path d="M12.296 8.588c.024-.192.042-.384.042-.588 0-.204-.018-.396-.042-.588l1.266-.99c.114-.09.144-.252.072-.384l-1.2-2.076c-.072-.132-.234-.18-.366-.132l-1.494.6c-.312-.24-.648-.438-1.014-.588l-.228-1.59C9.314 2.108 9.188 2 9.038 2h-2.4c-.15 0-.276.108-.294.252l-.228 1.59c-.366.15-.702.354-1.014.588l-1.494-.6c-.138-.054-.294 0-.366.132l-1.2 2.076c-.078.132-.042.294.072.384l1.266.99c-.024.192-.042.39-.042.588 0 .198.018.396.042.588l-1.266.99c-.114.09-.144.252-.072.384l1.2 2.076c.072.132.234.18.366.132l1.494-.6c.312.24.648.438 1.014.588l.228 1.59c.018.144.144.252.294.252h2.4c.15 0 .276-.108.294-.252l.228-1.59c.366-.15.702-.354 1.014-.588l1.494.6c.138.054.294 0 .366-.132l1.2-2.076c.072-.132.042-.294-.072-.384l-1.266-.99zM7.838 10.1c-1.158 0-2.1-.942-2.1-2.1 0-1.158.942-2.1 2.1-2.1 1.158 0 2.1.942 2.1 2.1 0 1.158-.942 2.1-2.1 2.1z" fill="#FFF"/><\/g><\/svg>',delete16:'<svg class="svg--delete" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><rect x="7.45" y="0.843" transform="matrix(-0.7071 -0.7071 0.7071 -0.7071 9.0859 18.8636)" fill="#FFFFFF" width="2" height="13.415"/><rect x="7.45" y="0.842" transform="matrix(0.7071 -0.7071 0.7071 0.7071 -2.8633 8.186)" fill="#FFFFFF" width="2" height="13.414"/><\/g><\/svg>',chevron:'<svg class="svg--chevron" width="16px" height="16px" viewBox="0 0 26 26" enable-background="new 0 0 16 16" xml:space="preserve"><g><polygon fill="#231F20" points="0.046,2.582 2.13,0.498 12.967,11.334 23.803,0.498 25.887,2.582 12.967,15.502  "/><polygon fill="#231F20" points="0.046,13.582 2.13,11.498 12.967,22.334 23.803,11.498 25.887,13.582 12.967,26.502  "/><\/g><\/svg>',pencilSmall:'<svg class="svg-pencil" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><path fill="#FFFFFF" d="M2,3.692v7.615C2,12.238,2.762,13,3.692,13h7.615C12.238,13,13,12.238,13,11.308V10.25L12,11l-0.692,0.308H3.692L4,4l2-1l0.584-1H3.692C2.762,2,2,2.761,2,3.692z"/><polygon fill="#FFFFFF" points="10,10 10,1 14.621,5.378"/><path fill="#FFFFFF" d="M10.379,4C10.379,4,6,4,6,9c0,0,0.152-1.627,2.379-2c0.305-0.051,1.639,0,2,0V4z"/><\/g><\/svg>',toolbar:'<svg class="svg--toolbar" width="16" height="16" viewBox="0 0 36 30"><polygon points="14 30 22 25 22 17 36 0 18 0 0 0 14 17 " fill="#fff"/><\/svg>',link16:'<svg class="svg--link" width="16" height="16" viewBox="0 0 16 16"><g fill="none" fill-rule="evenodd"><path d="M-110-405h240V795h-240z"/><path d="M10.3 7.26c-.15-.335-.36-.65-.635-.925s-.59-.484-.925-.634l-.416.417-.288.288-.3.3c-.056.055-.103.115-.144.178.397.026.77.187 1.054.47.292.293.444.67.47 1.053.014.213-.012.426-.08.63-.077.228-.2.442-.376.625l-.014.018-.34.34-.472.472-.44.44-1.147 1.147c-.31.31-.723.48-1.162.48-.44 0-.852-.17-1.162-.48-.31-.31-.48-.723-.48-1.162 0-.44.17-.85.48-1.162l1.15-1.15c-.067-.203-.114-.41-.143-.622-.02-.156-.036-.313-.036-.472-.002-.29.034-.58.1-.865l-2.09 2.09c-1.205 1.206-1.205 3.16 0 4.364.602.602 1.39.903 2.18.903.79 0 1.58-.3 2.182-.903l2.088-2.09.31-.31c.18-.177.328-.374.453-.58.197-.323.33-.673.398-1.034.034-.186.053-.374.053-.563 0-.23-.028-.46-.08-.686-.043-.195-.106-.387-.19-.573zm2.797-4.357C12.494 2.3 11.705 2 10.917 2c-.79 0-1.58.3-2.183.904L6.646 4.992l-.31.31c-.18.18-.327.375-.453.58-.197.324-.33.674-.398 1.036-.035.186-.053.374-.053.562 0 .23.028.46.08.686.043.196.106.388.19.574.15.335.358.65.633.925s.59.485.926.634l.416-.416.29-.288.298-.3c.056-.055.103-.116.144-.18-.397-.025-.77-.185-1.054-.47-.293-.293-.445-.67-.47-1.054-.014-.212.013-.424.08-.628.076-.227.198-.442.376-.624l.014-.018.34-.34.472-.472.44-.44 1.147-1.147c.31-.31.723-.48 1.163-.48.44 0 .85.17 1.16.48.642.64.642 1.683.002 2.324l-1.15 1.15c.066.203.113.41.142.622.02.156.036.314.036.472.003.29-.033.58-.1.865l2.09-2.09c1.205-1.206 1.205-3.16 0-4.364z" fill="#FFF"/><\/g><\/svg>',tabDerrived:'<svg class="svg--tab-derived" width="14px" height="14px" viewBox="0 0 16 16"><defs/><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect x="-110" y="-679" width="240" height="1200"/><path d="M1,3.00585866 C1,1.89805351 1.89706013,1 3.00585866,1 L12.9941413,1 C14.1019465,1 15,1.89706013 15,3.00585866 L15,12.9941413 C15,14.1019465 14.1029399,15 12.9941413,15 L3.00585866,15 C1.89805351,15 1,14.1029399 1,12.9941413 L1,3.00585866 Z M6.84570313,10.1767578 C6.85026044,9.55696305 6.94026605,9.09668119 7.11572266,8.79589844 C7.29117926,8.49511568 7.62727616,8.13281462 8.12402344,7.70898438 C8.37923305,7.45833208 8.5820305,7.18147938 8.73242188,6.87841797 C8.88281325,6.57535656 8.95800781,6.22786654 8.95800781,5.8359375 C8.95800781,5.41666457 8.87255945,5.08398561 8.70166016,4.83789062 C8.53076086,4.59179564 8.28808751,4.46875 7.97363281,4.46875 C7.73209515,4.46875 7.52246183,4.57470597 7.34472656,4.78662109 C7.1669913,4.99853622 7.07584638,5.30045377 7.07128906,5.69238281 L5.18457031,5.69238281 L5.17089844,5.65136719 C5.15722649,4.75357624 5.41015365,4.07112864 5.9296875,3.60400391 C6.44922135,3.13687917 7.13052964,2.90332031 7.97363281,2.90332031 C8.8850957,2.90332031 9.60172265,3.16650127 10.1235352,3.69287109 C10.6453477,4.21924091 10.90625,4.93131062 10.90625,5.82910156 C10.90625,6.39876587 10.7604181,6.9262671 10.46875,7.41162109 C10.1770819,7.89697508 9.81250219,8.3037093 9.375,8.63183594 C9.14257696,8.8414724 8.98649128,9.05680228 8.90673828,9.27783203 C8.82698528,9.49886178 8.78710938,9.79850071 8.78710938,10.1767578 L6.84570313,10.1767578 Z M8.7734375,13 L6.85253906,13 L6.85253906,11.3115234 L8.7734375,11.3115234 L8.7734375,13 Z" /><\/g><\/svg>',tabCte:'<svg class="svg--tab-cte" width="16" height="16"><path fill="white" d="M13.143 1H3.857A1.858 1.858 0 0 0 2 2.857v9.285C2 13.168 2.832 14 3.857 14h9.285A1.858 1.858 0 0 0 15 12.143V2.857A1.858 1.858 0 0 0 13.143 1zM7 8l-1.563 2H4L3 9V6l1-1h1.438L7 7 5 6H4v3h1l2-1zm3-2H9v4H8V6H7V5h3v1zm3 1v1h-1v1h2l-1 1h-2V5h2l1 1h-2v1h1z"/><\/svg>',tabSubQuery:'<svg class="svg--tab-subquery" width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><path fill="#FFFFFF" d="M13.143,1H3.857C2.832,1,2,1.832,2,2.857v9.285C2,13.168,2.832,14,3.857,14h9.285 C14.168,14,15,13.168,15,12.143V2.857C15,1.832,14.168,1,13.143,1z M7,11H5V6H4V5h1V4c0,0,0-2,2-2c1,0,2,0,2,0v1H8L7,4v1h2v1H7V11z M12.531,12H11l-0.5-1.294l-0.879,1.231L7,12l2.773-2.472L8,8l0,0l0.188-1H10l0.656,1.144L11.742,7H14l-2.629,2.6L13,11l0,0L12.531,12z"/><\/svg>',root:'<svg class="svg--tab-root" width="16px" height="16px" viewBox="0 0 14 14"><path d="M5.6 12V7.765h2.8V12h3.5V6.353H14L7 0 0 6.353h2.1V12h3.5z"/><\/svg>',subQueryTree:'<svg width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><path fill="#FFFFFF" d="M7,2c0,0.55-0.45,1-1,1H1C0.45,3,0,2.55,0,2V1c0-0.55,0.45-1,1-1h5c0.55,0,1,0.45,1,1V2z"/><path fill="#FFFFFF" d="M16,7c0,0.55-0.45,1-1,1h-4c-0.55,0-1-0.45-1-1V6c0-0.55,0.45-1,1-1h4c0.55,0,1,0.45,1,1V7z"/><path fill="#FFFFFF" d="M16,11c0,0.55-0.45,1-1,1h-4c-0.55,0-1-0.45-1-1v-1c0-0.55,0.45-1,1-1h4c0.55,0,1,0.45,1,1V11z"/><path fill="#FFFFFF" d="M16,15c0,0.55-0.45,1-1,1h-4c-0.55,0-1-0.45-1-1v-1c0-0.55,0.45-1,1-1h4c0.55,0,1,0.45,1,1V15z"/><polygon fill="#FFFFFF" points="4,14 3,14 3,4 4,3"/><polygon fill="#FFFFFF" points="10,7 4,7 5,6 9,6 \t"/><polygon fill="#FFFFFF" points="10,11 4,11 5,10 9,10"/><polygon fill="#FFFFFF" points="10,15 4,15 3,14 9,14"/><\/g><\/svg>',hidePanel:'<svg width="14px" height="14px" viewBox="0 0 16 16" enable-background="new 0 0 14 14" xml:space="preserve"><g><path fill="#FFFFFF" d="M13,1h-3v2h3v9H4V9H2v3c0,1.1,0.9,2,2,2h9c1.1,0,2-0.9,2-2V3C15,1.9,14.1,1,13,1z"/><polygon fill="#FFFFFF" points="2,1 4,1 4,6 3,7 2,6"/><polygon fill="#FFFFFF" points="7,1 2,1 2,3 7,3 8,2"/><g><rect x="3" y="2" fill="#FFFFFF" width="1" height="1"/><rect x="4" y="3" fill="#FFFFFF" width="1" height="1"/><rect x="5" y="4" fill="#FFFFFF" width="1" height="1"/><rect x="6" y="5" fill="#FFFFFF" width="1" height="1"/><rect x="7" y="6" fill="#FFFFFF" width="1" height="1"/><rect x="8" y="7" fill="#FFFFFF" width="1" height="1"/><\/g><g><rect x="3" y="3" fill="#FFFFFF" width="1" height="1"/><rect x="4" y="4" fill="#FFFFFF" width="1" height="1"/><rect x="5" y="5" fill="#FFFFFF" width="1" height="1"/><rect x="6" y="6" fill="#FFFFFF" width="1" height="1"/><rect x="7" y="7" fill="#FFFFFF" width="1" height="1"/><rect x="8" y="8" fill="#FFFFFF" width="1" height="1"/><\/g><g><rect x="4" y="2" fill="#FFFFFF" width="1" height="1"/><rect x="5" y="3" fill="#FFFFFF" width="1" height="1"/><rect x="6" y="4" fill="#FFFFFF" width="1" height="1"/><rect x="7" y="5" fill="#FFFFFF" width="1" height="1"/><rect x="8" y="6" fill="#FFFFFF" width="1" height="1"/><polygon fill="#FFFFFF" points="10,8 9,9 9,7 10,7"/><\/g><\/g><\/svg>',showPanel:'<svg width="14px" height="14px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><path fill="#FFFFFF" d="M2,3v3h2V3h9v9h-3v2h3c1.1,0,2-0.9,2-2V3c0-1.1-0.9-2-2-2H4C2.9,1,2,1.9,2,3z"/><polygon fill="#FFFFFF" points="2,14 2,12 7,12 8,13 7,14"/><polygon fill="#FFFFFF" points="2,9 2,14 4,14 4,9 3,8"/><g><rect x="3" y="12" fill="#FFFFFF" width="1" height="1"/><rect x="4" y="11" fill="#FFFFFF" width="1" height="1"/><rect x="5" y="10" fill="#FFFFFF" width="1" height="1"/><rect x="6" y="9" fill="#FFFFFF" width="1" height="1"/><rect x="7" y="8" fill="#FFFFFF" width="1" height="1"/><rect x="8" y="7" fill="#FFFFFF" width="1" height="1"/><\/g><g><rect x="4" y="12" fill="#FFFFFF" width="1" height="1"/><rect x="5" y="11" fill="#FFFFFF" width="1" height="1"/><rect x="6" y="10" fill="#FFFFFF" width="1" height="1"/><rect x="7" y="9" fill="#FFFFFF" width="1" height="1"/><rect x="8" y="8" fill="#FFFFFF" width="1" height="1"/><rect x="9" y="7" fill="#FFFFFF" width="1" height="1"/><\/g><g><rect x="3" y="11" fill="#FFFFFF" width="1" height="1"/><rect x="4" y="10" fill="#FFFFFF" width="1" height="1"/><rect x="5" y="9" fill="#FFFFFF" width="1" height="1"/><rect x="6" y="8" fill="#FFFFFF" width="1" height="1"/><rect x="7" y="7" fill="#FFFFFF" width="1" height="1"/><polygon fill="#FFFFFF" points="9,6 10,7 8,7 8,6"/><\/g><\/g><\/svg>',arrow:'<svg width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><polygon fill="#FFFFFF" points="5,3 5,12 12,7.5 "/><\/svg>',sandwich:'<svg width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><g><rect x="3" y="3" fill="#FFFFFF" width="11" height="2"/><rect x="3" y="7" fill="#FFFFFF" width="11" height="2"/><rect x="3" y="11" fill="#FFFFFF" width="11" height="2"/><\/g><\/g><\/svg>',addUnion:'<svg width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><g><path fill="#7D7D7D" d="M11.006,10l0.064-0.065C10.887,9.969,10.701,10,10.508,10C9.832,10,9.205,9.77,8.67,9.387C9.494,8.495,10.009,7.312,10.009,6c0-1.312-0.515-2.495-1.338-3.387C9.205,2.231,9.832,2,10.508,2c1.924,0,3.49,1.794,3.49,4c0,1.2-0.473,2.266-1.206,3h1.288c0.568-0.837,0.918-1.869,0.918-3c0-2.762-2.01-5-4.49-5c-0.972,0-1.865,0.352-2.6,0.936C7.091,1.352,6.099,1,5.019,1C2.263,1,0.03,3.238,0.03,6c0,2.761,2.233,5,4.989,5c1.08,0,2.072-0.352,2.889-0.936C8.643,10.648,9.536,11,10.508,11c0.171,0,0.332-0.035,0.498-0.057V10z M5.019,10c-2.2,0-3.989-1.794-3.989-4c0-2.206,1.79-4,3.989-4c0.654,0,1.263,0.174,1.808,0.454C5.993,3.313,5.472,4.479,5.472,5.773c0,1.444,0.645,2.733,1.656,3.608C6.515,9.768,5.795,10,5.019,10z"/><\/g><rect x="12.004" y="10" fill="#7D7D7D" width="1.996" height="6"/><rect x="10.009" y="12" fill="#7D7D7D" width="5.987" height="2"/><\/g><\/svg>',linkIndicatorEmpty:'<svg width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><g><path fill="#FBFAFF" d="M8,14.5c-3.584,0-6.5-2.902-6.5-6.469c0-3.567,2.916-6.469,6.5-6.469s6.5,2.902,6.5,6.469 C14.5,11.598,11.584,14.5,8,14.5z"/><path fill="#1B0887" d="M8,2.063c3.309,0,6,2.678,6,5.969S11.309,14,8,14s-6-2.678-6-5.969S4.691,2.063,8,2.063 M8,1.063c-3.866,0-7,3.12-7,6.969S4.134,15,8,15s7-3.119,7-6.969C15,4.183,11.866,1.063,8,1.063L8,1.063z"/><\/g><\/g><\/svg>',linkIndicatorLeft:'<svg width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><g><path fill="#FBFAFF" d="M8,14.5c-3.584,0-6.5-2.902-6.5-6.469c0-3.567,2.916-6.469,6.5-6.469s6.5,2.902,6.5,6.469C14.5,11.598,11.584,14.5,8,14.5z"/><path fill="#1B0887" d="M8,2.063c3.309,0,6,2.678,6,5.969S11.309,14,8,14s-6-2.678-6-5.969S4.691,2.063,8,2.063 M8,1.063c-3.866,0-7,3.12-7,6.969C1,11.88,4.134,15,8,15s7-3.12,7-6.969C15,4.182,11.866,1.063,8,1.063L8,1.063z"/><\/g><g><path fill="#1B0887" d="M8,8.031c0,0,0-4.066,0-6.969c-3.866,0-7,3.12-7,6.969C1,11.88,4.134,15,8,15C8,13.258,8,8.031,8,8.031z"/><\/g><\/g><\/svg>',linkIndicatorRight:'<svg width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><g><path fill="#FBFAFF" d="M8,14.5c-3.584,0-6.5-2.902-6.5-6.469c0-3.567,2.916-6.469,6.5-6.469s6.5,2.902,6.5,6.469C14.5,11.598,11.584,14.5,8,14.5z"/><path fill="#1B0887" d="M8,2.063c3.309,0,6,2.678,6,5.969S11.309,14,8,14s-6-2.678-6-5.969S4.691,2.063,8,2.063 M8,1.063c-3.866,0-7,3.12-7,6.969S4.134,15,8,15s7-3.119,7-6.969C15,4.183,11.866,1.063,8,1.063L8,1.063z"/><\/g><g><path fill="#1B0887" d="M8,8.031c0,0,0,4.065,0,6.969c3.866,0,7-3.119,7-6.969c0-3.849-3.134-6.969-7-6.969C8,2.805,8,8.031,8,8.031z"/><\/g><\/g><\/svg>',linkIndicatorFull:'<svg width="16px" height="16px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve"><g><circle fill="#1B0887" cx="8" cy="8" r="7"/><\/g><\/svg>',expanded:'<svg class="svg--tab-expanded" width="16" height="16"><path d="M7.5 11L5 6h5z"/><\/svg>',collapsed:'<svg class="svg--tab-collapsed" width="16" height="16"><path d="M8.5,5.3l2.5,5H6L8.5,5.3z"/><\/svg>',switchLink:'<svg width="16px" height="16px"><path d="M16 13V11.5H10V9.5H16V8L19 10.5L16 13Z" fill="black"/><path d="M8 17V15.5H14V13.5H8V12L5 14.5L8 17Z" fill="black"/><\/svg>'}},function(n,t){Object.defineProperty(t,"__esModule",{value:!0});var i={queryBuilderClass:"QueryBuilderControl",treeViewClass:"qb-ui-tree-view",gridClass:"ui-qb-grid",canvasClass:"qb-ui-canvas",editorClass:"qb-ui-editor",navbarClass:"qb-ui-canvas-navbar",statusBarClass:"qb-ui-editor-statusbar",userQueriesClass:"qb-ui-user-queries",pkButtonClass:"links--pk",fkButtonClass:"links--fk",focusClass:"ui-visual-focus",get queryBuilderSelector(){return this._getSelector(this.queryBuilderClass)},get treeViewSelector(){return this._getSelector(this.treeViewClass)},get gridSelector(){return this._getSelector(this.gridClass)},get canvasSelector(){return this._getSelector(this.canvasClass)},get editorSelector(){return this._getSelector(this.editorClass)},get navbarSelector(){return this._getSelector(this.navbarClass)},get statusBarSelector(){return this._getSelector(this.statusBarClass)},get userQueriesSelector(){return this._getSelector(this.userQueriesClass)},get pkButtonSelector(){return this._getSelector(this.pkButtonClass)},get fkButtonSelector(){return this._getSelector(this.fkButtonClass)},_getSelector:function(n){return"."+n}};t.default=Object.freeze(i)},function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){function t(n,t,i,r){t.repeat=o;null==t.language&&(t.language=s);var u=JSON.stringify(t,function(n,t){if(null!==t)return t});return e({type:"POST",url:f+"/actions/"+n,data:u,callback:i,errorcallback:function(n,i){"function"==typeof r&&r(n);h(i.Error,i.StatusCode,t)}.bind(this)})}function e(n){var t=new XMLHttpRequest;t.open(n.type,n.url,!0);n.reinit&&(t.setRequestHeader("Cache-Control","no-cache"),t.setRequestHeader("Pragma","no-cache"));t.onload=function(){if(this.status>=200&&this.status<400&&"function"==typeof n.callback)if(n.reinit)n.callback(this.responseText);else{var t=JSON.parse(this.responseText);200===t.StatusCode?n.callback(t.Content):"function"==typeof n.errorcallback&&n.errorcallback(this,t)}};t.onerror=function(){return console.error(t)};AQB.Web.beforeSend&&AQB.Web.beforeSend(t,n.data);t.send(n.data)}function h(n,t,i){var r=i,u=void 0;return null==r?console.error(n):("string"!=typeof r&&(u=i.repeat,r=i.sessionID||i.SessionID),410===t?AQB.Web.QueryBuilderContainer.get(r)._reinit():void c(r,n,u?"warning":"error"))}function c(n,t,i){var r=AQB.Web.QueryBuilderContainer.get(n||""),u;r.hideOverlay();u=!0;r.emit(r.Events.OnError,t,function(){return u=!1});u&&function(n,t,i){n.TreeViewComponent&&n.TreeViewComponent.stopLoadingIndication();n.StatusBarComponent&&("warning"===i?n.StatusBarComponent.messageWarning(t):n.StatusBarComponent.messageError(t))}(r,t,i)}function i(n){return function(){r={func:n,args:arguments};n.apply(null,arguments)}}var f=void 0,r=void 0,o=!1,u=void 0,s=void 0,n=function(n){return i(function(i,r){return t(n,i,function(n){return function(t){null==t||null==t.Error?u(t,n):h(t.Error,t.StatusCode,t.SessionID)}}(r))})},l=n("setSql");return{addUserQuery:i(function(n,i,r,f,e,o){t("addUserQuery",{name:n,sessionID:i,unionSubQueryPath:r,x:f[0],y:f[1],width:e,height:o},u)}),saveUserQuery:i(function(n,i,r){t("saveUserQuery",n,i,r)}),editUserQuery:n("editUserQuery"),createUserQuery:i(function(n,i,r){t("createUserQuery",n,i,r)}),createQueryFolder:i(function(n,i,r){t("createQueryFolder",n,i,r)}),moveQueryFolder:i(function(n,i,r){t("moveQueryFolder",n,i,r)}),moveUserQuery:i(function(n,i,r){t("moveUserQuery",n,i,r)}),renameQueryFolder:i(function(n,i,r){t("renameQueryFolder",n,i,r)}),renameUserQuery:i(function(n,i,r){t("renameUserQuery",n,i,r)}),deleteUserQuery:i(function(n,i,r){t("deleteUserQuery",n,i,r)}),deleteQueryFolder:i(function(n,i,r){t("deleteQueryFolder",n,i,r)}),validateExpression:i(function(n,i,r){if("function"!=typeof r)throw new Error("callback is not a function");t("validateExpression",{sessionID:i,expression:n.expression,condition:n.condition},function(n){r(n.Value,n.Error)})}),sendPropertiesForm:i(function(n,i,r){t("editPropertiesForm",n,i||u,r)}),getPropertiesForms:n("getPropertiesForms"),checkIsErrorElementExists:n("checkIsErrorElementExists"),focusErrorElement:n("focusErrorElement"),focusPropertiesForm:i(function(n,i){t("focusPropertiesForm",n,i||u,c)}),dispose:n("dispose"),undo:i(function(n){t("undo",n,function(n){n&&u(n)})}),sync:n("sync"),update:n("update"),fullUpdate:n("fullUpdate"),setSql:l,getTreeNode:n("getTreeNode"),toggleGrouping:n("toggleGrouping"),changeActiveUnionSubQuery:n("changeActiveUnionSubQuery"),changeActiveUnionSubQueryByIndex:n("changeActiveUnionSubQueryByIndex"),changeActiveSubQueryByPath:n("changeActiveSubQueryByPath"),setUnionSubQueryFromDataSource:n("setUnionSubQueryFromDataSource"),switchToQueryRoot:n("switchToQueryRoot"),addUnionSubQuery:n("addUnionSubQuery"),addDerivedTable:n("addDerivedTable"),addNewNamedSubQuery:n("addNewNamedSubQuery"),addNamedSubQuery:n("addNamedSubQuery"),addNamedSubQueryByPath:n("addNamedSubQueryByPath"),removeActiveUnionSubQuery:n("removeActiveUnionSubQuery"),removeUnionSubQuery:n("removeUnionSubQuery"),removeUnionSubQueryByIndex:n("removeUnionSubQueryByIndex"),copyUnionSubQuery:n("copyUnionSubQuery"),copyUnionSubQueryByIndex:n("copyUnionSubQueryByIndex"),encloseWithBrackets:n("encloseWithBrackets"),encloseWithBracketsByIndex:n("encloseWithBracketsByIndex"),moveOutOfBrackets:n("moveOutOfBrackets"),moveOutOfBracketsByIndex:n("moveOutOfBracketsByIndex"),moveUnionSubQueryToEnd:n("moveUnionSubQueryToEnd"),moveUnionSubQueryBeforeSubQuery:n("moveUnionSubQueryBeforeSubQuery"),changeUnionSubQueryOperator:n("changeUnionSubQueryOperator"),changeUnionSubQueryOperatorByIndex:n("changeUnionSubQueryOperatorByIndex"),switchLink:n("switchLink"),addDataSource:n("addDataSource"),removeDataSource:n("removeDataSource"),removeCte:n("removeCte"),removeCteByPath:n("removeCteByPath"),removeSubQueryByPath:n("removeSubQueryByPath"),moveDataSource:n("moveDataSource"),wrapToDerivedTable:n("wrapToDerivedTable"),addGridRow:n("addGridRow"),removeGridRow:n("removeGridRow"),moveGridRows:n("moveGridRows"),updateGridRow:n("updateGridRow"),checkDataSourceField:n("checkDataSourceField"),checkAllFields:n("checkAllFields"),orderByField:n("orderByField"),groupByField:n("groupByField"),aggregateField:n("aggregateField"),addInSubQuery:n("addInSubQuery"),addIsNull:n("addIsNull"),addUserExpression:n("addUserExpression"),ping:function(n){e({type:"GET",url:f+"/ping/test",callback:n})},setHandlerPath:function(n){f=n},setSuccessCallback:function(n){"function"==typeof n&&(u=n)},loadStrings:function(n,t){e({type:"GET",url:f+"/resources/strings/"+n,callback:t,errorcallback:function(n){return alert(n.responseText)}})},setLanguage:function(n){s=n},repeatLastAction:function(){if(void 0===r)return null;o=!0;r.func.apply(null,r.args);o=!1;var n=r;return r=void 0,n},ajax:e,post:t}}()},function(n,t,i){function s(n){return n&&n.__esModule?n:{"default":n}}function c(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function l(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function a(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});t.DataSourceHelper=void 0;var v=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),u=i(1),o=i(13),e=s(i(62)),y=s(i(63)),p=s(i(65)),w=i(2),h=s(i(5));var r=i(0),b=i(4),f=function(){function n(t){c(this,n);var i=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return i.options=t,i._app=t.app,i._createElement(),i._createTitleBar(),i._createFieldsContainer(),i._update(t.object),i._updateTitleBar(),i._addEvents(),i.setWidth(n.defaultWidth),i.setHeight(n.defaultHeight),i.element.data("me",i),i}return a(n,b),v(n,[{key:"update",value:function(n){u.isEmpty(u.Utils.globalFieldDragHelper)||u.Utils.globalFieldDragHelper.trigger("mouseup");this.options=r.extend(this.options,n);this.options.isHelper=!1;this._update(n.object)}},{key:"_update",value:function(n){this.mdo&&this.mdo.IsNew&&!n.IsNew&&this._app.emit(this._app.Events.DataSourceAdded,this);this.mdo=n;this.element.data("object",this.mdo);this._updateTempId();this._setZindex();this.options.coordinates&&this.setPosition(this.options.coordinates);var t=this._generateTitle();this.titleBar.setText(t,this.mdo.Caption);u.Utils.AriaLabel(this.element,this._app.Localizer.Strings.DataSource+" "+t);this.mdo.Fields.length&&null==this.toolbar&&this._createToolbar();this.element.attr("NameFull",this.mdo.NameFull);this._updateFieldsContainer();this._enableLinkManipulations();this.open()}},{key:"_updateTempId",value:function(){u.isEmpty(this.mdo.TempId)?this.mdo.TempId=this.TempId=u.getTempId():this.TempId=this.mdo.TempId}},{key:"setPosition",value:function(n){null!=n&&(this.element.css("left",n[0]),this.element.css("top",n[1]))}},{key:"setWidth",value:function(n){this.element.width(n);this.fieldsContainer.element.width(n)}},{key:"getWidth",value:function(){return this.element.width()}},{key:"setHeight",value:function(n){this.element.height(n);this.fieldsContainer.setHeight(n-e.default.defaultHeight)}},{key:"getHeight",value:function(){return this.element.height()}},{key:"dispose",value:function(){var n=this;this.hide();this.disposed=!0;setTimeout(function(){return n.remove()},4)}},{key:"hide",value:function(){this._domElem.style.display="none"}},{key:"getFieldByName",value:function(n){for(var i=this.fieldsContainer.fields,r=i.length,t=0;t<r;t++)if(i[t].object.NameFull==n)return i[t]}},{key:"blink",value:function(){this.titleBar.blink()}},{key:"_createElement",value:function(){this.element=r("<div><\/div>").addClass("qb-ui-table "+this._app._style.widget+" "+this._app._style.content+" "+this._app._style.cornerAll).attr("tabindex",0);this._domElem=this.element[0]}},{key:"_setZindex",value:function(){this.options.zIndex=Number(this.element.css("z-index"))||0;this.element.css("z-index",this.options.zIndex)}},{key:"_addEvents",value:function(){var t=this,n=this;this.element.focus(function(){n.inFocus=!1}).keydown(function(t){switch(t.keyCode){case 13:if(n.inFocus)return;n.inFocus=!0;t.preventDefault()}}).mousedown(function(t){return n.moveToTop(!1,t)}).click(function(){return t.select()});this._makeDraggable();this._makeResizable()}},{key:"_makeDraggable",value:function(){function i(n){return{position:n.position,offset:n.offset}}var t=this;t.element.draggable({addClasses:!1,fastDrag:!1,handle:".qb-ui-table-titlebar",scroll:!0,containment:"parent",start:function(n,u){r(this).addClass("ui-dialog-dragging");null!=r.ui.ddmanager.current&&null!=r.ui.ddmanager.current.containment&&r.ui.ddmanager.current.containment.length>3&&(r.ui.ddmanager.current.containment[2]=1e5,r.ui.ddmanager.current.containment[3]=1e5);t.emit("dragStart",n,i(u))},drag:function(n,r){t._app.CanvasComponent.redrawT();t.emit("drag",n,i(r))},stop:function(u,f){t._app.CanvasComponent.resize();t._app.CanvasComponent.redraw();r(this).removeClass("ui-dialog-dragging");t.emit("dragStop",u,i(f));t.emit(n.Events.TableObjectOnMoved)}}).css("position","absolute")}},{key:"_createTitleBar",value:function(){var n=this;this.titleBar=new e.default(this._app);this.titleBar.createCloseButton(function(){return n.close()});this.titleBar.createSandwichButton(function(){return n.showMenu()});this.titleBar.onDblclick=function(){return n.toggleTable()};this.element.append(this.titleBar.element)}},{key:"_updateTitleBar",value:function(){var t=this;(this.mdo.IsSubQuery||this.mdo.IsCTE)&&(this.openSubQuery=function(){return t.emit(n.Events.TableObjectOnSubqueryClick,t)},this.titleBar.createSubQueryButton(this.openSubQuery))}},{key:"_createToolbar",value:function(){var n=this;this.toolbar=new p.default;this.toolbar.on("filterChanged",function(t){return n.fieldsContainer.setFilter(t.toLowerCase())});this.toolbar.on("show",function(){n._app.CanvasComponent.redraw();n.toolbar.filter.focus()});this.toolbar.on("hide",function(){n._app.CanvasComponent.redraw();n._app.CanvasComponent.focus()});this.titleBar.element.after(this.toolbar.element)}},{key:"showMenu",value:function(){h.default.showForElement(this.element,{my:"right top",of:this.titleBar.leftButtons})}},{key:"toggleTable",value:function(){this._collapsed?this.expandTable():this.collapseTable();this._app.CanvasComponent.redraw()}},{key:"collapseTable",value:function(){this._collapsed=!0;this._lastHeight=this.getHeight();this.element.height(e.default.defaultHeight)}},{key:"expandTable",value:function(){this._collapsed=!1;this.toolbar.hide();this.setHeight(this._lastHeight)}},{key:"_generateTitle",value:function(){return u.isEmpty(this.mdo.Caption)?"":this.mdo.Caption.replace(/ /g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},{key:"_updateFieldsContainer",value:function(){var n=this,t=this.fieldsContainer.needToShowUnchecked,r=void 0!==this.fieldsContainer.sortedFields,i=this.fieldsContainer.filterText;setTimeout(function(){n._app.isDisposed||(void 0!==i&&n.fieldsContainer.setFilter(i),1==t&&n.fieldsContainer.showUnchecked(),0==t&&n.fieldsContainer.hideUnchecked(),r&&n.fieldsContainer.sortByName())},4);this.options.isHelper&&this.mdo.IsNew?(this.fieldsContainer.generateLoadingFields(),this.fieldsContainer.element.addClass("cursorWait")):this._needToGenerateFields(this.mdo.Fields,function(t){t?n.fieldsContainer.generateFields():n._updateFields(n.mdo.Fields);n.fieldsContainer.element.removeClass("cursorWait")})}},{key:"_needToGenerateFields",value:function(n,t){var i=this;if(!this.fieldsContainer._generatingFields)return t(this._needToGenerateFieldsInternal(n));this.fieldsContainer.onFieldsGenerated=function(){t(i._needToGenerateFieldsInternal(n))}}},{key:"_needToGenerateFieldsInternal",value:function(n){var i=this.fieldsContainer.getFields(!0),t;if(null==i||n.length!==i.length)return!0;for(t=0;t<n.length;t++)if(n[t].NameFull!==i[t].object.NameFull)return!0;return!1}},{key:"_updateFields",value:function(n){for(var i=this.fieldsContainer.getFields(!0),r=n.length,t=0;t<r;t++)n[t].NameFull===i[t].object.NameFull&&(n[t].IsSelected!==i[t].checked&&(i[t].check(n[t].IsSelected),n[t].IsSelected?this._app.emit(this._app.Events.DataSourceFieldAdded,i[t]):this._app.emit(this._app.Events.DataSourceFieldRemoved,i[t])),i[t].updateIndicators(n[t]))}},{key:"_createFieldsContainer",value:function(){this.fieldsContainer=new y.default(this);this.fieldsContainer.onFieldSelect=this._onFieldSelect.bind(this);this.fieldsContainer.onFieldCheck=this._onFieldCheck.bind(this);this.fieldsContainer.onFieldDblClick=this._onFieldDblClick.bind(this);this.fieldsContainer.onLinkedObjectSelected=this._onLinkedObjectSelected.bind(this);this.element.append(this.fieldsContainer.element)}},{key:"_onFieldSelect",value:function(t){this.emit(n.Events.OnSelectField,t)}},{key:"_onFieldCheck",value:function(t,i){this.emit(n.Events.TableObjectOnCheckField,{table:this.dto(),field:t.object,checked:i})}},{key:"_onFieldDblClick",value:function(t){this.emit(n.Events.TableObjectOnDblClickField,{table:this.dto(),field:t})}},{key:"onAddUserField",value:function(){var t=this;o.Core.on(o.Core.Events.SyncFinished,function n(){var i=t.mdo.Fields.filter(function(n){return n.IsUserField}),r=i[i.length-1];t._app.CanvasComponent.propertiesFormsContainer.loadByUserField(r);t._app.CanvasComponent.propertiesFormsContainer.show();o.Core.removeListener(o.Core.Events.SyncFinished,n)});this.emit(n.Events.TableObjectOnAddUserField,this.dto())}},{key:"_makeResizable",value:function(){var t=this;this.element.resizable({containment:"document",handles:n.resizeMode,minHeight:e.default.defaultHeight,minWidth:150,resize:function(){t.fieldsContainer.element.width(t.getWidth());t.fieldsContainer.setHeight(t.getHeight()-e.default.defaultHeight);t._app.CanvasComponent.resizeT();t._app.CanvasComponent.redrawT()},stop:function(){return t.emit(n.Events.TableObjectOnResized)}})}},{key:"onEditUserField",value:function(t){this.emit(n.Events.TableObjectOnEditUserField,{datasource:this.dto(),field:t})}},{key:"onRemoveUserField",value:function(t){this.emit(n.Events.TableObjectOnRemoveUserField,{table:this.dto(),field:t})}},{key:"_onLinkedObjectSelected",value:function(t,i){var r={link:i,dataSource:this.fieldsContainer.dataSource};this.emit(n.Events.TableObjectOnLinkedObjectSelected,r)}},{key:"_enableLinkManipulations",value:function(){var n=this;u.isTouchable||this._isLinkManipulationDisabled()||setTimeout(function(){if(!n._app.isDisposed){var t=n.fieldsContainer.getFieldsElems(!1);n._enableDragLinkManipulation(r(t));n._enableDropLinkManipulation(r(t))}},500)}},{key:"_isLinkManipulationDisabled",value:function(){return this._app.options.LinkManipulations!==w.Enum.LinkManipulations.Allow}},{key:"_enableDragLinkManipulation",value:function(n){var t=this._app,i=this;n.draggable({distance:10,scroll:!1,helper:function(n){var f=r(n.target).closest(".qb-ui-table-field").clone(),i=r('<table class="qb-ui-table '+t._style.widget+" "+t._style.content+'" cellpadding="0" cellspacing="0"><\/table>').append(f);return u.Utils.globalFieldDragHelper=i,i},appendTo:t.CanvasComponent.objectsContainer,opacity:.8,start:function(n,f){t.droppableClear();var e=r(f.helper),o=r(this);f.helper.width(r(this).width());u.Utils.globalTempLink&&(t.links.disposeLink(u.Utils.globalTempLink),delete u.Utils.globalTempLink);u.Utils.globalTempLink=t.links.createLink({Left:{field:{element:o},table:i},Right:{field:{element:e}}},t)},stop:function(){t.links.disposeLink(u.Utils.globalTempLink);delete u.Utils.globalTempLink;t.CanvasComponent.redraw();u.Utils.globalFieldDragHelper=null},drag:function(){t.CanvasComponent.redrawT()}})}},{key:"_enableDropLinkManipulation",value:function(t){var i=this._app,u;null!=i.CanvasComponent&&(u=this,t.droppable({accept:".qb-ui-table-field",hoverClass:"qb-ui-table-field-highlight",tolerance:"intersect",out:function(){i.droppableOut(this)},over:function(n,t){u.mdo.IsNew?r(t.helper).addClass("cursorWait"):r(t.helper).removeClass("cursorWait");i.droppableOver(this)},drop:function(t,f){var s,e,c,o,l;if(u.mdo.IsNew||!u._visibleY(t.target,i.CanvasComponent.element.get(0)))return!1;if(s=i.droppableGetTopElement()||[],!s.length||s[0]==this){i.droppableClear();var a=r(f.draggable),v=r(this),h=a.data("object"),y="";if(h&&h.NameFull&&(y=h.NameFull),e=v.data("object"),c="",e&&e.NameFull&&(c=e.NameFull),o={IsNew:!0,Left:{DataSourceIndex:a.data("table").mdo.Index,FieldName:y},Right:{DataSourceIndex:v.data("table").mdo.Index,FieldName:c}},l={abort:!1},u.emit(n.Events.TableObjectOnLinkCreating,o,l),l.abort)return!1;i.links.createLink(o);i.CanvasComponent.redraw();u.emit(n.Events.TableObjectOnLinkCreate,o)}}}))}},{key:"open",value:function(){this.setPosition(this.options.position);this.moveToTop(!0);this.emit("open")}},{key:"moveToTop",value:function(t,i){var r=Number(this.element.css("z-index")),u;r=Math.max(this.options.zIndex,r);t&&n.maxZ++;r<100&&r>n.maxZ?n.maxZ=r:r<n.maxZ&&(n.maxZ++,r=n.maxZ);n.maxZ>100&&(n.maxZ=100);u={scrollTop:this.element.attr("scrollTop"),scrollLeft:this.element.attr("scrollLeft")};this.element.css("z-index",r).attr(u);this.emit("focus",i)}},{key:"remove",value:function(){this.emit(n.Events.TableObjectOnDestroy);this.fieldsContainer.dispose();this.element.remove()}},{key:"close",value:function(){this.emit(n.Events.TableObjectOnClose)}},{key:"trash",value:function(){this.emit(n.Events.TableObjectOnTrash)}},{key:"checkAllFields",value:function(t){this.emit(n.Events.TableObjectOnCheckAllFields,{table:this.dto(),checked:t})}},{key:"_checkField",value:function(n,t,i){var r=this.fieldsContainer.findField(n);r.checked!=t&&i&&this._onFieldCheck(r,t)}},{key:"checkField",value:function(n,t){this._checkField(n,t,!0)}},{key:"checkFieldInternal",value:function(n,t,i){this._checkField(n,t,i)}},{key:"containsField",value:function(n){return this.fieldsContainer.containsField(n)}},{key:"_onUncheckClick",value:function(){this.fieldsContainer.needToShowUnchecked?this.fieldsContainer.hideUnchecked():this.fieldsContainer.showUnchecked()}},{key:"_onSortClick",value:function(){this.fieldsContainer.toggleSortingByName()}},{key:"_onFilterClick",value:function(){this.toggleToolbar()}},{key:"toggleToolbar",value:function(){this.toolbar.element.is(":visible")?this.hideToolbar():this.showToolbar()}},{key:"showToolbar",value:function(){this.toolbar&&this.toolbar.show()}},{key:"hideToolbar",value:function(){this.toolbar&&this.toolbar.hide()}},{key:"select",value:function(){this.element.focus();this.emit(this.Events.OnSelect,this)}},{key:"_getDto",value:function(){var n=u.mergeObj({},this.mdo);return n.Fields=[],r.each(this.fields,function(){"*"==this.object.NameStr?n.AllFieldsSelected=this.checked:n.Fields.push(this.object)}),n}},{key:"_setDto",value:function(n){this.mdo=n}},{key:"dto",value:function(n){if(void 0===n)return this._getDto();this._setDto(n)}},{key:"_visibleY",value:function(n,t){var i=n.getBoundingClientRect().top;n=n.parentNode;do{if(i<=n.getBoundingClientRect().bottom==!1)return!1;if(n==t)return!0;n=n.parentNode}while(n!=document.body);return i<=document.documentElement.clientHeight}},{key:"_menuCallback",value:function(n){if(null!=this.mdo&&this.mdo.IsNew)return!1;var i=h.default.cteKeys,t=h.default.dataSourceKeys;switch(n){case t.checkAll:return this.checkAllFields(!0);case t.uncheckAll:return this.checkAllFields(!1);case i.delete:return this.trash();case t.addUserField:return this.onAddUserField();case t.hide:case t.show:return this._onUncheckClick();case t.sort:case t.revertSort:return this._onSortClick();case t.filter:return this._onFilterClick();case t.properties:this.select();this._app.CanvasComponent.propertiesFormsContainer.show()}}},{key:"orderByField",value:function(t,i){var r=this.fieldsContainer.findField(t);this.emit(n.Events.TableObjectOnOrderByField,{table:this.dto(),field:r,orderBy:i})}},{key:"groupByField",value:function(t){var i=this.fieldsContainer.findField(t);this.emit(n.Events.TableObjectOnGroupByField,{table:this.dto(),field:i})}},{key:"aggregateField",value:function(t,i){var r=this.fieldsContainer.findField(t);this.emit(n.Events.TableObjectOnAggregateField,{table:this.dto(),field:r,aggregation:i})}},{key:"_addWhereCondition",value:function(n,t,i){this._addCondition(n,t,i,!1)}},{key:"_addHavingCondition",value:function(n,t,i){this._addCondition(n,t,i,!0)}},{key:"_addCondition",value:function(t,i,r,u){var f=this.fieldsContainer.findField(t),e=this.dto(),o;switch(i){case"NewCondition":o={Criteria:[],Expression:this._app.buildNewGridRowExpression(this.mdo.NameInQuery,f.object.NameStr),IsNew:!0,Select:!1,isHaving:u};this._onFieldDblClick(o);break;case"In":this.emit(n.Events.TableObjectOnAddInSubQuery,{table:e,field:f,haveNot:!1,isHaving:u});break;case"NotIn":this.emit(n.Events.TableObjectOnAddInSubQuery,{table:e,field:f,haveNot:!0,isHaving:u});break;case"IsNull":this.emit(n.Events.TableObjectOnAddIsNull,{table:e,field:f,haveNot:!1,isHaving:u});break;case"IsNotNull":this.emit(n.Events.TableObjectOnAddIsNull,{table:e,field:f,haveNot:!0,isHaving:u});break;case"UserExpressions":this.emit(n.Events.TableObjectOnAddUserExpression,{table:e,field:f,userExpressionIndex:r,isHaving:u});break;case"Expressions":this.emit(n.Events.TableObjectOnSelectExpression,{table:e,field:f,expressionIndex:r,isHaving:u})}}}]),n}();t.default=f;f.setDefaultWidth=function(n){this.defaultWidth=n};f.getDefaultWidth=function(){return this.defaultWidth};f.setDefaultHeight=function(n){this.defaultHeight=n};f.getDefaultHeight=function(){return this.defaultHeight};f.setInitialZindex=function(n){this.zIndex=n};f.maxZ=50;f.setResizeMode=function(n){n&&(this.resizeMode=n)};f.resizeMode="se";f.Events={TableObjectOnCheckField:"TableObjectOnCheckField",TableObjectOnCheckAllFields:"TableObjectOnCheckAllFields",TableObjectOnOrderByField:"TableObjectOnOrderByField",TableObjectOnGroupByField:"TableObjectOnGroupByField",TableObjectOnAggregateField:"TableObjectOnAggregateField",TableObjectOnAddInSubQuery:"TableObjectOnAddInSubQuery",TableObjectOnAddIsNull:"TableObjectOnAddIsNull",TableObjectOnAddUserExpression:"TableObjectOnAddUserExpression",TableObjectOnSelectExpression:"TableObjectOnSelectExpression",TableObjectOnDblClickField:"TableObjectOnDblClickField",TableObjectOnClose:"TableObjectOnClose",TableObjectOnTrash:"TableObjectOnTrash",TableObjectOnDestroy:"TableObjectOnDestroy",TableObjectOnMoved:"TableObjectOnMoved",TableObjectOnResized:"TableObjectOnResized",TableObjectOnResizing:"TableObjectOnResizing",TableObjectOnUpdated:"TableObjectOnUpdated",TableObjectOnLinkCreate:"TableObjectOnLinkCreate",TableObjectOnLinkCreating:"TableObjectOnLinkCreating",TableObjectOnLinkDelete:"TableObjectOnLinkDelete",TableObjectOnLinkedObjectSelected:"TableObjectOnLinkedObjectSelected",TableObjectOnSubqueryClick:"TableObjectOnSubqueryClick",TableObjectOnCTEClick:"TableObjectOnCTEClick",TableObjectOnAddUserField:"TableObjectOnAddUserField",TableObjectOnEditUserField:"TableObjectOnEditUserField",TableObjectOnRemoveUserField:"TableObjectOnRemoveuserField",TableObjectOnClick:"TableObjectOnClick",OnSelect:"OnSelect",OnSelectField:"OnSelectField"};f.prototype.Events=f.Events;t.DataSourceHelper=function(){function n(t){c(this,n);t.isHelper=!0;t.zIndex=7e3;var i=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return i.setHeight(70),i.element.addClass(u.Utils.canvasDroppableClass),i}return a(n,f),n}()},function(n,t,i){function e(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}var f,r,u;Object.defineProperty(t,"__esModule",{value:!0});t.CriteriaBuilderJunctionItemType=t.CriteriaBuilderConditionOperator=t.CriteriaBuilderItemType=void 0;r=i(2);t.CriteriaBuilderItemType={Unknown:0,Column:1,General:2,Group:3,Plus:4};u=t.CriteriaBuilderConditionOperator={};u[r.Enum.ConditionOperator.StartsWith]={Name:"starts with",ValuesCount:1,ValueKinds:[r.Enum.KindOfField.Text]};u[r.Enum.ConditionOperator.Contains]={Name:"contains",ValuesCount:1,ValueKinds:[r.Enum.KindOfField.Text]};u[r.Enum.ConditionOperator.EndsWith]={Name:"ends with",ValuesCount:1,ValueKinds:[r.Enum.KindOfField.Text]};u[r.Enum.ConditionOperator.IsEqualTo]={Name:"is equal to",ValuesCount:1,ValueKinds:[]};u[r.Enum.ConditionOperator.DoesNotStartWith]={Name:"does not start with",ValuesCount:1,ValueKinds:[r.Enum.KindOfField.Text]};u[r.Enum.ConditionOperator.DoesNotContain]={Name:"does not contain",ValuesCount:1,ValueKinds:[r.Enum.KindOfField.Text]};u[r.Enum.ConditionOperator.DoesNotEndWith]={Name:"does not end with",ValuesCount:1,ValueKinds:[r.Enum.KindOfField.Text]};u[r.Enum.ConditionOperator.IsInList]={Name:"is in list",ValuesCount:1,ValueKinds:[]};u[r.Enum.ConditionOperator.IsNotEqualTo]={Name:"is not equal to",ValuesCount:1,ValueKinds:[]};u[r.Enum.ConditionOperator.IsNotInList]={Name:"is not in list",ValuesCount:1,ValueKinds:[]};u[r.Enum.ConditionOperator.IsNull]={Name:"is null",ValuesCount:0,ValueKinds:[]};u[r.Enum.ConditionOperator.IsNotNull]={Name:"is not null",ValuesCount:0,ValueKinds:[]};u[r.Enum.ConditionOperator.IsLessThan]={Name:"is less than",ValuesCount:1,ValueKinds:[r.Enum.KindOfField.Numeric,r.Enum.KindOfField.Date]};u[r.Enum.ConditionOperator.IsLessThanOrEqualTo]={Name:"is less than or equal to",ValuesCount:1,ValueKinds:[r.Enum.KindOfField.Numeric,r.Enum.KindOfField.Date]};u[r.Enum.ConditionOperator.IsGreaterThan]={Name:"is greater than",ValuesCount:1,ValueKinds:[r.Enum.KindOfField.Numeric,r.Enum.KindOfField.Date]};u[r.Enum.ConditionOperator.IsGreaterThanOrEqualTo]={Name:"is greater than or equal to",ValuesCount:1,ValueKinds:[r.Enum.KindOfField.Numeric,r.Enum.KindOfField.Date]};u[r.Enum.ConditionOperator.IsBetween]={Name:"is between",ValuesCount:2,ValueKinds:[r.Enum.KindOfField.Numeric,r.Enum.KindOfField.Date]};u[r.Enum.ConditionOperator.IsNotBetween]={Name:"is not between",ValuesCount:2,ValueKinds:[r.Enum.KindOfField.Numeric,r.Enum.KindOfField.Date]};t.CriteriaBuilderJunctionItemType=(e(f={},r.Enum.JunctionItemType.All,{Name:"All",CssClass:"all"}),e(f,r.Enum.JunctionItemType.NotAll,{Name:"Not All",CssClass:"notall"}),e(f,r.Enum.JunctionItemType.Any,{Name:"Any",CssClass:"any"}),e(f,r.Enum.JunctionItemType.None,{Name:"None",CssClass:"none"}),f)},function(n,t,i){var r,u,f,e;e=function(n){var t=!1;return n(document).on("mouseup",function(){t=!1}),n.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(n){return t._mouseDown(n)}).on("click."+this.widgetName,function(i){if(!0===n.data(i.target,t.widgetName+".preventClickEvent"))return n.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName);this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(i);this._mouseDownEvent=i;var r=this,u=1===i.which,f=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&n(i.target).closest(this.options.cancel).length;return!(u&&!f&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),!0):(!0===n.data(i.target,this.widgetName+".preventClickEvent")&&n.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return r._mouseMove(n)},this._mouseUpDelegate=function(n){return r._mouseUp(n)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(n.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(i){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&n.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i));this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer);this.ignoreMissingWhich=!1;t=!1;i.preventDefault()},_mouseDistanceMet:function(n){return Math.max(Math.abs(this._mouseDownEvent.pageX-n.pageX),Math.abs(this._mouseDownEvent.pageY-n.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})};u=[i(0),i(20),i(3),i(6)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){function h(n){return n&&n.__esModule?n:{"default":n}}function c(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function e(){this.UnionSubQueryActions=[];this.Message="";this.SQL=null;this.Canvas={DataSources:[],Links:[],Layout:{DataSources:[]}};this.Grid={Rows:[]};this.Data=null;this.ContextMenu={};this.QueryParams=[];this.NavBar=null;this.TreeView=null;this.flush=function(){this.Message="";this.Metadata={};this.SQL=null;this.Canvas={DataSources:[],Links:[],Layout:{DataSources:[]}};this.Grid={Rows:[]};this.UnionSubQueryActions=[];this.Data=null;this.SubQueries=[];this.ContextMenu={}}}var l,a,o,u;Object.defineProperty(t,"__esModule",{value:!0});t.PacketStateChange=t.ExchangeObject=t.Core=void 0;var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),y=h(i(0)),r=i(1),f=h(i(9));l=i(4);a=function(){function n(){c(this,n);var t=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.ExchangeObject=new e,t.Events={DataSending:"DataSending",DataReceived:"DataReceived",SyncFinished:"SyncFinished",UserDataReceived:"UserDataReceived",UserQueriesReceived:"UserQueriesReceived",QueryStructureChanged:"QueryStructureChanged",SQLEErrorReceived:"SQLEErrorReceived",ContextMenuReceived:"ContextMenuReceived"},f.default.setSuccessCallback(function(n,i){t.emit(u.Events.DataReceived,n);t._importData(n);t.emit(u.Events.SyncFinished,n);"function"==typeof i&&i(n)}),t._checkTrigger=function(n,t,i,u){r.isEmpty(i)||n.emit(t,i,u)},t._checkTriggers=function(n){null!=n&&(this._checkTrigger(this,this.Events.QueryStructureChanged,n.QueryStructure),this._checkTrigger(this,this.Events.ContextMenuReceived,n.ContextMenu),this._checkTrigger(this,this.Events.UserDataReceived,n.Data),this._checkTrigger(this,this.Events.SQLEErrorReceived,n.SQLEditorError),this._checkTrigger(this,this.Events.UserQueriesReceived,n.UserQueries))},t._importData=function(n){this._checkTriggers(n)},t.addDataSource=function(n){n.IsNew=!0;this.ExchangeObject.Canvas.DataSources.push(n)},t.removeDataSource=function(n){n.IsDeleted=!0;this.ExchangeObject.Canvas.DataSources.push(n)},t.trashDataSource=function(n){n.IsTrashed=!0;this.ExchangeObject.Canvas.DataSources.push(n)},t.updateDataSource=function(n){this.ExchangeObject.Canvas.DataSources.push(n)},t.addLink=function(n){n.IsNew=!0;this.ExchangeObject.Canvas.Links.push(n)},t.removeLink=function(n){n.IsDeleted=!0;this.ExchangeObject.Canvas.Links.push(n)},t.updateLink=function(n){this.ExchangeObject.Canvas.Links.push(n)},t.updateSQL=function(n){this.ExchangeObject.SQL=n},t.addGridRow=function(n){this._updateNewRow(n);this.ExchangeObject.Grid.Rows.push(n)},t.addGridRows=function(n){for(var t=0;t<n.length;t++)this._updateNewRow(n[t]);this.ExchangeObject.Grid.Rows=this.ExchangeObject.Grid.Rows.concat(n)},t._updateNewRow=function(n){n.IsNew=!0;this._updateRow(n)},t._updateRow=function(n){void 0===n.ChangedCellIndex&&(n.Grouping&&(n.ChangedCellIndex=7),n.Aggregate&&(n.ChangedCellIndex=6))},t.updateGridRows=function(n){for(var t=0;t<n.length;t++)this._updateRow(n[t]);this.ExchangeObject.Grid.Rows=this.ExchangeObject.Grid.Rows.concat(n)},t.updateGridRow=function(n){this._updateRow(n);this.ExchangeObject.Grid.Rows.push(n)},t.removeGridRows=function(n){for(var t=0;t<n.length;t++)n[t].IsDeleted=!0;this.ExchangeObject.Grid.Rows=this.ExchangeObject.Grid.Rows.concat(n)},t.removeGridRow=function(n){n.IsDeleted=!0;this.ExchangeObject.Grid.Rows.push(n)},t.setUserData=function(n){this.ExchangeObject.Data=n},t._createDebouncedFunctions(),t}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,l),s(n,[{key:"sendDataToServer",value:function(){for(var t,u,e,n=window.AQB.Web.QueryBuilder,i=0;i<arguments.length;i++)t=arguments[i],u=void 0===t?"undefined":v(t),"undefined"!==u&&("function"===u?e=t:t.hasOwnProperty("SessionID")&&(n=t));n._pingCount=0;this.ExchangeObject.Url=window.location.href;this.ExchangeObject.SessionID=n.SessionID;this.ExchangeObject.UnionSubQueryPath=n.getActiveUnionSubQueryPath();n.CanvasComponent&&(this.ExchangeObject.Canvas.Layout.DataSources=n.CanvasComponent.getLayout());r.removeEmptyArray(this.ExchangeObject.Canvas,"DataSources");r.removeEmptyArray(this.ExchangeObject.Canvas,"Links");r.removeEmptyArray(this.ExchangeObject.Grid,"Rows");this.emit(this.Events.DataSending,this.ExchangeObject);f.default.sync(this.ExchangeObject,e);this.ExchangeObject.flush()}},{key:"_createDebouncedFunctions",value:function(){this._sendDataToServerDelayed=y.default.debounce(this.sendDataToServer,800,this)}}]),n}();o=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;c(this,n);this._sessionId=t;this._unionSubQueryPath=i;this.ExchangeObject=new e}return s(n,[{key:"send",value:function(n){if(r.isEmpty(this._sessionId)||r.isEmpty(this._unionSubQueryPath))throw new Exception("sessionId or unionSubQueryPath was not specified");this.send(this._sessionId,this._unionSubQueryPath,n)}},{key:"send",value:function(n,t,i){var u=JSON.parse(JSON.stringify(this.ExchangeObject));u.Url=window.location.href;u.SessionID=n;u.UnionSubQueryPath=t;r.removeEmptyArray(u.Canvas,"DataSources");r.removeEmptyArray(u.Canvas,"Links");r.removeEmptyArray(u.Grid,"Rows");f.default.sync(u,i)}},{key:"setSessionId",value:function(n){return this._sessionId=n,this}},{key:"setUnionSubQueryPath",value:function(n){return this._unionSubQueryPath=n,this}},{key:"addDataSource",value:function(n){return n.IsNew=!0,this.ExchangeObject.Canvas.DataSources.push(n),this}},{key:"removeDataSource",value:function(n){return n.IsDeleted=!0,this.ExchangeObject.Canvas.DataSources.push(n),this}},{key:"trashDataSource",value:function(n){return n.IsTrashed=!0,this.ExchangeObject.Canvas.DataSources.push(n),this}},{key:"updateDataSource",value:function(n){return this.ExchangeObject.Canvas.DataSources.push(n),this}},{key:"addLink",value:function(n){return n.IsNew=!0,this.ExchangeObject.Canvas.Links.push(n),this}},{key:"removeLink",value:function(n){return n.IsDeleted=!0,this.ExchangeObject.Canvas.Links.push(n),this}},{key:"updateLink",value:function(n){return this.ExchangeObject.Canvas.Links.push(n),this}},{key:"updateSQL",value:function(n){return this.ExchangeObject.SQL=n,this}},{key:"addGridRow",value:function(n){return this._updateNewRow(n),this.ExchangeObject.Grid.Rows.push(n),this}},{key:"addGridRows",value:function(n){for(var t=0;t<n.length;t++)this._updateNewRow(n[t]);return this.ExchangeObject.Grid.Rows=this.ExchangeObject.Grid.Rows.concat(n),this}},{key:"_updateNewRow",value:function(n){n.IsNew=!0;this._updateRow(n)}},{key:"_updateRow",value:function(n){void 0===n.ChangedCellIndex&&(n.Grouping&&(n.ChangedCellIndex=7),n.Aggregate&&(n.ChangedCellIndex=6))}},{key:"updateGridRows",value:function(n){for(var t=0;t<n.length;t++)this._updateRow(n[t]);return this.ExchangeObject.Grid.Rows=this.ExchangeObject.Grid.Rows.concat(n),this}},{key:"updateGridRow",value:function(n){return this._updateRow(n),this.ExchangeObject.Grid.Rows.push(n),this}},{key:"removeGridRows",value:function(n){for(var t=0;t<n.length;t++)n[t].IsDeleted=!0;return this.ExchangeObject.Grid.Rows=this.ExchangeObject.Grid.Rows.concat(n),this}},{key:"removeGridRow",value:function(n){return n.IsDeleted=!0,this.ExchangeObject.Grid.Rows.push(n),this}},{key:"setUserData",value:function(n){return this.ExchangeObject.Data=n,this}}]),n}();u=new a;u.PacketStateChange=o;t.Core=u;t.ExchangeObject=e;t.PacketStateChange=o},function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var n=Object.create(null);return{add:function(t){var i=t.SessionID;if(void 0!==n[i])throw new Error("SessionID is already exists");n[i]=t},get:function(t){return n[t]},first:function(){for(var t in n)return n[t]},foreach:function(t){if("function"==typeof t)for(var i in n)t(n[i])},remove:function(t){delete n[t]}}}},function(n,t,i){var r,u,f,e;e=function(n){return n.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}};u=[i(0),i(3)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var n=[];return{onApplicationReady:function(t){n.push(t)},onApplicationReadyTrigger:function(t){for(var i=0;i<n.length;i++)n[i](t)},reset:function(){n=[]}}}},function(n){n.exports=function(n,t){function h(t){return t.id&&n('label[for="'+t.id+'"]').val()||t.name}var c=t,p;(n.support.htmlMenuitem="HTMLMenuItemElement"in window,n.support.htmlCommand="HTMLCommandElement"in window,n.support.eventSelectstart="onselectstart"in document.documentElement,n.ui&&n.ui.widget)||(p=n.cleanData,n.cleanData=function(t){for(var i,r=0;null!=(i=t[r]);r++)try{n(i).triggerHandler("remove")}catch(n){}p(t)});var r=null,l=!1,o=n(window),a=0,s={},u={},v={},y={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!1,determinePosition:function(t){if(n.ui&&n.ui.position)t.css("display","block").position({my:"left top",at:"left bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var i=this.offset();i.top+=this.outerHeight();i.left+=this.outerWidth()/2-t.outerWidth()/2;t.css(i)}},position:function(n,t,i){var r;if(t||i){r="maintain"===t&&"maintain"===i?n.$menu.position():{top:i,left:t};var e=o.scrollTop()+o.height(),s=o.scrollLeft()+o.width(),u=n.$menu.height(),f=n.$menu.width();r.top+u>e&&(r.top-=u);r.top<0&&(r.top=0);r.left+f>s&&(r.left-=f);n.$menu.css(r)}else n.determinePosition.call(this,n.$menu)},positionSubmenu:function(t){if(n.ui&&n.ui.position)t.css("display","block").position({my:"left top",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var i={top:0,left:this.outerWidth()};t.css(i)}},zIndex:6101,animation:{duration:0,show:"slideDown",hide:"slideUp"},events:{show:n.noop,hide:n.noop},callback:null,items:{}},f={timer:null,pageX:null,pageY:null},i={abortevent:function(n){n.preventDefault();n.stopImmediatePropagation()},contextmenu:function(i){var f=n(this),u;if("right"==i.data.trigger&&(i.preventDefault(),i.stopImmediatePropagation()),!("right"!=i.data.trigger&&i.originalEvent||f.hasClass("context-menu-active")||!(void 0===i.mouseButton||!i.data||"left"===i.data.trigger&&0===i.mouseButton||"right"===i.data.trigger&&2===i.mouseButton)||f.hasClass("context-menu-disabled"))){if(r=f,i.data.build){if(u=i.data.build(r,i),!1===u)return;if(u.callback!==t&&null!=u.callback&&(i.data.callback=u.callback),i.data=n.extend(!0,{},u,y,i.data||{}),!i.data.items||n.isEmptyObject(i.data.items))throw window.console&&(console.error||console.log).call(console,"No items specified to show in contextMenu"),new Error("No Items specified");i.data.$trigger=r;e.create(i.data)}e.show.call(f,i.data,i.pageX,i.pageY)}},click:function(t){t.preventDefault();t.stopImmediatePropagation();n(this).trigger(n.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))},mousedown:function(t){var i=n(this);r&&r.length&&!r.is(i)&&r.data("contextMenu").$menu.trigger("contextmenu:hide");2==t.button&&(r=i.data("contextMenuActive",!0))},mouseup:function(t){var i=n(this);i.data("contextMenuActive")&&r&&r.length&&r.is(i)&&!i.hasClass("context-menu-disabled")&&(t.preventDefault(),t.stopImmediatePropagation(),r=i,i.trigger(n.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY})));i.removeData("contextMenuActive")},mouseenter:function(t){var u=n(this),e=n(t.relatedTarget),o=n(document);e.is(".context-menu-list")||e.closest(".context-menu-list").length||r&&r.length||(f.pageX=t.pageX,f.pageY=t.pageY,f.data=t.data,o.on("mousemove.contextMenuShow",i.mousemove),f.timer=setTimeout(function(){f.timer=null;o.off("mousemove.contextMenuShow");r=u;u.trigger(n.Event("contextmenu",{data:f.data,pageX:f.pageX,pageY:f.pageY}))},t.data.delay))},mousemove:function(n){f.pageX=n.pageX;f.pageY=n.pageY},mouseleave:function(t){var i=n(t.relatedTarget);if(!i.is(".context-menu-list")&&!i.closest(".context-menu-list").length){try{clearTimeout(f.timer)}catch(t){}f.timer=null}},layerClick:function(t){var u,r,i=n(this).data("contextMenuRoot"),s=t.button,f=t.pageX,e=t.pageY;t.preventDefault();t.stopImmediatePropagation();setTimeout(function(){var h,c="left"==i.trigger&&0===s||"right"==i.trigger&&2===s;if(document.elementFromPoint&&i.$layer&&(i.$layer.hide(),u=document.elementFromPoint(f-o.scrollLeft(),e-o.scrollTop()),i.$layer.show()),i.reposition&&c)if(document.elementFromPoint){if(i.$trigger.is(u)||i.$trigger.has(u).length)return void i.position.call(i.$trigger,i,f,e)}else if(r=i.$trigger.offset(),h=n(window),r.top+=h.scrollTop(),r.top<=t.pageY&&(r.left+=h.scrollLeft(),r.left<=t.pageX&&(r.bottom=r.top+i.$trigger.outerHeight(),r.bottom>=t.pageY&&(r.right=r.left+i.$trigger.outerWidth(),r.right>=t.pageX))))return void i.position.call(i.$trigger,i,f,e);u&&c&&i.$trigger.one("contextmenu:hidden",function(){n(u).contextMenu({x:f,y:e,button:s})});i.$menu.trigger("contextmenu:hide")},50)},keyStop:function(n,t){t.isInput||n.preventDefault();n.stopPropagation()},key:function(n){var t={},e,u,f;switch(r&&(t=r.data("contextMenu")||{}),n.keyCode){case 9:case 38:if(i.keyStop(n,t),t.isInput){if(9==n.keyCode&&n.shiftKey)return n.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void t.$menu.trigger("prevcommand");if(38==n.keyCode&&"checkbox"==t.$selected.find("input, textarea, select").prop("type"))return void n.preventDefault()}else if(9!=n.keyCode||n.shiftKey)return void t.$menu.trigger("prevcommand");case 40:if(i.keyStop(n,t),!t.isInput)return void t.$menu.trigger("nextcommand");if(9==n.keyCode)return n.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void t.$menu.trigger("nextcommand");if(40==n.keyCode&&"checkbox"==t.$selected.find("input, textarea, select").prop("type"))return void n.preventDefault();break;case 37:if(i.keyStop(n,t),t.isInput||!t.$selected||!t.$selected.length)break;if(!t.$selected.parent().hasClass("context-menu-root"))return e=t.$selected.parent().parent(),t.$selected.trigger("contextmenu:blur"),void(t.$selected=e);break;case 39:if(i.keyStop(n,t),t.isInput||!t.$selected||!t.$selected.length)break;if(u=t.$selected.data("contextMenu")||{},u.$menu&&t.$selected.hasClass("context-menu-submenu"))return t.$selected=null,u.$selected=null,void u.$menu.trigger("nextcommand");break;case 35:case 36:return t.$selected&&t.$selected.find("input, textarea, select").length?void 0:((t.$selected&&t.$selected.parent()||t.$menu).children(":not(.disabled, .not-selectable)")[36==n.keyCode?"first":"last"]().trigger("contextmenu:focus"),void n.preventDefault());case 13:if(i.keyStop(n,t),t.isInput){if(t.$selected&&!t.$selected.is("textarea, select"))return void n.preventDefault();break}return void(t.$selected&&t.$selected.trigger("mouseup"));case 32:case 33:case 34:return void i.keyStop(n,t);case 27:return i.keyStop(n,t),void t.$menu.trigger("contextmenu:hide");default:if(f=String.fromCharCode(n.keyCode).toUpperCase(),t.accesskeys&&t.accesskeys[f])return void t.accesskeys[f].$node.trigger(t.accesskeys[f].$menu?"contextmenu:focus":"mouseup")}n.stopPropagation();t.$selected&&t.$selected.trigger(n)},prevItem:function(t){var r,e,f;t.stopPropagation();r=n(this).data("contextMenu")||{};r.$selected&&(e=r.$selected,(r=r.$selected.parent().data("contextMenu")||{}).$selected=e);for(var o=r.$menu.children(),u=r.$selected&&r.$selected.prev().length?r.$selected.prev():o.last(),s=u;u.hasClass("disabled")||u.hasClass("not-selectable");)if((u=u.prev().length?u.prev():o.last()).is(s))return;r.$selected&&i.itemMouseleave.call(r.$selected.get(0),t);i.itemMouseenter.call(u.get(0),t);f=u.find("input, textarea, select");f.length&&f.focus()},nextItem:function(t){var r,e,f;t.stopPropagation();r=n(this).data("contextMenu")||{};r.$selected&&(e=r.$selected,(r=r.$selected.parent().data("contextMenu")||{}).$selected=e);for(var o=r.$menu.children(),u=r.$selected&&r.$selected.next().length?r.$selected.next():o.first(),s=u;u.hasClass("disabled")||u.hasClass("not-selectable");)if((u=u.next().length?u.next():o.first()).is(s))return;r.$selected&&i.itemMouseleave.call(r.$selected.get(0),t);i.itemMouseenter.call(u.get(0),t);f=u.find("input, textarea, select");f.length&&f.focus()},focusInput:function(){var t=n(this).closest(".context-menu-item"),i=t.data(),r=i.contextMenu,u=i.contextMenuRoot;u.$selected=r.$selected=t;u.isInput=r.isInput=!0},blurInput:function(){var t=n(this).closest(".context-menu-item").data(),i=t.contextMenu;t.contextMenuRoot.isInput=i.isInput=!1},menuMouseenter:function(){var t=n(this).data().contextMenuRoot;null!=t&&(t.hovering=!0)},menuMouseleave:function(t){var i=n(this).data().contextMenuRoot;null!=i&&i.$layer&&i.$layer.is(t.relatedTarget)&&(i.hovering=!1)},itemMouseenter:function(t){var r=n(this),f=r.data(),u=f.contextMenu,i=f.contextMenuRoot;null!=i&&(i.hovering=!0,t&&i.$layer&&i.$layer.is(t.relatedTarget)&&(t.preventDefault(),t.stopImmediatePropagation()),(u.$menu?u:i).$menu.children(".hover").trigger("contextmenu:blur"),r.hasClass("disabled")||r.hasClass("not-selectable")?u.$selected=null:r.trigger("contextmenu:focus"))},itemMouseleave:function(t){var u=n(this),f=u.data(),r=f.contextMenu,i=f.contextMenuRoot;if(i!==r&&i.$layer&&i.$layer.is(t.relatedTarget))return i.$selected&&i.$selected.trigger("contextmenu:blur"),t.preventDefault(),t.stopImmediatePropagation(),void(i.$selected=r.$selected=r.$node);u.trigger("contextmenu:blur")},itemClick:function(t){var f,o=n(this),u=o.data(),s=u.contextMenu,i=u.contextMenuRoot,r=u.contextMenuKey;if(s&&s.items[r]&&!o.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){if(t.preventDefault(),t.stopImmediatePropagation(),n.isFunction(i.callbacks[r])&&Object.prototype.hasOwnProperty.call(i.callbacks,r))f=i.callbacks[r];else{if(!n.isFunction(i.callback))return;f=i.callback}!1!==f.call(i.$trigger,r,i,u)?i.$menu.trigger("contextmenu:hide"):i.$menu.parent().length&&e.update.call(i.$trigger,i)}},inputClick:function(n){n.stopImmediatePropagation()},hideMenu:function(t,i){var r=n(this).data("contextMenuRoot");e.hide.call(r.$trigger,r,i&&i.force)},focusItem:function(t){t.stopPropagation();var r=n(this),u=r.data(),i=u.contextMenu,f=u.contextMenuRoot;r.addClass("hover").siblings(".hover").trigger("contextmenu:blur");i.$selected=f.$selected=r;i.$node&&f.positionSubmenu.call(i.$node,i.$menu)},blurItem:function(t){t.stopPropagation();var i=n(this);i.data().contextMenu;i.removeClass("hover")}},e={show:function(t,u,f){if(void 0===c||!c){c=!0;var o=n(this),s={};n("#context-menu-layer").trigger("mousedown");t.$trigger=o;t.x=u;t.y=f;!1!==t.events.show.call(o,t)?(e.update.call(o,t),t.position.call(o,t,u,f),t.zIndex&&(s.zIndex=6100+t.zIndex),e.layer.call(t.$menu,t,s.zIndex),t.$menu.find("ul").css("zIndex",s.zIndex+1),t.$menu.css(s)[t.animation.show](t.animation.duration,function(){o.trigger("contextmenu:visible")}),o.data("contextMenu",t).addClass("context-menu-active"),n(document).off("keydown.contextMenu").on("keydown.contextMenu",i.key),t.autoHide&&n(document).on("mousemove.contextMenuAutoHide",function(n){var i=o.offset();i.right=i.left+o.outerWidth();i.bottom=i.top+o.outerHeight();!t.$layer||t.hovering||n.pageX>=i.left&&n.pageX<=i.right&&n.pageY>=i.top&&n.pageY<=i.bottom||t.$menu.trigger("contextmenu:hide")})):r=null}},hide:function(i,u){var f=n(this),e;if(i||(i=f.data("contextMenu")||{}),u||!i.events||!1!==i.events.hide.call(f,i)){if(f.removeData("contextMenu").removeClass("context-menu-active"),i.$layer){setTimeout((e=i.$layer,function(){e.remove()}),10);try{delete i.$layer}catch(n){i.$layer=null}}r=null;i.$menu.find(".hover").trigger("contextmenu:blur");i.$selected=null;n(document).off(".contextMenuAutoHide").off("keydown.contextMenu");i.$menu&&i.$menu[i.animation.hide](i.animation.duration,function(){i.build&&(i.$menu.remove(),n.each(i,function(n){switch(n){case"ns":case"selector":case"build":case"trigger":return!0;default:i[n]=t;try{delete i[n]}catch(n){}return!0}}));setTimeout(function(){f.trigger("contextmenu:hidden")},10)});c=!1}},create:function(r,u){u===t&&(u=r);r.$menu=n('<ul class="context-menu-list"><\/ul>').addClass(r.className||"").data({contextMenu:r,contextMenuRoot:u});n.each(["callbacks","commands","inputs"],function(n,t){r[t]={};u[t]||(u[t]={})});u.accesskeys||(u.accesskeys={});n.each(r.items,function(t,f){var o=n('<li class="context-menu-item"><\/li>').addClass(f.className||""),h=null,s=null,c,a,l;if(o.on("click",n.noop),f.$node=o.data({contextMenu:r,contextMenuRoot:u,contextMenuKey:t}),f.accesskey)for(a=function(n){for(var t,u=n.split(/\s+/),i=[],r=0;t=u[r];r++)t=t.charAt(0).toUpperCase(),i.push(t);return i}(f.accesskey),l=0;c=a[l];l++)if(!u.accesskeys[c]){u.accesskeys[c]=f;f._name=f.name.replace(new RegExp("("+c+")","i"),'<span class="context-menu-accesskey">$1<\/span>');break}if("string"==typeof f)o.addClass("context-menu-separator not-selectable");else if(f.type&&v[f.type])v[f.type].call(o,f,r,u),n.each([r,u],function(i,r){r.commands[t]=f;n.isFunction(f.callback)&&(r.callbacks[t]=f.callback)});else{switch("html"==f.type?o.addClass("context-menu-html not-selectable"):f.type?(h=n("<label><\/label>").appendTo(o),n("<span><\/span>").html(f._name||f.name).appendTo(h),o.addClass("context-menu-input"),r.hasTypes=!0,n.each([r,u],function(n,i){i.commands[t]=f;i.inputs[t]=f})):f.items&&(f.type="sub"),f.type){case"text":s=n('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+t).val(f.value||"").appendTo(h);break;case"textarea":s=n('<textarea name=""><\/textarea>').attr("name","context-menu-input-"+t).val(f.value||"").appendTo(h);f.height&&s.height(f.height);break;case"checkbox":s=n('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+t).val(f.value||"").prop("checked",!!f.selected).prependTo(h);break;case"radio":s=n('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+f.radio).val(f.value||"").prop("checked",!!f.selected).prependTo(h);break;case"select":s=n('<select name="">').attr("name","context-menu-input-"+t).appendTo(h);f.options&&(n.each(f.options,function(t,i){n("<option><\/option>").val(t).text(i).appendTo(s)}),s.val(f.selected));break;case"sub":n("<span><\/span>").html(f._name||f.name).appendTo(o);f.appendTo=f.$node;e.create(f,u);o.data("contextMenu",f).addClass("context-menu-submenu");f.callback=null;break;case"html":n(f.html).appendTo(o);break;default:n.each([r,u],function(i,r){r.commands[t]=f;n.isFunction(f.callback)&&(r.callbacks[t]=f.callback)});n("<span><\/span>").html(f._name||f.name||"").appendTo(o)}f.type&&"sub"!=f.type&&"html"!=f.type&&(s.on("focus",i.focusInput).on("blur",i.blurInput),f.events&&s.on(f.events,r));f.icon&&o.addClass("icon icon-"+f.icon)}f.$input=s;f.$label=h;o.appendTo(r.$menu);!r.hasTypes&&n.support.eventSelectstart&&o.on("selectstart.disableTextSelect",i.abortevent)});r.$node||r.$menu.css("display","none").addClass("context-menu-root");r.$menu.appendTo(r.appendTo||document.body)},resize:function(t,i){t.css({position:"absolute",display:"block"});t.data("width",Math.ceil(t.width())+1);t.css({position:"static",minWidth:"0px",maxWidth:"100000px"});t.find("> li > ul").each(function(){e.resize(n(this),!0)});i||t.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return n(this).data("width")})},update:function(i,r){var u=this;r===t&&(r=i,e.resize(i.$menu));i.$menu.children().each(function(){var f=n(this),o=f.data("contextMenuKey"),t=i.items[o],s=n.isFunction(t.disabled)&&t.disabled.call(u,o,r)||!0===t.disabled;if(f[s?"addClass":"removeClass"]("disabled"),t.type)switch(f.find("input, select, textarea").prop("disabled",s),t.type){case"text":case"textarea":t.$input.val(t.value||"");break;case"checkbox":case"radio":t.$input.val(t.value||"").prop("checked",!!t.selected);break;case"select":t.$input.val(t.selected||"")}t.$menu&&e.update.call(u,t,r)})},layer:function(r,u){var e=n("#context-menu-layer"),f;return e&&e.remove(),f=r.$layer=n('<div id="context-menu-layer" style="position:fixed; z-index:'+u+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"><\/div>').css({height:o.height(),width:o.width(),display:"block"}).data("contextMenuRoot",r).insertBefore(this).on("contextmenu",i.abortevent).on("mousedown",i.layerClick),document.body.style.maxWidth===t&&f.css({position:"absolute",height:n(document).height()}),f}};n.fn.contextMenu=function(i){if(i===t)this.first().trigger("contextmenu");else if(i.x&&i.y)this.first().trigger(n.Event("contextmenu",{pageX:i.x,pageY:i.y,mouseButton:i.button}));else if("hide"===i){var r=this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;r&&r.trigger("contextmenu:hide")}else if("destroy"===i)n.contextMenu("destroy",{context:this});else{if("element"===i)return null!=this.data("contextMenu")?this.data("contextMenu").$menu:[];n.isPlainObject(i)?(i.context=this,n.contextMenu("create",i)):i?this.removeClass("context-menu-disabled"):i||this.addClass("context-menu-disabled")}return this};n.contextMenu=function(r,f){var c,w;"string"!=typeof r&&(f=r,r="create");"string"==typeof f?f={selector:f}:f===t&&(f={});var o=n.extend(!0,{},y,f||{}),v=n(document),h=v,p=!1;switch(o.context&&o.context.length?(h=n(o.context).first(),o.context=h.get(0),p=o.context!==document):o.context=document,r){case"create":if(!o.selector)throw new Error("No selector specified");if(o.selector.match(/.context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+o.selector+'" as it contains a reserved className');if(!o.build&&(!o.items||n.isEmptyObject(o.items)))throw new Error("No Items specified");switch(a++,o.ns=".contextMenu"+a,p||(s[o.selector]=o.ns),u[o.ns]=o,o.trigger||(o.trigger="right"),l||(v.on({"contextmenu:hide.contextMenu":i.hideMenu,"prevcommand.contextMenu":i.prevItem,"nextcommand.contextMenu":i.nextItem,"contextmenu.contextMenu":i.abortevent,"mouseenter.contextMenu":i.menuMouseenter,"mouseleave.contextMenu":i.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",i.inputClick).on({"mouseup.contextMenu":i.itemClick,"contextmenu:focus.contextMenu":i.focusItem,"contextmenu:blur.contextMenu":i.blurItem,"contextmenu.contextMenu":i.abortevent,"mouseenter.contextMenu":i.itemMouseenter,"mouseleave.contextMenu":i.itemMouseleave},".context-menu-item"),l=!0),h.on("contextmenu"+o.ns,o.selector,o,i.contextmenu),p&&h.on("remove"+o.ns,function(){n(this).contextMenu("destroy")}),o.trigger){case"hover":h.on("mouseenter"+o.ns,o.selector,o,i.mouseenter).on("mouseleave"+o.ns,o.selector,o,i.mouseleave);break;case"left":h.on("click"+o.ns,o.selector,o,i.click)}o.build||e.create(o);break;case"destroy":if(p)w=o.context,n.each(u,function(t,i){if(i.context!==w)return!0;(c=n(".context-menu-list").filter(":visible")).length&&c.data().contextMenuRoot.$trigger.is(n(i.context).find(i.selector))&&c.trigger("contextmenu:hide",{force:!0});try{u[i.ns].$menu&&u[i.ns].$menu.remove();delete u[i.ns]}catch(n){u[i.ns]=null}return n(i.context).off(i.ns),!0});else if(o.selector){if(s[o.selector]){(c=n(".context-menu-list").filter(":visible")).length&&c.data().contextMenuRoot.$trigger.is(o.selector)&&c.trigger("contextmenu:hide",{force:!0});try{u[s[o.selector]].$menu&&u[s[o.selector]].$menu.remove();delete u[s[o.selector]]}catch(n){u[s[o.selector]]=null}v.off(s[o.selector])}}else v.off(".contextMenu .contextMenuAutoHide"),n.each(u,function(t,i){n(i.context).off(i.ns)}),s={},u={},a=0,l=!1,n("#context-menu-layer, .context-menu-list").remove();break;case"html5":(n.support.htmlCommand||n.support.htmlMenuitem)&&("boolean"!=typeof f||!f)||n('menu[type="context"]').each(function(){this.id&&n.contextMenu({selector:"[contextmenu="+this.id+"]",items:n.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw new Error('Unknown operation "'+r+'"');}return this};n.contextMenu.setInputValues=function(i,r){r===t&&(r={});n.each(i.inputs,function(n,t){switch(t.type){case"text":case"textarea":t.value=r[n]||"";break;case"checkbox":t.selected=!!r[n];break;case"radio":t.selected=(r[t.radio]||"")==t.value;break;case"select":t.selected=r[n]||""}})};n.contextMenu.getInputValues=function(i,r){return r===t&&(r={}),n.each(i.inputs,function(n,t){switch(t.type){case"text":case"textarea":case"select":r[n]=t.$input.val();break;case"checkbox":r[n]=t.$input.prop("checked");break;case"radio":t.$input.prop("checked")&&(r[t.radio]=t.value)}}),r};n.contextMenu.fromMenu=function(i){var r={};return function i(r,u,f){return f||(f=0),u.each(function(){var o,e,u=n(this),s=this,c=this.nodeName.toLowerCase();switch("label"==c&&u.find("input, textarea, select").length&&(o=u.html(),c=(s=(u=u.children().first()).get(0)).nodeName.toLowerCase()),c){case"menu":e={name:u.attr("label"),items:{}};f=i(e.items,u.children(),f);break;case"a":case"button":e={name:u.html(),disabled:!!u.attr("disabled"),callback:function(){u.click()}};break;case"menuitem":case"command":switch(u.attr("type")){case t:case"command":case"menuitem":e={name:u.attr("label"),disabled:!!u.attr("disabled"),callback:function(){u.click()}};break;case"checkbox":e={type:"checkbox",disabled:!!u.attr("disabled"),name:u.attr("label"),selected:!!u.attr("checked")};break;case"radio":e={type:"radio",disabled:!!u.attr("disabled"),name:u.attr("label"),radio:u.attr("radiogroup"),value:u.attr("id"),selected:!!u.attr("checked")};break;default:e=t}break;case"hr":e="-------";break;case"input":switch(u.attr("type")){case"text":e={type:"text",name:o||h(s),disabled:!!u.attr("disabled"),value:u.val()};break;case"checkbox":e={type:"checkbox",name:o||h(s),disabled:!!u.attr("disabled"),selected:!!u.attr("checked")};break;case"radio":e={type:"radio",name:o||h(s),disabled:!!u.attr("disabled"),radio:!!u.attr("name"),value:u.val(),selected:!!u.attr("checked")};break;default:e=t}break;case"select":e={type:"select",name:o||h(s),disabled:!!u.attr("disabled"),selected:u.val(),options:{}};u.children().each(function(){e.options[this.value]=n(this).html()});break;case"textarea":e={type:"textarea",name:o||h(s),disabled:!!u.attr("disabled"),value:u.val()};break;case"label":break;default:e={type:"html",html:u.clone(!0)}}e&&(r["key"+ ++f]=e)}),f}(r,n(i).children()),r};n.contextMenu.defaults=y;n.contextMenu.types=v;n.contextMenu.handle=i;n.contextMenu.op=e;n.contextMenu.menus=u}},function(n,t,i){var e;Object.defineProperty(t,"__esModule",{value:!0});t.EditableSelectStatic=void 0;var f=i(1),r=i(0),u={wrappers:{},instances:[],handlers:{},inited:!1,context:null,init:function(){this.initEvents();this.inited=!0},initEvents:function(){},GetWrapper:function(n){return(f.isEmpty(n)||f.isEmpty(this.wrappers[n]))&&(this.wrappers[n]=new function(n){this.id=n;this.element=null;this.values=[];this.list_height=0;this.list_item_height=20;this.UpdateValues=function(n){var u,t,i,e;for(delete this.values,this.values=[],u=[],t=0;t<n.length;t++)i=n[t],u.push('<li value="'+t+'" class="'+i.cssClass+'">'+f.escapeHTML(i.text)+"<\/li>"),this.values.push(i.value);this.element.html("<ul>"+u.join("\n")+"<\/ul>");e=this;this.element.on("mouseup",function(n){var t=n.target,i;"LI"==t.tagName.toUpperCase()&&(i=r(n.target),n.stopPropagation(),this.currentContext.pickListItem(i.text(),e.currentContext.getListValue(t.value)))}.bind(this)).on("mousedown",function(n){n.stopPropagation()}.bind(this));this.adjustHeight();this.checkScroll(10)};this.adjustHeight=function(){this.element.css("visibility","hidden");this.element.show();var n=this.element.find("li");n.length>0&&(this.list_item_height=n[0].offsetHeight);this.element.css("visibility","visible");this.element.hide()};this.checkScroll=function(n){this.element.find("li").length>n?(this.list_height=this.list_item_height*n,this.element.css("height",this.list_height+"px"),this.element.css("overflow","auto")):(this.element.css("height","auto"),this.element.css("overflow","visible"))};this.getListValue=function(n){return this.values[n]};this.clearHighlightMatches=function(){this.element.find("li").removeClass("match")};this.highlightSelected=function(n){var i=n.toLowerCase(),t;this.clearHighlightMatches();t=this.getMatchItems(i);r(t).addClass("match");t.length>0?this.selectListItem(r(t[0])):this.selectFirstListItem()};this.getMatchItemNext=function(n){var f=n.toLowerCase(),t=this.getMatchItems(f),u=this.getSelectedListItem(),i;return u.length>0&&t.length>1?(i=t.indexOf(u[0]),i<t.length-1?r(t[i+1]):r(t[0])):null};this.getMatchItemPrev=function(n){var f=n.toLowerCase(),t=this.getMatchItems(f),u=this.getSelectedListItem(),i;return u.length>0&&t.length>1?(i=t.indexOf(u[0]),r(i>0?t[i-1]:t[t.length-1])):null};this.getMatchItems=function(n){var i=[],u;if(f.isEmpty(n))return i;for(var e=n.replace(/([$-/:-?{-~!"^_`\[\]\\])/g,"\\$1"),o=this.element.find("li"),r=0;r<o.length;r++){var t=o[r],s=(f.isEmpty(t.textContent)?t.innerText:t.textContent).toLowerCase(),h=this.getListValue(t.value).toLowerCase();AQB.Web.QueryBuilder.GridComponent.quickFilterInExpressionMatchFromBeginning&&(e="(^"+n+")|([.]"+n+")");u=new RegExp(e);n==s||n==h?i.push(t):(u.test(s)||u.test(h))&&i.push(t)}return i};this.clearSelectedListItem=function(){this.element.find("li.selected").removeClass("selected")};this.selectNewListItem=function(n,t,i){var u=this.getSelectedListItem(),r;u.length||(u=this.selectFirstListItem());r=null;"down"==t?(i&&(r=this.getMatchItemNext(n)),null==r&&(r=u.next())):"up"==t&&(i&&(r=this.getMatchItemPrev(n)),null==r&&(r=u.prev()));null!=r&&(this.selectListItem(r),this.unselectListItem(u))};this.selectListItem=function(n){this.clearSelectedListItem();n.addClass("selected");this.scrollToListItem(n)};this.selectFirstListItem=function(){var n=this.element.find("li:first");return this.selectListItem(n),n};this.unselectListItem=function(n){n.removeClass("selected")};this.getSelectedListItem=function(){return this.element.find("li.selected")};this.scrollToListItem=function(n){this.list_height&&null!=n&&n.length>0&&this.element.scrollTop(n[0].offsetTop-this.list_height/2)};this.init=function(){this.element=r('<div class="editable-select-options"><\/div>').appendTo(r(document.body))};this.init()}(n)),this.wrappers[n]},UpdateWrapper:function(n,t){this.GetWrapper(n).UpdateValues(t)}};r.fn.editableSelect=function(n){u.inited||u.init();var t=r.extend({bg_iframe:!1,onSelect:!0,items_then_scroll:10,case_sensitive:!1},n);return r(this).each(function(n,i){var f=r(i);void 0==f.data("editable-selecter")&&(u.instances.push(new e(i,t)),f.data("editable-selecter",u.instances.length-1))}),r(this)};r.fn.editableSelectInstances=function(){var n=[];return r(this).each(function(){void 0!==r(this).data("editable-selecter")&&(n[n.length]=u.instances[r(this).data("editable-selecter")])}),n};e=function(n,t){this.init(n,t)};e.prototype={isActive:!1,settings:!1,textControl:!1,select:!1,wrapper:!1,wrapperId:null,list_is_visible:!1,hide_on_blur_timeout:!1,bg_iframe:!1,padding_right:13,current_value:"",options_value:[],userEdit:!1,autoShow:!1,init:function(n,t){var i,e;this.settings=t;this.wrapperId=this.settings.wrapperId;this.wrapper=u.GetWrapper(this.wrapperId);this.handler=this.settings.onSelect;f.isEmpty(this.wrapperId)||(u.handlers[this.wrapperId]=this.settings.onSelect);this.options=[];f.isEmpty(this.settings.options)||(this.options=this.settings.options);this.select=r(n);this.textControl=r('<input type="text">');this.textControl.attr("aria-label",this.select.attr("aria-label"));this.textControl.val(this.settings.value);this.textControl.attr("name",this.select.attr("name"));this.textControl.data("editable-selecter",this.select.data("editable-selecter"));this.select.attr("disabled","disabled");i=this.select.attr("id");(i||(i="editable-select"+u.instances.length),this.id=i,this.textControl.attr("id",i),this.textControl.attr("autocomplete","off"),this.textControl.addClass("editable-select"),this.select.attr("id",i+"_hidden_select"),this.initInputEvents(this.textControl,this),this.duplicateOptions(),this.positionElements(),this.setWidths(),this.settings.bg_iframe)&&(e=r('<iframe frameborder="0" class="editable-select-iframe" src="about:blank;"><\/iframe>'),r(document.body).append(e),e.width(this.select.width()+2),e.height(this.wrapper.element.height()),e.css({top:this.wrapper.element.css("top"),left:this.wrapper.element.css("left")}),this.bg_iframe=e)},duplicateOptions:function(){var n=this,t=[];this.select.find("option").each(function(i,u){var f=r(u),e=f.text(),o=f.attr("value"),s=!1,h;(f.attr("selected")||u.selected)&&(n.textControl.val(e),n.current_value=e,n.current_options_value=o,s=!0);h=f.attr("class");t.push({selected:s,text:e,value:o,cssClass:h})});t.length>0&&(this.wrapper.UpdateValues(t),this.wrapper.element.addClass("disable-selection"),this.wrapper.checkScroll(this.settings.items_then_scroll))},getControl:function(){return this.textControl},onSelect:function(n){var t=this.wrapper.currentContext;"function"==typeof t.handler&&t.handler.call(t,t.textControl,n)},editStart:function(){this.isActive||(this.isActive=!0,this.current_value=this.textControl.val(),this.userEdit=!1,this.adjustWrapper(this),this.autoShow&&this.showList())},editEnd:function(n){this.isActive&&(this.wrapper.clearSelectedListItem(),this.hideList(),this.onSelect(n),this.isActive=!1)},onTextboxChanged:function(){this.textControl.val()!=this.current_value&&(this.userEdit=!0,this.current_value=this.textControl.val(),this.wrapper.highlightSelected(this.textControl.val()))},initInputEvents:function(n){var t=this;n.focus(function(){t.editStart()}).blur(function(n){t.list_is_visible||t.editEnd(n)}).click(function(n){n.stopPropagation();t.editStart();n.pageX-r(this).offset().left>r(this).width()-16&&(t.list_is_visible?t.hideList():t.showList())}).keydown(function(n){switch(t.isActive=!0,n.keyCode){case 40:t.listIsVisible()?(n.preventDefault(),t.wrapper.selectNewListItem(t.textControl.val(),"down",t.userEdit)):t.showList();break;case 38:t.listIsVisible()?(n.preventDefault(),t.wrapper.selectNewListItem(t.textControl.val(),"up",t.userEdit)):t.showList();break;case 9:t.listIsVisible()?(i=t.wrapper.getSelectedListItem()).length&&t.pickListItem(i.text(),t.getListValue(i[0].value)):t.editEnd();break;case 27:return n.preventDefault(),t.editEnd(),!1;case 13:var i;return(n.preventDefault(),t.list_is_visible)?(i=t.wrapper.getSelectedListItem()).length&&t.pickListItem(i.text(),t.getListValue(i[0].value)):t.editEnd(),!1}}).keyup(r.debounce(t.onTextboxChanged,100,t)).keypress(function(n){if(13==n.keyCode)return n.preventDefault(),!1})},pickListItem:function(n,t){this.current_value=n;this.current_options_value=t;this.textControl.val(t);this.editEnd()},listIsVisible:function(){return this.list_is_visible},adjustWrapper:function(n){this.adjustWrapperPosition();this.adjustWrapperSize();u.context=n;this.wrapper.currentContext=n},adjustWrapperPosition:function(){var n=this.textControl.offset();n.top+=this.textControl[0].offsetHeight;this.wrapper.element.css({top:n.top+"px",left:n.left+"px"})},adjustWrapperSize:function(){var n=this.textControl[0].clientWidth;this.wrapper.element.width(n)},showList:function(){this.hideOtherLists();this.overlay=new r.ui.editableSelectOverlay.overlay(this);this.wrapper.element.show();this.adjustWrapper(this);this.list_is_visible=!0;this.settings.bg_iframe&&this.bg_iframe.show();this.wrapper.checkScroll(10);this.wrapper.highlightSelected(this.textControl.val())},getListValue:function(n){return this.wrapper.values[n]},hideList:function(){null!=this.overlay&&this.overlay.destroy();this.wrapper.element.hide();this.list_is_visible=!1;this.settings.bg_iframe&&this.bg_iframe.hide()},hideOtherLists:function(){for(var n=0;n<u.instances.length;n++)n!=this.select.data("editable-selecter")&&u.instances[n].hideList()},positionElements:function(){this.select.after(this.textControl);this.select.hide();r(document.body).append(this.wrapper.element)},setWidths:function(){var n=this.select.width()+0;this.bg_iframe&&this.bg_iframe.width(n+4)}};r.ui.editableSelectOverlay={overlay:function(n){this.$el=r.ui.editableSelectOverlay.overlay.create(n)}};r.extend(r.ui.editableSelectOverlay.overlay,{self:void 0,instances:[],oldInstances:[],maxZ:4e3,events:r.map("focus,mousedown,keydown,keypress".split(","),function(n){return n+".dialog-overlay"}).join(" "),create:function(n){0===this.instances.length&&r(window).bind("resize.dialog-overlay",r.ui.editableSelectOverlay.overlay.resize);var t=r('<div class="editable-select-options-overlay"><\/div>').appendTo(n.textControl.parent()).css({width:this.width(),height:this.height()});return t.bind("mousedown.dialog-overlay",function(t){var i,r;if(n.editEnd(),i=document.elementFromPoint(t.clientX,t.clientY),null!=i)try{i.dispatchEvent?(r=document.createEvent("MouseEvent"),r.initMouseEvent("click",!0,!0,window,0,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),i.dispatchEvent(r)):i.fireEvent&&i.fireEvent("onclick")}catch(n){}}),this.instances.push(t),t},destroy:function(n){null!=n&&n.remove();0===this.instances.length&&r([document,window]).unbind(".dialog-overlay")},height:function(){return r(document).height()+"px"},width:function(){return r(document).width()+"px"},resize:function(){var n=r([]);r.each(r.ui.editableSelectOverlay.overlay.instances,function(){n=n.add(this)});n.css({width:0,height:0}).css({width:r.ui.editableSelectOverlay.overlay.width(),height:r.ui.editableSelectOverlay.overlay.height()})}});r.extend(r.ui.editableSelectOverlay.overlay.prototype,{destroy:function(){r.ui.editableSelectOverlay.overlay.destroy(this.$el)}});t.EditableSelectStatic=u},function(n,t,i){var r,u,f,e;e=function(n){return n.widget("ui.draggable",n.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this._addClass("ui-draggable");this._setHandleClassName();this._mouseInit()},_setOption:function(n,t){this._super(n,t);"handle"===n&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||n(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=n(this);return n("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=n.ui.safeActiveElement(this.document[0]);n(t.target).closest(i).length||n.ui.safeBlur(i)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),n.ui.ddmanager&&(n.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===n(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),n.ui.ddmanager&&n.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(n){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:n.pageX-this.offset.left,top:n.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var r=this._uiHash();if(!1===this._trigger("drag",t,r))return this._mouseUp(new n.Event("mouseup",t)),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var r=this,i=!1;return n.ui.ddmanager&&!this.options.dropBehaviour&&(i=n.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||n.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==r._trigger("stop",t)&&r._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),n.ui.ddmanager&&n.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),n.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new n.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!n(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var r=this.options,u=n.isFunction(r.helper),i=u?n(r.helper.apply(this.element[0],[t])):"clone"===r.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===r.appendTo?this.element[0].parentNode:r.appendTo),u&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(n){return/(html|body)/i.test(n.tagName)||n===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var n=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:n.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f,t,r,i=this.options,u=this.document[0];this.relativeContainer=null;i.containment?"window"!==i.containment?"document"!==i.containment?i.containment.constructor!==Array?("parent"===i.containment&&(i.containment=this.helper[0].parentNode),(r=(t=n(i.containment))[0])&&(f=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(f?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t)):this.containment=i.containment:this.containment=[0,0,n(u).width()-this.helperProportions.width-this.margins.left,(n(u).height()||u.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,n(window).scrollLeft()+n(window).width()-this.helperProportions.width-this.margins.left,n(window).scrollTop()+(n(window).height()||u.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(n,t){t||(t=this.position);var i="absolute"===n?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*i}},_generatePosition:function(n,t){var i,s,u,f,r=this.options,h=this._isRootNode(this.scrollParent[0]),e=n.pageX,o=n.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,n.pageX-this.offset.click.left<i[0]&&(e=i[0]+this.offset.click.left),n.pageY-this.offset.click.top<i[1]&&(o=i[1]+this.offset.click.top),n.pageX-this.offset.click.left>i[2]&&(e=i[2]+this.offset.click.left),n.pageY-this.offset.click.top>i[3]&&(o=i[3]+this.offset.click.top)),r.grid&&(u=r.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,o=i?u-this.offset.click.top>=i[1]||u-this.offset.click.top>i[3]?u:u-this.offset.click.top>=i[1]?u-r.grid[1]:u+r.grid[1]:u,f=r.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,e=i?f-this.offset.click.left>=i[0]||f-this.offset.click.left>i[2]?f:f-this.offset.click.left>=i[0]?f-r.grid[0]:f+r.grid[0]:f),"y"===r.axis&&(e=this.originalPageX),"x"===r.axis&&(o=this.originalPageY)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_trigger:function(t,i,r){return r=r||this._uiHash(),n.ui.plugin.call(this,t,[i,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),n.Widget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),n.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,r){var u=n.extend({},i,{item:r.element});r.sortables=[];n(r.options.connectToSortable).each(function(){var i=n(this).sortable("instance");i&&!i.options.disabled&&(r.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,u))})},stop:function(t,i,r){var u=n.extend({},i,{item:r.element});r.cancelHelperRemoval=!1;n.each(r.sortables,function(){this.isOver?(this.isOver=0,r.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(t),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",t,u))})},drag:function(t,i,r){n.each(r.sortables,function(){var f=!1,u=this;u.positionAbs=r.positionAbs;u.helperProportions=r.helperProportions;u.offset.click=r.offset.click;u._intersectsWith(u.containerCache)&&(f=!0,n.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==u&&this._intersectsWith(this.containerCache)&&n.contains(u.element[0],this.element[0])&&(f=!1),f}));f?(u.isOver||(u.isOver=1,r._parent=i.helper.parent(),u.currentItem=i.helper.appendTo(u.element).data("ui-sortable-item",!0),u.options._helper=u.options.helper,u.options.helper=function(){return i.helper[0]},t.target=u.currentItem[0],u._mouseCapture(t,!0),u._mouseStart(t,!0,!0),u.offset.click.top=r.offset.click.top,u.offset.click.left=r.offset.click.left,u.offset.parent.left-=r.offset.parent.left-u.offset.parent.left,u.offset.parent.top-=r.offset.parent.top-u.offset.parent.top,r._trigger("toSortable",t),r.dropped=u.element,n.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,u.fromOutside=r),u.currentItem&&(u._mouseDrag(t),i.position=u.position)):u.isOver&&(u.isOver=0,u.cancelHelperRemoval=!0,u.options._revert=u.options.revert,u.options.revert=!1,u._trigger("out",t,u._uiHash(u)),u._mouseStop(t,!0),u.options.revert=u.options._revert,u.options.helper=u.options._helper,u.placeholder&&u.placeholder.remove(),i.helper.appendTo(r._parent),r._refreshOffsets(t),i.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,n.each(r.sortables,function(){this.refreshPositions()}))})}}),n.ui.plugin.add("draggable","cursor",{start:function(t,i,r){var u=n("body"),f=r.options;u.css("cursor")&&(f._cursor=u.css("cursor"));u.css("cursor",f.cursor)},stop:function(t,i,r){var u=r.options;u._cursor&&n("body").css("cursor",u._cursor)}}),n.ui.plugin.add("draggable","opacity",{start:function(t,i,r){var u=n(i.helper),f=r.options;u.css("opacity")&&(f._opacity=u.css("opacity"));u.css("opacity",f.opacity)},stop:function(t,i,r){var u=r.options;u._opacity&&n(i.helper).css("opacity",u._opacity)}}),n.ui.plugin.add("draggable","scroll",{start:function(n,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1));i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,r){var u=r.options,o=!1,e=r.scrollParentNotHidden[0],f=r.document[0];e!==f&&"HTML"!==e.tagName?(u.axis&&"x"===u.axis||(r.overflowOffset.top+e.offsetHeight-t.pageY<u.scrollSensitivity?e.scrollTop=o=e.scrollTop+u.scrollSpeed:t.pageY-r.overflowOffset.top<u.scrollSensitivity&&(e.scrollTop=o=e.scrollTop-u.scrollSpeed)),u.axis&&"y"===u.axis||(r.overflowOffset.left+e.offsetWidth-t.pageX<u.scrollSensitivity?e.scrollLeft=o=e.scrollLeft+u.scrollSpeed:t.pageX-r.overflowOffset.left<u.scrollSensitivity&&(e.scrollLeft=o=e.scrollLeft-u.scrollSpeed))):(u.axis&&"x"===u.axis||(t.pageY-n(f).scrollTop()<u.scrollSensitivity?o=n(f).scrollTop(n(f).scrollTop()-u.scrollSpeed):n(window).height()-(t.pageY-n(f).scrollTop())<u.scrollSensitivity&&(o=n(f).scrollTop(n(f).scrollTop()+u.scrollSpeed))),u.axis&&"y"===u.axis||(t.pageX-n(f).scrollLeft()<u.scrollSensitivity?o=n(f).scrollLeft(n(f).scrollLeft()-u.scrollSpeed):n(window).width()-(t.pageX-n(f).scrollLeft())<u.scrollSensitivity&&(o=n(f).scrollLeft(n(f).scrollLeft()+u.scrollSpeed))));!1!==o&&n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(r,t)}}),n.ui.plugin.add("draggable","snap",{start:function(t,i,r){var u=r.options;r.snapElements=[];n(u.snap.constructor!==String?u.snap.items||":data(ui-draggable)":u.snap).each(function(){var t=n(this),i=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,r){for(var e,o,s,h,c,l,a,v,w,b=r.options,f=b.snapTolerance,y=i.offset.left,k=y+r.helperProportions.width,p=i.offset.top,d=p+r.helperProportions.height,u=r.snapElements.length-1;u>=0;u--)l=(c=r.snapElements[u].left-r.margins.left)+r.snapElements[u].width,v=(a=r.snapElements[u].top-r.margins.top)+r.snapElements[u].height,k<c-f||y>l+f||d<a-f||p>v+f||!n.contains(r.snapElements[u].item.ownerDocument,r.snapElements[u].item)?(r.snapElements[u].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item})),r.snapElements[u].snapping=!1):("inner"!==b.snapMode&&(e=Math.abs(a-d)<=f,o=Math.abs(v-p)<=f,s=Math.abs(c-k)<=f,h=Math.abs(l-y)<=f,e&&(i.position.top=r._convertPositionTo("relative",{top:a-r.helperProportions.height,left:0}).top),o&&(i.position.top=r._convertPositionTo("relative",{top:v,left:0}).top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:l}).left)),w=e||o||s||h,"outer"!==b.snapMode&&(e=Math.abs(a-p)<=f,o=Math.abs(v-d)<=f,s=Math.abs(c-y)<=f,h=Math.abs(l-k)<=f,e&&(i.position.top=r._convertPositionTo("relative",{top:a,left:0}).top),o&&(i.position.top=r._convertPositionTo("relative",{top:v-r.helperProportions.height,left:0}).top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c}).left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:l-r.helperProportions.width}).left)),!r.snapElements[u].snapping&&(e||o||s||h||w)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item})),r.snapElements[u].snapping=e||o||s||h||w)}}),n.ui.plugin.add("draggable","stack",{start:function(t,i,r){var f,e=r.options,u=n.makeArray(n(e.stack)).sort(function(t,i){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(i).css("zIndex"),10)||0)});u.length&&(f=parseInt(n(u[0]).css("zIndex"),10)||0,n(u).each(function(t){n(this).css("zIndex",f+t)}),this.css("zIndex",f+u.length))}}),n.ui.plugin.add("draggable","zIndex",{start:function(t,i,r){var u=n(i.helper),f=r.options;u.css("zIndex")&&(f._zIndex=u.css("zIndex"));u.css("zIndex",f.zIndex)},stop:function(t,i,r){var u=r.options;u._zIndex&&n(i.helper).css("zIndex",u._zIndex)}}),n.ui.draggable};u=[i(0),i(12),i(21),i(22),i(43),i(44),i(23),i(3),i(6)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return n.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())};u=[i(0),i(3)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])}})};u=[i(0),i(3)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return n.ui.plugin={add:function(t,i,r){var u,f=n.ui[t].prototype;for(u in r)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([i,r[u]])},call:function(n,t,i,r){var u,f=n.plugins[t];if(f&&(r||n.element[0].parentNode&&11!==n.element[0].parentNode.nodeType))for(u=0;u<f.length;u++)n.options[f[u][0]]&&f[u][1].apply(n.element,i)}}};u=[i(0),i(3)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return n.fn.scrollParent=function(t){var i=this.css("position"),u="absolute"===i,f=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=n(this);return(!u||"static"!==t.css("position"))&&f.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:n(this[0].ownerDocument||document)}};u=[i(0),i(3)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return n.ui.escapeSelector=(t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(n){return n.replace(t,"\\$1")});var t};u=[i(0),i(3)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){function u(n){return n&&n.__esModule?n:{"default":n}}var r;Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=i(1),s=i(2),f=u(i(58)),h=u(i(59)),c=u(i(5));r=function(){function n(t,i){var r=this;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this._app=i;this.LinkExpression="";this.IsDeleted=!1;this.IsNew=1==t.IsNew;this.Left=new f.default(i);this.Right=new f.default(i);this.elementId=t.ElementId;this.id=o.Utils.getUID();this.thin=1.5;this.thinBg=15;this._similarLinks=[];this.dto(t);this._createGraph();Object.defineProperty(this,"color",{get:function(){return r.graphics._renderer.color}})}return e(n,[{key:"_createGraph",value:function(){var n=this,t;null==this.graphics&&(t={leftType:this.Left.Type,rightType:this.Right.Type,thin:this.thin,thinBg:this.thinBg,style:this.style,displayKeyCardinality:this.displayKeyCardinality,leftCardinality:this.Left.Cardinality,rightCardinality:this.Right.Cardinality,onClick:function(t){return n._onLineClick(t)},centerOnClick:function(t){return n._onCenterClick(t)},similarLinks:this._similarLinks,showSwitchLinkButton:0!=this._similarLinks.length,onSwitchClick:function(t){return n._switch(t)}},this.graphics=new h.default(this._app,t),this.graphics.line.link=this,this.graphics.line._bg.link=this)}},{key:"_switch",value:function(t){this._app.CanvasComponent.emit(n.Events.CanvasLinkOnSwitch,this,t)}},{key:"draw",value:function(n){this._app.CanvasComponent.isVisible()&&this.graphics.update(this.Left,this.Right,n)}},{key:"setFocused",value:function(n){this.draw(n?3.5:1.5);this.graphics.toggleSwitchButton(n)}},{key:"_menuCallback",value:function(t){var i=c.default.linkKeys;switch(t){case i.allFrom:if(!this.checkChangingAllowed())return;this.Left.Type=this._app.MetaData.JoinType.toggle(this.Left.Type);break;case i.allTo:if(!this.checkChangingAllowed())return;this.Right.Type=this._app.MetaData.JoinType.toggle(this.Right.Type);break;case i.delete:return this.remove();case i.properties:return this._app.CanvasComponent.selectLink(this),this._app.CanvasComponent.propertiesFormsContainer.show()}this._app.CanvasComponent.emit(n.Events.CanvasLinkOnChanged,this);this._app.CanvasComponent.redraw()}},{key:"setLeftType",value:function(t){this.checkChangingAllowed()&&(this.Left.Type=t,this._app.CanvasComponent.emit(n.Events.CanvasLinkOnChanged,this))}},{key:"setRightType",value:function(t){this.checkChangingAllowed()&&(this.Right.Type=t,this._app.CanvasComponent.emit(n.Events.CanvasLinkOnChanged,this))}},{key:"_getDto",value:function(){var n=new s.Dto.DataSourceLinkDto;return n.Left=this.Left.dto(),n.Right=this.Right.dto(),n.IsDeleted=this.IsDeleted,n.IsNew=this.IsNew,n.LinkExpression=this.LinkExpression,n}},{key:"_setDto",value:function(n){this.Left.dto(n.Left);this.Right.dto(n.Right);this.IsDeleted=n.IsDeleted;this.IsNew&&!n.IsNew&&this._app.emit(this._app.Events.LinkCreated,this);this.IsNew=n.IsNew;this.LinkExpression=n.LinkExpression;this._similarLinks=n.SimilarLinks||[]}},{key:"dto",value:function(n){if(void 0===n)return this._getDto();this._setDto(n)}},{key:"UpdateObjects",value:function(){this.Left.UpdateObjects();this.Right.UpdateObjects()}},{key:"remove",value:function(){var t={abort:!1};this._app.CanvasComponent.emit(n.Events.CanvasLinkOnDeleting,this,t);t.abort||(this.IsDeleted=!0,this._app.CanvasComponent.emit(n.Events.CanvasLinkOnChanged,this),this._app.CanvasComponent.redraw(),this.dispose())}},{key:"checkChangingAllowed",value:function(){var t={abort:!1};return this._app.CanvasComponent.emit(n.Events.CanvasLinkOnChanging,this,t),!t.abort}},{key:"dispose",value:function(){this.graphics.dispose()}}]),n}();t.default=r;r.Events={CanvasLinkOnChanged:"CanvasLinkOnChanged",CanvasLinkOnChanging:"CanvasLinkOnChanging",CanvasLinkOnDeleting:"CanvasLinkOnDeleting",CanvasLinkOnClick:"CanvasLinkOnClick",CanvasLinkOnSwitch:"CanvasLinkOnSwitch"};r.prototype.Events=r.Events},function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var u,s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),h=i(0),c=(u=h)&&u.__esModule?u:{"default":u},r=i(1),f=i(2),e=i(70),l=i(4),o=function(){function n(t,i){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);var u=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return u.Events=n.Events,u._parent=i,u._app=i._app,u.cellTypes=u._app.MetaData.gridColumnsVisualDesciption,u._cellFactory=new e.CellFactory(u._app),u._cellContainer=new e.CellContainer,u._isAsteriskPlaceholder=!1,u.deleted=!1,u.ExpressionSubQueries=[],u.ConditionSubQueries=[],u.TempId=r.getTempId(),u.element=u._createRowControl(t),u._fillDefaultValues(),u._importDto(t),u.updateRowControl(),u}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,l),s(n,[{key:"isEmpty",value:function(){return this._isEmpty}},{key:"isAsteriskPlaceholder",value:function(){return this._isAsteriskPlaceholder}},{key:"toggleAsteriskPlaceholder",value:function(n){this._isAsteriskPlaceholder!==n&&(this._isAsteriskPlaceholder=n,this.getExpressionCell().toggleAsteriskPlaceholder(n),this.reCreateEditBlock(this.cellTypes.aggregate))}},{key:"isAsterisk",value:function(){var n=this.getExpression();return!r.isEmpty(n)&&(n.indexOf(".*")>=0||"*"==n)}},{key:"delete",value:function(){this.isEmpty()||this.emit(n.Events.GridRowOnRemove,this)}},{key:"check",value:function(n,t){return this._setCellValue(this.cellTypes.visible,n,t)}},{key:"setExpression",value:function(n,t){return this._setCellValue(this.cellTypes.expression,n,t)}},{key:"setAlias",value:function(n,t){return this._setCellValue(this.cellTypes.alias,n,t)}},{key:"setSorting",value:function(n,t){return this._setCellValue(this.cellTypes.sorting,n||f.Enum.ItemSortType.None,t)}},{key:"setAggregate",value:function(n,t){if(-1===this._app.options.SyntaxProviderOptions.AggregateList.indexOf(n))throw new Error("unexpected aggregate function");return this._setCellValue(this.cellTypes.aggregate,n,t)}},{key:"setGrouping",value:function(n,t){return this._setCellValue(this.cellTypes.grouping,!!n,t)}},{key:"setCondition",value:function(n,t){return this._setCellValue(this.cellTypes.condition,n,t)}},{key:"_setCellValue",value:function(n,t,i){var r=this.getCell(n);return r.value()!==t&&(r.setValue(t),this._onCellChanged({key:n,newValue:t,callback:i}),!0)}},{key:"isChecked",value:function(){return!!this.isEmpty()||this.getValue(this.cellTypes.visible)}},{key:"getExpression",value:function(){return this.getValue(this.cellTypes.expression)}},{key:"getAlias",value:function(){return this.getValue(this.cellTypes.alias)}},{key:"getSorting",value:function(){return this.getValue(this.cellTypes.sorting)}},{key:"getSortingOrder",value:function(){return this.getValue(this.cellTypes.sortingOrder)}},{key:"getAggregate",value:function(){return this.getValue(this.cellTypes.aggregate)}},{key:"getGrouping",value:function(){return this.getValue(this.cellTypes.grouping)}},{key:"getGroupingCriterion",value:function(){return this.getValue(this.cellTypes.groupingCriterion)}},{key:"getCondition",value:function(){return this.getValue(this.cellTypes.condition)}},{key:"getConditionCell",value:function(){return this.getCell(this.cellTypes.condition)}},{key:"getExpressionCell",value:function(){return this.getCell(this.cellTypes.expression)}},{key:"remove",value:function(){this.deleted=!0;this.element.remove()}},{key:"getValue",value:function(n){return this.getCell(n).value()}},{key:"getCell",value:function(n){return this._cellContainer.getCell(n)}},{key:"_addCell",value:function(n,t){this._cellContainer.addCell(n,t)}},{key:"hasAggregateOrCriteria",value:function(){return!r.isEmpty(this.getAggregate())||!r.isEmpty(this.getCondition())}},{key:"setValue",value:function(n,t){if(void 0===t&&(t=null),t==this.getCell(n).value())return!1;switch(n){case this.cellTypes.sorting:this.setValue(this.cellTypes.sortingOrder,null);break;case this.cellTypes.sortingOrder:(r.isEmpty(t)||0===t)&&(t="")}return this.getCell(n).value(t),!0}},{key:"_onCellChanged",value:function(t){var i=t.key,o=t.callback,u=t.newValue,f=t.oldValue,r=this.cellTypes;switch(i){case 1:this.emit(n.Events.GridRowChecked,this);break;case 4:this.emit(n.Events.GridRowSortingTypeChanged,this);break;case 5:this.emit(n.Events.GridRowSortingOrderChanged,this);break;default:var s=i===r.expression,h=i===r.aggregate,c=""!==u&&null!=u&&(""===f||null==f),e=this.getExpression();c&&(s||h&&(null==e||""===e))?(this.getCell(r.visible).setValue(!0),this.isAsteriskPlaceholder()&&(this.toggleAsteriskPlaceholder(!1),i===r.aggregate&&this.getExpressionCell().setValue("*")),this.emit(n.Events.GridRowOnAdded,this),this.getExpressionCell().setValue(null),this.getCell(this.cellTypes.aggregate).setValue(null)):this.emit(n.Events.GridRowOnChanged,{key:i,newValue:u,oldValue:f,row:this,afterCustomEdit:t.afterCustomEdit,callback:o})}}},{key:"_createRowControl",value:function(n){var t=c.default('<div class="ui-qb-grid-row" />').uiHoverable(this._app._style.hover);return this._isEmpty=null==n,this._isEmpty?(this._createCellsForEmpty(t),t.addClass("ui-qb-grid-row--empty")):this._createCells(t),t.data("object",this),t.data("me",this),t}},{key:"_createCells",value:function(n){this._createCell(n,this._cellFactory.create.bind(this._cellFactory))}},{key:"_createCellsForEmpty",value:function(n){this._createCell(n,this._cellFactory.createEmpty.bind(this._cellFactory))}},{key:"_createCell",value:function(n,t){var i=this,r=this._app.MetaData.gridColumnsVisualDesciption,u=[];r.each(function(f){var o=i._parent.doubledCellDescriptions.find(function(n){return n.main==f||n.secondary==f}),s=null!=o,h=s&&o.main==f,c=s&&o.secondary==f?u.find(function(n){return n.secondary==f}).mainCell.element:void 0,e=t(f,i,c);h&&(e.element.addClass("ui-qb-grid-row-cell-doubled"),u.push({secondary:o.secondary,mainCell:e}));e.setTabHandler(i.onTabPressed.bind(i));n.append(e.element);e.on(e.Events.GridRowCellOnChanged,i._onCellChanged.bind(i));f===r.visible&&e.on(e.Events.GridRowDragCellClicked,i._dragClickHandler.bind(i));i._addCell(f,e)},this._parent)}},{key:"onTabPressed",value:function(n,t,i){var r=this._getNextCell(this._cellContainer,t,i);setTimeout(function(){return r._cellEditStart()},1)}},{key:"_getNextCell",value:function(n,t,i){var f=n.getKeys().length,u=this._convertKey(t._key)+(i?-1:1),r=null;return(r=u<=0?(n=this._getNotEmptyRowByOffset(-1)._cellContainer).getCell(f):u>f?(n=this._getNotEmptyRowByOffset(1)._cellContainer).getCell(1):n.getCell(u))._isEditable()&&r.element.is(":visible")?r:this._getNextCell(n,r,i)}},{key:"_getNotEmptyRowByOffset",value:function(n){if("number"!=typeof n||0===n)return this;var t=this._parent.rows,r=this.mod(this.Index+n,t.length-1),i=t.find(function(n){return n.Index===r});return i.isEmpty()?this._getNotEmptyRowByOffset(n+(n<0?-1:1)):i}},{key:"mod",value:function(n,t){return(n%t+t)%t}},{key:"_convertKey",value:function(n){if(n>10)return n;var t=this._app.MetaData;return t.gridColumnsVisualDesciption[t.FieldParamType.getKeyName(n)]}},{key:"updateRowControl",value:function(n){this._iterateThrowCells(n,"update")}},{key:"reCreateEditBlock",value:function(n){this._iterateThrowCells(n,"_reCreateEditBlock")}},{key:"_iterateThrowCells",value:function(n,t){for(var r,u,f=this.getInternalKey(n),e=this._cellContainer.getKeys(),i=0;i<e.length;i++)r=e[i],u=this.getCell(r),null!=f&&f!=r||u[t].call(u)}},{key:"getInternalKey",value:function(n){if(n>10)return n;var t=this._app.MetaData;return t.FieldParamType[t.gridColumnsVisualDesciption.getKeyName(n)]}},{key:"_fillDefaultValues",value:function(){var n=this.cellTypes;this.setValue(n.groupingCriterion,this._app.MetaData.SQL.GroupingCriterion.forValues)}},{key:"equal",value:function(n){return this.elementId===n}},{key:"equalSimilar",value:function(n,t,i){return this.equal(n,t,i,!0)}},{key:"dto",value:function(n){return void 0===n?this._exportDto():this._importDto(n)}},{key:"update",value:function(n){var t=this._importDto(n);return t&&this.updateRowControl(),t}},{key:"revertDto",value:function(){this._importDto(this._oldDto);this.updateRowControl()}},{key:"_importDto",value:function(n){var t,i,u,f,e,o,s;if(this._oldDto=n,t=!1,r.isEmpty(n))return t;for(i=this.cellTypes,t=this.setValue(i.expression,n.Expression)||t,t=this.setValue(i.aggregate,n.Aggregate)||t,t=this.setValue(i.alias,n.Alias)||t,t=this.setValue(i.grouping,n.Grouping)||t,t=this.setValue(i.groupingCriterion,n.ConditionType)||t,t=this.setValue(i.sorting,n.SortType)||t,t=this.setValue(i.sortingOrder,n.SortOrder)||t,u=0;u<this._parent.orColumnCount+1;u++)t=this.setValue(i.condition+u,n.Criteria[u])||t;return this.deleted!==n.IsDeleted&&(this.deleted=n.IsDeleted,t=!0),this.Index!==n.Index&&(this.Index=n.Index,t=!0),f=-1,e=-1,n.ExpressionSubQueries&&(e=n.ExpressionSubQueries.length),this.ExpressionSubQueries&&(f=this.ExpressionSubQueries.length),f!==e&&(t=!0),this.ExpressionSubQueries=n.ExpressionSubQueries,o=-1,s=-1,n.ConditionSubQueries&&(s=n.ConditionSubQueries.length),this.ConditionSubQueries&&(o=this.ConditionSubQueries.length),o!==s&&(t=!0),this.ConditionSubQueries=n.ConditionSubQueries,this.getConditionCell().updateGoToSubQueryButton(this.ConditionSubQueries),t=this.setValue(i.visible,n.Select&&!this.isEmpty())||t,this.elementId=n.ElementId,t}},{key:"_exportDto",value:function(){var n=new f.Dto.GridRowDto,t;for(n.Select=this.isChecked(),n.Expression=this.getExpression(),n.Aggregate=this.getAggregate(),n.Alias=this.getAlias(),n.Grouping=this.getGrouping(),n.ConditionType=this.getGroupingCriterion(),n.SortType=this.getSorting(),n.SortOrder=this.getSortingOrder(),n.Criteria[0]=this.getCondition(),n.Index=null!=this.Index?this.Index:this._parent.rows.length,null!=this.newIndex&&(n.NewIndex=this.newIndex,delete this.newIndex),t=0;t<this._parent.orColumnCount;t++)n.Criteria[1+t]=this.getValue(this.cellTypes.conditionOr1+t);return n.IsDeleted=this.deleted,n.TempId=this.TempId,this._oldDto&&(n.FormattedExpression=this._oldDto.FormattedExpression),n}},{key:"_dragClickHandler",value:function(n){this.mark(n.ctrlKey)}},{key:"_toggleGroupCretirionCell",value:function(n){this.getCell(this.cellTypes.groupingCriterion).element.css("display",n?"":"none")}},{key:"mark",value:function(t,i){this.emit(n.Events.BeforeMarkRow,this,t);this.marked=!!i||!this.marked;this.marked?this.element.addClass("ui-qb-grid-row--mark"):this.element.removeClass("ui-qb-grid-row--mark");this.emit(n.Events.AfterMarkRow,this)}},{key:"clearMark",value:function(){this.marked=!1;this.element.removeClass("ui-qb-grid-row--mark")}},{key:"cells",get:function(){return this._cellContainer.getCells()}}]),n}();o.Events={GridRowOnChanged:"onGridRowCellChanged",GridRowOnAdded:"onGridRowOnAdded",GridRowOnRemove:"GridRowOnRemove",GridRowChecked:"GridRowChecked",GridRowSortingTypeChanged:"GridRowSortingTypeChanged",GridRowSortingOrderChanged:"GridRowSortingOrderChanged",BeforeCustomEditCell:"BeforeCustomEditCell",BeforeMarkRow:"onBeforeMarkRow",AfterMarkRow:"onAfterMarkRow"};t.default=o},function(n,t,i){function f(n){return n&&n.__esModule?n:{"default":n}}var o,e;Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=f(i(0)),h=f(i(77)),c=f(i(78)),l=f(i(79)),u=f(i(7)),a=i(1);o=i(4);e=function(){function n(t,i){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);var u=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return u._app=i,u.element=r.default(t),u.subqueryPanel=r.default('<div class="'+i._style.header+" "+i._style.cornerAll+' qb-ui-canvas-navbar-subquery-panel">'),u.element.append(u.subqueryPanel),u._createTreeStructure(),u._createBreadcrumbs(),u._createUnionPanel(),u._createTreeButton(),u._createScrollButtons(),u._createHidePanelButton(),u._initEvents(),u}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,o),s(n,[{key:"updateQueryStructure",value:function(n){var t=this;this._buildTree(n);this._updateBreadcrumb(n);this._updateCtes(n.ContextItems);setTimeout(function(){return t._updateScrollerVisibility()},4)}},{key:"updateUnions",value:function(n){this.unionPanel.updateUnions(n)}},{key:"_updateCtes",value:function(n){this.unionPanel.updateCtes(n)}},{key:"_updateBreadcrumb",value:function(n){this.breadcrumbs.build(n)}},{key:"_buildTree",value:function(n){this.treeStructure.build(n)}},{key:"_updateScrollerVisibility",value:function(){this.breadcrumbs.itemsContainer[0].scrollHeight>this.element.height()?this._scrollButtons.show():this._scrollButtons.hide()}},{key:"_createTreeStructure",value:function(){this.treeStructure=new l.default(this._app);this.subqueryPanel.append(this.treeStructure.element)}},{key:"_createBreadcrumbs",value:function(){this.breadcrumbs=new h.default(this._app);this.subqueryPanel.append(this.breadcrumbs.element)}},{key:"_createUnionPanel",value:function(){this.unionPanel=new c.default(this._app);this.element.append(this.unionPanel.parentElement)}},{key:"_createTreeButton",value:function(){this.showTreeButton=r.default('<span class="subquery-tree">'+u.default.subQueryTree+"<span>");this.subqueryPanel.prepend(this.showTreeButton)}},{key:"_createScrollButtons",value:function(){var n=this,t,i;this._scrollButtons=r.default('<span class="subqueries-scroller" />');t=r.default("<span><\/span>").append(u.default.collapsed).click(function(){return n.breadcrumbs.scrollUp()});i=r.default("<span><\/span>").append(u.default.expanded).click(function(){return n.breadcrumbs.scrollDown()});this._scrollButtons.append(t).append(i);this.subqueryPanel.append(this._scrollButtons)}},{key:"_createHidePanelButton",value:function(){a.isTouchable&&(this.hidePanelButton=r.default('<span class="hide-panel '+this._app._style.header+'">'+u.default.hidePanel+"<\/span>"),this.unionPanel.hide(),this.element.append(this.hidePanelButton))}},{key:"_toggleUnionPanel",value:function(){this.unionPanel.isVisible()?this._hideUnionPanel():this._showUnionPanel()}},{key:"_showUnionPanel",value:function(){this.unionPanel.show();this.hidePanelButton&&this.hidePanelButton.html(u.default.showPanel)}},{key:"_hideUnionPanel",value:function(){this.unionPanel.hide();this.hidePanelButton&&this.hidePanelButton.html(u.default.hidePanel)}},{key:"enableUnions",value:function(n){this.unionPanel.enableUnions(n)}},{key:"enableCte",value:function(n){this.unionPanel.enableCte(n)}},{key:"dispose",value:function(){this.element.empty()}},{key:"_initEvents",value:function(){var t=this;this.breadcrumbs.onClick=function(t){this.emit(n.Events.BreadCrumbSelectNode,t)}.bind(this);this.treeStructure.onClick=function(t){this.emit(n.Events.TreeStructureSelectNode,t)}.bind(this);this.showTreeButton.click(this.treeStructure.show.bind(this.treeStructure)).uiHoverable(this._app._style.hover);this.hidePanelButton&&this.hidePanelButton.click(this._toggleUnionPanel.bind(this)).uiHoverable(this._app._style.hover);this.element.mouseleave(function(){this.treeStructure.hide()}.bind(this));this.unionPanel.on(n.Events.NavBarAction,function(t){this.emit(n.Events.NavBarAction,t)}.bind(this));window.addEventListener("resize",function(){t._updateScrollerVisibility()})}},{key:"show",value:function(){this.element.show()}},{key:"hide",value:function(){this.element.hide()}}]),n}();t.default=e;e.Events={BreadCrumbSelectNode:"BreadCrumbSelectNode",TreeStructureSelectNode:"TreeStructureSelectNode",NavBarAction:"NavBarAction"};e.prototype.Events=e.Events},function(n,t,i){var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.startApplication=t.Web=void 0;r=i(29);window.navigator.cookieEnabled||console.warn("%c Please enable cookies in your browser.","color: red");u=window.AQB?window.AQB.Web:{};u.dispose&&(f=u.dispose);null==u.CriteriaBuilderContainer&&(Object.defineProperties(u,{CriteriaBuilderContainer:{enumerable:!0,get:function(){return r.CriteriaBuilderContainer}},CriteriaBuilder:{enumerable:!0,get:function(){return r.CriteriaBuilderContainer.first()}},onCriteriaBuilderReady:{enumerable:!0,get:function(){return r.onCriteriaBuilderReady}},dispose:{enumerable:!0,configurable:!0,get:function(){return function(){f&&f();r.dispose();delete window.AQB}}}}),document.addEventListener("DOMContentLoaded",r.startApplication));t.Web=u;t.startApplication=r.startApplication},function(n,t,i){function u(n){return n&&n.__esModule?n:{"default":n}}function o(n,t){return n.getAttribute("SessionID")===t}function s(n){var t=new l.default(n);r.add(t)}Object.defineProperty(t,"__esModule",{value:!0});t.dispose=t.startApplication=t.onCriteriaBuilderReady=t.CriteriaBuilderContainer=void 0;i(30);var h=u(i(14)),c=u(i(5)),l=u(i(31)),a=u(i(16));var r=new h.default,f=a.default(),v=f.onApplicationReady.bind(f),e="qb-ui-criteria-builder",y="."+e;t.CriteriaBuilderContainer=r;t.onCriteriaBuilderReady=v;t.startApplication=function(n){if("string"!=typeof n)!function(){for(var t=document.getElementsByClassName(e),i=t.length,n=0;n<i;n++)s(t[n])}();else{var t=function(n,t,i){var r=document.querySelectorAll(n),s=r.length,e,u,f;if(i){for(e=[],u=0;u<s;u++)o(r[u],t)&&e.push(r[u]);return e}for(f=0;f<s;f++)if(o(r[f],t))return r[f]}(y,n);t&&s(t)}r.foreach(function(n){n.autoLoad&&n.loadColumns();setTimeout(function(){f.onApplicationReadyTrigger(n)},1e3)})};t.dispose=function(){r.foreach(function(n){r.remove(n.SessionID);n.dispose(!1)});c.default.destroy();f.reset()}},function(){},function(n,t,i){function s(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=s(i(0)),e=s(i(32)),u=s(i(5)),o=(i(2),i(11)),c=i(33);i(37);f=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);var i=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return i.element=r.default(t),i._updateMarkup(),i._createProps(),i._createEmptyColumnsError(),i.createButtonMenu(),i.createFieldSelect(),i.createOperationMenu(),i.createJunctionTypeMenu(),i._createClearButtonCallback(),i.autoSubscribe&&i._subscribeToQueryBuilder(),i.isFirstRender=!0,i._render(),i}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,i(4)),h(n,[{key:"_updateMarkup",value:function(){var n=this.element.children('[rel="stylesheet"]');this.element.before(n);e.default.setHandlerPath(this.element.attr("HandlersPath"))}},{key:"_createProps",value:function(){this.SessionID=this.element.attr("SessionID");this.autoLoad=this.element.hasAttr("autoLoad");this.autoSubscribe=this.element.hasAttr("autoSubscribe");this.dateFormat=this.element.attr("dateFormat");this.rootJunctionPrefix="Where";this.junctionPostfix="of the following succeed";this.showPrefixes=!0;this.Columns=[];this.element.hasAttr("JunctionPostfix")&&(this.junctionPostfix=this.element.attr("JunctionPostfix"));this.element.hasAttr("RootJunctionPrefix")&&(this.rootJunctionPrefix=this.element.attr("RootJunctionPrefix"));this.element.hasAttr("ShowPrefixes")&&(this.showPrefixes="true"==this.element.attr("ShowPrefixes"));this.element.hasAttr("AllowCustomLogicalSQLExpressions")&&(this.AllowCustomLogicalSQLExpressions="true"==this.element.attr("AllowCustomLogicalSQLExpressions"));this._rootGroup=new c.RootGroup(this);this.element.append(this._rootGroup.element)}},{key:"importData",value:function(n){this.Columns=n.Columns;this._rootGroup.setDto(n);this._render()}},{key:"clear",value:function(){this._rootGroup.clear();this._fireChanged()}},{key:"createButtonMenu",value:function(){var n=this;u.default.left({selector:".qb-ui-criteria-builder-button",app:this,build:function(t){var i=t.parents(".qb-ui-criteria-builder-block:first").data("item"),r;return null==i?!1:(r=i.getButtonContextMenuItems(),0!=Object.keys(r||{}).length&&{callback:function(t){return n.contextMenuCallback(t,i)},items:r})}})}},{key:"createOperationMenu",value:function(){var n=this;u.default.left({selector:".qb-ui-criteria-builder-link-operation",app:this,build:function(t){var r=t.parents(".qb-ui-criteria-builder-block:first").data("item"),i;return null==r?!1:(i=n.getOperationContextMenuItems(r),null!=i&&0!=Object.keys(i).length&&{callback:function(t){r.setOperator(t);n._fireChanged()},items:i})}})}},{key:"createJunctionTypeMenu",value:function(){var n=this;u.default.left({selector:".qb-ui-criteria-builder-link-junctionType",app:this,build:function(t){var r=t.parents(".qb-ui-criteria-builder-block:first").data("item"),i;return null==r?!1:(i=n.getJunctionTypeContextMenuItems(),null!=i&&0!=Object.keys(i).length&&{callback:function(t){r.setJunctionType(t);n._fireChanged()},items:i})}})}},{key:"getJunctionTypeContextMenuItems",value:function(){var n={};return r.default.each(o.CriteriaBuilderJunctionItemType,function(t,i){n[t]={name:i.Name,icon:"",data:i}}),n}},{key:"createFieldSelect",value:function(){var n=this;u.default.left({selector:".qb-ui-criteria-builder-link-field-select",app:this,build:function(t){var r=t.parents(".qb-ui-criteria-builder-block:first").data("item"),i;return null==r?!1:(i=n.getFieldsContextMenuItems(),null!=i&&0!=Object.keys(i).length&&{callback:function(t){r.setColumn(i[t].data);n._fireChanged()},items:i})}})}},{key:"getOperationContextMenuItems",value:function(n){var t={};return r.default.each(o.CriteriaBuilderConditionOperator,function(i,r){null!=n.Column&&(0!=r.ValueKinds.length?null!=n.Column&&r.ValueKinds.contains(n.Column.ValueKind)&&(t[i]={name:r.Name,icon:"",data:r}):t[i]={name:r.Name,icon:"",data:r})}),t}},{key:"getFieldsContextMenuItems",value:function(){var n={};return r.default.each(this.Columns,function(t,i){return n[i.ResultName]={name:i.ResultName,icon:"field",data:i}}),n}},{key:"_render",value:function(){this._needToShowEmptyColumnsError()?(this._rootGroup.element.hide(),this._emptyColumnsError.show()):(this._rootGroup.render().show(),this._emptyColumnsError.hide());this.isFirstRender=!1}},{key:"_needToShowEmptyColumnsError",value:function(){return!this.isFirstRender&&!this.AllowCustomLogicalSQLExpressions&&(null==this.Columns||0===this.Columns.length)}},{key:"_createEmptyColumnsError",value:function(){this._emptyColumnsError=r.default("<span>Filtering is not possible because there are no output columns in the query or they can not be determined.<\/span>").hide();this.element.append(this._emptyColumnsError)}},{key:"_createClearButtonCallback",value:function(){var n=this;u.default.left({selector:".qb-ui-criteria-builder-link-clear-items",app:this,build:function(){return{callback:function(){return n.clear()},items:{clear:{name:"Clear all",icon:"clear"}}}}})}},{key:"getDto",value:function(){return this._rootGroup.getDto()}},{key:"loadColumns",value:function(){e.default.loadColumns({SessionID:this.SessionID},function(n){this.importData(n);this._fireSyncFinished()}.bind(this))}},{key:"transformSql",value:function(n){var t=this.getDto();return t.SessionID=this.SessionID,!!this.isValid()&&(e.default.transformSql(t,function(t){this.SQL=t.Value;"function"==typeof n&&n(this.SQL)}.bind(this)),!0)}},{key:"isValid",value:function(){return this._rootGroup.isValid()}},{key:"addCondition",value:function(n){this._rootGroup.addCondition(n)}},{key:"addGeneralCondition",value:function(){this._rootGroup.addGeneralCondition()}},{key:"addGroup",value:function(){this._rootGroup.addGroup()}},{key:"_findOperatorIndexByName",value:function(n){return this._findIndexInEnumByName(o.CriteriaBuilderConditionOperator,n,"Operator not found")}},{key:"_findJunctionIndexByName",value:function(n){return this._findIndexInEnumByName(o.CriteriaBuilderJunctionItemType,n,"Junction not found")}},{key:"_findIndexInEnumByName",value:function(n,t,i){for(var r in n)if(n.hasOwnProperty(r)&&n[r].Name.toLowerCase()===t.toLowerCase())return r;throw i;}},{key:"_fireChanged",value:function(){this.emit(n.Events.CriteriaBuilderChanged,this)}},{key:"_fireSyncFinished",value:function(){this.emit(n.Events.AfterSyncCriteriaBuilder,this)}},{key:"_subscribeToQueryBuilder",value:function(){AQB.Web.onQueryBuilderReady&&AQB.Web.onQueryBuilderReady(function(n){n.SessionID==this.SessionID&&n.on(n.Events.SqlChanged,this.loadColumns.bind(this))}.bind(this))}},{key:"dispose",value:function(n){null!=window.AQB&&AQB.Web.CriteriaBuilderContainer.remove(this.SessionID);this.element.empty();null!=n&&!0!==n||e.default.dispose({SessionID:this.SessionID})}},{key:"contextMenuCallback",value:function(n,t){switch(n){case"move-up":return this.moveUpItem(t);case"move-down":return this.moveDownItem(t);case"delete":return this.removeItem(t);case"clear":return t.clear();case"add-condition-for-column":return t.Group.addCondition(),this._fireChanged();case"add-general-condition":return t.Group.addGeneralCondition(),this._fireChanged();case"add-group-of-conditions":return t.Group.addGroup(),this._fireChanged()}}},{key:"getButtonContextMenuItemsMove",value:function(n){var t={},i=n.Group.getIndex(n),r=n.Group.Items.length;return t["move-up"]={name:"Move up",icon:"move-up",disabled:i<=0},t["move-down"]={name:"Move down",icon:"move-down",disabled:i>=r-1},t.separator="---------",t}},{key:"removeItem",value:function(n){n.clear(!0);n.Group.removeElement(n);this._fireChanged()}},{key:"moveUpItem",value:function(n){var t=n.Group.getIndex(n),i;t<=0||(i=n.Group.getItem(t-1),n.element.insertBefore(i.element),this._fireChanged())}},{key:"moveDownItem",value:function(n){var t=n.Group.getIndex(n);t>=n.Group.Items.length||(n.Group.getItem(t+1).element.insertBefore(n.element),this._fireChanged())}},{key:"Conditions",get:function(){return this._rootGroup.Conditions}},{key:"Groups",get:function(){return this._rootGroup.Groups}}]),n}();f.Events={CriteriaBuilderItemAdded:"CriteriaBuilderItemAdded",CriteriaBuilderChanged:"CriteriaBuilderChanged",AfterSyncCriteriaBuilder:"AfterSyncCriteriaBuilder"};f.prototype.Events=f.Events;r.default.fn.hasAttr||(r.default.fn.hasAttr=function(n){return void 0!==this.attr(n)});Array.prototype.contains||(Array.prototype.contains=function(n){for(var t in this)if(this[t]===n)return!0;return!1});t.default=f},function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r,u=i(0),f=(r=u)&&r.__esModule?r:{"default":r};t.default=function(){function n(n,r,u,e){var o;"string"!=typeof r&&(r=JSON.stringify(r));o={type:"POST",url:t+"/cbactions/"+n,data:r,callback:function(n,t){200===n.StatusCode?"function"==typeof u&&u(n.Content):i(t,n.StatusCode,n.Error)},errorcallback:function(n,t,r){return i(n,t,r,e)}};f.default.ajax({url:o.url,type:o.type,data:o.data,beforeSend:function(n){AQB.Web.beforeSend&&AQB.Web.beforeSend(n)},success:o.callback,error:o.errorcallback})}function i(n,t,i,r){"function"==typeof r&&r(n,t,i);console.error(n,i)}var t=void 0;return{loadColumns:function(t,i){n("getColumns",t,i)},transformSql:function(t,i){n("transformSql",t,i)},getData:function(t,i){n("getData",t,i)},dispose:function(t,i){n("dispose",t,i)},setHandlerPath:function(n){t=n}}}()},function(n,t,i){function f(n){return n&&n.__esModule?n:{"default":n}}function s(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var h;Object.defineProperty(t,"__esModule",{value:!0});t.RootGroup=t.Group=void 0;var e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=f(i(0)),u=i(2),c=i(11),o=f(i(34)),l=f(i(36));h=t.Group=function(){function n(t,i){if(s(this,n),this.Group=i,this.criteriaBuilder=t,this.element=r.default('<div class="qb-ui-criteria-builder-block group">'),this.element.data("item",this),this.JunctionType=u.Enum.JunctionItemType.All,this.Conditions=[],this.Groups=[],null!=i)switch(Number(parent.JunctionType)){case u.Enum.JunctionItemType.All:case u.Enum.JunctionItemType.NotAll:this.JunctionType=u.Enum.JunctionItemType.Any;break;default:this.JunctionType=u.Enum.JunctionItemType.All}}return e(n,[{key:"setDto",value:function(n){var t=this;this.JunctionType=n.JunctionType;this.Conditions=[];this.Groups=[];n.Conditions&&r.default.each(n.Conditions,function(n,i){return t.Conditions.push(t.createConditionFromDto(i))});n.Groups&&r.default.each(n.Groups,function(n,i){return t.Groups.push(t.createGroupFromDto(i))})}},{key:"addCondition",value:function(n){this._addCondition(n||null)}},{key:"addGeneralCondition",value:function(){if(!this.criteriaBuilder.AllowCustomLogicalSQLExpressions)throw"AllowCustomLogicalSQLExpressions is not allowed";this._addCondition()}},{key:"_addCondition",value:function(n){var t=o.default.create(n,this);this.Conditions.push(t);this._plusButton.element.before(t.render())}},{key:"addGroup",value:function(){var t=new n(this.criteriaBuilder,this);t.JunctionType=this._junctionForNewSubGroup();this.Groups.push(t);this._plusButton.element.before(t.render())}},{key:"_junctionForNewSubGroup",value:function(){return 0==this.JunctionType||1==this.JunctionType?2:0}},{key:"appendCondition",value:function(n){this.Conditions.push(n);this.appendElement(n)}},{key:"appendElement",value:function(n){0==n._index?this._hitarea.prepend(n.render()):n.PreviousItem().element.after(n.render())}},{key:"removeElement",value:function(n){this.removeCondition(n);this.removeGroup(n)}},{key:"removeCondition",value:function(n){var t=this.Conditions.indexOf(n);t>-1&&this.Conditions.splice(t,1)}},{key:"removeGroup",value:function(n){var t=this.Groups.indexOf(n);t>-1&&this.Groups.splice(t,1)}},{key:"createConditionFromDto",value:function(n){if(null==n)return t;var t=o.default.create(n.Column,this);return t.setDto(n),t}},{key:"createGroupFromDto",value:function(t){if(null==t)return i;var i=new n(this.criteriaBuilder,this);return i.setDto(t),i}},{key:"getDto",value:function(){return{JunctionType:this.JunctionType,Conditions:this.Conditions.map(function(n){return n.getDto()}),Groups:this.Groups.map(function(n){return n.getDto()})}}},{key:"isValid",value:function(){return this.Conditions.length+this.Groups.length!=0&&this._isValid()}},{key:"_isValid",value:function(){for(var n=0;n<this.Conditions.length;n++)if(!this.Conditions[n].isValid())return!1;for(n=0;n<this.Groups.length;n++)if(!this.Groups[n].isValid())return!1;return!0}},{key:"getButtonContextMenuItems",value:function(){var n=this.criteriaBuilder.getButtonContextMenuItemsMove(this);return n.clear={name:"Clear",icon:"page",disabled:this.Conditions.length+this.Groups.length<=0},n.delete={name:"Delete",icon:"cross"},n}},{key:"getJunctionItemType",value:function(){return c.CriteriaBuilderJunctionItemType[this.JunctionType]}},{key:"render",value:function(){this.element.empty();this.element.data("item",this);this.element.append(r.default('<div class="qb-ui-criteria-builder-button corner"><\/div>'));var n=r.default('<div class="qb-ui-criteria-builder-label">');return n.append(this.Group.getJoinPrefix()),this._updateLabel(n)}},{key:"setJunctionType",value:function(n){this.JunctionType=n;this.render()}},{key:"getJoinPrefix",value:function(){if(!this.criteriaBuilder.showPrefixes)return"";switch(Number(this.JunctionType)){case u.Enum.JunctionItemType.All:case u.Enum.JunctionItemType.NotAll:return r.default('<span class="join-prefix"> and <\/span>');case u.Enum.JunctionItemType.Any:case u.Enum.JunctionItemType.None:return r.default('<span class="join-prefix"> or <\/span>')}}},{key:"clear",value:function(n){r.default.each(this.Conditions,function(n,t){return t.clear()});r.default.each(this.Groups,function(n,t){return t.clear(!0)});this.Conditions=[];this.Groups=[];n&&this.element.remove()}},{key:"getIndex",value:function(n){return this._hitarea.children().index(n.element)}},{key:"getItem",value:function(n){return this._hitarea.children().eq(n).data("item")}},{key:"_createJunctionType",value:function(n,t){n.append(r.default('<span class="qb-ui-criteria-builder-link-junctionType">'+t+"<\/span>"))}},{key:"_createJunctionPostfix",value:function(n){n.append(r.default("<span> "+this.criteriaBuilder.junctionPostfix+"<\/span>"))}},{key:"_createHitArea",value:function(n){var t=this;return this._hitarea=r.default('<div class="qb-ui-criteria-builder-hitarea '+n+'">'),r.default.each(this.Conditions,function(n,i){return t._hitarea.append(i.render())}),r.default.each(this.Groups,function(n,i){return t._hitarea.append(i.render())}),this._plusButton=new l.default(this),this._hitarea.append(this._plusButton.render()),this.element.append(this._hitarea)}},{key:"_updateLabel",value:function(n){var t=this.getJunctionItemType();return this._createJunctionType(n,t.Name),this._createJunctionPostfix(n),this.element.append(n),this._createHitArea(t.CssClass)}},{key:"Items",get:function(){return this.Conditions.concat(this.Groups)}}]),n}();t.RootGroup=function(){function n(t){s(this,n);var i=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,null));return i.element.addClass("root"),i}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,h),e(n,[{key:"render",value:function(){this.element.empty();this.element.data("item",this);var n=r.default('<div id="qb-ui-criteria-builder-label">');return n.append("<span>"+this.criteriaBuilder.rootJunctionPrefix+" <\/span>"),n.prepend(this._createClearButton()),this._updateLabel(n)}},{key:"isValid",value:function(){return this.Conditions.length+this.Groups.length==0||this._isValid()}},{key:"_createClearButton",value:function(){return r.default('<span class="qb-ui-criteria-builder-link-clear-items">')}}]),n}()},function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=i(35);t.default=factory={create:function(n,t){return void 0!==n?new r.Condition(n,t):new r.GeneralCondition(t)}}},function(n,t,i){function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var u;Object.defineProperty(t,"__esModule",{value:!0});t.GeneralCondition=t.Condition=void 0;var e,s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),c=i(0),r=(e=c)&&e.__esModule?e:{"default":e},f=i(2),o=i(11);t.Condition=function(){function n(t,i){h(this,n);this.Group=i;this.Column=t;this.Operator=f.Enum.ConditionOperator.IsEqualTo;this.Type=o.CriteriaBuilderItemType.Column;this.element=r.default('<div class="qb-ui-criteria-builder-block item">')}return s(n,[{key:"getButtonContextMenuItems",value:function(){var n=this.Group.criteriaBuilder.getButtonContextMenuItemsMove(this);return n.delete={name:"Delete",icon:"cross"},n}},{key:"isValid",value:function(){if(null==this.Column)return!1;var n=this.getOperatorObject();if(null!=n)switch(n.ValuesCount){case 2:return!!this.Value1IsValid&&!!this.Value2IsValid;case 1:return!!this.Value1IsValid;case 0:return!0}return!0}},{key:"showEditor",value:function(n,t,i){var r="";2==(t=t||1)?u(this.Value2)||(r=this.Value2):u(this.Value1)||(r=this.Value1);this._createEditor(r,t,i).insertAfter(n).focus()}},{key:"GetValueText",value:function(n,t){if(!u(t))switch(t.ValueKind){case f.Enum.KindOfField.Boolean:return this._isTrueBooleanValue(n)?"True":"False";case f.Enum.KindOfField.Date:return this.convertDateModelToView(n)}return n}},{key:"render",value:function(){var n,t,e=this,i=this.Column,s=o.CriteriaBuilderConditionOperator[this.Operator].Name,h=this.getOperatorObject();switch(this.element.empty(),this.element.data("item",this),this.element.append(r.default('<div class="qb-ui-criteria-builder-button dot">')),this.element.append(this.Group.getJoinPrefix()),u(i)?this.element.append(r.default('<span class="qb-ui-criteria-builder-link-field-select warning">select column<\/span>')):this.element.append(r.default('<span class="qb-ui-criteria-builder-link-field-select">'+i.ResultName+"<\/span>")),this.element.append(r.default('<span class="qb-ui-criteria-builder-link-operation">'+s+"<\/span>")),this.validateValue(),Number(h.ValuesCount)){case 1:u(this.Value1)?n=r.default('<span class="qb-ui-criteria-builder-link-value warning">...<\/span>'):(n=r.default('<span class="qb-ui-criteria-builder-link-value"><\/span>')).text(this.GetValueText(this.Value1,this.Column));n.click(function(){var n=r.default(this);return n.hide(),e.showEditor(n,1,i),!1});this.element.append(n);u(this.Value1)||this.Value1IsValid||(n.addClass("warning"),this.element.append('<span class="invalid-value">Invalid value<\/span>'));break;case 2:u(this.Value1)?n=r.default('<span class="qb-ui-criteria-builder-link-value warning">...<\/span>'):(n=r.default('<span class="qb-ui-criteria-builder-link-value"><\/span>')).text(this.GetValueText(this.Value1,this.Column));this.Value1IsValid||n.addClass("warning");n.click(function(){var n=r.default(this);return n.hide(),e.showEditor(n,1,i),!1});this.element.append(n);this.element.append(r.default("<span> and <\/span>"));u(this.Value2)?t=r.default('<span class="qb-ui-criteria-builder-link-value warning">...<\/span>'):(t=r.default('<span class="qb-ui-criteria-builder-link-value"><\/span>')).text(this.GetValueText(this.Value2,this.Column));this.Value2IsValid||t.addClass("warning");t.click(function(){var n=r.default(this);return n.hide(),e.showEditor(n,2,i),!1});this.element.append(t);(u(this.Value1)||this.Value1IsValid)&&(u(this.Value2)||this.Value2IsValid)||(u(this.Value1)||this.Value1IsValid||n.addClass("warning"),u(this.Value2)||this.Value2IsValid||t.addClass("warning"),this.element.append('<span class="invalid-value">Invalid value<\/span>'))}return u(i)||i.ValueKind!=f.Enum.KindOfField.Date||(u(n)||n.datepicker("hide"),u(t)||t.datepicker("hide")),this.element}},{key:"getOperatorObject",value:function(){return o.CriteriaBuilderConditionOperator[this.Operator]}},{key:"validateValue",value:function(){if(null==this.Column)return this.Value1IsValid=this.Value2IsValid=!0;if(this.Operator==f.Enum.ConditionOperator.IsInList||this.Operator==f.Enum.ConditionOperator.IsNotInList)return!u(this.Value1);switch(this.Column.ValueKind){case f.Enum.KindOfField.Boolean:case f.Enum.KindOfField.Text:case f.Enum.KindOfField.Unknown:this.Value1IsValid=!u(this.Value1);this.Value2IsValid=!u(this.Value2);break;case f.Enum.KindOfField.Numeric:this.Value1IsValid=!u(this.Value1)&&r.default.isNumeric(this.Value1);this.Value2IsValid=!u(this.Value2)&&r.default.isNumeric(this.Value2);break;case f.Enum.KindOfField.Date:this.Value1IsValid="..."!=this.convertDateModelToView(this.Value1);this.Value2IsValid="..."!=this.convertDateModelToView(this.Value2)}}},{key:"setOperator",value:function(n){this.Operator=n;this.render()}},{key:"setColumn",value:function(n){this.Column=n;this.render()}},{key:"getDto",value:function(){return{Type:this.Type,Column:this.Column,Operator:this.Operator,Value1:this.Value1,Value2:this.Value2,Index:this._index}}},{key:"setDto",value:function(n){this.Type=n.Type;this.Column=n.Column;this.Operator=n.Operator;this.Condition=n.Condition;this.JunctionType=n.JunctionType;this.Value1=n.Value1;this.Value2=n.Value2}},{key:"convertDateToModel",value:function(n){return r.default.datepicker.formatDate("dd.mm.yy",n)}},{key:"convertDateModelToView",value:function(n){var i=this.Group.criteriaBuilder.dateFormat,t;try{return t=r.default.datepicker.parseDate("dd.mm.yy",n),r.default.datepicker.formatDate(i,t)}catch(n){return"..."}}},{key:"clear",value:function(){this.element.remove()}},{key:"_createEditor",value:function(n,t,i){var r;return(r=u(i)?this._attachBlur(this._createStringEditor(n),t):i.ValueKind==f.Enum.KindOfField.Boolean?this._attachBlur(this._createBooleanEditor(),t):i.ValueKind==f.Enum.KindOfField.Date?this._createDateEditor(n,t):this._attachBlur(this._createStringEditor(n),t)).keypress(function(n){10!=n.keyCode&&13!=n.keyCode&&27!=n.keyCode||(n.preventDefault(),this.blur())}),r}},{key:"_createBooleanEditor",value:function(){var n=this._isTrueBooleanValue(this.Value1)?"selected":"",t=""==n?"selected":"";return r.default("<select><option "+n+' value="1">True<\/option><option '+t+' value="0">False<\/option><\/select>').select(function(n){return r.default(n.target).blur()}).change(function(n){return r.default(n.target).blur()})}},{key:"_isTrueBooleanValue",value:function(n){return!!u(n)||1==n||"TRUE"==n.toUpperCase()}},{key:"_createDateEditor",value:function(n,t){var i=this,u=r.default("<input />").datepicker({changeMonth:!0,changeYear:!0,yearRange:"1900:2100",dateFormat:this.Group.criteriaBuilder.dateFormat,onSelect:function(){return f(u.datepicker("getDate"))},onClose:function(){return f(u.datepicker("getDate"))}}),f=function(n){if(null!=n){var r=i.convertDateToModel(n);2==t?i.Value2=r:i.Value1=r;i.render();i.Group.criteriaBuilder._fireChanged()}};return n?u.val(this.convertDateModelToView(n)):u.datepicker("setDate",new Date),u}},{key:"_createStringEditor",value:function(n){return r.default('<input value="'+n+'">')}},{key:"_attachBlur",value:function(n,t){var i=this;return n.blur(function(){var r=n.val();2==t?i.Value2=r:i.Value1=r;i.validateValue(r,t);i.render();i.Group.criteriaBuilder._fireChanged()})}}]),n}();t.GeneralCondition=function(){function n(t){h(this,n);this.Group=t;this.Type=o.CriteriaBuilderItemType.General;this.Condition="";this.ConditionIsValid=!1;this.element=r.default('<div class="qb-ui-criteria-builder-block item">')}return s(n,[{key:"getButtonContextMenuItems",value:function(){var n=this.Group.criteriaBuilder.getButtonContextMenuItemsMove(this);return n.delete={name:"Delete",icon:"cross"},n}},{key:"getDto",value:function(){return{Type:this.Type,Condition:this.Condition}}},{key:"setDto",value:function(n){this.Type=n.Type;this.Condition=n.Condition}},{key:"isValid",value:function(){return this.ConditionIsValid}},{key:"validateValue",value:function(){this.ConditionIsValid=!u(this.Condition)}},{key:"showEditor",value:function(n){var t=this,e=this,i="",f;u(this.Condition)||(i=this.Condition);f=r.default('<input value="'+i+'">').keypress(function(n){10!=n.keyCode&&13!=n.keyCode||(n.preventDefault(),this.blur())}).blur(function(){t.Condition=f.val();t.Value1=e.Condition;t.render();t.Group.criteriaBuilder._fireChanged()}).insertAfter(n).focus()}},{key:"render",value:function(){var n,t=this;return this.element.empty(),this.element.data("item",this),this.element.append(r.default('<div class="qb-ui-criteria-builder-button dot"><\/div>')),this.element.append(this.Group.getJoinPrefix()),n=u(this.Condition)?r.default('<span class="qb-ui-criteria-builder-link-value warning">[enter condition]<\/span>'):r.default('<span class="qb-ui-criteria-builder-link-value">'+this.Condition+"<\/span>"),this.validateValue(),this.ConditionIsValid||n.addClass("warning"),n.click(function(){var n=r.default(this);return n.hide(),t.showEditor(n),!1}),this.element.append(n),this.element}},{key:"clear",value:function(){this.element.remove()}}]),n}();u=function(n){return null==n||""===n}},function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r,f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),e=i(0),u=(r=e)&&r.__esModule?r:{"default":r},o=i(2),s=i(11),h=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this.Group=t;this.Type=s.CriteriaBuilderItemType.Plus;this.element=u.default('<div class="qb-ui-criteria-builder-block add">')}return f(n,[{key:"getButtonContextMenuItems",value:function(){var n=o.Dto.Localizer.Strings,t={"add-condition-for-column":{name:n.AddConditionForColumn,icon:"add-condition-for-column"},"add-general-condition":{name:n.AddGeneralCondition,icon:"add-general-condition"},separator:"---------","add-group-of-conditions":{name:n.AddGroupOfConditions,icon:"add-group-of-conditions"}},i=this.Group.criteriaBuilder;return void 0!==i.Columns&&0!==i.Columns.length||delete t["add-condition-for-column"],i.AllowCustomLogicalSQLExpressions||delete t["add-general-condition"],t}},{key:"render",value:function(){return this.element.data("item",this),this.element.empty(),this.element.append(u.default('<div class="qb-ui-criteria-builder-button plus">')),this.element.append(u.default('<span class="qb-ui-criteria-builder-link-field-select">...<\/span>')),this.element}},{key:"setColumn",value:function(n){this.Group.addCondition(n)}}]),n}();t.default=h},function(n,t,i){var r,u,f,e;e=function(n){function r(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._datepickerShowing=!1;this._inDialog=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};n.extend(this._defaults,this.regional[""]);this.regional.en=n.extend(!0,{},this.regional[""]);this.regional["en-US"]=n.extend(!0,{},this.regional.en);this.dpDiv=u(n("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>"))}function u(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",i,function(){n(this).removeClass("ui-state-hover");-1!==this.className.indexOf("ui-datepicker-prev")&&n(this).removeClass("ui-datepicker-prev-hover");-1!==this.className.indexOf("ui-datepicker-next")&&n(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",i,f)}function f(){n.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])||(n(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),n(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&n(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&n(this).addClass("ui-datepicker-next-hover"))}function i(t,i){for(var r in n.extend(t,i),i)null==i[r]&&(t[r]=i[r]);return t}var t;return n.extend(n.ui,{datepicker:{version:"1.12.1"}}),n.extend(r.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(n){return i(this._defaults,n||{}),this},_attachDatepicker:function(t,i){var r,u,f;u="div"===(r=t.nodeName.toLowerCase())||"span"===r;t.id||(this.uuid+=1,t.id="dp"+this.uuid);(f=this._newInst(n(t),u)).settings=n.extend({},i||{});"input"===r?this._connectDatepicker(t,f):u&&this._inlineDatepicker(t,f)},_newInst:function(t,i){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?u(n("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>")):this.dpDiv}},_connectDatepicker:function(t,i){var r=n(t);i.append=n([]);i.trigger=n([]);r.hasClass(this.markerClassName)||(this._attachments(r,i),r.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),n.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var u,r,f,e=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove();e&&(i.append=n("<span class='"+this._appendClass+"'>"+e+"<\/span>"),t[o?"before":"after"](i.append));t.off("focus",this._showDatepicker);i.trigger&&i.trigger.remove();"focus"!==(u=this._get(i,"showOn"))&&"both"!==u||t.on("focus",this._showDatepicker);"button"!==u&&"both"!==u||(r=this._get(i,"buttonText"),f=this._get(i,"buttonImage"),i.trigger=n(this._get(i,"buttonImageOnly")?n("<img/>").addClass(this._triggerClass).attr({src:f,alt:r,title:r}):n("<button type='button'><\/button>").addClass(this._triggerClass).html(f?n("<img/>").attr({src:f,alt:r,title:r}):r)),t[o?"before":"after"](i.trigger),i.trigger.on("click",function(){return n.datepicker._datepickerShowing&&n.datepicker._lastInput===t[0]?n.datepicker._hideDatepicker():n.datepicker._datepickerShowing&&n.datepicker._lastInput!==t[0]?(n.datepicker._hideDatepicker(),n.datepicker._showDatepicker(t[0])):n.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(n){if(this._get(n,"autoSize")&&!n.inline){var r,u,f,t,i=new Date(2009,11,20),e=this._get(n,"dateFormat");e.match(/[DM]/)&&(r=function(n){for(u=0,f=0,t=0;t<n.length;t++)n[t].length>u&&(u=n[t].length,f=t);return f},i.setMonth(r(this._get(n,e.match(/MM/)?"monthNames":"monthNamesShort"))),i.setDate(r(this._get(n,e.match(/DD/)?"dayNames":"dayNamesShort"))+20-i.getDay()));n.input.attr("size",this._formatDate(n,i).length)}},_inlineDatepicker:function(t,i){var r=n(t);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(i.dpDiv),n.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,r,u,f,e){var s,h,c,l,a,o=this._dialogInst;return o||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=n("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),n("body").append(this._dialogInput),(o=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},n.data(this._dialogInput[0],"datepicker",o)),i(o.settings,f||{}),r=r&&r.constructor===Date?this._formatDate(o,r):r,this._dialogInput.val(r),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,this._pos||(h=document.documentElement.clientWidth,c=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,a=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+l,c/2-150+a]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),o.settings.onSelect=u,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),n.blockUI&&n.blockUI(this.dpDiv),n.data(this._dialogInput[0],"datepicker",o),this},_destroyDatepicker:function(i){var r,u=n(i),f=n.data(i,"datepicker");u.hasClass(this.markerClassName)&&(r=i.nodeName.toLowerCase(),n.removeData(i,"datepicker"),"input"===r?(f.append.remove(),f.trigger.remove(),u.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==r&&"span"!==r||u.removeClass(this.markerClassName).empty(),t===f&&(t=null))},_enableDatepicker:function(t){var i,r,u=n(t),f=n.data(t,"datepicker");u.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((r=u.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}))},_disableDatepicker:function(t){var i,r,u=n(t),f=n.data(t,"datepicker");u.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((r=u.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(n){if(!n)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===n)return!0;return!1},_getInst:function(t){try{return n.data(t,"datepicker")}catch(n){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(t,r,u){var e,h,o,s,f=this._getInst(t);if(2===arguments.length&&"string"==typeof r)return"defaults"===r?n.extend({},n.datepicker._defaults):f?"all"===r?n.extend({},f.settings):this._get(f,r):null;e=r||{};"string"==typeof r&&((e={})[r]=u);f&&(this._curInst===f&&this._hideDatepicker(),h=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(f,"min"),s=this._getMinMaxDate(f,"max"),i(f.settings,e),null!==o&&void 0!==e.dateFormat&&void 0===e.minDate&&(f.settings.minDate=this._formatDate(f,o)),null!==s&&void 0!==e.dateFormat&&void 0===e.maxDate&&(f.settings.maxDate=this._formatDate(f,s)),"disabled"in e&&(e.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(n(t),f),this._autoSize(f),this._setDate(f,h),this._updateAlternate(f),this._updateDatepicker(f))},_changeDatepicker:function(n,t,i){this._optionDatepicker(n,t,i)},_refreshDatepicker:function(n){var t=this._getInst(n);t&&this._updateDatepicker(t)},_setDateDatepicker:function(n,t){var i=this._getInst(n);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(n,t){var i=this._getInst(n);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var u,f,e,i=n.datepicker._getInst(t.target),r=!0,o=i.dpDiv.is(".ui-datepicker-rtl");if(i._keyEvent=!0,n.datepicker._datepickerShowing)switch(t.keyCode){case 9:n.datepicker._hideDatepicker();r=!1;break;case 13:return(e=n("td."+n.datepicker._dayOverClass+":not(."+n.datepicker._currentClass+")",i.dpDiv))[0]&&n.datepicker._selectDay(t.target,i.selectedMonth,i.selectedYear,e[0]),(u=n.datepicker._get(i,"onSelect"))?(f=n.datepicker._formatDate(i),u.apply(i.input?i.input[0]:null,[f,i])):n.datepicker._hideDatepicker(),!1;case 27:n.datepicker._hideDatepicker();break;case 33:n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 34:n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&n.datepicker._clearDate(t.target);r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&n.datepicker._gotoToday(t.target);r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?1:-1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,-7,"D");r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?-1:1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,7,"D");r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?n.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,r,u=n.datepicker._getInst(t.target);if(n.datepicker._get(u,"constrainInput"))return i=n.datepicker._possibleChars(n.datepicker._get(u,"dateFormat")),r=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!i||i.indexOf(r)>-1},_doKeyUp:function(t){var i=n.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{n.datepicker.parseDate(n.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,n.datepicker._getFormatConfig(i))&&(n.datepicker._setDateFromField(i),n.datepicker._updateAlternate(i),n.datepicker._updateDatepicker(i))}catch(n){}return!0},_showDatepicker:function(t){var r,s,h,e,u,f,o;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=n("input",t.parentNode)[0]),n.datepicker._isDisabledDatepicker(t)||n.datepicker._lastInput===t)||(r=n.datepicker._getInst(t),n.datepicker._curInst&&n.datepicker._curInst!==r&&(n.datepicker._curInst.dpDiv.stop(!0,!0),r&&n.datepicker._datepickerShowing&&n.datepicker._hideDatepicker(n.datepicker._curInst.input[0])),!1!==(h=(s=n.datepicker._get(r,"beforeShow"))?s.apply(t,[t,r]):{})&&(i(r.settings,h),r.lastVal=null,n.datepicker._lastInput=t,n.datepicker._setDateFromField(r),n.datepicker._inDialog&&(t.value=""),n.datepicker._pos||(n.datepicker._pos=n.datepicker._findPos(t),n.datepicker._pos[1]+=t.offsetHeight),e=!1,n(t).parents().each(function(){return!(e|="fixed"===n(this).css("position"))}),u={left:n.datepicker._pos[0],top:n.datepicker._pos[1]},n.datepicker._pos=null,r.dpDiv.empty(),r.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),n.datepicker._updateDatepicker(r),u=n.datepicker._checkOffset(r,u,e),r.dpDiv.css({position:n.datepicker._inDialog&&n.blockUI?"static":e?"fixed":"absolute",display:"none",left:u.left+"px",top:u.top+"px"}),r.inline||(f=n.datepicker._get(r,"showAnim"),o=n.datepicker._get(r,"duration"),r.dpDiv.css("z-index",function(n){for(var i,t;n.length&&n[0]!==document;){if(("absolute"===(i=n.css("position"))||"relative"===i||"fixed"===i)&&(t=parseInt(n.css("zIndex"),10),!isNaN(t)&&0!==t))return t;n=n.parent()}return 0}(n(t))+1),n.datepicker._datepickerShowing=!0,n.effects&&n.effects.effect[f]?r.dpDiv.show(f,n.datepicker._get(r,"showOptions"),o):r.dpDiv[f||"show"](f?o:null),n.datepicker._shouldFocusInput(r)&&r.input.trigger("focus"),n.datepicker._curInst=r)))},_updateDatepicker:function(i){this.maxRows=4;t=i;i.dpDiv.empty().append(this._generateHTML(i));this._attachHandlers(i);var r,u=this._getNumberOfMonths(i),e=u[1],o=i.dpDiv.find("."+this._dayOverClass+" a");o.length>0&&f.apply(o.get(0));i.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");e>1&&i.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em");i.dpDiv[(1!==u[0]||1!==u[1]?"add":"remove")+"Class"]("ui-datepicker-multi");i.dpDiv[(this._get(i,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");i===n.datepicker._curInst&&n.datepicker._datepickerShowing&&n.datepicker._shouldFocusInput(i)&&i.input.trigger("focus");i.yearshtml&&(r=i.yearshtml,setTimeout(function(){r===i.yearshtml&&i.yearshtml&&i.dpDiv.find("select.ui-datepicker-year:first").replaceWith(i.yearshtml);r=i.yearshtml=null},0))},_shouldFocusInput:function(n){return n.input&&n.input.is(":visible")&&!n.input.is(":disabled")&&!n.input.is(":focus")},_checkOffset:function(t,i,r){var u=t.dpDiv.outerWidth(),f=t.dpDiv.outerHeight(),h=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,e=document.documentElement.clientWidth+(r?0:n(document).scrollLeft()),s=document.documentElement.clientHeight+(r?0:n(document).scrollTop());return i.left-=this._get(t,"isRTL")?u-h:0,i.left-=r&&i.left===t.input.offset().left?n(document).scrollLeft():0,i.top-=r&&i.top===t.input.offset().top+o?n(document).scrollTop():0,i.left-=Math.min(i.left,i.left+u>e&&e>u?Math.abs(i.left+u-e):0),i.top-=Math.min(i.top,i.top+f>s&&s>f?Math.abs(f+o):0),i},_findPos:function(t){for(var i,r=this._getInst(t),u=this._get(r,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||n.expr.filters.hidden(t));)t=t[u?"previousSibling":"nextSibling"];return[(i=n(t).offset()).left,i.top]},_hideDatepicker:function(t){var r,f,u,e,i=this._curInst;!i||t&&i!==n.data(t,"datepicker")||this._datepickerShowing&&(r=this._get(i,"showAnim"),f=this._get(i,"duration"),u=function(){n.datepicker._tidyDialog(i)},n.effects&&(n.effects.effect[r]||n.effects[r])?i.dpDiv.hide(r,n.datepicker._get(i,"showOptions"),f,u):i.dpDiv["slideDown"===r?"slideUp":"fadeIn"===r?"fadeOut":"hide"](r?f:null,u),r||u(),this._datepickerShowing=!1,(e=this._get(i,"onClose"))&&e.apply(i.input?i.input[0]:null,[i.input?i.input.val():"",i]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),n.blockUI&&(n.unblockUI(),n("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(n){n.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(n.datepicker._curInst){var i=n(t.target),r=n.datepicker._getInst(i[0]);(i[0].id===n.datepicker._mainDivId||0!==i.parents("#"+n.datepicker._mainDivId).length||i.hasClass(n.datepicker.markerClassName)||i.closest("."+n.datepicker._triggerClass).length||!n.datepicker._datepickerShowing||n.datepicker._inDialog&&n.blockUI)&&(!i.hasClass(n.datepicker.markerClassName)||n.datepicker._curInst===r)||n.datepicker._hideDatepicker()}},_adjustDate:function(t,i,r){var f=n(t),u=this._getInst(f[0]);this._isDisabledDatepicker(f[0])||(this._adjustInstDate(u,i+("M"===r?this._get(u,"showCurrentAtPos"):0),r),this._updateDatepicker(u))},_gotoToday:function(t){var r,u=n(t),i=this._getInst(u[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(r=new Date,i.selectedDay=r.getDate(),i.drawMonth=i.selectedMonth=r.getMonth(),i.drawYear=i.selectedYear=r.getFullYear());this._notifyChange(i);this._adjustDate(u)},_selectMonthYear:function(t,i,r){var f=n(t),u=this._getInst(f[0]);u["selected"+("M"===r?"Month":"Year")]=u["draw"+("M"===r?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10);this._notifyChange(u);this._adjustDate(f)},_selectDay:function(t,i,r,u){var f,e=n(t);n(u).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])||((f=this._getInst(e[0])).selectedDay=f.currentDay=n("a",u).html(),f.selectedMonth=f.currentMonth=i,f.selectedYear=f.currentYear=r,this._selectDate(t,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(t){var i=n(t);this._selectDate(i,"")},_selectDate:function(t,i){var u,f=n(t),r=this._getInst(f[0]);i=null!=i?i:this._formatDate(r);r.input&&r.input.val(i);this._updateAlternate(r);(u=this._get(r,"onSelect"))?u.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change");r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var i,r,u,f=this._get(t,"altField");f&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),u=this.formatDate(i,r,this._getFormatConfig(t)),n(f).val(u))},noWeekends:function(n){var t=n.getDay();return[t>0&&t<6,""]},iso8601Week:function(n){var i,t=new Date(n.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),i=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(t,i,r){if(null==t||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;for(var b,a,e,u=0,v=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof v?v:(new Date).getFullYear()%100+parseInt(v,10),g=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,nt=(r?r.dayNames:null)||this._defaults.dayNames,tt=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,it=(r?r.monthNames:null)||this._defaults.monthNames,f=-1,s=-1,h=-1,y=-1,p=!1,l=function(n){var i=o+1<t.length&&t.charAt(o+1)===n;return i&&o++,i},c=function(n){var f=l(n),r="@"===n?14:"!"===n?20:"y"===n&&f?4:"o"===n?3:2,e=new RegExp("^\\d{"+("y"===n?r:1)+","+r+"}"),t=i.substring(u).match(e);if(!t)throw"Missing number at position "+u;return u+=t[0].length,parseInt(t[0],10)},k=function(t,r,f){var e=-1,o=n.map(l(t)?f:r,function(n,t){return[[t,n]]}).sort(function(n,t){return-(n[1].length-t[1].length)});if(n.each(o,function(n,t){var r=t[1];if(i.substr(u,r.length).toLowerCase()===r.toLowerCase())return e=t[0],u+=r.length,!1}),-1!==e)return e+1;throw"Unknown name at position "+u;},w=function(){if(i.charAt(u)!==t.charAt(o))throw"Unexpected literal at position "+u;u++},o=0;o<t.length;o++)if(p)"'"!==t.charAt(o)||l("'")?w():p=!1;else switch(t.charAt(o)){case"d":h=c("d");break;case"D":k("D",g,nt);break;case"o":y=c("o");break;case"m":s=c("m");break;case"M":s=k("M",tt,it);break;case"y":f=c("y");break;case"@":f=(e=new Date(c("@"))).getFullYear();s=e.getMonth()+1;h=e.getDate();break;case"!":f=(e=new Date((c("!")-this._ticksTo1970)/1e4)).getFullYear();s=e.getMonth()+1;h=e.getDate();break;case"'":l("'")?w():p=!0;break;default:w()}if(u<i.length&&(a=i.substr(u),!/^\s+/.test(a)))throw"Extra/unparsed characters found in date: "+a;if(-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=d?0:-100)),y>-1)for(s=1,h=y;;){if(h<=(b=this._getDaysInMonth(f,s-1)))break;s++;h-=b}if((e=this._daylightSavingAdjust(new Date(f,s-1,h))).getFullYear()!==f||e.getMonth()+1!==s||e.getDate()!==h)throw"Invalid date";return e},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(n,t,i){if(!t)return"";var u,h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,c=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,f=function(t){var i=u+1<n.length&&n.charAt(u+1)===t;return i&&u++,i},e=function(n,t,i){var r=""+t;if(f(n))for(;r.length<i;)r="0"+r;return r},s=function(n,t,i,r){return f(n)?r[t]:i[t]},r="",o=!1;if(t)for(u=0;u<n.length;u++)if(o)"'"!==n.charAt(u)||f("'")?r+=n.charAt(u):o=!1;else switch(n.charAt(u)){case"d":r+=e("d",t.getDate(),2);break;case"D":r+=s("D",t.getDay(),h,c);break;case"o":r+=e("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":r+=e("m",t.getMonth()+1,2);break;case"M":r+=s("M",t.getMonth(),l,a);break;case"y":r+=f("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":r+=t.getTime();break;case"!":r+=1e4*t.getTime()+this._ticksTo1970;break;case"'":f("'")?r+="'":o=!0;break;default:r+=n.charAt(u)}return r},_possibleChars:function(n){for(var i="",r=!1,u=function(i){var r=t+1<n.length&&n.charAt(t+1)===i;return r&&t++,r},t=0;t<n.length;t++)if(r)"'"!==n.charAt(t)||u("'")?i+=n.charAt(t):r=!1;else switch(n.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":u("'")?i+="'":r=!0;break;default:i+=n.charAt(t)}return i},_get:function(n,t){return void 0!==n.settings[t]?n.settings[t]:this._defaults[t]},_setDateFromField:function(n,t){if(n.input.val()!==n.lastVal){var f=this._get(n,"dateFormat"),r=n.lastVal=n.input?n.input.val():null,u=this._getDefaultDate(n),i=u,e=this._getFormatConfig(n);try{i=this.parseDate(f,r,e)||u}catch(n){r=t?"":r}n.selectedDay=i.getDate();n.drawMonth=n.selectedMonth=i.getMonth();n.drawYear=n.selectedYear=i.getFullYear();n.currentDay=r?i.getDate():0;n.currentMonth=r?i.getMonth():0;n.currentYear=r?i.getFullYear():0;this._adjustInstDate(n)}},_getDefaultDate:function(n){return this._restrictMinMax(n,this._determineDate(n,this._get(n,"defaultDate"),new Date))},_determineDate:function(t,i,r){var u=null==i||""===i?r:"string"==typeof i?function(i){try{return n.datepicker.parseDate(n.datepicker._get(t,"dateFormat"),i,n.datepicker._getFormatConfig(t))}catch(n){}for(var o=(i.toLowerCase().match(/^c/)?n.datepicker._getDate(t):null)||new Date,f=o.getFullYear(),e=o.getMonth(),r=o.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=s.exec(i);u;){switch(u[2]||"d"){case"d":case"D":r+=parseInt(u[1],10);break;case"w":case"W":r+=7*parseInt(u[1],10);break;case"m":case"M":e+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e));break;case"y":case"Y":f+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e))}u=s.exec(i)}return new Date(f,e,r)}(i):"number"==typeof i?isNaN(i)?r:function(n){var t=new Date;return t.setDate(t.getDate()+n),t}(i):new Date(i.getTime());return(u=u&&"Invalid Date"===u.toString()?r:u)&&(u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0)),this._daylightSavingAdjust(u)},_daylightSavingAdjust:function(n){return n?(n.setHours(n.getHours()>12?n.getHours()+2:0),n):null},_setDate:function(n,t,i){var u=!t,f=n.selectedMonth,e=n.selectedYear,r=this._restrictMinMax(n,this._determineDate(n,t,new Date));n.selectedDay=n.currentDay=r.getDate();n.drawMonth=n.selectedMonth=n.currentMonth=r.getMonth();n.drawYear=n.selectedYear=n.currentYear=r.getFullYear();f===n.selectedMonth&&e===n.selectedYear||i||this._notifyChange(n);this._adjustInstDate(n);n.input&&n.input.val(u?"":this._formatDate(n))},_getDate:function(n){return!n.currentYear||n.input&&""===n.input.val()?null:this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay))},_attachHandlers:function(t){var r=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){n.datepicker._adjustDate(i,-r,"M")},next:function(){n.datepicker._adjustDate(i,+r,"M")},hide:function(){n.datepicker._hideDatepicker()},today:function(){n.datepicker._gotoToday(i)},selectDay:function(){return n.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return n.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return n.datepicker._selectMonthYear(i,this,"Y"),!1}};n(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(n){var b,s,it,h,rt,k,ut,ft,ri,c,et,ui,fi,ei,oi,ot,g,si,st,nt,o,v,ht,y,ct,l,u,lt,at,vt,yt,pt,wt,t,bt,kt,d,p,tt,dt=new Date,gt=this._daylightSavingAdjust(new Date(dt.getFullYear(),dt.getMonth(),dt.getDate())),f=this._get(n,"isRTL"),li=this._get(n,"showButtonPanel"),hi=this._get(n,"hideIfNoPrevNext"),ni=this._get(n,"navigationAsDateFormat"),e=this._getNumberOfMonths(n),ai=this._get(n,"showCurrentAtPos"),ci=this._get(n,"stepMonths"),ti=1!==e[0]||1!==e[1],ii=this._daylightSavingAdjust(n.currentDay?new Date(n.currentYear,n.currentMonth,n.currentDay):new Date(9999,9,9)),w=this._getMinMaxDate(n,"min"),a=this._getMinMaxDate(n,"max"),i=n.drawMonth-ai,r=n.drawYear;if(i<0&&(i+=12,r--),a)for(b=this._daylightSavingAdjust(new Date(a.getFullYear(),a.getMonth()-e[0]*e[1]+1,a.getDate())),b=w&&b<w?w:b;this._daylightSavingAdjust(new Date(r,i,1))>b;)--i<0&&(i=11,r--);for(n.drawMonth=i,n.drawYear=r,s=this._get(n,"prevText"),s=ni?this.formatDate(s,this._daylightSavingAdjust(new Date(r,i-ci,1)),this._getFormatConfig(n)):s,it=this._canAdjustMonth(n,-1,r,i)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"e":"w")+"'>"+s+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"e":"w")+"'>"+s+"<\/span><\/a>",h=this._get(n,"nextText"),h=ni?this.formatDate(h,this._daylightSavingAdjust(new Date(r,i+ci,1)),this._getFormatConfig(n)):h,rt=this._canAdjustMonth(n,1,r,i)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"w":"e")+"'>"+h+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(f?"w":"e")+"'>"+h+"<\/span><\/a>",k=this._get(n,"currentText"),ut=this._get(n,"gotoCurrent")&&n.currentDay?ii:gt,k=ni?this.formatDate(k,ut,this._getFormatConfig(n)):k,ft=n.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(n,"closeText")+"<\/button>",ri=li?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(f?ft:"")+(this._isInRange(n,ut)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+k+"<\/button>":"")+(f?"":ft)+"<\/div>":"",c=parseInt(this._get(n,"firstDay"),10),c=isNaN(c)?0:c,et=this._get(n,"showWeek"),ui=this._get(n,"dayNames"),fi=this._get(n,"dayNamesMin"),ei=this._get(n,"monthNames"),oi=this._get(n,"monthNamesShort"),ot=this._get(n,"beforeShowDay"),g=this._get(n,"showOtherMonths"),si=this._get(n,"selectOtherMonths"),st=this._getDefaultDate(n),nt="",v=0;v<e[0];v++){for(ht="",this.maxRows=4,y=0;y<e[1];y++){if(ct=this._daylightSavingAdjust(new Date(r,i,n.selectedDay)),l=" ui-corner-all",u="",ti){if(u+="<div class='ui-datepicker-group",e[1]>1)switch(y){case 0:u+=" ui-datepicker-group-first";l=" ui-corner-"+(f?"right":"left");break;case e[1]-1:u+=" ui-datepicker-group-last";l=" ui-corner-"+(f?"left":"right");break;default:u+=" ui-datepicker-group-middle";l=""}u+="'>"}for(u+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+l+"'>"+(/all|left/.test(l)&&0===v?f?rt:it:"")+(/all|right/.test(l)&&0===v?f?it:rt:"")+this._generateMonthYearHeader(n,i,r,w,a,v>0||y>0,ei,oi)+"<\/div><table class='ui-datepicker-calendar'><thead><tr>",lt=et?"<th class='ui-datepicker-week-col'>"+this._get(n,"weekHeader")+"<\/th>":"",o=0;o<7;o++)at=(o+c)%7,lt+="<th scope='col'"+((o+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+ui[at]+"'>"+fi[at]+"<\/span><\/th>";for(u+=lt+"<\/tr><\/thead><tbody>",vt=this._getDaysInMonth(r,i),r===n.selectedYear&&i===n.selectedMonth&&(n.selectedDay=Math.min(n.selectedDay,vt)),yt=(this._getFirstDayOfMonth(r,i)-c+7)%7,pt=Math.ceil((yt+vt)/7),wt=ti&&this.maxRows>pt?this.maxRows:pt,this.maxRows=wt,t=this._daylightSavingAdjust(new Date(r,i,1-yt)),bt=0;bt<wt;bt++){for(u+="<tr>",kt=et?"<td class='ui-datepicker-week-col'>"+this._get(n,"calculateWeek")(t)+"<\/td>":"",o=0;o<7;o++)d=ot?ot.apply(n.input?n.input[0]:null,[t]):[!0,""],tt=(p=t.getMonth()!==i)&&!si||!d[0]||w&&t<w||a&&t>a,kt+="<td class='"+((o+c+6)%7>=5?" ui-datepicker-week-end":"")+(p?" ui-datepicker-other-month":"")+(t.getTime()===ct.getTime()&&i===n.selectedMonth&&n._keyEvent||st.getTime()===t.getTime()&&st.getTime()===ct.getTime()?" "+this._dayOverClass:"")+(tt?" "+this._unselectableClass+" ui-state-disabled":"")+(p&&!g?"":" "+d[1]+(t.getTime()===ii.getTime()?" "+this._currentClass:"")+(t.getTime()===gt.getTime()?" ui-datepicker-today":""))+"'"+(p&&!g||!d[2]?"":" title='"+d[2].replace(/'/g,"&#39;")+"'")+(tt?"":" data-handler='selectDay' data-event='click' data-month='"+t.getMonth()+"' data-year='"+t.getFullYear()+"'")+">"+(p&&!g?"&#xa0;":tt?"<span class='ui-state-default'>"+t.getDate()+"<\/span>":"<a class='ui-state-default"+(t.getTime()===gt.getTime()?" ui-state-highlight":"")+(t.getTime()===ii.getTime()?" ui-state-active":"")+(p?" ui-priority-secondary":"")+"' href='#'>"+t.getDate()+"<\/a>")+"<\/td>",t.setDate(t.getDate()+1),t=this._daylightSavingAdjust(t);u+=kt+"<\/tr>"}++i>11&&(i=0,r++);ht+=u+="<\/tbody><\/table>"+(ti?"<\/div>"+(e[0]>0&&y===e[1]-1?"<div class='ui-datepicker-row-break'><\/div>":""):"")}nt+=ht}return nt+=ri,n._keyEvent=!1,nt},_generateMonthYearHeader:function(n,t,i,r,u,f,e,o){var b,k,h,v,y,d,s,a,p=this._get(n,"changeMonth"),w=this._get(n,"changeYear"),g=this._get(n,"showMonthAfterYear"),c="<div class='ui-datepicker-title'>",l="";if(f||!p)l+="<span class='ui-datepicker-month'>"+e[t]+"<\/span>";else{for(b=r&&r.getFullYear()===i,k=u&&u.getFullYear()===i,l+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;h<12;h++)(!b||h>=r.getMonth())&&(!k||h<=u.getMonth())&&(l+="<option value='"+h+"'"+(h===t?" selected='selected'":"")+">"+o[h]+"<\/option>");l+="<\/select>"}if(g||(c+=l+(!f&&p&&w?"":"&#xa0;")),!n.yearshtml)if(n.yearshtml="",f||!w)c+="<span class='ui-datepicker-year'>"+i+"<\/span>";else{for(v=this._get(n,"yearRange").split(":"),y=(new Date).getFullYear(),s=(d=function(n){var t=n.match(/c[+\-].*/)?i+parseInt(n.substring(1),10):n.match(/[+\-].*/)?y+parseInt(n,10):parseInt(n,10);return isNaN(t)?y:t})(v[0]),a=Math.max(s,d(v[1]||"")),s=r?Math.max(s,r.getFullYear()):s,a=u?Math.min(a,u.getFullYear()):a,n.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";s<=a;s++)n.yearshtml+="<option value='"+s+"'"+(s===i?" selected='selected'":"")+">"+s+"<\/option>";n.yearshtml+="<\/select>";c+=n.yearshtml;n.yearshtml=null}return c+=this._get(n,"yearSuffix"),g&&(c+=(!f&&p&&w?"":"&#xa0;")+l),c+"<\/div>"},_adjustInstDate:function(n,t,i){var u=n.selectedYear+("Y"===i?t:0),f=n.selectedMonth+("M"===i?t:0),e=Math.min(n.selectedDay,this._getDaysInMonth(u,f))+("D"===i?t:0),r=this._restrictMinMax(n,this._daylightSavingAdjust(new Date(u,f,e)));n.selectedDay=r.getDate();n.drawMonth=n.selectedMonth=r.getMonth();n.drawYear=n.selectedYear=r.getFullYear();"M"!==i&&"Y"!==i||this._notifyChange(n)},_restrictMinMax:function(n,t){var i=this._getMinMaxDate(n,"min"),r=this._getMinMaxDate(n,"max"),u=i&&t<i?i:t;return r&&u>r?r:u},_notifyChange:function(n){var t=this._get(n,"onChangeMonthYear");t&&t.apply(n.input?n.input[0]:null,[n.selectedYear,n.selectedMonth+1,n])},_getNumberOfMonths:function(n){var t=this._get(n,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(n,t){return this._determineDate(n,this._get(n,t+"Date"),null)},_getDaysInMonth:function(n,t){return 32-this._daylightSavingAdjust(new Date(n,t,32)).getDate()},_getFirstDayOfMonth:function(n,t){return new Date(n,t,1).getDay()},_canAdjustMonth:function(n,t,i,r){var f=this._getNumberOfMonths(n),u=this._daylightSavingAdjust(new Date(i,r+(t<0?t:f[0]*f[1]),1));return t<0&&u.setDate(this._getDaysInMonth(u.getFullYear(),u.getMonth())),this._isInRange(n,u)},_isInRange:function(n,t){var i,f,e=this._getMinMaxDate(n,"min"),o=this._getMinMaxDate(n,"max"),r=null,u=null,s=this._get(n,"yearRange");return s&&(i=s.split(":"),f=(new Date).getFullYear(),r=parseInt(i[0],10),u=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=f),i[1].match(/[+\-].*/)&&(u+=f)),(!e||t.getTime()>=e.getTime())&&(!o||t.getTime()<=o.getTime())&&(!r||t.getFullYear()>=r)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(n){var t=this._get(n,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(n,"dayNamesShort"),dayNames:this._get(n,"dayNames"),monthNamesShort:this._get(n,"monthNamesShort"),monthNames:this._get(n,"monthNames")}},_formatDate:function(n,t,i,r){t||(n.currentDay=n.selectedDay,n.currentMonth=n.selectedMonth,n.currentYear=n.selectedYear);var u=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,i,t)):this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay));return this.formatDate(this._get(n,"dateFormat"),u,this._getFormatConfig(n))}}),n.fn.datepicker=function(t){if(!this.length)return this;n.datepicker.initialized||(n(document).on("mousedown",n.datepicker._checkExternalClick),n.datepicker.initialized=!0);0===n("#"+n.datepicker._mainDivId).length&&n("body").append(n.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this].concat(i)):n.datepicker._attachDatepicker(this,t)}):n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i))},n.datepicker=new r,n.datepicker.initialized=!1,n.datepicker.uuid=(new Date).getTime(),n.datepicker.version="1.12.1",n.datepicker};u=[i(0),i(3),i(15)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f;Object.defineProperty(t,"__esModule",{value:!0});t.startApplication=t.Web=void 0;r=i(39);window.navigator.cookieEnabled||console.warn("%c Please enable cookies in your browser.","color: red");u=window.AQB?window.AQB.Web:{};u.dispose&&(f=u.dispose);null==u.QueryBuilderContainer&&(Object.defineProperties(u,{Core:{enumerable:!0,get:function(){return r.Core}},QueryBuilderContainer:{enumerable:!0,get:function(){return r.QueryBuilderContainer}},QueryBuilder:{enumerable:!0,get:function(){return r.QueryBuilderContainer.first()}},Dto:{enumerable:!0,get:function(){return r.Dto}},Enum:{enumerable:!0,get:function(){return r.Enum}},onQueryBuilderReady:{enumerable:!0,get:function(){return r.onQueryBuilderReady}},onApplicationReady:{get:function(){return r.onQueryBuilderReady}},dispose:{enumerable:!0,configurable:!0,get:function(){return function(){r.dispose();f&&f();delete window.AQB}}}}),document.addEventListener("DOMContentLoaded",r.startApplication));t.Web=u;t.startApplication=r.startApplication},function(n,t,i){function r(n){return n&&n.__esModule?n:{"default":n}}function c(n,t){var i=new p.default(u.default(t),function(){if(!i.isDisposed){i.hide();f.add(i);var t=null!=i.TreeViewComponent?2:1,n=new l(t,i);null!=i.TreeViewComponent&&i.TreeViewComponent.once(i.TreeViewComponent.Events.TreeLoaded,function(){return n.partLoaded()});i.fullUpdate(function(){i.show(function(){return n.partLoaded()})})}})}var o,u,l;Object.defineProperty(t,"__esModule",{value:!0});t.dispose=t.startApplication=t.onQueryBuilderReady=t.QueryBuilderContainer=t.Enum=t.Dto=t.Core=void 0;o=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();i(40);i(41);i(42);u=r(i(0));i(18);var a=r(i(14)),v=r(i(5)),y=i(13),s=i(2),p=r(i(56)),w=r(i(16)),h=r(i(8)),b=i(1);var f=new a.default,e=w.default(),k=e.onApplicationReady.bind(e);l=function(){function n(t,i){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this.partCount=t;this.qb=i}return o(n,[{key:"partLoaded",value:function(){this.partCount--;0!==this.partCount||this.qb.isDisposed||e.onApplicationReadyTrigger(this.qb)}}]),n}();t.Core=y.Core;t.Dto=s.Dto;t.Enum=s.Enum;t.QueryBuilderContainer=f;t.onQueryBuilderReady=k;t.startApplication=function(n){if("string"!=typeof n)u.default.each(u.default(h.default.queryBuilderSelector),c);else{var t=b.getControl(h.default.queryBuilderSelector,n);t&&c(0,t)}};t.dispose=function(){f.foreach(function(n){f.remove(n.SessionID);n.dispose(!1)});v.default.destroy();e.reset()}},function(){},function(){},function(){},function(n,t,i){var r,u,f,e;e=function(n){return n.ui.safeActiveElement=function(n){var t;try{t=n.activeElement}catch(i){t=n.body}return t||(t=n.body),t.nodeName||(t=n.body),t}};u=[i(0),i(3)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return n.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&n(t).trigger("blur")}};u=[i(0),i(3)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){n.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,r=i.accept;this.isover=!1;this.isout=!0;this.accept=n.isFunction(r)?r:function(n){return n.is(r)};this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]};this._addToManager(i.scope);i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){n.ui.ddmanager.droppables[t]=n.ui.ddmanager.droppables[t]||[];n.ui.ddmanager.droppables[t].push(this)},_splice:function(n){for(var t=0;t<n.length;t++)n[t]===this&&n.splice(t,1)},_destroy:function(){var t=n.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,i){if("accept"===t)this.accept=n.isFunction(i)?i:function(n){return n.is(i)};else if("scope"===t){var r=n.ui.ddmanager.droppables[this.options.scope];this._splice(r);this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=n.ui.ddmanager.current;this._addActiveClass();i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=n.ui.ddmanager.current;this._removeActiveClass();i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(i)))},_drop:function(i,r){var u=r||n.ui.ddmanager.current,f=!1;return!(!u||(u.currentItem||u.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var r=n(this).droppable("instance");if(r.options.greedy&&!r.options.disabled&&r.options.scope===u.options.scope&&r.accept.call(r.element[0],u.currentItem||u.element)&&t(u,n.extend(r,{offset:r.element.offset()}),r.options.tolerance,i))return f=!0,!1}),!f&&!!this.accept.call(this.element[0],u.currentItem||u.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",i,this.ui(u)),this.element))},ui:function(n){return{draggable:n.currentItem||n.element,helper:n.helper,position:n.position,offset:n.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var t=n.ui.intersect=function(){function n(n,t,i){return n>=t&&n<t+i}return function(t,i,r,u){if(!i.offset)return!1;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,s=(t.positionAbs||t.position.absolute).top+t.margins.top,h=o+t.helperProportions.width,c=s+t.helperProportions.height,f=i.offset.left,e=i.offset.top,l=f+i.proportions().width,a=e+i.proportions().height;switch(r){case"fit":return f<=o&&h<=l&&e<=s&&c<=a;case"intersect":return f<o+t.helperProportions.width/2&&h-t.helperProportions.width/2<l&&e<s+t.helperProportions.height/2&&c-t.helperProportions.height/2<a;case"pointer":return n(u.pageY,e,i.proportions().height)&&n(u.pageX,f,i.proportions().width);case"touch":return(s>=e&&s<=a||c>=e&&c<=a||s<e&&c>a)&&(o>=f&&o<=l||h>=f&&h<=l||o<f&&h>l);default:return!1}}}();return n.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var r,f,u=n.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,e=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();n:for(r=0;r<u.length;r++)if(!(u[r].options.disabled||t&&!u[r].accept.call(u[r].element[0],t.currentItem||t.element))){for(f=0;f<e.length;f++)if(e[f]===u[r].element[0]){u[r].proportions().height=0;continue n}u[r].visible="none"!==u[r].element.css("display");u[r].visible&&("mousedown"===o&&u[r]._activate.call(u[r],i),u[r].offset=u[r].element.offset(),u[r].proportions({width:u[r].element[0].offsetWidth,height:u[r].element[0].offsetHeight}))}},drop:function(i,r){var u=!1;return n.each((n.ui.ddmanager.droppables[i.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t(i,this,this.options.tolerance,r)&&(u=this._drop.call(this,r)||u),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,r)))}),u},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)})},drag:function(i,r){i.options.refreshPositions&&n.ui.ddmanager.prepareOffsets(i,r);n.each(n.ui.ddmanager.droppables[i.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var u,e,o,s=t(i,this,this.options.tolerance,r),f=!s&&this.isover?"isout":s&&!this.isover?"isover":null;f&&(this.options.greedy&&(e=this.options.scope,(o=this.element.parents(":data(ui-droppable)").filter(function(){return n(this).droppable("instance").options.scope===e})).length&&((u=n(o[0]).droppable("instance")).greedyChild="isover"===f)),u&&"isover"===f&&(u.isover=!1,u.isout=!0,u._out.call(u,r)),this[f]=!0,this["isout"===f?"isover":"isout"]=!1,this["isover"===f?"_over":"_out"].call(this,r),u&&"isout"===f&&(u.isout=!1,u.isover=!0,u._over.call(u,r)))}})},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable");t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)}},!1!==n.uiBackCompat&&n.widget("ui.droppable",n.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super();this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super();this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super();this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super();this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),n.ui.droppable};u=[i(0),i(19),i(12),i(3),i(6)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return n.widget("ui.sortable",n.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(n,t,i){return n>=t&&n<t+i},_isFloating:function(n){return/left|right/.test(n.css("float"))||/inline|table-cell/.test(n.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(n,t){this._super(n,t);"handle"===n&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");n.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var n=this.items.length-1;n>=0;n--)this.items[n].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var r=null,f=!1,u=this;return!this.reverting&&!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),n(t.target).parents().each(function(){if(n.data(this,u.widgetName+"-item")===u)return r=n(this),!1}),n.data(t.target,u.widgetName+"-item")===u&&(r=n(t.target)),!!r&&!(this.options.handle&&!i&&(n(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(f=!0)}),!f))&&(this.currentItem=r,this._removeCurrentsFromItems(),!0))},_mouseStart:function(t,i,r){var f,e,u=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,u.cursorAt&&this._adjustOffsetFromHelper(u.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),u.containment&&this._setContainment(),u.cursor&&"auto"!==u.cursor&&(e=this.document.find("body"),this.storedCursor=e.css("cursor"),e.css("cursor",u.cursor),this.storedStylesheet=n("<style>*{ cursor: "+u.cursor+" !important; }<\/style>").appendTo(e)),u.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",u.opacity)),u.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",u.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",t,this._uiHash(this));return n.ui.ddmanager&&(n.ui.ddmanager.current=this),n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,u,f,o,i=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-this.document.scrollTop()<i.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-i.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<i.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+i.scrollSpeed)),t.pageX-this.document.scrollLeft()<i.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-i.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<i.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+i.scrollSpeed))),!1!==r&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;e>=0;e--)if(f=(u=this.items[e]).item[0],(o=this._intersectsWithPointer(u))&&u.instance===this.currentContainer&&!(f===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===f||n.contains(this.placeholder[0],f)||"semi-dynamic"===this.options.type&&n.contains(this.element[0],f))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(u))break;this._rearrange(t,u);this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(n.ui.ddmanager&&!this.options.dropBehaviour&&n.ui.ddmanager.drop(this,t),this.options.revert){var e=this,f=this.placeholder.offset(),r=this.options.axis,u={};r&&"x"!==r||(u.left=f.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft));r&&"y"!==r||(u.top=f.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop));this.reverting=!0;n(this.helper).animate(u,parseInt(this.options.revert,10)||500,function(){e._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new n.Event("mouseup",{target:null}));"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),n.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?n(this.domPosition.prev).after(this.currentItem):n(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n(r).each(function(){var r=(n(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);r&&i.push((t.key||r[1]+"[]")+"="+(t.key&&t.expression?r[1]:r[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},r.each(function(){i.push(n(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(n){var t=this.positionAbs.left,h=t+this.helperProportions.width,i=this.positionAbs.top,c=i+this.helperProportions.height,r=n.left,f=r+n.width,u=n.top,e=u+n.height,o=this.offset.click.top,s=this.offset.click.left,l="x"===this.options.axis||i+o>u&&i+o<e,a="y"===this.options.axis||t+s>r&&t+s<f,v=l&&a;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>n[this.floating?"width":"height"]?v:r<t+this.helperProportions.width/2&&h-this.helperProportions.width/2<f&&u<i+this.helperProportions.height/2&&c-this.helperProportions.height/2<e},_intersectsWithPointer:function(n){var t,i,r="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,n.top,n.height),u="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,n.left,n.width);return!(!r||!u)&&(t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(n){var r=this._isOverAxis(this.positionAbs.top+this.offset.click.top,n.top+n.height/2,n.height),u=this._isOverAxis(this.positionAbs.left+this.offset.click.left,n.left+n.width/2,n.width),t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&u||"left"===i&&!u:t&&("down"===t&&r||"up"===t&&!r)},_getDragVerticalDirection:function(){var n=this.positionAbs.top-this.lastPositionAbs.top;return 0!==n&&(n>0?"down":"up")},_getDragHorizontalDirection:function(){var n=this.positionAbs.left-this.lastPositionAbs.left;return 0!==n&&(n>0?"right":"left")},refresh:function(n){return this._refreshItems(n),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var n=this.options;return n.connectWith.constructor===String?[n.connectWith]:n.connectWith},_getItemsAsjQuery:function(t){function h(){s.push(this)}var r,u,o,i,s=[],f=[],e=this._connectWith();if(e&&t)for(r=e.length-1;r>=0;r--)for(u=(o=n(e[r],this.document[0])).length-1;u>=0;u--)(i=n.data(o[u],this.widgetFullName))&&i!==this&&!i.options.disabled&&f.push([n.isFunction(i.options.items)?i.options.items.call(i.element):n(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i]);for(f.push([n.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):n(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=f.length-1;r>=0;r--)f[r][0].each(h);return n(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=n.grep(this.items,function(n){for(var i=0;i<t.length;i++)if(t[i]===n.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[];this.containers=[this];var r,u,s,i,e,h,c,l,a=this.items,f=[[n.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):n(this.options.items,this.element),this]],o=this._connectWith();if(o&&this.ready)for(r=o.length-1;r>=0;r--)for(u=(s=n(o[r],this.document[0])).length-1;u>=0;u--)(i=n.data(s[u],this.widgetFullName))&&i!==this&&!i.options.disabled&&(f.push([n.isFunction(i.options.items)?i.options.items.call(i.element[0],t,{item:this.currentItem}):n(i.options.items,i.element),i]),this.containers.push(i));for(r=f.length-1;r>=0;r--)for(e=f[r][1],u=0,l=(h=f[r][0]).length;u<l;u++)(c=n(h[u])).data(this.widgetName+"-item",e),a.push({item:c,instance:e,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var i,r,f,u;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(r=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(f=this.options.toleranceElement?n(this.options.toleranceElement,r.item):r.item,t||(r.width=f.outerWidth(),r.height=f.outerHeight()),u=f.offset(),r.left=u.left,r.top=u.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)u=this.containers[i].element.offset(),this.containers[i].containerCache.left=u.left,this.containers[i].containerCache.top=u.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){var r,i=(t=t||this).options;i.placeholder&&i.placeholder.constructor!==String||(r=i.placeholder,i.placeholder={element:function(){var u=t.currentItem[0].nodeName.toLowerCase(),i=n("<"+u+">",t.document[0]);return t._addClass(i,"ui-sortable-placeholder",r||t.currentItem[0].className)._removeClass(i,"ui-sortable-helper"),"tbody"===u?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),n("<tr>",t.document[0]).appendTo(i)):"tr"===u?t._createTrPlaceholder(t.currentItem,i):"img"===u&&i.attr("src",t.currentItem.attr("src")),r||i.css("visibility","hidden"),i},update:function(n,u){r&&!i.forcePlaceholderSize||(u.height()||u.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),u.width()||u.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}});t.placeholder=n(i.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);i.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var r=this;t.children().each(function(){n("<td>&#160;<\/td>",r.document[0]).attr("colspan",n(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){for(var u,h,f,a,v,o,c,l,s,e=null,i=null,r=this.containers.length-1;r>=0;r--)if(!n.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(e&&n.contains(this.containers[r].element[0],e.element[0]))continue;e=this.containers[r];i=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(e)if(1===this.containers.length)this.containers[i].containerCache.over||(this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1);else{for(h=1e4,f=null,a=(l=e.floating||this._isFloating(this.currentItem))?"left":"top",v=l?"width":"height",s=l?"pageX":"pageY",u=this.items.length-1;u>=0;u--)n.contains(this.containers[i].element[0],this.items[u].item[0])&&this.items[u].item[0]!==this.currentItem[0]&&(o=this.items[u].item.offset()[a],c=!1,t[s]-o>this.items[u][v]/2&&(c=!0),Math.abs(t[s]-o)<h&&(h=Math.abs(t[s]-o),f=this.items[u],this.direction=c?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[i])return void(this.currentContainer.containerCache.over||(this.containers[i]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));f?this._rearrange(t,f,null,!0):this._rearrange(t,null,this.containers[i].element,!0);this._trigger("change",t,this._uiHash());this.containers[i]._trigger("change",t,this._uiHash(this));this.currentContainer=this.containers[i];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[i]._trigger("over",t,this._uiHash(this));this.containers[i].containerCache.over=1}},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t,this.currentItem])):"clone"===r.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||n("parent"!==r.appendTo?r.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!r.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!r.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&n.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var n=this.currentItem.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,r,u,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode);"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(i.containment)||(t=n(i.containment)[0],r=n(i.containment).offset(),u="hidden"!==n(t).css("overflow"),this.containment=[r.left+(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0)-this.margins.top,r.left+(u?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(u?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var r="absolute"===t?1:-1,u="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(u[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:u.scrollTop())*r,left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*r}},_generatePosition:function(t){var r,u,i=this.options,f=t.pageX,e=t.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(e=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(e=this.containment[3]+this.offset.click.top)),i.grid&&(r=this.originalPageY+Math.round((e-this.originalPageY)/i.grid[1])*i.grid[1],e=this.containment?r-this.offset.click.top>=this.containment[1]&&r-this.offset.click.top<=this.containment[3]?r:r-this.offset.click.top>=this.containment[1]?r-i.grid[1]:r+i.grid[1]:r,u=this.originalPageX+Math.round((f-this.originalPageX)/i.grid[0])*i.grid[0],f=this.containment?u-this.offset.click.left>=this.containment[0]&&u-this.offset.click.left<=this.containment[2]?u:u-this.offset.click.left>=this.containment[0]?u-i.grid[0]:u+i.grid[0]:u)),{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())}},_rearrange:function(n,t,i,r){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var u=this.counter;this._delay(function(){u===this.counter&&this.refreshPositions(!r)})},_clear:function(n,t){function u(n,t,i){return function(r){i._trigger(n,r,t._uiHash(t))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(n){this._trigger("receive",n,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(n){this._trigger("update",n,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(n){this._trigger("remove",n,this._uiHash())}),r.push(function(n){return function(t){n._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(n){return function(t){n._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||r.push(u("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(u("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",n,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;i<r.length;i++)r[i].call(this,n);this._trigger("stop",n,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===n.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||n([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})};u=[i(0),i(12),i(21),i(20),i(23),i(3),i(6)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return n.widget("ui.resizable",n.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(n){return parseFloat(n)||0},_isNumber:function(n){return!isNaN(parseFloat(n))},_hasScroll:function(t,i){if("hidden"===n(t).css("overflow"))return!1;var u,r=i&&"left"===i?"scrollLeft":"scrollTop";return t[r]>0||(t[r]=1,u=t[r]>0,t[r]=0,u)},_create:function(){var r,t=this.options,i=this;this._addClass("ui-resizable");n.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(n("<div class='ui-wrapper' style='overflow: hidden;'><\/div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,r={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(r),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(r),this._proportionallyResize());this._setupHandles();t.autoHide&&n(this.element).on("mouseenter",function(){t.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){t.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())});this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){n(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(n,t){switch(this._super(n,t),n){case"handles":this._removeHandles();this._setupHandles()}},_setupHandles:function(){var r,i,u,o,t,f=this.options,e=this;if(this.handles=f.handles||(n(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=n(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),u=this.handles.split(","),this.handles={},i=0;i<u.length;i++)o="ui-resizable-"+(r=n.trim(u[i])),t=n("<div>"),this._addClass(t,"ui-resizable-handle "+o),t.css({zIndex:f.zIndex}),this.handles[r]=".ui-resizable-"+r,this.element.append(t);this._renderAxis=function(t){var i,r,u,f;for(i in t=t||this.element,this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=n(this.handles[i]),this._on(this.handles[i],{mousedown:e._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=n(this.handles[i],this.element),f=/sw|ne|nw|se|n|s/.test(i)?r.outerHeight():r.outerWidth(),u=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(u,f),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){e.resizing||(this.className&&(t=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),e.axis=t&&t[1]?t[1]:"se")});f.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var i,r,u=!1;for(i in this.handles)((r=n(this.handles[i])[0])===t.target||n.contains(r,t.target))&&(u=!0);return!this.options.disabled&&u},_mouseStart:function(t){var u,f,e,r=this.options,i=this.element;return this.resizing=!0,this._renderProxy(),u=this._num(this.helper.css("left")),f=this._num(this.helper.css("top")),r.containment&&(u+=n(r.containment).scrollLeft()||0,f+=n(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:u,top:f},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalPosition={left:u,top:f},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,e=n(".ui-resizable-"+this.axis).css("cursor"),n("body").css("cursor","auto"===e?this.axis+"-resize":e),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,r,u=this.originalMousePosition,e=this.axis,o=t.pageX-u.left||0,s=t.pageY-u.top||0,f=this._change[e];return this._updatePrevProperties(),!!f&&(i=f.apply(this,[t,o,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),n.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var i,r,u,f,e,o,s,h=this.options;return this._helper&&(u=(r=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:this.sizeDiff.height,f=r?0:this.sizeDiff.width,e={width:this.helper.width()-f,height:this.helper.height()-u},o=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,s=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,h.animate||this.element.css(n.extend(e,{top:s,left:o})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!h.animate&&this._proportionallyResize()),n("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var n={};return this.position.top!==this.prevPosition.top&&(n.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(n.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(n.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(n.height=this.size.height+"px"),this.helper.css(n),n},_updateVirtualBoundaries:function(n){var r,u,f,e,t,i=this.options;t={minWidth:this._isNumber(i.minWidth)?i.minWidth:0,maxWidth:this._isNumber(i.maxWidth)?i.maxWidth:1/0,minHeight:this._isNumber(i.minHeight)?i.minHeight:0,maxHeight:this._isNumber(i.maxHeight)?i.maxHeight:1/0};(this._aspectRatio||n)&&(r=t.minHeight*this.aspectRatio,f=t.minWidth/this.aspectRatio,u=t.maxHeight*this.aspectRatio,e=t.maxWidth/this.aspectRatio,r>t.minWidth&&(t.minWidth=r),f>t.minHeight&&(t.minHeight=f),u<t.maxWidth&&(t.maxWidth=u),e<t.maxHeight&&(t.maxHeight=e));this._vBoundaries=t},_updateCache:function(n){this.offset=this.helper.offset();this._isNumber(n.left)&&(this.position.left=n.left);this._isNumber(n.top)&&(this.position.top=n.top);this._isNumber(n.height)&&(this.size.height=n.height);this._isNumber(n.width)&&(this.size.width=n.width)},_updateRatio:function(n){var t=this.position,i=this.size,r=this.axis;return this._isNumber(n.height)?n.width=n.height*this.aspectRatio:this._isNumber(n.width)&&(n.height=n.width/this.aspectRatio),"sw"===r&&(n.left=t.left+(i.width-n.width),n.top=null),"nw"===r&&(n.top=t.top+(i.height-n.height),n.left=t.left+(i.width-n.width)),n},_respectSize:function(n){var t=this._vBoundaries,i=this.axis,r=this._isNumber(n.width)&&t.maxWidth&&t.maxWidth<n.width,u=this._isNumber(n.height)&&t.maxHeight&&t.maxHeight<n.height,f=this._isNumber(n.width)&&t.minWidth&&t.minWidth>n.width,e=this._isNumber(n.height)&&t.minHeight&&t.minHeight>n.height,o=this.originalPosition.left+this.originalSize.width,s=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return f&&(n.width=t.minWidth),e&&(n.height=t.minHeight),r&&(n.width=t.maxWidth),u&&(n.height=t.maxHeight),f&&h&&(n.left=o-t.minWidth),r&&h&&(n.left=o-t.maxWidth),e&&c&&(n.top=s-t.minHeight),u&&c&&(n.top=s-t.maxHeight),n.width||n.height||n.left||!n.top?n.width||n.height||n.top||!n.left||(n.left=null):n.top=null,n},_getPaddingPlusBorderDimensions:function(n){for(var t=0,i=[],r=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],u=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];t<4;t++)i[t]=parseFloat(r[t])||0,i[t]+=parseFloat(u[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var n,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)n=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(n)),n.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset();this._helper?(this.helper=this.helper||n("<div style='overflow:hidden;'><\/div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(n,t){return{width:this.originalSize.width+t}},w:function(n,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(n,t,i){var r=this.originalSize;return{top:this.originalPosition.top+i,height:r.height-i}},s:function(n,t,i){return{height:this.originalSize.height+i}},se:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},sw:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,r]))},ne:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},nw:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,r]))}},_propagate:function(t,i){n.ui.plugin.call(this,t,[i,this.ui()]);"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),n.ui.plugin.add("resizable","animate",{stop:function(t){var i=n(this).resizable("instance"),u=i.options,r=i._proportionallyResizeElements,f=r.length&&/textarea/i.test(r[0].nodeName),s=f&&i._hasScroll(r[0],"left")?0:i.sizeDiff.height,h=f?0:i.sizeDiff.width,c={width:i.size.width-h,height:i.size.height-s},e=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,o=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(n.extend(c,o&&e?{top:o,left:e}:{}),{duration:u.animateDuration,easing:u.animateEasing,step:function(){var u={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};r&&r.length&&n(r[0]).css({width:u.width,height:u.height});i._updateCache(u);i._propagate("resize",t)}})}}),n.ui.plugin.add("resizable","containment",{start:function(){var r,f,e,o,s,h,c,t=n(this).resizable("instance"),l=t.options,a=t.element,u=l.containment,i=u instanceof n?u.get(0):/parent/.test(u)?a.parent().get(0):u;i&&(t.containerElement=n(i),/document/.test(u)||u===document?(t.containerOffset={left:0,top:0},t.containerPosition={left:0,top:0},t.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight}):(r=n(i),f=[],n(["Top","Right","Left","Bottom"]).each(function(n,i){f[n]=t._num(r.css("padding"+i))}),t.containerOffset=r.offset(),t.containerPosition=r.position(),t.containerSize={height:r.innerHeight()-f[3],width:r.innerWidth()-f[1]},e=t.containerOffset,o=t.containerSize.height,s=t.containerSize.width,h=t._hasScroll(i,"left")?i.scrollWidth:s,c=t._hasScroll(i)?i.scrollHeight:o,t.parentData={element:i,left:e.left,top:e.top,width:h,height:c}))},resize:function(t){var o,s,h,c,i=n(this).resizable("instance"),v=i.options,r=i.containerOffset,l=i.position,f=i._aspectRatio||t.shiftKey,e={top:0,left:0},a=i.containerElement,u=!0;a[0]!==document&&/static/.test(a.css("position"))&&(e=r);l.left<(i._helper?r.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-r.left:i.position.left-e.left),f&&(i.size.height=i.size.width/i.aspectRatio,u=!1),i.position.left=v.helper?r.left:0);l.top<(i._helper?r.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-r.top:i.position.top),f&&(i.size.width=i.size.height*i.aspectRatio,u=!1),i.position.top=i._helper?r.top:0);h=i.containerElement.get(0)===i.element.parent().get(0);c=/relative|absolute/.test(i.containerElement.css("position"));h&&c?(i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top):(i.offset.left=i.element.offset().left,i.offset.top=i.element.offset().top);o=Math.abs(i.sizeDiff.width+(i._helper?i.offset.left-e.left:i.offset.left-r.left));s=Math.abs(i.sizeDiff.height+(i._helper?i.offset.top-e.top:i.offset.top-r.top));o+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-o,f&&(i.size.height=i.size.width/i.aspectRatio,u=!1));s+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-s,f&&(i.size.width=i.size.height*i.aspectRatio,u=!1));u||(i.position.left=i.prevPosition.left,i.position.top=i.prevPosition.top,i.size.width=i.prevSize.width,i.size.height=i.prevSize.height)},stop:function(){var t=n(this).resizable("instance"),r=t.options,u=t.containerOffset,f=t.containerPosition,e=t.containerElement,i=n(t.helper),o=i.offset(),s=i.outerWidth()-t.sizeDiff.width,h=i.outerHeight()-t.sizeDiff.height;t._helper&&!r.animate&&/relative/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h});t._helper&&!r.animate&&/static/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h})}}),n.ui.plugin.add("resizable","alsoResize",{start:function(){var t=n(this).resizable("instance").options;n(t.alsoResize).each(function(){var t=n(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,i){var r=n(this).resizable("instance"),e=r.options,u=r.originalSize,f=r.originalPosition,o={height:r.size.height-u.height||0,width:r.size.width-u.width||0,top:r.position.top-f.top||0,left:r.position.left-f.left||0};n(e.alsoResize).each(function(){var t=n(this),u=n(this).data("ui-resizable-alsoresize"),r={},f=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];n.each(f,function(n,t){var i=(u[t]||0)+(o[t]||0);i&&i>=0&&(r[t]=i||null)});t.css(r)})},stop:function(){n(this).removeData("ui-resizable-alsoresize")}}),n.ui.plugin.add("resizable","ghost",{start:function(){var t=n(this).resizable("instance"),i=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0});t._addClass(t.ghost,"ui-resizable-ghost");!1!==n.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost);t.ghost.appendTo(t.helper)},resize:function(){var t=n(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=n(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),n.ui.plugin.add("resizable","grid",{resize:function(){var h,t=n(this).resizable("instance"),i=t.options,y=t.size,o=t.originalSize,s=t.originalPosition,c=t.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,f=l[0]||1,e=l[1]||1,a=Math.round((y.width-o.width)/f)*f,v=Math.round((y.height-o.height)/e)*e,r=o.width+a,u=o.height+v,p=i.maxWidth&&i.maxWidth<r,w=i.maxHeight&&i.maxHeight<u,b=i.minWidth&&i.minWidth>r,k=i.minHeight&&i.minHeight>u;i.grid=l;b&&(r+=f);k&&(u+=e);p&&(r-=f);w&&(u-=e);/^(se|s|e)$/.test(c)?(t.size.width=r,t.size.height=u):/^(ne)$/.test(c)?(t.size.width=r,t.size.height=u,t.position.top=s.top-v):/^(sw)$/.test(c)?(t.size.width=r,t.size.height=u,t.position.left=s.left-a):((u-e<=0||r-f<=0)&&(h=t._getPaddingPlusBorderDimensions(this)),u-e>0?(t.size.height=u,t.position.top=s.top-v):(u=e-h.height,t.size.height=u,t.position.top=s.top+o.height-u),r-f>0?(t.size.width=r,t.position.left=s.left-a):(r=f-h.width,t.size.width=r,t.position.left=s.left+o.width-r))}}),n.ui.resizable};u=[i(0),i(12),i(48),i(22),i(3),i(6)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return n.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",function(n){n.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});var t};u=[i(0),i(3)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){var t;return n.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var t,n=this._super()||{};return this.isInput=this.element.is("input"),null!=(t=this.element[0].disabled)&&(n.disabled=t),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(n.label=this.originalLabel),n},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0);null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1);this.hasTitle=!!this.element.attr("title");this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label));this._addClass("ui-button","ui-widget");this._setOption("disabled",this.options.disabled);this._enhance();this.element.is("a")&&this._on({keyup:function(t){t.keyCode===n.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button");this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title");this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,i){var u="iconPosition"!==t,r=u?this.options.iconPosition:i,f="top"===r||"bottom"===r;this.icon?u&&this._removeClass(this.icon,null,this.options.icon):(this.icon=n("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only"));u&&this._addClass(this.icon,null,i);this._attachIcon(r);f?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=n("<span> <\/span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(r))},_destroy:function(){this.element.removeAttr("role");this.icon&&this.icon.remove();this.iconSpace&&this.iconSpace.remove();this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(n){this.icon[/^(?:end|bottom)/.test(n)?"before":"after"](this.iconSpace)},_attachIcon:function(n){this.element[/^(?:end|bottom)/.test(n)?"append":"prepend"](this.icon)},_setOptions:function(n){var t=void 0===n.showLabel?this.options.showLabel:n.showLabel,i=void 0===n.icon?this.options.icon:n.icon;t||i||(n.showLabel=!0);this._super(n)},_setOption:function(n,t){"icon"===n&&(t?this._updateIcon(n,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove()));"iconPosition"===n&&this._updateIcon(n,t);"showLabel"===n&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip());"label"===n&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition))));this._super(n,t);"disabled"===n&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var n=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");n!==this.options.disabled&&this._setOptions({disabled:n});this._updateTooltip()}}),!1!==n.uiBackCompat&&(n.widget("ui.button",n.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text);!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel);this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end");this._super()},_setOption:function(n,t){"text"!==n?("showLabel"===n&&(this.options.text=t),"icon"===n&&(this.options.icons.primary=t),"icons"===n&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",t)}}),n.fn.button=(t=n.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(n.ui.checkboxradio||n.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),n.fn.buttonset=function(){return n.ui.controlgroup||n.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),n.ui.button};u=[i(0),i(50),i(51),i(15),i(6)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){var t=/ui-corner-([a-z]){2,6}/g;return n.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar");this.refresh()},_destroy:function(){this._callChildMethod("destroy");this.childWidgets.removeData("ui-controlgroup-data");this.element.removeAttr("role");this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,i=[];n.each(this.options.items,function(r,u){var f,e={};if(u)return"controlgroupLabel"===r?((f=t.element.find(u)).each(function(){var t=n(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'><\/span>")}),t._addClass(f,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(f.get()))):void(n.fn[r]&&(e=t["_"+r+"Options"]?t["_"+r+"Options"]("middle"):{classes:{}},t.element.find(u).each(function(){var u=n(this),f=u[r]("instance"),o=n.widget.extend({},e),s;"button"===r&&u.parent(".ui-spinner").length||(f||(f=u[r]()[r]("instance")),f&&(o.classes=t._resolveClassesValues(o.classes,f)),u[r](o),s=u[r]("widget"),n.data(s[0],"ui-controlgroup-data",f||u[r]("instance")),i.push(s[0]))})))});this.childWidgets=n(n.unique(i));this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var i=n(this).data("ui-controlgroup-data");i&&i[t]&&i[t]()})},_updateCornerClass:function(n,t){var i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(n,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all");this._addClass(n,null,i)},_buildSimpleOptions:function(n,t){var i="vertical"===this.options.direction,r={classes:{}};return r.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[n],r},_spinnerOptions:function(n){var t=this._buildSimpleOptions(n,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(n){return this._buildSimpleOptions(n,"ui-button")},_checkboxradioOptions:function(n){return this._buildSimpleOptions(n,"ui-checkboxradio-label")},_selectmenuOptions:function(n){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[n]}},_resolveClassesValues:function(i,r){var u={};return n.each(i,function(f){var e=r.options.classes[f]||"";e=n.trim(e.replace(t,""));u[f]=(e+" "+i[f]).replace(/\s+/g," ")}),u},_setOption:function(n,t){"direction"===n&&this._removeClass("ui-controlgroup-"+this.options.direction);this._super(n,t);"disabled"!==n?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var t,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction);"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix");this._initWidgets();t=this.childWidgets;this.options.onlyVisible&&(t=t.filter(":visible"));t.length&&(n.each(["first","last"],function(n,r){var u=t[r]().data("ui-controlgroup-data"),f;u&&i["_"+u.widgetName+"Options"]?(f=i["_"+u.widgetName+"Options"](1===t.length?"only":r),f.classes=i._resolveClassesValues(f.classes,u),u.element[u.widgetName](f)):i._updateCornerClass(t[r](),r)}),this._callChildMethod("refresh"))}})};u=[i(0),i(6)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return n.widget("ui.checkboxradio",[n.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var r,t,u=this,i=this._super()||{};return this._readType(),t=this.element.labels(),this.label=n(t[t.length-1]),this.label.length||n.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){u.originalLabel+=3===this.nodeType?n(this).text():this.outerHTML}),this.originalLabel&&(i.label=this.originalLabel),null!=(r=this.element[0].disabled)&&(i.disabled=r),i},_create:function(){var n=this.element[0].checked;this._bindFormResetHandler();null==this.options.disabled&&(this.options.disabled=this.element[0].disabled);this._setOption("disabled",this.options.disabled);this._addClass("ui-checkboxradio","ui-helper-hidden-accessible");this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget");"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label");this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel);this._enhance();n&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover"));this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type;"input"===t&&/radio|checkbox/.test(this.type)||n.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,i="input[name='"+n.ui.escapeSelector(t)+"']";return t?(this.form.length?n(this.form[0].elements).filter(i):n(i).filter(function(){return 0===n(this).form().length})).not(this.element):n([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t);this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t);"radio"===this.type&&this._getRadioGroup().each(function(){var t=n(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler();this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(n,t){if("label"!==n||t){if(this._super(n,t),"disabled"===n)return this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t);this.refresh()}},_updateIcon:function(t){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=n("<span>"),this.iconSpace=n("<span> <\/span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var n=this.label.contents().not(this.element[0]);this.icon&&(n=n.not(this.icon[0]));this.iconSpace&&(n=n.not(this.iconSpace[0]));n.remove();this.label.append(this.options.label)},refresh:function(){var n=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(n);this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",n);null!==this.options.label&&this._updateLabel();t!==this.options.disabled&&this._setOptions({disabled:t})}}]),n.ui.checkboxradio};u=[i(0),i(24),i(52),i(54),i(6)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return n.ui.formResetMixin={_formResetHandler:function(){var t=n(this);setTimeout(function(){var i=t.data("ui-form-reset-instances");n.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var n=this.form.data("ui-form-reset-instances")||[];n.length||this.form.on("reset.ui-form-reset",this._formResetHandler);n.push(this);this.form.data("ui-form-reset-instances",n)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(n.inArray(this,t),1);t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}};u=[i(0),i(53),i(3)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return n.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):n(this[0].form)}};u=[i(0),i(3)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return n.fn.labels=function(){var i,r,u,t,f;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(t=this.eq(0).parents("label"),(u=this.attr("id"))&&(f=(i=this.eq(0).parents().last()).add(i.length?i.siblings():this.siblings()),r="label[for='"+n.ui.escapeSelector(u)+"']",t=t.add(f.find(r).addBack(r))),this.pushStack(t))}};u=[i(0),i(3),i(24)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){var r,u,f,e;e=function(n){return function(){function c(n,t,i){return[parseFloat(n[0])*(h.test(n[0])?t/100:1),parseFloat(n[1])*(h.test(n[1])?i/100:1)]}function r(t,i){return parseInt(n.css(t,i),10)||0}var u,i=Math.max,t=Math.abs,f=/left|center|right/,e=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,h=/%$/,l=n.fn.position;n.position={scrollbarWidth:function(){if(void 0!==u)return u;var i,r,t=n("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),f=t.children()[0];return n("body").append(t),i=f.offsetWidth,t.css("overflow","scroll"),i===(r=f.offsetWidth)&&(r=t[0].clientWidth),t.remove(),u=i-r},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),u="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight?n.position.scrollbarWidth():0,height:u?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=n.isWindow(i[0]),u=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:r,isDocument:u,offset:!r&&!u?n(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}};n.fn.position=function(u){if(!u||!u.of)return l.apply(this,arguments);u=n.extend({},u);var w,a,v,p,y,d,h,b,g=n(u.of),tt=n.position.getWithinInfo(u.within),it=n.position.getScrollInfo(tt),k=(u.collision||"flip").split(" "),nt={};return d=9===(b=(h=g)[0]).nodeType?{width:h.width(),height:h.height(),offset:{top:0,left:0}}:n.isWindow(b)?{width:h.width(),height:h.height(),offset:{top:h.scrollTop(),left:h.scrollLeft()}}:b.preventDefault?{width:0,height:0,offset:{top:b.pageY,left:b.pageX}}:{width:h.outerWidth(),height:h.outerHeight(),offset:h.offset()},g[0].preventDefault&&(u.at="left top"),a=d.width,v=d.height,p=d.offset,y=n.extend({},p),n.each(["my","at"],function(){var t,i,n=(u[this]||"").split(" ");1===n.length&&(n=f.test(n[0])?n.concat(["center"]):e.test(n[0])?["center"].concat(n):["center","center"]);n[0]=f.test(n[0])?n[0]:"center";n[1]=e.test(n[1])?n[1]:"center";t=o.exec(n[0]);i=o.exec(n[1]);nt[this]=[t?t[0]:0,i?i[0]:0];u[this]=[s.exec(n[0])[0],s.exec(n[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===u.at[0]?y.left+=a:"center"===u.at[0]&&(y.left+=a/2),"bottom"===u.at[1]?y.top+=v:"center"===u.at[1]&&(y.top+=v/2),w=c(nt.at,a,v),y.left+=w[0],y.top+=w[1],this.each(function(){var l,b,e=n(this),o=e.outerWidth(),s=e.outerHeight(),d=r(this,"marginLeft"),rt=r(this,"marginTop"),ut=o+d+r(this,"marginRight")+it.width,ft=s+rt+r(this,"marginBottom")+it.height,f=n.extend({},y),h=c(nt.my,e.outerWidth(),e.outerHeight());"right"===u.my[0]?f.left-=o:"center"===u.my[0]&&(f.left-=o/2);"bottom"===u.my[1]?f.top-=s:"center"===u.my[1]&&(f.top-=s/2);f.left+=h[0];f.top+=h[1];l={marginLeft:d,marginTop:rt};n.each(["left","top"],function(t,i){n.ui.position[k[t]]&&n.ui.position[k[t]][i](f,{targetWidth:a,targetHeight:v,elemWidth:o,elemHeight:s,collisionPosition:l,collisionWidth:ut,collisionHeight:ft,offset:[w[0]+h[0],w[1]+h[1]],my:u.my,at:u.at,within:tt,elem:e})});u.using&&(b=function(n){var r=p.left-f.left,l=r+a-o,h=p.top-f.top,y=h+v-s,c={target:{element:g,left:p.left,top:p.top,width:a,height:v},element:{element:e,left:f.left,top:f.top,width:o,height:s},horizontal:l<0?"left":r>0?"right":"center",vertical:y<0?"top":h>0?"bottom":"middle"};a<o&&t(r+l)<a&&(c.horizontal="center");v<s&&t(h+y)<v&&(c.vertical="middle");c.important=i(t(r),t(l))>i(t(h),t(y))?"horizontal":"vertical";u.using.call(this,n,c)});e.offset(n.extend(f,{using:b}))})};n.ui.position={fit:{left:function(n,t){var h,e=t.within,u=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,r=u-s,f=s+t.collisionWidth-o-u;t.collisionWidth>o?r>0&&f<=0?(h=n.left+r+t.collisionWidth-o-u,n.left+=r-h):n.left=f>0&&r<=0?u:r>f?u+o-t.collisionWidth:u:r>0?n.left+=r:f>0?n.left-=f:n.left=i(n.left-s,n.left)},top:function(n,t){var h,o=t.within,u=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,r=u-s,f=s+t.collisionHeight-e-u;t.collisionHeight>e?r>0&&f<=0?(h=n.top+r+t.collisionHeight-e-u,n.top+=r-h):n.top=f>0&&r<=0?u:r>f?u+e-t.collisionHeight:u:r>0?n.top+=r:f>0?n.top-=f:n.top=i(n.top-s,n.top)}},flip:{left:function(n,i){var s,h,r=i.within,y=r.offset.left+r.scrollLeft,c=r.width,o=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-i.collisionPosition.marginLeft,a=l-o,v=l+i.collisionWidth-c-o,u="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,f="left"===i.at[0]?i.targetWidth:"right"===i.at[0]?-i.targetWidth:0,e=-2*i.offset[0];a<0?((s=n.left+u+f+e+i.collisionWidth-c-y)<0||s<t(a))&&(n.left+=u+f+e):v>0&&((h=n.left-i.collisionPosition.marginLeft+u+f+e-o)>0||t(h)<v)&&(n.left+=u+f+e)},top:function(n,i){var s,h,r=i.within,y=r.offset.top+r.scrollTop,c=r.height,o=r.isWindow?r.scrollTop:r.offset.top,l=n.top-i.collisionPosition.marginTop,a=l-o,v=l+i.collisionHeight-c-o,u="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,f="top"===i.at[1]?i.targetHeight:"bottom"===i.at[1]?-i.targetHeight:0,e=-2*i.offset[1];a<0?((h=n.top+u+f+e+i.collisionHeight-c-y)<0||h<t(a))&&(n.top+=u+f+e):v>0&&((s=n.top-i.collisionPosition.marginTop+u+f+e-o)>0||t(s)<v)&&(n.top+=u+f+e)}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments);n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments);n.ui.position.fit.top.apply(this,arguments)}}}}(),n.ui.position};u=[i(0),i(3)];void 0===(f="function"==typeof(r=e)?r.apply(t,u):r)||(n.exports=f)},function(n,t,i){function f(n){return n&&n.__esModule?n:{"default":n}}function w(n,t,i){null!=n[t]&&(n[t].dispose(),delete n[t],setTimeout(function(){return n.StatusBarComponent.messageError(i)},1500))}var d,p;Object.defineProperty(t,"__esModule",{value:!0});var g=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),e=f(i(0)),u=i(13),nt=f(i(57)),v=f(i(25)),r=f(i(9)),o=i(1),b=i(2),tt=f(i(60)),it=f(i(61)),l=f(i(10)),rt=f(i(68)),s=f(i(69)),k=f(i(74)),y=f(i(27)),a=f(i(80)),ut=f(i(82)),h=f(i(85)),c=f(i(8)),ft=f(i(5)),et=f(i(87)),ot=f(i(88)),st=f(i(92));d=i(4);p=function(){function n(t,i){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);var u=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return u._dataSources=[],u._removedDataSourceIds=[],u.SessionID=t.attr("SessionID"),u._language=t.attr("language")||"Auto",u._reiniturl=t.attr("reiniturl"),u.Events=n.Events,u.ActiveSubQueryPath=[],u.ActiveUnionSubQueryIndex=0,u._selectedLinkField=null,r.default.setHandlerPath(t.attr("HandlersPath")),r.default.setLanguage(u._language),r.default.loadStrings(u._language,function(n){u.isDisposed||(u.Localizer=JSON.parse(n.Value),u.MetaData=new tt.default(u.Localizer),u._init(t),"function"==typeof i&&i())}),u.isForCurrentUnionSubQuery=u.isForCurrentUnionSubQuery.bind(u),u.isForCurrentSubQuery=u.isForCurrentSubQuery.bind(u),u.getActiveUnionSubQueryPath=u.getActiveUnionSubQueryPath.bind(u),u.getActiveSubQueryPath=u.getActiveSubQueryPath.bind(u),u}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,d),g(n,[{key:"getActiveUnionSubQueryPath",value:function(){return this.getActiveSubQueryPath()+":"+this.ActiveUnionSubQueryIndex}},{key:"getActiveSubQueryPath",value:function(){return this.ActiveSubQueryPath.join("/")}},{key:"isForCurrentSubQuery",value:function(n){return null==n||null==n.SubQueryPath||0===n.SubQueryPath.length||n.SubQueryPath===this.getActiveSubQueryPath()}},{key:"isForCurrentUnionSubQuery",value:function(n){return null==n||null==n.UnionSubQueryPath||0===n.UnionSubQueryPath.length||n.UnionSubQueryPath===this.getActiveUnionSubQueryPath()}},{key:"_init",value:function(n){if(this.element=n,this._disableSessionKeeper=n.hasAttr("disableSessionKeeper"),this._style=this._getTheme(n),this._disableSessionKeeper||this.startPing(),this._initControls(),this._initEvents(),o.isMobile&&window.AQB.Mobile)return window.AQB.Mobile.updateLayout(this);this.makeLayout();this.notificationPanelController=new st.default(this,this.CanvasComponent.element)}},{key:"_initEvents",value:function(){this.CanvasComponent&&this._initCanvasEvents();this.GridComponent&&this._initGridEvents();this.NavBarComponent&&this._initNavBarEvents();this.TreeViewComponent&&this._initTreeViewEvents();this.EditorComponent&&this._initEditorEvents();this.ActiveSubQueryEditorComponent&&this._initActiveSubQueryEditorEvents();this.ActiveUnionSubQueryEditorComponent&&this._initActiveUnionSubQueryEditorEvents();this._subscribeCoreEvents()}},{key:"_initCanvasEvents",value:function(){var i=this,n=this.CanvasComponent,t=n.Events;n.on(t.CanvasOnAddTable,this._onAddDataSource.bind(this));n.on(t.CanvasOnRemoveTable,this._onDeleteDataSource.bind(this));n.on(t.CanvasOnMoveTable,this._onMoveObject.bind(this));n.on(t.CanvasOnTrashTable,this._onTrashObjectFromCanvas.bind(this));n.on(t.CanvasOnAddTableField,this._onAddTableFieldToCanvas.bind(this));n.on(t.CanvasOnAddUserQuery,this._onAddUserQueryToCanvas.bind(this));n.on(t.CanvasContextMenuCommand,this._onCanvasContextMenuCommand.bind(this));n.on(v.default.Events.CanvasLinkOnChanged,this._onCanvasLinkChanged.bind(this));n.on(v.default.Events.CanvasLinkOnSwitch,this._onCanvasLinkSwitch.bind(this));n.on(v.default.Events.CanvasLinkOnChanging,function(n,t){return i.emit(i.Events.LinkChanging,n,t)});n.on(v.default.Events.CanvasLinkOnDeleting,function(n,t){return i.emit(i.Events.LinkDeleting,n,t)})}},{key:"_initGridEvents",value:function(){var t=this,n=this.GridComponent;n.on(s.default.Events.GridOnRowChanged,this._onGridRowChanged.bind(this));n.on(s.default.Events.GridOnAddRow,this._onGridRowAdded.bind(this));n.on(s.default.Events.GridOnRemoveRow,this._onGridRowRemoved.bind(this));n.on(s.default.Events.GridOnMoveRows,this._onGridRowsMoved.bind(this));n.on(s.default.Events.SortingTypeChanged,function(n){return t._updateGridRow(n,4)});n.on(s.default.Events.SortingOrderChanged,function(n){return t._updateGridRow(n,5)});n.on(s.default.Events.GridRowChecked,function(n){return t._updateGridRow(n,1)});n.on(s.default.Events.GridOnAddTable,this._onAddDataSource.bind(this));n.on(s.default.Events.GridOnAddTableField,this._onAddTableFieldToCanvas.bind(this))}},{key:"_initEditorEvents",value:function(){var n=this.EditorComponent;n.on(h.default.Events.onChange,this._onEditorChange.bind(this));n.on(h.default.Events.onRefresh,this.refreshSql.bind(this));n.on(h.default.Events.onClear,this.clearSql.bind(this))}},{key:"_initActiveSubQueryEditorEvents",value:function(){var n=this.ActiveSubQueryEditorComponent;n.on(h.default.Events.onChange,this._onEditorChange.bind(this));n.on(h.default.Events.onRefresh,this._refreshActiveSubQuerySql.bind(this));n.on(h.default.Events.onClear,this.clearSql.bind(this))}},{key:"_initActiveUnionSubQueryEditorEvents",value:function(){var n=this.ActiveUnionSubQueryEditorComponent;n.on(h.default.Events.onChange,this._onEditorChange.bind(this));n.on(h.default.Events.onRefresh,this._refreshActiveUnionSubQuerySql.bind(this));n.on(h.default.Events.onClear,this.clearSql.bind(this))}},{key:"_initTreeViewEvents",value:function(){this.TreeViewComponent.on(k.default.Events.TreeDoubleClickNode,this._onTreeDoubleClick.bind(this))}},{key:"_initNavBarEvents",value:function(){var n=this.NavBarComponent;n.on(y.default.Events.BreadCrumbSelectNode,this._onBreadCrumbClick.bind(this));n.on(y.default.Events.TreeStructureSelectNode,this._onTreeStructureClick.bind(this));n.on(y.default.Events.NavBarAction,this._onNavBarAction.bind(this))}},{key:"_subscribeCoreEvents",value:function(){this._importContextMenuHandler=this._importContextMenu.bind(this);this._onDataReceivedHandler=this._onDataReceived.bind(this);u.Core.on(u.Core.Events.ContextMenuReceived,this._importContextMenuHandler);u.Core.on(u.Core.Events.DataReceived,this._onDataReceivedHandler)}},{key:"_unsubscribeCoreEvents",value:function(){u.Core.removeListener(u.Core.Events.ContextMenuReceived,this._importContextMenuHandler);u.Core.removeListener(u.Core.Events.DataReceived,this._onDataReceivedHandler)}},{key:"createPacketStateChange",value:function(){return new u.PacketStateChange(this.SessionID,this.getActiveUnionSubQueryPath())}},{key:"sendPacketDataChange",value:function(n,t){n.send(this.SessionID,this.getActiveUnionSubQueryPath(),t)}},{key:"_focusErrorElement",value:function(n,t){var i={SessionID:this.SessionID,UnionSubQueryPath:this.getActiveUnionSubQueryPath(),ElementId:n};r.default.focusErrorElement(i,t)}},{key:"_focusPropertiesForm",value:function(n,t){n.SessionID=this.SessionID;n.UnionSubQueryPath=this.getActiveUnionSubQueryPath();r.default.focusPropertiesForm(n,t)}},{key:"_onCanvasLinkChanged",value:function(n){n.IsDeleted?this.emit(this.Events.LinkDeleted,n):this.emit(this.Events.LinkChanged,n);u.Core.updateLink(n.dto());u.Core.sendDataToServer(this)}},{key:"_onCanvasLinkSwitch",value:function(n,t){r.default.switchLink({LeftDataSourceId:t.LeftDataSourceId,LeftField:t.LeftField,RightDataSourceId:t.RightDataSourceId,RightField:t.RightField,LinkToReplaceId:n.elementId,SessionID:this.SessionID})}},{key:"_onAddTableFieldToCanvas",value:function(n){var t=n.table,c=n.coordinates,u=null,s=n.fieldName,i="",r,h,f;if(o.isEmpty(s)||(i=s.substr(s.lastIndexOf(".")+1)),null!=this.CanvasComponent)null==(u=this.CanvasComponent.findTableByFullName(n.tableName))&&(n.procParam?t.procParam=n.procParam:u=this.CanvasComponent.findTableByName(n.tableName));else if(r=this.findDataSource(function(t){return t.NameFull===n.tableName}),null!=r&&null!=r.Fields&&(h=r.Fields.find(function(n){return n.NameFull===i}),null!=h))return void this._onCheckFieldInTable({table:r,field:h,checked:!0});null==u?(t.Fields.length>0?e.default.each(t.Fields,function(n,t){o.strcmp(t.NameStr,i)&&(t.IsSelected=!0)}):(f=new b.Dto.MetadataFieldDto,f.NameStr=i,f.IsSelected=!0,t.Fields=[f]),this._onAddDataSource({object:t,coordinates:c,isProc:n.isProc})):u.checkFieldInternal(i,!0,!0)}},{key:"_onAddDataSource",value:function(n){var f={abort:!1},t,i;(this.emit(this.Events.DataSourceAdding,n,f),f.abort)||(t=n.object,i=null,null!=this.CanvasComponent&&(i=this.CanvasComponent.addDataSource(n)),n.coordinates&&n.coordinates.length>=2?(t.X=n.coordinates[0],t.Y=n.coordinates[1]):null!=i&&i.offsetTop&&i.offsetLeft&&(t.X=i.offsetLeft,t.Y=i.offsetTop),t.Width=l.default.getDefaultWidth(),t.Height=l.default.getDefaultHeight(),t.UnionSubQueryPath=this.getActiveUnionSubQueryPath(),!1===n.delayed?(t.SessionID=this.SessionID,r.default.addDataSource(t,function(n){null==n&&null!=i&&i.dispose()})):(u.Core.addDataSource(t),u.Core._sendDataToServerDelayed(this)))}},{key:"_addUserQuery",value:function(n){var t=new b.Dto.DataSourceDto,i;t.Caption=t.Name=n.name;t.isUserQuery=t.IsNew=!0;i={query:n,object:t,width:l.default.getDefaultWidth(),height:l.default.getDefaultHeight()};this._onAddUserQueryToCanvas(i)}},{key:"_onAddUserQueryToCanvas",value:function(n){var t=this.CanvasComponent.addDataSource(n);n.coordinates||(n.coordinates=[t.offsetLeft,t.offsetTop]);r.default.addUserQuery(n.query.name,this.SessionID,this.getActiveUnionSubQueryPath(),n.coordinates,n.width,n.height)}},{key:"_onDeleteDataSource",value:function(n){var i={abort:!1},t;(this.emit(this.Events.DataSourceDeleting,n,i),i.abort)||(t=n.mdo,this._clearSelectedLinkFieldIfNeed(t.Index),t.IsSubQuery?this._deleteSubQueryDataSource(n):t.IsCTE?this._deleteCteDataSource(n):this._deleteDataSource(n))}},{key:"_deleteSubQueryDataSource",value:function(n){var i=this,t=a.default.OkCancelConfirmation(this,this._getDeleteDerivedTableText(),function(){return i._deleteDataSource(n)});t.show(this._getDeleteSubQueryDataSourceDialogPosition(n,t))}},{key:"_getDeleteSubQueryDataSourceDialogPosition",value:function(n,t){var i=n.element,o=i.parent().offset().left,u=i.offset(),f=u.top,r=u.left,e=this._getSize(t.element).width;return r-o-e<=0?{top:f,left:r+i.width()+2}:{top:f,left:r-e+1}}},{key:"_getSize",value:function(n){var t=n.clone(),i,r;return t.css("visibility","hidden"),e.default("body").append(t),i=t.outerWidth(),r=t.outerHeight(),t.remove(),{width:i,height:r}}},{key:"_deleteCteDataSource",value:function(n){var t=this,r=this.Localizer.Strings,i=n.mdo;this._deleteDataSource(n,function(){if(null!=t.NavBarComponent&&1===i.CteUsingsCount){var n=e.default('<a style="cursor: pointer; padding-right:">').text(r.GoToCte),u=e.default('<p style="white-space: pre; display: initial;">').text(r.DeleteUnusedCTE+"\n"+r.OperationCannotBeUndone+"\n").append(n),f=a.default.OkCancelConfirmation(t,u,function(){return t._deleteCteByPath(i.CteSubQueryPath)}).show(t._getRemoveUnusedCteDialogPosition(i.CteSubQueryPath));n.click(function(){t._changeActiveSubQueryByPath(i.CteSubQueryPath);f.dispose()})}})}},{key:"_handlePropertiesFormEditError",value:function(n,t,i,r,u){this.notificationPanelController.handlePropertiesFormError(n,t,i,r,u)}},{key:"_handlePropertiesFormEditSuccess",value:function(n,t){this.notificationPanelController.handlePropertiesFormEditSuccess(n,t)}},{key:"_getRemoveUnusedCteDialogPosition",value:function(n){var t=this.NavBarComponent.breadcrumbs.findSubQueryByPath(n);if(null!=t){var i=t.button,r=i.offset(),e=r.top,o=r.left;return{top:e+i.height()+2,left:o}}var u=this.NavBarComponent.element,f=u.offset(),s=f.top,h=f.left;return{top:s+u.height(),left:h}}},{key:"_deleteSubQueryByPathWithConfirmation",value:function(n,t){var r=this,i=n.offset(),u=i.top,f=i.left;a.default.OkCancelConfirmation(this,this._getDeleteDerivedTableText(),function(){return r._deleteSubQueryByPath(t)}).show({top:u+n.height()+2,left:f})}},{key:"_getDeleteDerivedTableText",value:function(){var n=this.Localizer.Strings;return n.DeleteDerivedTable+" "+n.OperationCannotBeUndone}},{key:"_deleteCteByPathWithConfirmation",value:function(n,t,i,r){var o=this,u=this.Localizer.Strings,s=""+(0==i?"":u.CTEIsReferredTimes.replace("{0}",t).replace("{1}",i)+"\n")+u.ConfirmCTERemoving+" "+u.OperationCannotBeUndone,h=e.default('<p style="white-space: pre; display: initial;">').text(s),f=n.offset(),c=f.top,l=f.left;a.default.OkCancelConfirmation(this,h,function(){return o._deleteCteByPath(r)}).show({top:c+n.height()+2,left:l})}},{key:"_deleteCteByPath",value:function(n){r.default.removeCteByPath({SessionID:this.SessionID,UnionSubQueryPath:this.getActiveUnionSubQueryPath(),Path:n})}},{key:"_deleteSubQueryByPath",value:function(n){r.default.removeSubQueryByPath({SessionID:this.SessionID,UnionSubQueryPath:this.getActiveUnionSubQueryPath(),Path:n})}},{key:"_deleteDataSource",value:function(n,t){var i=n.mdo,u;i.Index===this._propertiesForms.getCurrentObj().Index&&this._waitAndLoadFormForActiveUnion();u={SessionID:this.SessionID,ElementId:i.ElementId,DataSourceType:i.DataSourceType,UnionSubQueryPath:this.getActiveUnionSubQueryPath()};this._removedDataSourceIds.push(i.ElementId);r.default.removeDataSource(u,t)}},{key:"_onMoveObject",value:function(n){var t=this.CanvasComponent.getLayoutDto(n),i=n.mdo,u={SessionID:this.SessionID,ElementId:i.ElementId,DataSourceType:i.DataSourceType,X:t.X,Y:t.Y,Width:t.Width,Height:t.Height,UnionSubQueryPath:this.getActiveUnionSubQueryPath()};r.default.moveDataSource(u)}},{key:"_onTrashObjectFromCanvas",value:function(n){var t=n.mdo,i={SessionID:this.SessionID,ElementId:t.ElementId,UnionSubQueryPath:this.getActiveUnionSubQueryPath()};r.default.removeCte(i)}},{key:"_onGridRowAdded",value:function(n){this.emit(this.Events.GridOnRowAdding,n);this._addGridRow(n.dto());this.emit(this.Events.GridOnRowAdded,n)}},{key:"_addGridRow",value:function(n){n.SessionID=this.SessionID;n.isNew=!0;n.UnionSubQueryPath=this.getActiveUnionSubQueryPath();r.default.addGridRow(n)}},{key:"_onGridRowRemoved",value:function(n){var i={abort:!1},t;(this.emit(this.Events.GridOnRowRemoving,n,i),i.abort)||(t=n.dto(),t.SessionID=this.SessionID,t.UnionSubQueryPath=this.getActiveUnionSubQueryPath(),r.default.removeGridRow(t),this.emit(this.Events.GridOnRowRemoved,n))}},{key:"isQuoted",value:function(n){if(!n)return!1;var t=this.options.SyntaxProviderOptions;return n[0]===t.QuoteBegin&&n[n.length-1]===t.QuoteEnd}},{key:"buildNewGridRowExpression",value:function(n,t){var i=this.options.SyntaxProviderOptions;return n+"."+i.QuoteBegin+t+i.QuoteEnd}},{key:"_findGridRowCellBySubQueryPath",value:function(n){return null==this.GridComponent?null:this.GridComponent.findCellBySubQueryPath(n)}},{key:"_tryFocusGridCell",value:function(n){n._cellEditStart()}},{key:"_onGridRowsMoved",value:function(n){var t={SessionID:this.SessionID,UnionSubQueryPath:this.getActiveUnionSubQueryPath(),rows:n.map(function(n){return{Index:n.Index,NewIndex:n.element.index()}})};r.default.moveGridRows(t)}},{key:"_updateGridRow",value:function(n,t){if(abort={abort:!1},this.emit(this.Events.QueryColumnListItemChanging,n,abort),abort.abort)n.revertDto();else{var i=n.dto();i.SessionID=this.SessionID;i.ChangedCellIndex=t;i.UnionSubQueryPath=this.getActiveUnionSubQueryPath();r.default.updateGridRow(i);this.emit(this.Events.GridOnRowChanged,n)}}},{key:"getTableFieldExpression",value:function(n,t){return(o.isEmpty(n.NameInQuery)?n.Name:n.NameInQuery)+"."+t.NameStr}},{key:"_onLinkCreate",value:function(n){var t=n.Left.DataSourceIndex===n.Right.DataSourceIndex,i=n.Left.FieldName===n.Right.FieldName;if(!t||!i){if(t)return this._createSameTableLink(n.Left.DataSourceIndex,n.Left.FieldName,n.Right.FieldName);u.Core.addLink(n);u.Core.sendDataToServer(this)}}},{key:"_onLinkCreating",value:function(n,t){this.emit(this.Events.LinkCreating,n,t)}},{key:"_onDataSourceSubQueryClick",value:function(n){var t,i;if(this.emit(this.Events.ActiveUnionSubQueryChanging),t=n.mdo,!t.IsSubQuery&&!t.IsCTE)throw new Error("metaDataObject");i={SessionID:this.SessionID,Index:t.Index,UnionSubQueryPath:this.getActiveUnionSubQueryPath()};r.default.setUnionSubQueryFromDataSource(i)}},{key:"_onLinkedObjectSelected",value:function(n){var t=n.link,r=n.dataSource,u=this._findExistingDataSource(t,r),i;if(u)return this.CanvasComponent.blinkDataSource(u);i={delayed:!1};t.dataSourceIndex=r.mdo.Index;null==t.DataSource?i.object={Caption:t.Caption,Name:t.Name,Link:t,IsNew:!0,Fields:[],TempId:o.getTempId()}:(t.DataSource.Link=t,i.object=t.DataSource);this._onAddDataSource(i)}},{key:"_findExistingDataSource",value:function(n,t){var i=this.links.links.filter(function(i){return i.Right.dataSource.mdo.Object==n.Name&&n.LeftFields.includes(i.Right.FieldName)&&i.Left.dataSource.mdo.Object==t.mdo.Object&&n.RightFields.includes(i.Left.FieldName)});if(0!=i.length)return i[0].Right.dataSource}},{key:"_checkExistingDataSources",value:function(n,t,i,r){var u=t.Left.getDataSource(),f=t.Right.getDataSource();if(this._checkExistingDataSource(u,r))if(n.Direction){if(this._checkExistingFields(t.Left.FieldName,n.LeftFields))return u}else if(this._checkExistingFields(t.Left.FieldName,n.RightFields))return u;if(this._checkExistingDataSource(f,r))if(n.Direction){if(this._checkExistingFields(t.Right.FieldName,n.LeftFields))return f}else if(this._checkExistingFields(t.Right.FieldName,n.RightFields))return f}},{key:"_checkExistingDataSource",value:function(n,t){return-1!==t.indexOf(n)}},{key:"_checkExistingFields",value:function(n,t){return-1!==t.indexOf(n)}},{key:"_onCheckFieldInTable",value:function(n){var t=this,i;!this._isDeletedDataSource(n.table.ElementId)&&this._fireCheckingEvent(n)&&(i={SessionID:this.SessionID,DataSourceElementId:n.table.ElementId,nameFull:n.field.NameFull,UnionSubQueryPath:this.getActiveUnionSubQueryPath()},r.default.checkDataSourceField(i,function(){n.checked&&t.GridComponent&&setTimeout(function(){return t.GridComponent.scrollToBottom()},250)}))}},{key:"_isDeletedDataSource",value:function(n){return-1!=this._removedDataSourceIds.indexOf(n)}},{key:"_onCheckAllFieldsInTable",value:function(n){if(!this._isDeletedDataSource(n.table.ElementId)&&this._fireCheckingEvent(n)){var t={SessionID:this.SessionID,elementId:n.table.ElementId,allFieldsSelected:n.checked,UnionSubQueryPath:this.getActiveUnionSubQueryPath()};r.default.checkAllFields(t)}}},{key:"_onOrderByFieldInTable",value:function(n){var t={SessionID:this.SessionID,dataSourceElementId:n.table.ElementId,nameFull:n.field.object.NameFull,orderBy:n.orderBy,UnionSubQueryPath:this.getActiveUnionSubQueryPath()};r.default.orderByField(t)}},{key:"_onGroupByFieldInTable",value:function(n){var t={SessionID:this.SessionID,dataSourceElementId:n.table.ElementId,nameFull:n.field.object.NameFull,UnionSubQueryPath:this.getActiveUnionSubQueryPath()};r.default.groupByField(t)}},{key:"_onAggregateFieldInTable",value:function(n){var t={SessionID:this.SessionID,dataSourceElementId:n.table.ElementId,nameFull:n.field.object.NameFull,aggregation:n.aggregation,UnionSubQueryPath:this.getActiveUnionSubQueryPath()};r.default.aggregateField(t)}},{key:"_onAddInSubQuery",value:function(n){var t={SessionID:this.SessionID,dataSourceElementId:n.table.ElementId,fieldName:n.field.object.NameFull,haveNot:n.haveNot,isHaving:n.isHaving,UnionSubQueryPath:this.getActiveUnionSubQueryPath()};r.default.addInSubQuery(t)}},{key:"_onAddIsNull",value:function(n){var t={SessionID:this.SessionID,dataSourceElementId:n.table.ElementId,fieldName:n.field.object.NameFull,haveNot:n.haveNot,isHaving:n.isHaving,UnionSubQueryPath:this.getActiveUnionSubQueryPath()};r.default.addIsNull(t)}},{key:"_onAddUserExpression",value:function(n){var t={SessionID:this.SessionID,dataSourceElementId:n.table.ElementId,fieldName:n.field.object.NameFull,userExpressionIndex:n.userExpressionIndex,isHaving:n.isHaving,UnionSubQueryPath:this.getActiveUnionSubQueryPath()};r.default.addUserExpression(t)}},{key:"_onSelectExpression",value:function(n){if(null!=this.GridComponent){var t=null;null!=(t=n.isHaving?n.field.object.HavingConditions[n.expressionIndex]:n.field.object.WhereConditions[n.expressionIndex])&&this.GridComponent.getAllRows()[t.RowIndex].getCell(this.MetaData.FieldParamType.condition+t.ColumnIndex)._cellEditStart()}}},{key:"_fireCheckingEvent",value:function(n){var t={abort:!1};return n.checked?this.emit(this.Events.DataSourceFieldAdding,n,t):this.emit(this.Events.DataSourceFieldRemoving,n,t),!t.abort}},{key:"_onDblClickFieldInTable",value:function(n){this.GridComponent&&this.GridComponent.addOrUpdateRow(n.field).getCell(this.MetaData.FieldParamType.condition)._cellEditStart()}},{key:"_onAddUserField",value:function(n){this._sendUserField(n,{IsNew:!0})}},{key:"_onEditUserField",value:function(n){this._propertiesForms.loadByUserField(n.field);this._propertiesForms.show()}},{key:"_onRemoveUserField",value:function(n){var t=this._propertiesForms.getCurrentObj();t.hasOwnProperty("field")&&n.field.MetadataFullName===t.field.MetadataFullName&&this._waitAndLoadFormForActiveUnion();this._sendUserField(n.table,{field:n.field.NameFull,IsDeleted:!0})}},{key:"_sendUserField",value:function(n,t){var i=o.mergeObj({},n);i.UserFields=[t];u.Core.ExchangeObject.Canvas.DataSources.push(i);u.Core.sendDataToServer(this)}},{key:"_onEditorChange",value:function(){this.emit(this.Events.SQLTextChanged,this.clientSQL)}},{key:"clearSql",value:function(){this.setSql("")}},{key:"restoreLastGoodSql",value:function(){this.setSql(this.lastGoodSQL)}},{key:"setSql",value:function(n,t){this.SQL!==n&&(null!=this.EditorComponent&&this.EditorComponent.setSql(n),this._setSql(n,0,t))}},{key:"setActiveSubQuerySql",value:function(n,t){this.ActiveSubQueryEditorComponent.setSql(n);this._setSql(n,1,t)}},{key:"setActiveUnionSubQuerySql",value:function(n,t){this.ActiveUnionSubQueryEditorComponent.setSql(n);this._setSql(n,2,t)}},{key:"_setSql",value:function(n,t,i){r.default.setSql({SessionID:this.SessionID,UnionSubQueryPath:this.getActiveUnionSubQueryPath(),SubQueryPath:this.getActiveSubQueryPath(),TargetQueryPart:t,SQL:n},i)}},{key:"_onTreeDoubleClick",value:function(n){this.CanvasComponent&&(n.fieldName?this._onAddTableFieldToCanvas(n):this._onAddDataSource({object:n,isProc:n.isProc,isHelper:!0}))}},{key:"switchToQueryRoot",value:function(n){r.default.switchToQueryRoot({SessionID:this.SessionID},n)}},{key:"_onTreeStructureClick",value:function(n){this._changeActiveSubQueryByPath(n.Path)}},{key:"_onBreadCrumbClick",value:function(n){this._changeActiveSubQueryByPath(n.Path)}},{key:"_changeActiveSubQueryByPath",value:function(n,t){var u=this,i;this.emit(this.Events.ActiveUnionSubQueryChanging);i={SessionID:this.SessionID,path:n};this.ActiveSubQueryPath=n;this.ActiveUnionSubQueryIndex=0;r.default.changeActiveSubQueryByPath(i,function(){u._activeSubQueryChanged();t&&t()})}},{key:"changeActiveUnionSubQueryByIndex",value:function(n,t){this.emit(this.Events.ActiveUnionSubQueryChanging);var i={SessionID:this.SessionID,SubQueryPath:this.getActiveSubQueryPath(),index:n};this.ActiveUnionSubQueryIndex=n;r.default.changeActiveUnionSubQueryByIndex(i,t)}},{key:"changeActiveUnionSubQueryByPath",value:function(n){r.default.changeActiveUnionSubQuery({SessionID:this.SessionID,SubQueryPath:this.getActiveSubQueryPath(),UnionSubQueryPath:n})}},{key:"addUnionSubQuery",value:function(n){var t={SessionID:this.SessionID,SubQueryPath:this.getActiveSubQueryPath()};r.default.addUnionSubQuery(t,n)}},{key:"addDerivedTable",value:function(n){r.default.addDerivedTable(this._createEmptyDataSourceDto(),n)}},{key:"addNewNamedSubQuery",value:function(n){r.default.addNewNamedSubQuery(this._createEmptyDataSourceDto(),n)}},{key:"_createEmptyDataSourceDto",value:function(){return{SessionID:this.SessionID,Width:l.default.getDefaultWidth(),Height:l.default.getDefaultHeight(),UnionSubQueryPath:this.getActiveUnionSubQueryPath()}}},{key:"addNamedSubQuery",value:function(n,t){var i={SessionID:this.SessionID,path:n.Path,UnionSubQueryPath:this.getActiveUnionSubQueryPath()};r.default.addNamedSubQueryByPath(i,t)}},{key:"_removeActiveUnionSubQuery",value:function(n){var t=this;this._confirmUnionSubQueryRemoving(function(){r.default.removeActiveUnionSubQuery({SessionID:t.SessionID,UnionSubQueryPath:t.getActiveUnionSubQueryPath()},n)})}},{key:"_removeUnionSubQueryByIndex",value:function(n,t){var i=this;this._confirmUnionSubQueryRemoving(function(){r.default.removeUnionSubQueryByIndex({SessionID:i.SessionID,index:n,SubQueryPath:i.getActiveSubQueryPath()},t)})}},{key:"_confirmUnionSubQueryRemoving",value:function(n){var t=a.default.OkCancelConfirmation(this,this._getDeleteUnionSubQueryText(),function(){return n()});if(this.NavBarComponent){var i=this.NavBarComponent.element,r=i.offset(),e=r.top,o=r.left;t.show({top:e+i.height(),left:o+i.width()-this._getSize(t.element).width})}else if(this.CanvasComponent){var u=this.CanvasComponent.element,f=u.offset(),s=f.top,h=f.left;t.show({top:s,left:h+u.width()/2-this._getSize(t.element).width/2})}}},{key:"_getDeleteUnionSubQueryText",value:function(){var n=this.Localizer.Strings;return n.DeleteUnionSubQuery+" "+n.OperationCannotBeUndone}},{key:"copyUnionSubQuery",value:function(n){var t={SessionID:this.SessionID,UnionSubQueryPath:this.getActiveUnionSubQueryPath(),SubQueryPath:this.getActiveSubQueryPath()};r.default.copyUnionSubQuery(t,n)}},{key:"copyUnionSubQueryByIndex",value:function(n,t){var i={SessionID:this.SessionID,index:n,SubQueryPath:this.getActiveSubQueryPath()};r.default.copyUnionSubQueryByIndex(i,t)}},{key:"_encloseWithBrackets",value:function(n){var t={SessionID:this.SessionID,SubQueryPath:this.getActiveSubQueryPath(),UnionSubQueryPath:this.getActiveUnionSubQueryPath()};r.default.encloseWithBrackets(t,n)}},{key:"_encloseWithBracketsByIndex",value:function(n,t){var i={SessionID:this.SessionID,index:n,SubQueryPath:this.getActiveSubQueryPath()};r.default.encloseWithBracketsByIndex(i,t)}},{key:"_moveOutOfBracketsByIndex",value:function(n,t){var i={SessionID:this.SessionID,SubQueryPath:this.getActiveSubQueryPath(),index:n};r.default.moveOutOfBracketsByIndex(i,t)}},{key:"_moveUnionSubQueryToEnd",value:function(n,t,i){var u={SessionID:this.SessionID,UnionSubQueryPath:n,moveInfo:t};r.default.moveUnionSubQueryToEnd(u,i)}},{key:"_moveUnionSubQueryBeforeSubQuery",value:function(n,t,i){var u={SessionID:this.SessionID,UnionSubQueryPath:n,moveInfo:t};r.default.moveUnionSubQueryBeforeSubQuery(u,i)}},{key:"_changeUnionSubQueryOperator",value:function(n,t,i){var u={SessionID:this.SessionID,UnionSubQueryPath:n,operator:t};r.default.changeUnionSubQueryOperator(u,i)}},{key:"_changeUnionSubQueryOperatorByIndex",value:function(n,t,i){var u={SessionID:this.SessionID,SubQueryPath:this.getActiveSubQueryPath(),index:n,operator:t};r.default.changeUnionSubQueryOperatorByIndex(u,i)}},{key:"_onCanvasContextMenuCommand",value:function(n){var t=n.action,i;"new-union-sub-query"===t?this.addUnionSubQuery():"add-derived-table"===t?this.addDerivedTable():"remove"===t?this._removeActiveUnionSubQuery():"add-cte-new"===t?this.addNewNamedSubQuery():-1!==t.indexOf("add-cte-query")?this.addNamedSubQuery(n.cte?n.cte:this.getCteByName(t.split(":")[1])):"copy-union-sub-query"===t?this.copyUnionSubQuery():"enclose-with-brackets"===t?this._encloseWithBrackets():"properties"===t?this._openProperties():(i=n.item||{},u.Core.ExchangeObject.ContextMenu.Action=t,u.Core.ExchangeObject.ContextMenu.Data=i.data||n.data||this.getActiveUnionSubQueryPath(),u.Core.sendDataToServer(this))}},{key:"getCteByName",value:function(n){for(var i,t=[this.QueryStructure];t.length;){if(i=t.pop(),i.Caption===n&&i.IsSubQueryCTE)return i;t.push.apply(t,i.Items)}}},{key:"_onNavBarAction",value:function(n){var t=n.Key,r=n.Path,f=n.Data,i=n.Index;"NewUnionSubQuery"===t?this.addUnionSubQuery():"SelectUnionSubQuery"===t?this.changeActiveUnionSubQueryByIndex(i):"RemoveUnionSubQuery"===t?this._removeUnionSubQueryByIndex(i):"EncloseWithBrackets"===t?this._encloseWithBracketsByIndex(i):"MoveOutOfBrackets"===t?this._moveOutOfBracketsByIndex(i):"CopyToNewUnionSubQuery"===t?this.copyUnionSubQueryByIndex(i):"MoveUnionSubQueryToEnd"===t?this._moveUnionSubQueryToEnd(r,f):"MoveUnionSubQueryBeforeSubQuery"===t?this._moveUnionSubQueryBeforeSubQuery(r,f):"ChangeUnionSubQueryOperator"===t.split("-")[0]?this._changeUnionSubQueryOperator(r,t.split("-")[1]):(u.Core.ExchangeObject.UnionSubQueryActions.push(n),u.Core.sendDataToServer(this))}},{key:"_onGridRowChanged",value:function(n){var f=this,t=this.MetaData.FieldParamType,i={abort:!1};if(this.emit(this.Events.GridOnRowChanging,n,i),i.abort)n.row.revertDto();else if(i={abort:!1},n.row.isEmpty()?this.emit(this.Events.GridOnRowAdding,n.row,i):this.emit(this.Events.QueryColumnListItemChanging,n.row,i),i.abort)n.row.revertDto();else{var h=n.row,r=n.key,c=n.callback,e=n.oldValue,s=n.newValue,l=[];!function(i,u){var h=u.dto(),l,a,c;switch(h.AfterCustomEdit=n.afterCustomEdit,h.ChangedCellIndex=r,h.UnionSubQueryPath=f.getActiveUnionSubQueryPath(),r){case t.visible:f._checkDataSourceFieldByExpression(h.Expression,s);i.push(h);break;case t.expression:l=h.Select;o.isEmpty(e)&&e!==s&&(l=!0,h.Select=!0);f._updateDataSourceFieldsByChangedRowExpression(e,s,l);i.push(h);break;case t.sorting:case t.sortingOrder:for(a=f.GridComponent.getAllRows(),c=0;c<a.length;c++)i.push(a[c].dto());break;default:null==r?h.NewIndex=u.element.index():r>t.condition&&(h.ChangedCellIndex=t.condition);i.push(h)}}(l,h);u.Core.updateGridRows(l);n.delayed?u.Core._sendDataToServerDelayed(this):u.Core.sendDataToServer(this,function(n){null!=r&&null==n.ErrorElement&&f.notificationPanelController.handleGridRowEditSuccess(h.elementId,r);c&&c(n)});this.emit(this.Events.GridOnRowChanged,n)}}},{key:"_updateDataSourceFieldsByChangedRowExpression",value:function(n,t,i){null!=this.CanvasComponent&&(o.isEmpty(n)||this._checkDataSourceFieldByExpression(n,!1),i&&!o.isEmpty(t)&&this._checkDataSourceFieldByExpression(n,i))}},{key:"_checkDataSourceFieldByExpression",value:function(n,t){var u=this._extractTableAndField(n),r=u.field,f=u.table,i;if(null==r||null==f)return null;i=this.CanvasComponent.findTableByName(f);null!=i&&i.containsField(r)&&i.checkFieldInternal(r,t)}},{key:"_extractTableAndField",value:function(n){return-1===n.indexOf(".")||-1!==n.indexOf(" ")?{table:null,field:null}:{table:n.substr(0,n.indexOf(".")),field:n.substr(n.indexOf(".")+1)}}},{key:"refreshSql",value:function(n){this.SQLError=null;this.setSql(this.clientSQL,n);this.emit(this.Events.RefreshSQLClick)}},{key:"_refreshActiveSubQuerySql",value:function(n){this.SQLError=null;var t=this.ActiveSubQueryEditorComponent.getSql();this.setActiveSubQuerySql(t,n);this.emit(this.Events.RefreshSQLClick)}},{key:"_refreshActiveUnionSubQuerySql",value:function(n){this.SQLError=null;var t=this.ActiveUnionSubQueryEditorComponent.getSql();this.setActiveUnionSubQuerySql(t,n);this.emit(this.Events.RefreshSQLClick)}},{key:"update",value:function(n){r.default.update({SessionID:this.SessionID},n)}},{key:"fullUpdate",value:function(n){r.default.fullUpdate({SessionID:this.SessionID},n)}},{key:"undo",value:function(){r.default.undo({SessionID:this.SessionID})}},{key:"_getSelectedLinkFieldDescription",value:function(){return this._selectedLinkField}},{key:"_setSelectedLinkField",value:function(n,t){this._selectedLinkField={field:n,dataSourceIndex:t}}},{key:"_clearSelectedLinkFieldIfNeed",value:function(n){null!=this._selectedLinkField&&this._selectedLinkField.dataSourceIndex===n&&this._clearSelectedLinkField()}},{key:"_clearSelectedLinkField",value:function(){this._selectedLinkField=null}},{key:"_createLinkWithSelectedField",value:function(n,t){var r=this._getSelectedLinkFieldDescription(),u,f,i,e;if(null!=r){if(u=r.field,f=r.dataSourceIndex,f===t)return this._createSameTableLink(t,u.NameStr,n.NameStr);if(i={IsNew:!0,Left:{DataSourceIndex:f,FieldName:u.NameFull},Right:{DataSourceIndex:t,FieldName:n.NameFull}},e={abort:!1},this._onLinkCreating(i,e),e.abort)return!1;this.links.createLink(i);this.CanvasComponent.redraw();this._onLinkCreate(i)}}},{key:"_createSameTableLink",value:function(n,t,i){var u=this.CanvasComponent.objects.find(function(t){return t.mdo.Index===n}),r,f;null!=u&&(r=u.mdo,f={Name:r.Name,Alias:r.Alias,Fields:[],IsNew:!0,TempId:o.getTempId(),Link:{LeftFields:[t],RightFields:[i],Direction:0,DataSourceIndex:n}},this._onAddDataSource({object:f,delayed:!1}))}},{key:"wrapToDerivedTable",value:function(){r.default.wrapToDerivedTable({SessionID:this.SessionID,UnionSubQueryPath:this.getActiveUnionSubQueryPath()})}},{key:"_initControls",value:function(){this.initControls();this.CanvasComponent&&this._initLinks();e.default(".qb-ui-layout")&&e.default(".qb-ui-layout").prepend('<div class="qb-ui-overlay">')}},{key:"initControls",value:function(){this.TreeViewComponent=this._initControl(k.default,c.default.treeViewSelector);this.NavBarComponent=this._initControl(y.default,c.default.navbarSelector);this.CanvasComponent=this._initControl(it.default,c.default.canvasSelector);this.GridComponent=this._initControl(s.default,c.default.gridSelector);this.StatusBarComponent=this._initControl(rt.default,c.default.statusBarSelector);this.UserQueriesComponent=this._initControl(ut.default,c.default.userQueriesSelector);this.EditorComponent=this._initEditorControl("Query");this.ActiveSubQueryEditorComponent=this._initEditorControl("SubQuery");this.ActiveUnionSubQueryEditorComponent=this._initEditorControl("UnionSubQuery");this.CanvasComponent&&(this._propertiesForms=this.CanvasComponent.propertiesFormsContainer)}},{key:"_initControl",value:function(n,t){var i=o.getControl(t,this.SessionID);if(i)return new n(i,this)}},{key:"_initEditorControl",value:function(n){var t=o.getEditorControl(c.default.editorSelector,this.SessionID,n);if(t)return new h.default(t,this)}},{key:"_initLinks",value:function(){var n=this;this.links=new nt.default(this);this.links.on("centerButtonClick",function(t,i){n.CanvasComponent.selectLink(i);ft.default.showForElement(i.graphics.line);t.preventDefault()});this.links.on("lineClick",function(t,i){return n.CanvasComponent.selectLink(i)})}},{key:"resetLayout",value:function(){this.CanvasComponent&&(this.CanvasComponent.refresh(),this.CanvasComponent.resetLayout());this.GridComponent&&this.GridComponent.updateExpression(this.getDataSourcesDtos())}},{key:"show",value:function(n){var t=this;this.TreeViewComponent&&this.TreeViewComponent.show();this.NavBarComponent&&this.NavBarComponent.show();this.CanvasComponent&&this.CanvasComponent.show();this.GridComponent&&this.GridComponent.show();this.UserQueriesComponent&&this.UserQueriesComponent.show();this.EditorComponent&&this.EditorComponent.show();setTimeout(function(){t.resetLayout(n);null!=n&&n()},0)}},{key:"hide",value:function(){this.TreeViewComponent&&this.TreeViewComponent.hide();this.NavBarComponent&&this.NavBarComponent.hide();this.CanvasComponent&&this.CanvasComponent.hide();this.StatusBarComponent&&this.StatusBarComponent.hide();this.GridComponent&&this.GridComponent.hide();this.UserQueriesComponent&&this.UserQueriesComponent.hide();this.EditorComponent&&this.EditorComponent.hide()}},{key:"_versionToNumber",value:function(n){return Number(n.replace(/(\.|^)(\d)(?=\.|$)/g,"$10$2").replace(/(\d+)\.(?:(\d+)\.*)/,"$1.$2"))}},{key:"droppableGetTopElement",value:function(){return this.d_topElement}},{key:"_droppableDetermineTopElement",value:function(){for(var u,i,r,n=0,t=0;t<this.d_hoveringOverElements.length;t++)i=e.default('*[top-droppable-id=" + this.d_hoveringOverElements[i] + "]'),r=Number(e.default(i).parents(".qb-ui-table:eq(0)").css("z-index")),r>n&&(n=r,u=i);return u}},{key:"droppableOver",value:function(n){this.d_hoveringOverElements.push(this.d_i);e.default(n).attr("top-droppable-id",this.d_i);this.d_i++;this.d_topElement=this._droppableDetermineTopElement()}},{key:"droppableOut",value:function(n){var t=this.d_hoveringOverElements.indexOf(parseInt(e.default(n).attr("top-droppable-id")));this.d_hoveringOverElements.splice(t,1);this.d_topElement=this._droppableDetermineTopElement()}},{key:"droppableClear",value:function(){this.d_hoveringOverElements=[];this.d_topElement=null;this.d_i=0}},{key:"setUserData",value:function(n){u.Core.setUserData(n);u.Core.sendDataToServer()}},{key:"dispose",value:function(n){var i=this.SessionID;for(var t in null!=window.AQB&&AQB.Web.QueryBuilderContainer.remove(this.SessionID),this.isDisposed=!0,this._unsubscribeCoreEvents(),this)"isDisposed"!=t&&this._disposeProperty(t);null!=n&&!0!==n||r.default.dispose({SessionID:i})}},{key:"_disposeProperty",value:function(n){this[n]&&this[n].dispose&&this[n].dispose();delete this[n]}},{key:"setEditor",value:function(n){this.EditorComponent&&this.EditorComponent.setEditor(n)}},{key:"showOverlay",value:function(n){e.default(".qb-ui-overlay__message").html(n);e.default(".qb-ui-overlay").show();this.CanvasComponent&&this.CanvasComponent.element.css("overflow","hidden")}},{key:"hideOverlay",value:function(){e.default(".qb-ui-overlay__message").empty();e.default(".qb-ui-overlay").hide();this.CanvasComponent&&this.CanvasComponent.element.css("overflow","auto")}},{key:"validateExpression",value:function(n,t){r.default.validateExpression({expression:n},this.SessionID,t)}},{key:"validateCondition",value:function(n,t){r.default.validateExpression({condition:n},this.SessionID,t)}},{key:"_checkIsErrorElementExists",value:function(n,t,i){r.default.checkIsErrorElementExists({elementId:n,metadataFieldName:t,SessionId:this.SessionID},function(n){return i(n.Value)})}},{key:"_importQueryStructure",value:function(n){this.QueryStructure=n;this._importActiveSubQueryPath(n);this.NavBarComponent&&this.NavBarComponent.updateQueryStructure(n)}},{key:"_importActiveSubQueryPath",value:function(n){if(n.Active)this.ActiveSubQueryPath=n.Path;else for(var t=0;t<n.Items.length;t++)this._importActiveSubQueryPath(n.Items[t])}},{key:"_importContextMenu",value:function(n){this.CanvasComponent&&this.CanvasComponent._updateContextMenu(n.Canvas)}},{key:"_importSQLEError",value:function(n){this.SQLError=n;this.emit(this.Events.SqlError,this,n);this.emit(this.Events.SQLError,this,n);var t=function(t){t&&t.showError(n)};if(null!=n&&!o.isEmpty(n.Message))switch(n.TargetQueryPart){case 0:return t(this.EditorComponent);case 1:return t(this.ActiveSubQueryEditorComponent);case 2:return t(this.ActiveUnionSubQueryEditorComponent)}}},{key:"clearSqlError",value:function(){this.EditorComponent&&this.EditorComponent.clearError();this.ActiveSubQueryEditorComponent&&this.ActiveSubQueryEditorComponent.clearError();this.ActiveUnionSubQueryEditorComponent&&this.ActiveUnionSubQueryEditorComponent.clearError()}},{key:"_onDataReceived",value:function(n){var i,t;if(null!=n&&!this.isDisposed)if(!n.MetadataLoadingError||null!=n.SessionID&&n.SessionID!==this.SessionID||this.StatusBarComponent&&this.StatusBarComponent.messageError(n.MetadataLoadingError),n.SessionID===this.SessionID){if(this.isForCurrentSubQuery(n)&&this.isForCurrentUnionSubQuery(n)){if(i=this.getActiveUnionSubQueryPath(),n.AssemblyInfo&&this._importAssemblyInfo(n.AssemblyInfo),n.Options&&this._importOptions(n.Options),n.SQLEditorError)return this._importSQLEError(n.SQLEditorError);(null!=n.QueryParams&&(this.queryParams=n.QueryParams),this.clearSqlError(),null!=n.SQL&&this._importSQL(n.SQL),null!=n.ActiveSubQuerySQL&&this._importActiveSubQuerySQL(n.ActiveSubQuerySQL),null!=n.ActiveUnionSubQuery&&this._importActiveUnionSubQuery(n.ActiveUnionSubQuery),n.TreeView&&this.TreeViewComponent&&this.TreeViewComponent.importData(n.TreeView),n.NavBar&&this.NavBarComponent&&this.NavBarComponent.updateUnions(n.NavBar.Items),n.QueryStructure&&this._importQueryStructure(n.QueryStructure),n.Canvas&&this._importCanvas(n.Canvas),n.Grid&&this.GridComponent&&this._importGrid(n.Grid),n.PropertiesForms&&this.CanvasComponent)&&(this._propertiesForms.fill(n.PropertiesForms),i!==this.getActiveUnionSubQueryPath()&&this._activeSubQueryChanged());(n.UserQueries&&this.UserQueriesComponent&&this.UserQueriesComponent.fill(n.UserQueries),this.StatusBarComponent&&null==n.MetadataLoadingError&&(n.Message?this.StatusBarComponent.messageText(n.Message.Text,n.Message.Class):this.StatusBarComponent.hide()),n.SleepMode&&this._goToSleepMode(),this.UserObjectsSQL=n.UserObjectsSQL,null!=n.ErrorElement)&&(t=n.ErrorElement,this.notificationPanelController.handleGridError(t.Error,t.ErrorValue,t.ErrorGridColumnIndex,t.ElementId,t.MetadataFieldName));this.notificationPanelController.handleDataReceived()}}else null!=n.SessionID&&console.error('The data returned from server has different InstanceId tag. Expected: "%s", received: "%s".',this.SessionID,n.SessionID)}},{key:"_activeSubQueryChanged",value:function(){this._propertiesForms.activeSubQueryChanged();this._clearSelectedLinkField()}},{key:"_importCanvas",value:function(n){null!=this.CanvasComponent?this.CanvasComponent.importData(n):this._dataSources=null!=n.DataSources?n.DataSources:[];this._updateRemovedDataSources(n.DataSources)}},{key:"_updateRemovedDataSources",value:function(n){this._removedDataSourceIds=this._removedDataSourceIds.filter(function(t){return null!=n.find(function(n){return n.ElementId===t})})}},{key:"_importGrid",value:function(n){var t=this;this.GridComponent.importDto(n);setTimeout(function(){t.isDisposed||t.GridComponent.updateExpression(t.getDataSourcesDtos())},4)}},{key:"_importAssemblyInfo",value:function(n){if("_TRIAL"===n.BuildType)return this.element.attr("trial",!0);if("_STD"===n.BuildType)return w(t=this,"UserQueriesComponent","UserQueries is not available"),w(t,"ActiveSubQueryEditorComponent","ActiveSubQueryEditor not available"),void w(t,"ActiveUnionSubQueryEditorComponent","ActiveUnionSubQueryEditor not available");var t;if("_PRO"!==n.BuildType)throw new Error("Unknown build type");}},{key:"_importOptions",value:function(n){this.options=n;this._updateSyntaxProviderOptions(n.SyntaxProviderOptions)}},{key:"_updateSyntaxProviderOptions",value:function(n){this.NavBarComponent&&(this.NavBarComponent.enableUnions(n.IsSupportUnions),this.NavBarComponent.enableCte(n.IsSupportCTE));this.GridComponent&&this.GridComponent.updateAggregateColumn();this.CanvasComponent&&this.CanvasComponent.updateAggregationContextMenu()}},{key:"_importSQL",value:function(n){this.EditorComponent&&this.EditorComponent.setSql(n);var t=this.SQL;this.SQL=this.lastGoodSQL=n;t!==this.SQL&&(this.emit(this.Events.SqlChanged,this),this.emit(this.Events.SQLUpdated,this))}},{key:"_goToSleepMode",value:function(){this.EditorComponent&&this.EditorComponent.showMessage(this.Localizer.Strings.VisualBuildingNotSupported)}},{key:"_importActiveSubQuerySQL",value:function(n){this.activeSubQuerySQL=n;this.ActiveSubQueryEditorComponent&&this.ActiveSubQueryEditorComponent.setSql(n)}},{key:"_importActiveUnionSubQuery",value:function(n){this.activeUnionSubQuerySQL=n.SQL;this.ActiveUnionSubQueryEditorComponent&&this.ActiveUnionSubQueryEditorComponent.setSql(n.SQL);this.ActiveUnionSubQueryIndex!==n.Index&&(this.ActiveUnionSubQueryIndex=n.Index,this.emit(this.Events.ActiveUnionSubQueryChanged))}},{key:"startPing",value:function(){var n=0;setTimeout(function t(){r.default.ping(function(i){!0===i.Value&&++n<3&&setTimeout(t,3e5)})},3e5)}},{key:"findDataSource",value:function(n){var o=this.getDataSourcesDtos(),i=!0,u=!1,f=void 0,e,t,r;try{for(t=o[Symbol.iterator]();!(i=(e=t.next()).done);i=!0)if(r=e.value,n(r))return r}catch(n){u=!0;f=n}finally{try{!i&&t.return&&t.return()}finally{if(u)throw f;}}}},{key:"getDataSourcesDtos",value:function(){return null==this.CanvasComponent?this._dataSources:this.CanvasComponent.dataSourceDtos}},{key:"getDataSources",value:function(){return null==this.CanvasComponent?null:this.CanvasComponent.objects}},{key:"getCanvasDataSources",value:function(){return this.CanvasComponent?this.CanvasComponent.getDataSources():[]}},{key:"getLinks",value:function(){return this.links.links}},{key:"getQueryColumnList",value:function(){if(this.GridComponent)return this.GridComponent.getAllRows()}},{key:"_reinit",value:function(){var n=this;this.showOverlay(this.Localizer.Strings.SessionRestored);this._events[this.Events.SessionExpired]?this.emit(this.Events.SessionExpired,function(){return n._reinitSuccess()},function(){return n._reinitError()}):null!=this._reiniturl&&""!==this._reiniturl?r.default.ajax({url:this._reiniturl,type:"GET",callback:function(){return n._reinitSuccess()},errorcallback:function(){return n._reinitError()},reinit:!0}):console.error("Session has expired. Specify reinitUrl to the params list of the AQB.Web.UI.QueryBuilder constructor to make session reinitialization possible.")}},{key:"_reinitSuccess",value:function(){if(this.SQL){var n={SessionID:this.SessionID,SQL:this.SQL,Reconnect:!0};r.default.post("setSql",n,r.default.repeatLastAction)}else null==r.default.repeatLastAction()&&console.error("Session reinitialization failed. Please ensure that (a) QueryBuilder instance on the server is successrully created with the given InstanceId, and (b) the same InstanceId is used to create AQB layout suits and passed to the startApplication method.");this.hideOverlay()}},{key:"_reinitError",value:function(){alert(this._app.Localizer.Strings.SessionRestoreError)}},{key:"_openProperties",value:function(){this._propertiesForms.loadActiveUnionSubQuery();this._propertiesForms.show()}},{key:"_waitAndLoadFormForActiveUnion",value:function(){var n=function(){this._propertiesForms.loadActiveUnionSubQuery();u.Core.removeListener(u.Core.Events.SyncFinished,n)}.bind(this);u.Core.on(u.Core.Events.SyncFinished,n)}},{key:"_getTheme",value:function(n){return AQB.Web.theme||ot.default[n.attr("theme")]}},{key:"makeLayout",value:function(){et.default(this)}},{key:"getDataSourceByElementId",value:function(n){for(var i=this.getCanvasDataSources(),t=0;t<i.length;t++)if(i[t].mdo.ElementId===n)return i[t];throw new Error("DataSource with elementId '"+n+"' not found");}},{key:"clientSQL",get:function(){if(this.EditorComponent)return this.EditorComponent.getSql()}},{key:"QBTRIAL",get:function(){return"true"===this.element.attr("trial")}}]),n}();p.Events={SqlChanged:"SqlChanged",SqlError:"SqlError",SQLTextChanged:"SQLTextChanged",RefreshSQLClick:"RefreshSQLClick",GridOnRowChanging:"GridOnRowChanging",GridOnRowChanged:"GridOnRowChanged",GridOnRowAdding:"GridOnRowAdding",GridOnRowAdded:"GridOnRowAdded",GridOnRowRemoved:"GridOnRowRemoved",GridOnRowRemoving:"GridOnRowRemoving",SessionExpired:"SessionExpired",OnError:"OnError",DataSourceAdding:"DataSourceAdding",DataSourceDeleting:"DataSourceDeleting",DataSourceFieldAdding:"DataSourceFieldAdding",DataSourceFieldAdded:"DataSourceFieldAdded",DataSourceFieldRemoving:"DataSourceFieldRemoving",DataSourceFieldRemoved:"DataSourceFieldRemoved",LinkCreating:"LinkCreating",LinkCreated:"LinkCreated",LinkChanging:"LinkChanging",LinkChanged:"LinkChanged",LinkDeleting:"LinkDeleting",LinkDeleted:"LinkDeleted",ActiveUnionSubQueryChanging:"ActiveUnionSubQueryChanging",ActiveUnionSubQueryChanged:"ActiveUnionSubQueryChanged",QueryColumnListItemChanging:"QueryColumnListItemChanging",QueryColumnListItemChanged:"QueryColumnListItemChanged",DataSourceAdded:"DataSourceAdded",SQLUpdated:"SQLUpdated",SQLError:"SQLError"};t.default=p},function(n,t,i){function r(n){return n&&n.__esModule?n:{"default":n}}var u,f;Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=r(i(0)),s=(i(2),r(i(25)));u=i(4);f=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);var i=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return i._app=t,i.links=[],i}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,u),e(n,[{key:"createLink",value:function(n){var i=this,t=new s.default(n,this._app);return t._onCenterClick=function(n){return i.emit("centerButtonClick",n,t)},t._onLineClick=function(n){return i.emit("lineClick",n,t)},this.push(t),t}},{key:"updateLink",value:function(n,t){n.dto(t)}},{key:"draw",value:function(){var n=this;setTimeout(function(){n._app.isDisposed||o.default.each(n.links,function(n,t){t.draw()})},50)}},{key:"push",value:function(n){this.links.push(n)}},{key:"getByDto",value:function(n,t){for(var r,i=this.links.length-1;i>=0;i--)if(r=this.links[i],this._compareLinkWithDto(r,n,t))return r;return null}},{key:"_compareLinkWithDto",value:function(n,t,i){return!(!n.Left||!n.Right)&&(null==n.Left.dataSource||n.Left.dataSource.mdo.NameInQuery===t.DataSourceName)&&n.Left.DataSourceName===t.DataSourceName&&(null==n.Right.dataSource||n.Right.dataSource.mdo.NameInQuery===i.DataSourceName)&&n.Right.DataSourceName===i.DataSourceName&&n.Left.FieldName===t.FieldName&&n.Right.FieldName===i.FieldName}},{key:"clear",value:function(){for(var n=this.links.length-1;n>=0;n--)this.disposeByIndex(n)}},{key:"disposeAllMarked",value:function(){for(var n=this.links.length-1;n>=0;n--)this.links[n].ToDelete&&this.disposeByIndex(n)}},{key:"disposeByIndex",value:function(n){this.links[n].dispose();this._removeFromArray(n)}},{key:"disposeLink",value:function(n){n.dispose();this._removeFromArray(this.links.indexOf(n))}},{key:"_removeFromArray",value:function(n){this.links.splice(n,1)}},{key:"findByTableIndex",value:function(n){for(var i,r=[],t=this.links.length-1;t>=0;t--)i=this.links[t],i.Left.DataSourceIndex!=n&&i.Right.DataSourceIndex!=n||r.push(i);return r}},{key:"findByDataSource",value:function(n){for(var i,r=[],t=this.links.length-1;t>=0;t--)i=this.links[t],i.Left.getDataSource()!==n&&i.Right.getDataSource()!=n||r.push(i);return r}},{key:"markAllForDelete",value:function(){for(var n=this.links.length-1;n>=0;n--)this.links[n].ToDelete=!0}}]),n}();t.default=f},function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=i(1),f=i(2),e=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this._app=t;this.Type=0}return u(n,[{key:"dto",value:function(n){var t,i;if(null==n)return t=new f.Dto.DataSourceLinkPartDto,t.DataSourceIndex=this.DataSourceIndex,r.Utils.CopyInner(this,t),t;i=this._app.CanvasComponent.findTablesByIndex(n.DataSourceIndex).filter(function(n){return!n.disposed});this.dataSource=i.last();r.Utils.Copy(n,this)}},{key:"getElement",value:function(){var n=this.getDataSource(),t=n?n.getFieldByName(this.FieldName):this.field;return t&&t.element.is(":visible")?t.element:n?n.titleBar.element:this.field}},{key:"getDataSource",value:function(){return this.dataSource}}]),n}();t.default=e},function(n,t,i){function e(n){return n&&n.__esModule?n:{"default":n}}var o;Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=i(2),u=i(1),f=(e(i(7)),e(i(5)));o=function(){function n(t,i){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this.leftType=i.leftType;this.rightType=i.rightType;this.thin=i.thin||3;this.thinBg=i.thinBg||15;this.displayKeyCardinality=i.displayKeyCardinality;this.leftCardinality=i.leftCardinality;this.rightCardinality=i.rightCardinality;this.similarLinks=i.similarLinks;this.showSwitchLinkButton=0!=i.similarLinks.length;this.onSwitchClick=i.onSwitchClick;this._app=t;var u=t.CanvasComponent;this._renderer=u.r;this._canvas=this._renderer.getParent();this.displayKeyCardinality=u.displayKeyCardinality;this.style=u.linksStyle;this.line=this._renderer.line(this.thin,i.onClick);this.style==r.Enum.LinkStyle.MSAccess?this._configMSAccessStyle():this.style==r.Enum.LinkStyle.MSSQL&&this._configMSSQLStyle(i.centerOnClick);this.displayKeyCardinality&&this._configKeyCardinality();this.showSwitchLinkButton&&this._configSwitchButton()}return s(n,[{key:"update",value:function(n,t,i){this.leftCardinality=n.Cardinality;this.rightCardinality=t.Cardinality;var o=this._calculateBox(n),s=this._calculateBox(t),r=this._getLineCoord(o,s),u=r.x1<r.x2?1:-1,f=r.x4<r.x3?1:-1;if(this.line&&(i&&this._renderer.updateLineThin(this.line,i),this._renderer.updateLinePath(this.line,r,8,u,f)),this.start?(this.leftType=n.Type,this.rightType=t.Type,this.start=this._configEnds(this.start,this.rightType,r.x1,r.y1,u),this.end=this._configEnds(this.end,this.leftType,r.x4,r.y4,f)):this.centerButton&&this._updateMSSQLStyle(8,n,t),this.startSymbol&&this.endSymbol&&(this.startSymbol=this._configSymbol(this.startSymbol,this.leftCardinality,r.x1,r.y1,u),this.endSymbol=this._configSymbol(this.endSymbol,this.rightCardinality,r.x4,r.y4,f)),this.showSwitchLinkButton){var e=2!==this.leftCardinality,h=e?r.x4:r.x1,c=e?r.y4:r.y1,l=e?f:u;this._renderer.updateSwitchButton(this.switchButton,h,c,l)}this._renderer}},{key:"toggleSwitchButton",value:function(n){null!=this.switchButton&&this._renderer.toggleSwitchButton(this.switchButton,n)}},{key:"_configMSSQLStyle",value:function(n){this.centerButton=this._renderer.centerButton(n);this.leftButton=this._renderer.crescentButton(n);this.rightButton=this._renderer.crescentButton(n)}},{key:"_updateMSSQLStyle",value:function(n,t,i){var f=this.line.getCenter(),e=this._renderer.circleRadius,r=f.x+e/2-n/2,u=f.y+e/2-n/2;this._renderer.updateCenterButton(this.centerButton,r,u);this._renderer.updateLeftCrescentButton(this.leftButton,r,u,t.Type);this._renderer.updateRightCrescentButton(this.rightButton,r,u,i.Type)}},{key:"_configMSAccessStyle",value:function(){this.start=this._configEnds(null,this.leftType);this.end=this._configEnds(null,this.rightType)}},{key:"_configKeyCardinality",value:function(){this.startSymbol=this._configSymbol(this.startSymbol,this.leftCardinality);this.endSymbol=this._configSymbol(this.endSymbol,this.rightCardinality)}},{key:"_configSwitchButton",value:function(){this.switchButton=this._renderer.createSwitchButton();f.default.left({selector:".link-switch",app:this._app,items:f.default.getSwitchLinkItems(this.similarLinks,this.onSwitchClick),className:"context-menu-full-width"})}},{key:"_configSymbol",value:function(n,t,i,f,e){i=i||0;f=f||0;e=e||1;var o="",s=u.isMobile?"12px":"14px";return t===r.Enum.LinkCardinality.One&&(o="1",s=u.isMobile?"12px":"14px"),t===r.Enum.LinkCardinality.Many&&(o="",s=u.isMobile?"18px":"22px"),n?(this._renderer.updateTextContent(n,o,s),this._renderer.updateText(n,i,f,e),n):this._renderer.text(o,s)}},{key:"_configEnds",value:function(n,t,i,r,u){i=i||0;r=r||0;u=u||1;var f=!1;if(null!=n)switch(t){case this._app.MetaData.JoinType.Inner:f="circle"!==n.nodeName&&"CanvasCircle"!=n.constructor.name;break;case this._app.MetaData.JoinType.Outer:f="path"!=n.nodeName&&"CanvasArrow"!=n.constructor.name}switch(f&&(this._renderer.removeObj(n),n=null),t){case this._app.MetaData.JoinType.Inner:n=n||this._renderer.circleEnd();this._renderer.updateCircleEnd(n,i,r);break;case this._app.MetaData.JoinType.Outer:n=n||this._renderer.arrowEnd();this._renderer.updateArrowEnd(n,i,r,u)}return n}},{key:"_calculateBox",value:function(n){var t=this._getBBox(n,this._canvas),r=n.getDataSource(),i;return r&&(i=this._getBoxToParent(r.element[0],this._canvas),t.x=i.x-1,t.width=i.width+2,t.y<i.y?t.y=i.y+17:t.y>i.y+i.height-t.height&&(t.y=i.y+i.height-t.height)),t}},{key:"_getBBox",value:function(n,t){var i=n.getElement();return i.length?this._getBoxToParent(i[0],t):{x:0,y:0,width:0,height:0}}},{key:"_getBoxToParent",value:function(n,t){for(var i={x:0,y:0,width:n.clientWidth,height:n.clientHeight};n&&n!==t;)i.x+=n.offsetLeft-n.scrollLeft+n.clientLeft,i.y+=n.offsetTop-n.scrollTop+n.clientTop,n=n.offsetParent;return i}},{key:"_getLineCoord",value:function(n,t){function p(n){return[{x:n.x,y:n.y+n.height/2},{x:n.x+n.width,y:n.y+n.height/2}]}function i(n){return Math.round(1e3*n)/1e3}for(var u,e=p(n),o=p(t),w=[],c=[],s=0;s<e.length;s++)for(u=0;u<o.length;u++){var f=Math.abs(e[s].x-o[u].x),b=Math.abs(e[s].y-o[u].y),g=f*f+b*b;c.push(g);w.push({i1:s,i2:u})}for(var r={i1:0,i2:0},v=-1,y=-1,h=0;h<c.length;h++)(-1==y||c[h]<y)&&(y=c[h],v=h);v>0&&(r=w[v]);var l=e[r.i1].x,k=e[r.i1].y,a=o[r.i2].x,d=o[r.i2].y,nt=k,tt=d,it=[l-(f=Math.max(Math.abs(l-a)/2,15)),l+f][r.i1],rt=[a-f,a+f][r.i2];return{x1:i(l),y1:i(k),x2:i(it),y2:i(nt),x3:i(rt),y3:i(tt),x4:i(a),y4:i(d)}}},{key:"dispose",value:function(){this._renderer.removeObj(this.line);this._renderer.removeObj(this.line._bg);this._renderer.removeObj(this.start);this._renderer.removeObj(this.end);this._renderer.removeObj(this.startSymbol);this._renderer.removeObj(this.endSymbol);this._renderer.removeObj(this.centerButton);this._renderer.removeObj(this.leftButton);this._renderer.removeObj(this.rightButton);this._renderer.removeObj(this.switchButton)}}]),n}();t.default=o},function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(n){var t=this;this.ObjectType={Database:0,Schema:1,Table:2,View:3,Procedure:4,Synonym:5,Link:6,Field:7};this.MetadataType={getKeyName:function(t){var i={1:n.Strings.Root,2:n.Strings.Server,4:n.Strings.Database,8:n.Strings.Schema,16:n.Strings.Package,30:n.Strings.Namespaces,32:n.Strings.Table,64:n.Strings.View,128:n.Strings.Procedure,256:n.Strings.Synonym,480:n.Strings.Objects,512:n.Strings.Aggregate,1024:n.Strings.Parameter,2048:n.Strings.Field,4096:n.Strings.ForeignKey,7168:n.Strings.ObjectMetadata,8192:n.Strings.UserQuery};for(var r in i)if(t==r)return i[r];return null}};this.gridColumnsVisualDesciption={visible:1,expression:2,alias:3,sorting:4,sortingOrder:5,grouping:6,aggregate:7,groupingCriterion:8,condition:9,conditionOr1:10,each:function(n,t){for(var i=1;i<=9;i++)n(i,this.getKeyName(i));for(i=0;i<t.orColumnCount;i++)n(10+i,"conditionOr"+(i+1))},getKeyName:function(n){for(var t in this)if(this[t]==n)return t;return n>10?"conditionOr"+(n-9):0}};this.FieldParamType={visible:1,expression:2,alias:3,sorting:4,sortingOrder:5,aggregate:6,grouping:7,groupingCriterion:8,condition:9,conditionOr1:10,each:function(n,t){for(var i=1;i<=9;i++)n(i,this.getKeyName(i));for(i=0;i<t.orColumnCount;i++)n(10+i,"conditionOr"+(i+1))},getKeyName:function(n){for(var t in this)if(this[t]==n)return t;return n>10?"conditionOr"+(n-9):0}};this.SQL={Sorting:{None:0,Ascending:1,Descending:2,each:function(n){for(var t=0;t<=2;t++)n(t,this.getKeyName(t))},getKeyName:function(t){return t==this.None?n.Strings.None:t==this.Ascending?n.Strings.OrderByFieldAscending:t==this.Descending?n.Strings.OrderByFieldDescending:null}},Aggregate:[" ","COUNT","FIRST","LAST","MAX","MIN","SUM"],GroupingCriterion:{forValues:"Where",forGroup:"Having",each:function(n){n(this.forValues,this.getKeyName(this.forValues));n(this.forGroup,this.getKeyName(this.forGroup))},getKeyName:function(t){return t==this.forValues?n.Strings.ConditionTypeWhere.replace("&nbsp;"," "):n.Strings.ConditionTypeHaving.replace("&nbsp;"," ")}}};this.JoinType={Inner:0,Outer:1,toggle:function(n){return n==t.JoinType.Inner?t.JoinType.Outer:t.JoinType.Inner}}}},function(n,t,i){function o(n){return n&&n.__esModule?n:{"default":n}}var l,h;Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),u=o(i(0)),r=o(i(10)),v=o(i(66)),f=i(1),s=i(2),y=o(i(67)),e=o(i(5)),c=o(i(8));l=i(4);h=function(){function n(t,i){var e,o,s,h;return!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n),e=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),e._app=i,e._objectBorder=15,e.objects=[],e.dataSourceDtos=[],e.linkDtos=[],e.RightToLeft=!1,e.HideColumnDescription=!1,e.HideColumnName=!1,e.HideColumnType=!1,e.HideColumnMark=!1,e.element=u.default(t).attr("tabindex",f.Utils.getUTabIndex()),e.objectsContainer=u.default('<div class="qb-ui-canvas-objects">'),e.element.append(e.objectsContainer),e.RightToLeft=e.element.hasClass("RightToLeft"),e.HideColumnDescription=e.element.hasClass("HideColumnDescription"),e.HideColumnName=e.element.hasClass("HideColumnName"),e.HideColumnType=e.element.hasClass("HideColumnType"),e.HideColumnMark=e.element.hasClass("HideColumnMark"),e.linksStyle=Number(e.element.attr("linkstyle")),e.displayKeyCardinality=e.element.hasAttr("displaykeycardinality"),e._createRenderer(),o=void 0,s=void 0,f.isMobile?(o=180,s=121):(o=e.element.attr("defaultWidth"),isNaN(o)||(o=Number(o)),s=e.element.attr("defaultHeight"),isNaN(s)||(s=Number(s))),null!=o&&r.default.setDefaultWidth(o),null!=s&&r.default.setDefaultHeight(s),r.default.setInitialZindex(0),r.default.setResizeMode(e.element.attr("resizeMode")),e.propertiesFormsContainer=new y.default(e._app,{link:e.element.hasAttr("DisableLinkProperties"),query:e.element.hasAttr("DisableQueryProperties"),datasource:e.element.hasAttr("DisableDataSourceProperties")}),e.element.prepend(e.propertiesFormsContainer.element),e._initEvents(),e._createCteContextMenu(),e._createLinkContextMenu(),h=u.default.throttle(function(n){e._importObjects(n.DataSources);e._importLinks(n.Links);e.setLayout(n.Layout.DataSources)},50),e.importData=function(n){e.activeUnionSubQueryElementId=n.ActiveUnionSubQueryElementId;h(n)},e}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,l),a(n,[{key:"_initEvents",value:function(){var t=this;this.element.droppable({hoverClass:"qb-ui-canvas-hover",accept:f.Utils.canvasDroppableSelector,tolerance:"pointer",drop:function(n,i){var r=f.Utils.getRec(i.helper[0],f.Utils.getRec(t.element[0]));r.top+=t.element.scrollTop();r.left<0&&(r.left=0);r.top<0&&(r.top=0);i.helper.hasClass("qb-ui-tree-field-helper")?t._dropDataSourceField(i.helper,r):i.helper.hasClass("qb-ui-user-queries__item")?t._dropUserQuery(i.helper,r):t._dropDataSource(i.helper,r)}});this.element.click(function(i){"svg"!==i.target.tagName&&"CANVAS"!==i.target.tagName||(t.emit(n.Events.CanvasOnClick),t._highlightLink(null),t._highlightDataSource(null),t.propertiesFormsContainer.loadActiveUnionSubQuery())});this.element.on("resizestop",this.resize.bind(this));this.objectsContainer.on("scroll",this.resize.bind(this));u.default(this.element).keydown(this._keyDownHandler.bind(this))}},{key:"refresh",value:function(){this.isVisible()&&(this._importObjects(this.dataSourceDtos),this._importLinks(this.linkDtos))}},{key:"_importObjects",value:function(n){var r=this,l;if(this.dataSourceDtos=n,this.isVisible()){for(var t=n.slice(),o=[],s=[],h=[],f=0;f<this.objects.length;f++){var e=this.objects[f],c=e.mdo,i=this._findCanvasDataSource(c,t);(-1===i&&(i=this._findCanvasDataSourceSimilar(c,t)),-1===i)?o.push(e):(l=t[i],t.remove(i),s.push({dto:l,existingObject:e}))}u.default.each(t,function(n,t){return h.push(t)});u.default.each(s,function(n,t){return r.updateObject({object:t.dto},t.existingObject,!0)});u.default.each(o,function(n,t){return t.dispose()});u.default.each(h,function(n,t){return r.addDataSource({object:t})});setTimeout(function(){r._app.isDisposed||r._updateWatermark()},250)}}},{key:"_importLinks",value:function(n){var r,t,i,u;if(this.linkDtos=n,this.isVisible()){for(this._app.links.markAllForDelete(),r=0;r<n.length;r++)t=n[r],i=null,(null!=t.Left&&null!=t.Right&&(i=this._app.links.getByDto(t.Left,t.Right)),null==i)?(u=this._app.links.createLink(t),this._app.emit(this._app.Events.LinkCreated,u)):(i.ToDelete=!1,this._app.links.updateLink(i,t),this._app.emit(this._app.Events.LinkChanged,i));this._app.links.disposeAllMarked()}}},{key:"addDataSource",value:function(n){var t=this._addDataSource(n);return this._initDataSourceEvents(t),t}},{key:"_addDataSource",value:function(n){var t,i;return n.app=this._app,t=new r.default(n),n.position||n.coordinates||(i=this._getEmptyPlaceCoord(t),t.offsetLeft=i[0],t.offsetTop=i[1],t.setPosition(i)),this.objects.push(t),this.objectsContainer.append(t.element),t}},{key:"_initDataSourceEvents",value:function(n){n.on(r.default.Events.TableObjectOnDestroy,this._onObjectDestroy.bind(this,n));n.on(r.default.Events.TableObjectOnClose,this._onObjectClose.bind(this,n));n.on(r.default.Events.TableObjectOnTrash,this._onObjectTrash.bind(this,n));n.on(r.default.Events.TableObjectOnMoved,this._onObjectMove.bind(this,n));n.on(r.default.Events.TableObjectOnResized,this._onObjectMove.bind(this,n));n.on(r.default.Events.OnSelectField,this._onSelectDataSourceField.bind(this,n));n.on(r.default.Events.OnSelect,this.selectDataSource.bind(this,n));n.on(r.default.Events.TableObjectOnCheckField,this._app._onCheckFieldInTable.bind(this._app));n.on(r.default.Events.TableObjectOnCheckAllFields,this._app._onCheckAllFieldsInTable.bind(this._app));n.on(r.default.Events.TableObjectOnOrderByField,this._app._onOrderByFieldInTable.bind(this._app));n.on(r.default.Events.TableObjectOnGroupByField,this._app._onGroupByFieldInTable.bind(this._app));n.on(r.default.Events.TableObjectOnAggregateField,this._app._onAggregateFieldInTable.bind(this._app));n.on(r.default.Events.TableObjectOnAddInSubQuery,this._app._onAddInSubQuery.bind(this._app));n.on(r.default.Events.TableObjectOnAddIsNull,this._app._onAddIsNull.bind(this._app));n.on(r.default.Events.TableObjectOnAddUserExpression,this._app._onAddUserExpression.bind(this._app));n.on(r.default.Events.TableObjectOnSelectExpression,this._app._onSelectExpression.bind(this._app));n.on(r.default.Events.TableObjectOnDblClickField,this._app._onDblClickFieldInTable.bind(this._app));n.on(r.default.Events.TableObjectOnLinkCreate,this._app._onLinkCreate.bind(this._app));n.on(r.default.Events.TableObjectOnLinkCreating,this._app._onLinkCreating.bind(this._app));n.on(r.default.Events.TableObjectOnLinkedObjectSelected,this._app._onLinkedObjectSelected.bind(this._app));n.on(r.default.Events.TableObjectOnSubqueryClick,this._app._onDataSourceSubQueryClick.bind(this._app));n.on(r.default.Events.TableObjectOnCTEClick,this._app._onDataSourceSubQueryClick.bind(this._app));n.on(r.default.Events.TableObjectOnAddUserField,this._app._onAddUserField.bind(this._app));n.on(r.default.Events.TableObjectOnEditUserField,this._app._onEditUserField.bind(this._app));n.on(r.default.Events.TableObjectOnRemoveUserField,this._app._onRemoveUserField.bind(this._app))}},{key:"_findCanvasDataSource",value:function(n,t){for(var r,i=t.length-1;i>=0;i--)if(r=t[i],this.dtoIsEqual(n,r))return i;return-1}},{key:"_findCanvasDataSourceSimilar",value:function(n,t){for(var r,i=t.length-1;i>=0;i--)if(r=t[i],this.dtoIsSimilar(n,r))return i;return-1}},{key:"selectLink",value:function(n){this._highlightLink(n);this.propertiesFormsContainer.loadByLink(n)}},{key:"selectDataSource",value:function(n){this.emit(this.Events.OnSelectDataSource,n);this._highlightDataSource(n);this._activeTable=n;this.propertiesFormsContainer.loadByDataSource(n.mdo)}},{key:"_highlightLink",value:function(n){n&&(n.setFocused(!0),this._highlightDataSource(null));u.default.each(this._app.links.links,function(t,i){i!==n&&i.setFocused(!1)})}},{key:"_highlightDataSource",value:function(n){n?(n.element.addClass("qb-ui-table--focused"),this.element.find(".qb-ui-table").not(n.element).removeClass("qb-ui-table--focused"),this._highlightLink(null)):this.element.find(".qb-ui-table").removeClass("qb-ui-table--focused")}},{key:"_keyDownHandler",value:function(n){if(17!==n.keyCode&&18!==n.keyCode&&(this.element.is(n.target)||0!==this.element.has(n.target).length))if(n.ctrlKey)switch(n.keyCode){case 90:this._undo();break;case 70:n.preventDefault();this._toggleActiveTableToolbar();break;case 68:n.preventDefault();this._wrapToDerivedTable();break;case 37:this._selectNextDataSource();break;case 39:this._selectPrevDataSource();break;case 32:this._showActiveTableMenu()}else if(n.altKey)switch(n.keyCode){case 13:this.propertiesFormsContainer.show();this.propertiesFormsContainer.focus()}}},{key:"_createRenderer",value:function(){var n=this.element.attr("linkcolor")||"#000000";this.r=new v.default(this.objectsContainer.get(0),n);this.redrawT=u.default.throttle(this.redraw,5,this);this.resizeT=u.default.throttle(this.resize,1e3,this)}},{key:"_getActiveTable",value:function(){return this._activeTable?this._activeTable:this.objects.length?this.objects[0]:void 0}},{key:"_toggleActiveTableToolbar",value:function(){var n=this._getActiveTable();n&&n.toggleToolbar()}},{key:"_wrapToDerivedTable",value:function(){this._app.wrapToDerivedTable()}},{key:"_undo",value:function(){this._app.undo()}},{key:"_showActiveTableMenu",value:function(){var n=this._getActiveTable();n&&n.showMenu()}},{key:"_getActiveIndex",value:function(){var t=this._getActiveTable(),i,n;if(!t)return-1;for(i=this.objects.length,n=0;n<i;n++)if(this.objects[n].element.is(t.element))return n;return-1}},{key:"_selectNextDataSource",value:function(){var n=this._getActiveIndex(),t;-1!==n&&(t=0===n?this.objects.length-1:n-1,this.objects[t].select())}},{key:"_selectPrevDataSource",value:function(){var n=this._getActiveIndex(),t;-1!==n&&(t=n===this.objects.length-1?0:n+1,this.objects[t].select())}},{key:"findTableByFullName",value:function(n){return this._findTableBy(function(t){return t.mdo.NameFull===n})}},{key:"findTablesByFullName",value:function(n){return this._findTablesBy(function(t){return t.mdo.NameFull===n})}},{key:"findTableByIndex",value:function(n){return this._findTableBy(function(t){return t.mdo.Index===n})}},{key:"findTablesByIndex",value:function(n){return this._findTablesBy(function(t){return t.mdo.Index===n})}},{key:"findTableByName",value:function(n){return this._findTableBy(function(t){var i=t.mdo;return f.strcmp(i.Alias,n)||f.strcmp(i.Name,n)||f.strcmp(i.NameNotQuoted,n)||f.strcmp(i.NameInQuery,n)||f.strcmp(i.NameFull,n)})}},{key:"_findTableBy",value:function(n){for(var i,t=0;t<this.objects.length;t++)if(i=this.objects[t],n(i))return i;return null}},{key:"_findTablesBy",value:function(n){for(var r,i=[],t=0;t<this.objects.length;t++)r=this.objects[t],n(r)&&i.push(r);return i}},{key:"dtoIsEqual",value:function(n,t){return!!(null!=n.ElementId&null!=t.ElementId&&n.ElementId===t.ElementId)||(n.isUserQuery&&n.IsNew?n.Name===t.Name:!(!n.IsNew&&!t.IsNew||n.TempId!=t.TempId)||n.NameFull===t.NameFull&&(n.NameInQuery===t.NameInQuery||void 0))}},{key:"dtoIsSimilar",value:function(n,t){return n.Caption==t.Caption}},{key:"updateObject",value:function(n,t,i){n.skipEvents=i;t.update(n)}},{key:"isVisible",value:function(){return this.element.is(":visible")}},{key:"_onObjectDestroy",value:function(n){this.objects.remove(n)}},{key:"_onObjectClose",value:function(t){this.emit(n.Events.CanvasOnRemoveTable,t)}},{key:"_onObjectTrash",value:function(t){this.emit(n.Events.CanvasOnTrashTable,t)}},{key:"_onObjectMove",value:function(t){this.emit(n.Events.CanvasOnMoveTable,t)}},{key:"_onSelectDataSourceField",value:function(n,t){this.emit(this.Events.OnSelectDataSourceField,n,t)}},{key:"getLayout",value:function(){for(var i,t=[],n=0;n<this.objects.length;n++)i=this.getLayoutDto(this.objects[n]),null!=i&&t.push(i);return t}},{key:"getLayoutDto",value:function(n){var i=n.mdo,t;if(null!=i)return t=new s.Dto.DataSourceLayoutDto,i.Fields&&(t.FieldCount=i.Fields.length),t.Caption=i.Caption,t.X=n.element[0].offsetLeft,t.Y=n.element[0].offsetTop,t.Width=this._getLayoutDtoWidth(n),t.Height=this._getLayoutDtoHeight(n),t.DefaultHeight=r.default.getDefaultHeight(),t.DefaultWidth=r.default.getDefaultWidth(),t}},{key:"_getLayoutDtoWidth",value:function(n){return this._getLayoutDtoAttr(n,"Width")}},{key:"_getLayoutDtoHeight",value:function(n){return this._getLayoutDtoAttr(n,"Height")}},{key:"_getLayoutDtoAttr",value:function(n,t){var i=n["get"+t]();return"auto"==i?null:Math.round(i)}},{key:"resetLayout",value:function(){this._layout&&this.setLayout(this._layout)}},{key:"setLayout",value:function(n){this._layout=n;u.default.each(this.objects,function(t,i){var u,r,e;if(!i.disposed){if(u=i.mdo,null==u)return!0;for(r=null,t=0;t<n.length;t++)if(e=n[t],e.Index==u.Index){r=e;break}null!=r&&(0==r.X||f.isEmpty(r.X)||0==r.Y||f.isEmpty(r.Y)||i.setPosition([r.X,r.Y]),r.Width>0&&!f.isEmpty(r.Width)&&i.setWidth(r.Width),r.Height>0&&!f.isEmpty(r.Height)&&i.setHeight(r.Height))}});this.redraw()}},{key:"_getEmptyPlaceCoord",value:function(n){var t=this.element.width(),o,s;t<200&&(t=1024);var i=[0,t],r=[0,32e3],u=[],f=n.getWidth(),e=n.getHeight();return 0==f&&(f=200),0==e&&(e=150),o=f+2*this._objectBorder,s=e+2*this._objectBorder,this._getNextEmptyPlaceRoutine_Fill(i,r,u,n),this.RightToLeft?this._getNextEmptyPlaceRoutine_Find_RTL(i,r,u,o,s):this._getNextEmptyPlaceRoutine_Find(i,r,u,o,s)}},{key:"_getNextEmptyPlaceRoutine_Find",value:function(n,t,i,r,u){for(var e,f=0;f<t.length;f++)for(e=0;e<n.length;e++)if(0==i[e][f]&&this._getNextEmptyPlaceRoutine_Test(n,t,i,e,f,r,u))return[n[e]+this._objectBorder,t[f]+this._objectBorder];return[this._objectBorder,this._objectBorder]}},{key:"_getNextEmptyPlaceRoutine_Find_RTL",value:function(n,t,i,r,u){for(var f,e=0;e<t.length;e++)for(f=n.length-1;f>=0;f--)if(0==i[f][e]&&this._getNextEmptyPlaceRoutine_Test(n,t,i,f,e,r,u)&&f+1<n.length)return[n[f+1]+this._objectBorder-r,t[e]+this._objectBorder];return[this._objectBorder,this._objectBorder]}},{key:"_getNextEmptyPlaceRoutine_Fill",value:function(n,t,i,r){var f=this,e,s,o;for(u.default.each(this.objects,function(){var i,u,e;if(this==r)return!0;i=this.element[0];n.push(i.offsetLeft-f._objectBorder);t.push(i.offsetTop-f._objectBorder);u=i.offsetWidth;e=i.offsetHeight;0==u&&(u=200);0==e&&(e=150);n.push(i.offsetLeft+u+f._objectBorder);t.push(i.offsetTop+e+f._objectBorder)}),n.sort(function(n,t){return n-t}),t.sort(function(n,t){return n-t}),e=0;e<n.length;e++){for(s=[],o=0;o<t.length;o++)s.push(e==n.length-1||o==t.length-1?1:0);i.push(s)}u.default.each(this.objects,function(){var f=this.element[0],a=f.offsetLeft,v=f.offsetTop,e=f.offsetWidth,o=f.offsetHeight;0==e&&(e=200);0==o&&(o=150);for(var y=f.offsetLeft+e,p=f.offsetTop+o,s=0,h=0,r=0;r<n.length;r++)if(n[r]<=a&&(s=r),y<=n[r]){h=r;break}for(var c=0,l=0,u=0;u<t.length;u++)if(t[u]<=v&&(c=u),p<=t[u]){l=u;break}for(r=s;r<h;r++)for(u=c;u<l;u++)i[r][u]=1})}},{key:"resize",value:function(){var n=this.objectsContainer[0],t=n.scrollLeft+n.clientWidth,i=n.scrollTop+n.clientHeight;this._setRendererSize(t-10,i-10)}},{key:"_setRendererSize",value:function(n,t){n<0&&(n=0);t<0&&(t=0);this.r.setSize(n,t)}},{key:"_getNextEmptyPlaceRoutine_Test",value:function(n,t,i,r,u,f,e){var o,s;if(1==i[r][u])return!1;for(o=u;o<=t.length&&!(t[o]-t[u]>=e);o++)for(s=r;s<n.length&&!(n[s]-n[r]>=f);s++)if(1==i[s][o])return!1;return!0}},{key:"redraw",value:function(){this._app.CanvasComponent.isVisible()&&(this._app.links.draw(),void 0!==f.Utils.globalTempLink&&this.resizeT())}},{key:"_menuCallback",value:function(t,i){this.emit(n.Events.CanvasContextMenuCommand,{action:t,item:i})}},{key:"_updateContextMenu",value:function(n){var t=this,i;f.isEmpty(n)||0==n.Items.length||(i=e.default.updateItems(n.Items),e.default.right({selector:c.default.canvasSelector,app:this._app,mergeSelector:!0,callback:function(n,i){var r=i.$selected.data().contextMenu.items[n],u={top:i.y-t.element.offset().top,left:i.x-t.element.offset().left};t._menuCallback(n,r,i,{position:u})},items:i}))}},{key:"_createLinkContextMenu",value:function(){function i(n,i,r){if(null!=n){var u=t.Localizer.Strings.SelectAllRowsFrom;n.name=u.replace("{0}","<strong>"+i.mdo.Caption+"<\/strong>");n.icon=r?n.key:n.key+" checked"}}var t=this._app,r=this.propertiesFormsContainer.disables,n=e.default.getLinkItems(t.Localizer,r.link);n=e.default.updateItems(n);e.default.right({selector:c.default.canvasSelector+" svg path",app:t,mergeSelector:!0,build:function(r){var u=r[0].link,f=u.Left.getDataSource(),o=u.Right.getDataSource();return t.options.LinkManipulations===s.Enum.LinkManipulations.Deny&&(delete n[e.default.linkKeys.delete],delete n.separator1),i(n[e.default.linkKeys.allFrom],f,u.Left.Type==t.MetaData.JoinType.Inner),i(n[e.default.linkKeys.allTo],o,u.Right.Type==t.MetaData.JoinType.Inner),{items:n}},callback:function(n){this[0].link._menuCallback(n)}})}},{key:"_createDataSourceContextMenu",value:function(){var t=this,n=e.default.getDataSourceItems(this._app);n=e.default.updateItems(n);e.default.right({selector:".qb-ui-table",app:this._app,build:function(i,r){return t._buildTableContextMenu(i,r,n),{}},callback:function(n,i){var r=this.data("me"),u;null==r&&(u=this.attr("NameFull"),r=t.findTableByFullName(u));r._menuCallback(n,i.field)},items:n})}},{key:"_buildTableContextMenu",value:function(n,t,i){var r=n.data("me"),u;if(null==r&&(u=n.attr("NameFull"),r=this.findTableByFullName(u)),r&&r.mdo&&r.mdo.IsCTE)return t.data.items=this._itemsCTE;t.data.items=f.mergeObj({},i);this._buildFieldsContainerMenu(t,r);this._buildToolBarMenu(t,r);this._buildUserFieldsMenu(t,r)}},{key:"_buildFieldsContainerMenu",value:function(n,t){t.fieldsContainer.sortedFields?delete n.data.items.sort:delete n.data.items.revertSort;t.fieldsContainer.needToShowUnchecked?delete n.data.items.show:delete n.data.items.hide;var i=u.default(n.target).closest(".qb-ui-table-field");n.data.field=u.default(i).data("object")}},{key:"_buildToolBarMenu",value:function(n,t){t.toolbar?n.data.items.filter.icon=t.toolbar.element.is(":visible")?"filtered":"filter":delete n.data.items.filter}},{key:"_buildUserFieldsMenu",value:function(n,t){t.mdo.EnableUserFields&&t.mdo.DataSourceType!=s.Enum.DataSourceType.SubQuery||delete n.data.items.addUserField}},{key:"_createCteContextMenu",value:function(){var n=e.default.getCteItems(this._app.Localizer);this._itemsCTE=e.default.updateItems(n)}},{key:"_dropDataSourceField",value:function(t,i){var e=t.data("nameFull"),u=t.data("parentNameFull"),o=t.data("isProc"),r=new s.Dto.DataSourceDto,f;r.IsNew=!0;r.Caption=u;r.Name=u;f={table:r,tableName:u,fieldName:e,coordinates:[i.left,i.top],isProc:o};this.emit(n.Events.CanvasOnAddTableField,f)}},{key:"_dropDataSource",value:function(t,i){var r=t.data("object"),u={object:r,coordinates:[i.left,i.top],isProc:r.isProc,isHelper:!0,delayed:!1};this.emit(n.Events.CanvasOnAddTable,u)}},{key:"_dropUserQuery",value:function(t,i){var u=new s.Dto.DataSourceDto,f;u.Caption=u.Name=t.object.name;u.isUserQuery=u.IsNew=!0;f={query:t.object,object:u,coordinates:[i.left,i.top],width:r.default.getDefaultWidth(),height:r.default.getDefaultHeight()};this.emit(n.Events.CanvasOnAddUserQuery,f)}},{key:"getDataSources",value:function(){return this.objects}},{key:"dispose",value:function(){u.default.each(this.objects,function(n,t){return t.dispose()});this.element.empty()}},{key:"show",value:function(){this.element.show();this.refresh()}},{key:"hide",value:function(){this.element.hide()}},{key:"_updateWatermark",value:function(){0===this.objects.length?this._showWatermark():this._hideWatermark()}},{key:"_showWatermark",value:function(){if(null==this._watermark){var n=this._app.Localizer.Strings.EmptyCanvasWatermark;this._watermark=u.default('<div class="qb-ui-canvas__watermark">'+n+"<\/div>")}this.element.append(this._watermark)}},{key:"_hideWatermark",value:function(){this._watermark&&this._watermark.detach()}},{key:"focus",value:function(){this.element.focus()}},{key:"blinkDataSource",value:function(n){var t=this.objectsContainer,u=n.getWidth(),f=n.getHeight(),e=t.width(),o=t.height(),i=n.element[0].offsetTop,r=n.element[0].offsetLeft;if(r<t.scrollLeft()||i<t.scrollTop()||r+u>t.scrollLeft()+e||i+f>t.scrollTop()+o)return t.animate({scrollLeft:r,scrollTop:i},500),setTimeout(function(){n.blink()},750);n.blink()}},{key:"updateAggregationContextMenu",value:function(){this._createDataSourceContextMenu()}}]),n}();h.Events={CanvasOnAddTable:"CanvasOnAddTable",MetadataObjectAdded:"MetadataObjectAdded",CanvasOnRemoveTable:"CanvasOnRemoveTable",CanvasOnMoveTable:"CanvasOnMoveTable",CanvasOnTrashTable:"CanvasOnTrashTable",CanvasOnAddTableField:"CanvasOnAddTableField",CanvasOnAddUserQuery:"CanvasOnAddUserQuery",CanvasContextMenuCommand:"CanvasContextMenuCommand",CanvasOnClick:"CanvasOnClick",OnSelectDataSource:"OnSelectDataSource",OnSelectDataSourceField:"OnSelectDataSourceField"};h.prototype.Events=h.Events;t.default=h},function(n,t,i){function e(n){return n&&n.__esModule?n:{"default":n}}var u;Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=e(i(0)),f=e(i(7));u=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this._app=t;this.element=r.default("<div>");this.text=r.default('<span class="qb-ui-table-titlebar-text">').css("line-height",n.defaultHeight+"px");this.rightButtons=r.default('<span class="qb-ui-table-titlebar__button-container qb-ui-table-titlebar__button-container--right">');this.leftButtons=r.default('<span class="qb-ui-table-titlebar__button-container qb-ui-table-titlebar__button-container--left">');this.element.append(this.text).append(this.rightButtons).append(this.leftButtons).addClass(this._app._style.header).addClass(this._app._style.cornerAll).addClass("format-table").addClass("qb-ui-table-titlebar").css("height",n.defaultHeight);this._initEvents()}return o(n,[{key:"setText",value:function(n,t){this.text.attr("title",t);this.text.html(n)}},{key:"createSandwichButton",value:function(n){var t=this._createTitleButton(f.default.sandwich,"").click(function(t){t.stopPropagation();n()});this.leftButtons.append(t)}},{key:"createSubQueryButton",value:function(n){var t=this._createTitleButton(f.default.pencilSmall,this._app.Localizer.Strings.SwitchToDerivedTable).click(function(t){t.stopPropagation();n()});this.rightButtons.prepend(t)}},{key:"createCloseButton",value:function(n){var t=this._createTitleButton(f.default.delete16,this._app.Localizer.Strings.Close).click(function(t){t.stopPropagation();n()});this.rightButtons.append(t)}},{key:"_createTitleButton",value:function(n,t){return r.default("<span>").html(n).addClass(this._app._style.cornerAll+" titlebar-button").uiHoverable(this._app._style.hover).mousedown(function(n){n.stopPropagation()}).attr("aria-label",t).attr("title",t).attr("tabindex",-1)}},{key:"_initEvents",value:function(){var n=this;this.element.bind("dblclick",function(){return n.onDblclick()})}},{key:"blink",value:function(){function i(){var i={backgroundColor:n.element.css("backgroundColor")};n.element.css({backgroundImage:"none",backgroundColor:"#ffff99"}).animate(i,{queue:!1,duration:t,complete:function(){this.style["background-image"]=null;this.style["background-color"]=null}})}var n=this,t=200;i();setTimeout(function(){i()},t+50)}}]),n}();t.default=u;u.setDefaultHeight=function(n){this.defaultHeight=n};u.defaultHeight=36},function(n,t,i){function s(n){return n&&n.__esModule?n:{"default":n}}function v(n,t,i){if(null!=n)for(key in n.items=f.mergeObj({},n.items),n.items)if(-1!==key.indexOf("UserExpressions")){var r=i[key.split(".")[2]];n.items[key].disabled=-1===r.ShowOnlyFor.indexOf(t)}}function y(n,t,i){for(var u,e,o={},r=0;r<i.length;r++)u=t+".Expressions."+r,e=i[r].Caption.trim(),"Is Null"!==e&&"Is Not Null"!==e&&(o[u]={name:e,key:u,icon:u});n[t]=f.mergeObj({},n[t]);n[t].items=f.mergeObj(o,n[t].items)}function o(n,t,i){var r,u;if(-1===n[t].icon.indexOf(" icon-checked")&&(n[t].icon+=" icon-checked"),null!=i)for(r in n[t].items)u=-1!==i.indexOf(r.split(".")[1]),u||null==n[t].items[r].name||(u=-1!==i.indexOf(n[t].items[r].name.toLowerCase())),u?o(n[t].items,r):e(n[t].items,r)}function e(n,t){var i,r;if(null!=n[t].icon&&-1!==n[t].icon.indexOf(" icon-check")){i=n[t].icon.length;for(r in n[t].icon=n[t].icon.substr(0,i-11),n[t].items)e(n[t].items,r)}}var l,a;Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=s(i(0)),f=i(1),h=i(2),w=s(i(64)),b=s(i(10)),u=s(i(5)),c=s(i(8));l=i(4);a=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);var i=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return i.dataSource=t,i._app=t._app,i.filterText="",i.needToShowUnchecked=!0,i.element=r.default('<div class="qb-ui-table-field-container '+i._app._style.content+'">'),i._initEvents(),i._createContextMenu(),i}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,l),p(n,[{key:"generateLoadingFields",value:function(){var n=r.default('<span class="loading"><\/span><span class="qb-ui-table-field-name">'+this._app.Localizer.Strings.Loading+"<\/span>"),t=this._createRow("qb-ui-table-field",n);this.element.append(t)}},{key:"generateFields",value:function(){var n=this,t,i,r;this.clear();t=this.mdo.DataSourceOptions||this.mdo.FieldListOptions||{};i=t.KeyFieldsFirst?"NotPrimaryKey":"";switch(t.SortType){case h.Enum.FieldListSortType.Name:this.mdo.Fields.sortBy(i,"NameStr");break;case h.Enum.FieldListSortType.Description:this.mdo.Fields.sortBy(i,t.DescriptionColumnOptions.UseLongDescription?"LongDescription":"ShortDescription")}this.fields=[];r=this._getLinkedMenuItems(1);this._generatingFields=!0;f.Utils.asyncArrayTask(this.mdo.Fields,10,function(i){try{if(n._app.isDisposed)return;n._createFields(i,t,r)}catch(t){throw n._fieldsGenerated(),t;}},function(){try{if(n._app.isDisposed)return;n._toggleFieldsByFilter();n._updateLinks();n._toggleHiddenFieldsCounter();n._fieldsGenerated()}catch(t){throw n._fieldsGenerated(),t;}})}},{key:"_fieldsGenerated",value:function(){this._generatingFields=!1;"function"==typeof this.onFieldsGenerated&&(this.onFieldsGenerated(),this.onFieldsGenerated=null)}},{key:"_initEvents",value:function(){this.element.click(function(){return!1});this.element.scroll(function(){var n=this._app.links.findByDataSource(this.dataSource);r.default.each(n,function(n,t){t.draw()})}.bind(this));var n=this.element.get(0);this._scrollPreventer=f.scrollPreventer.bind(n);n.addEventListener("mousewheel",this._scrollPreventer)}},{key:"_createFields",value:function(n,t,i){for(var e,u,f=n.length,r=0;r<f;r++)e=n[r],u=this._createField(e,t,i),this.fields.push(u),this.element.append(u.element)}},{key:"_createField",value:function(n,t,i){var u={fk:{}},r,f;for(r in n.PrimaryKey&&(u.pk=this._getLinkedMenuItems(0)),i)-1!==i[r].rightFields.indexOf(n.NameFull)&&(u.fk[r]=i[r]);return f=new w.default(n,this,t,u),f.element.on(b.default.Events.TableObjectOnLinkedObjectSelected,this.onLinkedObjectSelected),f}},{key:"_appendFields",value:function(n,t){var i=this;f.Utils.asyncArrayTask(n,10,function(n){return i._appendFieldsPart(n)},t)}},{key:"_appendFieldsPart",value:function(n){for(var r,i=n.length,t=0;t<i;t++)r=n[t],this.element.append(r.element)}},{key:"_toggleHiddenFieldsCounter",value:function(){this.hiddenFieldsCounter||(this.hiddenFieldsCounter=this._createRow("hidden-fields-counter-row",'<span class="counter"><\/span><span>fields hidden<\/span>'),this.hiddenFieldsCounter.click(this.showAll.bind(this)),this.element.append(this.hiddenFieldsCounter));var n=this.element.find(".ui-draggable").not(":visible").length;this.hiddenFieldsCounter.find(".counter").text(n);n?this.hiddenFieldsCounter.show():this.hiddenFieldsCounter.hide()}},{key:"_createRow",value:function(n,t){return r.default("<div>").addClass(n).append(t)}},{key:"createLinkObjectsMenu",value:function(n,t){if(null!=this.mdo){var i=this;n.mousedown(function(){var n=i._getLinkedMenuItems(t),f,r;if(1===Object.keys(n).length)return i.onLinkedObjectSelected(null,n[Object.keys(n)[0]].data);i._updateContextMenu(n);f='[sessionid="'+i._app.SessionID+'"] '+c.default.pkButtonSelector;r=u.default.show(f);r&&r.position({my:"left top",at:"left bottom",of:this})})}}},{key:"_createContextMenu",value:function(){var n=this,t=this._app.options.SyntaxProviderOptions.UserExpressions,i=function(t,i,r,f,e,o){return u.default.updateItems(u.default.getDataSourceFieldItems(n._app,t,i,r,f,e,o))};u.default.right({selector:".qb-ui-table-field-container",app:this._app,build:function(s,c){return function(n,t,i,s,c){var a=t.parent().data("object"),p,l;i.data.elementId=a.ElementId;p=r.default(i.target).closest(".qb-ui-table-field").data("object");i.data.field=p;var nt=null!=i.button,b="*"===i.data.field.NameStr,tt=!b,it=nt,d=a.EnableUserFields&&a.DataSourceType!=h.Enum.DataSourceType.SubQuery,k=n._getSelectedLinkFieldDescription(),w=null==k?null:k.field,g=null!=w&&a.Index===k.dataSourceIndex&&w.NameStr===p.NameStr,rt=null==w||g?null:w,ut=!b&&!g;return(i.data.items=f.mergeObj({},c(p,tt,it,d,ut,rt)),b)?{}:(l=u.default.dataSourceFieldKeys,0===i.data.field.OrderBy?e(i.data.items,l.orderByField):o(i.data.items,l.orderByField,[1===i.data.field.OrderBy?"Asc":"Desc"]),i.data.field.HaveGrouping?o(i.data.items,l.groupByField):e(i.data.items,l.groupByField),0===i.data.field.Aggregates.length?e(i.data.items,l.aggregateField):o(i.data.items,l.aggregateField,i.data.field.Aggregates),0===i.data.field.WhereConditions.length?e(i.data.items,l.whereField):(y(i.data.items,l.whereField,i.data.field.WhereConditions),o(i.data.items,l.whereField,i.data.field.WhereConditions.map(function(n){return n.Caption.trim().toLowerCase()}))),0===i.data.field.HavingConditions.length?e(i.data.items,l.havingField):(y(i.data.items,l.havingField,i.data.field.HavingConditions),o(i.data.items,l.havingField,i.data.field.HavingConditions.map(function(n){return n.Caption.trim().toLowerCase()}))),v(i.data.items.whereField,i.data.field.DbType,s),v(i.data.items.havingField,i.data.field.DbType,s),a.HaveGrouping||delete i.data.items.havingField,d&&function(n){var t=r.default(n.target).closest(".qb-ui-table-field--user");1!==t.length?(delete n.data.items.editUserField,delete n.data.items.removeUserField):n.data.field=r.default(t).data("object")}(i),{})}(n._app,s,c,t,i)},callback:function(t,i){return function(n,t,i){var r=n.getDataSourceByElementId(i.elementId),o=u.default.dataSourceKeys,f=u.default.dataSourceFieldKeys,e=i.field;switch(t){case f.groupByField:return r.groupByField(e.NameFull);case o.checkAll:return r.checkAllFields(!0);case o.uncheckAll:return r.checkAllFields(!1);case o.addUserField:return r.onAddUserField();case f.editUserField:return r.onEditUserField(e);case f.removeUserField:return r.onRemoveUserField(e);case f.startLinkFrom:return n._setSelectedLinkField(e,r.mdo.Index);case f.createLink:return n._createLinkWithSelectedField(e,r.mdo.Index)}return-1!==t.indexOf(f.orderByField)?r.orderByField(e.NameFull,t.split(".")[1]):-1!==t.indexOf(f.aggregateField)?r.aggregateField(e.NameFull,t.split(".")[1]):-1!==t.indexOf(f.whereField)?r._addWhereCondition(e.NameFull,t.split(".")[1],t.split(".")[2]):-1!==t.indexOf(f.havingField)?r._addHavingCondition(e.NameFull,t.split(".")[1],t.split(".")[2]):void 0}(n._app,t,i)}})}},{key:"_tryFindField",value:function(n){return this.fields.find(function(t){return t.object.NameStr==n||t.object.NameFull==n})}},{key:"containsField",value:function(n){return null!=this._tryFindField(n)}},{key:"findField",value:function(n){var t=this._tryFindField(n);if(null!=t)return t;throw new Error("Field "+n+" not found");}},{key:"_getLinkedMenuItems",value:function(n){for(var t,r={},i=0;i<this.linkedObjects.length;i++)t=this.linkedObjects[i],n===t.Direction&&(r[t.Caption]={leftFields:t.LeftFields,rightFields:t.RightFields,name:t.Caption,icon:"linked-object-direction-"+t.Direction,data:t,className:t.Disabled?"highlight":""});return r}},{key:"getFields",value:function(n){var t=this.fields||[];return n?t:t.filter(function(n){return!0!==n.asterisk})}},{key:"getFieldsElems",value:function(n){return this.getFields(n).map(function(n){return n.element})}},{key:"setFilter",value:function(n){this.filterText!==n&&(this.filterText=n,this._toggleFieldsByFilter())}},{key:"showUnchecked",value:function(){!0!==this.needToShowUnchecked&&(this.needToShowUnchecked=!0,this._toggleFieldsByFilter())}},{key:"showAll",value:function(){""===this.filterText&&!0===this.needToShowUnchecked||(this.filterText="",this.needToShowUnchecked=!0,this._toggleFieldsByFilter(),this.dataSource.toolbar.filter.val(""))}},{key:"hideUnchecked",value:function(){!1!==this.needToShowUnchecked&&(this.needToShowUnchecked=!1,this._toggleFieldsByFilter())}},{key:"isSortingByNameEnabled",value:function(){return null!=this.sortedFields}},{key:"toggleSortingByName",value:function(){this.isSortingByNameEnabled()?this.clearSorting():this.sortByName()}},{key:"sortByName",value:function(){var n=this;this.sortedFields=this.fields.slice();this.sortedFields.sort(this._fieldNameComparer);this._appendFields(this.sortedFields,function(){return n._updateLinks()})}},{key:"clearSorting",value:function(){var n=this;delete this.sortedFields;this._appendFields(this.fields,function(){return n._updateLinks()})}},{key:"_toggleFieldsByFilter",value:function(){r.default.each(this.fields,function(n,t){this._toggleFieldByFilter(t)}.bind(this));this._updateLinks();this._toggleHiddenFieldsCounter()}},{key:"_toggleFieldByFilter",value:function(n){var t=n.object.NameStr.toLowerCase();this._needToShow(t,this.filterText,n.checked,this.needToShowUnchecked)?n.show():n.hide()}},{key:"_updateLinks",value:function(){this._app.links.findByDataSource(this.dataSource).forEach(function(n){return n.draw()})}},{key:"_needToShow",value:function(n,t,i,r){return-1!==n.indexOf(t)&&(""!==t||!!r||i)}},{key:"_updateContextMenu",value:function(n){var t=this;return u.default.right({selector:c.default.pkButtonSelector,app:this._app,callback:function(i){var r=n[i];t.onLinkedObjectSelected(null,r.data)},items:n}),!0}},{key:"_fieldNameComparer",value:function(n,t){return"*"===n.object.NameStr?-1:"*"===t.object.NameStr?1:"+"===n.object.NameStr?1:"+"===t.object.NameStr?-1:n.object.NameStr.toLowerCase()>t.object.NameStr.toLowerCase()?1:-1}},{key:"dispose",value:function(){this.element.get(0).removeEventListener("mousewheel",this._scrollPreventer);delete this._scrollPreventer;this.element.remove()}},{key:"clear",value:function(){r.default(".loading",this.element).parent().remove();this.getFieldsElems(!0).map(function(n){return n.remove()})}},{key:"setHeight",value:function(n){this.element.height(n)}},{key:"mdo",get:function(){return this.dataSource.mdo}},{key:"linkedObjects",get:function(){return this.mdo.LinkedObjects}}]),n}();t.default=a},function(n,t,i){function f(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=f(i(0)),u=i(1),h=f(i(10)),c=(i(13),i(2)),o=f(i(8)),l=f(i(5));e=function(){function n(t,i,f,e){var s,l,b,h,p;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this.object=this.field=t;this.table=i;this._app=i._app;this.checked=t.IsSelected;this.element=this._createElement(t);this._domelement=this.element[0];var w=this._createCheckbox(t.IsSelected),k=w.container,d=w.checkbox;this.fieldCheckbox=d;this.fieldCheckboxContainer=k;var a=f.MarkColumnOptions,c=f.NameColumnOptions,v=f.TypeColumnOptions,y=f.DescriptionColumnOptions,g=u.isEmpty(t.SizeStr)?"":'<span class="qb-ui-table-field-type-size">('+t.SizeStr+")<\/span>",nt="*"!==t.NameStr&&null!=t.FieldTypeName&&"null"!==t.FieldTypeName?v.Prefix+t.FieldTypeName+g+f.TypeColumnOptions.Postfix:"",o=[];for(this.fieldIcon=r.default('<span class="qb-ui-table-field-icon"><\/span>'),o.push({control:this.fieldIcon,DrawOrder:-1,Visible:!0}),s=this._app.CanvasComponent,s&&!s.HideColumnMark&&(this.fieldSelect=r.default('<span class="qb-ui-table-field-select">'+a.Prefix+"<\/span>").append(this.fieldCheckboxContainer),o.push({control:this.fieldSelect,DrawOrder:-2,Visible:a.Visible})),s&&!s.HideColumnName&&(this.fieldName=r.default('<span class="qb-ui-table-field-name">'+c.Prefix+u.nbsp(t.NameStr)+c.Postfix+"<\/span>"),o.push({control:this.fieldName,DrawOrder:c.DrawOrder,Visible:c.Visible})),s&&!s.HideColumnType&&(this.fieldType=r.default('<span class="qb-ui-table-field-type">'+nt+"<\/span>"),o.push({control:this.fieldType,DrawOrder:v.DrawOrder,Visible:v.Visible})),s&&!s.HideColumnDescription&&(this.fieldDescription=r.default('<span class="qb-ui-table-field-description">'+a.Prefix+(y.UseLongDescription?t.LongDescription:u.nbsp(t.ShortDescription))+f.DescriptionColumnOptions.Postfix+"<\/span>"),o.push({control:this.fieldDescription,DrawOrder:y.DrawOrder,Visible:y.Visible})),this._conditionIndicator=this._createConditionIndicator(),this._aggregationIndicator=this._createAggregationIndicator(),this._sortingIndicator=this._createSortingIndicator(),Array.prototype.push.apply(o,[{control:this._conditionIndicator},{control:this._aggregationIndicator},{control:this._sortingIndicator}]),e&&this._createLinkButtons(o,e,t,i),"*"!==t.NameStr&&(this._contextMenuButton=this._createOnContextMenuButton(),o.push({control:this._contextMenuButton,DrawOrder:-3}),this._goToSubQueryButton=this._createGoToSubQueryButton(),o.push({control:this._goToSubQueryButton,DrawOrder:-4})),o.sort(function(n,t){return(n.DrawOrder||0)-(t.DrawOrder||0)}),l=0;l<o.length;l++)b=o[l],this.element.append(b.control);t.IsUserField&&(h=this,(this.fieldIcon.addClass("qb-ui-table-user-field-icon"),this.table.mdo.EnableUserFields)&&(this.fieldIcon.click(function(){return h.table.dataSource.onEditUserField(h.object),!1}),p=r.default('<span class="qb-ui-table-user-field-delete" title="Delete user field">'),p.click(function(){return h.element.remove(),h.table.dataSource.onRemoveUserField(t)}),this.element.append(p)))}return s(n,[{key:"_createElement",value:function(n){var i=this,f=this,t=r.default("<div>").addClass("qb-ui-table-field").uiHoverable(this._app._style.hover).data("this",this).data("object",n).data("table",this.table).attr("title",n.ShortDescription||n.LongDescription).click(function(n){n.stopPropagation();i.table.onFieldSelect(i)});return u.Utils.AriaLabel(t,this._app.Localizer.Strings.Field+" "+n.NameStr),n.IsUserField&&(t.addClass("qb-ui-table-field--user"),t.attr("expression",n.Expression),n.FieldTypeName=""),"*"===n.NameStr&&(this.asterisk=!0,t.addClass("qb-ui-table-field-asterisk")),t.keydown(function(n){13!==n.keyCode&&32!==n.keyCode||(i.fieldCheckbox.trigger("click"),n.preventDefault())}),t.dblclick(function(){var n={Criteria:[],Expression:i._app.buildNewGridRowExpression(i.table.mdo.NameInQuery,i.object.NameStr),IsNew:!0,Select:!1};f.table.onFieldDblClick(n)}),t}},{key:"_createLinkButtons",value:function(n,t,i,r){var u,f;this._app.options.LinkManipulations!==c.Enum.LinkManipulations.Deny&&(u=Object.keys(t.fk),(this.isForeignKey=0!==u.length,this.isPrimaryKey=i.PrimaryKey,this.isForeignKey&&(this.isForeignKey=!0,n.push({control:this._createFkKey(u,t),DrawOrder:-4,Visible:!0})),this.isPrimaryKey)&&(f=Object.keys(t.pk),0!==f.length&&n.push({control:this._createPkKey(f,r),DrawOrder:-5,Visible:!0}),this.fieldIcon.addClass("qb-ui-table-field-icon-pk")))}},{key:"_createFkKey",value:function(n,t){var i=this;return this._createLinkButton(o.default.fkButtonClass).attr("title",n[0]).mousedown(function(r){if(0===r.button){var u=t.fk[n[0]].data;i.element.trigger(h.default.Events.TableObjectOnLinkedObjectSelected,u)}})}},{key:"_createPkKey",value:function(n,t){var i=this._createLinkButton(o.default.pkButtonClass).attr("title","<- "+n.reduce(function(n,t){return t+"\n<- "+n}));return t.createLinkObjectsMenu(i,0),i}},{key:"_createLinkButton",value:function(n){return r.default('<span class="links '+n+'"><\/span>')}},{key:"_createCheckbox",value:function(n){var r=this,t=u.createCheckbox(n),f=t.root,i=t.checkbox;return i.click(function(n){return r._onCheck(n)}),{container:f,checkbox:i}}},{key:"_createConditionIndicator",value:function(){if(null!=this.field.WhereConditions&&null!=this.field.HavingConditions){var t=this.field.WhereConditions.map(function(n){return"Where: "+n.Caption}),i=this.field.HavingConditions.map(function(n){return"Having: "+n.Caption}),n=t.concat(i),r=n.join("\n"),u=0!==n.length;return this._createIndicator("condition",r,u)}}},{key:"_createGoToSubQueryButton",value:function(){var n=this,t;if(null!=this.field.SubQueriesConditions)return t=r.default('<span class="go-to-subquery-condition-button"><\/span>').attr("title",this.field.SubQueriesConditions.map(function(n){return n.Caption}).join(",\n")).click(function(){1===n.field.SubQueriesConditions.length&&n._app._changeActiveSubQueryByPath(n.field.SubQueriesConditions[0].SubQueryPath)}),1===this.field.SubQueriesConditions.length&&t.show(),t}},{key:"_createSortingIndicator",value:function(){if(null!=this.field.OrderBy){var n=1===this.field.OrderBy?"Asc":"Desc",t=0!==this.field.OrderBy;return this._createIndicator("sorting-"+n,n,t)}}},{key:"_createAggregationIndicator",value:function(){if(null!=this.field.Aggregates){var n=this.field.Aggregates.join(", "),t=0!==this.field.Aggregates.length;return this._createIndicator("aggregation",n,t)}}},{key:"_createIndicator",value:function(n,t,i){var f="qb-ui-table-field__indicator qb-ui-table-field__indicator--"+n,u=r.default("<span>").attr("class",f).attr("title",t);return i||u.hide(),u}},{key:"_updateIndicator",value:function(n,t,i,r){var f="qb-ui-table-field__indicator qb-ui-table-field__indicator--"+t,u=n.attr("class",f).attr("title",i);return r?u.show():u.hide(),u}},{key:"_createOnContextMenuButton",value:function(){var n=this;return r.default('<span class="context-menu-button"><\/span>').click(function(t){l.default.showForElement(n.element,{my:"left top",of:t.target})})}},{key:"_onCheck",value:function(n){n.preventDefault();this.table.onFieldCheck(this,!this.checked)}},{key:"check",value:function(n){this.fieldCheckbox[0].checked=this.object.IsSelected=this.checked=n}},{key:"show",value:function(){this._domelement.style.display=""}},{key:"hide",value:function(){this._domelement.style.display="none"}},{key:"updateIndicators",value:function(n){var t,i,r,f;if("*"!==this.field.NameStr){if(this.field.OrderBy!==n.OrderBy&&(this.field.OrderBy=n.OrderBy,t=1===this.field.OrderBy?"Asc":"Desc",i=0!==this.field.OrderBy,this._updateIndicator(this._sortingIndicator,"sorting-"+t,t,i)),u.compareArrays(this.field.Aggregates,n.Aggregates)||(this.field.Aggregates=n.Aggregates,r=this.field.Aggregates.join(", "),f=0!==this.field.Aggregates.length,this._updateIndicator(this._aggregationIndicator,"aggregation",r,f)),!u.compareArrays(this.field.WhereConditions,n.WhereConditions)||!u.compareArrays(this.field.HavingConditions,n.HavingConditions)){this.field.WhereConditions=n.WhereConditions;this.field.HavingConditions=n.HavingConditions;var o=this.field.WhereConditions.map(function(n){return"Where: "+n.Caption}),s=this.field.HavingConditions.map(function(n){return"Having: "+n.Caption}),e=o.concat(s),h=e.join("\n"),c=0!==e.length;this._updateIndicator(this._conditionIndicator,"condition",h,c)}u.compareArrays(this.field.SubQueriesConditions,n.SubQueriesConditions)||(this.field.SubQueriesConditions=n.SubQueriesConditions,n.SubQueriesConditions.length>0?this._goToSubQueryButton.show():this._goToSubQueryButton.hide());this.field.HaveGrouping!==n.HaveGrouping&&(this.field.HaveGrouping=n.HaveGrouping)}}}]),n}();e.Events={TableObjectFieldOnCheckField:"TableObjectFieldOnCheckField",TableObjectFieldOnDblclick:"TableObjectFieldOnDblclick",OnSelect:"OnSelect",OnContextMenuButtonClick:"OnContextMenuButtonClick"};t.default=e},function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var u,f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),e=i(0),r=(u=e)&&u.__esModule?u:{"default":u},o=i(4),s=function(){function n(){var t,i,u;return!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n),t=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),t.filter=r.default('<input type="text" class="toolbar__filter filter-input" placeholder="Filter" />'),t._clear=r.default('<span class="toolbar__button toolbar__button--clear">'),i=r.default('<div class="filter-wrapper">').append(t.filter),u=r.default('<span class="toolbar__button toolbar__button--icon">'),t.element=r.default('<div class="toolbar">').append(u).append(i).append(t._clear),t._initEvents(),t}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,o),f(n,[{key:"_initEvents",value:function(){var n=this;this.element.click(function(){return!1});this.filter.keydown(function(n){if(13===n.keyCode)return!1});this.filter.keyup(function(t){var i=t.target.value;""!==i?n._clear.show():n._clear.hide();n.emit("filterChanged",i)});this._clear.click(this.clearFilter.bind(this))}},{key:"clearFilter",value:function(){this.filter.val("");this._clear.hide();this.emit("filterChanged","");this.hide()}},{key:"show",value:function(){this.element.show();this.emit("show")}},{key:"hide",value:function(){this.element.hide();this.emit("hide")}}]),n}();t.default=s},function(n,t,i){function r(n,t){this._parent=n;this.color=t;this.circleRadius=8;this._canvas=document.createElementNS(u,"svg");this._parent.appendChild(this._canvas)}Object.defineProperty(t,"__esModule",{value:!0});t.default=r;var f,o=i(0),e=(f=o)&&f.__esModule?f:{"default":f},u="http://www.w3.org/2000/svg";r.prototype.setSize=function(n,t){this._canvas.setAttribute("width",n);this._canvas.setAttribute("height",t)};r.prototype.line=function(n,t){var i=document.createElementNS(u,"path"),r=document.createElementNS(u,"path");return i.setAttribute("fill","none"),i.setAttribute("stroke",this.color),i.setAttribute("stroke-width",n),i.setAttribute("stroke-linecap","round"),i.setAttribute("stroke-linejoin","round"),i.getCenter=function(){return i.getPointAtLength(.5*i.getTotalLength())},r.setAttribute("fill","none"),r.setAttribute("stroke","transparent"),r.setAttribute("stroke-width",5),e.default(r).click(t),this._canvas.appendChild(i),this._canvas.appendChild(r),i._bg=r,i};r.prototype.updateLineThin=function(n,t){n.setAttribute("stroke-width",t)};r.prototype.updateLinePath=function(n,t,i,r,u){var f=this._createPath(t,i,r,u);this._updatePath(n,f);this._updatePath(n._bg,f)};r.prototype.toggleSwitchButton=function(n,t){n.setAttribute("style",t?"":"display: none")};r.prototype.updateSwitchButton=function(n,t,i,r){var u=r<0?48:17;n.setAttribute("transform","scale(1.3) translate("+(t+u*r)/1.3+", "+(i-35)/1.3+")")};r.prototype.createSwitchButton=function(){var t=document.createElementNS(u,"g"),n,s,i,h,r;t.classList.add("link-switch");t.setAttribute("style","display: none");n=document.createElementNS(u,"rect");n.setAttribute("x",3);n.setAttribute("y",3);n.setAttribute("rx",3);n.setAttribute("ry",3);n.setAttribute("width",18);n.setAttribute("height",18);n.setAttribute("fill","none");n.classList.add("link-switch-rect");t.appendChild(n);var f=!0,e=!1,o=void 0;try{for(i=["M16 13V11.5H10V9.5H16V8L19 10.5L16 13Z","M8 17V15.5H14V13.5H8V12L5 14.5L8 17Z"][Symbol.iterator]();!(f=(s=i.next()).done);f=!0)h=s.value,r=document.createElementNS(u,"path"),r.setAttribute("d",h),r.setAttribute("fill","#666"),t.appendChild(r)}catch(t){e=!0;o=t}finally{try{!f&&i.return&&i.return()}finally{if(e)throw o;}}return this._canvas.appendChild(t),t};r.prototype._createPath=function(n,t,i,r){return["M",n.x1,n.y1,"L",n.x1+t*i,n.y1,"C",n.x2,n.y2,n.x3,n.y3,n.x4+t*r,n.y4,"L",n.x4,n.y4].join(" ")};r.prototype._updatePath=function(n,t){n.setAttribute("d",t)};r.prototype.circleEnd=function(){var n=document.createElementNS(u,"circle");return n.setAttribute("fill",this.color),n.setAttribute("stroke-width",0),n.setAttribute("r",this.circleRadius-3),this._canvas.appendChild(n),n};r.prototype.updateCircleEnd=function(n,t,i){this._updateCircle(n,t,i,this.circleRadius-3)};r.prototype._updateCircle=function(n,t,i,r){n.setAttribute("cx",t);n.setAttribute("cy",i);n.setAttribute("r",r)};r.prototype.arrowEnd=function(){var n=document.createElementNS(u,"path");return n.setAttribute("fill",this.color),n.setAttribute("stroke-width",0),this._canvas.appendChild(n),n};r.prototype.updateArrowEnd=function(n,t,i,r){var u=["M",t,i,"L",t,i+1,t+8*r,i+5,t+8*r,i-5,t,i-1,"Z"].join(" ");n.setAttribute("d",u)};r.prototype.text=function(n,t){var i=document.createElementNS(u,"text");return i.setAttribute("fill",this.color),i.setAttribute("font-size",t),i.setAttribute("text-anchor","middle"),i.setAttribute("font-family","Arial"),i.textContent=n,this._canvas.appendChild(i),i};r.prototype.updateTextContent=function(n,t,i){n.setAttribute("font-size",i);n.textContent=t};r.prototype.centerButton=function(n){var t=document.createElementNS(u,"circle");return t.setAttribute("fill","white"),t.setAttribute("stroke",this.color),t.setAttribute("stroke-width",1),e.default(t).click(n),this._canvas.appendChild(t),t};r.prototype.updateCenterButton=function(n,t,i){this._updateCircle(n,t,i,this.circleRadius)};r.prototype.crescentButton=function(n){var t=document.createElementNS(u,"path");return t.setAttribute("stroke-width",0),e.default(t).click(n),this._canvas.appendChild(t),t};r.prototype.updateLeftCrescentButton=function(n,t,i,r){var u=this.circleRadius,f="M"+t+" "+Number(i+u)+" C "+Number(t-u-2)+" "+Number(i+u)+", "+Number(t-u-2)+" "+Number(i-u)+", "+t+" "+Number(i-u)+" z";this._updateCrescentButton(n,f,r)};r.prototype.updateRightCrescentButton=function(n,t,i,r){var u=this.circleRadius,f="M"+t+" "+Number(i+u)+" C "+Number(t+u+2)+" "+Number(i+u)+", "+Number(t+u+2)+" "+Number(i-u)+", "+t+" "+Number(i-u)+" z";this._updateCrescentButton(n,f,r)};r.prototype._updateCrescentButton=function(n,t,i){this._updatePath(n,t);n.setAttribute("fill",i?this.color:"transparent")};r.prototype.updateText=function(n,t,i,r){n.setAttribute("x",t+9*r);n.setAttribute("y",i-12)};r.prototype.getParent=function(){return this._parent};r.prototype.removeObj=function(n){e.default(n).remove()};r.prototype.redraw=function(){}},function(n,t,i){function s(n){return n&&n.__esModule?n:{"default":n}}function h(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var l;Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=s(i(0)),e=s(i(9)),o=i(1);var c="properties",u=c+"--collapsed",a=function(){function n(t,i){h(this,n);this._app=t;this.forms=[];this.disables=i;this._render()}return f(n,[{key:"_render",value:function(){var n=o.Utils.getUTabIndex(),t=this._app._style.widget+" "+this._app._style.content+" "+this._app._style.cornerAll;this._root=r.default('<div class="properties__root">');this.title=r.default('<div class="properties__title '+this._app._style.header+" "+this._app._style.cornerAll+'"><span><span><\/div>');this.dock=r.default('<i class="properties__dock">');this.overlay=r.default('<div class="qb-ui-overlay"><\/div>');this.element=r.default("<div>").addClass(t+" "+c+" "+u).attr("tabindex",n);this.element.append(this.title).append(this._root).append(this.overlay);this._initEvents();this._changeTitleText()}},{key:"_initEvents",value:function(){var n=this;this.element.keydown(function(t){if(t.altKey&&13===t.keyCode)return n.hide(),n._app.CanvasComponent.focus(),!1});this.title.click(function(t){n.dock.is(t.target)?n.toggle():n.show()});this.element.focus(function(){n.collapsed()&&n.show()})}},{key:"collapsed",value:function(){return this.element.hasClass(u)}},{key:"toggle",value:function(){this.collapsed()?this.show():this.hide()}},{key:"show",value:function(){this.dock.addClass("properties__dock--fix");this.title.addClass(this._app._style.cornerTop).removeClass(this._app._style.cornerAll);this.element.removeClass(u).addClass(this._app._style.cornerTop).removeClass(this._app._style.cornerAll);this._changeTitleText();this._app.CanvasComponent.resize();r.default(".hide-panel").hide()}},{key:"hide",value:function(){this.dock.removeClass("properties__dock--fix");this.title.removeClass(this._app._style.cornerTop).addClass(this._app._style.cornerAll);this.element.addClass(u).removeClass(this._app._style.cornerTop).addClass(this._app._style.cornerAll);this._changeTitleText();this._app.CanvasComponent.resize();r.default(".hide-panel").show()}},{key:"focus",value:function(){this.forms.length&&this.forms[0].focus()}},{key:"fill",value:function(n){this._app.isForCurrentUnionSubQuery(n)&&(this._process(n.Forms),r.default.each(this.forms,function(n,t){this._tryToDisableForm(t)}.bind(this)),this._updateUserField(n.Forms[0]))}},{key:"highlightErrorField",value:function(n,t,i,r){var u=this._findEditor(n);if(null==u)return null;null!=i?this._setCurrentElementId(i):null!=r&&this._setCurrentMetadataName(r);u.setValue(t);u.highlightError();u.focus()}},{key:"_findEditor",value:function(n){var i=!0,u=!1,f=void 0,e,t,r;try{for(t=this.forms[Symbol.iterator]();!(i=(e=t.next()).done);i=!0)if(r=e.value._editors[n],null!=r)return r}catch(n){u=!0;f=n}finally{try{!i&&t.return&&t.return()}finally{if(u)throw f;}}return null}},{key:"_process",value:function(n){var t;if(this._firstFormName=n[0].Name,this.element.hasClass(u)?this._animateElement(this._changeTitleText.bind(this)):this._changeTitleText(),0!==this.forms.length){if(2===this.forms.length&&1===n.length)return this.forms[0].element.remove(),this.forms[1].element.remove(),this.forms=[],void this._createFormElement(n[0]);if(1!==this.forms.length||2!==n.length){if(this.forms.length===n.length)for(t=0;t<n.length;t++)n[t].Name!==this.forms[t].getName()?this.forms[t].fill(n[t]):this.forms[t].repaint(n[t].PropertiesEditors)}else for(this.forms[0].element.remove(),this.forms=[],t=0;t<n.length;t++)this._createFormElement(n[t])}else for(t=0;t<n.length;t++)this._createFormElement(n[t])}},{key:"_getPropertiesForms",value:function(){var n=this.getCurrentObjectDto({SessionID:this._app.SessionID,UnionSubQueryPath:this._app.getActiveUnionSubQueryPath()});e.default.getPropertiesForms(n,this.fill.bind(this))}},{key:"_sendPropertiesForm",value:function(n,t,i){n.SessionID=this._app.SessionID;n.UnionSubQueryPath=this._app.getActiveUnionSubQueryPath();e.default.sendPropertiesForm(n,t,i)}},{key:"loadByDataSource",value:function(n,t){n&&(this._currentObj!==n||t)&&(this._setCurrentElementId(n.ElementId),this.setCurrentObj(n),this._getPropertiesForms())}},{key:"loadActiveUnionSubQuery",value:function(){this._setCurrentElementId(this._app.CanvasComponent.activeUnionSubQueryElementId);n.activeUnionSubQuery||(this.setCurrentActiveUnionSubQuery(),this._getPropertiesForms())}},{key:"loadByLink",value:function(n,t){(this._currentObj!==n||t)&&(this._setCurrentElementId(n.elementId),this.setCurrentObj(n),this._getPropertiesForms())}},{key:"loadByUserField",value:function(n,t){null!=n&&(null!=this._currentObj&&!t&&this._currentObj.field&&this._currentObj.field.MetadataFullName===n.MetadataFullName||(this._setCurrentMetadataName(n.MetadataFullName),this.setCurrentObj({field:n}),this._getPropertiesForms()))}},{key:"activeSubQueryChanged",value:function(){this._setCurrentElementId(this._app.CanvasComponent.activeUnionSubQueryElementId);this.setCurrentActiveUnionSubQuery()}},{key:"_setCurrentElementId",value:function(n){this._currentElementId=n;this._currentMetadataName=null}},{key:"_setCurrentMetadataName",value:function(n){this._currentMetadataName=n;this._currentElementId=null}},{key:"setCurrentObj",value:function(t){n.activeUnionSubQuery=!1;this._currentObj=t}},{key:"setCurrentActiveUnionSubQuery",value:function(){n.activeUnionSubQuery=!0;this._currentObj=null}},{key:"getCurrentObj",value:function(){return r.default.extend({},this._currentObj)}},{key:"clear",value:function(){r.default.each(this.forms,function(n,t){t.clear()})}},{key:"_createFormElement",value:function(n){var t=new l(this);this.forms.push(t);this._root.append(t.element);t.fill(n)}},{key:"_tryToDisableForm",value:function(n){null!=this._currentObj?this._currentObj.hasOwnProperty("Alias")?this.disables.datasource&&n.disable():this._currentObj.hasOwnProperty("Left")&&this.disables.link&&n.disable():this.disables.query&&n.disable()}},{key:"_createLinkDto",value:function(n){return{left:{DataSourceIndex:n.Left.DataSourceIndex,FieldName:n.Left.FieldName},right:{DataSourceIndex:n.Right.DataSourceIndex,FieldName:n.Right.FieldName},LinkExpression:n.LinkExpression}}},{key:"getCurrentObjectDto",value:function(n){var t=n||{};return null!=this._currentElementId?t.ElementId=this._currentElementId:this._currentMetadataName&&(t.MetadataFullName=this._currentMetadataName),t}},{key:"_onChange",value:function(n,t,i){var r=this,u=this.getCurrentObjectDto({formName:n});u.editedField=t;u.editedValue=i.getValue();this._sendPropertiesForm(u,function(n){var t=r._app;null==n.EditError?(t._onDataReceived(n),t._handlePropertiesFormEditSuccess(r._currentElementId,r._currentMetadataName)):t._handlePropertiesFormEditError(n.EditError,n.FieldName,n.Value,n.ElementId,n.MetadataFieldName)},function(){return i.setValue(i.lastValue)})}},{key:"_changeTitleText",value:function(){var n=this.title.children("span"),t=function(){return this._firstFormName&&this.element.hasClass(u)?this._firstFormName:this._app.Localizer.Strings.Properties}.bind(this)();n.text(t);n.append(this.dock)}},{key:"_animateElement",value:function(n){if(!o.isMobile){var i=this.title.children("span")[0],e=r.default(i).outerWidth(),f=-1,t=f,u=!0;window.requestAnimationFrame(function r(){t+=u?-2:2;i.style.right=t+"px";t<-e&&u&&(u=!1,n());t!==f?window.requestAnimationFrame(r):i.style.right=null})}}},{key:"_updateUserField",value:function(n){var t,i,r;null!=this._currentObj&&this._currentObj.hasOwnProperty("field")&&(t=n.PropertiesEditors.FieldName.Value,null!=t&&(i=this._currentObj.field.MetadataFullName,r=i.lastIndexOf("."),this._currentObj.field.MetadataFullName=i.substr(0,r+1)+t))}}]),n}();t.default=a;l=function(){function n(t){h(this,n);this._container=t;this._app=this._container._app;this._editors=Object.create(null);this._render()}return f(n,[{key:"clear",value:function(){this._setFormName("");this._editors=Object.create(null);this._primaryContainer.empty();this._advancedContainer.empty().show()}},{key:"fill",value:function(n){var t,i;this.clear();this._setFormName(n.Name);t=[];for(i in n.PropertiesEditors)t.push(n.PropertiesEditors[i]);this._currentContainer=this._primaryContainer;this._renderProperties(t.filter(function(n){return n.IsPrimary}));this._currentContainer=this._advancedContainer;this._renderProperties(t.filter(function(n){return!n.IsPrimary}));this._updateAdvanced()}},{key:"repaint",value:function(n){var r,t,i;for(r in this._editors)t=this._editors[r],i=n[r],null!=i&&(t.setValue(i.Value),t.unhighlight&&t.unhighlight(),this._disableEditor(t,i.ReadOnly))}},{key:"_setFormName",value:function(n){n?this._formName.html(n).show():this._formName.hide();this.getName=function(){return n}}},{key:"_renderProperties",value:function(n){var t=this;this._currentGroup=this._currentContainer;r.default.each(n,function(n,i){var r={name:i.Name,value:i.Value,label:i.Label,readonly:i.ReadOnly,fullWidth:i.FullWidth};switch(i.Type){case"String":case"SingleLineSql":t._renderProperty(t._stringEditor.bind(t),r,i);break;case"Int":t._renderProperty(t._numberEditor.bind(t),r,i);break;case"Bool":t._renderProperty(t._boolEditor.bind(t),r,i);break;case"Sql":t._renderProperty(t._sqlEditor.bind(t),r,i);break;case"Memo":t._renderProperty(t._memoEditor.bind(t),r,i);break;case"EnumRadioGroup":r.values=i.Values;t._renderProperty(t._radioGroupEditor.bind(t),r,i);break;case"EnumComboBox":r.values=i.Values;t._renderProperty(t._comboBoxEditor.bind(t),r,i);break;default:throw new Error(i.Type+" type is not defined");}})}},{key:"_updateAdvanced",value:function(){var n=this._advancedContainer,t;if(0===n.find(".properties__item").length)return n.hide();t=this._container._app.Localizer.Strings.AdvancedDividerCaption;this._createToggler(r.default("<h4>"+t+"<\/h4>"),n).click()}},{key:"_render",value:function(){this._formName=r.default('<div class="properties__name '+this._app._style.active+" "+this._app._style.cornerBottom+'">');this._primaryContainer=r.default('<div class="properties__container properties__container--primary">');this._advancedContainer=r.default('<div class="properties__container properties__container--advanced">');this.element=r.default('<div class="'+this._app._style.content+' properties__form"><\/div>');this.element.append(this._formName).append(this._primaryContainer).append(this._advancedContainer)}},{key:"_renderProperty",value:function(n,t,i){var e=this._createProperty(n,t),u,f;i.Group?i.Group!==this._currentGroup.children("h4").text()&&(u=r.default('<div class="properties__group properties__group--'+i.Group.replace(" ","-")+'"><\/div>'),this._currentContainer.append(u),this._currentGroup=u,i.TabPage===i.Group?this._createToggler(r.default("<h4>"+i.Group+"<\/h4>"),u):u.prepend(r.default('<h4 class="properties__group-name">'+i.Group+"<\/h4>"))):this._currentGroup=this._currentContainer;i.Divider&&(f=r.default('<div class="properties__divider"><span>'+i.Divider+"<\/span><\/div>"),this._currentGroup.append(f));this._currentGroup.append(e)}},{key:"_createProperty",value:function(n,t){var u=r.default('<div class="properties__item clearfix">'),i;return null==t.value&&(t.value=""),i=n(t),this._editors[t.name]=i.editor,i.editor.change(function(){this._container._onChange(this.getName(),t.name,i.editor)}.bind(this)),i.editor.focusin(function(){i.editor.lastValue=i.editor.getValue()}),this._disableEditor(i.editor,t.readonly),i.revert?u.append(i.editor).append(i.label):u.append(i.label).append(i.editor)}},{key:"disable",value:function(){for(var n in this._editors)Object.hasOwnProperty.call(this._editors,n)&&this._disableEditor(this._editors[n],!0)}},{key:"focus",value:function(){r.default.each(this._editors,function(n,t){t.prop("disabled")||t.focus()})}},{key:"_stringEditor",value:function(n){return n.type="text",this._simpleEditor(n)}},{key:"_numberEditor",value:function(n){return n.type="number",this._simpleEditor(n)}},{key:"_simpleEditor",value:function(n){var i=r.default('<span class="properties__label">'+n.label+"<\/span>"),t=r.default('<input type="'+n.type+'" class="properties__editor" value="'+n.value+'">');return n.fullWidth&&(t.addClass("properties__editor--full"),i=null),t.keydown(function(n){13===n.keyCode&&r.default(this).blur()}),t.getValue=function(){return this.val()},t.setValue=function(n){this.val(n)},t.highlightError=function(){this.css("background-color","lightcoral")},t.unhighlight=function(){this.css("background-color","")},{label:i,editor:t}}},{key:"_boolEditor",value:function(n){var i=r.default('<span class="properties__label properties__label--checkbox">'+n.label+"<\/span>"),t=r.default('<input type="checkbox" class="properties__editor properties__editor--checkbox">');return t.prop("checked",n.value),t.getValue=function(){return this.prop("checked")},t.setValue=function(n){this.prop("checked",n)},{label:i,editor:t,revert:!0}}},{key:"_sqlEditor",value:function(n){return this._textareaEditor(n.label,n.value)}},{key:"_memoEditor",value:function(n){return this._textareaEditor(n.label,n.value)}},{key:"_textareaEditor",value:function(n,t){n=r.default('<span class="properties__label properties__label--full">'+n+"<\/span>");var i=r.default('<textarea class="properties__editor properties__editor--full">'+t+"<\/textarea>");return i.getValue=function(){return this.val()},i.setValue=function(n){this.val(n)},i.highlightError=function(){this.css("background-color","lightcoral")},i.unhighlight=function(){this.css("background-color","")},{label:n,editor:i}}},{key:"_radioGroupEditor",value:function(n){var i=""!==n.label?r.default('<span class="properties__label properties__label--full">'+n.label+"<\/span>"):null,t=r.default('<div class="properties__editor properties__editor--full">');return r.default.each(n.values,function(i,u){var f=r.default('<input type="radio" name="'+n.name+'" value="'+i+'" class="" /><span>'+u+"<\/span><br />");f.prop("checked",+i===n.value);t.append(f)}),t.getValue=function(){return this.children("input").filter(":checked").val()},t.setValue=function(n){this.children("input").eq(n).prop("checked",!0)},{label:i,editor:t}}},{key:"_comboBoxEditor",value:function(n){var i=""!==n.label?r.default('<span class="properties__label">'+n.label+"<\/span>"):null,t=r.default('<select class="properties__editor">');return r.default.each(n.values,function(n,i){var u=r.default('<option value="'+n+'">'+i+"<\/option>");t.append(u)}),t.val(n.value),t.getValue=function(){return this.val()},t.setValue=function(n){this.val(n)},{label:i,editor:t}}},{key:"_createToggler",value:function(n,t){return n.addClass("properties__group-toggler"),n.click(function(){this._toggle(t,n)}.bind(this)),t.prepend(n),n}},{key:"_toggle",value:function(n,t){n.children("div").toggle();t.toggleClass("properties__group-toggler--toggle")}},{key:"_disableEditor",value:function(n,t){n.prop("disabled",t);n.children("input").prop("disabled",t)}}]),n}()},function(n,t,i){function u(n){return n&&n.__esModule?n:{"default":n}}var f;Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=u(i(0)),o=i(1),s=u(i(7));f=function(){function n(t,i){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this._app=i;this.parent=r.default(t);this.element=r.default('<div class="qb-ui-editor-statusbar-message">');this._closeButton=r.default('<span style="float: right">'+s.default.delete16+"<\/span>");this.parent.append(this.element)}return e(n,[{key:"show",value:function(){var n=this;this.parent.css("margin-top",-this.parent.outerHeight());this._closeButton.click(function(){return n.hide()});this.parent.show()}},{key:"hide",value:function(){this.parent.css("margin-top",0);this.parent.hide()}},{key:"messageInfo",value:function(n){this.element.removeClass("warning error");this.element.addClass("information");this.messageText(n)}},{key:"messageWarning",value:function(n){this.element.removeClass("error information");this.element.addClass("warning");this.messageText(n)}},{key:"messageError",value:function(n){this.element.removeClass("warning information");this.element.addClass("error");this.messageText(n)}},{key:"messageText",value:function(n,t){o.isEmpty(n)||" "==n?(this.parent.hasClass("slidedown")?this.hide():(this.parent.removeClass("warning error information"),this.element.text("")),setTimeout(function(){this.parent.removeClass("warning error information");this.element.text("")}.bind(this),1e3)):(void 0!==t&&(this.element.removeClass("warning error information"),this.element.addClass(t)),-1!==n.indexOf("&nbsp")?this.element.html(n):this.element.text(n),this.element.prepend(this._closeButton),this.show())}},{key:"dispose",value:function(){this.element.empty()}}]),n}();t.default=f},function(n,t,i){function e(n){return n&&n.__esModule?n:{"default":n}}var l,h;Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=e(i(0)),c=i(18),s=i(2),o=e(i(5)),u=i(1),f=e(i(26)),v=e(i(73)),y=e(i(9));l=i(4);h=function(){function n(t,i){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);var u=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),f=i.MetaData.gridColumnsVisualDesciption;return u.doubledCellDescriptions=[{main:f.sorting,secondary:f.sortingOrder},{main:f.grouping,secondary:f.aggregate}],u.Events=n.Events,u.element=r.default(t),u._app=i,u.rows=[],u.orColumnCount=2,u.quickFilterInExpressionMatchFromBeginning=!1,u.inFocus=!1,u.disabled=!1,u.blockFocus=0,u.nullOrderingInOrderBy=!1,u.staticEditControls=[],u.customEditButtons=null,u.staticControlKeys=[u._app.MetaData.FieldParamType.expression,u._app.MetaData.FieldParamType.sortingOrder,u._app.MetaData.FieldParamType.groupingCriterion],u._init(),u._createContextMenu(),u.syncColumns(),u}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,l),a(n,[{key:"_init",value:function(){var f=this,t=this,n,i;this.useCustomExpressionBuilder=this.element.attr("UseCustomExpressionBuilder");this.nullOrderingInOrderBy="true"==this.element.attr("NullOrderingInOrderBy");this.hiddenBlock=r.default('<div class="qb-hidden"><\/div>').appendTo(this.element);n=this.element.attr("orColumnCount");null==n||""==n||isNaN(n)||(this.orColumnCount=Number(n));this.quickFilterInExpressionMatchFromBeginning="true"==this.element.attr("QuickFilterInExpressionMatchFromBeginning");this.element.addClass(this._app._style.widget).droppable({hoverClass:"qb-ui-grid-hover",accept:u.Utils.gridDroppableSelector,tolerance:"pointer",drop:this._dropHandler.bind(this)});this._createHeader();this._createTable();this.element.focus(function(){return f.inFocus=!1});this.element.keydown(function(n){switch(n.keyCode){case 13:if(t.inFocus)return;t.inFocus=!0;t.element.find("[tabindex]:visible:first").focus();n.preventDefault();break;case 9:t.inFocus||n.preventDefault()}});i=this.element.get(0);i.addEventListener("mousewheel",u.scrollPreventer.bind(i))}},{key:"_dropHandler",value:function(t,i){var f;if(i.helper.hasClass("qb-ui-tree-field-helper")){var e=i.helper.data("nameFull"),u=i.helper.data("parentNameFull"),r=new s.Dto.DataSourceDto;r.IsNew=!0;r.Caption=u;r.Name=u;this.emit(n.Events.GridOnAddTableField,{table:r,tableName:u,fieldName:e})}else f=i.helper.data("object"),f.AllFieldsSelected=!0,this.emit(n.Events.GridOnAddTable,{object:f})}},{key:"clearMark",value:function(){r.default.each(this.rows,function(n,t){t.marked&&t.clearMark()})}},{key:"getMarkedRows",value:function(){return this.rows.filter(function(n){return n.marked})}},{key:"_tryAddEmptyRow",value:function(){this.getEmptyRow()||this._addEmptyRow()}},{key:"_addEmptyRow",value:function(){return this.addOrUpdateRow(null,null,!0)}},{key:"_createContextMenu",value:function(){var n=o.default.getGridItems(this._app.Localizer);n=o.default.updateItems(n);o.default.right({selector:".ui-qb-grid-row",app:this._app,build:function(t,i){var e=t.data("me"),s,f,c,o,h,l;if(void 0===e)return{items:n};if(s={},f=null,r.default(i.target).parents().hasClass("ui-qb-grid-row-expression")&&(f=e.ExpressionSubQueries,c=e,c&&u.isEmpty(c.getExpression())&&(s[(h={name:e._app.Localizer.Strings.InsertSubQuery,icon:"goto-subquery",data:null,key:"insert-subquery"}).key]=h)),r.default(i.target).parents().hasClass("ui-qb-grid-row-condition")&&(f=e.ConditionSubQueries),f&&f.length)for(o=0;o<f.length;o++)l=f[o],s[(h={name:e._app.Localizer.Strings.GotoSubquery+" "+l.Caption,icon:"goto-subquery",key:"goto-subquery-"+o}).key]=h;return{items:s}},callback:this._menuCallback.bind(this),items:n})}},{key:"findCellBySubQueryPath",value:function(n){var r=!0,f=!1,e=void 0,o,i,t;try{for(i=this.rows[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){if(t=o.value,t.ExpressionSubQueries.some(function(t){return u.arraysEquals(t.Path,n)}))return t.getCell(this._app.MetaData.FieldParamType.expression);if(t.ConditionSubQueries.some(function(t){return u.arraysEquals(t.Path,n)}))return t.getCell(this._app.MetaData.FieldParamType.condition)}}catch(n){f=!0;e=n}finally{try{!r&&i.return&&i.return()}finally{if(f)throw e;}}return null}},{key:"_menuCallback",value:function(t,i){var r=i.$trigger.data("me"),f=r.element,u,h,e;if(0==t.indexOf("goto-subquery"))return this._changeActiveUnionSubQuery(r);u=o.default.gridKeys;switch(t){case"insert-subquery":h=new s.Dto.GridRowDto;h.Expression="(select *)";this.addRow(h);break;case u.insertEmptyItemAfter:this.appendEmptyRow();break;case u.insertEmptyItemBefore:this.prependEmptyRow();break;case u.moveUp:f.next().length&&(f.insertBefore(f.prev()),r.isEmpty()||this.emit(n.Events.GridOnRowChanged,{row:r}));break;case u.moveDown:e=f.next();e.length&&e.next().length&&(f.insertAfter(e),r.isEmpty()||this.emit(n.Events.GridOnRowChanged,{row:r}));break;case u.removeItem:if(this.rows.length>1)r.delete();else{if(r.isEmpty())return;r.delete()}this._tryAddEmptyRow(r)}}},{key:"appendEmptyRow",value:function(){this._insertEmptyRow()}},{key:"prependEmptyRow",value:function(){this._insertEmptyRow(0)}},{key:"_insertEmptyRow",value:function(n){var i=new s.Dto.GridRowDto,t;i.Expression="";t=this.addRow(i,n,!0).getExpressionCell();t._viewBlock.click();t._editBlock.focus()}},{key:"_changeActiveUnionSubQuery",value:function(n){var t=n.ExpressionSubQueries[0]||n.ConditionSubQueries[0];t&&this._app._changeActiveSubQueryByPath(t.Path)}},{key:"addOrUpdateRow",value:function(n,t,i){var r=this.findRowByDto(n);return null!=r?r.isEmpty()?(r.getExpressionCell().setValue(null),this.addRow(n,t,i)):(this.updateRow(r,n,t,i),r):this.addRow(n,t,i)}},{key:"addRow",value:function(n,t,i){var r=new f.default(n,this);return this.rows.push(r),this._getNeedingToShowGrouping()||r._toggleGroupCretirionCell(!1),this._initEvents(r),r.isEmpty()?this._appendEmptyRow(r):this._appendNonEmptyRow(r,t),i||this._onRowAdded(r),r}},{key:"addExpression",value:function(n,t){var i=this;this.getEmptyRow().setExpression(n,function(){setTimeout(function(){var n=i.getAllRows()[i.rows.length-2];t(n)},250)})}},{key:"_initEvents",value:function(n){n.on(f.default.Events.GridRowOnChanged,this._onRowChanged.bind(this));n.on(f.default.Events.GridRowOnAdded,this._onRowAdded.bind(this));n.on(f.default.Events.GridRowOnRemove,this._onGridRowRemoved.bind(this));n.on(f.default.Events.GridRowSortingTypeChanged,this._onSortingTypeChanged.bind(this));n.on(f.default.Events.GridRowSortingOrderChanged,this._onSortingOrderChanged.bind(this));n.on(f.default.Events.GridRowChecked,this._onRowChecked.bind(this));n.on(f.default.Events.BeforeCustomEditCell,this._beforeCustomEditCell.bind(this));n.on(f.default.Events.BeforeMarkRow,this._onBeforeMarkRow.bind(this));n.on(f.default.Events.AfterMarkRow,this._onAfterMarkRow.bind(this))}},{key:"_appendEmptyRow",value:function(n){this.table.append(n.element)}},{key:"_appendNonEmptyRow",value:function(n,t){return null==t?n.element.insertBefore(this.getEmptyRow().element):(n.newIndex=t,this.table.children().eq(t).before(n.element))}},{key:"updateRow",value:function(t,i,r,f){var e,o;return 0!==r&&u.isEmpty(r)||(r=Number(r))==t.Index||(e=this._getChildByIndex(r),e.length&&e.before(t.element)),o=t.update(i),!f&&o&&this.emit(n.Events.GridOnRowChanged,{row:t}),o}},{key:"_getChildByIndex",value:function(n){if(n<0)return null;var t=this.table[0].childNodes;return n>=t.length?null:r.default(t[n])}},{key:"getAllRows",value:function(){return this.rows.filter(function(n){return!n.isEmpty()})}},{key:"getEmptyRow",value:function(){return this.rows.find(function(n){return n.isEmpty()})}},{key:"removeRow",value:function(n){n.delete()}},{key:"findRowByDto",value:function(n){return this.findRowsByDto(n)[0]}},{key:"findRowsByDto",value:function(n){var r=[],t,i;if(null==n||n.IsNew)return[];if(null!=n.TempId)return[this._findByTempId(n.TempId)];for(t=0;t<this.rows.length;t++)i=this.rows[t],i.equal(n.ElementId)&&r.push(i);return r}},{key:"_findByTempId",value:function(n){for(var i,t=0;t<this.rows.length;t++)if(i=this.rows[t],i.TempId===n)return i}},{key:"findRowByExpression",value:function(n){return this.findRowsByExpression(n)[0]}},{key:"findRowsByExpression",value:function(n){var t=[];return r.default.each(this.rows,function(i,r){r.getExpression()===n&&t.push(r)}),t.length>0?t:(r.default.each(this.rows,function(i,r){r.equalSimilar(n)&&t.push(r)}),t)}},{key:"_updateEmptyRowAggregatesList",value:function(){}},{key:"importDto",value:function(n){var t=this,i=[],f=function(n){if(!t._app.isDisposed)for(var f=n.length,e=function(u){var e=!1,f=n[u];r.default.each(i,function(n,t){if(t===f)return e=!0,!1});e||(t.rows.remove(f),f.remove())},u=0;u<f;u++)e(u)};u.Utils.asyncArrayTask(n.Rows,20,function(n,r){var e,u,o,f;if(!t._app.isDisposed)for(e=n.length,u=0;u<e;u++)o=n[u],f=t.addOrUpdateRow(o,r+u,!0),t._app.emit(t._app.Events.QueryColumnListItemChanged,f),i.push(f)},function(){u.Utils.asyncArrayTask(t.getAllRows(),50,f,function(){t._app.isDisposed||(t._toggleGroupCretirionColumn(),t._updateGroupingAllCheckbox(),t._updateSortingOrderColumn(),t._updateAsteriskItem(),t.emit(t.Events.GridOnReload,t.rows))})})}},{key:"_updateGroupingAllCheckbox",value:function(){var n=this.getAllRows(),t,i;if(n.length<1)return this.header.updateGroupingAll(!0,!1);t=0!==n.filter(function(n){return n.getGrouping()}).length;i=0===n.filter(function(n){return n.isChecked()}).length&&!t;this.header.updateGroupingAll(i,t)}},{key:"updateExpression",value:function(n){var i,f,t,e,o;if(null!=n){if(i=[],n.length)for(f=0;f<n.length;f++)t=n[f],e=u.isEmpty(t.NameInQuery)?t.Name:t.NameInQuery,this._app.options.HideAsteriskItem||(o=e+".*",i.push({selected:!1,text:o,value:o,cssClass:"table"})),r.default(t.Fields).each(function(){var n=e+"."+this.NameSql,t=this.NameStr;i.push({selected:!1,text:t,value:n,cssClass:"field"})});c.EditableSelectStatic.UpdateWrapper("grid-expression",i)}}},{key:"_beforeCustomEditCell",value:function(t){t.row=t.dto;t.columnType=t.column;delete t.dto;delete t.column;this.emit(n.Events.GridBeforeCustomEditCell,t)}},{key:"_onRowChanged",value:function(n){var t=n.row;if(n)var i=n.key,r=n.newValue,u=n.oldValue;return this._rowChanged(t,i,u,r,n.afterCustomEdit,n.callback)}},{key:"_onRowAdded",value:function(t){this.emit(n.Events.GridOnAddRow,t);this._updateAsteriskItem()}},{key:"_onGridRowRemoved",value:function(n){this.emit(this.Events.GridOnRemoveRow,n);this._updateAsteriskItem()}},{key:"_onSortingTypeChanged",value:function(n){this.emit(this.Events.SortingTypeChanged,n)}},{key:"_onSortingOrderChanged",value:function(n){this.emit(this.Events.SortingOrderChanged,n)}},{key:"_onRowChecked",value:function(n){this.emit(this.Events.GridRowChecked,n)}},{key:"_rowChanged",value:function(t,i,r,u,f,e){this._tryAddEmptyRow(t);this.emit(n.Events.GridOnRowChanged,{row:t,key:i,newValue:u,oldValue:r,customEdit:f,callback:e})}},{key:"_onBeforeMarkRow",value:function(n,t){t||this.clearMark()}},{key:"_onAfterMarkRow",value:function(){}},{key:"_updateSortingOrderColumn",value:function(){for(var t,u,r,i=[],n=0;n<this.rows.length;n++)t=this.rows[n],u=t.getSorting(),null!=u&&u>0&&i.push({row:t,sortingOrder:t.getValue(this._app.MetaData.FieldParamType.sortingOrder)});for(i.sort(this._rowSorter),r=[],n=0;n<i.length;n++)r.push({selected:!1,text:String(n+1),value:String(n+1),cssClass:"sortingOrder"}),(t=i[n].row).setValue(this._app.MetaData.FieldParamType.sortingOrder,n+1,!0),t.updateRowControl(this._app.MetaData.FieldParamType.sortingOrder);r.push({selected:!1,text:String(n+1),value:String(n+1),cssClass:"sortingOrder"});c.EditableSelectStatic.UpdateWrapper("grid-sortingOrder",r)}},{key:"_updateAsteriskItem",value:function(){this.getEmptyRow().toggleAsteriskPlaceholder(1==this.rows.length)}},{key:"updateAggregateColumn",value:function(){for(var n=0;n<this.rows.length;n++)this.rows[n].reCreateEditBlock(this._app.MetaData.FieldParamType.aggregate)}},{key:"_rowSorter",value:function(n,t){var i=t.sortingOrder,r=n.sortingOrder;return u.isEmpty(r)||r<0?1:u.isEmpty(i)||i<0?-1:(r=Number(r))-(i=Number(i))}},{key:"_toggleGroupCretirionColumn",value:function(){for(var t=this._getNeedingToShowGrouping(),n=0;n<this.rows.length;n++)this.rows[n]._toggleGroupCretirionCell(t);this.header._toggleGroupCretirionCell(t);this._syncColumn("groupingCriterion")}},{key:"_getNeedingToShowGrouping",value:function(){for(var n=0;n<this.rows.length;n++)if(this.rows[n].getGrouping())return!0;return!1}},{key:"_createHeader",value:function(){var n=this;this.header=new v.default(this);this.element.on("scroll",function(t){return n.header.element.css("top",t.target.scrollTop)})}},{key:"setColumnWidth",value:function(n,t){t=this._parseWidth(t);this.header.setColumnWidth(n,t);this._setColumnWidth(n,t)}},{key:"_parseWidth",value:function(n){return"number"==typeof n?n+"px":"string"==typeof n?"%"===n.slice(-1)||"px"===n.slice(-2)?n:parseFloat(n)+"px":void 0}},{key:"_setColumnWidth",value:function(n,t){var i=".ui-qb-grid-row-cell.ui-qb-grid-row-"+n;r.default(i,this.table).each(function(n,i){return i.style.width=t});this.table.width(this.header.width);this.header.element.width(this.header.width)}},{key:"_createTable",value:function(){var n=this;this.table=r.default('<div class="ui-qb-grid__table '+this._app._style.content+'">').click(function(){return n.clearMark()});this._addEmptyRow();this.table.sortable({handle:".ui-qb-grid-row-action",placeholder:"row-drop-allowing",helper:function(){return document.createElement("span")},start:function(n,t){t.item.show();t.item.data("object").mark(!0,!0)},update:function(t,i){var r=n.getMarkedRows(),u;0===r.length?n.table.sortable("cancel"):(u=r.map(function(n){return n.element}),i.item.after(u),n.emit(n.Events.GridOnMoveRows,r),n.clearMark())}});this.element.append(this.header.element);this.element.append(this.table)}},{key:"syncColumns",value:function(){var n=this;this.header.colWidths.forEach(function(t){return n._setColumnWidth(t.name,t.width)})}},{key:"_syncColumn",value:function(n){var t=this.header.getColumnWidth(n);this._setColumnWidth(n,t)}},{key:"toggleGrouping",value:function(){y.default.toggleGrouping({SessionID:this._app.SessionID,UnionSubQueryPath:this._app.getActiveUnionSubQueryPath()})}},{key:"dispose",value:function(){this.table.remove();this.element.unbind(".QBGrid").empty()}},{key:"show",value:function(){this.element.show()}},{key:"hide",value:function(){this.element.hide()}},{key:"focus",value:function(){}},{key:"scrollToTop",value:function(){this.element.scrollTop(0)}},{key:"scrollToBottom",value:function(){var n=this.getEmptyRow();this.element.scrollTop(n.element.offset().top)}}]),n}();h.Events={GridOnAddRow:"onAddRow",GridOnRemoveRow:"onRemoveRow",GridOnMoveRows:"onMoveRows",GridOnRowChanged:"onGridRowChanged",SortingTypeChanged:"SortingTypeChanged",SortingOrderChanged:"SortingOrderChanged",GridRowChecked:"GridRowChecked",GridOnAddTable:"GridOnAddTable",GridOnAddTableField:"GridOnAddTableField",GridBeforeCustomEditCell:"GridBeforeCustomEditCell",GridOnReload:"GridOnReload"};t.default=h},function(n,t,i){var r,u=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),f=i(71),e=(r=f)&&r.__esModule?r:{"default":r},o=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this.cells={}}return u(n,[{key:"getCell",value:function(n){return this.cells[n]}},{key:"addCell",value:function(n,t){return this.cells[n]=t}},{key:"getKeys",value:function(){var n=[];for(var t in this.cells)n.push(t);return n}},{key:"getCells",value:function(){return this.cells}}]),n}();t.CellFactory=e.default;t.CellContainer=o},function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=i(72),f=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this.types=t.MetaData.gridColumnsVisualDesciption;this.internalTypes=t.MetaData.FieldParamType}return u(n,[{key:"getInternalKey",value:function(n){return n>10?n:this.internalTypes[this.types.getKeyName(n)]}},{key:"create",value:function(n,t,i){var u=this.getInternalKey(n);switch(n){case this.types.visible:return new r.VisibleCell(t,u,i);case this.types.expression:return new r.ExpressionCell(t,u,i);case this.types.alias:return new r.AliasCell(t,u,i);case this.types.sorting:return new r.SortingCell(t,u,i);case this.types.sortingOrder:return new r.SortingOrderCell(t,u,i);case this.types.aggregate:return new r.AggregateCell(t,u,i);case this.types.grouping:return new r.GroupingCell(t,u,i);case this.types.groupingCriterion:return new r.GroupingCriterionCell(t,u,i);case this.types.condition:return new r.ConditionCell(t,u,i);default:return new r.ConditionOrCell(t,u,i)}}},{key:"createEmpty",value:function(n,t,i){var u=this.getInternalKey(n);return n===this.types.expression?new r.ExpressionCell(t,u,i):n===this.types.aggregate?new r.AggregateCell(t,u,i):new r.EmptyCell(t,u,i)}}]),n}();t.default=f},function(n,t,i){function v(n){return n&&n.__esModule?n:{"default":n}}function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function s(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var w;Object.defineProperty(t,"__esModule",{value:!0});t.SortingOrderCell=t.SortingCell=t.GroupingCriterionCell=t.GroupingCell=t.ExpressionCell=t.ConditionOrCell=t.ConditionCell=t.AliasCell=t.AggregateCell=t.VisibleCell=t.GridRowCell=t.EmptyCell=void 0;var h=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=v(i(0)),a=i(2),f=i(1),b=v(i(26));var k=i(4),u=function(){function n(t,i,r){e(this,n);var u=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return u.element=r,u.isSecondary=null!=r,u._viewBlockHtml=null,u._viewBlockTitle=null,u._parent=t,u._grid=t._parent,u._app=t._app,u._key=i,u._isStatic=u._grid.staticControlKeys.contains(i),u.init(),u._initEvents(),u.Events=n.Events,u._tabHandler=u._tabHandler.bind(u),u}return s(n,k),h(n,[{key:"updateValue",value:function(n){this.afterCustomEdit=!0;this._setControlValue(n);this._cellEditEnd()}},{key:"setValue",value:function(n){this._setControlValue(n);this.value(void 0===n?null:n);this.update()}},{key:"value",value:function(n){if(void 0===n)return this._value;this._value=n}},{key:"setTabHandler",value:function(n){this._tabHandlerInternal=n;this._isStatic||this._editControl.on("keydown",this._tabHandler)}},{key:"_tabHandler",value:function(n){if("function"==typeof this._tabHandlerInternal){var t=n.which||n.keyCode;if(n.shiftKey&&9===t)this._tabHandlerInternal(n,this,!0);else{if(9!==t)return;this._tabHandlerInternal(n,this,!1)}return!1}}},{key:"_getControlValue",value:function(){return this._editControl.valEx()}},{key:"_setControlValue",value:function(n){this._editControl&&this._editControl.valEx(n)}},{key:"_createEditControl",value:function(n){var i=this,t;return((n=null==n?this._createEditor():r.default(n)).addClass("ui-qb-grid-row-cell-edit-control"),n.attr("aria-label",this._getCellName()),n.binded)||(n.instantEdit?(n.change(function(){i._cellEditEnd()}),n.binded=!0):(t="blur","select"===n[0].tagName.toLowerCase()&&(t="change"),n.bind(t,function(){var n=r.default(this).parents(".ui-qb-grid-row-cell-edit-block");n.length&&n.data("me")._cellEditEnd()}),n.binded=!0)),n}},{key:"_switchToEdit",value:function(){this._isEditable()&&(null!=this._viewBlock&&this._viewBlock.hide(),null!=this._editBlock&&(this._initializeEditBlock(),this._editBlock.show()),null!=this._editControl&&(this._parent.isEmpty()&&this._editControl.val(""),this._focusEditControl()),this._grid.CurrentEditCell=this)}},{key:"_focusEditControl",value:function(){this._editControl.focus()}},{key:"_isEditable",value:function(){var n=this._parent.getAggregate();return this._parent.isAsterisk()&&null!=n&&""!=n||!this._parent.isEmpty()&&!this._parent.isAsterisk()}},{key:"_switchToView",value:function(){if(null!=this._viewBlock)try{this._grid.blockFocus++;this._viewBlock.show();null!=this._editBlock&&(this._editBlock.hide(),this._utilizeEditBlock())}finally{this._grid.blockFocus--}}},{key:"update",value:function(n){null!=this._viewBlock&&(this._setViewBlockHtml(this._valueHTML()),this._setViewBlockTitle(this.getTitle()));this._isUpdatable(n)&&this._setControlValue(this._value)}},{key:"_setViewBlockHtml",value:function(n){this._viewBlockHtml!==n&&(this._viewBlockHtml=n,this._viewBlock.html(this._viewBlockHtml))}},{key:"_setViewBlockTitle",value:function(n){this._viewBlockTitle!==n&&(this._viewBlockTitle=n,this._viewBlock.attr("title",this._viewBlockTitle))}},{key:"_isUpdatable",value:function(n){return n||!this._isStatic}},{key:"suppressEnter",value:function(n){if(13===n.keyCode)return n.stopPropagation(),this._cellEditEnd(),!1}},{key:"_initializeEditBlock",value:function(){if(!this._isStatic)return!1;this.update(!0);this._editControlPlaceholder.html("");this._editControl.data("me",this);this._editControlPlaceholder.append(this._editControl.detach());this._editControl.data("inHiddenBlock",!1)}},{key:"_utilizeEditBlock",value:function(){if(!this._isStatic)return!1;if(!this._editControl.data("inHiddenBlock")){try{this._grid.hiddenBlock.append(this._editControl)}catch(n){}this._editControl.data("inHiddenBlock",!0)}this._editControlPlaceholder.html("")}},{key:"getTitle",value:function(){return this._parent._parent.tooltipGetText?this._parent._parent.tooltipGetText(this):this.value()}},{key:"_createEditBlock",value:function(){var u="ui-qb-grid-row-cell-edit-block"+(this.isSecondary?" ui-qb-grid-row-cell-edit-block-secondary":""),n=r.default("<div>").addClass(u),t,i;return(this._createCustomEditButton&&this._createCustomEditButton(n),this._editControlPlaceholder=n,!this._isStatic||this instanceof y)?(t=null,null!=this._grid.customEditControl&&(t=this._grid.customEditControl(this._key,this,this._parent)),this._editControl=this._createEditControl(t),i=null!=this._editControl._wrapper?this._editControl._wrapper:this._editControl,this._editControlPlaceholder.append(i)):this._createStaticEditBlock(),this._editControl.instantEdit||n.hide(),n.data("me",this),n}},{key:"_createStaticEditBlock",value:function(){f.isEmpty(this._grid.staticEditControls[this._key])?(this._editControl=this._createEditControl(),this._grid.staticEditControls[this._key]=this._editControl,this._editControl.appendTo(this._grid.hiddenBlock),this._editControl.data("inHiddenBlock",!0)):this._editControl=this._grid.staticEditControls[this._key]}},{key:"_reCreateEditBlock",value:function(){var n=this._grid.staticEditControls;null!=this._editBlock&&(this._editBlock.children().remove(),this._editBlock.remove(),this._editBlock=null);this._isStatic&&n[this._key]&&(n[this._key].remove(),n[this._key]=void 0);this._editBlock=this._createEditBlock();this.element.append(this._editBlock)}},{key:"_createViewBlock",value:function(){return r.default("<div>").addClass("ui-qb-grid-row-cell-view-block"+(this.isSecondary?" ui-qb-grid-row-cell-view-block-secondary":"")).addClass("ui-qb-grid-row-cell-view-control")}},{key:"_cellEditStart",value:function(){this._grid.CurrentEditCell!==this&&(this._subscribeToTabPressIfNeed(!0),this._grid.inFocus=!0,null!=this._grid.CurrentEditCell&&this._grid.CurrentEditCell._cellEditEnd(),this._grid.CurrentEditCell=this,this._switchToEdit(),this.element.addClass("ui-global-focus"),null!=this._editControl&&this._editControl.length>0&&"input"===this._editControl[0].tagName.toLowerCase()&&this._editControl.setCursorPosition(0))}},{key:"_cellEditEnd",value:function(){var r;this._subscribeToTabPressIfNeed(!1);var u=!1,i=this.value(),t=this._getControlValue();return f.Utils.isEqual(i,t)||null==i&&(" "===t||0===t)?this._switchToView():((u=!0,this instanceof p)&&(r=this._calculateSorting(t,i),t=r[0],i=r[1]),this.value(t),this._parent.updateRowControl(this._key),this.emit(n.Events.GridRowCellOnChanged,{key:this._key,newValue:t,oldValue:i,afterCustomEdit:this.afterCustomEdit}),this._switchToView(),this.afterCustomEdit=!1),this._editControl.instantEdit||this.element.removeClass("ui-global-focus"),this._grid.CurrentEditCell=null,u}},{key:"_subscribeToTabPressIfNeed",value:function(n){this._isStatic&&(n?this._editControl.on("keydown",this._tabHandler):this._editControl.off("keydown",this._tabHandler))}},{key:"_getCssBaseClass",value:function(){return"ui-qb-grid-row-"}},{key:"_getCssClass",value:function(){return this._getCssBaseClass()+this._app.MetaData.FieldParamType.getKeyName(this._key)}},{key:"_createEditor",value:function(){return r.default('<input type="text" value="" />').on("keydown",this.suppressEnter.bind(this))}},{key:"init",value:function(){this.element=this.element||r.default('<span class="ui-qb-grid-row-cell '+this._getCssClass()+'" />');this._setAreaLabel();this._viewBlock=this._createViewBlock();this._editBlock=this._createEditBlock();this.element.append(this._viewBlock);this.element.append(this._editBlock);var n=this._app.MetaData.FieldParamType.getKeyName(this._key);this.element[0].style.width=this._grid.header.getColumnWidth(n);this.element[0].style.minWidth=this._grid.header.getColumnMinWidth(n);this._customize()}},{key:"_customize",value:function(){}},{key:"_setAreaLabel",value:function(){this.element.attr("aria-label",this._getCellName())}},{key:"setKey",value:function(n){this._key=n}},{key:"_initEvents",value:function(){var n=this;this.element.focusin(function(t){n._app.GridComponent.disabled||n._app.GridComponent.blockFocus>0||n.element[0]===t.target&&n._cellEditStart()});this._viewBlock&&this._viewBlock.click(function(){n._cellEditStart()});this._editControl&&this._editControl.focusout(function(){n.element.removeClass("ui-global-focus")})}}]),n}(),y=function(){function n(){return e(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,u),h(n,[{key:"_valueHTML",value:function(){return""}},{key:"_createEditor",value:function(){return r.default("<span />")}},{key:"_utilizeEditBlock",value:function(){}},{key:"_isEditable",value:function(){return!1}},{key:"_getCellName",value:function(){}}]),n}(),d=function(){function n(){return e(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,u),h(n,[{key:"_getCellName",value:function(){return""}},{key:"_getControlValue",value:function(){return this._select.valEx()}},{key:"_setControlValue",value:function(n){this._select.valEx(n)}},{key:"_createEditor",value:function(){var n=r.default("<div>");return n.instantEdit=!0,n.append(this._createDragEditor()).append(this._createDeleteEditor()).append(this._createSelectEditor()),n}},{key:"_createDragEditor",value:function(){var n=this;return r.default('<span class="ui-qb-grid-row-action">').click(function(t){n.emit(n.Events.GridRowDragCellClicked,t);t.stopPropagation()})}},{key:"_createDeleteEditor",value:function(){var t=this,n=r.default('<span class="ui-qb-grid-row-deleting">');return n.bind("click",function(){return t._parent.delete()}),this.element.bind("keydown",function(n){13!==n.keyCode&&32!==n.keyCode||this._editControl.trigger("click")}).bind(this),n}},{key:"_createSelectEditor",value:function(){var n=f.createCheckbox(),t=n.root,i=n.checkbox;return this._select=i,r.default('<span class="ui-qb-grid-row-selected">').append(t)}},{key:"_focusEditControl",value:function(){this._select.focus()}},{key:"_isEditable",value:function(){return!0}},{key:"_createViewBlock",value:function(){return null}}]),n}(),l=function(){function n(){return e(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,u),h(n,[{key:"_valueHTML",value:function(){return f.escapeHTML(this._value||"")}},{key:"_createEditor",value:function(){var n=r.default("<select />");return(n=n.editableSelect({wrapperId:"grid-expression",value:this._value,onSelect:function(n){var t=n.parents(".ui-qb-grid-row-cell-edit-block");t.length&&t.data("me")._cellEditEnd()}}).editableSelectInstances()[0].getControl()).binded=!0,this._hasExpressionBuilder()||n.width("100%"),n}},{key:"toggleAsteriskPlaceholder",value:function(n){this._setViewBlockHtml(n?"*":"");this._viewBlock.toggleClass("placeholder",n);this._isAsteriskPlaceholder=n}},{key:"updateCustomEditButton",value:function(n){this._parent.ExpressionSubQueries&&this._parent.ExpressionSubQueries.length>0||this._hasExpressionBuilder()?n.addClass("showCustomEdit"):n.removeClass("showCustomEdit")}},{key:"_cellEditEnd",value:function(){u.prototype._cellEditEnd.call(this);var n=null==this.value()||""==this.value();this._isAsteriskPlaceholder&&n&&this._setViewBlockHtml("*")}},{key:"_initializeEditBlock",value:function(){u.prototype._initializeEditBlock.call(this);this._editControl.val(this.value());this._editBlock.append(this._grid.customEditButtons.detach())}},{key:"_utilizeEditBlock",value:function(){this._grid.customEditButtons.parent()!==this._grid.hiddenBlock&&this._grid.hiddenBlock.append(this._grid.customEditButtons);u.prototype._utilizeEditBlock.call(this)}},{key:"_createCustomEditButton",value:function(n){null==this._grid.customEditButtons&&(this._grid.customEditButtons=this._createCombinedButton(),this._grid.hiddenBlock.append(this._grid.customEditButtons));this.updateCustomEditButton(n)}},{key:"_createCombinedButton",value:function(){return this.$customEditButton=r.default('<span class="customExpressionEdit">'),this.$customEditButton.mousedown(this._combinedButtonMousedown).click(function(){return!1}),this.$customEditButton}},{key:"_combinedButtonMousedown",value:function(){var n=r.default(this).parents(".ui-qb-grid-row-cell-edit-block").data("me");n._hasExpressionBuilder()&&n._parent.emit(b.default.Events.BeforeCustomEditCell,{column:n._key,value:n.value(),dto:n._parent.dto(),cell:n,isNewRow:n._parent.isEmpty()})}},{key:"_hasExpressionBuilder",value:function(){return 0!=(this._grid.useCustomExpressionBuilder&a.Enum.AffectedColumns.ExpressionColumn)}},{key:"_isEditable",value:function(){return!0}},{key:"_getCellName",value:function(){return this._app.Localizer.Strings.Criteria.Expression}}]),n}(),g=function(){function n(){return e(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,u),h(n,[{key:"_valueHTML",value:function(){return f.escapeHTML(this._value||"")}},{key:"_cellEditStart",value:function(){this._app.QBTRIAL?this._app.StatusBarComponent&&this._app.StatusBarComponent.messageInfo("Random aliases is the limitation of the trial version. You will get rid of them and will be able to define own aliases in the paid version."):u.prototype._cellEditStart.call(this)}},{key:"_getCellName",value:function(){return this._app.Localizer.Strings.Criteria.Alias}}]),n}(),nt=function(){function n(t,i,r){e(this,n);var u=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i,r));return u._sortings=u._app.MetaData.SQL.Sorting,u._controlValue=u._sortings.None,u}return s(n,u),h(n,[{key:"_createViewBlock",value:function(){return null}},{key:"_getControlValue",value:function(){return this._controlValue}},{key:"_setControlValue",value:function(n){this._changeValue(n)}},{key:"_changeValue",value:function(n){if(!(n<this._sortings.None||n>this._sortings.Descending)){this._controlValue=n;var i=this._sortings,t=" ui-qb-grid-row-cell-sorting-editor-sort-order--";switch(this._controlValue){case i.None:t="";break;case i.Ascending:t+="ascending";break;case i.Descending:t+="descending"}this._editControl.attr("class","ui-qb-grid-row-cell-sorting-editor-sort-order"+t)}}},{key:"_toggleValue",value:function(){this._changeValue((this._controlValue+1)%(this._sortings.Descending+1))}},{key:"_createEditor",value:function(){var n=r.default("<div>").attr("tabindex",0).addClass("ui-qb-grid-row-cell-sorting-editor-sort-order"),t=this._editInternal.bind(this);return n.click(t),n.on("keydown",function(n){var i=n.which||n.keyCode;if(13!=i&&32!=i||t(),32==i)return!1}),n.instantEdit=!0,n.binded=!0,n}},{key:"_editInternal",value:function(){this._isEditable()&&(this._toggleValue(),this._cellEditEnd())}},{key:"_customize",value:function(){this._editBlock.addClass("ui-qb-grid-row-cell-icon-editor")}},{key:"_getCellName",value:function(){return this._app.Localizer.Strings.Criteria.SortType}}]),n}(),p=function(){function n(){return e(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,u),h(n,[{key:"_valueHTML",value:function(){var n=this._parent.getSortingOrder();return f.isEmpty(n)||0===n?"":n}},{key:"_createEditor",value:function(){var n=r.default("<select />");return(n=n.editableSelect({wrapperId:"grid-sortingOrder",onSelect:function(n){var t=n.parents(".ui-qb-grid-row-cell-edit-block");t.length&&t.data("me")._cellEditEnd()}}).editableSelectInstances()[0].getControl()).binded=!0,n}},{key:"_getCellName",value:function(){return this._app.Localizer.Strings.Criteria.SortOrder}},{key:"_calculateSorting",value:function(n,t){var i=this._parent.getSorting();return f.isEmpty(n)||0==n?(f.isEmpty(i)&&0===i||this._parent.setValue(this._app.MetaData.FieldParamType.sorting,this._app.MetaData.SQL.Sorting.None),[n,t]):(t=f.isEmpty(t)?9999:Number(t),n=Number(n),isNaN(n)&&(n=0),isNaN(t)&&(t=9999),(f.isEmpty(i)||0===i)&&(this._parent.setValue(this._app.MetaData.FieldParamType.sorting,this._app.MetaData.SQL.Sorting.Ascending),this._parent.updateRowControl(this._app.MetaData.FieldParamType.sorting)),[n,t])}}]),n}(),tt=function(){function n(){return e(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,u),h(n,[{key:"_valueHTML",value:function(){return this._value||""}},{key:"_createEditor",value:function(){var n=["<select>"],e=this,t=null!=this._app.options?this._app.options.SyntaxProviderOptions:null,i,u;return f.isEmpty(t)||(i=this._parent.isAsteriskPlaceholder()||this._parent.isAsterisk()?t.AsteriskAggregateNames:t.AggregateList,f.isEmpty(i)||(u="",r.default.each(i,function(t,i){u=i===e._value?' selected="selected" ':"";n.push('<option value="'+i+'"'+u+">"+(null==i?"":i)+"<\/option>")}))),n.push("<\/select>"),r.default(n.join("")).on("change",function(){var n=r.default(this).parents(".ui-qb-grid-row-cell-edit-block");n.length&&n.data("me")._cellEditEnd()})}},{key:"_isEditable",value:function(){return this._parent.isAsteriskPlaceholder()||this._parent.isAsterisk()||u.prototype._isEditable.call(this)}},{key:"_getCellName",value:function(){return this._app.Localizer.Strings.Criteria.Aggregate}}]),n}(),it=function(){function n(){return e(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,u),h(n,[{key:"_createViewBlock",value:function(){return null}},{key:"_createEditor",value:function(){var t=f.createCheckbox(),i=t.root,n=t.checkbox.attr("tabindex",0);return n.instantEdit=!0,n._wrapper=i,n}},{key:"_getCellName",value:function(){return this._app.Localizer.Strings.Criteria.Grouping}},{key:"_customize",value:function(){this._editBlock.addClass("ui-qb-grid-row-cell-icon-editor")}}]),n}(),rt=function(){function n(){return e(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,u),h(n,[{key:"_valueHTML",value:function(){return this._app.MetaData.SQL.GroupingCriterion.getKeyName(this._value,this._app.Localizer)}},{key:"_createEditor",value:function(){var n=["<select>"];return this._app.MetaData.SQL.GroupingCriterion.each(function(t,i){n.push('<option value="'+t+'">'+(null==i?"":i)+"<\/option>")}),n.push("<\/select>"),r.default(n.join("")).bind("change blur",function(){var n=r.default(this).parents(".ui-qb-grid-row-cell-edit-block");n.length&&n.data("me")._cellEditEnd()})}},{key:"_getCellName",value:function(){return this._app.Localizer.Strings.Criteria.CriteriaType}}]),n}(),c=function(){function n(){return e(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,u),h(n,[{key:"_valueHTML",value:function(){return f.escapeHTML(this._value||"")}},{key:"updateGoToSubQueryButton",value:function(n){var t=this;(null!=n&&0!=n.length||this._goToSubQueryButtonVisible)&&(null==this._goToSubQueryButton&&0!=n.length&&(this._goToSubQueryButton=r.default('<span class="go-to-subquery-condition-button"><\/span>'),this.element.append(this._goToSubQueryButton)),this._goToSubQueryButton.attr("title",n.map(function(n){return n.Caption}).join(",\n")),this._goToSubQueryButton.off("click"),this._goToSubQueryButton.on("click",function(){1===n.length&&t._app._changeActiveSubQueryByPath(n[0].Path)}),1==n.length?(this._goToSubQueryButtonVisible||this._goToSubQueryButton.show(),this._goToSubQueryButtonVisible=!0):(this._goToSubQueryButtonVisible&&this._goToSubQueryButton.hide(),this._goToSubQueryButtonVisible=!1))}},{key:"updateCustomEditButton",value:function(n){this._parent.ConditionSubQueries&&this._parent.ConditionSubQueries.length>0||this._hasExpressionBuilder()?n.addClass("showCustomEdit"):n.removeClass("showCustomEdit")}},{key:"_hasExpressionBuilder",value:function(){return 0!=(this._grid.useCustomExpressionBuilder&a.Enum.AffectedColumns.ConditionColumns)}},{key:"_isUpdatable",value:function(){return!0}},{key:"_getCellName",value:function(){return this._app.Localizer.Strings.Criteria.CriteriaItem}}]),n}();c.prototype._initializeEditBlock=l.prototype._initializeEditBlock;c.prototype._utilizeEditBlock=l.prototype._utilizeEditBlock;c.prototype._createCustomEditButton=l.prototype._createCustomEditButton;w=function(){function n(){return e(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,c),n}();u.Events={GridRowCellOnChanged:"onChanged",GridRowCellOnDeleted:"onDeleted",BeforeCustomEditCell:"BeforeCustomEditCell",GridRowDragCellClicked:"GridRowDragCellClicked"};t.EmptyCell=y;t.GridRowCell=u;t.VisibleCell=d;t.AggregateCell=tt;t.AliasCell=g;t.ConditionCell=c;t.ConditionOrCell=w;t.ExpressionCell=l;t.GroupingCell=it;t.GroupingCriterionCell=rt;t.SortingCell=nt;t.SortingOrderCell=p},function(n,t,i){function f(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function e(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function u(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var l;Object.defineProperty(t,"__esModule",{value:!0});var c,r=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),a=i(0),h=(c=a)&&c.__esModule?c:{"default":c},s=i(1);l=function(){function n(t){u(this,n);this._grid=t;this._app=t._app;this._fpt=this._app.MetaData.FieldParamType;this._cells=Object.create(null);this.element=h.default('<div class="ui-qb-grid-row-header">');this.element.width(t.element.width());this._createColumnList();this._createCells()}return r(n,[{key:"updateGroupingAll",value:function(n,t){var i=this._cells.grouping.groupingAll;i.prop("disabled",n);i.get(0).checked=t}},{key:"getMainCell",value:function(n){var t=this._app.MetaData.gridColumnsVisualDesciption,r=t[n],i=this._grid.doubledCellDescriptions.find(function(n){return n.secondary===r});return null==i?null:this._cells[t.getKeyName(i.main)]}},{key:"getCellByKey",value:function(n){var t=this._app.MetaData.FieldParamType;return this.getCellByName(t.getKeyName(n))}},{key:"getCellByName",value:function(n){var t=this._cells[n];return null!=t?t:this.getMainCell(n)}},{key:"getColumnWidth",value:function(n){var t=this.getCellByName(n).element;return t.style.width||this._getBoundingCellRect(t)}},{key:"getColumnMinWidth",value:function(n){return this.getCellByName(n).element.style.minWidth}},{key:"_getBoundingCellRect",value:function(n){return n.getBoundingClientRect().width}},{key:"_createColumnList",value:function(){var n=this._app.Localizer.Strings.Criteria,t;for(this.columnList=Object.create(null),this.columnList[this._fpt.visible]={name:"visible",header:n.Output},this.columnList[this._fpt.expression]={name:"expression",header:n.Expression},this.columnList[this._fpt.alias]={name:"alias",header:n.Alias},this.columnList[this._fpt.sorting]={name:"sorting",header:n.SortType},this.columnList[this._fpt.grouping]={name:"grouping",header:n.Grouping},this.columnList[this._fpt.groupingCriterion]={name:"groupingCriterion",header:n.CriteriaType},this.columnList[this._fpt.condition]={name:"condition",header:n.CriteriaItem},t=0;t<this._grid.orColumnCount;t++)this.columnList[this._fpt.conditionOr1+t]={name:"conditionOr"+(t+1),header:n.CriteriaOr}}},{key:"_createCells",value:function(){var i=this,t,n;for(t in this.columnList)n=this.columnList[t],this._cells[n.name]=this._createHeaderCell(n),this.element.append(this._cells[n.name].element);this._cells.grouping.groupingAll.click(function(){return i._grid.toggleGrouping()})}},{key:"_createHeaderCell",value:function(n){switch(n.name){case"visible":return new v(n,this);case"expression":return new y(n,this);case"condition":return new k(n,this);case"alias":return new p(n,this);case"sorting":return new w(n,this);case"grouping":return new b(n,this);case"groupingCriterion":return new d(n,this);default:if(-1!==n.name.indexOf("conditionOr"))return new g(n,this);throw new Error("!!!");}}},{key:"setColumnWidth",value:function(n,t){this.getCellByName(n).element.style.width=t}},{key:"_toggleGroupCretirionCell",value:function(n){this._getCell(this._fpt.groupingCriterion).element.style.display=n?"":"none"}},{key:"_getCell",value:function(n){return this.getCellByKey(n)}},{key:"width",get:function(){return this.cells.reduce(function(n,t){return h.default(t).is(":visible")?n+h.default(t).outerWidth():n},0)}},{key:"colWidths",get:function(){var n=[];for(var t in this._cells)n.push({name:t,width:this._getBoundingCellRect(this._cells[t].element)});return n}},{key:"cells",get:function(){var n=[];for(var t in this._cells)n.push(this._cells[t].element);return n}}]),n}();t.default=l;var o=function(){function n(t,i){var r=this;u(this,n);this._header=i;this.element=document.createElement("span");h.default(this.element).addClass("header-cell "+i._grid._app._style.header+" ui-qb-grid-row-"+t.name);this.element.style.width=this._getInitialColumnWidth();this.element.style.minWidth=this._getMinimumColumnWidth();this.element.innerText=t.header;"visible"!==t.name&&h.default(this.element).resizable({handles:"e",resize:function(){return i._grid._setColumnWidth(t.name,i._getBoundingCellRect(r.element)+"px")}})}return r(n,[{key:"_convertRepcentsToPixels",value:function(n){return this._header.element.width()/100*n+"px"}}]),n}(),v=function(){function n(){return u(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return e(n,o),r(n,[{key:"_getInitialColumnWidth",value:function(){return"75px"}},{key:"_getMinimumColumnWidth",value:function(){return this._getInitialColumnWidth()}}]),n}(),y=function(){function n(){return u(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return e(n,o),r(n,[{key:"_getInitialColumnWidth",value:function(){return s.isIe11?"300px":this._convertRepcentsToPixels(20)}},{key:"_getMinimumColumnWidth",value:function(){return"120px"}}]),n}(),p=function(){function n(){return u(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return e(n,o),r(n,[{key:"_getInitialColumnWidth",value:function(){return s.isIe11?"200px":this._convertRepcentsToPixels(10)}},{key:"_getMinimumColumnWidth",value:function(){return"100px"}}]),n}(),w=function(){function n(){return u(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return e(n,o),r(n,[{key:"_getInitialColumnWidth",value:function(){return s.isIe11?"220px":this._convertRepcentsToPixels(9)}},{key:"_getMinimumColumnWidth",value:function(){return"120px"}}]),n}(),b=function(){function n(t,i){u(this,n);var r=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,i)),e=s.createCheckbox(),o=e.root,c=e.checkbox;return r.groupingAll=c,h.default(r.element).prepend(o),r}return e(n,o),r(n,[{key:"_getInitialColumnWidth",value:function(){return s.isIe11?"170px":this._convertRepcentsToPixels(9)}},{key:"_getMinimumColumnWidth",value:function(){return"140px"}}]),n}(),k=function(){function n(){return u(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return e(n,o),r(n,[{key:"_getInitialColumnWidth",value:function(){return s.isIe11?"200px":this._convertRepcentsToPixels(20)}},{key:"_getMinimumColumnWidth",value:function(){return"100px"}}]),n}(),d=function(){function n(){return u(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return e(n,o),r(n,[{key:"_getInitialColumnWidth",value:function(){return s.isIe11?"120px":this._convertRepcentsToPixels(6)}},{key:"_getMinimumColumnWidth",value:function(){return"100px"}}]),n}(),g=function(){function n(){return u(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return e(n,o),r(n,[{key:"_getInitialColumnWidth",value:function(){return"100px"}},{key:"_getMinimumColumnWidth",value:function(){return this._getInitialColumnWidth()}}]),n}()},function(n,t,i){function e(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=e(i(0)),u=i(1),h=e(i(8)),o=i(2),a=e(i(9)),v=e(i(75)),y=e(i(76)),p=i(10);e(i(7));var c="tree-node",f="."+c,w=i(4),s=function(){function n(t,i){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);var u=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return u._app=i,u.element=r.default(t),u._content=r.default('<div class="qb-ui-tree-item-block disable-selection">'),u._loader=r.default("<ul><\/ul>").append('<li><div class="node-expandable"><\/div><span class="'+c+' loading">'+u._app.Localizer.Strings.Loading+"<\/span><\/li>"),u._itemsElement=r.default('<div class="qb-ui-tree-items">').append(u._loader),u._filter=new v.default(u._app),u._filteredItemsElement=r.default('<div class="qb-ui-tree-filtered-items"><\/div>'),u.element.append(u._filter.element),u._content.append(u._itemsElement).append(u._filteredItemsElement),u.element.append(u._content),u._showDescriptionInTooltip=u.element.hasClass("showDescriptionInTooltip"),u._defaultExpandMetadataType=Number(u.element.attr("DefaultExpandMetadataType")),u._defaultExpandFolderNodes=u.toBoolean(u.element.attr("DefaultExpandFolderNodes")),u._filterChangeRoutineT=r.default.debounce(u._filterChangeRoutine,500,u),Object.defineProperty(u,"filter",{get:function(){return this._filter.value}}),u._initEvents(),u}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,w),l(n,[{key:"toBoolean",value:function(n){return"string"==typeof n&&"true"===n.toLowerCase()}},{key:"_initEvents",value:function(){function h(t){var f=r.default(t),u=new o.Dto.DataSourceDto;u.IsNew=!0;u.Caption=f.attr("caption");u.Name=f.attr("nameFull");f.children("span").hasClass("qb-ui-object-procedure")&&(u.isProc=!0);i.emit(n.Events.TreeDoubleClickNode,u)}var s,i=this,t=!0,e;this.element.on("click",f+".is-expandable",function(n){t?(t=!1,s=setTimeout(function(){t=!0;i._expand(n)},200)):(clearTimeout(s),t=!0)});this._itemsElement.on("click",".node-expandable",this._expand.bind(this));this._filteredItemsElement.on("click",".node-expandable",this._expand.bind(this));this._filter.on("change",this._filterChangeRoutineT.bind(this));this._content.on("dblclick",".qb-ui-tree-items span.qb-ui-object, .qb-ui-tree-filtered-items span.qb-ui-object",function(n){h(n.currentTarget.parentNode);n.stopPropagation()});this._content.on("click",f+"__mobile",function(n){h(n.currentTarget.parentNode.parentNode);n.stopPropagation()});e=this._content.get(0);e.addEventListener("mousewheel",u.scrollPreventer.bind(e));this._content.on("dblclick",".qb-ui-tree-items span.qb-ui-object-field",function(t){!function(t){var f=r.default(t),e=f.parent().parent(),u=new o.Dto.DataSourceDto,s;u.IsNew=!0;u.Caption=e.attr("caption");u.Name=e.attr("nameFull");s={table:u,field:void 0,tableName:e.attr("nameFull"),fieldName:f.attr("nameFull")};f.parent().parent().children("span").hasClass("qb-ui-object-procedure")&&(s.isProc=!0);i.emit(n.Events.TreeDoubleClickNode,s)}(t.currentTarget.parentNode);t.stopPropagation()})}},{key:"focus",value:function(){this._content.addClass(h.default.focusClass)}},{key:"blur",value:function(){this._content.removeClass(h.default.focusClass)}},{key:"_expand",value:function(n){var f=n.currentTarget,t=r.default(f).parent("li"),i=t.children("ul");i.length&&""!==i.html()?this._toggleNode(i):u.isEmpty(t.attr("IsLoaded"))?this.filter?this._loadFilteredItems(t):this._loadChildItems(t):this._toggleNode(i)}},{key:"_loadChildItems",value:function(n){var t=this;if(n.attr("IsLoaded"))return!1;n.children(f).addClass("loading");this._getTreeNode({Path:n.attr("path")},function(i){return t._loadChildItemsCallback(n,i)})}},{key:"_loadFilteredItems",value:function(n){var i=this,t={Filter:this.filter};n&&(t.Path=n.attr("path"));this._getTreeNode(t,function(t){return i._loadFilteredItemsCallback(n,t)})}},{key:"_getTreeNode",value:function(n,t){n.SessionID=this._app.SessionID;a.default.getTreeNode(n,t)}},{key:"_loadChildItemsCallback",value:function(n,t){this.importData(t);n&&(n.children(f).removeClass("loading"),n.attr("IsLoaded",!0))}},{key:"_loadFilteredItemsCallback",value:function(n,t){this._loadChildItemsCallback(n,t)}},{key:"stopLoadingIndication",value:function(){r.default(f+".loading").hide().removeClass("loading")}},{key:"dispose",value:function(){this.element.empty()}},{key:"_importData",value:function(n,t){if(this._showTreePanel(),!n.Path)return this._rebuild(n,t);var i=this._getExpandedNodes(this._itemsElement),r=this._getNodeByPath(n.Path,this._itemsElement);this._buildItems(n,r,i,t)}},{key:"_rebuild",value:function(n,t){this._itemsElement.empty();this.clearFilter();this._buildItems(n,this._itemsElement,[],t)}},{key:"_importFilteredData",value:function(n,t){var i,r;this._showFilterPanel(n.Path);r=this._getExpandedNodes(".qb-ui-tree-filtered-items");i=n.Path?this._filteredItemsElement.find('li[path="'+n.Path+'"]'):this._filteredItemsElement;this._buildItems(n,i,r,t)}},{key:"_getExpandedNodes",value:function(n){return r.default("li.node-expanded",n).map(function(){return r.default(this).attr("path")}).get()}},{key:"_showTreePanel",value:function(){this._filteredItemsElement.hide();this._itemsElement.show()}},{key:"_showFilterPanel",value:function(n){this._itemsElement.hide();this._filteredItemsElement.show();n||this._filteredItemsElement.html("")}},{key:"clearFilter",value:function(){this._filter.clear();this._showTreePanel()}},{key:"setFilter",value:function(n){this._filter.value=n}},{key:"_filterChangeRoutine",value:function(n){u.isEmpty(n)?this._showTreePanel():this._loadFilteredItems()}},{key:"_collapseNode",value:function(n,t){var i=n.parent("li");i.addClass("node-collapsed");i.removeClass("node-expanded");t?n.hide():n.slideUp(250)}},{key:"_expandNode",value:function(n,t){var i=n.parent("li");i.addClass("node-expanded");i.removeClass("node-collapsed");t?n.show():n.slideDown(250)}},{key:"_toggleNode",value:function(n){var t=n.parent("li");t.toggleClass("node-expanded");t.toggleClass("node-collapsed");u.isMobile?n.toggle(0):n.slideToggle(250)}},{key:"importData",value:function(t){var u=this,r,i;null!=t&&(r=this._countTreeNodes(t)-1,i=function(){0==--r&&u.emit(n.Events.TreeLoaded)},t.IsFiltered?this._importFilteredData(t,i):this._importData(t,i))}},{key:"_countTreeNodes",value:function(n){var t=0;return function n(i){if(t++,null!=i.Items)for(var r=0;r<i.Items.length;r++)n(i.Items[r])}(n),t}},{key:"_buildItems",value:function(n,t,i,e){var h=this,l=n.Items,c,a,s;u.isEmpty(l)?(c=t.find(".loading"),c.hasClass("is-expandable")||c.html(""),c.removeClass("loading")):l.length>0&&(t.children(f).hasClass("loading")&&(a=!0,t.children(f).removeClass("loading")),s=t.children("ul"),0===s.length?(s=r.default("<ul>").appendTo(t),this._filter.value?0==(n.Type&o.Enum.MetadataType.Objects)?this._expandNode(s,!0):this._collapseNode(s,!0):t.hasClass("node-expanded")||this._needToExpand(n.Type,n.IsExpandable)?this._expandNode(s,!0):this._collapseNode(s,!0)):s.html(""),u.Utils.asyncArrayTask(l,30,function(n){var f,r,t,u;if(!h._app.isDisposed)for(f=n.length,r=0;r<f;r++)t=n[r],u=new y.default(t,h._filter.value,i,h._app),s.append(u.element),h._bindItemsEvents(s),a&&s.is(":hidden")&&h._expandNode(s),null!=e&&e(u),null!=t.Items&&t.Items.length>0&&h._buildItems(t,u.element,i,e)}))}},{key:"_bindItemsEvents",value:function(n){var t=this;n.find(".qb-ui-object").draggable({opacity:.8,appendTo:"body",distance:10,revert:"invalid",scroll:!1,helper:function(n){var e=n.currentTarget.parentNode,u=r.default(e),i=new o.Dto.DataSourceDto,f;return i.IsNew=!0,i.Caption=u.attr("caption"),i.Name=u.attr("nameFull"),i.isProc=r.default(this).hasClass("qb-ui-object-procedure"),f=new p.DataSourceHelper({object:i,app:t._app}),f.element}});n.find(".qb-ui-object-field").draggable({opacity:1,appendTo:"body",distance:10,revert:"invalid",scroll:!1,helper:function(n){var i=r.default(n.currentTarget.parentNode),f=i.parents("li"),e=i.attr("name"),t=r.default('<span class="qb-ui-tree-field-helper">'+e.replace(/ /g,"&nbsp;")+"<\/span>");return t.addClass(u.Utils.canvasDroppableClass),t.addClass(u.Utils.gridDroppableClass),t.data("nameFull",i.attr("nameFull")),t.data("parentNameFull",f.attr("nameFull")),t.data("isProc",f.children("span").hasClass("qb-ui-object-procedure")||f.children("span").hasClass("storedproc")),t[0]}})}},{key:"_needToExpand",value:function(n,t){if(!t)return!1;var i=o.Enum.MetadataType;return n===i.Root||(n===i.None?this._defaultExpandFolderNodes:this._defaultExpandMetadataType!==i.None&&n<=this._defaultExpandMetadataType)}},{key:"_getNodeByPath",value:function(n,t){var r,i,f,e;if(!n)return t;for(r=n.split("/"),i=1;i<r.length;i++){if(f=r[i],u.isEmpty(f))break;if(e=t.children("ul").children("li:eq("+f+")"),!e.length)return t;t=e}return t}},{key:"show",value:function(){this.element.show()}},{key:"hide",value:function(){this.element.hide()}}]),n}();s.Events={TreeSelectNode:"TreeSelectNode",TreeDoubleClickNode:"TreeDoubleClickNode",TreeLoaded:"TreeLoaded"};s.prototype.Events=s.Events;t.default=s},function(n,t,i){function f(n){return n&&n.__esModule?n:{"default":n}}var e,o;Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=f(i(0)),u=f(i(8));i(1);e=i(4);o=function(){function n(t){var i,f,u;return!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n),i=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),i._app=t,f=i._app.Localizer.Strings.Find,i.element=r.default('<div class="qb-ui-tree-item-filter-block">'),i._input=r.default('<input class="filter-input" placeholder="'+f+'" autocomplete="off" />'),u=r.default('<div class="filter-wrapper">'),i._clear=r.default('<span class="icon-cross">'),u.append(i._input),i.element.append(u).append('<span class="icon-filter">').append(i._clear),i._initEvents(),i}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,e),s(n,[{key:"_initEvents",value:function(){this._input.keyup(this._change.bind(this));this._input.keydown(this._changeStub.bind(this));this._clear.click(this.clear.bind(this))}},{key:"_change",value:function(n){if(13===n.keyCode)return!1;""!==this.value?this._clear.show():this._clear.hide();this.emit("change",this.value)}},{key:"_changeStub",value:function(n){if(13===n.keyCode)return!1}},{key:"clear",value:function(){this.value="";this._clear.hide()}},{key:"focus",value:function(){this.element.addClass(u.default.focusClass);this._input.focus()}},{key:"blur",value:function(){this.element.removeClass(u.default.focusClass);this._input.blur()}},{key:"value",get:function(){return this._input.val()},set:function(n){this._input.val(n);this.emit("change",this.value)}}]),n}();t.default=o},function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),s=i(0),u=(r=s)&&r.__esModule?r:{"default":r},h=i(2),e=i(1),f=i(1),c=function(){function n(t,i,r,f){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this.element=u.default("<li>");this._app=f;var o=this._app.Localizer.Strings.DataSource+" "+t.Caption,s="<span class='"+(t.IsExpandable?"node-expandable ":"node-nonexpandable")+"'><\/span>",e="node-collapsed";r&&r.contains(t.Path)&&(e="node-expanded");var h=this._createTooltip(t),c=this._getCaption(t,i),l=this._createSpan(c,o,t.TypeStr,t.IsMetadataObject,t.IsExpandable,h),a=this._createIcon(t);this.element.append(s);this.element.append(a);this.element.append(l);this.element.attr("class",e);this.element.attr("index",t.Index);this.element.attr("caption",t.Caption);this.element.attr("name",t.Name);this.element.attr("qualifiedName",t.QualifiedName);this.element.attr("path",t.Path);this.element.attr("nameFull",t.NameFull);t.IsLoaded&&this.element.attr("IsLoaded","true")}return o(n,[{key:"_createSpan",value:function(n,t,i,r,e,o){var s=u.default("<span>"),h;return(s.html(n),s.attr("tabindex","0"),s.attr("aria-label",t),o&&s.attr("title",o),s.addClass("tree-node"),s.addClass(f.Utils.canvasDroppableClass),s.addClass(f.Utils.gridDroppableClass),s.addClass("qb-ui-object-"+i),s.addClass(e?"is-expandable":""),r&&(s.addClass("qb-ui-object"),f.isTouchable))&&(h=u.default('<span class="tree-node__mobile"><span class="tree-node__mobile-plus">+<\/span><\/span>'),s.append(h)),s}},{key:"_createIcon",value:function(n){var t=u.default('<span class="tree-node-icon">'),i;return(t.attr("db-type",n.TypeStr),n.Type===h.Enum.MetadataType.Field)&&(i="simple",n.IsPrimaryKey&&(i="pk"),t.attr("field-type",i)),t}},{key:"_createTooltip",value:function(n){if("function"==typeof this._app.TreeViewComponent.tooltipGetText)return this._app.TreeViewComponent.tooltipGetText({caption:n.Caption,description:n.Description,name:n.Name,fullName:n.NameFull,type:n.Type,typeStr:n.TypeStr});var i=this._app.MetaData.MetadataType.getKeyName(n.Type,this._app.Localizer),t=e.isEmpty(i)?"":i+": ";return t+=n.NameFull||"",this._showDescriptionInTooltip&&(t+=e.isEmpty(n.Description)?"":"\n"+n.Description),t}},{key:"_getCaption",value:function(n,t){return t?this._highlightText(n.Caption,t):n.Caption}},{key:"_highlightText",value:function(n,t){var i=new RegExp("("+t+")","ig");return n.replace(i,'<span class="qb-ui-tree-highlight">$1<\/span>')}}]),n}();t.default=c},function(n,t,i){function f(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=f(i(0)),s=f(i(5)),u=f(i(7)),h=i(1);e=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this._app=t;this.element=r.default('<div class="breadcrumb-container">');this.itemsContainer=r.default('<div class="subqueries">');this.subQueries=[];this.breadcrumbs=[];this.maxCaptionLength=20;this.element.append(this.itemsContainer);this._initContextMenu()}return o(n,[{key:"build",value:function(n){var t=function(){for(var i,u,t=n.Items.slice(),r=0;r<t.length;r++)t[r].Parent=n;for(;0!==t.length;){if(i=t.pop(),i.Active)return i;for(u=0;u<i.Items.length;u++)i.Items[u].Parent=i;t=t.concat(i.Items)}}(),i;t&&(i=function(n){for(var i=[n],t=n;;){if(!t.Parent)return i;i.unshift(t.Parent);t=t.Parent}}(t));this._rebuild(i||[n],t||n)}},{key:"findSubQueryByPath",value:function(n){return this._findSubQueryByPredicate(function(t){return h.arraysEquals(t.subQuery.Path,n)})}},{key:"findSubQueryByButton",value:function(n){return this._findSubQueryByPredicate(function(t){return t.button.get(0)==n})}},{key:"_findSubQueryByPredicate",value:function(n){return this.subQueries.find(n)||this.breadcrumbs.find(n)}},{key:"_initContextMenu",value:function(){var n=this;s.default.right({selector:".subquery",app:this._app,build:function(t,i){return n._buildContextMenu(t,i)}})}},{key:"_buildContextMenu",value:function(n){var i=this.findSubQueryByButton(n.get(0)),t;return null==i?!1:(t=i.subQuery,t.IsSubQueryDerivedTable?this._getDerivedTableContextMenu(n,t):t.IsSubQueryCTE?this._getCteContextMenu(n,t):!!t.IsSubQueryExpression&&this._getSubQueryExpressionContextMenu(n,t))}},{key:"_getDerivedTableContextMenu",value:function(n,t){var i=this;return this._createContextMenu([{name:this._app.Localizer.Strings.Remove,callback:function(){return i._app._deleteSubQueryByPathWithConfirmation(n,t.Path)}}])}},{key:"_getCteContextMenu",value:function(n,t){var f=this,i=this._app.Localizer.Strings,e=t.Caption,o=t.Path,r=t.CteUsages,u=r.length,s=0===u?{name:i.NoUsages,disabled:!0}:this._getCteUsagesContextMenuItem(r);return this._createContextMenu([s,"-",{name:i.Remove,callback:function(){return f._app._deleteCteByPathWithConfirmation(n,e,u,o)}}])}},{key:"_getSubQueryExpressionContextMenu",value:function(n,t){var r=this,i=this._app._findGridRowCellBySubQueryPath(t.Path);return null!=i&&this._createContextMenu([{name:this._app.Localizer.Strings.GoToExpression,callback:function(){return r._app._tryFocusGridCell(i)}}])}},{key:"_getCteUsagesContextMenuItem",value:function(n){var t=this;return{name:this._app.Localizer.Strings.Usages,items:n.map(function(n){return{name:n.SubQueryName,callback:function(){return t._app.changeActiveUnionSubQueryByPath(n.UnionSubQueryPath)}}})}}},{key:"_createContextMenu",value:function(n){for(var i={items:{}},t=0;t<n.length;t++)i.items["item"+t]=n[t];return i}},{key:"_rebuild",value:function(n,t){this.itemsContainer.empty();this._buildBreadcrumbs(n);this._buildSubQueries(t)}},{key:"_buildBreadcrumbs",value:function(n){var t,f,i;for(this.breadcrumbs=[],t=0;t<n.length;t++)f=t===n.length-1,i=this._createButton(n[t],f),this.itemsContainer.append(i),t!=n.length-1&&this.itemsContainer.append(r.default('<span class="breadcrumbs-arrow">'+u.default.arrow+"<\/span>")),this.breadcrumbs.push({button:i,subQuery:n[t]})}},{key:"_buildSubQueries",value:function(n){var t,i,u;if(this.subQueries=[],0!=n.Items.length)for(this.itemsContainer.append(r.default('<span class="breadcrumb-container__separator">')),t=0;t<n.Items.length;t++)i=n.Items[t],u=this._createButton(i,!1),this.itemsContainer.append(u),this.subQueries.push({button:u,subQuery:i})}},{key:"_createButton",value:function(n,t){var f=this,u,i;return n.IsMainQuery&&(n.Caption=this._app.Localizer.Strings.Root),u='<span class="subquery__name">'+this._trimCaption(n.Caption)+"<\/span>",i=r.default('<span class="subquery">').append(this._getSvg(n)).append(u).uiHoverable(this._app._style.hover).addClass(this._app._style.button),t||(this._acces(i),i.click(function(){return f.onClick(n)})),i}},{key:"_getSvg",value:function(n){return n.IsMainQuery?u.default.root:n.IsSubQueryDerivedTable?u.default.tabDerrived:n.IsSubQueryCTE?u.default.tabCte:u.default.tabSubQuery}},{key:"_getCssClass",value:function(n){return n.IsMainQuery?"main":n.IsSubQueryDerivedTable?"derived":n.IsSubQueryCTE?"cte":"subquery"}},{key:"_trimCaption",value:function(n){return null==n?n:n.length<=this.maxCaptionLength?n:n.substr(0,this.maxCaptionLength)+"&hellip;"}},{key:"scrollUp",value:function(){this._scroll(-1)}},{key:"scrollDown",value:function(){this._scroll(1)}},{key:"_scroll",value:function(n){var t=this.itemsContainer[0].scrollTop;this.itemsContainer.animate({scrollTop:t+this.element.height()*n},200,"swing")}},{key:"_acces",value:function(n){n.attr("tabindex",0).keydown(function(n){32!==n.keyCode&&13!==n.keyCode||r.default(n.target).trigger("click")})}},{key:"focus",value:function(){}}]),n}();t.default=e},function(n,t,i){function f(n){return n&&n.__esModule?n:{"default":n}}var o,s;Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=f(i(0)),c=f(i(7)),e=f(i(27)),u=f(i(5)),l=i(1);o=i(4);s=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);var i=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return i._app=t,i.parentElement=r.default('<div class="qb-ui-canvas-navbar-union-panel">'),i.element=r.default('<div class="qb-ui-canvas-navbar-controls">'),i.parentElement.append(i.element),i._createUnions(),i._createDerivedTableButton(),i._createCteButtons(),i}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,o),h(n,[{key:"enableUnions",value:function(n){this._unionsEnabled=n;n?this._unions.show():this._unions.hide()}},{key:"enableCte",value:function(n){this._cteEnabled=n;n?this._newCteButton.show():this._newCteButton.hide()}},{key:"show",value:function(){var n=l.isTouchable?"block":null;this.element[0].style.display=n;this.parentElement[0].style.display=n}},{key:"hide",value:function(){this.element[0].style.display="none";this.parentElement[0].style.display="none"}},{key:"isVisible",value:function(){return this.element.is(":visible")}},{key:"_createDerivedTableButton",value:function(){var n=r.default('<span class="new-derived-table-button">').click(function(){this._app._onCanvasContextMenuCommand({action:"add-derived-table"})}.bind(this));this.element.append(n)}},{key:"_createCteButtons",value:function(){var n=this;this._newCteButton=r.default('<span class="new-cte-button">').click(function(){return n._showCtesContextMenu()});this.element.append(this._newCteButton)}},{key:"updateCtes",value:function(n){this._cteEnabled&&(this.ctes=n)}},{key:"_createUnions",value:function(){this._unions=r.default('<div class="qb-ui-canvas-navbar-controls-pane">');this.element.append(this._unions)}},{key:"updateUnions",value:function(n){var r,u,f;if(this._unionsEnabled){this._unions.empty();for(var e=n.length,i=[],t=0;t<e;t++)r=n[t],u=this._createControl(t,r),i.push(u);f=this._grouping(i);this._unions.append(f)}}},{key:"_showCtesContextMenu",value:function(){var n=this;this.ctes.forEach(function(n){n.name=n.Caption;n.icon="cte"});u.default.right({selector:".new-cte-button",app:this._app,parent:this.element,items:this.ctes.concat({name:this._app.Localizer.Strings.AddCTE}),callback:function(t){var i=n.ctes[t],r=null!=i?{action:"add-cte-query",cte:i}:{action:"add-cte-new"};n._app._onCanvasContextMenuCommand(r)}});u.default.show('[sessionid="'+this._app.SessionID+'"] .new-cte-button')}},{key:"_createControl",value:function(n,t){var i;switch(t.Type){case 0:i=this._createPlus(n,t);this._subscribeToClickButton(i);break;case 1:i=this._createQuery(n,t);this._subscribeToClickButton(i);break;case 2:i=this._createOperator(n,t);this._subscribeToClickOperator(i);break;case 3:i=this._createLeftBracket(n,t);break;case 4:i=this._createRightBracket(n,t)}return i.data("item",t),this._updateNavBarContextMenu(i,t.ContextMenu),i}},{key:"_createQuery",value:function(n,t){var i=this._createBaseControl(n,"Q","Q "+this._app._style.button);return t.Active&&i.addClass(this._app._style.buttonDisabled),i}},{key:"_createOperator",value:function(n,t){return this._createBaseControl(n,"",t.CssClass)}},{key:"_createPlus",value:function(n){return this._createBaseControl(n,c.default.addUnion,"plus-button")}},{key:"_createLeftBracket",value:function(n){return this._createBaseControl(n,"(","left-bracket")}},{key:"_createRightBracket",value:function(n){return this._createBaseControl(n,")","right-bracket")}},{key:"_createBaseControl",value:function(n,t,i,u){var f="union-control-"+n;return r.default('<div class="control" id="'+f+'">').html(t).addClass(i).addClass(u)}},{key:"_grouping",value:function(n){for(var i,r,t,u,e=[],o=n.length,f=0;f<o;f++){switch(i=n[f],r=n[f-1],(u=i.data("item")).Type){case 0:t=this._createControlGroup(null,i);this._subscribeToDrop(t,u.Type);break;case 1:t=r&&2===r.data("item").Type?this._createControlGroup(r,i):this._createControlGroup(null,i);this._subscribeToDrag(t);this._subscribeToDrop(t,u.Type);break;case 3:t=this._createControlGroup(r,i);this._subscribeToDrop(t,u.Type);break;case 4:t=this._createControlGroup(null,i);this._subscribeToDrop(t,u.Type)}e.push(t)}return e}},{key:"_createControlGroup",value:function(n,t){return r.default('<span class="union-group">').append(n).append(t)}},{key:"_subscribeToClickButton",value:function(n){n.click(function(n){var i=r.default(n.currentTarget),t=i.data("item");i.data("fired.longclick")||t.Active||(this._app._onNavBarAction(t.Action),t&&t.Active&&i.addClass(this._app._style.buttonDisabled))}.bind(this))}},{key:"_subscribeToClickOperator",value:function(n){n.click(function(n){var t="#"+n.currentTarget.id;u.default.show(t)})}},{key:"_subscribeToDrop",value:function(n,t){var i=this;r.default(n).droppable({hoverClass:"Q--drop-hover",accept:".union-group",tolerance:"pointer",drop:function(n,u){var f,o,s=r.default(this);switch(t){case 0:f="MoveUnionSubQueryToEnd";break;case 1:f="MoveUnionSubQueryBeforeSubQuery";o=s.children(".Q").data("item").Action.Path;break;case 3:f="MoveUnionSubQueryBeforeSubQuery";o=s.children(".left-bracket").data("item").Action.Path;break;case 4:f="MoveUnionSubQueryToEnd";o=s.children(".right-bracket").data("item").Action.Path}i.emit(e.default.Events.NavBarAction,{Key:f,Path:u.draggable.children(".Q").data("item").Action.Path,Data:o});s.before(u.draggable)}})}},{key:"_subscribeToDrag",value:function(n){r.default(n).draggable({opacity:.2,appendTo:this.element,distance:10,revert:"invalid",helper:"clone",start:function(n){r.default(n.target).hide()},stop:function(n){r.default(n.target).show()}})}},{key:"_updateNavBarContextMenu",value:function(n,t){var i=this;if(null!=t&&0!==t.Items.length){var r=this._generateNavBarContextMenuItems(t.Items),f="#"+n[0].id,e=function(n,t){var i=t.items[n].data;this._contextMenuCallback(n,i)}.bind(this);u.default.right({selector:f,app:this._app,parent:this._app.element,items:r,callback:e,position:function(n){n.$menu.position({my:"left top",at:"center bottom",of:n.$trigger})},events:{show:function(){return i.parentElement[0].style.display="block"},hide:function(){return i.parentElement[0].style=null}}})}}},{key:"_generateNavBarContextMenuItems",value:function(n){var t,r,i,u;if(null==n||0===n.length)return null;for(r={},i=0;i<n.length;i++)u=(t=n[i]).Key,r[u]=null!=t.Name&&"-"===t.Name.substr(0,1)?t.Name:{name:t.Name,icon:u+(t.Checked?" checked":""),items:this._generateNavBarContextMenuItems(t.Items),data:t};return r}},{key:"_contextMenuCallback",value:function(n,t){var i=null;null!=t&&void 0!==t.Action&&(i=t.Action);this.emit(e.default.Events.NavBarAction,i)}}]),n}();t.default=s},function(n,t,i){function f(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=f(i(0)),u=f(i(7));e=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this._app=t;this.element=r.default('<div class="qb-ui-query-structure"><\/div>');this.container=this.createNode();this.element.append(this.container)}return o(n,[{key:"build",value:function(n){this.container.empty();this._fillNode(this.container,[n])}},{key:"createNode",value:function(){return r.default("<ul>")}},{key:"createLeaf",value:function(n){var t=this,i=r.default("<li>"),f=r.default('<span class="qb-ui-query-structure__caption">'+n.Caption+"<\/span>"),e=this._createIcon(n),u;return 0!==n.Items.length&&(u=this._createExpander(i,n)),i.append(u).append(e).append(f).click(function(i){t.hide();t.onClick(n);i.stopPropagation()})}},{key:"_createIcon",value:function(n){var t=r.default("<i>");return n.IsMainQuery?t.html(u.default.root):n.IsSubQueryDerivedTable?t.html(u.default.tabDerrived):n.IsSubQueryCTE?t.html(u.default.tabCte):t.html(u.default.tabSubQuery),t}},{key:"_createExpander",value:function(n){var t=r.default('<span class="node-expandable node-collapsible"><\/span>');return t.click(function(){return n.children("ul").toggle(),t.toggleClass("node-collapsible"),!1}),t}},{key:"_fillNode",value:function(n,t){for(var r,u,f,i=0;i<t.length;i++)r=t[i],u=this.createLeaf(r),(n.append(u),0!==r.Items.length)&&(f=this.createNode(),u.append(f),this._fillNode(f,r.Items))}},{key:"show",value:function(){this.element.show()}},{key:"hide",value:function(){this.element.hide()}},{key:"focus",value:function(){this.show()}}]),n}();t.default=e},function(n,t,i){function f(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=f(i(0)),u=f(i(81));e=function(){function n(t,i,r,u,f){var e=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this._visible=!1;this._title=i;this._content=r;this._buttons=f;this._icon=u;this._autoClose=e;this._disposeOnClose=o;this._app=t;this._parentElement=t.element;this._handleClick=this._handleClick.bind(this);this.render()}return o(n,[{key:"render",value:function(){var n,f,t,h,i;if(this.dispose(),n=this._app._style,(this.wrapper=r.default("<div>").addClass("qb-ui-gialog__wrapper"),this.element=r.default("<div>").addClass(n.widget+" "+n.content+" "+n.cornerAll+" qb-ui-gialog"),this.wrapper.append(this.element),null!=this._title)&&(f=r.default("<div>").addClass(n.header+" "+n.cornerAll+" qb-ui-gialog__title").text(this._title),this.element.append(f)),null!=this._content&&(t=r.default("<div>").addClass("qb-ui-gialog__content"),"string"==typeof this._content?t.text(this._content):t.append(this._content),null!=this._icon&&t.addClass(this._icon),this.element.append(t)),null!=this._buttons&&0!=this._buttons.length){var e=r.default("<div>").addClass("qb-ui-gialog__footer"),u=!0,o=!1,s=void 0;try{for(i=this._buttons[Symbol.iterator]();!(u=(h=i.next()).done);u=!0)h.value.render(this,e)}catch(n){o=!0;s=n}finally{try{!u&&i.return&&i.return()}finally{if(o)throw s;}}this.element.append(e)}this._parentElement.append(this.wrapper);this._autoClose&&r.default(document).mousedown(this._handleClick)}},{key:"_handleClick",value:function(n){var t=this.element;t.is(n.target)||0!==t.has(n.target).length||this.close()}},{key:"show",value:function(n){if(null!=n){var i=n.left,r=n.top,t=this._parentElement.get(0).getBoundingClientRect(),u=t.top,f=t.left,e=window.pageYOffset||document.documentElement.scrollTop,o=window.pageXOffset||document.documentElement.scrollLeft;this.element.css("left",i-f-o);this.element.css("top",r-u-e)}return this.element.show(),this._visible=!0,this}},{key:"showAtElement",value:function(n){var t=n.get(0).getBoundingClientRect(),i=t.top,r=t.left;return this.show({top:i+n.height(),left:r})}},{key:"close",value:function(){this.element.hide();this._visible=!1;this._disposeOnClose&&this.dispose()}},{key:"dispose",value:function(){this._autoClose&&r.default(document).off("mousedown",this._handleClick);null!=this.wrapper&&this.wrapper.remove()}}],[{key:"OkCancel",value:function(t,i,r,f,e,o){var s=t.Localizer.Strings;return new n(t,i,r,f,[new u.default(s.Ok,!0,e,"primary"),new u.default(s.Cancel,!0,o,"secondary")],!0,!0)}},{key:"OkCancelConfirmation",value:function(t,i,r,u){var f=t.Localizer.Strings;return n.OkCancel(t,f.Confirmation,i,"warning",r,u)}}]),n}();t.default=e},function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r,u=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),f=i(0),e=(r=f)&&r.__esModule?r:{"default":r},o=function(){function n(t,i,r,u){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this._caption=t;this._onClick=r;this._isClose=i;this._type=u||"primary"}return u(n,[{key:"render",value:function(n,t){var i=this,r=n._app._style.button+" qb-ui-gialog__button";this.element=e.default("<div>").addClass(r).text(this._caption).click(function(t){i._isClose&&n.close();i._onClick&&i._onClick(t,n)});null!=this._type&&this.element.addClass("qb-ui-gialog__button_"+this._type);t.append(this.element)}}]),n}();t.default=o},function(n,t,i){function e(n){return n&&n.__esModule?n:{"default":n}}var s,f;Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),o=e(i(0)),r=e(i(9)),c=e(i(83)),u=i(84);s=i(4);f=function(){function n(t,i){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);var r=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return r._app=i,r.element=o.default(t),r._toolbar=r._createToolbar(),r._rootFolder=r._createRootFolder(),r._render(),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,s),h(n,[{key:"_render",value:function(){this._rootFolder.element.mousedown(this.clearSelected.bind(this));this.element.append(this._toolbar.element).append(this._rootFolder.element)}},{key:"_createToolbar",value:function(){var t=this,n=new c.default(this._app);return n.on(n.Events.OnCreateFolder,function(){return t._createFolder()}),n.on(n.Events.OnCreateQuery,function(){return t._createUserQuery()}),n.on(n.Events.OnSaveQuery,function(){return t._saveUserQuery()}),n.on(n.Events.OnRename,function(){return t._renameSelected()}),n.on(n.Events.OnOpenQuery,function(){return t._openUserQuery()}),n.on(n.Events.OnDelete,function(){return t._removeSelected()}),n}},{key:"_createRootFolder",value:function(){var n=new u.RootFolder;return n.on("select",this._setSelected.bind(this)),n.on("dblclick",this._ondblclick.bind(this)),n.on("move",this._moveObject.bind(this)),n}},{key:"fill",value:function(n){this._rootFolder.update(n)}},{key:"_createFolder",value:function(){var t=this._getActiveFolder(),i={abort:!1,name:this._app.Localizer.Strings.NewFolder,parentFolder:t},u;(this.emit(n.Events.OnCreateFolder,i),i.abort)||(u={ParentFolderName:t.name,Name:i.name,SessionID:this._app.SessionID},t.expand(),r.default.createQueryFolder(u,function(n){return t.addFolder(n)}))}},{key:"_getActiveFolder",value:function(){return null==this._selected?this._rootFolder:this._selected instanceof u.Folder?this._selected:this._selected.ParentFolder}},{key:"_ondblclick",value:function(n){this._app._addUserQuery(n)}},{key:"_moveObject",value:function(n,t){var i={Name:n.name,ParentFolderName:t.name,SessionID:this._app.SessionID};this._selected instanceof u.Folder?r.default.moveQueryFolder(i):r.default.moveUserQuery(i)}},{key:"_renameSelected",value:function(){var i=this,t=this._selected;t.rename(function(f){var s={abort:!1,object:t,newName:f},e,o;(i.emit(n.Events.OnRename,s),s.abort)||(e={Name:t.name,NewName:f,ParentFolderName:t.ParentFolder.name,SessionID:i._app.SessionID},o=function(){return t.name=f},t instanceof u.Folder?r.default.renameQueryFolder(e,o):r.default.renameUserQuery(e,o))})}},{key:"_openUserQuery",value:function(){var t={abort:!1,query:this._selected},i;(this.emit(n.Events.OnEdit,t),t.abort)||(i={name:this._selected.name,SessionID:this._app.SessionID},r.default.editUserQuery(i))}},{key:"_createUserQuery",value:function(){var t,i,u;this._app.SQL&&(t=this._getActiveFolder(),i={abort:!1,name:this._app.Localizer.Strings.NewUserQuery,expression:this._app.SQL,parentFolder:t},(this.emit(n.Events.OnCreateUserQuery,i),i.abort)||(u={name:i.name,expression:i.expression,parentFolderName:t.name,SessionID:this._app.SessionID},t.expand(),r.default.createUserQuery(u,function(n){return t.addQuery(n)})))}},{key:"_saveUserQuery",value:function(){var t,i;this._app.SQL&&(t={abort:!1,expression:this._selected.expression,newExpression:this._app.SQL},(this.emit(n.Events.OnSaveUserQuery,t),t.abort)||(i={name:this._selected.name,expression:t.newExpression,SessionID:this._app.SessionID},r.default.saveUserQuery(i)))}},{key:"dispose",value:function(){this.element.empty()}},{key:"_removeSelected",value:function(){var f=this,e={abort:!1,object:this._selected},t,i;(this.emit(n.Events.OnRemove,e),e.abort)||(t={Name:this._selected.name,SessionID:this._app.SessionID},i=function(){f._selected.dispose();delete f._selected},this._selected instanceof u.Folder?r.default.deleteQueryFolder(t,i):r.default.deleteUserQuery(t,i))}},{key:"show",value:function(){this.element.show()}},{key:"hide",value:function(){this.element.hide()}},{key:"_setSelected",value:function(n){this.clearSelected();this._selected=n;n.element.addClass("qb-ui-user-queries__item--selected");n instanceof u.Folder?this._toolbar.setFolderState():this._toolbar.setQueryState()}},{key:"clearSelected",value:function(){delete this._selected;this._toolbar.setEmptyState();var n="qb-ui-user-queries__item--selected";o.default("."+n,this.element).removeClass(n)}}]),n}();t.default=f;f.Events={OnCreateFolder:"OnCreateFolder",OnCreateUserQuery:"OnCreateUserQuery",OnSaveUserQuery:"OnSaveUserQuery",OnRemove:"OnRemove",OnEdit:"OnEdit",OnRename:"OnRename",OnAddUserQuery:"OnAddUserQuery"};f.prototype.Events=f.Events},function(n,t,i){function f(n){return n&&n.__esModule?n:{"default":n}}var e,o;Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=f(i(0)),u=f(i(5));e=i(4);o=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);var i=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return i._app=t,i._strings=t.Localizer.Strings,i.element=r.default('<div class="qb-ui-user-queries__toolbar"><\/div>'),i._createButtons(),i.setEmptyState(),i.Events={OnCreateFolder:"OnCreateFolder",OnCreateQuery:"OnCreateQuery",OnSaveQuery:"OnSaveQuery",OnOpenQuery:"OnOpenQuery",OnRename:"OnRename",OnDelete:"OnDelete"},i}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,e),s(n,[{key:"setEmptyState",value:function(){this.editButton.attr("disabled","disabled");this.deleteButton.attr("disabled","disabled");this.saveQuery.attr("disabled","disabled");this._state=null}},{key:"setFolderState",value:function(){this.editButton.removeAttr("disabled","disabled");this.deleteButton.removeAttr("disabled","disabled");this.saveQuery.attr("disabled","disabled");this._state="folder"}},{key:"setQueryState",value:function(){this.editButton.removeAttr("disabled","disabled");this.deleteButton.removeAttr("disabled","disabled");this.saveQuery.removeAttr("disabled","disabled");this._state="query"}},{key:"_createButtons",value:function(){var t=this,n="qb-ui-user-queries__button";this.createFolder=r.default("<i class='"+n+" "+n+"--add' title=\""+this._strings.AddNewFolder+'">').click(function(){return t.emit(t.Events.OnCreateFolder)});this.createQuery=r.default("<i class='"+n+" "+n+"--create' title=\""+this._strings.AddNewUserQuery+'">').click(function(){return t.emit(t.Events.OnCreateQuery)});this.saveQuery=this._createSaveButton(n);this.editButton=this._createEditButton(n);this.deleteButton=this._createDeleteButton(n);this.element.append(this.createFolder).append(this.createQuery).append(this.saveQuery).append(this.editButton).append(this.deleteButton)}},{key:"_createSaveButton",value:function(n){var t=r.default("<i class='"+n+" "+n+"--save' title='"+this._strings.SaveUserQuery+"'>");return this._createSaveMenu(n),t}},{key:"_createSaveMenu",value:function(n){var t=this;u.default.left({selector:"."+n+"--save",app:this._app,build:function(){var n={save:{name:t._strings.SaveUserQuery,icon:"save"}};return"query"===t._state&&{callback:function(){return t.emit(t.Events.OnSaveQuery)},items:n}}})}},{key:"_createEditButton",value:function(n){var t=r.default("<i class='"+n+" "+n+"--edit'>");return this._createEditMenu(n),t}},{key:"_createEditMenu",value:function(n){var t=this;u.default.left({selector:"."+n+"--edit",app:this._app,build:function(){var n={open:{name:t._strings.OpenTheQuery,icon:"query"},rename:{name:t._strings.RenameTheQuery,icon:"rename"}};return null!=t._state&&("folder"===t._state&&delete n.open,{callback:function(n){t.emit("open"===n?t.Events.OnOpenQuery:t.Events.OnRename)},items:n})}})}},{key:"_createDeleteButton",value:function(n){var t=r.default("<i class='"+n+" "+n+"--remove' title='"+this._app.Localizer.Strings.DeleteUserQuery+"'>");return this._createDeleteMenu(n),t}},{key:"_createDeleteMenu",value:function(n){var t=this;u.default.left({selector:"."+n+"--remove",app:this._app,build:function(){return null!=t._state&&{callback:function(){return t.emit(t.Events.OnDelete)},items:{"delete":{name:t._app.Localizer.Strings.DeleteUserQuery,icon:"delete"}}}}})}}]),n}();t.default=o},function(n,t,i){function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function o(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}function s(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}function l(n,t){var i=n.children("span"),u=r.default('<input type="text" value="'+i.text()+'" />').change(function(n){return t(n.target.value)}).keyup(function(n){13===n.keyCode&&u.focusout()}).focusout(function(n){i.show();i.text(n.target.value);u.remove()});i.hide();i.after(u);u.focus()}Object.defineProperty(t,"__esModule",{value:!0});t.Query=t.RootFolder=t.Folder=t.Node=void 0;var u,f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),a=i(0),r=(u=a)&&u.__esModule?u:{"default":u},v=i(1);var h=i(4),c=t.Node=function(){function n(){return e(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,h),f(n,[{key:"_subscribeToDrop",value:function(){var n=this;this.element.droppable({accept:".qb-ui-user-queries__item",tolerance:"pointer",greedy:!0,drop:function(t,i){var r=i.draggable.parent();n.ul.is(r)||(n.emit("move",i.helper.object,n),n.ul.append(i.helper.object.element),n.expand(),i.helper.object.ParentFolder=n)}})}},{key:"_appendFolder",value:function(n){var t=this.ul.children('[type="folder"]').last();0===t.length?this.ul.prepend(n.element):t.after(n.element)}},{key:"addFolder",value:function(n){var i=this,t=new y(n);t.ParentFolder=this;t.on("select",function(n){return i.emit("select",n)});t.on("dblclick",function(n){return i.emit("dblclick",n)});t.on("move",function(n,t){return i.emit("move",n,t)});this._appendFolder(t)}},{key:"addQuery",value:function(n){var i=this,t=new p(n);t.ParentFolder=this;t.on("select",function(n){return i.emit("select",n)});t.on("dblclick",function(n){return i.emit("dblclick",n)});this.ul.append(t.element)}}]),n}(),y=t.Folder=function(){function n(t){var i;e(this,n);i=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));i.name=t.Name;i.element=r.default('<li class="qb-ui-user-queries__item node-collapsed">');var u=r.default('<i class="node-expandable">').click(function(){return i._toggle()}),f=r.default('<i class="qb-ui-user-queries__icon qb-ui-user-queries__icon--folder">'),s=r.default('<span class="qb-ui-user-queries__name">'+t.Name+"<\/span>");return i.ul=r.default('<ul class="qb-ui-user-queries__folder"><\/ul>'),i.element.append(u).append(f).append(s).append(i.ul).attr("type","folder").mousedown(function(n){n.stopPropagation();i.emit("select",i)}),t.Folders.forEach(function(n){return i.addFolder(n)}),t.Queries.forEach(function(n){return i.addQuery(n)}),i._subscribeToDrop(),i}return s(n,c),f(n,[{key:"_toggle",value:function(){this.element.toggleClass("node-collapsed").toggleClass("node-expanded");this.ul.slideDown(300)}},{key:"expand",value:function(){this.element.removeClass("node-collapsed").addClass("node-expanded");this.ul.slideDown(300)}},{key:"collapse",value:function(){this.element.addClass("node-collapsed").removeClass("node-expanded");this.ul.slideUp(300)}},{key:"rename",value:function(n){l(this.element,n)}},{key:"dispose",value:function(){this.element.remove();delete this.element;this.ParentFolder=null}}]),n}(),p=(t.RootFolder=function(){function n(){e(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.element=t.ul=r.default('<ul class="qb-ui-user-queries__folder qb-ui-user-queries__folder--root"><\/ul>'),t._subscribeToDrop(),t}return s(n,c),f(n,[{key:"update",value:function(n){var t=this;this.element.empty();n.Folders.forEach(function(n){return t.addFolder(n)});n.Queries.forEach(function(n){return t.addQuery(n)})}},{key:"expand",value:function(){}}]),n}(),t.Query=function(){function n(t){var i,u,f,s;return e(this,n),i=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),i.name=t.Name,i.expression=t.Expression,i.element=r.default('<li class="qb-ui-user-queries__item '+v.Utils.canvasDroppableClass+'">'),f=r.default('<i class="qb-ui-user-queries__icon qb-ui-user-queries__icon--query">'),s=r.default('<span class="qb-ui-user-queries__name">'+t.Name+"<\/span>"),i.element.append(f).append(s).attr("type","query").mousedown(function(n){i.emit("select",i);n.stopPropagation()}).dblclick(function(n){i.emit("dblclick",i);n.stopPropagation()}),(u=i).element.draggable({opacity:.8,appendTo:"body",distance:10,revert:"invalid",helper:"clone",start:function(n,t){t.helper.object=u}}),i}return s(n,h),f(n,[{key:"rename",value:function(n){l(this.element,n)}},{key:"dispose",value:function(){this.element.remove();delete this.element;this.ParentFolder=null}}]),n}())},function(n,t,i){function f(n){return n&&n.__esModule?n:{"default":n}}var e,u;Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),s=f(i(86)),r=(i(2),f(i(0)));e=i(4);u=function(){function n(t,i){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);var u=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return u._app=i,u.element=r.default(t).addClass(i._style.content),u._createButtons(),u.element.append(u._buttonContainer),u._initEvents(),u.setEditor(new s.default),u}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,e),o(n,[{key:"_createButtons",value:function(){this._buttonContainer=r.default('<div class="qb-ui-editor-refresh-button-container '+this._app._style.cornerAll+' button-container">');this._goToErrorBtn=r.default('<input type="button" class="error-controls-go-to-position" value="Go to error position">');this._clearBtn=r.default('<input type="button" class="error-controls-clear" value="Clear query">');this._getBackBtn=r.default('<input type="button" class="error-controls-restore" value="Get back to the previous query.">');this._createlabel();this._refreshButton=r.default('<span class="qb-ui-editor-refresh-button">').append(r.default('<div class="icon second-icon"><\/div>')).append(r.default('<div class="icon first-icon"><\/div>'));this._buttonContainer.append(this._refreshButton).append(this._refreshLabel)}},{key:"_createlabel",value:function(){this._refreshLabel=r.default('<label class="qb-ui-editor-refresh-button-label">');this._messageText=r.default('<div class="message">');this._controls=r.default('<div class="controls"><\/div>').append(this._goToErrorBtn).append(this._clearBtn).append(this._getBackBtn);var n=r.default("<div>").append(this._messageText).append(this._controls);this._refreshLabel.append(n)}},{key:"_initEvents",value:function(){this._refreshButton.click(this._refreshButtonClick.bind(this));this._refreshButton.mouseenter(this._refreshButtonHover.bind(this));this._goToErrorBtn.click(this._clickErrorPos.bind(this));this._clearBtn.click(this._clearSql.bind(this));this._getBackBtn.click(this._restoreLastGoodSql.bind(this));this.element.keydown(this._getKeyHandler())}},{key:"_getKeyHandler",value:function(){var n=this;return r.default.debounce(function(t){t.ctrlKey&&13===t.keyCode&&n._refreshButtonClick()},100)}},{key:"_refreshButtonClick",value:function(){this._refreshButton.addClass("spinning");this.emit(n.Events.onRefresh)}},{key:"_refreshButtonHover",value:function(){this._buttonContainer.hasClass("error")&&this._buttonContainer.addClass("persistent")}},{key:"_clickErrorPos",value:function(){this.editor.setCursorPosition(this.pos.pos,this.pos.col,this.pos.line)}},{key:"_clearSql",value:function(){this.setSql("");this.emit(n.Events.onClear);this.clearError()}},{key:"_restoreLastGoodSql",value:function(){this.emit(n.Events.onRestore);this.reset();this.clearError()}},{key:"_onEditorChange",value:function(){this._afterSet?this._buttonContainer.hide():(this._buttonContainer.show(),this._refreshButton.show(),this.emit(n.Events.onChange))}},{key:"setEditor",value:function(n){if(null==n.element)throw"Element is null";this.editor&&(n.setSql(this.getSql()),this._removeCurrentEditor());this.editor=n;this.element.append(n.element);this.editor.onChange(this._onEditorChange.bind(this))}},{key:"_removeCurrentEditor",value:function(){this.editor.remove();delete this.editor}},{key:"showError",value:function(n){var t=n.Message;this.pos=n.ErrorPos;-1!==this.pos.pos||-1!==this.pos.col||-1!==this.pos.line?this._goToErrorBtn.show():this._goToErrorBtn.hide();this._controls.show();this._refreshButton.removeClass("spinning");this._showMessage(t,"error")}},{key:"showMessage",value:function(n){this._controls.hide();this._refreshButton.hide();this._showMessage(n,"info")}},{key:"_showMessage",value:function(n,t){this._messageText.html(n);this._buttonContainer.removeClass("error").removeClass("info").addClass(t).show()}},{key:"clearError",value:function(){this._sql=this.editor.getSql();this._controls.hide();this._refreshButton.removeClass("spinning");this._buttonContainer.removeClass("error").removeClass("info");this._buttonContainer.hide();this._messageText.html(this._app.Localizer.Strings.RefreshSQL)}},{key:"setSql",value:function(n){this._afterSet=!0;this.editor.setSql(n);this._afterSet=!1}},{key:"reset",value:function(){this.editor.setSql(this._sql)}},{key:"getSql",value:function(){return this.editor.getSql()}},{key:"show",value:function(){this.element.show()}},{key:"hide",value:function(){this.element.hide()}},{key:"focus",value:function(){this.editor.focus()}},{key:"dispose",value:function(){this._removeCurrentEditor()}}]),n}();t.default=u;u.Events={onGoToErrorPosition:"onGoToErrorPosition",onClear:"onClear",onRestore:"onRestore",onRefresh:"onRefresh",onChange:"onChange"}},function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r,f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),e=i(0),o=(r=e)&&r.__esModule?r:{"default":r},s=i(4),u=function(){function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);var i=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?n:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return i.element=o.default('<textarea name="sql-code"><\/textarea>"').prop("readonly",t),i}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}(n,s),f(n,[{key:"getSql",value:function(){return this.element.val()}},{key:"setSql",value:function(n){this.element.val(n)}},{key:"setCursorPosition",value:function(n){this.focus();this.element[0].setSelectionRange(n,n)}},{key:"focus",value:function(){this.element.focus()}},{key:"onChange",value:function(t){this.element.on("input propertychange",t);this.emit(n.Events.onChange,this)}},{key:"remove",value:function(){this.element.unbind("input propertychange");this.element.remove()}}]),n}();t.default=u;u.Events={onChange:"onChange"};u.prototype.Events=u.Events},function(n,t,i){function u(n,t,i,r){setTimeout(function(){var u=function(n){var u=i.height()-n+(r||0);t.height(u)};(n.resizable({handles:"s",maxHeight:.8*i.height()}),n.on("resize",function(n,t){return u(t.size.height)}),u(n.height()),f.isIe11)&&n.children(".ui-resizable-s").css("background-size","75%")},500)}Object.defineProperty(t,"__esModule",{value:!0});t.default=function(n){if(!r){var t=n.element.next(".qb-ui-layout");0!==t.length&&t.is(":visible")&&(function(n,t){var i=t.find(".qb-ui-layout__left");i.length&&i.resizable({handles:"e"});n.CanvasComponent&&function(n){var i=n.CanvasComponent,r=n.GridComponent,t=n.CanvasComponent.element.parent();t.hasClass("qb-ui-layout__right-top")?u(t,t.next(),t.parent()):t.hasClass("qb-ui-layout__right")&&u(i.element,r.element,t,-45)}(n)}(n,t),function(n,t){t.find(".qb-ui-structure-tabs__tab > label").addClass(n._style.header)}(n,t),r=!0)}};var f=i(1),r=!1},function(n,t,i){function r(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(i(89)),f=r(i(90)),e=r(i(91));t.default={jqueryui:u.default,bootstrap:e.default,"default":f.default}},function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={widget:"ui-widget",header:"ui-widget-header",content:"ui-widget-content",button:"ui-button ui-widget ui-corner-all",buttonEnabled:"ui-button-enabled",buttonDisabled:"ui-state-active",active:"ui-state-active",hover:"",cornerAll:"ui-corner-all",cornerTop:"ui-corner-top",cornerBottom:"ui-corner-bottom"}},function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={widget:"",header:"qb-widget-header",content:"qb-widget-content",button:"subquery__button",buttonEnabled:"",buttonDisabled:"",active:"",hover:"",cornerAll:"qb-corner-all",cornerTop:"qb-corner-top",cornerBottom:""}},function(n,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={widget:"panel panel-primary",header:"panel-heading bg-primary",content:"panel-body",button:"btn btn-primary",buttonEnabled:"active",buttonDisabled:"disabled",active:"bg-info",hover:"",cornerAll:"",cornerTop:"",cornerBottom:""}},function(n,t,i){function f(n){return n&&n.__esModule?n:{"default":n}}var e;Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),r=f(i(0)),u=f(i(93));e=function(){function n(t,i){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this._app=t;this._parentElement=i}return o(n,[{key:"handlePropertiesFormError",value:function(n,t,i,f,e){var o=this;this._closeNotification();this._app._propertiesForms.highlightErrorField(t,i);var s=this._app.Localizer.Strings,h=r.default("<span>").text(s.InvalidPropertyValue.replace("{0}",t)+"\n"+n+" "),c=this._createGoToLink().click(function(){o._app._focusPropertiesForm({elementId:f,metadataFullName:e},function(n){o._app._onDataReceived(n);o._app._propertiesForms.show();o._app._propertiesForms.highlightErrorField(t,i,f,e)})}),l=r.default("<div>").addClass("qb-notification-panel__text").append(h).append(c);this.errorElementId=f;this.errorMetadataFieldName=e;this.notificationMessage=new u.default(this._app,this._parentElement,l,function(){return o._closeNotification()});this.notificationMessage.show()}},{key:"handlePropertiesFormEditSuccess",value:function(n,t){this.errorElementId==n&&this.errorMetadataFieldName==t&&this._closeNotification()}},{key:"handleGridError",value:function(n,t,i,f,e){var o=this;this._closeNotification();var s=this._createGoToLink().click(function(){var n=o._app.GridComponent;o._tryFocusGridRow(n.rows,f,i,t)||(o._app.GridComponent.once(n.Events.GridOnReload,function(n){o._tryFocusGridRow(n,f,i,t)}),o._app._focusErrorElement(f))}),h=r.default("<span>").text(n+" "),c=r.default("<div>").addClass("qb-notification-panel__text").append(h).append(s);this.errorElementId=f;this.errorMetadataFieldName=e;this.errorGridColumnIndex=i;this.notificationMessage=new u.default(this._app,this._parentElement,c,function(){return o._closeNotification()});this.notificationMessage.show()}},{key:"handleGridRowEditSuccess",value:function(n,t){this.errorElementId===n&&t===this.errorGridColumnIndex&&this._closeNotification()}},{key:"handleDataReceived",value:function(){var n=this;this._hasErrors()&&this._app._checkIsErrorElementExists(this.errorElementId,this.errorMetadataFieldName,function(t){t||n._closeNotification()})}},{key:"_tryFocusGridRow",value:function(n,t,i,r){var e=n.find(function(n){return n.elementId==t}),u,f;return null==e?!1:(u=e._cellContainer.getCell(i),u._cellEditStart(),u._setControlValue(r),f=u._editControl,f.css("background-color","lightcoral"),setTimeout(function(){return f.css("background-color","")},200),!0)}},{key:"_createGoToLink",value:function(){var n=this._app.Localizer.Strings;return r.default("<a>").text(n.GoTo+"...").css("cursor","pointer")}},{key:"_hasErrors",value:function(){return null!=this.errorElementId||null!=this.errorMetadataFieldName}},{key:"_closeNotification",value:function(){this.notificationMessage&&this.notificationMessage.dispose();this.notificationMessage=null;this.errorElementId=null;this.errorMetadataFieldName=null;this.errorGridColumnIndex=null}}]),n}();t.default=e},function(n,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r,f=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),e=i(0),u=(r=e)&&r.__esModule?r:{"default":r},o=function(){function n(t,i,r,u){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}(this,n);this._visible=!1;this._app=t;this._parentElement=i;this._content=r;this._onClose=u;this.render()}return f(n,[{key:"render",value:function(){var n,t;this.element&&this.element.remove();n=this._app._style;this.element=u.default("<div>").addClass(n.widget+" "+n.content+" "+n.cornerAll+" qb-notification-panel");this.element.append(u.default("<div>").addClass("qb-notification-panel__icon"));this.element.append(this._content);t=u.default("<div>").addClass("qb-notification-panel__close-wrapper").append(u.default("<div>").addClass("qb-notification-panel__close").click(this._onClose));this.element.append(t);this._parentElement.append(this.element)}},{key:"show",value:function(){this.element.show()}},{key:"hide",value:function(){this.element.hide()}},{key:"dispose",value:function(){null!=this.element&&this.element.remove()}}]),n}();t.default=o},function(n,t,i){function r(n){var t=Object.create(null);for(var i in n)t[i]=n[i];return t}function g(n,t){return!1===t?n:"."+n}var h,nt=i(0),u=(h=nt)&&h.__esModule?h:{"default":h},o=i(38),s=i(28),f=Object.assign({},o.Web,s.Web),e=[],a=[],c=function(n,t){var i=n.indexOf(t);i>-1&&n.splice(i,1)},l=function(n){var t=a.indexOf(n);return-1!=t&&a.splice(t,1),-1!=t};Object.defineProperties(f,{QueryBuilder:{enumerable:!0,get:function(){return o.Web.QueryBuilderContainer.first()}},CriteriaBuilder:{enumerable:!0,get:function(){return s.Web.CriteriaBuilderContainer.first()}},dispose:{enumerable:!0,get:function(){return function(){e.forEach(function(n){return a.push(n)});e.length=0;o.Web.dispose();s.Web.dispose()}}}});f.UI={QueryBuilder:function(n,t,i){i=Object.assign({},ot,i);(t=u.default(t)).addClass("QueryBuilderControl");t.attr("HandlersPath",this._getHandlerPath(i.useRelativePaths||this.useRelativePaths));t.attr("DisableSessionKeeper",i.disableSessionKeeper);t.attr("language",i.language);t.attr("SessionID",n);t.attr("theme",i.theme||"default");i.reinitUrl&&t.attr("reiniturl",i.reinitUrl);!AQB.Web.QueryBuilder&&i.loadStyle&&t.html('<link rel="stylesheet" type="text/css" href="'+this._getStylePath("qb",i.useRelativePaths||this.useRelativePaths,i.loadStyleFrom)+'" />')},ObjectTreeView:function(n,t,i){i=Object.assign({},tt,i);(t=u.default(t)).addClass("qb-ui-tree-view");t.addClass("disable-selection");i.showDescriptionInTooltip&&t.addClass("showDescriptionInTooltip");t.attr("DefaultExpandMetadataType",i.defaultExpandMetadataType);i.defaultExpandFolderNodes&&t.attr("DefaultExpandFolderNodes",i.defaultExpandFolderNodes);t.attr("SessionID",n)},SubQueryNavigationBar:function(n,t,i){i=Object.assign({},it,i);(t=u.default(t)).addClass("qb-ui-canvas-navbar");t.attr("UnionNavBarVisible",i.unionNavBarVisible);t.attr("SessionID",n)},Canvas:function(n,t,i){i=Object.assign({},rt,i);(t=u.default(t)).addClass("qb-ui-canvas");i.descriptionColumnVisible||t.addClass("HideColumnDescription");i.nameColumnVisible||t.addClass("HideColumnName");i.typeColumnVisible||t.addClass("HideColumnType");i.markColumnVisible||t.addClass("HideColumnMark");i.displayKeyCardinality&&t.attr("displaykeycardinality",!0);i.disableLinkProperties&&t.attr("DisableLinkProperties",!0);i.disableQueryProperties&&t.attr("DisableQueryProperties",!0);i.disableDataSourceProperties&&t.attr("DisableDataSourceProperties",!0);t.attr("defaultWidth",i.defaultDatasourceWidth);t.attr("defaultHeight",i.defaultDatasourceHeight);t.attr("linkcolor",i.linkColor);t.attr("linkstyle",i.linkStyle);t.attr("resizeMode",i.resizeMode);t.attr("SessionID",n)},StatusBar:function(n,t){(t=u.default(t)).addClass("qb-ui-editor-statusbar");t.attr("SessionID",n)},Grid:function(n,t,i){i=Object.assign({},ut,i);(t=u.default(t)).addClass("ui-qb-grid");t.attr("orColumnCount",i.orColumnCount);t.attr("QuickFilterInExpressionMatchFromBeginning",i.quickFilterInExpressionMatchFromBeginning);t.attr("NullOrderingInOrderBy",i.nullOrderingInOrderBy);t.attr("UseCustomExpressionBuilder",i.useCustomExpressionBuilder);t.attr("SessionID",n)},SqlEditor:function(n,t,i){i=Object.assign({},ft,i);(t=u.default(t)).addClass("qb-ui-editor");t.attr("readonly",i.readOnly);t.attr("type",i.targetQueryPart);t.attr("SessionID",n)},UserQueries:function(n,t){(t=u.default(t)).addClass("qb-ui-user-queries");t.attr("SessionID",n)},CriteriaBuilder:function(n,t,i){i=Object.assign({},et,i);(t=u.default(t)).addClass("qb-ui-criteria-builder");t.attr("HandlersPath",this._getHandlerPath(i.useRelativePaths||this.useRelativePaths));t.attr("RootJunctionPrefix",i.rootJunctionPrefix);t.attr("JunctionPostfix",i.junctionPostfix);t.attr("ShowPrefixes",i.showPrefixes);t.attr("dateFormat",i.dateFormat);t.attr("AllowCustomLogicalSQLExpressions",i.allowCustomLogicalSQLExpressions);t.attr("SessionID",n);i.autoSubscribe&&t.attr("autoSubscribe","autoSubscribe");i.autoLoad&&t.attr("autoLoad","autoLoad");this.host&&t.attr("host",this.host);!AQB.Web.CriteriaBuilder&&i.loadStyle&&t.html('<link rel="stylesheet" type="text/css" href="'+this._getStylePath("cb",i.useRelativePaths||this.useRelativePaths,i.loadStyleFrom)+'" />')},startApplication:function(){if(arguments.length<2)return this._startAppById(arguments[0]);"function"==typeof arguments[1]?this._createByFunction(arguments[0],arguments[1]):this._createByUrl(arguments[1],arguments[0])},_createByFunction:function(n,t){var i=this;e.push(n);AQB.Web.onQueryBuilderReady(function(n){return n.on(n.Events.SessionExpired,function(n,i){return t(n,i)})});t(function(){l(n)||(c(e,n),i._startAppById(n))},function(t){l(n)||(c(e,n),alert(t))})},_createByUrl:function(n,t){var i,u,r;e.push(n);i=new XMLHttpRequest;u=this;i.onload=function(){l(n)||(c(e,n),this.status>=200&&this.status<400?u._startAppById(n):alert("Error on creating Query Builder: "+this.statusText))};i.onerror=function(){l(n)||(c(e,n),alert("Error on creating Query Builder"))};i.open("POST",t,!0);r=new FormData;r.append("name",n);AQB.Web.beforeSend&&AQB.Web.beforeSend(i);i.send(r)},_startAppById:function(n){o.startApplication(n);s.startApplication(n)},_getStylePath:function(n,t,i){return i||g(this.host+(t?this._getPath():this.virtualPath)+"/resources/style/"+n,t)},_getHandlerPath:function(n){return g(this.host+(n?this._getPath():this.virtualPath),n)},_getPath:function(){return"/ActiveQueryBuilder/Handler"},get virtualPath(){var n=this._getPath();return f.virtualDirectory?"/"+f.virtualDirectory+n:n},get useRelativePaths(){return!!f.useRelativePaths},get host(){return f.host||""}};var v=r({None:0,ExpressionColumn:1,ConditionColumns:2,AllColumns:3}),y=r({Name:0,TypeName:1,NameExceptFields:2,TypeNameExceptFields:3,None:4}),p=r({Asc:0,Desc:1}),w=r({MSAccess:0,MSSQL:1,Simple:2}),b=r({NotSet:0,LeftToRight:1,RightToLeft:2}),k=r({None:0,Root:1,Server:2,Database:4,Schema:8,Package:16,Namespaces:30,Table:32,View:64,Procedure:128,Synonym:256,Objects:480,Aggregate:512,Parameter:1024,Field:2048,ForeignKey:4096,ObjectMetadata:7168,UserQuery:8192,UserField:16384,All:32766}),d=r({Query:"Query",SubQuery:"SubQuery",UnionSubQuery:"UnionSubQuery"}),tt=r({showFields:!0,showDescriptionInTooltip:!0,autoExpandSingleNode:!0,sortingType:y.NameExceptFields,sortOrder:p.Asc,defaultExpandMetadataType:k.Database,defaultExpandFolderNodes:!1}),it=r({unionNavBarVisible:!0}),rt=r({direction:b.LeftToRight,defaultDatasourceWidth:250,defaultDatasourceHeight:160,markColumnVisible:!0,nameColumnVisible:!0,typeColumnVisible:!0,descriptionColumnVisible:!1,disableLinkProperties:!1,disableQueryProperties:!1,disableDataSourceProperties:!1,linkStyle:w.MSAccess,linkColor:"#000B9D",displayKeyCardinality:!0}),ut=r({nullOrderingInOrderBy:!1,orColumnCount:2,useCustomExpressionBuilder:v.None,quickFilterInExpressionMatchFromBeginning:!1}),ft=r({readOnly:!1,targetQueryPart:d.Query}),et=r({rootJunctionPrefix:"Where",junctionPostfix:"of the following succeed",dateFormat:"dd.mm.yy",showPrefixes:!0,allowCustomLogicalSQLExpressions:!1,autoSubscribe:!0,autoLoad:!1,loadStyle:!0,useRelativePaths:!1,loadStyleFrom:""}),ot=r({disableSessionKeeper:!1,theme:"",language:"Auto",host:"",loadStyle:!0,useRelativePaths:!1,loadStyleFrom:""});f.UI.Enums=r({AffectedColumns:v,ObjectsSortingType:y,SQLOrderByOrders:p,LinkStyle:w,ContentDirection:b,MetadataType:k,QueryPart:d});document.removeEventListener("DOMContentLoaded",o.startApplication);document.removeEventListener("DOMContentLoaded",s.startApplication);n.exports={Web:f}}])}),function(n){n.fn.themeswitcher=function(t){function l(t){var r,e,f,h,c;i.onselect!==null&&i.onselect();r=i.buttonpretext+" "+t.title;(r==""||r==" ")&&(r=i.initialtext);o.text(r);e=[];f=t.url;f||(h=i.themepath+i.jqueryuiversion+"/themes/",f=h+t.name+"/jquery-ui.css",e=n('link[href^="'+h+'"]').first());e.length?e[0].href=f:(c=n("<link/>").attr("type","text/css").attr("rel","stylesheet").attr("href",f),c.appendTo("head"));u.find(".jquery-ui-switcher-title").text(r);i.closeonselect&&s()}function a(t){var i=null;return(n.each(f,function(n,r){if(r.name.toLowerCase()===t.toLowerCase()||r.title.toLowerCase()===t.toLowerCase())return i=r,!1}),!i)?f[0]:i}function v(){i.onopen!==null&&i.onopen();u.find(".jquery-ui-switcher-list-hldr").slideDown("fast")}function s(){i.onclose!==null&&i.onclose();u.find(".jquery-ui-switcher-list-hldr").slideUp("fast",function(){})}var u=this,h={},i={loadtheme:"",height:600,width:175,rounded:!0,imgpath:"",themepath:"https://ajax.googleapis.com/ajax/libs/jqueryui/",jqueryuiversion:"1.10.4",initialtext:"Switch Theme",buttonpretext:"Theme:",closeonselect:!0,buttonheight:14,cookiename:"jquery-ui-theme",themes:[],additionalthemes:[],onopen:null,onclose:null,onselect:null,cookieexpires:365,cookiepath:"/"},f,e,o,r,c;return t&&(n.each(t,function(n,t){h[n.toLowerCase()]=t}),n.extend(i,h)),f=i.themes.length?i.themes:[{title:"Default",name:"start",icon:"theme_90_default.png"},{title:"Cupertino",name:"cupertino",icon:"theme_90_cupertino.png"},{title:"UI Lightness",name:"ui-lightness",icon:"theme_90_ui_light.png"},{title:"Le Frog",name:"le-frog",icon:"theme_90_le_frog.png"},{title:"Dot Luv",name:"dot-luv",icon:"theme_90_dot_luv.png"},{title:"Black Tie",name:"black-tie",icon:"theme_90_black_tie.png"},{title:"Blitzer",name:"blitzer",icon:"theme_90_blitzer.png"},{title:"Dark Hive",name:"dark-hive",icon:"theme_90_dark_hive.png"},{title:"Eggplant",name:"eggplant",icon:"theme_90_eggplant.png"},{title:"Excite Bike",name:"excite-bike",icon:"theme_90_excite_bike.png"},{title:"Flick",name:"flick",icon:"theme_90_flick.png"},{title:"Hot Sneaks",name:"hot-sneaks",icon:"theme_90_hot_sneaks.png"},{title:"Humanity",name:"humanity",icon:"theme_90_humanity.png"},{title:"Mint Choc",name:"mint-choc",icon:"theme_90_mint_choco.png"},{title:"Overcast",name:"overcast",icon:"theme_90_overcast.png"},{title:"Pepper Grinder",name:"pepper-grinder",icon:"theme_90_pepper_grinder.png"},{title:"Redmond",name:"redmond",icon:"theme_90_windoze.png"},{title:"Smoothness",name:"smoothness",icon:"theme_90_smoothness.png"},{title:"South Street",name:"south-street",icon:"theme_90_south_street.png"},{title:"Start",name:"start",icon:"theme_90_start_menu.png"},{title:"Sunny",name:"sunny",icon:"theme_90_sunny.png"},{title:"Swanky Purse",name:"swanky-purse",icon:"theme_90_swanky_purse.png"},{title:"Trontastic",name:"trontastic",icon:"theme_90_trontastic.png"},{title:"UI Darkness",name:"ui-darkness",icon:"theme_90_ui_dark.png"},{title:"Vader",name:"vader",icon:"theme_90_black_matte.png"}],i.additionalthemes.length&&n.extend(f,i.additionalthemes),e=n("<a/>").addClass("jquery-ui-switcher-link").addClass("ui-selectmenu ui-widget ui-state-default ui-corner-all ui-selectmenu-dropdown").bind({mouseenter:function(){},mouseleave:function(){!u.find(".jquery-ui-switcher-list-hldr").is(":visible")},click:function(){u.find(".jquery-ui-switcher-list-hldr").is(":visible")?s():v()}}),o=n("<span/>").addClass("jquery-ui-switcher-title").appendTo(e),n("<span/>").addClass("jquery-ui-switcher-arrow").css({float:"right",width:"16px",height:"25px",background:"url("+i.imgpath+"icon_color_arrow.gif) no-repeat 50% 50%"}).appendTo(e),i.loadtheme.length?l(a(i.loadtheme)):o.text(i.initialtext),r=n("<div/>").addClass("jquery-ui-switcher-list-hldr").css({background:"#000",color:"#FFF","font-family":"'Trebuchet MS', Verdana, sans-serif","font-size":"12px",border:"1px solid #CCC","border-top":"none","z-index":"999999",position:"absolute",top:eval(i.buttonheight+3)+"px",left:"0px",padding:"3px 3px 3px 0",display:"none"}).bind({mouseleave:function(){s()}}),i.rounded&&(r.css("border-radius","0 0 6px 6px"),r.css("-moz-border-radius","0 0 6px 6px"),r.css("-webkit-border-radius","0 0 6px 6px")),c=n("<ul/>").css({"list-style":"none",margin:"0",padding:"0","overflow-y":"auto","overflow-x":"hidden",height:i.height+"px"}).appendTo(r),n.each(f,function(t,r){var f=n("<li>").css("height","90px").appendTo(c),u=n("<a>").css({display:"block",padding:"5px 3px 5px 5px","text-decoration":"none",float:"left",width:"100%",clear:"left"}).bind({mouseenter:function(){u.css("background","url("+i.imgpath+"menuhoverbg.png) repeat-x 50% 50%")},mouseleave:function(){u.css("background","none")},click:function(t){l(n(this).data());t.preventDefault()}}).attr("href","#").data(r).appendTo(f),e=n("<img>").attr("src",i.imgpath+r.icon).attr("title",r.title).css({float:"left","margin-right":"5px",border:"1px solid #333"}).appendTo(u),o=n("<span>").css({float:"left","padding-top":"5px",color:"#AAA"}).text(r.title).appendTo(u)}),this.css("position","relative"),this.append(e),this.append(r),this}}(jQuery);
/*!
 * jQuery Cookie Plugin
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
(function(n){n.cookie=function(t,i,r){var h,f,e,o,u,s;if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(i))||i===null||i===undefined))return r=n.extend({},r),(i===null||i===undefined)&&(r.expires=-1),typeof r.expires=="number"&&(h=r.expires,f=r.expires=new Date,f.setDate(f.getDate()+h)),i=String(i),document.cookie=[encodeURIComponent(t),"=",r.raw?i:encodeURIComponent(i),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("");for(r=i||{},e=r.raw?function(n){return n}:decodeURIComponent,o=document.cookie.split("; "),u=0;s=o[u]&&o[u].split("=");u++)if(e(s[0])===t)return e(s[1]||"");return null}})(jQuery);oldBrowser=document.all&&!document.addEventListener;oldBrowser||function(n,t){function su(n){var t=st[n]={};return i.each(n.split(v),function(n,i){t[i]=!0}),t}function ri(n,r,u){if(u===t&&n.nodeType===1){var f="data-"+r.replace(ii,"-$1").toLowerCase();if(u=n.getAttribute(f),typeof u=="string"){try{u=u==="true"?!0:u==="false"?!1:u==="null"?null:+u+""===u?+u:ti.test(u)?i.parseJSON(u):u}catch(e){}i.data(n,r,u)}else u=t}return u}function ht(n){for(var t in n)if((t!=="data"||!i.isEmptyObject(n[t]))&&t!=="toJSON")return!1;return!0}function h(){return!1}function g(){return!0}function p(n){return!n||!n.parentNode||n.parentNode.nodeType===11}function li(n,t){do n=n[t];while(n&&n.nodeType!==1);return n}function ai(n,t,r){if(t=t||0,i.isFunction(t))return i.grep(n,function(n,i){var u=!!t.call(n,i,n);return u===r});if(t.nodeType)return i.grep(n,function(n){return n===t===r});if(typeof t=="string"){var u=i.grep(n,function(n){return n.nodeType===1});if(du.test(t))return i.filter(t,u,!r);t=i.filter(t,u)}return i.grep(n,function(n){return i.inArray(n,t)>=0===r})}function vi(n){var i=yi.split("|"),t=n.createDocumentFragment();if(t.createElement)while(i.length)t.createElement(i.pop());return t}function sf(n,t){return n.getElementsByTagName(t)[0]||n.appendChild(n.ownerDocument.createElement(t))}function gi(n,t){if(t.nodeType===1&&i.hasData(n)){var u,f,o,s=i._data(n),r=i._data(t,s),e=s.events;if(e){delete r.handle;r.events={};for(u in e)for(f=0,o=e[u].length;f<o;f++)i.event.add(t,u,e[u][f])}r.data&&(r.data=i.extend({},r.data))}}function nr(n,t){var r;t.nodeType===1&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(n),r=t.nodeName.toLowerCase(),r==="object"?(t.parentNode&&(t.outerHTML=n.outerHTML),i.support.html5Clone&&n.innerHTML&&!i.trim(t.innerHTML)&&(t.innerHTML=n.innerHTML)):r==="input"&&bi.test(n.type)?(t.defaultChecked=t.checked=n.checked,t.value!==n.value&&(t.value=n.value)):r==="option"?t.selected=n.defaultSelected:r==="input"||r==="textarea"?t.defaultValue=n.defaultValue:r==="script"&&t.text!==n.text&&(t.text=n.text),t.removeAttribute(i.expando))}function nt(n){return typeof n.getElementsByTagName!="undefined"?n.getElementsByTagName("*"):typeof n.querySelectorAll!="undefined"?n.querySelectorAll("*"):[]}function tr(n){bi.test(n.type)&&(n.defaultChecked=n.checked)}function fr(n,t){if(t in n)return t;for(var r=t.charAt(0).toUpperCase()+t.slice(1),u=t,i=ur.length;i--;)if(t=ur[i]+r,t in n)return t;return u}function it(n,t){return n=t||n,i.css(n,"display")==="none"||!i.contains(n.ownerDocument,n)}function er(n,t){for(var r,o,e=[],f=0,s=n.length;f<s;f++)(r=n[f],r.style)&&(e[f]=i._data(r,"olddisplay"),t?(e[f]||r.style.display!=="none"||(r.style.display=""),r.style.display===""&&it(r)&&(e[f]=i._data(r,"olddisplay",cr(r.nodeName)))):(o=u(r,"display"),e[f]||o==="none"||i._data(r,"olddisplay",o)));for(f=0;f<s;f++)(r=n[f],r.style)&&(t&&r.style.display!=="none"&&r.style.display!==""||(r.style.display=t?e[f]||"":"none"));return n}function or(n,t,i){var r=af.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function sr(n,t,r,f){for(var e=r===(f?"border":"content")?4:t==="width"?1:0,o=0;e<4;e+=2)r==="margin"&&(o+=i.css(n,r+s[e],!0)),f?(r==="content"&&(o-=parseFloat(u(n,"padding"+s[e]))||0),r!=="margin"&&(o-=parseFloat(u(n,"border"+s[e]+"Width"))||0)):(o+=parseFloat(u(n,"padding"+s[e]))||0,r!=="padding"&&(o+=parseFloat(u(n,"border"+s[e]+"Width"))||0));return o}function hr(n,t,r){var f=t==="width"?n.offsetWidth:n.offsetHeight,e=!0,o=i.support.boxSizing&&i.css(n,"boxSizing")==="border-box";if(f<=0||f==null){if(f=u(n,t),(f<0||f==null)&&(f=n.style[t]),tt.test(f))return f;e=o&&(i.support.boxSizingReliable||f===n.style[t]);f=parseFloat(f)||0}return f+sr(n,t,r||(o?"border":"content"),e)+"px"}function cr(n){if(yt[n])return yt[n];var f=i("<"+n+">").appendTo(r.body),t=f.css("display");return f.remove(),(t==="none"||t==="")&&(c=r.body.appendChild(c||i.extend(r.createElement("iframe"),{frameBorder:0,width:0,height:0})),l&&c.createElement||(l=(c.contentWindow||c.contentDocument).document,l.write("<!doctype html><html><body>"),l.close()),f=l.body.appendChild(l.createElement(n)),t=u(f,"display"),r.body.removeChild(c)),yt[n]=t,t}function pt(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||bf.test(n)?u(n,i):pt(n+"["+(typeof i=="object"?t:"")+"]",i,r,u)});else if(r||i.type(t)!=="object")u(n,t);else for(f in t)pt(n+"["+f+"]",t[f],r,u)}function ar(){return setTimeout(function(){a=t},0),a=i.now()}function ie(n,t){i.each(t,function(t,i){for(var u=(w[t]||[]).concat(w["*"]),r=0,f=u.length;r<f;r++)if(u[r].call(n,t,i))return})}function vr(n,t,r){var e,o=0,c=ut.length,f=i.Deferred().always(function(){delete h.elem}),h=function(){for(var o=a||ar(),t=Math.max(0,u.startTime+u.duration-o),s=t/u.duration||0,i=1-s,r=0,e=u.tweens.length;r<e;r++)u.tweens[r].run(i);return f.notifyWith(n,[u,i,t]),i<1&&e?t:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:a||ar(),duration:r.duration,tweens:[],createTween:function(t,r){var f=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(f),f},stop:function(t){for(var i=0,r=t?u.tweens.length:0;i<r;i++)u.tweens[i].run(1);return t?f.resolveWith(n,[u,t]):f.rejectWith(n,[u,t]),this}}),s=u.props;for(re(s,u.opts.specialEasing);o<c;o++)if(e=ut[o].call(u,n,s,u.opts),e)return e;return ie(u,s),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(h,{anim:u,queue:u.opts.queue,elem:n})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function re(n,t){var r,f,e,u,o;for(r in n)if(f=i.camelCase(r),e=t[f],u=n[r],i.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function ue(n,t,r){var o,u,a,v,s,y,l,f,b,h=this,e=n.style,p={},w=[],c=n.nodeType&&it(n);r.queue||(f=i._queueHooks(n,"fx"),f.unqueued==null&&(f.unqueued=0,b=f.empty.fire,f.empty.fire=function(){f.unqueued||b()}),f.unqueued++,h.always(function(){h.always(function(){f.unqueued--;i.queue(n,"fx").length||f.empty.fire()})}));n.nodeType===1&&("height"in t||"width"in t)&&(r.overflow=[e.overflow,e.overflowX,e.overflowY],i.css(n,"display")==="inline"&&i.css(n,"float")==="none"&&(i.support.inlineBlockNeedsLayout&&cr(n.nodeName)!=="inline"?e.zoom=1:e.display="inline-block"));r.overflow&&(e.overflow="hidden",i.support.shrinkWrapBlocks||h.done(function(){e.overflow=r.overflow[0];e.overflowX=r.overflow[1];e.overflowY=r.overflow[2]}));for(o in t)if(a=t[o],gf.exec(a)){if(delete t[o],y=y||a==="toggle",a===(c?"hide":"show"))continue;w.push(o)}if(v=w.length,v)for(s=i._data(n,"fxshow")||i._data(n,"fxshow",{}),("hidden"in s)&&(c=s.hidden),y&&(s.hidden=!c),c?i(n).show():h.done(function(){i(n).hide()}),h.done(function(){var t;i.removeData(n,"fxshow",!0);for(t in p)i.style(n,t,p[t])}),o=0;o<v;o++)u=w[o],l=h.createTween(u,c?s[u]:0),p[u]=s[u]||i.style(n,u),u in s||(s[u]=l.start,c&&(l.end=l.start,l.start=u==="width"||u==="height"?1:0))}function f(n,t,i,r,u){return new f.prototype.init(n,t,i,r,u)}function ft(n,t){var r,i={height:n},u=0;for(t=t?1:0;u<4;u+=2-t)r=s[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function yr(n){return i.isWindow(n)?n:n.nodeType===9?n.defaultView||n.parentWindow:!1}var bt,b,r=n.document,fe=n.location,pr=n.navigator,wr=n.JQXLite,br=n.$,kt=Array.prototype.push,o=Array.prototype.slice,dt=Array.prototype.indexOf,kr=Object.prototype.toString,et=Object.prototype.hasOwnProperty,ot=String.prototype.trim,i=function(n,t){return new i.fn.init(n,t,bt)},k=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,dr=/\S/,v=/\s+/,gr=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,nu=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,gt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,tu=/^[\],:{}\s]*$/,iu=/(?:^|:|,)(?:\s*\[)+/g,ru=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,uu=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,fu=/^-ms-/,eu=/-([\da-z])/gi,ou=function(n,t){return(t+"").toUpperCase()},d=function(){r.addEventListener?(r.removeEventListener("DOMContentLoaded",d,!1),i.ready()):r.readyState==="complete"&&(r.detachEvent("onreadystatechange",d),i.ready())},ni={},st,ti,ii,wt;i.fn=i.prototype={constructor:i,init:function(n,u,f){var e,o,s;if(!n)return this;if(n.nodeType)return this.context=this[0]=n,this.length=1,this;if(typeof n=="string"){if(e=n.charAt(0)==="<"&&n.charAt(n.length-1)===">"&&n.length>=3?[null,n,null]:nu.exec(n),e&&(e[1]||!u)){if(e[1])return u=u instanceof i?u[0]:u,s=u&&u.nodeType?u.ownerDocument||u:r,n=i.parseHTML(e[1],s,!0),gt.test(e[1])&&i.isPlainObject(u)&&this.attr.call(n,u,!0),i.merge(this,n);if(o=r.getElementById(e[2]),o&&o.parentNode){if(o.id!==e[2])return f.find(n);this.length=1;this[0]=o}return this.context=r,this.selector=n,this}return!u||u.jqx?(u||f).find(n):this.constructor(u).find(n)}return i.isFunction(n)?f.ready(n):(n.selector!==t&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))},selector:"",jqx:"4.5.0",length:0,size:function(){return this.length},toArray:function(){return o.call(this)},get:function(n){return n==null?this.toArray():n<0?this[this.length+n]:this[n]},pushStack:function(n,t,r){var u=i.merge(this.constructor(),n);return u.prevObject=this,u.context=this.context,t==="find"?u.selector=this.selector+(this.selector?" ":"")+r:t&&(u.selector=this.selector+"."+t+"("+r+")"),u},each:function(n,t){return i.each(this,n,t)},ready:function(n){return i.ready.promise().done(n),this},eq:function(n){return n=+n,n===-1?this.slice(n):this.slice(n,n+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(o.apply(this,arguments),"slice",o.call(arguments).join(","))},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:kt,sort:[].sort,splice:[].splice};i.fn.init.prototype=i.fn;i.extend=i.fn.extend=function(){var o,e,u,r,s,h,n=arguments[0]||{},f=1,l=arguments.length,c=!1;for(typeof n=="boolean"&&(c=n,n=arguments[1]||{},f=2),typeof n=="object"||i.isFunction(n)||(n={}),l===f&&(n=this,--f);f<l;f++)if((o=arguments[f])!=null)for(e in o)(u=n[e],r=o[e],n!==r)&&(c&&r&&(i.isPlainObject(r)||(s=i.isArray(r)))?(s?(s=!1,h=u&&i.isArray(u)?u:[]):h=u&&i.isPlainObject(u)?u:{},n[e]=i.extend(c,h,r)):r!==t&&(n[e]=r));return n};i.extend({noConflict:function(t){return n.$===i&&(n.$=br),t&&n.JQXLite===i&&(n.JQXLite=wr),i},isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){if(n===!0?!--i.readyWait:!i.isReady){if(!r.body)return setTimeout(i.ready,1);(i.isReady=!0,n!==!0&&--i.readyWait>0)||(b.resolveWith(r,[i]),i.fn.trigger&&i(r).trigger("ready").off("ready"))}},isFunction:function(n){return i.type(n)==="function"},isArray:Array.isArray||function(n){return i.type(n)==="array"},isWindow:function(n){return n!=null&&n==n.window},isNumeric:function(n){return!isNaN(parseFloat(n))&&isFinite(n)},type:function(n){return n==null?String(n):ni[kr.call(n)]||"object"},isPlainObject:function(n){if(!n||i.type(n)!=="object"||n.nodeType||i.isWindow(n))return!1;try{if(n.constructor&&!et.call(n,"constructor")&&!et.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(u){return!1}for(var r in n);return r===t||et.call(n,r)},isEmptyObject:function(n){for(var t in n)return!1;return!0},error:function(n){throw new Error(n);},parseHTML:function(n,t,u){var f;return!n||typeof n!="string"?null:(typeof t=="boolean"&&(u=t,t=0),t=t||r,f=gt.exec(n))?[t.createElement(f[1])]:(f=i.buildFragment([n],t,u?null:[]),i.merge([],(f.cacheable?i.clone(f.fragment):f.fragment).childNodes))},parseJSON:function(t){if(!t||typeof t!="string")return null;if(t=i.trim(t),n.JSON&&n.JSON.parse)return n.JSON.parse(t);if(tu.test(t.replace(ru,"@").replace(uu,"]").replace(iu,"")))return new Function("return "+t)();i.error("Invalid JSON: "+t)},parseXML:function(r){var u,f;if(!r||typeof r!="string")return null;try{n.DOMParser?(f=new DOMParser,u=f.parseFromString(r,"text/xml")):(u=new ActiveXObject("Microsoft.XMLDOM"),u.async="false",u.loadXML(r))}catch(e){u=t}return u&&u.documentElement&&!u.getElementsByTagName("parsererror").length||i.error("Invalid XML: "+r),u},noop:function(){},globalEval:function(t){t&&dr.test(t)&&(n.execScript||function(t){n.eval.call(n,t)})(t)},camelCase:function(n){return n.replace(fu,"ms-").replace(eu,ou)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,r,u){var f,e=0,o=n.length,s=o===t||i.isFunction(n);if(u){if(s){for(f in n)if(r.apply(n[f],u)===!1)break}else for(;e<o;)if(r.apply(n[e++],u)===!1)break}else if(s){for(f in n)if(r.call(n[f],f,n[f])===!1)break}else for(;e<o;)if(r.call(n[e],e,n[e++])===!1)break;return n},trim:ot&&!ot.call("")?function(n){return n==null?"":ot.call(n)}:function(n){return n==null?"":(n+"").replace(gr,"")},makeArray:function(n,t){var r,u=t||[];return n!=null&&(r=i.type(n),n.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(n)?kt.call(u,n):i.merge(u,n)),u},inArray:function(n,t,i){var r;if(t){if(dt)return dt.call(t,n,i);for(r=t.length,i=i?i<0?Math.max(0,r+i):i:0;i<r;i++)if(i in t&&t[i]===n)return i}return-1},merge:function(n,i){var f=i.length,u=n.length,r=0;if(typeof f=="number")for(;r<f;r++)n[u++]=i[r];else while(i[r]!==t)n[u++]=i[r++];return n.length=u,n},grep:function(n,t,i){var u,f=[],r=0,e=n.length;for(i=!!i;r<e;r++)u=!!t(n[r],r),i!==u&&f.push(n[r]);return f},map:function(n,r,u){var f,h,e=[],s=0,o=n.length,c=n instanceof i||o!==t&&typeof o=="number"&&(o>0&&n[0]&&n[o-1]||o===0||i.isArray(n));if(c)for(;s<o;s++)f=r(n[s],s,u),f!=null&&(e[e.length]=f);else for(h in n)f=r(n[h],h,u),f!=null&&(e[e.length]=f);return e.concat.apply([],e)},guid:1,proxy:function(n,r){var f,e,u;return(typeof r=="string"&&(f=n[r],r=n,n=f),!i.isFunction(n))?t:(e=o.call(arguments,2),u=function(){return n.apply(r,e.concat(o.call(arguments)))},u.guid=n.guid=n.guid||i.guid++,u)},access:function(n,r,u,f,e,o,s){var c,l=u==null,h=0,a=n.length;if(u&&typeof u=="object"){for(h in u)i.access(n,r,h,u[h],1,o,f);e=1}else if(f!==t){if(c=s===t&&i.isFunction(f),l&&(c?(c=r,r=function(n,t,r){return c.call(i(n),r)}):(r.call(n,f),r=null)),r)for(;h<a;h++)r(n[h],u,c?f.call(n[h],h,r(n[h],u)):f,s);e=1}return e?n:l?r.call(n):a?r(n[0],u):o},now:function(){return(new Date).getTime()}});i.ready.promise=function(t){if(!b)if(b=i.Deferred(),r.readyState==="complete")setTimeout(i.ready,1);else if(r.addEventListener)r.addEventListener("DOMContentLoaded",d,!1),n.addEventListener("load",i.ready,!1);else{r.attachEvent("onreadystatechange",d);n.attachEvent("onload",i.ready);var u=!1;try{u=n.frameElement==null&&r.documentElement}catch(e){}u&&u.doScroll&&function f(){if(!i.isReady){try{u.doScroll("left")}catch(n){return setTimeout(f,50)}i.ready()}}()}return b.promise(t)};i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(n,t){ni["[object "+t+"]"]=t.toLowerCase()});bt=i(r);st={};i.Callbacks=function(n){n=typeof n=="string"?st[n]||su(n):i.extend({},n);var f,c,o,l,s,e,r=[],u=!n.once&&[],a=function(t){for(f=n.memory&&t,c=!0,e=l||0,l=0,s=r.length,o=!0;r&&e<s;e++)if(r[e].apply(t[0],t[1])===!1&&n.stopOnFalse){f=!1;break}o=!1;r&&(u?u.length&&a(u.shift()):f?r=[]:h.disable())},h={add:function(){if(r){var t=r.length;(function u(t){i.each(t,function(t,f){var e=i.type(f);e==="function"?n.unique&&h.has(f)||r.push(f):f&&f.length&&e!=="string"&&u(f)})})(arguments);o?s=r.length:f&&(l=t,a(f))}return this},remove:function(){return r&&i.each(arguments,function(n,t){for(var u;(u=i.inArray(t,r,u))>-1;)r.splice(u,1),o&&(u<=s&&s--,u<=e&&e--)}),this},has:function(n){return i.inArray(n,r)>-1},empty:function(){return r=[],this},disable:function(){return r=u=f=t,this},disabled:function(){return!r},lock:function(){return u=t,f||h.disable(),this},locked:function(){return!u},fireWith:function(n,t){return t=t||[],t=[n,t.slice?t.slice():t],r&&(!c||u)&&(o?u.push(t):a(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!c}};return h};i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(r){i.each(u,function(u,f){var e=f[0],o=n[u];t[f[1]](i.isFunction(o)?function(){var n=o.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().done(r.resolve).fail(r.reject).progress(r.notify):r[e+"With"](this===t?r:this,[n])}:r[e])});n=null}).promise()},promise:function(n){return n!=null?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add;o&&e.add(function(){f=o},u[n^1][2].disable,u[2][2].lock);t[i[0]]=e.fire;t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var t=0,u=o.call(arguments),r=u.length,e=r!==1||n&&i.isFunction(n.promise)?r:0,f=e===1?n:i.Deferred(),c=function(n,t,i){return function(r){t[n]=this;i[n]=arguments.length>1?o.call(arguments):r;i===s?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},s,l,h;if(r>1)for(s=new Array(r),l=new Array(r),h=new Array(r);t<r;t++)u[t]&&i.isFunction(u[t].promise)?u[t].promise().done(c(t,h,u)).fail(f.reject).progress(c(t,l,s)):--e;return e||f.resolveWith(h,u),f.promise()}});i.support=function(){var u,h,e,c,l,f,o,a,v,s,y,t=r.createElement("div");if(t.setAttribute("className","t"),t.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>",h=t.getElementsByTagName("*"),e=t.getElementsByTagName("a")[0],!h||!e||!h.length)return{};c=r.createElement("select");l=c.appendChild(r.createElement("option"));f=t.getElementsByTagName("input")[0];e.style.cssText="top:1px;float:left;opacity:.5";u={leadingWhitespace:t.firstChild.nodeType===3,tbody:!t.getElementsByTagName("tbody").length,htmlSerialize:!!t.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.5/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:f.value==="on",optSelected:l.selected,getSetAttribute:t.className!=="t",enctype:!!r.createElement("form").enctype,html5Clone:r.createElement("nav").cloneNode(!0).outerHTML!=="<:nav><\/:nav>",boxModel:r.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};f.checked=!0;u.noCloneChecked=f.cloneNode(!0).checked;c.disabled=!0;u.optDisabled=!l.disabled;try{delete t.test}catch(p){u.deleteExpando=!1}if(!t.addEventListener&&t.attachEvent&&t.fireEvent&&(t.attachEvent("onclick",y=function(){u.noCloneEvent=!1}),t.cloneNode(!0).fireEvent("onclick"),t.detachEvent("onclick",y)),f=r.createElement("input"),f.value="t",f.setAttribute("type","radio"),u.radioValue=f.value==="t",f.setAttribute("checked","checked"),f.setAttribute("name","t"),t.appendChild(f),o=r.createDocumentFragment(),o.appendChild(t.lastChild),u.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,u.appendChecked=f.checked,o.removeChild(f),o.appendChild(t),t.attachEvent)for(v in{submit:!0,change:!0,focusin:!0})a="on"+v,s=a in t,s||(t.setAttribute(a,"return;"),s=typeof t[a]=="function"),u[v+"Bubbles"]=s;return i(function(){var i,t,f,e,h="padding:0;margin:0;border:0;display:block;overflow:hidden;",o=r.getElementsByTagName("body")[0];o&&(i=r.createElement("div"),i.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",o.insertBefore(i,o.firstChild),t=r.createElement("div"),i.appendChild(t),t.innerHTML="<table><tr><td><\/td><td>t<\/td><\/tr><\/table>",f=t.getElementsByTagName("td"),f[0].style.cssText="padding:0;margin:0;border:0;display:none",s=f[0].offsetHeight===0,f[0].style.display="",f[1].style.display="none",u.reliableHiddenOffsets=s&&f[0].offsetHeight===0,t.innerHTML="",t.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",u.boxSizing=t.offsetWidth===4,u.doesNotIncludeMarginInBodyOffset=o.offsetTop!==1,n.getComputedStyle&&(u.pixelPosition=(n.getComputedStyle(t,null)||{}).top!=="1%",u.boxSizingReliable=(n.getComputedStyle(t,null)||{width:"4px"}).width==="4px",e=r.createElement("div"),e.style.cssText=t.style.cssText=h,e.style.marginRight=e.style.width="0",t.style.width="1px",t.appendChild(e),u.reliableMarginRight=!parseFloat((n.getComputedStyle(e,null)||{}).marginRight)),typeof t.style.zoom!="undefined"&&(t.innerHTML="",t.style.cssText=h+"width:1px;padding:1px;display:inline;zoom:1",u.inlineBlockNeedsLayout=t.offsetWidth===3,t.style.display="block",t.style.overflow="visible",t.innerHTML="<div><\/div>",t.firstChild.style.width="5px",u.shrinkWrapBlocks=t.offsetWidth!==3,i.style.zoom=1),o.removeChild(i),i=t=f=e=null)}),o.removeChild(t),h=e=c=l=f=o=t=null,u}();ti=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/;ii=/([A-Z])/g;i.extend({cache:{},deletedIds:[],uuid:0,expando:"JQXLite"+(i.fn.jqx+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(n){return n=n.nodeType?i.cache[n[i.expando]]:n[i.expando],!!n&&!ht(n)},data:function(n,r,u,f){if(i.acceptData(n)){var s,h,c=i.expando,a=typeof r=="string",l=n.nodeType,o=l?i.cache:n,e=l?n[c]:n[c]&&c;if(e&&o[e]&&(f||o[e].data)||!a||u!==t)return e||(l?n[c]=e=i.deletedIds.pop()||i.guid++:e=c),o[e]||(o[e]={},l||(o[e].toJSON=i.noop)),(typeof r=="object"||typeof r=="function")&&(f?o[e]=i.extend(o[e],r):o[e].data=i.extend(o[e].data,r)),s=o[e],f||(s.data||(s.data={}),s=s.data),u!==t&&(s[i.camelCase(r)]=u),a?(h=s[r],h==null&&(h=s[i.camelCase(r)])):h=s,h}},removeData:function(n,t,r){if(i.acceptData(n)){var e,o,h,s=n.nodeType,u=s?i.cache:n,f=s?n[i.expando]:i.expando;if(u[f]){if(t&&(e=r?u[f]:u[f].data,e)){for(i.isArray(t)||(t in e?t=[t]:(t=i.camelCase(t),t=t in e?[t]:t.split(" "))),o=0,h=t.length;o<h;o++)delete e[t[o]];if(!(r?ht:i.isEmptyObject)(e))return}(r||(delete u[f].data,ht(u[f])))&&(s?i.cleanData([n],!0):i.support.deleteExpando||u!=u.window?delete u[f]:u[f]=null)}}},_data:function(n,t,r){return i.data(n,t,r,!0)},acceptData:function(n){var t=n.nodeName&&i.noData[n.nodeName.toLowerCase()];return!t||t!==!0&&n.getAttribute("classid")===t}});i.fn.extend({data:function(n,r){var u,s,h,o,l,e=this[0],c=0,f=null;if(n===t){if(this.length&&(f=i.data(e),e.nodeType===1&&!i._data(e,"parsedAttrs"))){for(h=e.attributes,l=h.length;c<l;c++)o=h[c].name,o.indexOf("data-")||(o=i.camelCase(o.substring(5)),ri(e,o,f[o]));i._data(e,"parsedAttrs",!0)}return f}return typeof n=="object"?this.each(function(){i.data(this,n)}):(u=n.split(".",2),u[1]=u[1]?"."+u[1]:"",s=u[1]+"!",i.access(this,function(r){if(r===t)return f=this.triggerHandler("getData"+s,[u[0]]),f===t&&e&&(f=i.data(e,n),f=ri(e,n,f)),f===t&&u[1]?this.data(u[0]):f;u[1]=r;this.each(function(){var t=i(this);t.triggerHandler("setData"+s,u);i.data(this,n,r);t.triggerHandler("changeData"+s,u)})},null,r,arguments.length>1,null,!1))},removeData:function(n){return this.each(function(){i.removeData(this,n)})}});i.extend({queue:function(n,t,r){var u;if(n)return t=(t||"fx")+"queue",u=i._data(n,t),r&&(!u||i.isArray(r)?u=i._data(n,t,i.makeArray(r)):u.push(r)),u||[]},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};u==="inprogress"&&(u=r.shift(),e--);u&&(t==="fx"&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f));!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var r=t+"queueHooks";return i._data(n,r)||i._data(n,r,{empty:i.Callbacks("once memory").add(function(){i.removeData(n,t+"queue",!0);i.removeData(n,r,!0)})})}});i.fn.extend({queue:function(n,r){var u=2;return(typeof n!="string"&&(r=n,n="fx",u--),arguments.length<u)?i.queue(this[0],n):r===t?this:this.each(function(){var t=i.queue(this,n,r);i._queueHooks(this,n);n==="fx"&&t[0]!=="inprogress"&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},delay:function(n,t){return n=i.fx?i.fx.speeds[n]||n:n,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,n);i.stop=function(){clearTimeout(r)}})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,r){var u,e=1,o=i.Deferred(),f=this,s=this.length,h=function(){--e||o.resolveWith(f,[f])};for(typeof n!="string"&&(r=n,n=t),n=n||"fx";s--;)u=i._data(f[s],n+"queueHooks"),u&&u.empty&&(e++,u.empty.add(h));return h(),o.promise(r)}});var y,ui,fi=/[\t\r\n]/g,hu=/\r/g,cu=/^(?:button|input)$/i,lu=/^(?:button|input|object|select|textarea)$/i,au=/^a(?:rea|)$/i,ei=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,vu=i.support.getSetAttribute;i.fn.extend({attr:function(n,t){return i.access(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})},prop:function(n,t){return i.access(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return n=i.propFix[n]||n,this.each(function(){try{this[n]=t;delete this[n]}catch(i){}})},addClass:function(n){var r,f,o,t,e,u,s;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,this.className))});if(n&&typeof n=="string")for(r=n.split(v),f=0,o=this.length;f<o;f++)if(t=this[f],t.nodeType===1)if(t.className||r.length!==1){for(e=" "+t.className+" ",u=0,s=r.length;u<s;u++)e.indexOf(" "+r[u]+" ")<0&&(e+=r[u]+" ");t.className=i.trim(e)}else t.className=n;return this},removeClass:function(n){var e,r,u,f,s,o,h;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,this.className))});if(n&&typeof n=="string"||n===t)for(e=(n||"").split(v),o=0,h=this.length;o<h;o++)if(u=this[o],u.nodeType===1&&u.className){for(r=(" "+u.className+" ").replace(fi," "),f=0,s=e.length;f<s;f++)while(r.indexOf(" "+e[f]+" ")>=0)r=r.replace(" "+e[f]+" "," ");u.className=n?i.trim(r):""}return this},toggleClass:function(n,t){var r=typeof n,u=typeof t=="boolean";return i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,this.className,t),t)}):this.each(function(){if(r==="string")for(var f,s=0,o=i(this),e=t,h=n.split(v);f=h[s++];)e=u?e:!o.hasClass(f),o[e?"addClass":"removeClass"](f);else(r==="undefined"||r==="boolean")&&(this.className&&i._data(this,"__className__",this.className),this.className=this.className||n===!1?"":i._data(this,"__className__")||"")})},hasClass:function(n){for(var i=" "+n+" ",t=0,r=this.length;t<r;t++)if(this[t].nodeType===1&&(" "+this[t].className+" ").replace(fi," ").indexOf(i)>=0)return!0;return!1},val:function(n){var r,u,e,f=this[0];return arguments.length?(e=i.isFunction(n),this.each(function(u){var f,o=i(this);this.nodeType===1&&(f=e?n.call(this,u,o.val()):n,f==null?f="":typeof f=="number"?f+="":i.isArray(f)&&(f=i.map(f,function(n){return n==null?"":n+""})),r=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,f,"value")!==t||(this.value=f))})):f?(r=i.valHooks[f.type]||i.valHooks[f.nodeName.toLowerCase()],r&&"get"in r&&(u=r.get(f,"value"))!==t)?u:(u=f.value,typeof u=="string"?u.replace(hu,""):u==null?"":u):void 0}});i.extend({valHooks:{option:{get:function(n){var t=n.attributes.value;return!t||t.specified?n.value:n.text}},select:{get:function(n){for(var e,t,o=n.options,r=n.selectedIndex,u=n.type==="select-one"||r<0,s=u?null:[],h=u?r+1:o.length,f=r<0?h:u?r:0;f<h;f++)if(t=o[f],(t.selected||f===r)&&(i.support.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!i.nodeName(t.parentNode,"optgroup"))){if(e=i(t).val(),u)return e;s.push(e)}return s},set:function(n,t){var r=i.makeArray(t);return i(n).find("option").each(function(){this.selected=i.inArray(i(this).val(),r)>=0}),r.length||(n.selectedIndex=-1),r}}},attrFn:{},attr:function(n,r,u,f){var e,o,s,h=n.nodeType;if(n&&h!==3&&h!==8&&h!==2){if(f&&i.isFunction(i.fn[r]))return i(n)[r](u);if(typeof n.getAttribute=="undefined")return i.prop(n,r,u);if(s=h!==1||!i.isXMLDoc(n),s&&(r=r.toLowerCase(),o=i.attrHooks[r]||(ei.test(r)?ui:y)),u!==t){if(u===null){i.removeAttr(n,r);return}return o&&"set"in o&&s&&(e=o.set(n,u,r))!==t?e:(n.setAttribute(r,u+""),u)}return o&&"get"in o&&s&&(e=o.get(n,r))!==null?e:(e=n.getAttribute(r),e===null?t:e)}},removeAttr:function(n,t){var u,f,r,e,o=0;if(t&&n.nodeType===1)for(f=t.split(v);o<f.length;o++)r=f[o],r&&(u=i.propFix[r]||r,e=ei.test(r),e||i.attr(n,r,""),n.removeAttribute(vu?r:u),e&&u in n&&(n[u]=!1))},attrHooks:{type:{set:function(n,t){if(cu.test(n.nodeName)&&n.parentNode)i.error("type property can't be changed");else if(!i.support.radioValue&&t==="radio"&&i.nodeName(n,"input")){var r=n.value;return n.setAttribute("type",t),r&&(n.value=r),t}}},value:{get:function(n,t){return y&&i.nodeName(n,"button")?y.get(n,t):t in n?n.value:null},set:function(n,t,r){if(y&&i.nodeName(n,"button"))return y.set(n,t,r);n.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(n,r,u){var e,f,s,o=n.nodeType;if(n&&o!==3&&o!==8&&o!==2)return s=o!==1||!i.isXMLDoc(n),s&&(r=i.propFix[r]||r,f=i.propHooks[r]),u!==t?f&&"set"in f&&(e=f.set(n,u,r))!==t?e:n[r]=u:f&&"get"in f&&(e=f.get(n,r))!==null?e:n[r]},propHooks:{tabIndex:{get:function(n){var i=n.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):lu.test(n.nodeName)||au.test(n.nodeName)&&n.href?0:t}}}});ui={get:function(n,r){var u,f=i.prop(n,r);return f===!0||typeof f!="boolean"&&(u=n.getAttributeNode(r))&&u.nodeValue!==!1?r.toLowerCase():t},set:function(n,t,r){var u;return t===!1?i.removeAttr(n,r):(u=i.propFix[r]||r,u in n&&(n[u]=!0),n.setAttribute(r,r.toLowerCase())),r}};i.support.enctype||(i.propFix.enctype="encoding");var oi=/^([^\.]*|)(?:\.(.+)|)$/,yu=/(?:^|\s)hover(\.\S+|)\b/,pu=/^key/,wu=/^(?:mouse|contextmenu)|click/,si=/^(?:focusinfocus|focusoutblur)$/,hi=function(n){return i.event.special.hover?n:n.replace(yu,"mouseenter$1 mouseleave$1")};i.event={add:function(n,r,u,f,e){var a,s,v,y,p,o,b,l,w,c,h;if(n.nodeType!==3&&n.nodeType!==8&&r&&u&&(a=i._data(n))){for(u.handler&&(w=u,u=w.handler,e=w.selector),u.guid||(u.guid=i.guid++),v=a.events,v||(a.events=v={}),s=a.handle,s||(a.handle=s=function(n){return typeof i!="undefined"&&(!n||i.event.triggered!==n.type)?i.event.dispatch.apply(s.elem,arguments):t},s.elem=n),r=i.trim(hi(r)).split(" "),y=0;y<r.length;y++)p=oi.exec(r[y])||[],o=p[1],b=(p[2]||"").split(".").sort(),h=i.event.special[o]||{},o=(e?h.delegateType:h.bindType)||o,h=i.event.special[o]||{},l=i.extend({type:o,origType:p[1],data:f,handler:u,guid:u.guid,selector:e,needsContext:e&&i.expr.match.needsContext.test(e),namespace:b.join(".")},w),c=v[o],c||(c=v[o]=[],c.delegateCount=0,h.setup&&h.setup.call(n,f,b,s)!==!1||(n.addEventListener?n.addEventListener(o,s,!1):n.attachEvent&&n.attachEvent("on"+o,s))),h.add&&(h.add.call(n,l),l.handler.guid||(l.handler.guid=u.guid)),e?c.splice(c.delegateCount++,0,l):c.push(l),i.event.global[o]=!0;n=null}},global:{},remove:function(n,t,r,u,f){var l,p,e,w,h,b,a,v,c,o,s,y=i.hasData(n)&&i._data(n);if(y&&(v=y.events)){for(t=i.trim(hi(t||"")).split(" "),l=0;l<t.length;l++){if(p=oi.exec(t[l])||[],e=w=p[1],h=p[2],!e){for(e in v)i.event.remove(n,e+t[l],r,u,!0);continue}for(c=i.event.special[e]||{},e=(u?c.delegateType:c.bindType)||e,o=v[e]||[],b=o.length,h=h?new RegExp("(^|\\.)"+h.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a=0;a<o.length;a++)s=o[a],(f||w===s.origType)&&(!r||r.guid===s.guid)&&(!h||h.test(s.namespace))&&(!u||u===s.selector||u==="**"&&s.selector)&&(o.splice(a--,1),s.selector&&o.delegateCount--,c.remove&&c.remove.call(n,s));o.length===0&&b!==o.length&&(c.teardown&&c.teardown.call(n,h,y.handle)!==!1||i.removeEvent(n,e,y.handle),delete v[e])}i.isEmptyObject(v)&&(delete y.handle,i.removeData(n,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(u,f,e,o){if(!e||e.nodeType!==3&&e.nodeType!==8){var w,d,c,h,l,v,a,y,p,k,s=u.type||u,b=[];if(!si.test(s+i.event.triggered)&&(s.indexOf("!")>=0&&(s=s.slice(0,-1),d=!0),s.indexOf(".")>=0&&(b=s.split("."),s=b.shift(),b.sort()),e&&!i.event.customEvent[s]||i.event.global[s])){if(u=typeof u=="object"?u[i.expando]?u:new i.Event(s,u):new i.Event(s),u.type=s,u.isTrigger=!0,u.exclusive=d,u.namespace=b.join("."),u.namespace_re=u.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,v=s.indexOf(":")<0?"on"+s:"",!e){w=i.cache;for(c in w)w[c].events&&w[c].events[s]&&i.event.trigger(u,f,w[c].handle.elem,!0);return}if(u.result=t,u.target||(u.target=e),f=f!=null?i.makeArray(f):[],f.unshift(u),a=i.event.special[s]||{},!a.trigger||a.trigger.apply(e,f)!==!1){if(p=[[e,a.bindType||s]],!o&&!a.noBubble&&!i.isWindow(e)){for(k=a.delegateType||s,h=si.test(k+s)?e:e.parentNode,l=e;h;h=h.parentNode)p.push([h,k]),l=h;l===(e.ownerDocument||r)&&p.push([l.defaultView||l.parentWindow||n,k])}for(c=0;c<p.length&&!u.isPropagationStopped();c++)h=p[c][0],u.type=p[c][1],y=(i._data(h,"events")||{})[u.type]&&i._data(h,"handle"),y&&y.apply(h,f),y=v&&h[v],y&&i.acceptData(h)&&y.apply&&y.apply(h,f)===!1&&u.preventDefault();return u.type=s,o||u.isDefaultPrevented()||a._default&&a._default.apply(e.ownerDocument,f)!==!1||s==="click"&&i.nodeName(e,"a")||!i.acceptData(e)||v&&e[s]&&(s!=="focus"&&s!=="blur"||u.target.offsetWidth!==0)&&!i.isWindow(e)&&(l=e[v],l&&(e[v]=null),i.event.triggered=s,e[s](),i.event.triggered=t,l&&(e[v]=l)),u.result}}}},dispatch:function(r){r=i.event.fix(r||n.event);var f,c,e,l,a,h,v,u,s,y=(i._data(this,"events")||{})[r.type]||[],p=y.delegateCount,k=o.call(arguments),d=!r.exclusive&&!r.namespace,w=i.event.special[r.type]||{},b=[];if(k[0]=r,r.delegateTarget=this,!w.preDispatch||w.preDispatch.call(this,r)!==!1){if(p&&!(r.button&&r.type==="click"))for(e=r.target;e!=this;e=e.parentNode||this)if(e.disabled!==!0||r.type!=="click"){for(a={},v=[],f=0;f<p;f++)u=y[f],s=u.selector,a[s]===t&&(a[s]=u.needsContext?i(s,this).index(e)>=0:i.find(s,this,null,[e]).length),a[s]&&v.push(u);v.length&&b.push({elem:e,matches:v})}for(y.length>p&&b.push({elem:this,matches:y.slice(p)}),f=0;f<b.length&&!r.isPropagationStopped();f++)for(h=b[f],r.currentTarget=h.elem,c=0;c<h.matches.length&&!r.isImmediatePropagationStopped();c++)u=h.matches[c],(d||!r.namespace&&!u.namespace||r.namespace_re&&r.namespace_re.test(u.namespace))&&(r.data=u.data,r.handleObj=u,l=((i.event.special[u.origType]||{}).handle||u.handler).apply(h.elem,k),l!==t&&(r.result=l,l===!1&&(r.preventDefault(),r.stopPropagation())));return w.postDispatch&&w.postDispatch.call(this,r),r.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return n.which==null&&(n.which=t.charCode!=null?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,i){var o,u,f,e=i.button,s=i.fromElement;return n.pageX==null&&i.clientX!=null&&(o=n.target.ownerDocument||r,u=o.documentElement,f=o.body,n.pageX=i.clientX+(u&&u.scrollLeft||f&&f.scrollLeft||0)-(u&&u.clientLeft||f&&f.clientLeft||0),n.pageY=i.clientY+(u&&u.scrollTop||f&&f.scrollTop||0)-(u&&u.clientTop||f&&f.clientTop||0)),!n.relatedTarget&&s&&(n.relatedTarget=s===n.target?i.toElement:s),n.which||e===t||(n.which=e&1?1:e&2?3:e&4?2:0),n}},fix:function(n){if(n[i.expando])return n;var f,e,t=n,u=i.event.fixHooks[n.type]||{},o=u.props?this.props.concat(u.props):this.props;for(n=i.Event(t),f=o.length;f;)e=o[--f],n[e]=t[e];return n.target||(n.target=t.srcElement||r),n.target.nodeType===3&&(n.target=n.target.parentNode),n.metaKey=!!n.metaKey,u.filter?u.filter(n,t):n},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(n,t,r){i.isWindow(this)&&(this.onbeforeunload=r)},teardown:function(n,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(n,t,r,u){var f=i.extend(new i.Event,r,{type:n,isSimulated:!0,originalEvent:{}});u?i.event.trigger(f,null,t):i.event.dispatch.call(t,f);f.isDefaultPrevented()&&r.preventDefault()}};i.event.handle=i.event.dispatch;i.removeEvent=r.removeEventListener?function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)}:function(n,t,i){var r="on"+t;n.detachEvent&&(typeof n[r]=="undefined"&&(n[r]=null),n.detachEvent(r,i))};i.Event=function(n,t){if(!(this instanceof i.Event))return new i.Event(n,t);n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.returnValue===!1||n.getPreventDefault&&n.getPreventDefault()?g:h):this.type=n;t&&i.extend(this,t);this.timeStamp=n&&n.timeStamp||i.now();this[i.expando]=!0};i.Event.prototype={preventDefault:function(){this.isDefaultPrevented=g;var n=this.originalEvent;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=g;var n=this.originalEvent;n&&(n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g;this.stopPropagation()},isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h};i.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var f,e=this,r=n.relatedTarget,u=n.handleObj,o=u.selector;return r&&(r===e||i.contains(e,r))||(n.type=u.origType,f=u.handler.apply(this,arguments),n.type=t),f}}});i.fn.extend({on:function(n,r,u,f,e){var o,s;if(typeof n=="object"){typeof r!="string"&&(u=u||r,r=t);for(s in n)this.on(s,r,u,n[s],e);return this}if(u==null&&f==null?(f=r,u=r=t):f==null&&(typeof r=="string"?(f=u,u=t):(f=u,u=r,r=t)),f===!1)f=h;else if(!f)return this;return e===1&&(o=f,f=function(n){return i().off(n),o.apply(this,arguments)},f.guid=o.guid||(o.guid=i.guid++)),this.each(function(){i.event.add(this,n,f,u,r)})},off:function(n,r,u){var f,e;if(n&&n.preventDefault&&n.handleObj)return f=n.handleObj,i(n.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if(typeof n=="object"){for(e in n)this.off(e,r,n[e]);return this}return(r===!1||typeof r=="function")&&(u=r,r=t),u===!1&&(u=h),this.each(function(){i.event.remove(this,n,u,r)})},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return arguments.length===1?this.off(n,"**"):this.off(t,n||"**",i)},trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){if(this[0])return i.event.trigger(n,t,this[0],!0)},toggle:function(n){var t=arguments,u=n.guid||i.guid++,r=0,f=function(u){var f=(i._data(this,"lastToggle"+n.guid)||0)%r;return i._data(this,"lastToggle"+n.guid,f+1),u.preventDefault(),t[f].apply(this,arguments)||!1};for(f.guid=u;r<t.length;)t[r++].guid=u;return this.click(f)},hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)}});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return i==null&&(i=n,n=null),arguments.length>0?this.on(t,null,n,i):this.trigger(t)};pu.test(t)&&(i.event.fixHooks[t]=i.event.keyHooks);wu.test(t)&&(i.event.fixHooks[t]=i.event.mouseHooks)});
/*!
         * Sizzle CSS Selector Engine
         * Copyright 2012 JQXLite Foundation and other contributors
         * Released under the MIT license
         * http://sizzlejs.com/
         */
(function(n,t){function r(n,t,i,r){i=i||[];t=t||h;var e,u,o,f,s=t.nodeType;if(!n||typeof n!="string")return i;if(s!==1&&s!==9)return[];if(o=g(t),!o&&!r&&(e=wi.exec(n)))if(f=e[1]){if(s===9)if(u=t.getElementById(f),u&&u.parentNode){if(u.id===f)return i.push(u),i}else return i;else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&gt(t,u)&&u.id===f)return i.push(u),i}else{if(e[2])return p.apply(i,w.call(t.getElementsByTagName(n),0)),i;if((f=e[3])&&oi&&t.getElementsByClassName)return p.apply(i,w.call(t.getElementsByClassName(f),0)),i}return dt(n.replace(it,"$1"),t,i,r,o)}function k(n){return function(t){var i=t.nodeName.toLowerCase();return i==="input"&&t.type===n}}function si(n){return function(t){var i=t.nodeName.toLowerCase();return(i==="input"||i==="button")&&t.type===n}}function y(n){return s(function(t){return t=+t,s(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ut(n,t,i){if(n===t)return i;for(var r=n.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}function ft(n,t){var o,f,h,s,i,c,l,a=ri[e][n+" "];if(a)return t?0:a.slice(0);for(i=n,c=[],l=u.preFilter;i;){(!o||(f=vi.exec(i)))&&(f&&(i=i.slice(f[0].length)||i),c.push(h=[]));o=!1;(f=yi.exec(i))&&(h.push(o=new ti(f.shift())),i=i.slice(o.length),o.type=f[0].replace(it," "));for(s in u.filter)(f=rt[s].exec(i))&&(!l[s]||(f=l[s](f)))&&(h.push(o=new ti(f.shift())),i=i.slice(o.length),o.type=s,o.matches=f);if(!o)break}return t?i.length:i?r.error(n):ri(n,c).slice(0)}function pt(n,t,i){var r=t.dir,u=i&&t.dir==="parentNode",f=ci++;return t.first?function(t,i,f){while(t=t[r])if(u||t.nodeType===1)return n(t,i,f)}:function(t,i,o){if(o){while(t=t[r])if((u||t.nodeType===1)&&n(t,i,o))return t}else for(var s,h=tt+" "+f+" ",c=h+ot;t=t[r];)if(u||t.nodeType===1){if((s=t[e])===c)return t.sizset;if(typeof s=="string"&&s.indexOf(h)===0){if(t.sizset)return t}else{if(t[e]=c,n(t,i,o))return t.sizset=!0,t;t.sizset=!1}}}}function wt(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function et(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=t!=null;f<s;f++)(e=n[f])&&(!i||i(e,r,u))&&(o.push(e),h&&t.push(f));return o}function bt(n,t,i,r,u,f){return r&&!r[e]&&(r=bt(r)),u&&!u[e]&&(u=bt(u,f)),s(function(f,e,o,s){var l,c,a,w=[],y=[],b=e.length,k=f||rr(t||"*",o.nodeType?[o]:o,[]),v=n&&(f||!t)?et(k,w,n,o,s):k,h=i?u||(f?n:b||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=et(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?lt.call(f,a):w[c])>-1&&(f[l]=!(e[l]=a))}}else h=et(h===e?h.splice(b,h.length):h),u?u(null,e,h,s):p.apply(e,h)})}function kt(n){for(var s,r,i,o=n.length,h=u.relative[n[0].type],c=h||u.relative[" "],t=h?1:0,l=pt(function(n){return n===s},c,!0),a=pt(function(n){return lt.call(s,n)>-1},c,!0),f=[function(n,t,i){return!h&&(i||t!==nt)||((s=t).nodeType?l(n,t,i):a(n,t,i))}];t<o;t++)if(r=u.relative[n[t].type])f=[pt(wt(f),r)];else{if(r=u.filter[n[t].type].apply(null,n[t].matches),r[e]){for(i=++t;i<o;i++)if(u.relative[n[i].type])break;return bt(t>1&&wt(f),t>1&&n.slice(0,t-1).join("").replace(it,"$1"),r,t<i&&kt(n.slice(t,i)),i<o&&kt(n=n.slice(i)),i<o&&n.join(""))}f.push(r)}return wt(f)}function ir(n,t){var f=t.length>0,e=n.length>0,i=function(o,s,c,l,a){var y,b,k,w=[],d=0,v="0",g=o&&[],it=a!=null,rt=nt,ft=o||e&&u.find.TAG("*",a&&s.parentNode||s),ut=tt+=rt==null?1:Math.E;for(it&&(nt=s!==h&&s,ot=i.el);(y=ft[v])!=null;v++){if(e&&y){for(b=0;k=n[b];b++)if(k(y,s,c)){l.push(y);break}it&&(tt=ut,ot=++i.el)}f&&((y=!k&&y)&&d--,o&&g.push(y))}if(d+=v,f&&v!==d){for(b=0;k=t[b];b++)k(g,w,s,c);if(o){if(d>0)while(v--)g[v]||w[v]||(w[v]=li.call(l));w=et(w)}p.apply(l,w);it&&!o&&w.length>0&&d+t.length>1&&r.uniqueSort(l)}return it&&(tt=ut,nt=rt),g};return i.el=0,f?s(i):i}function rr(n,t,i){for(var u=0,f=t.length;u<f;u++)r(n,t[u],i);return i}function dt(n,t,i,r,f){var o,e,s,c,l,h=ft(n),a=h.length;if(!r&&h.length===1){if(e=h[0]=h[0].slice(0),e.length>2&&(s=e[0]).type==="ID"&&t.nodeType===9&&!f&&u.relative[e[1].type]){if(t=u.find.ID(s.matches[0].replace(v,""),t,f)[0],!t)return i;n=n.slice(e.shift().length)}for(o=rt.POS.test(n)?-1:e.length-1;o>=0;o--){if(s=e[o],u.relative[c=s.type])break;if((l=u.find[c])&&(r=l(s.matches[0].replace(v,""),yt.test(e[0].type)&&t.parentNode||t,f))){if(e.splice(o,1),n=r.length&&e.join(""),!n)return p.apply(i,w.call(r,0)),i;break}}}return ht(n,h)(r,t,f,i,yt.test(n)),i}function hi(){}var ot,st,u,d,g,gt,ht,ct,b,nt,ni=!0,c="undefined",e=("sizcache"+Math.random()).replace(".",""),ti=String,h=n.document,o=h.documentElement,tt=0,ci=0,li=[].pop,p=[].push,w=[].slice,lt=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(this[t]===n)return t;return-1},s=function(n,t){return n[e]=t==null||t,n},at=function(){var n={},t=[];return s(function(i,r){return t.push(i)>u.cacheLength&&delete n[t.shift()],n[i+" "]=r},n)},ii=at(),ri=at(),ui=at(),f="[\\x20\\t\\r\\n\\f]",a="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",ai=a.replace("w","w#"),fi="\\["+f+"*("+a+")"+f+"*(?:([*^$|!~]?=)"+f+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ai+")|)|)"+f+"*\\]",vt=":("+a+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+fi+")|[^:]|\\\\.)*|.*))\\)|)",ei=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+f+"*((?:-\\d)?\\d*)"+f+"*\\)|)(?=[^-]|$)",it=new RegExp("^"+f+"+|((?:^|[^\\\\])(?:\\\\.)*)"+f+"+$","g"),vi=new RegExp("^"+f+"*,"+f+"*"),yi=new RegExp("^"+f+"*([\\x20\\t\\r\\n\\f>+~])"+f+"*"),pi=new RegExp(vt),wi=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,yt=/[\x20\t\r\n\f]*[+~]/,bi=/h\d/i,ki=/input|select|textarea|button/i,v=/\\(?!\\)/g,rt={ID:new RegExp("^#("+a+")"),CLASS:new RegExp("^\\.("+a+")"),NAME:new RegExp("^\\[name=['\"]?("+a+")['\"]?\\]"),TAG:new RegExp("^("+a.replace("w","w*")+")"),ATTR:new RegExp("^"+fi),PSEUDO:new RegExp("^"+vt),POS:new RegExp(ei,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+f+"*(even|odd|(([+-]|)(\\d*)n|)"+f+"*(?:([+-]|)"+f+"*(\\d+)|))"+f+"*\\)|)","i"),needsContext:new RegExp("^"+f+"*[>+~]|"+ei,"i")},l=function(n){var t=h.createElement("div");try{return n(t)}catch(i){return!1}finally{t=null}},di=l(function(n){return n.appendChild(h.createComment("")),!n.getElementsByTagName("*").length}),gi=l(function(n){return n.innerHTML="<a href='#'><\/a>",n.firstChild&&typeof n.firstChild.getAttribute!==c&&n.firstChild.getAttribute("href")==="#"}),nr=l(function(n){n.innerHTML="<select><\/select>";var t=typeof n.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),oi=l(function(n){return(n.innerHTML="<div class='hidden e'><\/div><div class='hidden'><\/div>",!n.getElementsByClassName||!n.getElementsByClassName("e").length)?!1:(n.lastChild.className="e",n.getElementsByClassName("e").length===2)}),tr=l(function(n){n.id=e+0;n.innerHTML="<a name='"+e+"'><\/a><div name='"+e+"'><\/div>";o.insertBefore(n,o.firstChild);var t=h.getElementsByName&&h.getElementsByName(e).length===2+h.getElementsByName(e+0).length;return st=!h.getElementById(e),o.removeChild(n),t});try{w.call(o.childNodes,0)[0].nodeType}catch(ur){w=function(n){for(var t,i=[];t=this[n];n++)i.push(t);return i}}r.matches=function(n,t){return r(n,null,null,t)};r.matchesSelector=function(n,t){return r(t,null,null,[n]).length>0};d=r.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(t===1||t===9||t===11){if(typeof n.textContent=="string")return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=d(n)}else if(t===3||t===4)return n.nodeValue}else for(;r=n[u];u++)i+=d(r);return i};g=r.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?t.nodeName!=="HTML":!1};gt=r.contains=o.contains?function(n,t){var r=n.nodeType===9?n.documentElement:n,i=t&&t.parentNode;return n===i||!!(i&&i.nodeType===1&&r.contains&&r.contains(i))}:o.compareDocumentPosition?function(n,t){return t&&!!(n.compareDocumentPosition(t)&16)}:function(n,t){while(t=t.parentNode)if(t===n)return!0;return!1};r.attr=function(n,t){var i,r=g(n);return(r||(t=t.toLowerCase()),i=u.attrHandle[t])?i(n):r||nr?n.getAttribute(t):(i=n.getAttributeNode(t),i?typeof n[t]=="boolean"?n[t]?t:null:i.specified?i.value:null:null)};u=r.selectors={cacheLength:50,createPseudo:s,match:rt,attrHandle:gi?{}:{href:function(n){return n.getAttribute("href",2)},type:function(n){return n.getAttribute("type")}},find:{ID:st?function(n,t,i){if(typeof t.getElementById!==c&&!i){var r=t.getElementById(n);return r&&r.parentNode?[r]:[]}}:function(n,i,r){if(typeof i.getElementById!==c&&!r){var u=i.getElementById(n);return u?u.id===n||typeof u.getAttributeNode!==c&&u.getAttributeNode("id").value===n?[u]:t:[]}},TAG:di?function(n,t){if(typeof t.getElementsByTagName!==c)return t.getElementsByTagName(n)}:function(n,t){var f=t.getElementsByTagName(n),i,r,u;if(n==="*"){for(r=[],u=0;i=f[u];u++)i.nodeType===1&&r.push(i);return r}return f},NAME:tr&&function(n,t){if(typeof t.getElementsByName!==c)return t.getElementsByName(name)},CLASS:oi&&function(n,t,i){if(typeof t.getElementsByClassName!==c&&!i)return t.getElementsByClassName(n)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(v,""),n[3]=(n[4]||n[5]||"").replace(v,""),n[2]==="~="&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),n[1]==="nth"?(n[2]||r.error(n[0]),n[3]=+(n[3]?n[4]+(n[5]||1):2*(n[2]==="even"||n[2]==="odd")),n[4]=+(n[6]+n[7]||n[2]==="odd")):n[2]&&r.error(n[0]),n},PSEUDO:function(n){var t,i;return rt.CHILD.test(n[0])?null:(n[3]?n[2]=n[3]:(t=n[4])&&(pi.test(t)&&(i=ft(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(t=t.slice(0,i),n[0]=n[0].slice(0,i)),n[2]=t),n.slice(0,3))}},filter:{ID:st?function(n){return n=n.replace(v,""),function(t){return t.getAttribute("id")===n}}:function(n){return n=n.replace(v,""),function(t){var i=typeof t.getAttributeNode!==c&&t.getAttributeNode("id");return i&&i.value===n}},TAG:function(n){return n==="*"?function(){return!0}:(n=n.replace(v,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===n})},CLASS:function(n){var t=ii[e][n+" "];return t||(t=new RegExp("(^|"+f+")"+n+"("+f+"|$)"))&&ii(n,function(n){return t.test(n.className||typeof n.getAttribute!==c&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(u){var f=r.attr(u,n);return f==null?t==="!=":t?(f+="",t==="="?f===i:t==="!="?f!==i:t==="^="?i&&f.indexOf(i)===0:t==="*="?i&&f.indexOf(i)>-1:t==="$="?i&&f.substr(f.length-i.length)===i:t==="~="?(" "+f+" ").indexOf(i)>-1:t==="|="?f===i||f.substr(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r){return n==="nth"?function(n){var t,u,f=n.parentNode;if(i===1&&r===0)return!0;if(f)for(u=0,t=f.firstChild;t;t=t.nextSibling)if(t.nodeType===1&&(u++,n===t))break;return u-=r,u===i||u%i==0&&u/i>=0}:function(t){var i=t;switch(n){case"only":case"first":while(i=i.previousSibling)if(i.nodeType===1)return!1;if(n==="first")return!0;i=t;case"last":while(i=i.nextSibling)if(i.nodeType===1)return!1;return!0}}},PSEUDO:function(n,t){var f,i=u.pseudos[n]||u.setFilters[n.toLowerCase()]||r.error("unsupported pseudo: "+n);return i[e]?i(t):i.length>1?(f=[n,n,"",t],u.setFilters.hasOwnProperty(n.toLowerCase())?s(function(n,r){for(var u,f=i(n,t),e=f.length;e--;)u=lt.call(n,f[e]),n[u]=!(r[u]=f[e])}):function(n){return i(n,0,f)}):i}},pseudos:{not:s(function(n){var i=[],r=[],t=ht(n.replace(it,"$1"));return t[e]?s(function(n,i,r,u){for(var e,o=t(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(i[f]=e))}):function(n,u,f){return i[0]=n,t(i,null,f,r),!r.pop()}}),has:s(function(n){return function(t){return r(n,t).length>0}}),contains:s(function(n){return function(t){return(t.textContent||t.innerText||d(t)).indexOf(n)>-1}}),enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&!!n.checked||t==="option"&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},parent:function(n){return!u.pseudos.empty(n)},empty:function(n){var t;for(n=n.firstChild;n;){if(n.nodeName>"@"||(t=n.nodeType)===3||t===4)return!1;n=n.nextSibling}return!0},header:function(n){return bi.test(n.nodeName)},text:function(n){var t,i;return n.nodeName.toLowerCase()==="input"&&(t=n.type)==="text"&&((i=n.getAttribute("type"))==null||i.toLowerCase()===t)},radio:k("radio"),checkbox:k("checkbox"),file:k("file"),password:k("password"),image:k("image"),submit:si("submit"),reset:si("reset"),button:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&n.type==="button"||t==="button"},input:function(n){return ki.test(n.nodeName)},focus:function(n){var t=n.ownerDocument;return n===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},active:function(n){return n===n.ownerDocument.activeElement},first:y(function(){return[0]}),last:y(function(n,t){return[t-1]}),eq:y(function(n,t,i){return[i<0?i+t:i]}),even:y(function(n,t){for(var i=0;i<t;i+=2)n.push(i);return n}),odd:y(function(n,t){for(var i=1;i<t;i+=2)n.push(i);return n}),lt:y(function(n,t,i){for(var r=i<0?i+t:i;--r>=0;)n.push(r);return n}),gt:y(function(n,t,i){for(var r=i<0?i+t:i;++r<t;)n.push(r);return n})}};ct=o.compareDocumentPosition?function(n,t){return n===t?(b=!0,0):(!n.compareDocumentPosition||!t.compareDocumentPosition?n.compareDocumentPosition:n.compareDocumentPosition(t)&4)?-1:1}:function(n,t){var i;if(n===t)return b=!0,0;if(n.sourceIndex&&t.sourceIndex)return n.sourceIndex-t.sourceIndex;var e,h,u=[],f=[],o=n.parentNode,s=t.parentNode,r=o;if(o===s)return ut(n,t);if(o){if(!s)return 1}else return-1;while(r)u.unshift(r),r=r.parentNode;for(r=s;r;)f.unshift(r),r=r.parentNode;for(e=u.length,h=f.length,i=0;i<e&&i<h;i++)if(u[i]!==f[i])return ut(u[i],f[i]);return i===e?ut(n,f[i],-1):ut(u[i],t,1)};[0,0].sort(ct);ni=!b;r.uniqueSort=function(n){var r,u=[],t=1,i=0;if(b=ni,n.sort(ct),b){for(;r=n[t];t++)r===n[t-1]&&(i=u.push(t));while(i--)n.splice(u[i],1)}return n};r.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};ht=r.compile=function(n,t){var r,u=[],f=[],i=ui[e][n+" "];if(!i){for(t||(t=ft(n)),r=t.length;r--;)i=kt(t[r]),i[e]?u.push(i):f.push(i);i=ui(n,ir(f,u))}return i};h.querySelectorAll&&function(){var u,s=dt,h=/'|\\/g,c=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,n=[":focus"],t=[":active"],i=o.matchesSelector||o.mozMatchesSelector||o.webkitMatchesSelector||o.oMatchesSelector||o.msMatchesSelector;l(function(t){t.innerHTML="<select><option selected=''><\/option><\/select>";t.querySelectorAll("[selected]").length||n.push("\\["+f+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)");t.querySelectorAll(":checked").length||n.push(":checked")});l(function(t){t.innerHTML="<p test=''><\/p>";t.querySelectorAll("[test^='']").length&&n.push("[*^$]="+f+"*(?:\"\"|'')");t.innerHTML="<input type='hidden'/>";t.querySelectorAll(":enabled").length||n.push(":enabled",":disabled")});n=new RegExp(n.join("|"));dt=function(t,i,r,u,f){if(!u&&!f&&!n.test(t)){var o,l,a=!0,c=e,y=i,v=i.nodeType===9&&t;if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){for(o=ft(t),(a=i.getAttribute("id"))?c=a.replace(h,"\\$&"):i.setAttribute("id",c),c="[id='"+c+"'] ",l=o.length;l--;)o[l]=c+o[l].join("");y=yt.test(t)&&i.parentNode||i;v=o.join(",")}if(v)try{return p.apply(r,w.call(y.querySelectorAll(v),0)),r}catch(b){}finally{a||i.removeAttribute("id")}}return s(t,i,r,u,f)};i&&(l(function(n){u=i.call(n,"div");try{i.call(n,"[test!='']:sizzle");t.push("!=",vt)}catch(r){}}),t=new RegExp(t.join("|")),r.matchesSelector=function(f,e){if(e=e.replace(c,"='$1']"),!g(f)&&!t.test(e)&&!n.test(e))try{var o=i.call(f,e);if(o||u||f.document&&f.document.nodeType!==11)return o}catch(s){}return r(e,null,null,[f]).length>0})}();u.pseudos.nth=u.pseudos.eq;u.filters=hi.prototype=u.pseudos;u.setFilters=new hi;r.attr=i.attr;i.find=r;i.expr=r.selectors;i.expr[":"]=i.expr.pseudos;i.unique=r.uniqueSort;i.text=r.getText;i.isXMLDoc=r.isXML;i.contains=r.contains})(n);var bu=/Until$/,ku=/^(?:parents|prev(?:Until|All))/,du=/^.[^:#\[\.,]*$/,ci=i.expr.match.needsContext,gu={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({find:function(n){var t,f,o,u,e,r,s=this;if(typeof n!="string")return i(n).filter(function(){for(t=0,f=s.length;t<f;t++)if(i.contains(s[t],this))return!0});for(r=this.pushStack("","find",n),t=0,f=this.length;t<f;t++)if(o=r.length,i.find(n,this[t],r),t>0)for(u=o;u<r.length;u++)for(e=0;e<o;e++)if(r[e]===r[u]){r.splice(u--,1);break}return r},has:function(n){var t,r=i(n,this),u=r.length;return this.filter(function(){for(t=0;t<u;t++)if(i.contains(this,r[t]))return!0})},not:function(n){return this.pushStack(ai(this,n,!1),"not",n)},filter:function(n){return this.pushStack(ai(this,n,!0),"filter",n)},is:function(n){return!!n&&(typeof n=="string"?ci.test(n)?i(n,this.context).index(this[0])>=0:i.filter(n,this).length>0:this.filter(n).length>0)},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=ci.test(n)||typeof n!="string"?i(n,t||this.context):0;f<o;f++)for(r=this[f];r&&r.ownerDocument&&r!==t&&r.nodeType!==11;){if(e?e.index(r)>-1:i.find.matchesSelector(r,n)){u.push(r);break}r=r.parentNode}return u=u.length>1?i.unique(u):u,this.pushStack(u,"closest",n)},index:function(n){return n?typeof n=="string"?i.inArray(this[0],i(n)):i.inArray(n.jqx?n[0]:n,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(n,t){var u=typeof n=="string"?i(n,t):i.makeArray(n&&n.nodeType?[n]:n),r=i.merge(this.get(),u);return this.pushStack(p(u[0])||p(r[0])?r:i.unique(r))},addBack:function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))}});i.fn.andSelf=i.fn.addBack;i.each({parent:function(n){var t=n.parentNode;return t&&t.nodeType!==11?t:null},parents:function(n){return i.dir(n,"parentNode")},parentsUntil:function(n,t,r){return i.dir(n,"parentNode",r)},next:function(n){return li(n,"nextSibling")},prev:function(n){return li(n,"previousSibling")},nextAll:function(n){return i.dir(n,"nextSibling")},prevAll:function(n){return i.dir(n,"previousSibling")},nextUntil:function(n,t,r){return i.dir(n,"nextSibling",r)},prevUntil:function(n,t,r){return i.dir(n,"previousSibling",r)},siblings:function(n){return i.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return i.sibling(n.firstChild)},contents:function(n){return i.nodeName(n,"iframe")?n.contentDocument||n.contentWindow.document:i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return bu.test(n)||(u=r),u&&typeof u=="string"&&(f=i.filter(u,f)),f=this.length>1&&!gu[n]?i.unique(f):f,this.length>1&&ku.test(n)&&(f=f.reverse()),this.pushStack(f,n,o.call(arguments).join(","))}});i.extend({filter:function(n,t,r){return r&&(n=":not("+n+")"),t.length===1?i.find.matchesSelector(t[0],n)?[t[0]]:[]:i.find.matches(n,t)},dir:function(n,r,u){for(var e=[],f=n[r];f&&f.nodeType!==9&&(u===t||f.nodeType!==1||!i(f).is(u));)f.nodeType===1&&e.push(f),f=f[r];return e},sibling:function(n,t){for(var i=[];n;n=n.nextSibling)n.nodeType===1&&n!==t&&i.push(n);return i}});var yi="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",nf=/ JQXLite\d+="(?:null|\d+)"/g,ct=/^\s+/,pi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,wi=/<([\w:]+)/,tf=/<tbody/i,rf=/<|&#?\w+;/,uf=/<(?:script|style|link)/i,ff=/<(?:script|object|embed|option|style)/i,lt=new RegExp("<(?:"+yi+")[\\s/>]","i"),bi=/^(?:checkbox|radio)$/,ki=/checked\s*(?:[^=]|=\s*.checked.)/i,ef=/\/(java|ecma)script/i,of=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,e={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],area:[1,"<map>","<\/map>"],_default:[0,"",""]},di=vi(r),at=di.appendChild(r.createElement("div"));e.optgroup=e.option;e.tbody=e.tfoot=e.colgroup=e.caption=e.thead;e.th=e.td;i.support.htmlSerialize||(e._default=[1,"X<div>","<\/div>"]);i.fn.extend({text:function(n){return i.access(this,function(n){return n===t?i.text(this):this.empty().append((this[0]&&this[0].ownerDocument||r).createTextNode(n))},null,n,arguments.length)},wrapAll:function(n){if(i.isFunction(n))return this.each(function(t){i(this).wrapAll(n.call(this,t))});if(this[0]){var t=i(n,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]);t.map(function(){for(var n=this;n.firstChild&&n.firstChild.nodeType===1;)n=n.firstChild;return n}).append(this)}return this},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(n){(this.nodeType===1||this.nodeType===11)&&this.appendChild(n)})},prepend:function(){return this.domManip(arguments,!0,function(n){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(n,this.firstChild)})},before:function(){if(!p(this[0]))return this.domManip(arguments,!1,function(n){this.parentNode.insertBefore(n,this)});if(arguments.length){var n=i.clean(arguments);return this.pushStack(i.merge(n,this),"before",this.selector)}},after:function(){if(!p(this[0]))return this.domManip(arguments,!1,function(n){this.parentNode.insertBefore(n,this.nextSibling)});if(arguments.length){var n=i.clean(arguments);return this.pushStack(i.merge(this,n),"after",this.selector)}},remove:function(n,t){for(var r,u=0;(r=this[u])!=null;u++)(!n||i.filter(n,[r]).length)&&(t||r.nodeType!==1||(i.cleanData(r.getElementsByTagName("*")),i.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r));return this},empty:function(){for(var n,t=0;(n=this[t])!=null;t++)for(n.nodeType===1&&i.cleanData(n.getElementsByTagName("*"));n.firstChild;)n.removeChild(n.firstChild);return this},clone:function(n,t){return n=n==null?!1:n,t=t==null?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return i.access(this,function(n){var r=this[0]||{},u=0,f=this.length;if(n===t)return r.nodeType===1?r.innerHTML.replace(nf,""):t;if(typeof n=="string"&&!uf.test(n)&&(i.support.htmlSerialize||!lt.test(n))&&(i.support.leadingWhitespace||!ct.test(n))&&!e[(wi.exec(n)||["",""])[1].toLowerCase()]){n=n.replace(pi,"<$1><\/$2>");try{for(;u<f;u++)r=this[u]||{},r.nodeType===1&&(i.cleanData(r.getElementsByTagName("*")),r.innerHTML=n);r=0}catch(o){}}r&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(n){return p(this[0])?this.length?this.pushStack(i(i.isFunction(n)?n():n),"replaceWith",n):this:i.isFunction(n)?this.each(function(t){var r=i(this),u=r.html();r.replaceWith(n.call(this,t,u))}):(typeof n!="string"&&(n=i(n).detach()),this.each(function(){var t=this.nextSibling,r=this.parentNode;i(this).remove();t?i(t).before(n):i(r).append(n)}))},detach:function(n){return this.remove(n,!0)},domManip:function(n,r,u){n=[].concat.apply([],n);var h,o,f,a,e=0,s=n[0],c=[],l=this.length;if(!i.support.checkClone&&l>1&&typeof s=="string"&&ki.test(s))return this.each(function(){i(this).domManip(n,r,u)});if(i.isFunction(s))return this.each(function(f){var e=i(this);n[0]=s.call(this,f,r?e.html():t);e.domManip(n,r,u)});if(this[0]){if(h=i.buildFragment(n,this,c),f=h.fragment,o=f.firstChild,f.childNodes.length===1&&(f=o),o)for(r=r&&i.nodeName(o,"tr"),a=h.cacheable||l-1;e<l;e++)u.call(r&&i.nodeName(this[e],"table")?sf(this[e],"tbody"):this[e],e===a?f:i.clone(f,!0,!0));f=o=null;c.length&&i.each(c,function(n,t){t.src?i.ajax?i.ajax({url:t.src,type:"GET",dataType:"script","async":!1,global:!1,throws:!0}):i.error("no ajax"):i.globalEval((t.text||t.textContent||t.innerHTML||"").replace(of,""));t.parentNode&&t.parentNode.removeChild(t)})}return this}});i.buildFragment=function(n,u,f){var o,s,h,e=n[0];return u=u||r,u=!u.nodeType&&u[0]||u,u=u.ownerDocument||u,n.length===1&&typeof e=="string"&&e.length<512&&u===r&&e.charAt(0)==="<"&&!ff.test(e)&&(i.support.checkClone||!ki.test(e))&&(i.support.html5Clone||!lt.test(e))&&(s=!0,o=i.fragments[e],h=o!==t),o||(o=u.createDocumentFragment(),i.clean(n,u,o,f),s&&(i.fragments[e]=h&&o)),{fragment:o,cacheable:s}};i.fragments={};i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(r){var o,u=0,s=[],f=i(r),h=f.length,e=this.length===1&&this[0].parentNode;if((e==null||e&&e.nodeType===11&&e.childNodes.length===1)&&h===1)return f[t](this[0]),this;for(;u<h;u++)o=(u>0?this.clone(!0):this).get(),i(f[u])[t](o),s=s.concat(o);return this.pushStack(s,n,f.selector)}});i.extend({clone:function(n,t,r){var f,o,u,e;if(i.support.html5Clone||i.isXMLDoc(n)||!lt.test("<"+n.nodeName+">")?e=n.cloneNode(!0):(at.innerHTML=n.outerHTML,at.removeChild(e=at.firstChild)),(!i.support.noCloneEvent||!i.support.noCloneChecked)&&(n.nodeType===1||n.nodeType===11)&&!i.isXMLDoc(n))for(nr(n,e),f=nt(n),o=nt(e),u=0;f[u];++u)o[u]&&nr(f[u],o[u]);if(t&&(gi(n,e),r))for(f=nt(n),o=nt(e),u=0;f[u];++u)gi(f[u],o[u]);return f=o=null,e},clean:function(n,t,u,f){var h,c,o,p,v,d,s,w,a,b,k,y=t===r&&di,l=[];for(t&&typeof t.createDocumentFragment!="undefined"||(t=r),h=0;(o=n[h])!=null;h++)if(typeof o=="number"&&(o+=""),o){if(typeof o=="string")if(rf.test(o)){for(y=y||vi(t),s=t.createElement("div"),y.appendChild(s),o=o.replace(pi,"<$1><\/$2>"),p=(wi.exec(o)||["",""])[1].toLowerCase(),v=e[p]||e._default,d=v[0],s.innerHTML=v[1]+o+v[2];d--;)s=s.lastChild;if(!i.support.tbody)for(w=tf.test(o),a=p==="table"&&!w?s.firstChild&&s.firstChild.childNodes:v[1]==="<table>"&&!w?s.childNodes:[],c=a.length-1;c>=0;--c)i.nodeName(a[c],"tbody")&&!a[c].childNodes.length&&a[c].parentNode.removeChild(a[c]);!i.support.leadingWhitespace&&ct.test(o)&&s.insertBefore(t.createTextNode(ct.exec(o)[0]),s.firstChild);o=s.childNodes;s.parentNode.removeChild(s)}else o=t.createTextNode(o);o.nodeType?l.push(o):i.merge(l,o)}if(s&&(o=s=y=null),!i.support.appendChecked)for(h=0;(o=l[h])!=null;h++)i.nodeName(o,"input")?tr(o):typeof o.getElementsByTagName!="undefined"&&i.grep(o.getElementsByTagName("input"),tr);if(u)for(b=function(n){if(!n.type||ef.test(n.type))return f?f.push(n.parentNode?n.parentNode.removeChild(n):n):u.appendChild(n)},h=0;(o=l[h])!=null;h++)i.nodeName(o,"script")&&b(o)||(u.appendChild(o),typeof o.getElementsByTagName!="undefined"&&(k=i.grep(i.merge([],o.getElementsByTagName("script")),b),l.splice.apply(l,[h+1,0].concat(k)),h+=k.length));return l},cleanData:function(n,t){for(var f,u,r,e,h=0,o=i.expando,s=i.cache,c=i.support.deleteExpando,l=i.event.special;(r=n[h])!=null;h++)if((t||i.acceptData(r))&&(u=r[o],f=u&&s[u],f)){if(f.events)for(e in f.events)l[e]?i.event.remove(r,e):i.removeEvent(r,e,f.handle);s[u]&&(delete s[u],c?delete r[o]:r.removeAttribute?r.removeAttribute(o):r[o]=null,i.deletedIds.push(u))}}}),function(){var t,n;i.uaMatch=function(n){n=n.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}};t=i.uaMatch(pr.userAgent);n={};t.browser&&(n[t.browser]=!0,n.version=t.version);n.chrome?n.webkit=!0:n.webkit&&(n.safari=!0);i.browser=n;i.sub=function(){function n(t,i){return new n.fn.init(t,i)}i.extend(!0,n,this);n.superclass=this;n.fn=n.prototype=this();n.fn.constructor=n;n.sub=this.sub;n.fn.init=function(r,u){return u&&u instanceof i&&!(u instanceof n)&&(u=n(u)),i.fn.init.call(this,r,u,t)};n.fn.init.prototype=n.fn;var t=n(r);return n}}();var u,c,l,vt=/alpha\([^)]*\)/i,hf=/opacity=([^)]*)/,cf=/^(top|right|bottom|left)$/,lf=/^(none|table(?!-c[ea]).+)/,ir=/^margin/,af=new RegExp("^("+k+")(.*)$","i"),tt=new RegExp("^("+k+")(?!px)[a-z%]+$","i"),vf=new RegExp("^([-+])=("+k+")","i"),yt={BODY:"block"},yf={position:"absolute",visibility:"hidden",display:"block"},rr={letterSpacing:0,fontWeight:400},s=["Top","Right","Bottom","Left"],ur=["Webkit","O","Moz","ms"],pf=i.fn.toggle;i.fn.extend({css:function(n,r){return i.access(this,function(n,r,u){return u!==t?i.style(n,r,u):i.css(n,r)},n,r,arguments.length>1)},show:function(){return er(this,!0)},hide:function(){return er(this)},toggle:function(n,t){var r=typeof n=="boolean";return i.isFunction(n)&&i.isFunction(t)?pf.apply(this,arguments):this.each(function(){(r?n:it(this))?i(this).show():i(this).hide()})}});i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=u(n,"opacity");return i===""?"1":i}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:i.support.cssFloat?"cssFloat":"styleFloat"},style:function(n,r,u,f){if(n&&n.nodeType!==3&&n.nodeType!==8&&n.style){var o,s,e,h=i.camelCase(r),c=n.style;if(r=i.cssProps[h]||(i.cssProps[h]=fr(c,h)),e=i.cssHooks[r]||i.cssHooks[h],u!==t){if(s=typeof u,s==="string"&&(o=vf.exec(u))&&(u=(o[1]+1)*o[2]+parseFloat(i.css(n,r)),s="number"),u==null||s==="number"&&isNaN(u))return;if(s!=="number"||i.cssNumber[h]||(u+="px"),!e||!("set"in e)||(u=e.set(n,u,f))!==t)try{c[r]=u}catch(l){}}else return e&&"get"in e&&(o=e.get(n,!1,f))!==t?o:c[r]}},css:function(n,r,f,e){var o,c,s,h=i.camelCase(r);return(r=i.cssProps[h]||(i.cssProps[h]=fr(n.style,h)),s=i.cssHooks[r]||i.cssHooks[h],s&&"get"in s&&(o=s.get(n,!0,e)),o===t&&(o=u(n,r)),o==="normal"&&r in rr&&(o=rr[r]),f||e!==t)?(c=parseFloat(o),f||i.isNumeric(c)?c||0:o):o},swap:function(n,t,i){var u,r,f={};for(r in t)f[r]=n.style[r],n.style[r]=t[r];u=i.call(n);for(r in t)n.style[r]=f[r];return u}});n.getComputedStyle?u=function(t,r){var f,o,s,h,e=n.getComputedStyle(t,null),u=t.style;return e&&(f=e.getPropertyValue(r)||e[r],f!==""||i.contains(t.ownerDocument,t)||(f=i.style(t,r)),tt.test(f)&&ir.test(r)&&(o=u.width,s=u.minWidth,h=u.maxWidth,u.minWidth=u.maxWidth=u.width=f,f=e.width,u.width=o,u.minWidth=s,u.maxWidth=h)),f}:r.documentElement.currentStyle&&(u=function(n,t){var f,u,i=n.currentStyle&&n.currentStyle[t],r=n.style;return i==null&&r&&r[t]&&(i=r[t]),tt.test(i)&&!cf.test(t)&&(f=r.left,u=n.runtimeStyle&&n.runtimeStyle.left,u&&(n.runtimeStyle.left=n.currentStyle.left),r.left=t==="fontSize"?"1em":i,i=r.pixelLeft+"px",r.left=f,u&&(n.runtimeStyle.left=u)),i===""?"auto":i});i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,f){if(r)return n.offsetWidth===0&&lf.test(u(n,"display"))?i.swap(n,yf,function(){return hr(n,t,f)}):hr(n,t,f)},set:function(n,r,u){return or(n,r,u?sr(n,t,u,i.support.boxSizing&&i.css(n,"boxSizing")==="border-box"):0)}}});i.support.opacity||(i.cssHooks.opacity={get:function(n,t){return hf.test((t&&n.currentStyle?n.currentStyle.filter:n.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(n,t){var r=n.style,u=n.currentStyle,e=i.isNumeric(t)?"alpha(opacity="+t*100+")":"",f=u&&u.filter||r.filter||"";(r.zoom=1,t>=1&&i.trim(f.replace(vt,""))===""&&r.removeAttribute&&(r.removeAttribute("filter"),u&&!u.filter))||(r.filter=vt.test(f)?f.replace(vt,e):f+" "+e)}});i(function(){i.support.reliableMarginRight||(i.cssHooks.marginRight={get:function(n,t){return i.swap(n,{display:"inline-block"},function(){if(t)return u(n,"marginRight")})}});!i.support.pixelPosition&&i.fn.position&&i.each(["top","left"],function(n,t){i.cssHooks[t]={get:function(n,r){if(r){var f=u(n,t);return tt.test(f)?i(n).position()[t]+"px":f}}}})});i.expr&&i.expr.filters&&(i.expr.filters.hidden=function(n){return n.offsetWidth===0&&n.offsetHeight===0||!i.support.reliableHiddenOffsets&&(n.style&&n.style.display||u(n,"display"))==="none"},i.expr.filters.visible=function(n){return!i.expr.filters.hidden(n)});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var u=typeof i=="string"?i.split(" "):[i],f={},r=0;r<4;r++)f[n+s[r]+t]=u[r]||u[r-2]||u[0];return f}};ir.test(n)||(i.cssHooks[n+t].set=or)});var wf=/%20/g,bf=/\[\]$/,lr=/\r?\n/g,kf=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,df=/^(?:select|textarea)/i;i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?i.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||df.test(this.nodeName)||kf.test(this.type))}).map(function(n,t){var r=i(this).val();return r==null?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(lr,"\r\n")}}):{name:t.name,value:r.replace(lr,"\r\n")}}).get()}});i.param=function(n,r){var u,f=[],e=function(n,t){t=i.isFunction(t)?t():t==null?"":t;f[f.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(r===t&&(r=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jqx&&!i.isPlainObject(n))i.each(n,function(){e(this.name,this.value)});else for(u in n)pt(u,n[u],r,e);return f.join("&").replace(wf,"+")};i.support.ajax&&i.ajaxTransport(function(r){if(!r.crossDomain||i.support.cors){var u;return{send:function(f,e){var h,s,o=r.xhr();if(r.username?o.open(r.type,r.url,r.async,r.username,r.password):o.open(r.type,r.url,r.async),r.xhrFields)for(s in r.xhrFields)o[s]=r.xhrFields[s];r.mimeType&&o.overrideMimeType&&o.overrideMimeType(r.mimeType);r.crossDomain||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest");try{for(s in f)o.setRequestHeader(s,f[s])}catch(c){}o.send(r.hasContent&&r.data||null);u=function(n,f){var s,a,v,c,l;try{if(u&&(f||o.readyState===4))if(u=t,h&&(o.onreadystatechange=i.noop,xhrOnUnloadAbort&&delete xhrCallbacks[h]),f)o.readyState!==4&&o.abort();else{s=o.status;v=o.getAllResponseHeaders();c={};l=o.responseXML;l&&l.documentElement&&(c.xml=l);try{c.text=o.responseText}catch(p){}try{a=o.statusText}catch(p){a=""}s||!r.isLocal||r.crossDomain?s===1223&&(s=204):s=c.text?200:404}}catch(y){f||e(-1,y)}c&&e(s,a,c,v)};r.async?o.readyState===4?setTimeout(u,0):(h=++xhrId,xhrOnUnloadAbort&&(xhrCallbacks||(xhrCallbacks={},i(n).unload(xhrOnUnloadAbort)),xhrCallbacks[h]=u),o.onreadystatechange=u):u()},abort:function(){u&&u(0,1)}}}});var a,rt,gf=/^(?:toggle|show|hide)$/,ne=new RegExp("^(?:([-+])=|)("+k+")([a-z%]*)$","i"),te=/queueHooks$/,ut=[ue],w={"*":[function(n,t){var o,s,r=this.createTween(n,t),e=ne.exec(t),h=r.cur(),u=+h||0,f=1,c=20;if(e){if(o=+e[2],s=e[3]||(i.cssNumber[n]?"":"px"),s!=="px"&&u){u=i.css(r.elem,n,!0)||o||1;do f=f||".5",u=u/f,i.style(r.elem,n,u+s);while(f!==(f=r.cur()/h)&&f!==1&&--c)}r.unit=s;r.start=u;r.end=e[1]?u+(e[1]+1)*o:o}return r}]};i.Animation=i.extend(vr,{tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.split(" ");for(var r,u=0,f=n.length;u<f;u++)r=n[u],w[r]=w[r]||[],w[r].unshift(t)},prefilter:function(n,t){t?ut.unshift(n):ut.push(n)}});i.Tween=f;f.prototype={constructor:f,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||"swing";this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=f.propHooks[this.prop];return n&&n.get?n.get(this):f.propHooks._default.get(this)},run:function(n){var t,r=f.propHooks[this.prop];return this.pos=this.options.duration?t=i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):t=n,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):f.propHooks._default.set(this),this}};f.prototype.init.prototype=f.prototype;f.propHooks={_default:{get:function(n){var t;return n.elem[n.prop]!=null&&(!n.elem.style||n.elem.style[n.prop]==null)?n.elem[n.prop]:(t=i.css(n.elem,n.prop,!1,""),!t||t==="auto"?0:t)},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):n.elem.style&&(n.elem.style[i.cssProps[n.prop]]!=null||i.cssHooks[n.prop])?i.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}};f.propHooks.scrollTop=f.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(u,f,e){return u==null||typeof u=="boolean"||!n&&i.isFunction(u)&&i.isFunction(f)?r.apply(this,arguments):this.animate(ft(t,!0),u,f,e)}});i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(it).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,r,u){var e=i.isEmptyObject(n),f=i.speed(t,r,u),o=function(){var t=vr(this,i.extend({},n),f);e&&t.stop(!0)};return e||f.queue===!1?this.each(o):this.queue(f.queue,o)},stop:function(n,r,u){var f=function(n){var t=n.stop;delete n.stop;t(u)};return typeof n!="string"&&(u=r,r=n,n=t),r&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var o=!0,t=n!=null&&n+"queueHooks",e=i.timers,r=i._data(this);if(t)r[t]&&r[t].stop&&f(r[t]);else for(t in r)r[t]&&r[t].stop&&te.test(t)&&f(r[t]);for(t=e.length;t--;)e[t].elem===this&&(n==null||e[t].queue===n)&&(e[t].anim.stop(u),o=!1,e.splice(t,1));(o||!u)&&i.dequeue(this,n)})}});i.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.speed=function(n,t,r){var u=n&&typeof n=="object"?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:typeof u.duration=="number"?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,(u.queue==null||u.queue===!0)&&(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this);u.queue&&i.dequeue(this,u.queue)},u};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2}};i.timers=[];i.fx=f.prototype.init;i.fx.tick=function(){var u,n=i.timers,r=0;for(a=i.now();r<n.length;r++)u=n[r],u()||n[r]!==u||n.splice(r--,1);n.length||i.fx.stop();a=t};i.fx.timer=function(n){n()&&i.timers.push(n)&&!rt&&(rt=setInterval(i.fx.tick,i.fx.interval))};i.fx.interval=13;i.fx.stop=function(){clearInterval(rt);rt=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fx.step={};i.expr&&i.expr.filters&&(i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length});wt=/^(?:body|html)$/i;i.fn.offset=function(n){if(arguments.length)return n===t?this:this.each(function(t){i.offset.setOffset(this,n,t)});var u,o,s,h,c,l,a,f={top:0,left:0},r=this[0],e=r&&r.ownerDocument;if(e)return(o=e.body)===r?i.offset.bodyOffset(r):(u=e.documentElement,!i.contains(u,r))?f:(typeof r.getBoundingClientRect!="undefined"&&(f=r.getBoundingClientRect()),s=yr(e),h=u.clientTop||o.clientTop||0,c=u.clientLeft||o.clientLeft||0,l=s.pageYOffset||u.scrollTop,a=s.pageXOffset||u.scrollLeft,{top:f.top+l-h,left:f.left+a-c})};i.offset={bodyOffset:function(n){var t=n.offsetTop,r=n.offsetLeft;return i.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(i.css(n,"marginTop"))||0,r+=parseFloat(i.css(n,"marginLeft"))||0),{top:t,left:r}},setOffset:function(n,t,r){var f=i.css(n,"position");f==="static"&&(n.style.position="relative");var e=i(n),o=e.offset(),l=i.css(n,"top"),a=i.css(n,"left"),v=(f==="absolute"||f==="fixed")&&i.inArray("auto",[l,a])>-1,u={},s={},h,c;v?(s=e.position(),h=s.top,c=s.left):(h=parseFloat(l)||0,c=parseFloat(a)||0);i.isFunction(t)&&(t=t.call(n,r,o));t.top!=null&&(u.top=t.top-o.top+h);t.left!=null&&(u.left=t.left-o.left+c);"using"in t?t.using.call(n,u):e.css(u)}};i.fn.extend({isRendered:function(){var t=this,n=this[0];return n.parentNode==null||n.offsetWidth===0||n.offsetHeight===0?!1:!0},getSizeFromStyle:function(){var f=this,t=null,i=null,r=this[0],u;return r.style.width&&(t=r.style.width),r.style.height&&(i=r.style.height),u=n.getComputedStyle?getComputedStyle(r,null):r.currentStyle,u&&(u.width&&(t=u.width),u.height&&(i=u.height)),t==="0px"&&(t=0),i==="0px"&&(i=0),t===null&&(t=0),i===null&&(i=0),{width:t,height:i}},initAnimate:function(){},sizeStyleChanged:function(n){var t=this,i,r=function(n){var r=i;n&&n[0]&&n[0].attributeName==="style"&&n[0].type==="attributes"&&(r.element.offsetWidth!==r.offsetWidth||r.element.offsetHeight!==r.offsetHeight)&&(r.offsetWidth=r.element.offsetWidth,r.offsetHeight=r.element.offsetHeight,t.isRendered()&&r.callback())};i={element:t[0],offsetWidth:t[0].offsetWidth,offsetHeight:t[0].offsetHeight,callback:n};try{t.elementStyleObserver||(t.elementStyleObserver=new MutationObserver(r),t.elementStyleObserver.observe(t[0],{attributes:!0,childList:!1,characterData:!1}))}catch(u){}},position:function(){if(this[0]){var u=this[0],n=this.offsetParent(),t=this.offset(),r=wt.test(n[0].nodeName)?{top:0,left:0}:n.offset();return t.top-=parseFloat(i.css(u,"marginTop"))||0,t.left-=parseFloat(i.css(u,"marginLeft"))||0,r.top+=parseFloat(i.css(n[0],"borderTopWidth"))||0,r.left+=parseFloat(i.css(n[0],"borderLeftWidth"))||0,{top:t.top-r.top,left:t.left-r.left}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||r.body;n&&!wt.test(n.nodeName)&&i.css(n,"position")==="static";)n=n.offsetParent;return n||r.body})}});i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,r){var u=/Y/.test(r);i.fn[n]=function(f){return i.access(this,function(n,f,e){var o=yr(n);if(e===t)return o?r in o?o[r]:o.document.documentElement[f]:n[f];o?o.scrollTo(u?i(o).scrollLeft():e,u?e:i(o).scrollTop()):n[f]=e},n,f,arguments.length,null)}});i.each({Height:"height",Width:"width"},function(n,r){i.each({padding:"inner"+n,content:r,"":"outer"+n},function(u,f){i.fn[f]=function(f,e){var o=arguments.length&&(u||typeof f!="boolean"),s=u||(f===!0||e===!0?"margin":"border");return i.access(this,function(r,u,f){var e;return i.isWindow(r)?r.document.documentElement["client"+n]:r.nodeType===9?(e=r.documentElement,Math.max(r.body["scroll"+n],e["scroll"+n],r.body["offset"+n],e["offset"+n],e["client"+n])):f===t?i.css(r,u,f,s):i.style(r,u,f,s)},r,o?f:t,o,null)}})});n.JQXLite=n.jqxHelper=i;typeof define=="function"&&define.amd&&define.amd.JQXLite&&define("jqx",[],function(){return i})}(window),function(n){if(n.jQuery){n.minQuery=n.JQXLite=n.jQuery;return}n.$?n.minQuery=n.JQXLite=n.$:n.$=n.minQuery=n.JQXLite}(window);JQXLite.generateID=function(){var n=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},t="";do t="jqx"+n()+n()+n();while($("#"+t).length>0);return t};jqxBaseFramework=window.jqxBaseFramework=window.minQuery||window.jQuery,function(n){n.jqx=n.jqx||{};window.jqx=n.jqx;var t={createInstance:function(t,i,r){if(i=="jqxDataAdapter"){var u=r[0],f=r[1]||{};return new n.jqx.dataAdapter(u,f)}return n(t)[i](r||{}),n(t)[i]("getInstance")}};window.jqwidgets=t;n.jqx.define=function(n,t,i){n[t]=function(){this.baseType&&(this.base=new n[this.baseType],this.base.defineInstance());this.defineInstance();this.metaInfo()};n[t].prototype.defineInstance=function(){};n[t].prototype.metaInfo=function(){};n[t].prototype.base=null;n[t].prototype.baseType=undefined;i&&n[i]&&(n[t].prototype.baseType=i)};n.jqx.invoke=function(t,i){var r,f,u;if(i.length!=0){for(r=typeof i==Array||i.length>0?i[0]:i,f=typeof i==Array||i.length>1?Array.prototype.slice.call(i,1):n({}).toArray();t[r]==undefined&&t.base!=null;){if(t[r]!=undefined&&n.isFunction(t[r]))return t[r].apply(t,f);if(typeof r=="string"&&(u=r.toLowerCase(),t[u]!=undefined&&n.isFunction(t[u])))return t[u].apply(t,f);t=t.base}return t[r]!=undefined&&n.isFunction(t[r])?t[r].apply(t,f):typeof r=="string"&&(u=r.toLowerCase(),t[u]!=undefined&&n.isFunction(t[u]))?t[u].apply(t,f):void 0}};n.jqx.getByPriority=function(n){for(var t=undefined,i=0;i<n.length&&t==undefined;i++)t==undefined&&n[i]!=undefined&&(t=n[i]);return t};n.jqx.hasProperty=function(n,t){var r,i;if(typeof t=="object")for(r in t){for(i=n;i;){if(i.hasOwnProperty(r)||i.hasOwnProperty(r.toLowerCase()))return!0;i=i.base}return!1}else while(n){if(n.hasOwnProperty(t)||n.hasOwnProperty(t.toLowerCase()))return!0;n=n.base}return!1};n.jqx.hasFunction=function(t,i){var r,f,u;if(i.length==0||t==undefined)return!1;for(r=typeof i==Array||i.length>0?i[0]:i,f=typeof i==Array||i.length>1?Array.prototype.slice.call(i,1):{};t[r]==undefined&&t.base!=null;){if(t[r]&&n.isFunction(t[r])||typeof r=="string"&&(u=r.toLowerCase(),t[u]&&n.isFunction(t[u])))return!0;t=t.base}return t[r]&&n.isFunction(t[r])?!0:typeof r=="string"&&(u=r.toLowerCase(),t[u]&&n.isFunction(t[u]))?!0:!1};n.jqx.isPropertySetter=function(t,i){return i.length==1&&typeof i[0]=="object"?!0:i.length==2&&typeof i[0]=="string"&&!n.jqx.hasFunction(t,i)?!0:!1};n.jqx.validatePropertySetter=function(t,i,r){var f,u,e;if(!n.jqx.propertySetterValidation)return!0;if(i.length==1&&typeof i[0]=="object"){for(f in i[0]){for(u=t;!u.hasOwnProperty(f)&&u.base;)u=u.base;if(!u||!u.hasOwnProperty(f)){if(!r){if(e=u.hasOwnProperty(f.toString().toLowerCase()),e)return!0;throw"Invalid property: "+f;}return!1}}return!0}if(i.length!=2){if(!r)throw"Invalid property: "+i.length>=0?i[0]:"";return!1}while(!t.hasOwnProperty(i[0])&&t.base)t=t.base;if(!t||!t.hasOwnProperty(i[0])){if(!r)throw"Invalid property: "+i[0];return!1}return!0};Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,i=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(u){if(typeof u!="object"&&(typeof u!="function"||u===null))throw new TypeError("Object.keys called on non-object");var e=[],o,f;for(o in u)t.call(u,o)&&e.push(o);if(i)for(f=0;f<r;f++)t.call(u,n[f])&&e.push(n[f]);return e}}());n.jqx.set=function(t,i){var r=0,s,u,o,f,e;if(i.length==1&&typeof i[0]=="object"){if(t.isInitialized&&Object.keys&&Object.keys(i[0]).length>1){if(s=t.base?t.base.element:t.element,u=n.data(s,t.widgetName).initArgs,u&&JSON&&JSON.stringify&&i[0]&&u[0])try{if(JSON.stringify(i[0])==JSON.stringify(u[0])&&(o=!0,n.each(i[0],function(n,i){if(t[n]!=i)return o=!1,!1}),o))return}catch(h){}t.batchUpdate=i[0];f={};e={};n.each(i[0],function(n,i){for(var u=t;!u.hasOwnProperty(n)&&u.base!=null;)u=u.base;u.hasOwnProperty(n)?t[n]!=i&&(f[n]=t[n],e[n]=i,r++):u.hasOwnProperty(n.toLowerCase())&&t[n.toLowerCase()]!=i&&(f[n.toLowerCase()]=t[n.toLowerCase()],e[n.toLowerCase()]=i,r++)});r<2&&(t.batchUpdate=null)}n.each(i[0],function(i,r){for(var u=t;!u.hasOwnProperty(i)&&u.base!=null;)u=u.base;if(u.hasOwnProperty(i))n.jqx.setvalueraiseevent(u,i,r);else if(u.hasOwnProperty(i.toLowerCase()))n.jqx.setvalueraiseevent(u,i.toLowerCase(),r);else if(n.jqx.propertySetterValidation)throw"jqxCore: invalid property '"+i+"'";});t.batchUpdate!=null&&(t.batchUpdate=null,t.propertiesChangedHandler&&r>1&&t.propertiesChangedHandler(t,f,e))}else if(i.length==2){while(!t.hasOwnProperty(i[0])&&t.base)t=t.base;if(t.hasOwnProperty(i[0]))n.jqx.setvalueraiseevent(t,i[0],i[1]);else if(t.hasOwnProperty(i[0].toLowerCase()))n.jqx.setvalueraiseevent(t,i[0].toLowerCase(),i[1]);else if(n.jqx.propertySetterValidation)throw"jqxCore: invalid property '"+i[0]+"'";}};n.jqx.setvalueraiseevent=function(n,t,i){var r=n[t];(n[t]=i,n.isInitialized)&&(n.propertyChangedHandler!=undefined&&n.propertyChangedHandler(n,t,r,i),n.propertyChangeMap!=undefined&&n.propertyChangeMap[t]!=undefined&&n.propertyChangeMap[t](n,t,r,i))};n.jqx.get=function(n,t){var r,i;if(t==undefined||t==null)return undefined;if(n.propertyMap&&(r=n.propertyMap(t),r!=null))return r;if(n.hasOwnProperty(t))return n[t];if(n.hasOwnProperty(t.toLowerCase()))return n[t.toLowerCase()];if(i=undefined,typeof t==Array){if(t.length!=1)return undefined;i=t[0]}else typeof t=="string"&&(i=t);while(!n.hasOwnProperty(i)&&n.base)n=n.base;return n?n[i]:undefined};n.jqx.serialize=function(t){var i="",u,r;if(n.isArray(t)){for(i="[",r=0;r<t.length;r++)r>0&&(i+=", "),i+=n.jqx.serialize(t[r]);i+="]"}else if(typeof t=="object"){i="{";u=0;for(r in t)u++>0&&(i+=", "),i+=r+": "+n.jqx.serialize(t[r]);i+="}"}else i=t.toString();return i};n.jqx.propertySetterValidation=!0;n.jqx.jqxWidgetProxy=function(t,i,r){var e=n(i),f=n.data(i,t),u;if(f==undefined)return undefined;if(u=f.instance,n.jqx.hasFunction(u,r))return n.jqx.invoke(u,r);if(n.jqx.isPropertySetter(u,r)){if(n.jqx.validatePropertySetter(u,r))return n.jqx.set(u,r),undefined}else{if(typeof r=="object"&&r.length==0)return;if(typeof r=="object"&&r.length==1&&n.jqx.hasProperty(u,r[0]))return n.jqx.get(u,r[0]);if(typeof r=="string"&&n.jqx.hasProperty(u,r[0]))return n.jqx.get(u,r)}throw"jqxCore: Invalid parameter '"+n.jqx.serialize(r)+"' does not exist.";};n.jqx.applyWidget=function(t,i,r,u){var s=!1,h,e,f,u,o;try{s=window.MSApp!=undefined}catch(c){}for(h=n(t),u?(u.host=h,u.element=t):u=new n.jqx["_"+i],t.id==""&&(t.id=n.jqx.utilities.createId()),e={host:h,element:t,instance:u,initArgs:r},u.widgetName=i,n.data(t,i,e),n.data(t,"jqxWidget",e.instance),f=[],u=e.instance;u;)u.isInitialized=!1,f.push(u),u=u.base;f.reverse();f[0].theme=n.jqx.theme||"";n.jqx.jqxWidgetProxy(i,t,r);for(o in f)u=f[o],o==0&&(u.host=h,u.element=t,u.WinJS=s),u!=undefined&&(u.definedInstance&&u.definedInstance(),u.createInstance!=null&&(s?MSApp.execUnsafeLocalFunction(function(){u.createInstance(r)}):u.createInstance(r)));for(o in f)f[o]!=undefined&&(f[o].isInitialized=!0);s?MSApp.execUnsafeLocalFunction(function(){e.instance.refresh(!0)}):e.instance.refresh(!0)};n.jqx.jqxWidget=function(i,r,u){var h=!1,f,o,e,s;try{jqxArgs=Array.prototype.slice.call(u,0)}catch(c){jqxArgs=""}try{h=window.MSApp!=undefined}catch(c){}f=i;o="";r&&(o="_"+r);n.jqx.define(n.jqx,"_"+f,o);e=[];window[f]||(s=function(t){var r,i;if(t==null)return"";r=n.type(t);switch(r){case"string":case"number":case"date":case"boolean":case"bool":return t===null?"":t.toString()}return i="",n.each(t,function(t,r){var f=r,u,e;if(t>0&&(i+=", "),i+="[",u=0,n.type(f)=="object")for(e in f)u>0&&(i+=", "),i+="{"+e+":"+f[e]+"}",u++;else u>0&&(i+=", "),i+="{"+t+":"+f+"}",u++;i+="]"}),i},t[f]=window[f]=function(t,i){var c=[],r,o,u,h;if(i||(i={}),c.push(i),r=t,n.type(r)==="object"&&t[0]?(r=t[0].id,r===""&&(r=t[0].id=n.jqx.utilities.createId())):n.type(t)==="object"&&t&&t.nodeName&&(r=t.id,r===""&&(r=t.id=n.jqx.utilities.createId())),window.jqxWidgets&&window.jqxWidgets[r]){if(i&&n.each(window.jqxWidgets[r],function(){var t=n(this.element).data();t&&t.jqxWidget&&n(this.element)[f](i)}),window.jqxWidgets[r].length==1&&(o=n(window.jqxWidgets[r][0].widgetInstance.element).data(),o&&o.jqxWidget))return window.jqxWidgets[r][0];if(o=n(window.jqxWidgets[r][0].widgetInstance.element).data(),o&&o.jqxWidget)return window.jqxWidgets[r]}return(u=n(t),u.length===0&&(u=n("<div><\/div>"),(f==="jqxInput"||f==="jqxPasswordInput"||f==="jqxMaskedInput")&&(u=n("<input/>")),f==="jqxTextArea"&&(u=n("<textarea><\/textarea>")),(f==="jqxButton"||f==="jqxRepeatButton"||f==="jqxToggleButton")&&(u=n("<button/>")),f==="jqxSplitter"&&(u=n("<div><div>Panel 1<\/div><div>Panel 2<\/div><\/div>")),f==="jqxTabs"&&(u=n("<div><ul><li>Tab 1<\/li><li>Tab 2<\/li><\/ul><div>Content 1<\/div><div>Content 2<\/div><\/div>")),f==="jqxRibbon"&&(u=n("<div><ul><li>Tab 1<\/li><li>Tab 2<\/li><\/ul><div><div>Content 1<\/div><div>Content 2<\/div><\/div><\/div>")),f==="jqxDocking"&&(u=n("<div><div><div><div>Title 1<\/div><div>Content 1<\/div><\/div><\/div><\/div>")),f==="jqxWindow"&&(u=n("<div><div>Title 1<\/div><div>Content 1<\/div><\/div>"))),h=[],n.each(u,function(t){var o=u[t],a,l;if(n.jqx.applyWidget(o,f,c,undefined),!e[f]){var l=n.data(o,"jqxWidget"),i=n.jqx["_"+f].prototype.defineInstance(),v={};n.jqx["_"+f].prototype.metaInfo&&(v=n.jqx["_"+f].prototype.metaInfo());f=="jqxDockingLayout"&&(i=n.extend(i,n.jqx._jqxLayout.prototype.defineInstance()));(f=="jqxToggleButton"||f=="jqxRepeatButton")&&(i=n.extend(i,n.jqx._jqxButton.prototype.defineInstance()));f=="jqxTreeGrid"&&(i=n.extend(i,n.jqx._jqxDataTable.prototype.defineInstance()));a=function(t){var r=n.data(t,"jqxWidget"),i,u;this.widgetInstance=r;i=n.extend(this,r);i.on=i.addEventListener=function(n,t){i.addHandler(i.base?i.base.host:i.host,n,t)};i.off=i.removeEventListener=function(n){i.removeHandler(i.base?i.base.host:i.host,n)};for(u in r)n.type(r[u])=="function"&&(i[u]=n.proxy(r[u],r));return i};e[f]=a;n.each(i,function(t,i){Object.defineProperty(a.prototype,t,{get:function(){return this.widgetInstance?this.widgetInstance[t]:i},set:function(i){var r;if(this.widgetInstance&&(this.widgetInstance[t]!=i||t==="width"||t==="height")){var u=this.widgetInstance[t],e=i,h=n.type(u),c=n.type(e),o=!1;(h!=c||t==="source"||t==="width"||t==="height")&&(o=!0);(o||s(u)!=s(e))&&(r={},r[t]=i,this.widgetInstance.host?this.widgetInstance.host[f](r):this.widgetInstance.base.host[f](r),this.widgetInstance[t]=i,this.widgetInstance.propertyUpdated&&this.widgetInstance.propertyUpdated(t,u,i))}}})})}l=new e[f](o);h.push(l);window.jqxWidgets||(window.jqxWidgets=[]);window.jqxWidgets[r]||(window.jqxWidgets[r]=[]);window.jqxWidgets[r].push(l)}),h.length===1)?h[0]:h});n.fn[f]=function(){var t=Array.prototype.slice.call(arguments,0),i,r;if(t.length==0||t.length==1&&typeof t[0]=="object"){if(this.length==0)if(this.selector)throw new Error("Invalid Selector - "+this.selector+"! Please, check whether the used ID or CSS Class name is correct.");else throw new Error("Invalid Selector! Please, check whether the used ID or CSS Class name is correct.");return this.each(function(){var u=n(this),i=this,r=n.data(i,f);r==null?n.jqx.applyWidget(i,f,t,undefined):n.jqx.jqxWidgetProxy(f,this,t)})}if(this.length==0)if(this.selector)throw new Error("Invalid Selector - "+this.selector+"! Please, check whether the used ID or CSS Class name is correct.");else throw new Error("Invalid Selector! Please, check whether the used ID or CSS Class name is correct.");return i=null,r=0,this.each(function(){var e=n.jqx.jqxWidgetProxy(f,this,t),u;r==0?(i=e,r++):(r==1&&(u=[],u.push(i),i=u),i.push(e))}),i};try{n.extend(n.jqx["_"+f].prototype,Array.prototype.slice.call(u,0)[0])}catch(c){}n.extend(n.jqx["_"+f].prototype,{toThemeProperty:function(t,i){return n.jqx.toThemeProperty(this,t,i)},isMaterialized:function(){return this.theme?this.theme.indexOf("material")>=0?!0:void 0:!1},isModern:function(){return this.theme?this.theme.indexOf("light")>=0?!0:this.theme==="dark"?!0:void 0:!1},_addBarAndLabel:function(t){var i=this,r=n("<label><\/label"),u;r[0].innerHTML=this.placeHolder;r.addClass(i.toThemeProperty("jqx-input-label"));t.after(r);i.label=r;u=n("<span><\/span>");t.after(u);u.addClass(i.toThemeProperty("jqx-input-bar"));i.bar=u;i.bar.css("top",this.host.height())}});n.jqx["_"+f].prototype.refresh=function(){this.base&&this.base.refresh(!0)};n.jqx["_"+f].prototype.createInstance=function(){};n.jqx["_"+f].prototype.addEventHandler=function(n,t){if(this.base)this.base.host.on(n,t);else this.host.on(n,t)};n.jqx["_"+f].prototype.removeEventHandler=function(n){this.base?this.base.host.off(n):this.host.off(n)};n.jqx["_"+f].prototype.applyTo=function(t,i){if(!(i instanceof Array)){var r=[];r.push(i);i=r}n.jqx.applyWidget(t,f,i,this)};n.jqx["_"+f].prototype.getInstance=function(){return this};n.jqx["_"+f].prototype.propertyChangeMap={};n.jqx["_"+f].prototype.addHandler=function(t,i,r,u){n.jqx.addHandler(n(t),i,r,u)};n.jqx["_"+f].prototype.removeHandler=function(t,i,r){n.jqx.removeHandler(n(t),i,r)};n.jqx["_"+f].prototype.setOptions=function(){if(this.host&&this.host.length&&this.host.length==1)return n.jqx.jqxWidgetProxy(f,this.host[0],arguments)}};n.jqx.toThemeProperty=function(n,t,i){var e,u,r,f;if(n.theme=="")return t;for(e=t.split(" "),u="",r=0;r<e.length;r++)r>0&&(u+=" "),f=e[r],u+=i!=null&&i?f+"-"+n.theme:f+" "+f+"-"+n.theme;return u};n.jqx.addHandler=function(t,i,r,u){for(var f,o=i.split(" "),e=0;e<o.length;e++){if(f=o[e],window.addEventListener)switch(f){case"mousewheel":n.jqx.browser.mozilla?t[0].addEventListener("DOMMouseScroll",r,!1):t[0].addEventListener("mousewheel",r,!1);continue;case"mousemove":if(!u){t[0].addEventListener("mousemove",r,!1);continue}}if(u==undefined||u==null)if(t.on)t.on(f,r);else t.bind(f,r);else if(t.on)t.on(f,u,r);else t.bind(f,u,r)}};n.jqx.removeHandler=function(t,i,r){var e,f,u;if(!i){t.off?t.off():t.unbind();return}for(e=i.split(" "),f=0;f<e.length;f++){if(u=e[f],window.removeEventListener)switch(u){case"mousewheel":n.jqx.browser.mozilla?t[0].removeEventListener("DOMMouseScroll",r,!1):t[0].removeEventListener("mousewheel",r,!1);continue;case"mousemove":if(r){t[0].removeEventListener("mousemove",r,!1);continue}}if(u==undefined){t.off?t.off():t.unbind();continue}r==undefined?t.off?t.off(u):t.unbind(u):t.off?t.off(u,r):t.unbind(u,r)}};n.jqx.credits=n.jqx.credits||"";n.jqx.theme=n.jqx.theme||"";n.jqx.scrollAnimation=n.jqx.scrollAnimation||!1;n.jqx.resizeDelay=n.jqx.resizeDelay||10;n.jqx.ready=function(){n(window).trigger("jqxReady")};n.jqx.init=function(){n.each(arguments[0],function(t,i){t=="theme"&&(n.jqx.theme=i);t=="scrollBarSize"&&(n.jqx.utilities.scrollBarSize=i);t=="touchScrollBarSize"&&(n.jqx.utilities.touchScrollBarSize=i);t=="scrollBarButtonsVisibility"&&(n.jqx.utilities.scrollBarButtonsVisibility=i)})};n.jqx.utilities=n.jqx.utilities||{};n.extend(n.jqx.utilities,{scrollBarSize:13,touchScrollBarSize:8,scrollBarButtonsVisibility:"visible",createId:function(){var n=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return"jqxWidget"+n()+n()+n()},setTheme:function(t,i,r){var u;if(typeof r!="undefined"&&r[0].className.split){t===undefined&&(t="");i===undefined&&(i="");var f=r[0].className.split(" "),o=[],e=[],s=r.children();for(u=0;u<f.length;u+=1)f[u].indexOf(t)>=0&&(t.length>0?(o.push(f[u]),e.push(f[u].replace(t,i))):e.push(f[u].replace("-"+i,"")+"-"+i));for(this._removeOldClasses(o,r),this._addNewClasses(e,r),u=0;u<s.length;u+=1)this.setTheme(t,i,n(s[u]))}},_removeOldClasses:function(n,t){for(var i=0;i<n.length;i+=1)t.removeClass(n[i])},_addNewClasses:function(n,t){for(var i=0;i<n.length;i+=1)t.addClass(n[i])},getOffset:function(t){var i=n.jqx.mobile.getLeftPos(t[0]),r=n.jqx.mobile.getTopPos(t[0]);return{top:r,left:i}},resize:function(t,i,r,u){var h,v,o,e,s,c,l,y,f,w;u===undefined&&(u=!0);var a=-1,f=this,p=function(n){var i,t;if(!f.hiddenWidgets)return-1;for(i=-1,t=0;t<f.hiddenWidgets.length;t++)if(n.id){if(f.hiddenWidgets[t].id==n.id){i=t;break}}else if(f.hiddenWidgets[t].id==n[0].id){i=t;break}return i};if(this.resizeHandlers){for(h=0;h<this.resizeHandlers.length;h++)if(t.id){if(this.resizeHandlers[h].id==t.id){a=h;break}}else if(this.resizeHandlers[h].id==t[0].id){a=h;break}if(r===!0){a!=-1&&(this.resizeHandlers.splice(a,1),this.watchedElementData&&this.watchedElementData.length>0&&this.watchedElementData.splice(a,1));this.resizeHandlers.length==0&&(e=n(window),e.off?(e.off("resize.jqx"),e.off("orientationchange.jqx"),e.off("orientationchanged.jqx")):(e.unbind("resize.jqx"),e.unbind("orientationchange.jqx"),e.unbind("orientationchanged.jqx")),this.resizeHandlers=null);v=p(t);v!=-1&&this.hiddenWidgets&&this.hiddenWidgets.splice(v,1);return}}else if(r===!0){v=p(t);v!=-1&&this.hiddenWidgets&&this.hiddenWidgets.splice(v,1);return}if(f=this,o=function(t,i){var l,e,o,h,s,c,b;if(f.resizeHandlers){var a=function(n){for(var i=-1,t=n.parentNode;t;)i++,t=t.parentNode;return i},v=function(n,t){var i,r,f;if(!n.widget||!t.widget)return 0;i=a(n.widget[0]);r=a(t.widget[0]);try{if(i<r)return-1;if(i>r)return 1}catch(u){f=u}return 0},y=function(t){if(f.hiddenWidgets.length>0){f.hiddenWidgets.sort(v);var r=function(){for(var t,u=!1,e=[],r=0;r<f.hiddenWidgets.length;r++)t=f.hiddenWidgets[r],n.jqx.isHidden(t.widget)?(u=!0,e.push(t)):t.callback&&t.callback(i);f.hiddenWidgets=e;u||clearInterval(f.__resizeInterval)};if(t==!1){r();f.__resizeInterval&&clearInterval(f.__resizeInterval);return}f.__resizeInterval&&clearInterval(f.__resizeInterval);f.__resizeInterval=setInterval(function(){r()},100)}};for(f.hiddenWidgets&&f.hiddenWidgets.length>0&&y(!1),f.hiddenWidgets=[],f.resizeHandlers.sort(v),l=0;l<f.resizeHandlers.length;l++){var u=f.resizeHandlers[l],w=u.widget,r=u.data;if(r&&r.jqxWidget)if(e=r.jqxWidget.width,o=r.jqxWidget.height,r.jqxWidget.base&&(e==undefined&&(e=r.jqxWidget.base.width),o==undefined&&(o=r.jqxWidget.base.height)),e===undefined&&o===undefined&&(e=r.jqxWidget.element.style.width,o=r.jqxWidget.element.style.height),h=!1,e!=null&&e.toString().indexOf("%")!=-1&&(h=!0),o!=null&&o.toString().indexOf("%")!=-1&&(h=!0),n.jqx.isHidden(w))p(w)===-1&&(h||t===!0)&&u.data.nestedWidget!==!0&&f.hiddenWidgets.push(u);else if(t===undefined||t!==!0){if(h){if(u.callback(i),f.watchedElementData)for(s=0;s<f.watchedElementData.length;s++)if(f.watchedElementData[s].element==r.jqxWidget.element){f.watchedElementData[s].offsetWidth=r.jqxWidget.element.offsetWidth;f.watchedElementData[s].offsetHeight=r.jqxWidget.element.offsetHeight;break}f.hiddenWidgets.indexOf(u)>=0&&f.hiddenWidgets.splice(f.hiddenWidgets.indexOf(u),1)}if(r.jqxWidget.element&&(c=r.jqxWidget.element.className,(c.indexOf("dropdownlist")>=0||c.indexOf("datetimeinput")>=0||c.indexOf("combobox")>=0||c.indexOf("menu")>=0)&&r.jqxWidget.isOpened&&(b=r.jqxWidget.isOpened(),b))){if(i&&i=="resize"&&n.jqx.mobile.isTouchDevice())continue;r.jqxWidget.close()}}}y()}},!this.resizeHandlers)if(this.resizeHandlers=[],e=n(window),e.on){this._resizeTimer=null;this._initResize=null;e.on("resize.jqx",function(){f._resizeTimer!=undefined&&clearTimeout(f._resizeTimer);f._initResize?f._resizeTimer=setTimeout(function(){o(null,"resize")},n.jqx.resizeDelay):(f._initResize=!0,o(null,"resize"))});e.on("orientationchange.jqx",function(){o(null,"orientationchange")});e.on("orientationchanged.jqx",function(){o(null,"orientationchange")})}else e.bind("resize.jqx",function(){o(null,"orientationchange")}),e.bind("orientationchange.jqx",function(){o(null,"orientationchange")}),e.bind("orientationchanged.jqx",function(){o(null,"orientationchange")});s=t.data();u&&a===-1&&this.resizeHandlers.push({id:t[0].id,widget:t,callback:i,data:s});try{c=s.jqxWidget.width;l=s.jqxWidget.height;s.jqxWidget.base&&(c==undefined&&(c=s.jqxWidget.base.width),l==undefined&&(l=s.jqxWidget.base.height));c===undefined&&l===undefined&&(c=s.jqxWidget.element.style.width,l=s.jqxWidget.element.style.height);y=!1;c!=null&&c.toString().indexOf("%")!=-1&&(y=!0);l!=null&&l.toString().indexOf("%")!=-1&&(y=!0);y&&(this.watchedElementData||(this.watchedElementData=[]),f=this,w=function(){f.watchedElementData.forEach&&f.watchedElementData.forEach(function(t){(t.element.offsetWidth!==t.offsetWidth||t.element.offsetHeight!==t.offsetHeight)&&(t.offsetWidth=t.element.offsetWidth,t.offsetHeight=t.element.offsetHeight,t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){n.jqx.isHidden(n(t.element))?t.timer=setInterval(function(){n.jqx.isHidden(n(t.element))||(clearInterval(t.timer),t.callback())},100):t.callback()}))})},f.watchedElementData.push({element:t[0],offsetWidth:t[0].offsetWidth,offsetHeight:t[0].offsetHeight,callback:i}),f.observer||(f.observer=new MutationObserver(w),f.observer.observe(document.body,{attributes:!0,childList:!0,characterData:!0})))}catch(b){}n.jqx.isHidden(t)&&u===!0&&o(!0);n.jqx.resize=function(){o(null,"resize")}},parseJSON:function(t){if(!t||typeof t!="string")return null;if(t=n.trim(t),window.JSON&&window.JSON.parse)return window.JSON.parse(t);if(/^[\],:{}\s]*$/.test(t.replace(/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,"@").replace(/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return new Function("return "+t)();throw new Error("Invalid JSON: "+t);},html:function(t,i){if(!n(t).on)return n(t).html(i);try{return n.access(t,function(i){var r=t[0]||{},u=0,f=t.length;if(i===undefined)return r.nodeType===1?r.innerHTML.replace(rinlinejQuery,""):undefined;var e=new RegExp("<(?:abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video)[\\s/>]","i");if(typeof i=="string"&&!/<(?:script|style|link)/i.test(i)&&(n.support.htmlSerialize||!e.test(i))&&(n.support.leadingWhitespace||!/^\s+/.test(i))&&!{option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],area:[1,"<map>","<\/map>"],_default:[0,"",""]}[(/<([\w:]+)/.exec(i)||["",""])[1].toLowerCase()]){i=i.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1><\/$2>");try{for(;u<f;u++)r=this[u]||{},r.nodeType===1&&(n.cleanData(r.getElementsByTagName("*")),r.innerHTML=i);r=0}catch(o){}}r&&t.empty().append(i)},null,i,arguments.length)}catch(r){return n(t).html(i)}},hasTransform:function(t){var i="",r;if(i=t.css("transform"),i==""||i=="none")if(i=t.parents().css("transform"),i==""||i=="none")r=n.jqx.utilities.getBrowser(),r.browser=="msie"?(i=t.css("-ms-transform"),(i==""||i=="none")&&(i=t.parents().css("-ms-transform"))):r.browser=="chrome"?(i=t.css("-webkit-transform"),(i==""||i=="none")&&(i=t.parents().css("-webkit-transform"))):r.browser=="opera"?(i=t.css("-o-transform"),(i==""||i=="none")&&(i=t.parents().css("-o-transform"))):r.browser=="mozilla"&&(i=t.css("-moz-transform"),(i==""||i=="none")&&(i=t.parents().css("-moz-transform")));else return i!=""&&i!="none";return(i==""||i=="none")&&(i=n(document.body).css("transform")),i!=""&&i!="none"&&i!=null},getBrowser:function(){var n=navigator.userAgent.toLowerCase(),t=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[],i={browser:t[1]||"",version:t[2]||"0"};return n.indexOf("rv:11.0")>=0&&n.indexOf(".net4.0c")>=0&&(i.browser="msie",i.version="11",t[1]="msie"),n.indexOf("edge")>=0&&(i.browser="msie",i.version="12",t[1]="msie"),i[t[1]]=t[1],i}});n.jqx.browser=n.jqx.utilities.getBrowser();n.jqx.isHidden=function(n){if(!n||!n[0])return!1;var t=n[0].offsetWidth,i=n[0].offsetHeight;return t===0||i===0?!0:!1};n.jqx.ariaEnabled=!0;n.jqx.aria=function(t,i,r){if(n.jqx.ariaEnabled)if(i==undefined)n.each(t.aria,function(i,r){var u=t.base?t.base.host.attr(i):t.host.attr(i),f;if(u==undefined||n.isFunction(u)){u=t[r.name];n.isFunction(u)&&(u=t[r.name]());u==undefined&&(u="");try{t.base?t.base.host.attr(i,u.toString()):t.host.attr(i,u.toString())}catch(e){}}else{f=u;switch(r.type){case"number":f=new Number(u);isNaN(f)&&(f=u);break;case"boolean":f=u=="true"?!0:!1;break;case"date":f=new Date(u);(f=="Invalid Date"||isNaN(f))&&(f=u)}t[r.name]=f}});else try{t.host?t.base?t.base.host?t.base.host.attr(i,r.toString()):t.attr(i,r.toString()):t.host?t.element.setAttribute?t.element.setAttribute(i,r.toString()):t.host.attr(i,r.toString()):t.attr(i,r.toString()):t.setAttribute&&t.setAttribute(i,r.toString())}catch(u){}};Array.prototype.indexOf||(Array.prototype.indexOf=function(n){var i=this.length,t=Number(arguments[1])||0;for(t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=i);t<i;t++)if(t in this&&this[t]===n)return t;return-1});n.jqx.mobile=n.jqx.mobile||{};n.jqx.position=function(t){var r=parseInt(t.pageX),u=parseInt(t.pageY),f,i;return n.jqx.mobile.isTouchDevice()&&(f=n.jqx.mobile.getTouches(t),i=f[0],r=parseInt(i.pageX),u=parseInt(i.pageY)),{left:r,top:u}};n.extend(n.jqx.mobile,{_touchListener:function(n){var r=function(n,t){var i=document.createEvent("MouseEvents");return i.initMouseEvent(n,t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),i._pageX=t.pageX,i._pageY=t.pageY,i},i={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},u=r(i[n.type],n),t;n.target.dispatchEvent(u);t=n.target["on"+i[n.type]];typeof t=="function"&&t(n)},setMobileSimulator:function(t,i){var f,r,u;this.isTouchDevice()||(this.simulatetouches=!0,i==!1&&(this.simulatetouches=!1),f={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},r=this,window.addEventListener&&(u=function(){for(var n in f)t.addEventListener&&(t.removeEventListener(n,r._touchListener),t.addEventListener(n,r._touchListener,!1))},n.jqx.browser.msie?u():u()))},isTouchDevice:function(){var n,r,t,u;if(this.touchDevice!=undefined)return this.touchDevice;if((n="Browser CodeName: "+navigator.appCodeName+"",n+="Browser Name: "+navigator.appName+"",n+="Browser Version: "+navigator.appVersion+"",n+="Platform: "+navigator.platform+"",n+="User-agent header: "+navigator.userAgent+"",n.indexOf("Android")!=-1)||n.indexOf("IEMobile")!=-1||n.indexOf("Windows Phone")!=-1||n.indexOf("WPDesktop")!=-1||n.indexOf("ZuneWP7")!=-1||n.indexOf("BlackBerry")!=-1&&n.indexOf("Mobile Safari")!=-1||n.indexOf("ipod")!=-1||n.indexOf("nokia")!=-1||n.indexOf("Nokia")!=-1)return!0;if(n.indexOf("Chrome/17")!=-1||n.indexOf("CrOS")!=-1||n.indexOf("Opera")!=-1&&n.indexOf("Mobi")==-1&&n.indexOf("Mini")==-1&&n.indexOf("Platform: Win")!=-1)return!1;if(n.indexOf("HybridDeviceTouch")!=-1)return!0;if(n.indexOf("HybridDeviceMouse")!=-1)return!1;if(n.indexOf("Opera")!=-1&&n.indexOf("Mobi")!=-1&&n.indexOf("Opera Mobi")!=-1)return!0;if(n.indexOf("Mozilla/5.0 (X11; Linux x86_64)")!=-1)return!1;r={ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",blackberry:"BlackBerry(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/"};try{if(this.touchDevice!=undefined)return this.touchDevice;this.touchDevice=!1;for(i in r)if(r.hasOwnProperty(i)&&(prefix=r[i],match=n.match(new RegExp("(?:"+prefix+")([^\\s;]+)")),match))return i.toString()=="blackberry"?(this.touchDevice=!1,!1):(this.touchDevice=!0,!0);if(t=navigator.userAgent,navigator.platform.toLowerCase().indexOf("win")!=-1){if(t.indexOf("Windows Phone")>=0||t.indexOf("WPDesktop")>=0||t.indexOf("IEMobile")>=0||t.indexOf("ZuneWP7")>=0)return this.touchDevice=!0,!0;if(t.indexOf("Touch")>=0)return(u="MSPointerDown"in window||"pointerdown"in window,u)?(this.touchDevice=!0,!0):t.indexOf("ARM")>=0?(this.touchDevice=!0,!0):(this.touchDevice=!1,!1)}return navigator.platform.toLowerCase().indexOf("win")!=-1?(this.touchDevice=!1,!1):(("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(this.touchDevice=!0),this.touchDevice)}catch(f){return this.touchDevice=!1,!1}},getLeftPos:function(n){for(var t=n.offsetLeft;(n=n.offsetParent)!=null;)n.tagName!="HTML"&&(t+=n.offsetLeft,document.all&&(t+=n.clientLeft));return t},getTopPos:function(t){for(var r=t.offsetTop,u=n(t).coord(),i,f;(t=t.offsetParent)!=null;)t.tagName!="HTML"&&(r+=t.offsetTop-t.scrollTop,document.all&&(r+=t.clientTop));return(i=navigator.userAgent.toLowerCase(),f=(i.indexOf("windows phone")!=-1||i.indexOf("WPDesktop")!=-1||i.indexOf("ZuneWP7")!=-1||i.indexOf("msie 9")!=-1||i.indexOf("msie 11")!=-1||i.indexOf("msie 10")!=-1)&&i.indexOf("touch")!=-1,f)?u.top:this.isSafariMobileBrowser()?this.isSafari4MobileBrowser()&&this.isIPadSafariMobileBrowser()?r:i.indexOf("version/7")!=-1?u.top:((i.indexOf("version/6")!=-1||i.indexOf("version/5")!=-1)&&(r=r+n(window).scrollTop()),/(Android.*Chrome\/[.0-9]* (!?Mobile))/.exec(navigator.userAgent))?r+n(window).scrollTop():/(Android.*Chrome\/[.0-9]* Mobile)/.exec(navigator.userAgent)?r+n(window).scrollTop():u.top:r},isChromeMobileBrowser:function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("android")!=-1},isOperaMiniMobileBrowser:function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("opera mini")!=-1||n.indexOf("opera mobi")!=-1},isOperaMiniBrowser:function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("opera mini")!=-1},isNewSafariMobileBrowser:function(){var n=navigator.userAgent.toLowerCase(),t=n.indexOf("ipad")!=-1||n.indexOf("iphone")!=-1||n.indexOf("ipod")!=-1;return t&&n.indexOf("version/5")!=-1},isSafari4MobileBrowser:function(){var n=navigator.userAgent.toLowerCase(),t=n.indexOf("ipad")!=-1||n.indexOf("iphone")!=-1||n.indexOf("ipod")!=-1;return t&&n.indexOf("version/4")!=-1},isWindowsPhone:function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("windows phone")!=-1||n.indexOf("WPDesktop")!=-1||n.indexOf("ZuneWP7")!=-1||n.indexOf("msie 9")!=-1||n.indexOf("msie 11")!=-1||n.indexOf("msie 10")!=-1&&n.indexOf("touch")!=-1},isSafariMobileBrowser:function(){var n=navigator.userAgent.toLowerCase();return/(Android.*Chrome\/[.0-9]* (!?Mobile))/.exec(navigator.userAgent)?!0:/(Android.*Chrome\/[.0-9]* Mobile)/.exec(navigator.userAgent)?!0:n.indexOf("ipad")!=-1||n.indexOf("iphone")!=-1||n.indexOf("ipod")!=-1||n.indexOf("mobile safari")!=-1},isIPadSafariMobileBrowser:function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("ipad")!=-1},isMobileBrowser:function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("ipad")!=-1||n.indexOf("iphone")!=-1||n.indexOf("android")!=-1},getTouches:function(n){if(n.originalEvent){if(n.originalEvent.touches&&n.originalEvent.touches.length)return n.originalEvent.touches;if(n.originalEvent.changedTouches&&n.originalEvent.changedTouches.length)return n.originalEvent.changedTouches}return n.touches||(n.touches=[],n.touches[0]=n.originalEvent!=undefined?n.originalEvent:n,n.originalEvent!=undefined&&n.pageX&&(n.touches[0]=n),n.type=="mousemove"&&(n.touches[0]=n)),n.touches},getTouchEventName:function(n){if(this.isWindowsPhone()){var t=navigator.userAgent.toLowerCase();if(t.indexOf("windows phone 7")!=-1){if(n.toLowerCase().indexOf("start")!=-1)return"MSPointerDown";if(n.toLowerCase().indexOf("move")!=-1)return"MSPointerMove";if(n.toLowerCase().indexOf("end")!=-1)return"MSPointerUp"}if(n.toLowerCase().indexOf("start")!=-1)return"pointerdown";if(n.toLowerCase().indexOf("move")!=-1)return"pointermove";if(n.toLowerCase().indexOf("end")!=-1)return"pointerup"}else return n},dispatchMouseEvent:function(n,t,i){if(!this.simulatetouches){var r=document.createEvent("MouseEvent");r.initMouseEvent(n,!0,!0,t.view,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null);i!=null&&i.dispatchEvent(r)}},getRootNode:function(n){while(n.nodeType!==1)n=n.parentNode;return n},setTouchScroll:function(n,t){this.enableScrolling||(this.enableScrolling=[]);this.enableScrolling[t]=n},touchScroll:function(t,i,r,u,f,e){function ni(n){if(n.targetTouches&&n.targetTouches.length>=1)return n.targetTouches[0].clientY;if(n.originalEvent&&n.originalEvent.clientY!==undefined)return n.originalEvent.clientY;var t=o.getTouches(n);return t[0].clientY}function ti(n){if(n.targetTouches&&n.targetTouches.length>=1)return n.targetTouches[0].clientX;if(n.originalEvent&&n.originalEvent.clientX!==undefined)return n.originalEvent.clientX;var t=o.getTouches(n);return t[0].clientX}function ii(){var t,n;c&&(t=Date.now()-v,n=-c*Math.exp(-t/lt),n>.5||n<-.5?(d(st+n),requestAnimationFrame(ii)):d(st))}function ri(){var t,n;c&&(t=Date.now()-v,n=-c*Math.exp(-t/lt),n>.5||n<-.5?(g(ht+n),requestAnimationFrame(ri)):g(ht))}var d,g,vt,w,si,yt,pt,hi,wt;if(t!=null){var o=this,nt=0,tt=0,ui=0,it=0,rt=0,fi=0;this.scrolling||(this.scrolling=[]);this.scrolling[u]=!1;var ut=!1,s=n(t),ei=["select","input","textarea"],bt=0,oi=0;this.enableScrolling||(this.enableScrolling=[]);this.enableScrolling[u]=!0;var u=u,kt=this.getTouchEventName("touchstart")+".touchScroll",dt=this.getTouchEventName("touchend")+".touchScroll",gt=this.getTouchEventName("touchmove")+".touchScroll",y,l,a,h,ft,b,p,et,v,ot,c,st,ht,ct,lt;a=i;l=0;h=0;xoffset=0;initialOffset=0;initialXOffset=0;y=f.jqxScrollBar("max");lt=325;var at=function(){var n,t,i,r;n=Date.now();t=n-v;v=n;i=h-et;xdelta=xoffset-xframe;et=h;xframe=xoffset;b=!0;r=1e3*i/(1+t);xv=1e3*xdelta/(1+t);p=.8*r+.2*p;xjqxAnimations=.8*xv+.2*xjqxAnimations},k=!1,bt=function(t){function s(n){k=!1;b=!0;ft=ni(n);ct=ti(n);p=c=xjqxAnimations=0;et=h;xframe=xoffset;v=Date.now();clearInterval(ot);ot=setInterval(at,100);initialOffset=h;initialXOffset=xoffset;h>0&&h<a&&e[0].style.visibility!="hidden"}if(!o.enableScrolling[u])return!0;if(n.inArray(t.target.tagName.toLowerCase(),ei)===-1){h=e.jqxScrollBar("value");xoffset=f.jqxScrollBar("value");var r=o.getTouches(t),i=r[0];return r.length==1&&o.dispatchMouseEvent("mousedown",i,o.getRootNode(i.target)),y=f.jqxScrollBar("max"),a=e.jqxScrollBar("max"),s(t),ut=!1,tt=i.pageY,rt=i.pageX,o.simulatetouches&&i._pageY!=undefined&&(tt=i._pageY,rt=i._pageX),o.scrolling[u]=!0,nt=0,it=0,!0}};if(s.on)s.on(kt,bt);else s.bind(kt,bt);if(d=function(n,t){return h=n>a?a:n<l?l:n,r(null,n,0,0,t),n>a?"max":n<l?"min":"value"},g=function(n,t){return xoffset=n>y?y:n<l?l:n,r(n,null,0,0,t),n>y?"max":n<l?"min":"value"},vt=function(n){function p(n){var r,i,u,t;if(b){if(r=ni(n),u=ti(n),i=ft-r,xdelta=ct-u,t="value",i>2||i<-2)return(ft=r,t=d(h+i,n),at(),t=="min"&&initialOffset===0)?!0:t=="max"&&initialOffset===a?!0:c?(n.preventDefault(),n.stopPropagation(),k=!0,!1):!0;if(xdelta>2||xdelta<-2)return(ct=u,t=g(xoffset+xdelta,n),at(),t=="min"&&initialXOffset===0)?!0:t=="max"&&initialXOffset===y?!0:s?(k=!0,n.preventDefault(),n.stopPropagation(),!1):!0;n.preventDefault()}}var t,i,r,l,v,s,c;if(!o.enableScrolling[u]||!o.scrolling[u]||(k&&(n.preventDefault(),n.stopPropagation()),t=o.getTouches(n),t.length>1))return!0;i=t[0].pageY;r=t[0].pageX;o.simulatetouches&&t[0]._pageY!=undefined&&(i=t[0]._pageY,r=t[0]._pageX);l=i-tt;v=r-rt;oi=i;touchHorizontalEnd=r;ui=l-nt;fi=v-it;ut=!0;nt=l;it=v;s=f!=null?f[0].style.visibility!="hidden":!0;c=e!=null?e[0].style.visibility!="hidden":!0;(s||c)&&(s||c)&&p(n)},s.on)s.on(gt,vt);else s.bind(gt,vt);if(w=function(n){var t,i;if(!o.enableScrolling[u]||(t=o.getTouches(n)[0],!o.scrolling[u]))return!0;if(b=!1,clearInterval(ot),p>10||p<-10?(c=.8*p,st=Math.round(h+c),v=Date.now(),requestAnimationFrame(ii)):(xjqxAnimations>10||xjqxAnimations<-10)&&(c=.8*xjqxAnimations,ht=Math.round(xoffset+c),v=Date.now(),requestAnimationFrame(ri)),o.scrolling[u]=!1,ut)o.dispatchMouseEvent("mouseup",t,n.target);else return t=o.getTouches(n)[0],i=o.getRootNode(t.target),o.dispatchMouseEvent("mouseup",t,i),o.dispatchMouseEvent("click",t,i),!0},this.simulatetouches&&(si=n(window).on!=undefined||n(window).bind,yt=function(n){try{w(n)}catch(t){}o.scrolling[u]=!1},n(window).on!=undefined?n(document).on("mouseup.touchScroll",yt):n(document).bind("mouseup.touchScroll",yt),window.frameElement&&window.top!=null&&(pt=function(n){try{w(n)}catch(t){}o.scrolling[u]=!1},window.top.document&&(n(window.top.document).on?n(window.top.document).on("mouseup",pt):n(window.top.document).bind("mouseup",pt))),hi=n(document).on!=undefined||n(document).bind,wt=function(n){if(!o.scrolling[u])return!0;o.scrolling[u]=!1;var t=o.getTouches(n)[0],i=o.getRootNode(t.target);o.dispatchMouseEvent("mouseup",t,i);o.dispatchMouseEvent("click",t,i)},n(document).on!=undefined?n(document).on("touchend",wt):n(document).bind("touchend",wt)),s.on){s.on("dragstart",function(n){n.preventDefault()});s.on("selectstart",function(n){n.preventDefault()})}s.on?s.on(dt+" touchcancel.touchScroll",w):s.bind(dt+" touchcancel.touchScroll",w)}}});n.jqx.cookie=n.jqx.cookie||{};n.extend(n.jqx.cookie,{cookie:function(t,i,r){var f,u,e,o;return arguments.length>1&&String(i)!=="[object Object]"?(r=n.extend({},r),(i===null||i===undefined)&&(r.expires=-1),typeof r.expires=="number"&&(f=r.expires,u=r.expires=new Date,u.setDate(u.getDate()+f)),i=String(i),document.cookie=[encodeURIComponent(t),"=",r.raw?i:encodeURIComponent(i),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")):(r=i||{},o=r.raw?function(n){return n}:decodeURIComponent,(e=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?o(e[1]):null)}});n.jqx.string=n.jqx.string||{};n.extend(n.jqx.string,{replace:function(n,t,i){if(t===i)return this;for(var r=n,u=r.indexOf(t);u!=-1;)r=r.replace(t,i),u=r.indexOf(t);return r},contains:function(n,t){return n==null||t==null?!1:n.indexOf(t)!=-1},containsIgnoreCase:function(n,t){return n==null||t==null?!1:n.toString().toUpperCase().indexOf(t.toString().toUpperCase())!=-1},equals:function(n,t){return n==null||t==null?!1:(n=this.normalize(n),t.length==n.length)?n.slice(0,t.length)==t:!1},equalsIgnoreCase:function(n,t){return n==null||t==null?!1:(n=this.normalize(n),t.length==n.length)?n.toUpperCase().slice(0,t.length)==t.toUpperCase():!1},startsWith:function(n,t){return n==null||t==null?!1:n.slice(0,t.length)==t},startsWithIgnoreCase:function(n,t){return n==null||t==null?!1:n.toUpperCase().slice(0,t.length)==t.toUpperCase()},normalize:function(n){return n.charCodeAt(n.length-1)==65279&&(n=n.substring(0,n.length-1)),n},endsWith:function(n,t){return n==null||t==null?!1:(n=this.normalize(n),n.slice(-t.length)==t)},endsWithIgnoreCase:function(n,t){return n==null||t==null?!1:(n=this.normalize(n),n.toUpperCase().slice(-t.length)==t.toUpperCase())}});n.extend(n.easing,{easeOutBack:function(n,t,i,r,u,f){return f==undefined&&(f=1.70158),r*((t=t/u-1)*t*((f+1)*t+f)+1)+i},easeInQuad:function(n,t,i,r,u){return r*(t/=u)*t+i},easeInOutCirc:function(n,t,i,r,u){return(t/=u/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+i:r/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInOutSine:function(n,t,i,r,u){return-r/2*(Math.cos(Math.PI*t/u)-1)+i},easeInCubic:function(n,t,i,r,u){return r*(t/=u)*t*t+i},easeOutCubic:function(n,t,i,r,u){return r*((t=t/u-1)*t*t+1)+i},easeInOutCubic:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i},easeInSine:function(n,t,i,r,u){return-r*Math.cos(t/u*(Math.PI/2))+r+i},easeOutSine:function(n,t,i,r,u){return r*Math.sin(t/u*(Math.PI/2))+i},easeInOutSine:function(n,t,i,r,u){return-r/2*(Math.cos(Math.PI*t/u)-1)+i}})}(jqxBaseFramework),function(n){n.event&&n.event.special&&n.extend(n.event.special,{close:{noBubble:!0},open:{noBubble:!0},cellclick:{noBubble:!0},rowclick:{noBubble:!0},tabclick:{noBubble:!0},selected:{noBubble:!0},expanded:{noBubble:!0},collapsed:{noBubble:!0},valuechanged:{noBubble:!0},expandedItem:{noBubble:!0},collapsedItem:{noBubble:!0},expandingItem:{noBubble:!0},collapsingItem:{noBubble:!0}});n.fn.extend&&n.fn.extend({ischildof:function(t){var r,i,u;if(!n(this).parents)return t.element.contains(this.element);for(r=n(this).parents().get(),i=0;i<r.length;i++)if(typeof t!="string"){if(u=r[i],t!==undefined&&u==t[0])return!0}else if(t!==undefined&&n(r[i]).is(t))return!0;return!1}});n.fn.jqxProxy=function(){var t=n(this).data().jqxWidget,r=Array.prototype.slice.call(arguments,0),i=t.element;return i||(i=t.base.element),n.jqx.jqxWidgetProxy(t.widgetName,i,r)};var t=this.originalVal=n.fn.val;n.fn.val=function(i){var r;return typeof i=="undefined"?n(this).hasClass("jqx-widget")&&(r=n(this).data().jqxWidget,r&&r.val)?r.val():this[0]&&this[0].tagName.toLowerCase().indexOf("angular")>=0&&(r=n(this).find(".jqx-widget").data().jqxWidget,r&&r.val)?r.val():t.call(this):n(this).hasClass("jqx-widget")&&(r=n(this).data().jqxWidget,r&&r.val)?arguments.length!=2?r.val(i):r.val(i,arguments[1]):this[0]&&this[0].tagName.toLowerCase().indexOf("angular")>=0&&(r=n(this).find(".jqx-widget").data().jqxWidget,r&&r.val)?arguments.length!=2?r.val(i):r.val(i,arguments[1]):t.call(this,i)};n.fn.modal&&n.fn.modal.Constructor&&(n.fn.modal.Constructor.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(t){if(this.$element[0]!==t.target&&!this.$element.has(t.target).length){if(n(t.target).parents().hasClass("jqx-popup"))return!0;this.$element.trigger("focus")}},this))});n.fn.coord=function(t){var i,f,u={top:0,left:0},r=this[0],e=r&&r.ownerDocument,h,s;if(e){if(i=e.documentElement,!n.contains(i,r))return u;typeof r.getBoundingClientRect!==undefined&&(u=r.getBoundingClientRect());h=function(t){return n.isWindow(t)?t:t.nodeType===9?t.defaultView||t.parentWindow:!1};f=h(e);var o=0,c=0,l=navigator.userAgent.toLowerCase(),a=l.indexOf("ipad")!=-1||l.indexOf("iphone")!=-1;return a&&(o=2),!0==t&&document.body.style.position!="static"&&document.body.style.position!=""&&(s=n(document.body).coord(),o=-s.left,c=-s.top),{top:c+u.top+(f.pageYOffset||i.scrollTop)-(i.clientTop||0),left:o+u.left+(f.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}}};n.jqx.ripplers=[];n.jqx.ripple=function(t,i,r){var u,a,f,o,e,h,s,c,l;for(i||(i=t),u=n(t),a=!1,u.append("<span class='ink'><\/span>"),f=u.find(".ink"),o=!1,e=0;e<n.jqx.ripplers.length;e++)if(h=n.jqx.ripplers[e],h.element[0]===t[0]){o=!0;break}if(o||n.jqx.ripplers.push({ink:f,element:t,hostElement:i,hostElementType:r}),(r==="checkbox"||r==="radiobutton")&&(s=Math.max(u.outerWidth(),u.outerHeight()),f.css({height:s,width:s}),c=u.width()/2-f.width()/2,l=u.height()/2-f.height()/2,f.css({top:l+"px",left:c+"px"})),n.jqx.ripplers.length===1)n(document).on("mouseup",function(){var i,t;for(n.jqx.ripple.mouseCaptured=!1,i=0;i<n.jqx.ripplers.length;i++)t=n.jqx.ripplers[i],t.ink.removeClass("active"),t.element.removeClass("active"),r!=="checkbox"&&r!=="radiobutton"&&t.ink.hasClass("animate")&&t.ink.removeClass("animate")});i.off("mousedown.ripple");i.on("mousedown.ripple",function(u){var f=n(t);n.jqx.ripple.mouseCaptured=!0;setTimeout(function(){var e,h,o,s;if(f.find(".ink").length==0&&f.append("<span class='ink'><\/span>"),e=f.find(".ink"),e.removeClass("animate"),e.height()||e.width()||(h=Math.max(f.outerWidth(),f.outerHeight()),e.css({height:h,width:h})),r==="checkbox"||r==="radiobutton"){if(r==="checkbox"&&i.jqxCheckBox("disabled"))return;if(r==="radiobutton"&&i.jqxRadioButton("disabled"))return;o=f.width()/2-e.width()/2;s=f.height()/2-e.height()/2;e.css({top:s+"px",left:o+"px"}).addClass("animate");e.on("animationend",function(){n.jqx.ripple.mouseCaptured&&(e.removeClass("animate"),e.addClass("active"),t.addClass("active"))});return}o=u.pageX-f.offset().left-e.width()/2;s=u.pageY-f.offset().top-e.height()/2;e.css({top:s+"px",left:o+"px"}).addClass("animate")})})}}(jqxBaseFramework),function(n){function v(t){return function(i,r){typeof i!="string"&&(r=i,i="*");var u,o,f,s=i.toLowerCase().split(c),e=0,h=s.length;if(n.isFunction(r))for(;e<h;e++)u=s[e],f=/^\+/.test(u),f&&(u=u.substr(1)||"*"),o=t[u]=t[u]||[],o[f?"unshift":"push"](r)}}function u(n,t,i,r,f,e){f=f||t.dataTypes[0];e=e||{};e[f]=!0;for(var s,h=n[f],c=0,a=h?h.length:0,l=n===o;c<a&&(l||!s);c++)s=h[c](t,i,r),typeof s=="string"&&(!l||e[s]?s=undefined:(t.dataTypes.unshift(s),s=u(n,t,i,r,s,e)));return!l&&s||e["*"]||(s=u(n,t,i,r,"*",e)),s}function y(t,i){var r,u,f=n.jqx.data.ajaxSettings.flatOptions||{};for(r in i)i[r]!==undefined&&((f[r]?t:u||(u={}))[r]=i[r]);u&&n.extend(!0,t,u)}function it(n,t,i){var e,r,f,o,s=n.contents,u=n.dataTypes,h=n.responseFields;for(r in h)r in i&&(t[h[r]]=i[r]);while(u[0]==="*")u.shift(),e===undefined&&(e=n.mimeType||t.getResponseHeader("content-type"));if(e)for(r in s)if(s[r]&&s[r].test(e)){u.unshift(r);break}if(u[0]in i)f=u[0];else{for(r in i){if(!u[0]||n.converters[r+" "+u[0]]){f=r;break}o||(o=r)}f=f||o}if(f)return f!==u[0]&&u.unshift(f),i[f]}function rt(n,t){var i,o,r,e,s=n.dataTypes.slice(),f=s[0],u={},h=0;if(n.dataFilter&&(t=n.dataFilter(t,n.dataType)),s[1])for(i in n.converters)u[i.toLowerCase()]=n.converters[i];for(;r=s[++h];)if(r!=="*"){if(f!=="*"&&f!==r){if(i=u[f+" "+r]||u["* "+r],!i)for(o in u)if(e=o.split(" "),e[1]===r&&(i=u[f+" "+e[0]]||u["* "+e[0]],i)){i===!0?i=u[o]:u[o]!==!0&&(r=e[0],s.splice(h--,0,r));break}if(i!==!0)if(i&&n.throws)t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function b(){try{return new window.XMLHttpRequest}catch(n){}}function et(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(n){}}var r,e,w;n.jqx.observableArray=function(t,i){var e,r,f,u,i;return typeof t=="string"&&(t=n.parseJSON(t)),Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(n){return!1}}()||(e=Object.defineProperty,Object.defineProperty=function(n,t,i){if(e)try{return e(n,t,i)}catch(r){}if(n!==Object(n))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in i&&Object.prototype.__defineGetter__.call(n,t,i.get),Object.prototype.__defineSetter__&&"set"in i&&Object.prototype.__defineSetter__.call(n,t,i.set),"value"in i?n[t]=i.value:n[t]||(n[t]=i),n}),Array.prototype.forEach||(Array.prototype.forEach=function(n){var i,r,u,t;if(this===void 0||this===null)throw TypeError();if(i=Object(this),r=i.length>>>0,typeof n!="function")throw TypeError();for(u=arguments[1],t=0;t<r;t++)t in i&&n.call(u,i[t],t,i)}),typeof Object.getOwnPropertyNames!="function"&&(Object.getOwnPropertyNames=function(n){if(n!==Object(n))throw TypeError("Object.getOwnPropertyNames called on non-object");var t=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(i);return t}),r=this,u=[],r.notifier=null,r.name="observableArray",r.observing=!0,r.changes=[],i=i,r.observe=function(){r.observing=!0;arguments.length==1&&(i=arguments[0])},r.unobserve=function(){r.observing=!1},r.toArray=function(){return u.slice(0)},r.toJSON=function(n,t){function s(n){return'"'+n.replace(e,function(n){var t=o[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"'}function i(n){return n<10?"0"+n:n}function h(n){return isFinite(n.valueOf())?n.getUTCFullYear()+"-"+i(n.getUTCMonth()+1)+"-"+i(n.getUTCDate())+"T"+i(n.getUTCHours())+":"+i(n.getUTCMinutes())+":"+i(n.getUTCSeconds())+'Z"':"null"}function c(n){for(var r=n.length,i=[],t=0;t<r;t++)i.push(f(t,n)||"null");return"["+i.join(",")+"]"}function l(t){var u=[],i,r;for(i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(i!=""&&n&&n.indexOf(i)===-1)continue;r=f(i,t);r&&u.push(s(i)+":"+r)}return"{"+u.join(",")+"}"}function a(n){switch(Object.prototype.toString.call(n)){case"[object Date]":return h(n);case"[object Array]":return c(n)}return l(n)}function v(n,t){switch(t){case"string":return s(n);case"number":case"float":case"integer":case"int":return isFinite(n)?n:"null";case"boolean":return n}return"null"}function f(n,t){var i=t[n],r=typeof i;return i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(n),r=typeof i),/(number|float|int|integer|string|boolean)/.test(r)||!i&&r==="object"?v(i,r):a(i)}var r=u,e,o;return(t&&(r=t),e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},!n&&window.JSON&&typeof window.JSON.stringify=="function")?window.JSON.stringify(r):f("",{"":r})},r.defineIndexProperty=function(t){if(!(t in r)){var e=function(t,i,e,o){var s=t[i],h=s,c=function(){return h},l=function(t){var e;if(s=t,h!==s&&(e=h,h=s,typeof f=="function")){var c=u.indexOf(o),l="",a=function(t,r){Object.getOwnPropertyNames(t).forEach(function(u){var f=n.type(t[u]);f=="array"||f=="object"?a(t[u],r+"."+u):i===u&&(l=r+"."+u)})};a(o,c);f({object:r,type:"update",path:l,index:c,name:i,newValue:s,oldValue:e})}return h=s,s};t[i]!=undefined&&i!="length"&&(Object.defineProperty?Object.defineProperty(t,i,{get:c,set:l}):Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__&&(Object.prototype.__defineGetter__.call(t,i,c),Object.prototype.__defineSetter__.call(t,i,l)))},i=function(t,r,u){var f=n.type(t);/(number|float|int|integer|string|boolean)/.test(f)||t!==undefined&&Object.getOwnPropertyNames(t).forEach(function(f){var o=n.type(t[f]);o=="array"||o=="object"?(e(t,f,r+"."+f,u),i(t[f],r+"."+f,u)):e(t,f,r+"."+f,u)})};Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){return u[t]},set:function(n){var e=u[t];r.toJSON(null,e)!=r.toJSON(null,n)&&(u[t]=n,typeof f=="function"&&f({object:r,type:"update",path:t.toString(),index:t,name:"index",newValue:n,oldValue:e}),i(n,t,n))}});i(r[t],t,r[t])}},r.push=function(){for(var n,t=0,i=arguments.length;t<i;t++)n=u.length,u.push(arguments[t]),r.defineIndexProperty(n),typeof f=="function"&&f({object:r,type:"add",name:"length",index:n,newValue:u.length,oldValue:n});return u.length},r.pop=function(){if(~u.length){var n=u.length-1,t=u.pop();return delete r[n],typeof f=="function"&&f({object:r,type:"delete",name:"length",index:n,newValue:u.length,oldValue:n}),t}},r.unshift=function(){for(var t=u.length,n=0,i=arguments.length;n<i;n++)u.splice(n,0,arguments[n]),r.defineIndexProperty(u.length-1);return typeof f=="function"&&f({object:r,type:"add",index:0,name:"length",newValue:u.length,oldValue:t}),u.length},r.shift=function(){var n=u.length,t;if(~u.length)return t=u.shift(),u.length===0&&delete r[n],typeof f=="function"&&f({object:r,type:"delete",index:n,name:"length",newValue:u.length,oldValue:n}),t},r.slice=function(t,i,r){var f=u.slice(t,i);return new n.jqx.observableArray(f,r)},r.splice=function(t,i,e){var s=[],h,o,c;for(t=~t?t:u.length-t,i=(i==null?u.length-t:i)||0;i--;)h=u.splice(t,1)[0],s.push(h),delete r[u.length],typeof f=="function"&&f({object:r,type:"delete",index:t,name:"length",newValue:-1,oldValue:t});for(o=2,c=arguments.length;o<c;o++)u.splice(t,0,arguments[o]),defineIndexProperty(u.length-1),typeof f=="function"&&f({object:r,type:"add",index:t,name:"length",newValue:u.length-1,oldValue:t}),t++;return new n.jqx.observableArray(s,e)},Object.defineProperty(r,"length",{configurable:!1,enumerable:!0,get:function(){return u.length},set:function(n){var t=Number(n);if(t%1==0&&t>=0)t<u.length?r.splice(t):t>u.length&&r.push.apply(r,new Array(t-u.length));else throw new RangeError("Invalid array length");return n}}),n.jqx.observableArray.prototype.fromArray=function(t,i){return new n.jqx.observableArray(t,i)},n.jqx.observableArray.prototype.clone=function(){var t=new n.jqx.observableArray(u,i);return t.observing=r.observing,t.changes=r.changes,t.notifier=r.notifier,t},r.remove=function(n){if(n<0||n>=r.length)throw new Error("Invalid index : "+n);if(r.hasOwnProperty(n)){var t=r[n];return r[n]=undefined,u[n]=undefined,typeof f=="function"&&f({object:r,type:"delete",index:n,name:"index",newValue:undefined,oldValue:t}),!0}return!1},r.concat=function(t,i){var r=u.concat(t);return new n.jqx.observableArray(r,i)},Object.getOwnPropertyNames(Array.prototype).forEach(function(n){if(!(n in r)){var t=function(){var f=r.observing,t,i;return r.observing=!1,t=u[n],i=t.apply(u,arguments),r.observing=f,i};Object.defineProperty(r,n,{configurable:!1,enumerable:!0,writeable:!1,value:t})}}),r.set=function(t,i){var f,e,u;if(n.type(t)=="string"&&t.split(".").length>1){for(f=t.split("."),e=r,u=0;u<f.length;u++){if(u===0&&f[u]>=r.length)throw new Error("Invalid Index: "+t);u<f.length-1?e=e[f[u]]:e[f[u]]=i}return!0}return t>=r.length?r.push(i):r[t]=i,!0},r.get=function(n){return r[n]},t instanceof Array&&r.push.apply(r,t),f=function(){r.observing&&(arguments&&arguments[0]&&r.changes.push(arguments[0]),i&&i.apply(r,arguments),r.notifier&&r.notifier.apply(r,arguments))},r};n.jqx.formatDate=function(t,i,r){return n.jqx.dataFormat.formatdate(t,i,r)};n.jqx.formatNumber=function(t,i,r){return n.jqx.dataFormat.formatnumber(t,i,r)};n.jqx.dataAdapter=function(t,i){var u,r;t!=undefined&&(t.dataFields!==undefined&&(t.datafields=t.dataFields),t.dataType!==undefined&&(t.datatype=t.dataType),t.localData!==undefined&&(t.localdata=t.localData),t.sortColumn!==undefined&&(t.sortcolumn=t.sortColumn),t.sortDirection!==undefined&&(t.sortdirection=t.sortDirection),t.sortColumns!==undefined&&(t.sortcolumns=t.sortColumns),t.sortDirections!==undefined&&(t.sortdirections=t.sortDirections),t.sortOrder!==undefined&&(t.sortdirection=t.sortOrder),t.formatData!==undefined&&(t.formatdata=t.formatData),t.processData!==undefined&&(t.processdata=t.processData),t.pageSize!==undefined&&(t.pagesize=t.pageSize),t.pageNum!==undefined&&(t.pagenum=t.pageNum),t.updateRow!==undefined&&(t.updaterow=t.updateRow),t.addRow!==undefined&&(t.addrow=t.addRow),t.deleteRow!==undefined&&(t.deleterow=t.deleteRow),t.contentType!==undefined&&(t.contenttype=t.contentType),t.totalRecords!=undefined&&(t.totalrecords=t.totalRecords),t.loadError!=undefined&&(t.loadError=t.loadError),t.sortComparer!=undefined&&(t.sortcomparer=t.sortComparer));this._source=t;this._options=i||{};t.beforeLoadComplete!=undefined&&(this._options.beforeLoadComplete=this._source.beforeLoadComplete);t.downloadComplete!=undefined&&(this._options.downloadComplete=this._source.downloadComplete);t.loadComplete!=undefined&&(this._options.loadComplete=this._source.loadComplete);t.autoBind!=undefined&&(this._options.downloadComplete=this._source.autoBind);t.formatData!=undefined&&(this._options.formatData=this._source.formatData);t.loadError!=undefined&&(this._options.loadError=this._source.loadError);t.beforeSend!=undefined&&(this._options.beforeSend=this._source.beforeSend);t.contentType!=undefined&&(this._options.contentType=this._source.contentType);t.async!=undefined&&(this._options.async=this._source.async);t.loadServerData!=undefined&&(this._options.loadServerData=this._source.loadServerData);t.uniqueDataFields!=undefined&&(this._options.uniqueDataFields=this._source.uniqueDataFields);this.records=[];this._downloadComplete=[];this._bindingUpdate=[];t!=undefined&&t.localdata!=null&&typeof t.localdata=="function"&&(u=t.localdata(),u!=null&&(t._localdata=t.localdata,r=this,t._localdata.subscribe&&(r._oldlocaldata=[],t._localdata.subscribe(function(t){var i=function(t){return n.isArray(t)?n.makeArray(i(n(t))):n.extend(!0,{},t)};(r.suspendKO==!1||r.suspendKO==undefined||r._oldlocaldata.length==0)&&(r._oldlocaldata=i(t))},t._localdata,"beforeChange"),t._localdata.subscribe(function(n){if(r.suspendKO==!1||r.suspendKO==undefined){var i="";r._oldrecords=r.records;r._oldlocaldata.length==0&&(t.localdata=t._localdata());r._oldlocaldata.length==0?i="change":n&&(r._oldlocaldata.length==n.length&&(i="update"),r._oldlocaldata.length>n.length&&(i="remove"),r._oldlocaldata.length<n.length&&(i="add"));r.dataBind(null,i)}},t._localdata,"change"),r._knockoutdatasource=!0),t.localdata=u));this._options.autoBind==!0&&this.dataBind()};n.jqx.dataAdapter.prototype={getrecords:function(){return this.records},beginUpdate:function(){this.isUpdating=!0},endUpdate:function(n){this.isUpdating=!1;n!=!1&&(this._changedrecords&&this._changedrecords.length>0?(this.callBindingUpdate("update"),this._changedrecords=[]):this.dataBind(null,""))},formatDate:function(t,i,r){return n.jqx.dataFormat.formatdate(t,i,r)},formatNumber:function(t,i,r){return n.jqx.dataFormat.formatnumber(t,i,r)},dataBind:function(t,i){var r,f,w,u,s,tt,b,o,k,ot,a,it,d,h,e,g,y,c,st,p,l,v,rt,ut,nt,ft,et;if(this.isUpdating!=!0&&(r=this._source,r)){if(r.generatedfields&&(r.datafields=null,r.generatedfields=null),n.jqx.dataFormat.datescache=[],r.dataFields!=null&&(r.datafields=r.dataFields),r.recordstartindex==undefined&&(r.recordstartindex=0),r.recordendindex==undefined&&(r.recordendindex=0),r.loadallrecords==undefined&&(r.loadallrecords=!0),r.root==undefined&&(r.root=""),r.record==undefined&&(r.record=""),r.sort!=undefined&&(this.sort=r.sort),this.filter=r.filter!=undefined?r.filter:null,r.sortcolumn!=undefined&&(this.sortcolumn=r.sortcolumn),r.sortdirection!=undefined&&(this.sortdirection=r.sortdirection),r.sortcolumns!=undefined&&(this.sortcolumns=r.sortcolumns),r.sortdirections!=undefined&&(this.sortdirections=r.sortdirections),r.sortcomparer!=undefined&&(this.sortcomparer=r.sortcomparer),this.records=[],f=this._options||{},this.virtualmode=f.virtualmode!=undefined?f.virtualmode:!1,this.totalrecords=f.totalrecords!=undefined?f.totalrecords:0,this.pageable=f.pageable!=undefined?f.pageable:!1,this.pagesize=f.pagesize!=undefined?f.pagesize:0,this.pagenum=f.pagenum!=undefined?f.pagenum:0,this.cachedrecords=f.cachedrecords!=undefined?f.cachedrecords:[],this.originaldata=[],this.recordids=[],this.updaterow=f.updaterow!=undefined?f.updaterow:null,this.addrow=f.addrow!=undefined?f.addrow:null,this.deleterow=f.deleterow!=undefined?f.deleterow:null,this.cache=f.cache!=undefined?f.cache:!1,this.unboundmode=!1,r.formatdata!=undefined&&(f.formatData=r.formatdata),r.data!=undefined&&(f.data==undefined&&(f.data={}),n.extend(f.data,r.data)),r.mapChar!=undefined&&(r.mapchar=r.mapChar),this.mapChar=r.mapchar!=undefined?r.mapchar?r.mapchar:">":f.mapChar?f.mapChar:">",(f.unboundmode||r.unboundmode)&&(this.unboundmode=f.unboundmode||r.unboundmode),r.cache!=undefined&&(this.cache=r.cache),this.koSubscriptions)for(w=0;w<this.koSubscriptions.length;w++)this.koSubscriptions[w].dispose();this.koSubscriptions=[];this.pagenum<0&&(this.pagenum=0);u=this;s=r.datatype;(r.datatype==="csv"||r.datatype==="tab"||r.datatype==="tsv"||r.datatype=="text")&&(s="text");tt=f.async!=undefined?f.async:!0;r.async!=undefined&&(tt=r.async);switch(s){case"local":case"array":case"observablearray":case"observableArray":default:if(r.localdata==undefined&&r.length)for(r.localdata=[],e=0;e<r.length;e++)r.localdata[r.localdata.length]=r[e],r[e].uid=e;if(r.beforeprocessing&&n.isFunction(r.beforeprocessing)&&r.beforeprocessing(r.localdata),h=r.localdata.length,this.totalrecords=this.virtualmode?r.totalrecords||h:h,this.unboundmode&&(this.totalrecords=this.unboundmode?r.totalrecords||h:h,o=r.datafields?r.datafields.length:0,o>0))for(e=0;e<this.totalrecords;e++){for(a={},b=0;b<o;b++)a[r.datafields[b].name]="";a.uid=e;r.localdata[r.localdata.length]=a}if(this.totalrecords==undefined&&(this.totalrecords=0),o=r.datafields?r.datafields.length:0,k=function(t,i){for(var e,f,s,o,h,a,c={},l=0;l<i;l++)if(e=r.datafields?r.datafields[l]:{},f="",undefined!=e&&e!=null){if(e.map){if(n.isFunction(e.map))f=e.map(t);else if(s=e.map.split(u.mapChar),s.length>0){for(o=t,h=0;h<s.length;h++)o&&(o=o[s[h]]);f=o}else f=t[e.map];f!=undefined&&f!=null?f=f.toString():f==undefined&&f!=null&&(f="")}a=!1;f==""&&(a=!0,f=t[e.name],f!=undefined&&f!=null&&(r._localdata&&f.subscribe?f=f():e.type!="array"&&(e.type==="date"?f&&f instanceof Date&&(f=f):f=f.toString())));f=="[object Object]"&&e.map&&a&&(f="");f=u.getvaluebytype(f,e);e.displayname!=undefined?c[e.displayname]=f:c[e.name]=f}return c},r._localdata){if(this._changedrecords=[],this.records=[],ot=r._localdata(),n.each(ot,function(t,f){var l,c,a;if(typeof f=="string")u.records.push(f);else{var e={},h=0,s=this;n.each(this,function(i){var a=null,v="string",l=i,b,d,k,c,g,nt,f,y,p,w;if(o>0){for(b=!1,d=!1,k=0;k<o;k++)if(c=r.datafields[k],c!=undefined&&c.name==i){b=!0;a=c.map;v=c.type;l=c.name;break}else if(c!=undefined&&c.map&&c.map.indexOf(i)>=0){if(b=!0,a=c.map,v=c.type,l=c.name,d=!0,f=s[i],a!=null)if(y=a.split(u.mapChar),y.length>0){for(p=s,w=0;w<y.length;w++)p=p[y[w]];f=p}else f=s[a];v!="string"&&(f=u.getvaluebytype(f,{type:v}));e[l]=f;e[l]!=undefined&&(h+=e[l].toString().length+e[l].toString().substr(0,1))}if(!b||d)return!0}if(g=n.isFunction(s[i]),g)f=s[i](),v!="string"&&(f=u.getvaluebytype(f,{type:v})),e[i]=f,s[i].subscribe&&(nt=t,u.koSubscriptions[u.koSubscriptions.length]=s[i].subscribe(function(n){var r=nt,t;if(e[i]=n,t={index:r,oldrecord:e,record:e},u._changedrecords.push(t),!u.isUpdating)return u.callBindingUpdate("update"),u._changedrecords=[],!1}));else{if(f=s[i],a!=null)if(y=a.split(u.mapChar),y.length>0){for(p=s,w=0;w<y.length;w++)p=p[y[w]];f=p}else f=s[a];v!="string"&&(f=u.getvaluebytype(f,{type:v}));e[l]=f;e[l]!=undefined&&(h+=e[l].toString().length+e[l].toString().substr(0,1))}});l=u.getid(r.id,s,t);e.uid=l;u.records.push(e);e._koindex=h;u._oldrecords&&(c=u.records.length-1,i=="update"&&u._oldrecords[c]._koindex!=h&&(a={index:c,oldrecord:u._oldrecords[c],record:e},u._changedrecords.push(a)))}}),i=="add")for(h=u.records.length,e=0;e<h;e++){for(a=u.records[e],it=!1,d=0;d<u._oldrecords.length;d++)if(u._oldrecords[d]._koindex===a._koindex){it=!0;break}it||u._changedrecords.push({index:e,oldrecord:null,record:a,position:e!=0?"last":"first"})}else if(i=="remove")for(h=u._oldrecords.length,e=0;e<h;e++)g=u._oldrecords[e],u.records[e]?u.records[e]._koindex!=g._koindex&&u._changedrecords.push({index:e,oldrecord:g,record:null}):u._changedrecords.push({index:e,oldrecord:g,record:null})}else n.isArray(r.localdata)?o==0?(y=0,c=[],n.each(r.localdata,function(t,i){var e=new Object(this),f,s,l,h;if(typeof i=="string")return u.records=r.localdata,!1;if(f=u.getid(r.id,e,t),typeof f=="object"&&(f=t),e.uid=f,t==0){for(s in this)y++,l=n.type(this[s]),c.push({name:s,type:l});o=y;r.datafields=c;r.generatedfields=c}o>0?(h=k(e,o),h.uid=f,u.records[u.records.length]=h):u.records[u.records.length]=e})):n.each(r.localdata,function(n){var t=this,f=k(t,o),i=u.getid(r.id,f,n);typeof i=="object"&&(i=n);t=new Object(f);t.uid=i;u.records[u.records.length]=t}):(this.records=[],y=0,c=[],n.each(r.localdata,function(t){var e=u.getid(r.id,this,t),i,s,h,f;if(o==0&&!(typeof this=="string"||this instanceof String)){for(i in this)y++,s=n.type(this[i]),c.push({name:i,type:s});o=y;r.datafields=c;r.generatedfields=c}o>0?(h=this,f=k(h,o),f.uid=e,u.records[u.records.length]=f):(this.uid=e,u.records[u.records.length]=this)}));this.originaldata=r.localdata;this.cachedrecords=this.records;this.addForeignValues(r);f.uniqueDataFields&&(p=this.getUniqueRecords(this.records,f.uniqueDataFields),this.records=p,this.cachedrecords=p);f.beforeLoadComplete&&(l=f.beforeLoadComplete(u.records,this.originaldata),l!=undefined&&(u.records=l,u.cachedrecords=l));f.autoSort&&f.autoSortField&&(st=Object.prototype.toString,Object.prototype.toString=typeof field=="function"?field:function(){return this[f.autoSortField]},u.records.sort(function(t,i){if(t===undefined&&(t=null),i===undefined&&(i=null),t===null&&i===null)return 0;if(t===null&&i!==null)return 1;if(t!==null&&i===null)return-1;if(t=t.toString(),i=i.toString(),t===null&&i===null)return 0;if(t===null&&i!==null)return 1;if(t!==null&&i===null)return-1;if(n.jqx.dataFormat.isNumber(t)&&n.jqx.dataFormat.isNumber(i)||n.jqx.dataFormat.isDate(t)&&n.jqx.dataFormat.isDate(i))return t<i?-1:t>i?1:0;n.jqx.dataFormat.isNumber(t)||n.jqx.dataFormat.isNumber(i)||(t=String(t).toLowerCase(),i=String(i).toLowerCase());try{if(t<i)return-1;if(t>i)return 1}catch(r){var u=r}return 0}),Object.prototype.toString=st);u.loadedData=r.localdata;u.buildHierarchy();n.isFunction(f.loadComplete)&&f.loadComplete(r.localdata,u.records);break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"ics":if(r.localdata!=null&&!r.url){n.isFunction(r.beforeprocessing)&&r.beforeprocessing(r.localdata);r.datatype==="xml"?u.loadxml(r.localdata,r.localdata,r):s==="text"?u.loadtext(r.localdata,r):s==="ics"?u.loadics(r.localdata,r):u.loadjson(r.localdata,r.localdata,r);u.addForeignValues(r);f.uniqueDataFields&&(p=u.getUniqueRecords(u.records,f.uniqueDataFields),u.records=p,u.cachedrecords=p);f.beforeLoadComplete&&(l=f.beforeLoadComplete(u.records,this.originaldata),l!=undefined&&(u.records=l,u.cachedrecords=l));u.loadedData=r.localdata;u.buildHierarchy.call(u);n.isFunction(f.loadComplete)&&f.loadComplete(r.localdata,u.records);u.callBindingUpdate(i);return}v=f.data!=undefined?f.data:{};r.processdata&&r.processdata(v);n.isFunction(f.processData)&&f.processData(v);n.isFunction(f.formatData)&&(rt=f.formatData(v),rt!=undefined&&(v=rt));ut="application/x-www-form-urlencoded";f.contentType&&(ut=f.contentType);nt="GET";r.type&&(nt=r.type);f.type&&(nt=f.type);ft=s;s=="ics"&&(ft="text");r.url&&r.url.length>0?n.isFunction(f.loadServerData)?u._requestData(v,r,f):this.xhr=n.jqx.data.ajax({dataType:ft,cache:this.cache,type:nt,url:r.url,"async":tt,timeout:r.timeout,contentType:ut,data:v,success:function(t,i,e){var o,h,l,c;if(n.isFunction(r.beforeprocessing)&&(o=r.beforeprocessing(t,i,e),o!=undefined&&(t=o)),n.isFunction(f.downloadComplete)&&(o=f.downloadComplete(t,i,e),o!=undefined&&(t=o)),t==null){u.records=[];u.cachedrecords=[];u.originaldata=[];u.callDownloadComplete();n.isFunction(f.loadComplete)&&f.loadComplete([]);return}h=t;t.records&&(h=t.records);t.totalrecords!=undefined?r.totalrecords=t.totalrecords:t.totalRecords!=undefined&&(r.totalrecords=t.totalRecords);r.datatype==="xml"?u.loadxml(null,h,r):s==="text"?u.loadtext(h,r):s==="ics"?u.loadics(h,r):u.loadjson(null,h,r);u.addForeignValues(r);f.uniqueDataFields&&(l=u.getUniqueRecords(u.records,f.uniqueDataFields),u.records=l,u.cachedrecords=l);f.beforeLoadComplete&&(c=f.beforeLoadComplete(u.records,t),c!=undefined&&(u.records=c,u.cachedrecords=c));u.loadedData=t;u.buildHierarchy.call(u);u.callDownloadComplete();n.isFunction(f.loadComplete)&&f.loadComplete(t,i,e,u.records)},error:function(t,i,e){n.isFunction(r.loaderror)&&r.loaderror(t,i,e);n.isFunction(f.loadError)&&f.loadError(t,i,e);t=null;u.callDownloadComplete()},beforeSend:function(t,i){n.isFunction(f.beforeSend)&&f.beforeSend(t,i);n.isFunction(r.beforesend)&&r.beforesend(t,i)}}):(u.buildHierarchy([]),u.callDownloadComplete(),n.isFunction(f.loadComplete)&&(et||(et={}),f.loadComplete(et)))}this.callBindingUpdate(i)}},buildHierarchy:function(n){var i=this._source,u=[],o,t,e,r,s,l,h,c,f;if(i.datafields&&(i.hierarchy&&!i.hierarchy.reservedNames?i.hierarchy.reservedNames={leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"}:i.hierarchy&&(t=i.hierarchy.reservedNames,t.leaf||(t.leaf="leaf"),t.parent||(t.parent="parent"),t.expanded||(t.expanded="expanded"),t.checked||(t.checked="checked"),t.selected||(t.selected="selected"),t.level||(t.level="level"),t.data||(t.data="data")),i.hierarchy)){if(o=this,t=i.hierarchy.reservedNames,i.hierarchy.root){if(i.dataType=="xml")return u=this.getRecordsHierarchy("uid","parentuid","records",null,n),this.hierarchy=u,u;for(this.hierarchy=this.records,e=i.hierarchy.root,f=0;f<this.records.length;f++)(r=this.records[f],r)&&(s=function(n){var u,f,r,s;if(i.hierarchy.record)n.records=n[e][i.hierarchy.record];else{if(u=e.split(o.mapChar),f=null,u.length>1){for(r=n,s=0;s<u.length;s++)r!=undefined&&(r=r[u[s]]);f=r}else f=n[e];n.records=f}(n.records==null||n.records&&n.records.length==0)&&(n[t.leaf]=!0)},s(r),r[t.level]=0,l=this.getid(i.id,r,f),r.uid=l,r[t.parent]=null,r[t.data]=r,r[t.expanded]===undefined&&(r[t.expanded]=!1),h=function(n,r){var f,u,e;if(!r){n.records=[];return}for(f=0;f<r.length;f++)(u=r[f],u)&&(s(u),u[t.level]=n[t.level]+1,u[t.parent]=n,u[t.data]=u,e=o.getid(i.id,u,f),u.uid=e==f&&i.id==null?n.uid+"_"+e:e,u[t.expanded]===undefined&&(u[t.expanded]=!1),h(u,u.records))},h(r,r.records));return this.hierarchy}if(i.hierarchy.keyDataField&&i.hierarchy.parentDataField)return u=this.getRecordsHierarchy(i.hierarchy.keyDataField.name,i.hierarchy.parentDataField.name,"records",null,n),this.hierarchy=u,u;if(i.hierarchy.groupingDataFields){for(c=[],f=0;f<i.hierarchy.groupingDataFields.length;f++)c.push(i.hierarchy.groupingDataFields[f].name);return u=this.getGroupedRecords(c,"records","label",null,"data",null,"parent",n),this.hierarchy=u,u}}},addRecord:function(n,t,i,r){var u=this,o=function(){return{leaf:"leaf",parent:"parent",expanded:"expanded",checked:"checked",selected:"selected",level:"level",icon:"icon",data:"data"}},e,f;if(n!=undefined)if(i!=undefined)this.hierarchy.length>0&&(e=function(r){var h,f,s;if(r)for(h=0;h<r.length;h++){if(f=r[h],f.uid==i)return s=u._source&&u._source.hierarchy?u._source.hierarchy.reservedNames:null,s==null&&(s=o()),n[s.parent]=f,n[s.level]=f[s.level]+1,f.records?f[s.leaf]=!1:(f.records=[],f[s.leaf]=!1),t=="last"?f.records.push(n):typeof t=="number"&&isFinite(t)?f.records.splice(t,0,n):f.records.splice(0,0,n),!0;f.records&&e(f.records)}},e(this.hierarchy));else return this.hierarchy&&this.hierarchy.length>=0&&(this._source.hierarchy||r)?(f=u._source&&u._source.hierarchy?u._source.hierarchy.reservedNames:null,f==null&&(f=o()),n[f.level]=0,t=="last"?this.hierarchy.push(n):typeof t=="number"&&isFinite(t)?this.hierarchy.splice(t,0,n):this.hierarchy.splice(0,0,n)):t=="last"?this.records.push(n):typeof t=="number"&&isFinite(t)?this.records.splice(t,0,n):this.records.splice(0,0,n),!0;return!1},deleteRecord:function(n){var t=this,r,i,u;if(this.hierarchy.length>0)r=function(i){var f,o,e,u;if(i)for(f=0;f<i.length;f++){if(u=i[f],u.uid==n){for(i.splice(f,1),t.recordids[n]&&delete t.recordids[n],o=function(n){for(var u,r,f,i=0;i<n.length;i++){for(u=n[i].uid,r=0;r<t.records.length;r++)if(f=t.records[r],f.uid==u){t.records.splice(r,1);break}n[i].records&&o(n[i].records)}},u.records&&o(u.records),e=0;e<t.records.length;e++)if(u=t.records[e],u.uid==n){t.records.splice(e,1);break}return!0}u.records&&r(u.records)}},r(this.hierarchy);else for(i=0;i<this.records.length;i++)if(u=this.records[i],u.uid==n)return this.records.splice(i,1),!0;return!1},addForeignValues:function(n){for(var t,o,e,r,h,c,l,v,u,f,i=this,p=n.datafields?n.datafields.length:0,a=0;a<p;a++)if(t=n.datafields[a],t!=undefined)if(t.values!=undefined)for(t.value==undefined&&(t.value=t.name),t.values.value==undefined&&(t.values.value=t.value),o=[],i.pageable&&i.virtualmode?(e=i.pagenum*i.pagesize,r=e+i.pagesize,r>i.totalrecords&&(r=i.totalrecords)):i.virtualmode?(e=n.recordstartindex,r=n.recordendindex,r>i.totalrecords&&(r=i.totalrecords)):(e=0,r=i.records.length),u=e;u<r;u++){var f=i.records[u],y=t.name,s=f[t.value];if(o[s]!=undefined)f[y]=o[s];else for(h=0;h<t.values.source.length;h++)if(c=t.values.source[h],l=c[t.values.value],l==undefined&&(l=c.uid),l==s){v=c[t.values.name];f[y]=v;o[s]=v;break}}else if(t.value!=undefined)for(u=0;u<i.records.length;u++)f=i.records[u],f[t.name]=f[t.value]},abort:function(){this.xhr&&this.xhr.readyState!=4&&(this.xhr.abort(),me.callDownloadComplete())},_requestData:function(t,i,r){var u=this,f=function(t){var s,o,f,e;for(t.totalrecords&&(i.totalrecords=t.totalrecords,u.totalrecords=t.totalrecords),t.records&&(u.records=t.records,u.cachedrecords=t.records),u.addForeignValues(i),r.uniqueDataFields&&(s=u.getUniqueRecords(u.records,r.uniqueDataFields),u.records=s,u.cachedrecords=s),r.beforeLoadComplete&&(o=r.beforeLoadComplete(u.records,t),o!=undefined&&(u.records=o,u.cachedrecords=o)),f=0;f<u.records.length;f++)(e=u.records[f],undefined!=e)&&undefined==e.uid&&(e.uid=u.getid(i.id,e,f));u.buildHierarchy.call(u);n.isFunction(r.loadComplete)&&r.loadComplete(t);u.callDownloadComplete()};r.loadServerData(t,i,f)},getUniqueRecords:function(n,t){var i,r,u,f,s;if(n&&t){var h=n.length,c=t.length,e=[],o=[];for(i=0;i<h;i++)if(r=n[i],u="",r!=undefined){for(f=0;f<c;f++)s=t[f],u+=r[s]+"_";o[u]||(e[e.length]=r);o[u]=!0}}return e},getAggregatedData:function(t,i,r,u){var c=r,l,p,w,v,s,f,o,y;c||(c=this.records);var e={},a=[],h=c.length;if(h!=0&&h!=undefined){for(l=0;l<h;l++)for(p=c[l],s=0;s<t.length;s++)f=t[s],o=p[f.name],f.aggregates&&(e[f.name]=e[f.name]||{},a[f.name]=a[f.name]||0,a[f.name]++,w=function(t){for(obj in t){var i=e[f.name][obj];i==null&&(e[f.name][obj]=0,i=0);n.isFunction(t[obj])&&(i=t[obj](i,o,f.name,p,u));e[f.name][obj]=i}},v=parseFloat(o),v=isNaN(v)?!1:!0,v&&(o=parseFloat(o)),typeof o=="number"&&isFinite(o)?n.each(f.aggregates,function(){var n=e[f.name][this];if(n==null&&(n=0,this=="min"&&(n=9999999999999),this=="max"&&(n=-9999999999999)),this=="sum"||this=="avg"||this=="stdev"||this=="stdevp"||this=="var"||this=="varp")n+=parseFloat(o);else if(this=="product")l==0?n=parseFloat(o):n*=parseFloat(o);else if(this=="min")n=Math.min(n,parseFloat(o));else if(this=="max")n=Math.max(n,parseFloat(o));else if(this=="count")n++;else if(typeof this=="object"){w(this);return}e[f.name][this]=n}):n.each(f.aggregates,function(){if(this=="min"||this=="max"||this=="count"||this=="product"||this=="sum"||this=="avg"||this=="stdev"||this=="stdevp"||this=="var"||this=="varp"){if(o===null)return!0;var n=e[f.name][this];return n==null&&(n=0),e[f.name][this]=n,!0}typeof this=="object"&&w(this)}));for(s=0;s<t.length;s++)f=t[s],e[f.name]||(e[f.name]={},n.each(f.aggregates,function(){e[f.name][this]=0})),e[f.name].avg!=undefined?(o=e[f.name].avg,y=a[f.name],e[f.name].avg=y===0||y==undefined?0:o/y):e[f.name].count!=undefined&&(e[f.name].count=h),(e[f.name].stdev||e[f.name].stdevp||e[f.name]["var"]||e[f.name].varp)&&n.each(f.aggregates,function(){var t,s,r,n;if(this=="stdev"||this=="var"||this=="varp"||this=="stdevp"){var l=e[f.name][this],u=h,o=l/h,i=0;for(t=0;t<h;t++)s=c[t],r=s[f.name],i+=(r-o)*(r-o);n=this=="stdevp"||this=="varp"?u:u-1;n==0&&(n=1);this=="var"||this=="varp"?e[f.name][this]=i/n:(this=="stdevp"||this=="stdev")&&(e[f.name][this]=Math.sqrt(i/n))}}),f.formatStrings&&n.each(f.aggregates,function(t){var u=f.formatStrings[t],r;if(u)if(this=="min"||this=="max"||this=="count"||this=="product"||this=="sum"||this=="avg"||this=="stdev"||this=="stdevp"||this=="var"||this=="varp")r=e[f.name][this],e[f.name][this]=n.jqx.dataFormat.formatnumber(r,u,i);else if(typeof this=="object")for(obj in this)r=e[f.name][obj],e[f.name][obj]=n.jqx.dataFormat.formatnumber(r,u,i)});return e}},bindDownloadComplete:function(n,t){this._downloadComplete[this._downloadComplete.length]={id:n,func:t}},unbindDownloadComplete:function(n){for(var t=0;t<this._downloadComplete.length;t++)if(this._downloadComplete[t].id==n){this._downloadComplete[t].func=null;this._downloadComplete.splice(t,1);break}},callDownloadComplete:function(){for(var t,n=0;n<this._downloadComplete.length;n++)t=this._downloadComplete[n],t.func!=null&&t.func()},setSource:function(n){this._source=n},generatekey:function(){var n=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},getGroupedRecords:function(t,i,r,u,f,e,o,s,h){var rt=this,nt,v,s,ft,et,k,l,y,ot,st,it,w,d,ht,g,a;for(h||(h=0),nt=[],v=0;v<t.length;v++)nt[v]=rt.generatekey();i||(i="items");r||(r="group");f||(f="record");o||(o="parentItem");undefined===e&&(e="value");var tt=[],ct=0,b=[],ut=t.length;for(s||(s=this.records),ft=s.length,et=function(t){var i=t;return u&&n.each(u,function(){this.name&&this.map&&(i[this.map]=i[this.name])}),i},k=0;k<ft;k++){for(l=et(s[k]),id=l[rt.uniqueId],y=[],ot=0,v=0;v<ut;v++)(st=t[v],it=l[st],null!=it)&&(y[ot++]={value:it,hash:nt[v]});if(y.length!=ut)break;var c=null,p="",lt=-1;for(w=0;w<y.length;w++){if(lt++,d=y[w].value,ht=y[w].hash,p=p+"_"+ht+"_"+d,b[p]!=undefined&&b[p]!=null){c=b[p];continue}c==null?(c={level:0},c[o]=null,c[r]=d,c[f]=l,c.expanded=l.expanded!==undefined?l.expanded:!1,e&&(c[e]=l[e]),c[i]=[],g=tt.length+h,(!this._source.id||typeof l.uid=="number"||isFinite(l.uid))&&(g="Row"+g),c.uid=g,tt[ct++]=c):(a={level:c.level+1},a[o]=c,a[r]=d,a[i]=[],a[f]=l,a.expanded=l.expanded!==undefined?l.expanded:!1,e&&(a[e]=l[e]),a.uid=c.uid+"_"+c[i].length,c[i][c[i].length]=a,c=a);b[p]=c}l&&(l.leaf=!0);c!=null?(this._source.id==null&&(undefined==l.uid?l.uid=c.uid+"_"+c[i].length:l.uid.toString().indexOf(c.uid)==-1&&(l.uid=c.uid+"_"+l.uid)),l[o]=c,l.level=c.level+1,c[i][c[i].length]=l):undefined==l.uid&&(l.uid=this.generatekey())}return tt},getRecordsHierarchy:function(t,i,r,u,f){var v=[],d=this.records,s,h,c,tt,o,a,k;if(f&&(d=f),this.records.length==0)return null;var y=r!=null?r:"items",l=[],b=d,g=b.length,e=this._source&&this._source.hierarchy?this._source.hierarchy.reservedNames:null,nt=function(t){var i=t;return u&&n.each(u,function(){this.name&&this.map&&(i[this.map]=i[this.name])}),i};for(s=0;s<g;s++){var h=n.extend({},b[s]),p=h[i],w=h[t];l[w]={parentid:p,item:h}}for(s=0;s<g;s++){var h=n.extend({},b[s]),p=h[i],w=h[t];l[p]!=undefined?(h={parentid:p,item:l[w].item},c=l[p].item,c[y]||(c[y]=[]),tt=c[y].length,o=h.item,e?o[e.parent]==undefined&&(o[e.parent]=c):o.parent==undefined&&(o.parent=c),a=nt(o),c[y][tt]=a,l[p].item=c,l[w]=h):(o=l[w].item,e?o[e.parent]==undefined&&(o[e.parent]=null):o.parent==undefined&&(o.parent=null),a=nt(o),e?a[e.level]=0:a.level=0,v[v.length]=a)}return v.length!=0&&(k=function(n,t){for(var r,i=0;i<t.length;i++)e?t[i][e.level]=n:t[i].level=n,r=t[i][y],r?r.length>0?k(n+1,r):e?t[i][e.leaf]=!0:t[i].leaf=!0:e?t[i][e.leaf]=!0:t[i].leaf=!0},k(0,v)),v},bindBindingUpdate:function(n,t){this._bindingUpdate[this._bindingUpdate.length]={id:n,func:t}},unbindBindingUpdate:function(n){for(var t=0;t<this._bindingUpdate.length;t++)if(this._bindingUpdate[t].id==n){this._bindingUpdate[t].func=null;this._bindingUpdate.splice(t,1);break}},callBindingUpdate:function(n){for(var i,t=0;t<this._bindingUpdate.length;t++)i=this._bindingUpdate[t],i.func!=null&&i.func(n)},getid:function(t,i,r){var u,e,f,o;if(t!=null&&t.name!=undefined&&t.name){if(u=n(i).attr(t.name),u!=null&&u.toString().length>0)return u;if(t.map)try{if(u=n(i).attr(t.map),u!=null&&u.toString().length>0)return u;if(n(t.map,i).length>0)return n(t.map,i).text();if(n(t.name,i).length>0)return n(t.name,i).text()}catch(s){return r}return}if(n(t,i).length>0)return n(t,i).text();if(t&&t.toString().length>0){if(u=n(i).attr(t),u!=null&&u.toString().length>0)return n.trim(u).split(" ").join("").replace(/([ #;?%&,.+*~\':"!^$[\]()=>|\/\\@])/g,"");if(e=t.split(this.mapChar),e.length>1){for(f=i,o=0;o<e.length;o++)f!=undefined&&(f=f[e[o]]);if(f!=undefined)return f}else if(i[t]!=undefined)return i[t]}return r},loadjson:function(t,i,r){var t,y,h,a,p,c,w,b,ut,k,ft,d,l,s,v,nt,tt,f,u,e,g,o,it,rt;if(typeof t=="string"&&(t=n.parseJSON(t)),r.root==undefined&&(r.root=""),r.record==undefined&&(r.record=""),t=t||i,t||(t=[]),y=this,r.root!=""){if(e=r.root.split(y.mapChar),e.length>1){for(h=t,o=0;o<e.length;o++)h!=undefined&&(h=h[e[o]]);t=h}else if(t[r.root]!==undefined?t=t[r.root]:t[0]&&t[0][r.root]!==undefined?t=t[0][r.root]:n.each(t,function(){var n=this;if(this==r.root)return t=this,!1;this[r.root]!=undefined&&(t=this[r.root])}),!t&&(e=r.root.split(y.mapChar),e.length>0)){for(h=t,o=0;o<e.length;o++)h!=undefined&&(h=h[e[o]]);t=h}}else if(!t.length)for(obj in t)if(n.isArray(t[obj])){t=t[obj];break}if(t!=null&&t.length==undefined&&(t=n.makeArray(t)),t==null||t==undefined||t=="undefined"||t.length==undefined)throw new Error("jqxDataAdapter: JSON Parse error! Invalid JSON. Please, check your JSON or your jqxDataAdapter initialization!");if(t.length==0){this.totalrecords=0;return}if(a=t.length,this.totalrecords=this.virtualmode?r.totalrecords||a:a,this.records=[],this.originaldata=[],p=this.records,c=this.pageable?this.pagesize*this.pagenum:r.recordstartindex,this.recordids=[],r.loadallrecords&&(c=0,a=this.totalrecords),w=0,this.virtualmode&&(c=this.pageable?this.pagesize*this.pagenum:r.recordstartindex,w=c,c=0,a=this.totalrecords),b=r.datafields?r.datafields.length:0,b==0){ut=t[0];k=[];for(obj in ut)ft=obj,k[k.length]={name:ft};r.datafields=k;r.generatedfields=r.datafields;b=k.length}for(d=c,l=c;l<a;l++){if(s=t[l],s==undefined)break;if((!r.record||r.record==""||(s=s[r.record],s!=undefined))&&(v=this.getid(r.id,s,l),typeof v=="object"&&(v=l),!this.recordids[v])){for(this.recordids[v]=s,nt={},tt=0;tt<b;tt++)if(f=r.datafields[tt],u="",undefined!=f&&f!=null){if(f.map){if(n.isFunction(f.map))u=f.map(s);else if(e=f.map.split(y.mapChar),e.length>0){for(g=s,o=0;o<e.length;o++)g!=undefined&&(g=g[e[o]]);u=g}else u=s[f.map];u!=undefined&&u!=null?u=this.getvaluebytype(u,f):u==undefined&&u!=null&&(u="")}u!=""||f.map||(u=s[f.name],u==undefined&&u!=null&&(u=""),f.value!=undefined&&u!=undefined&&(it=u[f.value],it!=undefined&&(u=it)));u=this.getvaluebytype(u,f);f.displayname!=undefined?nt[f.displayname]=u:nt[f.name]=u;f.type==="array"&&(rt=function(t){var o,f,s,u,i,h,e,c,l;if(t)for(o=0;o<t.length;o++)if(f=t[o],f)for(s=0;s<b;s++)if(u=r.datafields[s],i="",undefined!=u&&u!=null){if(u.map){if(n.isFunction(u.map))i=u.map(f);else if(h=u.map.split(y.mapChar),h.length>0){for(e=f,c=0;c<h.length;c++)e!=undefined&&(e=e[h[c]]);i=e}else i=f[u.map];i!=undefined&&i!=null?i=this.getvaluebytype(i,u):i==undefined&&i!=null&&(i="")}i!=""||u.map||(i=f[u.name],i==undefined&&i!=null&&(i=""),u.value!=undefined&&i!=undefined&&(l=i[u.value],l!=undefined&&(i=l)));i=this.getvaluebytype(i,u);u.displayname!=undefined?f[u.displayname]=i:f[u.name]=i;u.type==="array"&&rt.call(this,i)}},rt.call(this,u))}(r.recordendindex<=0||c<r.recordendindex)&&(p[w+d]=new Object(nt),p[w+d].uid=v,this.originaldata[w+d]=new Object(p[l]),d++)}}this.records=p;this.cachedrecords=this.records},loadxml:function(t,i,r){var t,l,a,h,y,b,it,p,rt,w,ut,k,d,g,f,u,nt,s,c,st,o,e,tt,v;if(typeof t=="string"&&(t=i=n(n.parseXML(t)),t=null),r.root==undefined&&(r.root=""),r.record==undefined&&(r.record=""),t=n.jqx.browser.msie&&i?i.xml!=undefined?n(r.root+" "+r.record,n.parseXML(i.xml)):t||n(r.root+" "+r.record,i):t||n(r.root+" "+r.record,i),t||(t=[]),l=t.length,t.length!=0){if(this.totalrecords=this.virtualmode?r.totalrecords||l:l,this.records=[],this.originaldata=[],a=this.records,h=this.pageable?this.pagesize*this.pagenum:r.recordstartindex,this.recordids=[],r.loadallrecords&&(h=0,l=this.totalrecords),y=0,this.virtualmode&&(h=this.pageable?this.pagesize*this.pagenum:r.recordstartindex,y=h,h=0,l=this.totalrecords),b=r.datafields?r.datafields.length:0,b==0){it=t[0];p=[];for(obj in it)rt=obj,p[p.length]={name:rt};r.datafields=p;r.generatedfields=r.datafields;b=p.length}for(w=h,ut=!1,o=h;o<l;o++){if(e=t[o],e==undefined)break;if(v=this.getid(r.id,e,o),!this.recordids[v]){for(this.recordids[v]=e,k={},d=!1,r.hierarchy&&r.hierarchy.root&&(d=!0),g=0;g<b;g++)if(f=r.datafields[g],u="",undefined!=f&&f!=null){if(f.map)if(n.isFunction(f.map))u=f.map(e);else{if(nt=f.map.indexOf("["),nt<0)if(u=n(f.map,e),u.length==1)u=u.text();else{for(ut=!0,s=[],c=0;c<u.length;c++)s.push(n(u[c]).text());u=s;d&&s.length>0&&(u=s[0])}else{var et=f.map.substring(0,nt-1),ot=f.map.indexOf("]"),ft=f.map.substring(nt+1,ot);u=n(et,e).attr(ft);u==undefined&&(u=n(e).attr(ft));u==undefined&&(u="")}u==""&&(u=n(e).attr(f.map),u==undefined&&(u=""))}if(u==""){if(u=n(f.name,e),u.length==1)u=u.text();else{for(s=[],c=0;c<u.length;c++)s.push(n(u[c]).text());u=s;d&&s.length>0&&(u=s[0])}u==""&&(u=n(e).attr(f.name),u==undefined&&(u=""));u==""&&e.nodeName&&e.nodeName==f.name&&e.firstChild&&(u=n(e.firstChild).text())}st=u;u=this.getvaluebytype(u,f);f.displayname!=undefined?k[f.displayname]=u:k[f.name]=u}(r.recordendindex<=0||h<r.recordendindex)&&(a[y+w]=n.extend({},k),a[y+w].uid=v,this.originaldata[y+w]=n.extend({},a[o]),w++)}}if(r.hierarchy&&r.hierarchy.root)for(o=h;o<l;o++)e=t[o],tt=a[o],n(e).parent().length>0?(v=this.getid(r.id,n(e).parents(r.hierarchy.record+":first")),tt.parentuid=v):tt.parentuid=null;this.records=a;this.cachedrecords=this.records}},loadics:function(n,t){var o,a,s,f,i,r,c;if(n!=null){var l=t.rowDelimiter||this.rowDelimiter||"\n",u=n.split(l),e=u.length,h=n.split("\r");for(e==1&&h.length>1&&(u=h,e=u.length),this.records=[],this.originaldata=[],o=this.records,this.recordids=[],a=0,s=function(n){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z)?$/.exec(n);if(!t)throw new Error("Invalid UNTIL value: "+n);return new Date(Date.UTC(t[1],t[2]-1,t[3],t[5]||0,t[6]||0,t[7]||0))},f=0;f<e;f++){if(i=u[f],i=="BEGIN:VEVENT"){r={};continue}if(i.indexOf("SUMMARY")>=0){r.SUMMARY=i.substring(i.indexOf("SUMMARY")+8);continue}if(i.indexOf("LOCATION")>=0){r.LOCATION=i.substring(i.indexOf("LOCATION")+9);continue}if(i.indexOf("DESCRIPTION")>=0){r.DESCRIPTION=i.substring(i.indexOf("DESCRIPTION")+12);continue}if(i.indexOf("RRULE")>=0){r.RRULE=i.substring(i.indexOf("RRULE")+6);continue}if(i.indexOf("EXDATE")>=0){c=i.substring(i.indexOf("EXDATE")+7);r.EXDATE=c;continue}if(i.indexOf("DTEND")>=0){r.DTEND=s(i.substring(i.indexOf("DTEND")+6));continue}if(i.indexOf("DTSTART")>=0){r.DTSTART=s(i.substring(i.indexOf("DTSTART")+8));continue}if(i.indexOf("UID")>=0){r.uid=r.UID=i.substring(i.indexOf("UID")+4);continue}if(i.indexOf("STATUS")>=0){r.STATUS=i.substring(i.indexOf("STATUS")+7);continue}if(i=="END:VEVENT"){o.push(r);continue}}this.records=o;this.cachedrecords=this.records}},loadtext:function(t,i){var l,s,a,k,v,r,y,u,p,w,o,f,h,d;if(t!=null){var g=i.rowDelimiter||this.rowDelimiter||"\n",c=t.split(g),e=c.length,b=t.split("\r");for(e==1&&b.length>1&&(c=b,e=c.length),this.totalrecords=this.virtualmode?i.totalrecords||e:e,this.records=[],this.originaldata=[],l=this.records,s=this.pageable?this.pagesize*this.pagenum:i.recordstartindex,this.recordids=[],i.loadallrecords&&(s=0,e=this.totalrecords),a=0,this.virtualmode&&(s=this.pageable?this.pagesize*this.pagenum:i.recordstartindex,a=s,s=0,e=this.totalrecords),k=i.datafields.length,v=i.columnDelimiter||this.columnDelimiter,v||(v=i.datatype==="tab"||i.datatype==="tsv"?"\t":","),r=s;r<e;r++)if(y=c[r],u=null,!this.recordids[u]){for(i.id==null&&(u=r,this.recordids[u]=y),p={},w=c[r].split(v),o=0;o<k;o++)o>=w.length||(f=i.datafields[o],h=w[o],f.map&&n.isFunction(f.map)&&(h=f.map(y)),f.type&&(h=this.getvaluebytype(h,f)),d=f.map||f.name||o.toString(),p[d]=h,i.id!=null&&i.id===f.name&&(u=h,this.recordids[u]=y));u==null&&(u=r);l[a+r]=n.extend({},p);l[a+r].uid=u;this.originaldata[a+r]=n.extend({},l[r])}this.records=l;this.cachedrecords=this.records}},getvaluebytype:function(t,i){var f=t,u,r,e,t;if(t==null)return t;if(n.isArray(t)&&i.type!="array"){for(u=0;u<t.length;u++)t[u]=this.getvaluebytype(t[u],i);return t}if(i.type=="date")if(t=="NaN")t="";else{if(t&&t instanceof Date)return t;r=new Date(t);typeof t=="string"&&i.format&&(e=n.jqx.dataFormat.parsedate(t,i.format),e!=null&&(r=e));t=r.toString()=="NaN"||r.toString()=="Invalid Date"?n.jqx.dataFormat?n.jqx.dataFormat.tryparsedate(t):r:r;t==null&&(t=f)}else i.type=="float"||i.type=="number"||i.type=="decimal"?t=="NaN"?t="":(t=parseFloat(t),isNaN(t)&&(t=f)):i.type=="int"||i.type=="integer"?(t=parseInt(t),isNaN(t)&&(t=f)):(i.type=="bool"||i.type=="boolean")&&(t!=null&&t.toLowerCase!=undefined&&(t.toLowerCase()=="false"?t=!1:t.toLowerCase()=="true"&&(t=!0)),t=t==1?!0:t==0&&t!==""?!1:"");return t}};n.jqx.dataFormat={};n.extend(n.jqx.dataFormat,{regexTrim:/^\s+|\s+$/g,regexInfinity:/^[+-]?infinity$/i,regexHex:/^0x[a-f0-9]+$/i,regexParseFloat:/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,toString:Object.prototype.toString,isBoolean:function(n){return typeof n=="boolean"},isObject:function(t){return t&&(typeof t=="object"||n.isFunction(t))||!1},isDate:function(n){return n instanceof Date},arrayIndexOf:function(n,t){if(n.indexOf)return n.indexOf(t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"&&isFinite(n)},isNull:function(n){return n===null},isUndefined:function(n){return typeof n=="undefined"},isValue:function(n){return this.isObject(n)||this.isString(n)||this.isNumber(n)||this.isBoolean(n)},isEmpty:function(t){return!this.isString(t)&&this.isValue(t)?!1:this.isValue(t)?(t=n.trim(t).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),t===""):!0},startsWith:function(n,t){return n.indexOf(t)===0},endsWith:function(n,t){return n.substr(n.length-t.length)===t},trim:function(n){return(n+"").replace(this.regexTrim,"")},isArray:function(n){return this.toString.call(n)==="[object Array]"},defaultcalendar:function(){return{"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"MM-dd-yyyy",zone1:"yyyy-MM-ddTHH:mm:ss-HH:mm",zone2:"yyyy-MM-ddTHH:mm:ss+HH:mm",custom:"yyyy-MM-ddTHH:mm:ss.fff",custom2:"yyyy-MM-dd HH:mm:ss.fff"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:","}},expandFormat:function(n,t){t=t||"F";var i,u=n.patterns,r=t.length;if(r===1){if(i=u[t],!i)throw"Invalid date format string '"+t+"'.";t=i}else r===2&&t.charAt(0)==="%"&&(t=t.charAt(1));return t},getEra:function(n,t){var r,u,i,f;if(!t||typeof n=="string")return 0;for(u=n.getTime(),i=0,f=t.length;i<f;i++)if(r=t[i].start,r===null||u>=r)return i;return 0},toUpper:function(n){return n.split("").join(" ").toUpperCase()},toUpperArray:function(n){for(var i=[],t=0,r=n.length;t<r;t++)i[t]=this.toUpper(n[t]);return i},getEraYear:function(n,t,i,r){var u=n.getFullYear();return!r&&t.eras&&(u-=t.eras[i].offset),u},toUpper:function(n){return n?n.toUpperCase():""},getDayIndex:function(n,t,i){var r,f=n.days,u=n._upperDays;return u||(n._upperDays=u=[this.toUpperArray(f.names),this.toUpperArray(f.namesAbbr),this.toUpperArray(f.namesShort)]),t=t.toUpperCase(),i?(r=this.arrayIndexOf(u[1],t),r===-1&&(r=this.arrayIndexOf(u[2],t))):r=this.arrayIndexOf(u[0],t),r},getMonthIndex:function(n,t,i){var e=n.months,o=n.monthsGenitive||n.months,r=n._upperMonths,f=n._upperMonthsGen,u;return r||(n._upperMonths=r=[this.toUpperArray(e.names),this.toUpperArray(e.namesAbbr)],n._upperMonthsGen=f=[this.toUpperArray(o.names),this.toUpperArray(o.namesAbbr)]),t=this.toUpper(t),u=this.arrayIndexOf(i?r[1]:r[0],t),u<0&&(u=this.arrayIndexOf(i?f[1]:f[0],t)),u},appendPreOrPostMatch:function(n,t){for(var u,f=0,i=!1,r=0,e=n.length;r<e;r++){u=n.charAt(r);switch(u){case"'":i?t.push("'"):f++;i=!1;break;case"\\":i&&t.push("\\");i=!i;break;default:t.push(u);i=!1}}return f},getTokenRegExp:function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},formatlink:function(n,t){var i="";return(t&&t.target&&(i="target="+t.target),i!="")?"<a "+i+' href="'+n+'">'+n+"<\/a>":'<a href="'+n+'">'+n+"<\/a>"},formatemail:function(n){return'<a href="mailto:'+n+'">'+n+"<\/a>"},formatNumber:function(n,t,i){return this.formatnumber(n,t,i)},formatnumber:function(n,t,i){var c,u,l,h,a,r,y,o,v,s;if((i==undefined||i==null||i=="")&&(i=this.defaultcalendar()),t===""||t===null)return n;this.isNumber(n)||(n*=1);t.length>1&&(c=parseInt(t.slice(1),10));u={};l=t.charAt(0).toUpperCase();u.thousandsSeparator=i.thousandsseparator;u.decimalSeparator=i.decimalseparator;switch(l){case"D":case"d":case"F":case"f":u.decimalPlaces=c;break;case"N":case"n":u.decimalPlaces=0;break;case"C":case"c":u.decimalPlaces=c;i.currencysymbolposition=="before"?u.prefix=i.currencysymbol:u.suffix=i.currencysymbol;break;case"P":case"p":u.suffix=i.percentsymbol;u.decimalPlaces=c;break;default:throw"Bad number format specifier: "+l;}if(this.isNumber(n)){var p=n<0,r=n+"",e=u.decimalSeparator?u.decimalSeparator:".",f;if(this.isNumber(u.decimalPlaces)){if(h=u.decimalPlaces,a=Math.pow(10,h),r=(n*a).toFixed(0)/a+"",f=r.lastIndexOf("."),h>0)for(f<0?(r+=e,f=r.length-1):e!=="."&&(r=r.replace(".",e));r.length-1-f<h;)r+="0"}else r=n+"",f=r.lastIndexOf("."),f>0&&h==undefined&&e!=="."&&(r=r.replace(".",e));if(u.thousandsSeparator){for(y=u.thousandsSeparator,f=r.lastIndexOf(e),f=f>-1?f:r.length,o=r.substring(f),v=-1,s=f;s>0;s--)v++,v%3==0&&s!==f&&(!p||s>1)&&(o=y+o),o=r.charAt(s-1)+o;r=o}return r=u.prefix?u.prefix+r:r,u.suffix?r+u.suffix:r}return n},tryparsedate:function(t,i){var it,wt,s,y,rt,bt,st,ht,r,ut,dt,u,a,d,ft,vt,yt,f,e,pt,et,ot,h,p,c;if((i==undefined||i==null)&&(i=this.defaultcalendar()),it=this,t=="")return null;if(t==null||t.substring||(t=t.toString()),t!=null&&t.substring(0,6)=="/Date(")return(wt=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/,s=new Date(+t.replace(/\/Date\((\d+)\)\//,"$1")),s=="Invalid Date"&&(h=t.match(/^\/Date\((\d+)([-+]\d\d)(\d\d)\)\/$/),s=null,h&&(s=new Date(1*h[1]+36e5*h[2]+6e4*h[3]))),(s==null||s=="Invalid Date"||isNaN(s))&&(y=wt.exec(t),y&&(c=new Date(parseInt(y[1])),y[2]&&(rt=parseInt(y[3]),y[2]==="-"&&(rt=-rt),bt=c.getUTCMinutes(),c.setUTCMinutes(bt-rt)),!isNaN(c.valueOf()))))?c:s;patterns=i.patterns;for(prop in patterns)if(s=it.parsedate(t,patterns[prop],i),s)return prop=="ISO"&&(st=it.parsedate(t,patterns.ISO2,i),st)?st:s;if(t!=null){var st=null,l=[":","/","-"],kt=!0;for(e=0;e<l.length;e++)t.indexOf(l[e])!=-1&&(kt=!1);if(kt&&(ht=new Number(t),!isNaN(ht)))return new Date(ht)}if(n.type(t)==="string"){if(r=it,t=r.trim(t),ut=[":","/","-"," ",","],dt=function(n,t,i){return i.replace(new RegExp(n,"g"),t)},t=dt(", ",",",t),u="",a=t,t.indexOf(":")>=0?(u=t.substring(t.indexOf(":")-2),u=r.trim(u),a=t.substring(0,t.indexOf(":")-2)):t.toUpperCase().indexOf("AM")>=0?(u=t.substring(t.toUpperCase().indexOf("AM")-2),u=r.trim(u),a=t.substring(0,t.toUpperCase().indexOf("AM")-2)):t.toUpperCase().indexOf("PM")>=0&&(u=t.substring(t.toUpperCase().indexOf("PM")-2),u=r.trim(u),a=t.substring(0,t.toUpperCase().indexOf("PM")-2)),d=new Date,ft=!1,a){for(f=0;f<ut.length;f++)if(a.indexOf(ut[f])>=0){l=a.split(ut[f]);break}var ct=[],lt=[],g=[],nt=null,at=null;for(f=0;f<l.length;f++)if(e=l[f],vt=r.parsedate(e,"d",i)||r.parsedate(e,"dd",i)||r.parsedate(e,"ddd",i)||r.parsedate(e,"dddd",i),vt&&e.length<=2){nt=f;ct.push(vt.getDate());break}for(f=0;f<l.length;f++)if(e=l[f],yt=r.parsedate(e,"M",i)||r.parsedate(e,"MM",i)||r.parsedate(e,"MMM",i)||r.parsedate(e,"MMMM",i),yt){if(nt!=undefined&&nt==f)continue;if(lt.push(yt.getMonth()),e.length>2){at=f;break}}for(f=0;f<l.length;f++)if(e=l[f],pt=r.parsedate(e,"yyyy",i),pt){if(nt!=undefined&&nt==f)continue;if(at!=undefined&&at==f)continue;g.push(pt.getFullYear())}for(et=[],ot=0;ot<ct.length;ot++)for(h=0;h<lt.length;h++)for(p=0;p<g.length;p++)c=new Date(g[p],lt[h],ct[ot]),g[p]<1970&&c.setFullYear(g[p]),c.getTime()!=NaN&&et.push(c);et.length>0&&(d=et[0],ft=!0)}if(u){var o=u.indexOf(":")>=0?u.split(":"):u,w=r.parsedate(u,"h:mm tt",i)||r.parsedate(u,"h:mm:ss tt",i)||r.parsedate(u,"HH:mm:ss.fff",i)||r.parsedate(u,"HH:mm:ss.ff",i)||r.parsedate(u,"HH:mm:ss.tttt",i)||r.parsedate(u,"HH:mm:ss",i)||r.parsedate(u,"HH:mm",i)||r.parsedate(u,"HH",i),v=0,b=0,k=0,tt=0;w&&w.getTime()!=NaN?(v=w.getHours(),b=w.getMinutes(),k=w.getSeconds(),tt=w.getMilliseconds()):(o.length==1&&(v=parseInt(o[0])),o.length==2&&(v=parseInt(o[0]),b=parseInt(o[1])),o.length==3&&(v=parseInt(o[0]),b=parseInt(o[1]),o[2].indexOf(".")>=0?(k=parseInt(o[2].toString().split(".")[0]),tt=parseInt(o[2].toString().split(".")[1])):k=parseInt(o[2])),o.length==4&&(v=parseInt(o[0]),b=parseInt(o[1]),k=parseInt(o[2]),tt=parseInt(o[3])));!d||isNaN(v)||isNaN(b)||isNaN(k)||isNaN(tt)||(d.setHours(v,b,k,tt),ft=!0)}if(ft)return d}return null},getparseregexp:function(n,t){var f=n._parseRegExp,o,v,e,y,i,p,w;if(f){if(o=f[t],o)return o}else n._parseRegExp=f={};for(var s=this.expandFormat(n,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),r=["^"],c=[],h=0,l=0,a=this.getTokenRegExp(),u;(u=a.exec(s))!==null;){if(v=s.slice(h,u.index),h=a.lastIndex,l+=this.appendPreOrPostMatch(v,r),l%2){r.push(u[0]);continue}e=u[0];y=e.length;switch(e){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":i="(\\D+)";break;case"tt":case"t":i="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":i="(\\d{"+y+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":i="(\\d\\d?)";break;case"zzz":i="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":i="([+-]?\\d\\d?)";break;case"/":i="(\\"+n["/"]+")";break;default:throw"Invalid date format pattern '"+e+"'.";}i&&r.push(i);c.push(u[0])}return this.appendPreOrPostMatch(s.slice(h),r),r.push("$"),p=r.join("").replace(/\s+/g,"\\s+"),w={regExp:p,groups:c},f[t]=w},outOfRange:function(n,t,i){return n<t||n>i},expandYear:function(n,t){var u=new Date,f=this.getEra(u),i,r;return t<100&&(i=n.twoDigitYearMax,i=typeof i=="string"?(new Date).getFullYear()%100+parseInt(i,10):i,r=this.getEraYear(u,n,f),t+=r-r%100,t>i&&(t-=100)),t},parsedate:function(n,t,i){var a,ht,u,k,d,v,y,lt,f,at,ut,ft;(i==undefined||i==null)&&(i=this.defaultcalendar());n=this.trim(n);var r=i,et=this.getparseregexp(r,t),ot=new RegExp(et.regExp).exec(n);if(ot===null)return null;var st=et.groups,g=null,h=null,s=null,c=null,p=null,o=0,l,nt=0,tt=0,it=0,w=null,rt=!1;for(a=0,ht=st.length;a<ht;a++)if(u=ot[a+1],u){var ct=st[a],b=ct.length,e=parseInt(u,10);switch(ct){case"dd":case"d":if(c=e,this.outOfRange(c,1,31))return null;break;case"MMM":case"MMMM":if(s=this.getMonthIndex(r,u,b===3),this.outOfRange(s,0,11))return null;break;case"M":case"MM":if(s=e-1,this.outOfRange(s,0,11))return null;break;case"y":case"yy":case"yyyy":if(h=b<4?this.expandYear(r,e):e,this.outOfRange(h,0,9999))return null;break;case"h":case"hh":if(o=e,o===12&&(o=0),this.outOfRange(o,0,11))return null;break;case"H":case"HH":if(o=e,this.outOfRange(o,0,23))return null;break;case"m":case"mm":if(nt=e,this.outOfRange(nt,0,59))return null;break;case"s":case"ss":if(tt=e,this.outOfRange(tt,0,59))return null;break;case"tt":case"t":if(rt=r.PM&&(u===r.PM[0]||u===r.PM[1]||u===r.PM[2]),!rt&&(!r.AM||u!==r.AM[0]&&u!==r.AM[1]&&u!==r.AM[2]))return null;break;case"f":case"ff":case"fff":if(it=e*Math.pow(10,3-b),this.outOfRange(it,0,999))return null;break;case"ddd":case"dddd":if(p=this.getDayIndex(r,u,b===3),this.outOfRange(p,0,6))return null;break;case"zzz":if((k=u.split(/:/),k.length!==2)||(l=parseInt(k[0],10),this.outOfRange(l,-12,13))||(d=parseInt(k[1],10),this.outOfRange(d,0,59)))return null;w=l*60+(this.startsWith(u,"-")?-d:d);break;case"z":case"zz":if(l=e,this.outOfRange(l,-12,13))return null;w=l*60;break;case"g":case"gg":if(v=u,!v||!r.eras)return null;for(v=trim(v.toLowerCase()),y=0,lt=r.eras.length;y<lt;y++)if(v===r.eras[y].name.toLowerCase()){g=y;break}if(g===null)return null}}if(f=new Date,ut=r.convert,at=f.getFullYear(),h===null?h=at:r.eras&&(h+=r.eras[g||0].offset),s===null&&(s=0),c===null&&(c=1),ut){if(f=ut.toGregorian(h,s,c),f===null)return null}else if((f.setFullYear(h,s,c),f.getDate()!==c)||p!==null&&f.getDay()!==p)return null;return rt&&o<12&&(o+=12),f.setHours(o,nt,tt,it),w!==null&&(ft=f.getMinutes()-(w+f.getTimezoneOffset()),f.setHours(f.getHours()+parseInt(ft/60,10),ft%60)),f},cleardatescache:function(){this.datescache=[]},formatDate:function(n,t,i){return this.formatdate(n,t,i)},formatdate:function(n,t,i){function f(n,t){var i,r=n+"";return t>1&&r.length<t?(i=nt[t-2]+r,i.substr(i.length-t,t)):r}function v(n,t){if(d)return d[t];if(n.getMonth!=undefined)switch(t){case 0:return n.getFullYear();case 1:return n.getMonth();case 2:return n.getDate()}}var c,r,a,p,l,u,g,o,y;if((i==undefined||i==null)&&(i=this.defaultcalendar()),typeof n=="string")return n;if(c=n.toString()+"_"+t,this.datescache&&this.datescache[c]&&t.indexOf("f")==-1)return this.datescache[c];if(!t||!t.length||t==="i")return this.formatDate(n,i.patterns.F,i);a=i.eras;p=t==="s";t=this.expandFormat(i,t);r=[];for(var e,nt=["0","00","000"],s,w,tt=/([^d]|^)(d|dd)([^d]|$)/g,b=0,k=this.getTokenRegExp(),d;;){var it=k.lastIndex,h=k.exec(t),rt=t.slice(it,h?h.index:t.length);if(b+=this.appendPreOrPostMatch(rt,r),!h)break;if(b%2){r.push(h[0]);continue}l=h[0];u=l.length;switch(l){case"ddd":case"dddd":g=u===3?i.days.namesAbbr:i.days.names;r.push(g[n.getDay()]);break;case"d":case"dd":s=!0;r.push(f(v(n,2),u));break;case"MMM":case"MMMM":o=v(n,1);r.push(i.months[u===3?"namesAbbr":"names"][o]);break;case"M":case"MM":r.push(f(v(n,1)+1,u));break;case"y":case"yy":case"yyyy":o=this.getEraYear(n,i,this.getEra(n,a),p);u<4&&(o=o%100);r.push(f(o,u));break;case"h":case"hh":e=n.getHours()%12;e===0&&(e=12);r.push(f(e,u));break;case"H":case"HH":r.push(f(n.getHours(),u));break;case"m":case"mm":r.push(f(n.getMinutes(),u));break;case"s":case"ss":r.push(f(n.getSeconds(),u));break;case"t":case"tt":o=n.getHours()<12?i.AM?i.AM[0]:" ":i.PM?i.PM[0]:" ";r.push(u===1?o.charAt(0):o);break;case"f":case"ff":case"fff":r.push(f(n.getMilliseconds(),3).substr(0,u));break;case"z":case"zz":e=n.getTimezoneOffset()/60;r.push((e<=0?"+":"-")+f(Math.floor(Math.abs(e)),u));break;case"zzz":e=n.getTimezoneOffset()/60;r.push((e<=0?"+":"-")+f(Math.floor(Math.abs(e)),2)+":"+f(Math.abs(n.getTimezoneOffset()%60),2));break;case"g":case"gg":i.eras&&r.push(i.eras[this.getEra(n,a)].name);break;case"/":r.push(i["/"]);break;default:throw"Invalid date format pattern '"+l+"'.";}}return y=r.join(""),this.datescache||(this.datescache=[]),this.datescache[c]=y,y}});n.jqx.data={};var t,i,k=/#.*$/,d=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,g=/^(?:GET|HEAD)$/,nt=/^\/\//,s=/\?/,tt=/([?&])_=[^&]*/,h=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,c=/\s+/,ot=n.fn.load,o={},l={},a=["*/"]+["*"];try{i=location.href}catch(st){i=document.createElement("a");i.href="";i=i.href}t=h.exec(i.toLowerCase())||[];n.extend(n.jqx.data,{ajaxSetup:function(t,i){return i?y(t,n.jqx.data.ajaxSettings):(i=t,t=n.jqx.data.ajaxSettings),y(t,i),t},ajaxSettings:{url:i,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(t[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,"async":!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":a},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:v(o),ajaxTransport:v(l),ajax:function(i,r){function st(t,i,r,u){var o,l,c,a,h,s=i;v!==2&&(v=2,ct&&clearTimeout(ct),w=undefined,ht=u||"",e.readyState=t>0?4:0,r&&(a=it(f,e,r)),t>=200&&t<300||t===304?(f.ifModified&&(h=e.getResponseHeader("Last-Modified"),h&&(n.lastModified[y]=h),h=e.getResponseHeader("Etag"),h&&(n.etag[y]=h)),t===304?(s="notmodified",o=!0):(o=rt(f,a),s=o.state,l=o.data,c=o.error,o=!c)):(c=s,(!s||t)&&(s="error",t<0&&(t=0))),e.status=t,e.statusText=(i||s)+"",o?at.resolveWith(p,[l,s,e]):at.rejectWith(p,[e,s,c]),e.statusCode(ot),ot=undefined,ft&&lt.trigger("ajax"+(o?"Success":"Error"),[e,f,o?l:c]),pt.fireWith(p,[e,s]),ft&&(lt.trigger("ajaxComplete",[e,f]),--n.active||n.event.trigger("ajaxStop")))}var vt,yt;typeof i=="object"&&(r=i,i=undefined);r=r||{};var y,ht,et,w,ct,b,ft,ut,f=n.jqx.data.ajaxSetup({},r),p=f.context||f,lt=p!==f&&(p.nodeType||p instanceof n)?n(p):n.event,at=n.Deferred(),pt=n.Callbacks("once memory"),ot=f.statusCode||{},wt={},bt={},v=0,kt="canceled",e={readyState:0,setRequestHeader:function(n,t){if(!v){var i=n.toLowerCase();n=bt[i]=bt[i]||n;wt[n]=t}return this},getAllResponseHeaders:function(){return v===2?ht:null},getResponseHeader:function(n){var t;if(v===2){if(!et)for(et={};t=d.exec(ht);)et[t[1].toLowerCase()]=t[2];t=et[n.toLowerCase()]}return t===undefined?null:t},overrideMimeType:function(n){return v||(f.mimeType=n),this},abort:function(n){return n=n||kt,w&&w.abort(n),st(0,n),this}};if(at.promise(e),e.success=e.done,e.error=e.fail,e.complete=pt.add,e.statusCode=function(n){if(n){var t;if(v<2)for(t in n)ot[t]=[ot[t],n[t]];else t=n[e.status],e.always(t)}return this},f.url=((i||f.url)+"").replace(k,"").replace(nt,t[1]+"//"),f.dataTypes=n.trim(f.dataType||"*").toLowerCase().split(c),f.crossDomain==null&&(b=h.exec(f.url.toLowerCase()),f.crossDomain=!!(b&&(b[1]!==t[1]||b[2]!==t[2]||(b[3]||(b[1]==="http:"?80:443))!=(t[3]||(t[1]==="http:"?80:443))))),f.data&&f.processData&&typeof f.data!="string"&&(f.data=n.param(f.data,f.traditional)),u(o,f,r,e),v===2)return e;ft=f.global;f.type=f.type.toUpperCase();f.hasContent=!g.test(f.type);ft&&n.active++==0&&n.event.trigger("ajaxStart");f.hasContent||(f.data&&(f.url+=(s.test(f.url)?"&":"?")+f.data,delete f.data),y=f.url,f.cache===!1&&(vt=(new Date).getTime(),yt=f.url.replace(tt,"$1_="+vt),f.url=yt+(yt===f.url?(s.test(f.url)?"&":"?")+"_="+vt:"")));(f.data&&f.hasContent&&f.contentType!==!1||r.contentType)&&e.setRequestHeader("Content-Type",f.contentType);f.ifModified&&(y=y||f.url,n.lastModified[y]&&e.setRequestHeader("If-Modified-Since",n.lastModified[y]),n.etag[y]&&e.setRequestHeader("If-None-Match",n.etag[y]));e.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+(f.dataTypes[0]!=="*"?", "+a+"; q=0.01":""):f.accepts["*"]);for(ut in f.headers)e.setRequestHeader(ut,f.headers[ut]);if(f.beforeSend&&(f.beforeSend.call(p,e,f)===!1||v===2))return e.abort();kt="abort";for(ut in{success:1,error:1,complete:1})e[ut](f[ut]);if(w=u(l,f,r,e),w){e.readyState=1;ft&&lt.trigger("ajaxSend",[e,f]);f.async&&f.timeout>0&&(ct=setTimeout(function(){e.abort("timeout")},f.timeout));try{v=1;w.send(wt,st)}catch(dt){if(v<2)st(-1,dt);else throw dt;}}else st(-1,"No Transport");return e},active:0,lastModified:{},etag:{}});var p=[],ut=/\?/,f=/(=)\?(?=&|$)|\?\?/,ft=(new Date).getTime();n.jqx.data.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=p.pop()||n.expando+"_"+ft++;return this[t]=!0,t}});n.jqx.data.ajaxPrefilter("json jsonp",function(t,i,r){var u,o,e,s=t.data,h=t.url,c=t.jsonp!==!1,l=c&&f.test(h),a=c&&!l&&typeof s=="string"&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&f.test(s);if(t.dataTypes[0]==="jsonp"||l||a)return u=t.jsonpCallback=n.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o=window[u],l?t.url=h.replace(f,"$1"+u):a?t.data=s.replace(f,"$1"+u):c&&(t.url+=(ut.test(h)?"&":"?")+t.jsonp+"="+u),t.converters["script json"]=function(){return e||n.error(u+" was not called"),e[0]},t.dataTypes[0]="json",window[u]=function(){e=arguments},r.always(function(){window[u]=o;t[u]&&(t.jsonpCallback=i.jsonpCallback,p.push(u));e&&n.isFunction(o)&&o(e[0]);e=o=undefined}),"script"});n.jqx.data.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(t){return n.globalEval(t),t}}});n.jqx.data.ajaxPrefilter("script",function(n){n.cache===undefined&&(n.cache=!1);n.crossDomain&&(n.type="GET",n.global=!1)});n.jqx.data.ajaxTransport("script",function(n){if(n.crossDomain){var t,i=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(r,u){t=document.createElement("script");t.async="async";n.scriptCharset&&(t.charset=n.scriptCharset);t.src=n.url;t.onload=t.onreadystatechange=function(n,r){(r||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,i&&t.parentNode&&i.removeChild(t),t=undefined,r||u(200,"success"))};i.insertBefore(t,i.firstChild)},abort:function(){if(t)t.onload(0,1)}}}});e=window.ActiveXObject?function(){for(var n in r)r[n](0,1)}:!1;w=0;n.jqx.data.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&b()||et()}:b,function(t){n.extend(n.support,{ajax:!!t,cors:!!t&&"withCredentials"in t})}(n.jqx.data.ajaxSettings.xhr());n.support||(n.support={ajax:!0});n.support.ajax&&n.jqx.data.ajaxTransport(function(t){if(!t.crossDomain||n.support.cors){var i;return{send:function(u,f){var h,s,o=t.xhr();if(t.username?o.open(t.type,t.url,t.async,t.username,t.password):o.open(t.type,t.url,t.async),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType);t.crossDomain||u["X-Requested-With"]||(u["X-Requested-With"]="XMLHttpRequest");try{for(s in u)o.setRequestHeader(s,u[s])}catch(c){}o.send(t.hasContent&&t.data||null);i=function(n,u){var s,a,v,c,l;try{if(i&&(u||o.readyState===4))if(i=undefined,h&&(o.onreadystatechange=function(){},e&&delete r[h]),u)o.readyState!==4&&o.abort();else{s=o.status;v=o.getAllResponseHeaders();c={};l=o.responseXML;l&&l.documentElement&&(c.xml=l);try{c.text=o.responseText}catch(p){}try{a=o.statusText}catch(p){a=""}s||!t.isLocal||t.crossDomain?s===1223&&(s=204):s=c.text?200:404}}catch(y){u||f(-1,y)}c&&f(s,a,c,v)};t.async?o.readyState===4?setTimeout(i,0):(h=++w,e&&(r||(r={},n(window).unload(e)),r[h]=i),o.onreadystatechange=i):i()},abort:function(){i&&i(0,1)}}}});n.jqx.filter=function(){var r;this.operator="and";var s=1,u=["EMPTY","NOT_EMPTY","CONTAINS","CONTAINS_CASE_SENSITIVE","DOES_NOT_CONTAIN","DOES_NOT_CONTAIN_CASE_SENSITIVE","STARTS_WITH","STARTS_WITH_CASE_SENSITIVE","ENDS_WITH","ENDS_WITH_CASE_SENSITIVE","EQUAL","EQUAL_CASE_SENSITIVE","NULL","NOT_NULL"],f=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],e=["EQUAL","NOT_EQUAL","LESS_THAN","LESS_THAN_OR_EQUAL","GREATER_THAN","GREATER_THAN_OR_EQUAL","NULL","NOT_NULL"],o=["EQUAL","NOT_EQUAL"],t=[],i=[];this.evaluate=function(n){for(var f,u=!0,r=0;r<t.length;r++)f=t[r].evaluate(n),u=r==0?f:i[r]==s||i[r]=="or"?u||f:u&&f;return u};this.getfilterscount=function(){return t.length};this.setoperatorsbyfiltertype=function(n,t){switch(n){case"numericfilter":f=t;break;case"stringfilter":u=t;break;case"datefilter":e=t;break;case"booleanfilter":o=t}};this.getoperatorsbyfiltertype=function(n){var t=[];switch(n){case"numericfilter":t=f.slice(0);break;case"stringfilter":t=u.slice(0);break;case"datefilter":t=e.slice(0);break;case"booleanfilter":t=o.slice(0)}return t};r=function(){var n=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return n()+"-"+n()+"-"+n()};this.createfilter=function(n,t,i,r,u,f){if(n==null||n==undefined)return null;switch(n){case"numericfilter":return new l(t,i.toUpperCase());case"stringfilter":return new h(t,i.toUpperCase());case"datefilter":return new a(t,i.toUpperCase(),u,f);case"booleanfilter":return new c(t,i.toUpperCase());case"custom":return new v(t,i.toUpperCase(),r)}throw new Error("jqxGrid: There is no such filter type. The available filter types are: 'numericfilter', 'stringfilter', 'datefilter' and 'booleanfilter'");};this.getfilters=function(){for(var r,u=[],n=0;n<t.length;n++)r={value:t[n].filtervalue,condition:t[n].comparisonoperator,operator:i[n],type:t[n].type},t[n].data&&(r.id=t[n].data),u[n]=r;return u};this.addfilter=function(n,u){t[t.length]=u;u.key=r();i[i.length]=n};this.removefilter=function(n){for(var r=0;r<t.length;r++)if(t[r].key==n.key){t.splice(r,1);i.splice(r,1);break}};this.getoperatorat=function(n){return n==undefined||n==null?null:n<0||n>t.length?null:i[n]};this.setoperatorat=function(n,r){if(n==undefined||n==null||n<0||n>t.length)return null;i[r]=r};this.getfilterat=function(n){return n==undefined||n==null?null:n<0||n>t.length?null:t[n]};this.setfilterat=function(n,i){if(n==undefined||n==null||n<0||n>t.length)return null;i.key=r();t[n]=i};this.clear=function(){t=[];i=[]};var h=function(t,i){this.filtervalue=t;this.comparisonoperator=i;this.type="stringfilter";this.evaluate=function(t){var i=this.filtervalue,h=this.comparisonoperator,c,y,l,e,o,r,s,v;if(t==null||t==undefined||t==""){if(h=="NULL"||h=="EQUAL"&&t==i||h=="NOT_EQUAL"&&t!=i)return!0;if(h!="EMPTY")return!1;if(t=="")return!0}c="";try{c=t.toString()}catch(k){return!0}if(y=function(t,i){switch(h){case"EQUAL":return n.jqx.string.equalsIgnoreCase(t,i);case"EQUAL_CASE_SENSITIVE":return n.jqx.string.equals(t,i);case"NOT_EQUAL":return!n.jqx.string.equalsIgnoreCase(t,i);case"NOT_EQUAL_CASE_SENSITIVE":return!n.jqx.string.equals(t,i);case"CONTAINS":return n.jqx.string.containsIgnoreCase(t,i);case"CONTAINS_CASE_SENSITIVE":return n.jqx.string.contains(t,i);case"DOES_NOT_CONTAIN":return!n.jqx.string.containsIgnoreCase(t,i);case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!n.jqx.string.contains(t,i);case"EMPTY":return t=="";case"NOT_EMPTY":return t!="";case"NOT_NULL":return t!=null;case"STARTS_WITH":return n.jqx.string.startsWithIgnoreCase(t,i);case"ENDS_WITH":return n.jqx.string.endsWithIgnoreCase(t,i);case"ENDS_WITH_CASE_SENSITIVE":return n.jqx.string.endsWith(t,i);case"STARTS_WITH_CASE_SENSITIVE":return n.jqx.string.startsWith(t,i);default:return!1}},l=[],i&&i.indexOf&&(i.indexOf("|")>=0||i.indexOf(" AND ")>=0||i.indexOf(" OR ")>=0||i.indexOf(" and ")>=0||i.indexOf(" or ")>=0)){if(e=y(c,i),e)return e;var u=i.indexOf(" AND ")>=0?i.split(" AND "):[],f=i.indexOf(" OR ")>=0?i.split(" OR "):[],p=i.indexOf(" and ")>=0?i.split(" and "):[],w=i.indexOf(" or ")>=0?i.split(" or "):[],a=i.indexOf("|")>=0?i.split("|"):[];if(a.length>0)for(r=0;r<a.length;r++)a[r]=n.trim(a[r]);if(o=i.indexOf(" ")>=0?i.split(" "):[],o.length>0)for(r=0;r<o.length;r++)o[r]=n.trim(o[r]);if(u=u.concat(o),u=u.concat(p),f=f.concat(a),f=f.concat(w),u.length>0)for(r=0;r<u.length;r++)!u[r].indexOf(" OR ")>=0&&l.push(u[r]);if(f.length>0)for(r=0;r<f.length;r++)!f[r].indexOf(" AND ")>=0&&l.push(f[r]);for(s=undefined,v=0;v<l.length;v++){var t=l[v],e=y(c,t),b=v<u.length?"and":"or";s=s==undefined?e:b=="or"?s||e:s&&e}return s}return y(c,i)}},c=function(n,t){this.filtervalue=n;this.comparisonoperator=t;this.type="booleanfilter";this.evaluate=function(n){var i=this.filtervalue,r=this.comparisonoperator,t;if(n==null||n==undefined)return r=="NULL"?!0:!1;t=n;switch(r){case"EQUAL":return t==i||t.toString()==i.toString();case"NOT_EQUAL":return t!=i&&t.toString()!=i.toString();default:return!1}}},l=function(t,i){this.filtervalue=t;this.comparisonoperator=i;this.type="numericfilter";this.evaluate=function(t){var i=this.filtervalue,h=this.comparisonoperator,u,v,f,c,r,l,a,t,y,e,p;if(t===null||t===undefined||t===""){if(h=="NOT_NULL")return!1;if(h=="NULL")return!0;switch(h){case"EQUAL":return t==i;case"NOT_EQUAL":return t!=i}return!1}if(h=="NULL")return!1;if(h=="NOT_NULL")return!0;u=t;try{u=parseFloat(u)}catch(k){if(t.toString()!="")return!1}if(v=function(t,i){switch(h){case"EQUAL":return t==i;case"NOT_EQUAL":return t!=i;case"GREATER_THAN":return t>i;case"GREATER_THAN_OR_EQUAL":return t>=i;case"LESS_THAN":return t<i;case"LESS_THAN_OR_EQUAL":return t<=i;case"STARTS_WITH":return n.jqx.string.startsWithIgnoreCase(t.toString(),i.toString());case"ENDS_WITH":return n.jqx.string.endsWithIgnoreCase(t.toString(),i.toString());case"ENDS_WITH_CASE_SENSITIVE":return n.jqx.string.endsWith(t.toString(),i.toString());case"STARTS_WITH_CASE_SENSITIVE":return n.jqx.string.startsWith(t.toString(),i.toString());case"CONTAINS":return n.jqx.string.containsIgnoreCase(t.toString(),i.toString());case"CONTAINS_CASE_SENSITIVE":return n.jqx.string.contains(t.toString(),i.toString());case"DOES_NOT_CONTAIN":return!n.jqx.string.containsIgnoreCase(t.toString(),i.toString());case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!n.jqx.string.contains(t.toString(),i.toString());default:return!0}},f=[],i&&i.indexOf&&(i.indexOf("|")>=0||i.indexOf(" AND ")>=0||i.indexOf(" OR ")>=0||i.indexOf(" and ")>=0||i.indexOf(" or ")>=0)){if(e=v(u,i),e)return e;i=i.toString();var s=i.indexOf(" AND ")>=0?i.split(" AND "):[],o=i.indexOf(" OR ")>=0?i.split(" OR "):[],w=i.indexOf(" and ")>=0?i.split(" and "):[],b=i.indexOf(" or ")>=0?i.split(" or "):[];if(s=s.concat(w),o=o.concat(b),c=i.indexOf("|")>=0?i.split("|"):[],c.length>0)for(r=0;r<c.length;r++)c[r]=n.trim(c[r]);if(o=o.concat(c),s.length>0)for(r=0;r<s.length;r++)!s[r].indexOf(" OR ")>=0&&f.push(s[r]);if(o.length>0)for(r=0;r<o.length;r++)!o[r].indexOf(" AND ")>=0&&f.push(o[r]);for(l=undefined,a=0;a<f.length;a++)t=f[a],t&&t.indexOf&&t.indexOf("..")>=0?(y=t.toString().split(".."),y.length==2&&(e=u>=y[0]&&u<=y[1])):e=v(u,t),p=a<s.length?"and":"or",l=l==undefined?e:p=="or"?l||e:l&&e;return l}return i&&i.indexOf&&i.indexOf("..")>=0&&(f=i.toString().split(".."),f.length==2)?u>=f[0]&&u<=f[1]:v(u,i)}},a=function(t,i,r,u){var e,o,s,f;this.filtervalue=t;this.type="datefilter";e=this;r!=undefined&&u!=undefined?(o=n.jqx.dataFormat.parsedate(t,r,u),o!=null?this.filterdate=o:(s=n.jqx.dataFormat.tryparsedate(t,u),s!=null&&(this.filterdate=s))):(f=new Date(t),this.filterdate=f.toString()=="NaN"||f.toString()=="Invalid Date"?n.jqx.dataFormat.tryparsedate(t):f);this.filterdate||(f=new Date(t),this.filterdate=f.toString()=="NaN"||f.toString()=="Invalid Date"?n.jqx.dataFormat.tryparsedate(t):f);this.comparisonoperator=i;this.evaluate=function(t){var i=this.filtervalue,a=this.comparisonoperator,o,k,d,v,w,g,h,y,f,p,b,t,nt,s,tt;if(t==null||t==undefined||t==""){if(a=="NOT_NULL")return!1;if(a=="NULL")return!0;switch(a){case"EQUAL":return t==i;case"NOT_EQUAL":return t!=i}return!1}if(a=="NULL")return!1;if(a=="NOT_NULL")return!0;o=new Date;o.setFullYear(1900,0,1);o.setHours(12,0,0,0);try{k=new Date(t);t=k.toString()=="NaN"||k.toString()=="Invalid Date"?n.jqx.dataFormat.tryparsedate(t):k;o=t;d=!1;r!=undefined&&u!=undefined&&(r.indexOf("t")>=0||r.indexOf("T")>=0||r.indexOf(":")>=0||r.indexOf("f")>=0)&&(d=!0,i&&i.toString().indexOf(":")==-1&&(s=n.jqx.dataFormat.tryparsedate(i.toString()+":00",u),s!=null&&(e.filterdate=s)));d||(o.setHours(0),o.setMinutes(0),o.setSeconds(0))}catch(ut){if(t.toString()!="")return!1}if(e.filterdate!=null)i=e.filterdate;else if(i&&i.indexOf&&(i.indexOf(":")!=-1||!isNaN(parseInt(i)))){for(v=new Date(o),v.setHours(12,0,0,0),w=i.split(":"),f=0;f<w.length;f++)f==0&&v.setHours(w[f]),f==1&&v.setMinutes(w[f]),f==2&&v.setSeconds(w[f]);i=v}if(d&&i&&i.setFullYear&&o&&o.getFullYear&&r.indexOf("d")==-1&&r.indexOf("M")==-1&&r.indexOf("y")==-1&&i.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()),g=function(t,i){t==null&&(t="");switch(a){case"EQUAL":return t.toString()==i.toString();case"NOT_EQUAL":return t.toString()!=i.toString();case"GREATER_THAN":return t>i;case"GREATER_THAN_OR_EQUAL":return t>=i;case"LESS_THAN":return t<i;case"LESS_THAN_OR_EQUAL":return t<=i;case"STARTS_WITH":return n.jqx.string.startsWithIgnoreCase(t.toString(),i.toString());case"ENDS_WITH":return n.jqx.string.endsWithIgnoreCase(t.toString(),i.toString());case"ENDS_WITH_CASE_SENSITIVE":return n.jqx.string.endsWith(t.toString(),i.toString());case"STARTS_WITH_CASE_SENSITIVE":return n.jqx.string.startsWith(t.toString(),i.toString());case"CONTAINS":return n.jqx.string.containsIgnoreCase(t.toString(),i.toString());case"CONTAINS_CASE_SENSITIVE":return n.jqx.string.contains(t.toString(),i.toString());case"DOES_NOT_CONTAIN":return!n.jqx.string.containsIgnoreCase(t.toString(),i.toString());case"DOES_NOT_CONTAIN_CASE_SENSITIVE":return!n.jqx.string.contains(t.toString(),i.toString());default:return!0}},h=[],i&&i.indexOf&&(i.indexOf("|")>=0||i.indexOf(" AND ")>=0||i.indexOf(" OR ")>=0||i.indexOf(" and ")>=0||i.indexOf(" or ")>=0)){if(s=g(o,i),s)return s;var l=i.indexOf(" AND ")>=0?i.split(" AND "):[],c=i.indexOf(" OR ")>=0?i.split(" OR "):[],it=i.indexOf(" and ")>=0?i.split(" and "):[],rt=i.indexOf(" or ")>=0?i.split(" or "):[];if(l=l.concat(it),c=c.concat(rt),y=i.indexOf("|")>=0?i.split("|"):[],y.length>0)for(f=0;f<y.length;f++)y[f]=n.trim(y[f]);if(c=c.concat(y),l.length>0)for(f=0;f<l.length;f++)!l[f].indexOf(" OR ")>=0&&h.push(l[f]);if(c.length>0)for(f=0;f<c.length;f++)!c[f].indexOf(" AND ")>=0&&h.push(c[f]);for(p=undefined,b=0;b<h.length;b++)t=h[b],t&&t.indexOf&&t.indexOf("..")>=0?(nt=t.toString().split(".."),nt.length==2&&(s=o>=nt[0]&&o<=nt[1])):s=g(o,t),tt=b<l.length?"and":"or",p=p==undefined?s:tt=="or"?p||s:p&&s;return p}return i&&i.indexOf&&i.indexOf("..")>=0&&(h=i.toString().split(".."),h.length==2)?o>=h[0]&&o<=h[1]:g(o,i)}},v=function(n,t,i){this.filtervalue=n;this.comparisonoperator=t;this.evaluate=function(n){return i(this.filtervalue,n,this.comparisonoperator)}}}}(jqxBaseFramework),function(n){n.jqx.cssroundedcorners=function(n){var t={all:"jqx-rc-all",top:"jqx-rc-t",bottom:"jqx-rc-b",left:"jqx-rc-l",right:"jqx-rc-r","top-right":"jqx-rc-tr","top-left":"jqx-rc-tl","bottom-right":"jqx-rc-br","bottom-left":"jqx-rc-bl"};for(prop in t)if(t.hasOwnProperty(prop)&&n==prop)return t[prop]};n.jqx.jqxWidget("jqxButton","",{});n.extend(n.jqx._jqxButton.prototype,{defineInstance:function(){var t={type:"",cursor:"arrow",roundedCorners:"all",disabled:!1,height:null,width:null,overrideTheme:!1,enableHover:!0,enableDefault:!0,enablePressed:!0,imgPosition:"center",imgSrc:"",imgWidth:16,imgHeight:16,value:null,textPosition:"",textImageRelation:"overlay",rtl:!1,_ariaDisabled:!1,_scrollAreaButton:!1,template:"default",aria:{"aria-disabled":{name:"disabled",type:"boolean"}}};return this===n.jqx._jqxButton.prototype?t:(n.extend(!0,this,t),t)},_addImage:function(t){var i=this,e,u,r,f,o,s,h,c,l;(i.element.nodeName.toLowerCase()=="input"||i.element.nodeName.toLowerCase()=="button"||i.element.nodeName.toLowerCase()=="div")&&(i._img?(i._img.setAttribute("src",i.imgSrc),i._img.setAttribute("width",i.imgWidth),i._img.setAttribute("height",i.imgHeight),i._text.innerHTML=i.value):(i.field=i.element,i.field.className&&(i._className=i.field.className),e={title:i.field.title},u=null,i.field.getAttribute("value")?u=i.field.getAttribute("value"):i.element.nodeName.toLowerCase()!="input"&&(u=i.element.innerHTML),i.value&&(u=i.value),e.id=i.field.id.length?i.field.id.replace(/[^\w]/g,"_")+"_"+t:n.jqx.utilities.createId()+"_"+t,r=document.createElement("div"),r.id=e.id,r.title=e.title,r.style.cssText=i.field.style.cssText,r.style.boxSizing="border-box",f=document.createElement("img"),f.setAttribute("src",i.imgSrc),f.setAttribute("width",i.imgWidth),f.setAttribute("height",i.imgHeight),r.appendChild(f),i._img=f,o=document.createElement("span"),u&&(o.innerHTML=u,i.value=u),r.appendChild(o),i._text=o,i.field.style.display="none",i.field.parentNode&&i.field.parentNode.insertBefore(r,i.field.nextSibling),s=i.host.data(),i.host=n(r),i.host.data(s),i.element=r,i.element.id=i.field.id,i.field.id=e.id,h=new n(i.element),c=new n(i.field),i._className&&(h.addClass(i._className),c.removeClass(i._className)),i.field.tabIndex&&(l=i.field.tabIndex,i.field.tabIndex=-1,i.element.tabIndex=l)),i._img.style.display=i.imgSrc?"inline":"none",i._text.style.display=i.value?"inline":"none",i._positionTextAndImage())},_positionTextAndImage:function(){var n=this,nt=n.element.offsetWidth,tt=n.element.offsetHeight,f=n.imgWidth,e=n.imgHeight;n.imgSrc==""&&(f=0,e=0);var o=n._text.offsetWidth,s=n._text.offsetHeight,t=4,y=4,p=4,w=0,b=0;switch(n.textImageRelation){case"imageBeforeText":case"textBeforeImage":w=f+o+2*p+t+2*y;b=Math.max(e,s)+2*p+t+2*y;break;case"imageAboveText":case"textAboveImage":w=Math.max(f,o)+2*p;b=e+s+t+2*p+2*y;break;case"overlay":w=Math.max(f,o)+2*p;b=Math.max(e,s)+2*p}n.width||(n.element.style.width=w+"px",nt=w);n.height||(n.element.style.height=b+"px",tt=b);n._img.style.position="absolute";n._text.style.position="absolute";n.element.style.position="relative";n.element.style.overflow="hidden";var i={},r={},a=function(n,t,i,r,u){t.width<r&&(t.width=r);t.height<u&&(t.height=u);switch(i){case"left":n.style.left=t.left+"px";n.style.top=t.top+t.height/2-u/2+"px";break;case"topLeft":n.style.left=t.left+"px";n.style.top=t.top+"px";break;case"bottomLeft":n.style.left=t.left+"px";n.style.top=t.top+t.height-u+"px";break;default:case"center":n.style.left=t.left+t.width/2-r/2+"px";n.style.top=t.top+t.height/2-u/2+"px";break;case"top":n.style.left=t.left+t.width/2-r/2+"px";n.style.top=t.top+"px";break;case"bottom":n.style.left=t.left+t.width/2-r/2+"px";n.style.top=t.top+t.height-u+"px";break;case"right":n.style.left=t.left+t.width-r+"px";n.style.top=t.top+t.height/2-u/2+"px";break;case"topRight":n.style.left=t.left+t.width-r+"px";n.style.top=t.top+"px";break;case"bottomRight":n.style.left=t.left+t.width-r+"px";n.style.top=t.top+t.height-u+"px"}},u=0,h=0,v=nt,g=tt,it=(v-u)/2,rt=(g-h)/2,k=n._img,d=n._text,c=g-h,l=v-u;u+=y;h+=y;v=v-y-2;l=l-2*y-2;c=c-2*y-2;switch(n.textImageRelation){case"imageBeforeText":switch(n.imgPosition){case"left":case"topLeft":case"bottomLeft":r={left:u,top:h,width:u+f,height:c};i={left:u+f+t,top:h,width:l-f-t,height:c};break;case"center":case"top":case"bottom":r={left:it-o/2-f/2-t/2,top:h,width:f,height:c};i={left:r.left+f+t,top:h,width:v-r.left-f-t,height:c};break;case"right":case"topRight":case"bottomRight":r={left:v-o-f-t,top:h,width:f,height:c};i={left:r.left+f+t,top:h,width:v-r.left-f-t,height:c}}a(k,r,n.imgPosition,f,e);a(d,i,n.textPosition,o,s);break;case"textBeforeImage":switch(n.textPosition){case"left":case"topLeft":case"bottomLeft":i={left:u,top:h,width:u+o,height:c};r={left:u+o+t,top:h,width:l-o-t,height:c};break;case"center":case"top":case"bottom":i={left:it-o/2-f/2-t/2,top:h,width:o,height:c};r={left:i.left+o+t,top:h,width:v-i.left-o-t,height:c};break;case"right":case"topRight":case"bottomRight":i={left:v-o-f-t,top:h,width:o,height:c};r={left:i.left+o+t,top:h,width:v-i.left-o-t,height:c}}a(k,r,n.imgPosition,f,e);a(d,i,n.textPosition,o,s);break;case"imageAboveText":switch(n.imgPosition){case"topRight":case"top":case"topLeft":r={left:u,top:h,width:l,height:e};i={left:u,top:h+e+t,width:l,height:c-e-t};break;case"left":case"center":case"right":r={left:u,top:rt-e/2-s/2-t/2,width:l,height:e};i={left:u,top:r.top+t+e,width:l,height:c-r.top-t-e};break;case"bottomLeft":case"bottom":case"bottomRight":r={left:u,top:g-e-s-t,width:l,height:e};i={left:u,top:r.top+t+e,width:l,height:s}}a(k,r,n.imgPosition,f,e);a(d,i,n.textPosition,o,s);break;case"textAboveImage":switch(n.textPosition){case"topRight":case"top":case"topLeft":i={left:u,top:h,width:l,height:s};r={left:u,top:h+s+t,width:l,height:c-s-t};break;case"left":case"center":case"right":i={left:u,top:rt-e/2-s/2-t/2,width:l,height:s};r={left:u,top:i.top+t+s,width:l,height:c-i.top-t-s};break;case"bottomLeft":case"bottom":case"bottomRight":i={left:u,top:g-e-s-t,width:l,height:s};r={left:u,top:i.top+t+s,width:l,height:e}}a(k,r,n.imgPosition,f,e);a(d,i,n.textPosition,o,s);break;case"overlay":default:i={left:u,top:h,width:l,height:c};r={left:u,top:h,width:l,height:c};a(k,r,n.imgPosition,f,e);a(d,i,n.textPosition,o,s)}},createInstance:function(){var t=this,f,i,r,u;t._setSize();f=t.isMaterialized();t.buttonObj=new n(t.element);(t.imgSrc!=""||t.textPosition!=""||t.element.value&&t.element.value.indexOf("<")>=0||t.value!=null)&&(t.refresh(),t._addImage("jqxButton"),t.buttonObj=new n(t.element));t._ariaDisabled||t.element.setAttribute("role","button");t.type!==""&&t.element.setAttribute("type",t.type);t.overrideTheme||(t.buttonObj.addClass(t.toThemeProperty(n.jqx.cssroundedcorners(t.roundedCorners))),t.enableDefault&&t.buttonObj.addClass(t.toThemeProperty("jqx-button")),t.buttonObj.addClass(t.toThemeProperty("jqx-widget")));t.isTouchDevice=n.jqx.mobile.isTouchDevice();t._ariaDisabled||n.jqx.aria(this);t.cursor!="arrow"&&(t.element.style.cursor=t.disabled?"arrow":t.cursor);i="mouseenter mouseleave mousedown focus blur";t._scrollAreaButton&&(i="mousedown");t.isTouchDevice&&(t.addHandler(t.host,n.jqx.mobile.getTouchEventName("touchstart"),function(){t.isPressed=!0;t.refresh()}),t.addHandler(n(document),n.jqx.mobile.getTouchEventName("touchend")+"."+t.element.id,function(){t.isPressed=!1;t.refresh()}));t.addHandler(t.host,i,function(n){switch(n.type){case"mouseenter":t.isTouchDevice||!t.disabled&&t.enableHover&&(t.isMouseOver=!0,t.refresh());break;case"mouseleave":t.isTouchDevice||!t.disabled&&t.enableHover&&(t.isMouseOver=!1,t.refresh());break;case"mousedown":t.disabled||(t.isPressed=!0,t.refresh());break;case"focus":t.disabled||(t.isFocused=!0,t.refresh());break;case"blur":t.disabled||(t.isFocused=!1,t.refresh())}});t.mouseupfunc=function(){t.disabled||(t.isPressed||t.isMouseOver)&&(t.isPressed=!1,t.refresh())};t.addHandler(document,"mouseup.button"+t.element.id,t.mouseupfunc);try{(document.referrer!=""||window.frameElement)&&window.top!=null&&window.top!=window.that&&(r="",window.parent&&document.referrer&&(r=document.referrer),r.indexOf(document.location.host)!=-1&&(u=function(){t.isPressed=!1;t.refresh()},window.top.document&&t.addHandler(n(window.top.document),"mouseup",u)))}catch(e){}t.propertyChangeMap.roundedCorners=function(t,i,r,u){t.buttonObj.removeClass(t.toThemeProperty(n.jqx.cssroundedcorners(r)));t.buttonObj.addClass(t.toThemeProperty(n.jqx.cssroundedcorners(u)))};t.propertyChangeMap.disabled=function(t,i,r,u){r!=u&&(t.refresh(),t.element.setAttribute("disabled",u),t.element.disabled=u,t.element.style.cursor=u?"default":t.cursor,n.jqx.aria(t,"aria-disabled",t.disabled))};t.propertyChangeMap.rtl=function(n,t,i,r){i!=r&&n.refresh()};t.propertyChangeMap.template=function(n,t,i,r){i!=r&&(n.buttonObj.removeClass(n.toThemeProperty("jqx-"+i)),n.refresh())};t.propertyChangeMap.theme=function(t){t.buttonObj.removeClass(t.element);t.enableDefault&&t.buttonObj.addClass(t.toThemeProperty("jqx-button"));t.buttonObj.addClass(t.toThemeProperty("jqx-widget"));t.overrideTheme||t.buttonObj.addClass(t.toThemeProperty(n.jqx.cssroundedcorners(t.roundedCorners)));t._oldCSSCurrent=null;t.refresh()};t.disabled&&(t.element.disabled=!0,t.element.setAttribute("disabled","true"))},resize:function(n,t){this.width=n;this.height=t;this._setSize()},val:function(){var t=this,i=t.host.find("input");if(i.length>0)return arguments.length==0||typeof value=="object"?i.val():(i.val(value),t.refresh(),i.val());if(arguments.length==0||typeof value=="object")return t.element.nodeName.toLowerCase()=="button"?n(t.element).text():t.element.value;if(arguments.length>0&&t._text){t._text.innerHTML=arguments[0];t.refresh();return}arguments.length>0&&t.element.nodeName==="DIV"&&(t.element.innerHTML=arguments[0],t.refresh());t.element.value=arguments[0];t.element.nodeName.toLowerCase()=="button"&&n(t.element).html(arguments[0]);t.refresh()},_setSize:function(){var i=this,n=i.height,t=i.width;n&&(isNaN(n)||(n=n+"px"),i.element.style.height=n);t&&(isNaN(t)||(t=t+"px"),i.element.style.width=t)},_removeHandlers:function(){var t=this;t.removeHandler(t.host,"selectstart");t.removeHandler(t.host,"click");t.removeHandler(t.host,"focus");t.removeHandler(t.host,"blur");t.removeHandler(t.host,"mouseenter");t.removeHandler(t.host,"mouseleave");t.removeHandler(t.host,"mousedown");t.removeHandler(n(document),"mouseup.button"+t.element.id,t.mouseupfunc);t.isTouchDevice&&(t.removeHandler(t.host,n.jqx.mobile.getTouchEventName("touchstart")),t.removeHandler(n(document),n.jqx.mobile.getTouchEventName("touchend")+"."+t.element.id));t.mouseupfunc=null;delete t.mouseupfunc},focus:function(){this.host.focus()},destroy:function(){var t=this,i;t._removeHandlers();i=n.data(t.element,"jqxButton");i&&delete i.instance;t.host.removeClass();t.host.removeData();t.host.remove();delete t.set;delete t.get;delete t.call;delete t.element;delete t.host},render:function(){this.refresh()},propertiesChangedHandler:function(n,t,i){i&&i.width&&i.height&&Object.keys(i).length==2&&(n._setSize(),n.refresh())},propertyChangedHandler:function(n,t,i,r){this.isInitialized!=undefined&&this.isInitialized!=!1&&r!=i&&(n.batchUpdate&&n.batchUpdate.width&&n.batchUpdate.height&&Object.keys(n.batchUpdate).length==2||(t==="type"&&n.element.setAttribute("type",r),(t=="textImageRelation"||t=="textPosition"||t=="imgPosition")&&(n._img?n._positionTextAndImage():n._addImage("jqxButton")),(t=="imgSrc"||t=="imgWidth"||t=="imgHeight")&&n._addImage("jqxButton"),t==="value"&&n.val(r),(t=="width"||t=="height")&&(n._setSize(),n.refresh())))},refresh:function(){var n=this,t;if(!n.overrideTheme){var u=n.toThemeProperty("jqx-fill-state-focus"),f=n.toThemeProperty("jqx-fill-state-disabled"),i=n.toThemeProperty("jqx-fill-state-normal");n.enableDefault||(i="");var e=n.toThemeProperty("jqx-fill-state-hover"),r=n.toThemeProperty("jqx-fill-state-pressed"),o=n.toThemeProperty("jqx-fill-state-pressed");if(n.enablePressed||(r=""),t="",n.host){if(n.element.disabled=n.disabled,n.disabled){n._oldCSSCurrent&&n.buttonObj.removeClass(n._oldCSSCurrent);t=i+" "+f;n.template!=="default"&&n.template!==""&&(t+=" jqx-"+n.template,n.theme!=""&&(t+=" jqx-"+n.template+"-"+n.theme));n.buttonObj.addClass(t);n._oldCSSCurrent=t;return}t=n.isMouseOver&&!n.isTouchDevice?n.isPressed?o:e:n.isPressed?r:i;n.isFocused&&(t+=" "+u);n.template!=="default"&&n.template!==""&&(t+=" jqx-"+n.template,n.theme!=""&&(t+=" jqx-"+n.template+"-"+n.theme));t!=n._oldCSSCurrent&&(n._oldCSSCurrent&&n.buttonObj.removeClass(n._oldCSSCurrent),n.buttonObj.addClass(t),n._oldCSSCurrent=t);n.rtl&&(n.buttonObj.addClass(n.toThemeProperty("jqx-rtl")),n.element.style.direction="rtl");n.isMaterialized()&&n.host.addClass("buttonRipple")}}}});n.jqx.jqxWidget("jqxLinkButton","",{});n.extend(n.jqx._jqxLinkButton.prototype,{defineInstance:function(){this.disabled=!1;this.height=null;this.width=null;this.rtl=!1;this.href=null},createInstance:function(t){var o=this,r,u,i,f,e;this.host.onselectstart=function(){return!1};this.host.attr("role","button");r=this.height||this.element.offsetHeight;u=this.width||this.element.offsetWidth;this.href=this.element.getAttribute("href");this.target=this.element.getAttribute("target");this.content=this.host.text();this.element.innerHTML="";i=document.createElement("input");i.type="button";i.className="jqx-wrapper "+this.toThemeProperty("jqx-reset");this._setSize(i,u,r);i.value=this.content;f=new n(this.element);f.addClass(this.toThemeProperty("jqx-link"));this.element.style.color="inherit";this.element.appendChild(i);this._setSize(i,u,r);e=t==undefined?{}:t[0]||{};n(i).jqxButton(e);this.wrapElement=i;this.disabled&&(this.element.disabled=!0);this.propertyChangeMap.disabled=function(n,t,i,r){n.element.disabled=r;n.wrapElement.jqxButton({disabled:r})};this.addHandler(n(i),"click",function(n){if(!this.disabled)o.onclick(n);return!1})},_setSize:function(n,t,i){var r=this;i&&(isNaN(i)||(i=i+"px"),n.style.height=i);t&&(isNaN(t)||(t=t+"px"),n.style.width=t)},onclick:function(){this.target!=null?window.open(this.href,this.target):window.location=this.href}});n.jqx.jqxWidget("jqxRepeatButton","jqxButton",{});n.extend(n.jqx._jqxRepeatButton.prototype,{defineInstance:function(){this.delay=50},createInstance:function(){var t=this,i=n.jqx.mobile.isTouchDevice(),r=i?"touchend."+this.base.element.id:"mouseup."+this.base.element.id,u=i?"touchstart."+this.base.element.id:"mousedown."+this.base.element.id;this.addHandler(n(document),r,function(){t.timeout!=null&&(clearTimeout(t.timeout),t.timeout=null,t.refresh());t.timer!=undefined&&(clearInterval(t.timer),t.timer=null,t.refresh())});this.addHandler(this.base.host,u,function(){t.timer!=null&&clearInterval(t.timer);t.timeout=setTimeout(function(){clearInterval(t.timer);t.timer=setInterval(function(n){t.ontimer(n)},t.delay)},150)});this.mousemovefunc=function(n){i||n.which==0&&t.timer!=null&&(clearInterval(t.timer),t.timer=null)};this.addHandler(this.base.host,"mousemove",this.mousemovefunc)},destroy:function(){var i=n.jqx.mobile.isTouchDevice(),r=i?"touchend."+this.base.element.id:"mouseup."+this.base.element.id,u=i?"touchstart."+this.base.element.id:"mousedown."+this.base.element.id,t;this.removeHandler(this.base.host,"mousemove",this.mousemovefunc);this.removeHandler(this.base.host,u);this.removeHandler(n(document),r);this.timer=null;delete this.mousemovefunc;delete this.timer;t=n.data(this.base.element,"jqxRepeatButton");t&&delete t.instance;n(this.base.element).removeData();this.base.destroy();delete this.base},stop:function(){clearInterval(this.timer);this.timer=null},ontimer:function(t){var t=new n.Event("click");this.base!=null&&this.base.host!=null&&this.base.host.trigger(t)}});n.jqx.jqxWidget("jqxToggleButton","jqxButton",{});n.extend(n.jqx._jqxToggleButton.prototype,{defineInstance:function(){this.toggled=!1;this.uiToggle=!0;this.aria={"aria-checked":{name:"toggled",type:"boolean"},"aria-disabled":{name:"disabled",type:"boolean"}}},createInstance:function(){var t=this;t.base.overrideTheme=!0;t.isTouchDevice=n.jqx.mobile.isTouchDevice();n.jqx.aria(this);t.propertyChangeMap.roundedCorners=function(t,i,r,u){t.base.buttonObj.removeClass(t.toThemeProperty(n.jqx.cssroundedcorners(r)));t.base.buttonObj.addClass(t.toThemeProperty(n.jqx.cssroundedcorners(u)))};t.propertyChangeMap.toggled=function(n){n.refresh()};t.propertyChangeMap.disabled=function(n,t,i,r){n.base.disabled=r;n.refresh()};t.addHandler(t.base.host,"click",function(){!t.base.disabled&&t.uiToggle&&t.toggle()});t.isTouchDevice||(t.addHandler(t.base.host,"mouseenter",function(){t.base.disabled||t.refresh()}),t.addHandler(t.base.host,"mouseleave",function(){t.base.disabled||t.refresh()}));t.addHandler(t.base.host,"mousedown",function(){t.base.disabled||t.refresh()});t.addHandler(n(document),"mouseup.togglebutton"+t.base.element.id,function(){t.base.disabled||t.refresh()})},destroy:function(){this._removeHandlers();this.base.destroy()},_removeHandlers:function(){this.removeHandler(this.base.host,"click");this.removeHandler(this.base.host,"mouseenter");this.removeHandler(this.base.host,"mouseleave");this.removeHandler(this.base.host,"mousedown");this.removeHandler(n(document),"mouseup.togglebutton"+this.base.element.id)},toggle:function(){this.toggled=!this.toggled;this.refresh();n.jqx.aria(this,"aria-checked",this.toggled)},unCheck:function(){this.toggled=!1;this.refresh()},check:function(){this.toggled=!0;this.refresh()},refresh:function(){var n=this,r=n.base.toThemeProperty("jqx-fill-state-disabled"),i=n.base.toThemeProperty("jqx-fill-state-normal");n.base.enableDefault||(i="");var u=n.base.toThemeProperty("jqx-fill-state-hover"),f=n.base.toThemeProperty("jqx-fill-state-pressed"),e=n.base.toThemeProperty("jqx-fill-state-pressed"),t="";if(n.base.element.disabled=n.base.disabled,n.base.disabled){t=i+" "+r;n.base.buttonObj.addClass(t);return}t=n.base.isMouseOver&&!n.isTouchDevice?n.base.isPressed||n.toggled?e:u:n.base.isPressed||n.toggled?f:i;n.base.template!=="default"&&n.base.template!==""&&(t+=" jqx-"+n.base.template,n.base.theme!=""&&(t+=" jqx-"+n.template+"-"+n.base.theme));n.base.buttonObj.hasClass(r)&&r!=t&&n.base.buttonObj.removeClass(r);n.base.buttonObj.hasClass(i)&&i!=t&&n.base.buttonObj.removeClass(i);n.base.buttonObj.hasClass(u)&&u!=t&&n.base.buttonObj.removeClass(u);n.base.buttonObj.hasClass(f)&&f!=t&&n.base.buttonObj.removeClass(f);n.base.buttonObj.hasClass(e)&&e!=t&&n.base.buttonObj.removeClass(e);n.base.buttonObj.hasClass(t)||n.base.buttonObj.addClass(t)}})}(jqxBaseFramework),function(n){n.jqx.jqxWidget("jqxScrollBar","",{});n.extend(n.jqx._jqxScrollBar.prototype,{defineInstance:function(){var t={height:null,width:null,vertical:!1,min:0,max:1e3,value:0,step:10,largestep:50,thumbMinSize:10,thumbSize:0,thumbStep:"auto",roundedCorners:"all",showButtons:!0,disabled:!1,touchMode:"auto",touchModeStyle:"auto",thumbTouchSize:0,_triggervaluechanged:!0,rtl:!1,areaDownCapture:!1,areaUpCapture:!1,_initialLayout:!1,offset:0,reference:0,velocity:0,frame:0,timestamp:0,ticker:null,amplitude:0,target:0};return this===n.jqx._jqxScrollBar.prototype?t:(n.extend(!0,this,t),t)},createInstance:function(){this.render()},render:function(){var i,r,u,t;if(this._mouseup=new Date,i=this,r="<div id='jqxScrollOuterWrap' style='box-sizing: content-box; width:100%; height: 100%; align:left; border: 0px; valign:top; position: relative;'><div id='jqxScrollWrap' style='box-sizing: content-box; width:100%; height: 100%; left: 0px; top: 0px; align:left; valign:top; position: absolute;'><div id='jqxScrollBtnUp' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><div><\/div><\/div><div id='jqxScrollAreaUp' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='jqxScrollThumb' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='jqxScrollAreaDown' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='jqxScrollBtnDown' style='box-sizing: content-box; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><div><\/div><\/div><\/div><\/div>",n.jqx.utilities&&n.jqx.utilities.scrollBarButtonsVisibility=="hidden"&&(this.showButtons=!1),i.WinJS?MSApp.execUnsafeLocalFunction(function(){i.host.html(r)}):this.element.innerHTML=r,this.width!=undefined&&parseInt(this.width)>0&&this.host.width(parseInt(this.width)),this.height!=undefined&&parseInt(this.height)>0&&this.host.height(parseInt(this.height)),this.isPercentage=!1,this.width!=null&&this.width.toString().indexOf("%")!=-1&&(this.host.width(this.width),this.isPercentage=!0),this.height!=null&&this.height.toString().indexOf("%")!=-1&&(this.host.height(this.height),this.isPercentage=!0),this.isPercentage&&(u=this,n.jqx.utilities.resize(this.host,function(){u._arrange()},!1)),this.thumbCapture=!1,this.scrollOuterWrap=n(this.element.firstChild),this.scrollWrap=n(this.scrollOuterWrap[0].firstChild),this.btnUp=n(this.scrollWrap[0].firstChild),this.areaUp=n(this.btnUp[0].nextSibling),this.btnThumb=n(this.areaUp[0].nextSibling),this.arrowUp=n(this.btnUp[0].firstChild),this.areaDown=n(this.btnThumb[0].nextSibling),this.btnDown=n(this.areaDown[0].nextSibling),this.arrowDown=n(this.btnDown[0].firstChild),t=this.element.id,this.btnUp[0].id="jqxScrollBtnUp"+t,this.btnDown[0].id="jqxScrollBtnDown"+t,this.btnThumb[0].id="jqxScrollThumb"+t,this.areaUp[0].id="jqxScrollAreaUp"+t,this.areaDown[0].id="jqxScrollAreaDown"+t,this.scrollWrap[0].id="jqxScrollWrap"+t,this.scrollOuterWrap[0].id="jqxScrollOuterWrap"+t,!this.host.jqxRepeatButton)throw new Error("jqxScrollBar: Missing reference to jqxbuttons.js.");this.btnUp.jqxRepeatButton({_ariaDisabled:!0,overrideTheme:!0,disabled:this.disabled});this.btnDown.jqxRepeatButton({_ariaDisabled:!0,overrideTheme:!0,disabled:this.disabled});this.btnDownInstance=n.data(this.btnDown[0],"jqxRepeatButton").instance;this.btnUpInstance=n.data(this.btnUp[0],"jqxRepeatButton").instance;this.areaUp.jqxRepeatButton({_scrollAreaButton:!0,_ariaDisabled:!0,overrideTheme:!0});this.areaDown.jqxRepeatButton({_scrollAreaButton:!0,_ariaDisabled:!0,overrideTheme:!0});this.btnThumb.jqxButton({_ariaDisabled:!0,overrideTheme:!0,disabled:this.disabled});this.propertyChangeMap.value=function(n,t,i,r){isNaN(r)||i!=r&&n.setPosition(parseFloat(r),!0)};this.propertyChangeMap.width=function(n){n.width!=undefined&&parseInt(n.width)>0&&(n.host.width(parseInt(n.width)),n._arrange())};this.propertyChangeMap.height=function(n){n.height!=undefined&&parseInt(n.height)>0&&(n.host.height(parseInt(n.height)),n._arrange())};this.propertyChangeMap.theme=function(n){n.setTheme()};this.propertyChangeMap.max=function(n,t,i,r){isNaN(r)||i!=r&&(n.max=parseInt(r),n.min>n.max&&(n.max=n.min+1),n._arrange(),n.setPosition(n.value))};this.propertyChangeMap.min=function(n,t,i,r){isNaN(r)||i!=r&&(n.min=parseInt(r),n.min>n.max&&(n.max=n.min+1),n._arrange(),n.setPosition(n.value))};this.propertyChangeMap.disabled=function(n,t,i,r){i!=r&&(r?n.host.addClass(n.toThemeProperty("jqx-fill-state-disabled")):n.host.removeClass(n.toThemeProperty("jqx-fill-state-disabled")),n.btnUp.jqxRepeatButton("disabled",n.disabled),n.btnDown.jqxRepeatButton("disabled",n.disabled),n.btnThumb.jqxButton("disabled",n.disabled))};this.propertyChangeMap.touchMode=function(n,t,i,r){i!=r&&(n._updateTouchBehavior(),r===!0?(n.showButtons=!1,n.refresh()):r===!1&&(n.showButtons=!0,n.refresh()))};this.propertyChangeMap.rtl=function(n,t,i,r){i!=r&&n.refresh()};this.buttonUpCapture=!1;this.buttonDownCapture=!1;this._updateTouchBehavior();this.setPosition(this.value);this._addHandlers();this.setTheme()},resize:function(n,t){this.width=n;this.height=t;this._arrange()},_updateTouchBehavior:function(){if(this.isTouchDevice=n.jqx.mobile.isTouchDevice(),this.touchMode==!0){if(n.jqx.browser.msie&&n.jqx.browser.version<9){this.setTheme();return}this.isTouchDevice=!0;n.jqx.mobile.setMobileSimulator(this.btnThumb[0]);this._removeHandlers();this._addHandlers();this.setTheme()}else this.touchMode==!1&&(this.isTouchDevice=!1)},_addHandlers:function(){var t=this,o=!1,i,f,e,r,u;try{("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(o=!0,this._touchSupport=!0)}catch(s){}if((t.isTouchDevice||o)&&(this.addHandler(this.btnThumb,n.jqx.mobile.getTouchEventName("touchend"),function(n){var i=t.vertical?t.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):t.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"),r=t.toThemeProperty("jqx-fill-state-pressed");return t.btnThumb.removeClass(i),t.btnThumb.removeClass(r),t.disabled||t.handlemouseup(t,n),!1}),this.addHandler(this.btnThumb,n.jqx.mobile.getTouchEventName("touchstart"),function(n){if(!t.disabled){if(t.touchMode==!0)n.clientX=n.originalEvent.clientX,n.clientY=n.originalEvent.clientY;else{var i=n;i.originalEvent.touches&&i.originalEvent.touches.length?(n.clientX=i.originalEvent.touches[0].clientX,n.clientY=i.originalEvent.touches[0].clientY):(n.clientX=n.originalEvent.clientX,n.clientY=n.originalEvent.clientY)}t.handlemousedown(n);n.preventDefault&&n.preventDefault()}}),n.jqx.mobile.touchScroll(this.element,t.max,function(n,i,r,u,f){var e,o;t.host.css("visibility")=="visible"&&(t.touchMode==!0?(f.clientX=f.originalEvent.clientX,f.clientY=f.originalEvent.clientY):(e=f,e.originalEvent.touches&&e.originalEvent.touches.length?(f.clientX=e.originalEvent.touches[0].clientX,f.clientY=e.originalEvent.touches[0].clientY):(f.clientX=f.originalEvent.clientX,f.clientY=f.originalEvent.clientY)),o=t.vertical?t.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):t.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"),t.btnThumb.addClass(o),t.btnThumb.addClass(t.toThemeProperty("jqx-fill-state-pressed")),t.thumbCapture=!0,t.handlemousemove(f))},t.element.id,t.host,t.host)),!this.isTouchDevice){try{(document.referrer!=""||window.frameElement)&&window.top!=null&&window.top!=window.self&&(i=null,window.parent&&document.referrer&&(i=document.referrer),i&&i.indexOf(document.location.host)!=-1&&(f=function(n){t.disabled||t.handlemouseup(t,n)},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",f,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",f)))}catch(h){}e="click mouseup mousedown";this.addHandler(this.btnDown,e,function(n){var i=t.step;Math.abs(t.max-t.min)<=i&&(i=1);t.rtl&&!t.vertical&&(i=-t.step);switch(n.type){case"click":t.buttonDownCapture&&!t.isTouchDevice?t.disabled||t.setPosition(t.value+i):!t.disabled&&t.isTouchDevice&&t.setPosition(t.value+i);break;case"mouseup":if(!t.btnDownInstance.base.disabled&&t.buttonDownCapture)return t.buttonDownCapture=!1,t.btnDown.removeClass(t.toThemeProperty("jqx-scrollbar-button-state-pressed")),t.btnDown.removeClass(t.toThemeProperty("jqx-fill-state-pressed")),t._removeArrowClasses("pressed","down"),t.handlemouseup(t,n),t.setPosition(t.value+i),!1;break;case"mousedown":if(!t.btnDownInstance.base.disabled)return t.buttonDownCapture=!0,t.btnDown.addClass(t.toThemeProperty("jqx-fill-state-pressed")),t.btnDown.addClass(t.toThemeProperty("jqx-scrollbar-button-state-pressed")),t._addArrowClasses("pressed","down"),!1}});this.addHandler(this.btnUp,e,function(n){var i=t.step;Math.abs(t.max-t.min)<=i&&(i=1);t.rtl&&!t.vertical&&(i=-t.step);switch(n.type){case"click":t.buttonUpCapture&&!t.isTouchDevice?t.disabled||t.setPosition(t.value-i):!t.disabled&&t.isTouchDevice&&t.setPosition(t.value-i);break;case"mouseup":if(!t.btnUpInstance.base.disabled&&t.buttonUpCapture)return t.buttonUpCapture=!1,t.btnUp.removeClass(t.toThemeProperty("jqx-scrollbar-button-state-pressed")),t.btnUp.removeClass(t.toThemeProperty("jqx-fill-state-pressed")),t._removeArrowClasses("pressed","up"),t.handlemouseup(t,n),t.setPosition(t.value-i),!1;break;case"mousedown":if(!t.btnUpInstance.base.disabled)return t.buttonUpCapture=!0,t.btnUp.addClass(t.toThemeProperty("jqx-fill-state-pressed")),t.btnUp.addClass(t.toThemeProperty("jqx-scrollbar-button-state-pressed")),t._addArrowClasses("pressed","up"),!1}})}r="click";this.isTouchDevice&&(r=n.jqx.mobile.getTouchEventName("touchend"));this.addHandler(this.areaUp,r,function(){if(!t.disabled){var n=t.largestep;return t.rtl&&!t.vertical&&(n=-t.largestep),t.setPosition(t.value-n),!1}});this.addHandler(this.areaDown,r,function(){if(!t.disabled){var n=t.largestep;return t.rtl&&!t.vertical&&(n=-t.largestep),t.setPosition(t.value+n),!1}});this.addHandler(this.areaUp,"mousedown",function(){if(!t.disabled)return t.areaUpCapture=!0,!1});this.addHandler(this.areaDown,"mousedown",function(){if(!t.disabled)return t.areaDownCapture=!0,!1});this.addHandler(this.btnThumb,"mousedown dragstart",function(n){if(n.type==="dragstart")return!1;t.disabled||t.handlemousedown(n);n.preventDefault&&n.preventDefault()});this.addHandler(n(document),"mouseup."+this.element.id,function(n){t.disabled||t.handlemouseup(t,n)});this.isTouchDevice||(this.mousemoveFunc=function(n){t.disabled||t.handlemousemove(n)},this.addHandler(n(document),"mousemove."+this.element.id,this.mousemoveFunc),this.addHandler(n(document),"mouseleave."+this.element.id,function(n){t.disabled||t.handlemouseleave(n)}),this.addHandler(n(document),"mouseenter."+this.element.id,function(n){t.disabled||t.handlemouseenter(n)}),t.disabled||(this.addHandler(this.btnUp,"mouseenter mouseleave",function(n){n.type==="mouseenter"?t.disabled||t.btnUpInstance.base.disabled||t.touchMode==!0||(t.btnUp.addClass(t.toThemeProperty("jqx-scrollbar-button-state-hover")),t.btnUp.addClass(t.toThemeProperty("jqx-fill-state-hover")),t._addArrowClasses("hover","up")):t.disabled||t.btnUpInstance.base.disabled||t.touchMode==!0||(t.btnUp.removeClass(t.toThemeProperty("jqx-scrollbar-button-state-hover")),t.btnUp.removeClass(t.toThemeProperty("jqx-fill-state-hover")),t._removeArrowClasses("hover","up"))}),u=t.toThemeProperty("jqx-scrollbar-thumb-state-hover"),t.vertical||(u=t.toThemeProperty("jqx-scrollbar-thumb-state-hover-horizontal")),this.addHandler(this.btnThumb,"mouseenter mouseleave",function(n){n.type==="mouseenter"?t.disabled||t.touchMode==!0||(t.btnThumb.addClass(u),t.btnThumb.addClass(t.toThemeProperty("jqx-fill-state-hover"))):t.disabled||t.touchMode==!0||(t.btnThumb.removeClass(u),t.btnThumb.removeClass(t.toThemeProperty("jqx-fill-state-hover")))}),this.addHandler(this.btnDown,"mouseenter mouseleave",function(n){n.type==="mouseenter"?t.disabled||t.btnDownInstance.base.disabled||t.touchMode==!0||(t.btnDown.addClass(t.toThemeProperty("jqx-scrollbar-button-state-hover")),t.btnDown.addClass(t.toThemeProperty("jqx-fill-state-hover")),t._addArrowClasses("hover","down")):t.disabled||t.btnDownInstance.base.disabled||t.touchMode==!0||(t.btnDown.removeClass(t.toThemeProperty("jqx-scrollbar-button-state-hover")),t.btnDown.removeClass(t.toThemeProperty("jqx-fill-state-hover")),t._removeArrowClasses("hover","down"))})))},destroy:function(){var i=this.btnUp,r=this.btnDown,u=this.btnThumb,o=this.scrollWrap,f=this.areaUp,e=this.areaDown,t;this.arrowUp.remove();delete this.arrowUp;this.arrowDown.remove();delete this.arrowDown;e.removeClass();f.removeClass();r.removeClass();i.removeClass();u.removeClass();i.jqxRepeatButton("destroy");r.jqxRepeatButton("destroy");f.jqxRepeatButton("destroy");e.jqxRepeatButton("destroy");u.jqxButton("destroy");t=n.data(this.element,"jqxScrollBar");this._removeHandlers();this.btnUp=null;this.btnDown=null;this.scrollWrap=null;this.areaUp=null;this.areaDown=null;this.scrollOuterWrap=null;delete this.mousemoveFunc;delete this.btnDownInstance;delete this.btnUpInstance;delete this.scrollOuterWrap;delete this.scrollWrap;delete this.btnDown;delete this.areaDown;delete this.areaUp;delete this.btnDown;delete this.btnUp;delete this.btnThumb;delete this.propertyChangeMap.value;delete this.propertyChangeMap.min;delete this.propertyChangeMap.max;delete this.propertyChangeMap.touchMode;delete this.propertyChangeMap.disabled;delete this.propertyChangeMap.theme;delete this.propertyChangeMap;t&&delete t.instance;this.host.removeData();this.host.remove();delete this.host;delete this.set;delete this.get;delete this.call;delete this.element},_removeHandlers:function(){this.removeHandler(this.btnUp,"mouseenter");this.removeHandler(this.btnDown,"mouseenter");this.removeHandler(this.btnThumb,"mouseenter");this.removeHandler(this.btnUp,"mouseleave");this.removeHandler(this.btnDown,"mouseleave");this.removeHandler(this.btnThumb,"mouseleave");this.removeHandler(this.btnUp,"click");this.removeHandler(this.btnDown,"click");this.removeHandler(this.btnDown,"mouseup");this.removeHandler(this.btnUp,"mouseup");this.removeHandler(this.btnDown,"mousedown");this.removeHandler(this.btnUp,"mousedown");this.removeHandler(this.areaUp,"mousedown");this.removeHandler(this.areaDown,"mousedown");this.removeHandler(this.areaUp,"click");this.removeHandler(this.areaDown,"click");this.removeHandler(this.btnThumb,"mousedown");this.removeHandler(this.btnThumb,"dragstart");this.removeHandler(n(document),"mouseup."+this.element.id);this.mousemoveFunc?this.removeHandler(n(document),"mousemove."+this.element.id,this.mousemoveFunc):this.removeHandler(n(document),"mousemove."+this.element.id);this.removeHandler(n(document),"mouseleave."+this.element.id);this.removeHandler(n(document),"mouseenter."+this.element.id);var t=this},_addArrowClasses:function(n,t){n=="pressed"&&(n="selected");n!=""&&(n="-"+n);this.vertical?((t=="up"||t==undefined)&&this.arrowUp.addClass(this.toThemeProperty("jqx-icon-arrow-up"+n)),(t=="down"||t==undefined)&&this.arrowDown.addClass(this.toThemeProperty("jqx-icon-arrow-down"+n))):((t=="up"||t==undefined)&&this.arrowUp.addClass(this.toThemeProperty("jqx-icon-arrow-left"+n)),(t=="down"||t==undefined)&&this.arrowDown.addClass(this.toThemeProperty("jqx-icon-arrow-right"+n)))},_removeArrowClasses:function(n,t){n=="pressed"&&(n="selected");n!=""&&(n="-"+n);this.vertical?((t=="up"||t==undefined)&&this.arrowUp.removeClass(this.toThemeProperty("jqx-icon-arrow-up"+n)),(t=="down"||t==undefined)&&this.arrowDown.removeClass(this.toThemeProperty("jqx-icon-arrow-down"+n))):((t=="up"||t==undefined)&&this.arrowUp.removeClass(this.toThemeProperty("jqx-icon-arrow-left"+n)),(t=="down"||t==undefined)&&this.arrowDown.removeClass(this.toThemeProperty("jqx-icon-arrow-right"+n)))},setTheme:function(){var f=this.btnUp,l=this.btnDown,r=this.btnThumb,e=this.scrollWrap,p=this.areaUp,w=this.areaDown,a=this.arrowUp,v=this.arrowDown,i,y,u,o,s,h,c,t;this.scrollWrap[0].className=this.toThemeProperty("jqx-reset");this.scrollOuterWrap[0].className=this.toThemeProperty("jqx-reset");i=this.toThemeProperty("jqx-reset");this.areaDown[0].className=i;this.areaUp[0].className=i;y=this.toThemeProperty("jqx-scrollbar")+" "+this.toThemeProperty("jqx-widget")+" "+this.toThemeProperty("jqx-widget-content");this.host.addClass(y);this.isTouchDevice&&this.host.addClass(this.toThemeProperty("jqx-scrollbar-mobile"));l[0].className=this.toThemeProperty("jqx-scrollbar-button-state-normal");f[0].className=this.toThemeProperty("jqx-scrollbar-button-state-normal");u="";this.vertical?(a[0].className=i+" "+this.toThemeProperty("jqx-icon-arrow-up"),v[0].className=i+" "+this.toThemeProperty("jqx-icon-arrow-down"),u=this.toThemeProperty("jqx-scrollbar-thumb-state-normal")):(a[0].className=i+" "+this.toThemeProperty("jqx-icon-arrow-left"),v[0].className=i+" "+this.toThemeProperty("jqx-icon-arrow-right"),u=this.toThemeProperty("jqx-scrollbar-thumb-state-normal-horizontal"));u+=" "+this.toThemeProperty("jqx-fill-state-normal");r[0].className=u;this.disabled?(e.addClass(this.toThemeProperty("jqx-fill-state-disabled")),e.removeClass(this.toThemeProperty("jqx-scrollbar-state-normal"))):(e.addClass(this.toThemeProperty("jqx-scrollbar-state-normal")),e.removeClass(this.toThemeProperty("jqx-fill-state-disabled")));this.roundedCorners=="all"?(this.host.addClass(this.toThemeProperty("jqx-rc-all")),this.vertical?(o=n.jqx.cssroundedcorners("top"),o=this.toThemeProperty(o),f.addClass(o),s=n.jqx.cssroundedcorners("bottom"),s=this.toThemeProperty(s),l.addClass(s)):(h=n.jqx.cssroundedcorners("left"),h=this.toThemeProperty(h),f.addClass(h),c=n.jqx.cssroundedcorners("right"),c=this.toThemeProperty(c),l.addClass(c))):(t=n.jqx.cssroundedcorners(this.roundedCorners),t=this.toThemeProperty(t),elBtnUp.addClass(t),elBtnDown.addClass(t));t=n.jqx.cssroundedcorners(this.roundedCorners);t=this.toThemeProperty(t);r.hasClass(t)||r.addClass(t);f.css("display")==="none"&&(this.showButtons=!1,this.touchModeStyle=!0,r.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-normal-touch")));this.isTouchDevice&&this.touchModeStyle!=!1&&(this.showButtons=!1,r.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-normal-touch")))},isScrolling:function(){return this.thumbCapture==undefined||this.buttonDownCapture==undefined||this.buttonUpCapture==undefined||this.areaDownCapture==undefined||this.areaUpCapture==undefined?!1:this.thumbCapture||this.buttonDownCapture||this.buttonUpCapture||this.areaDownCapture||this.areaUpCapture},track:function(){var n,t,i,r;n=Date.now();t=n-this.timestamp;this.timestamp=n;i=this.offset-this.frame;this.frame=this.offset;r=1e3*i/(1+t);this.velocity=.2*r+.2*this.velocity},handlemousedown:function(t){function u(){i.reference=parseInt(i.btnThumb[0].style.top);i.offset=parseInt(i.btnThumb[0].style.top);i.vertical||(i.reference=parseInt(i.btnThumb[0].style.left),i.offset=parseInt(i.btnThumb[0].style.left));i.velocity=i.amplitude=0;i.frame=i.offset;i.timestamp=Date.now();clearInterval(i.ticker);i.ticker=setInterval(function(){i.track()},100)}var r,i;(this.thumbCapture==undefined||this.thumbCapture==!1)&&(this.thumbCapture=!0,r=this.btnThumb,r!=null&&(r.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.vertical?r.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed")):r.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"))));i=this;this.thumbCapture&&n.jqx.scrollAnimation&&u(t);this.dragStartX=t.clientX;this.dragStartY=t.clientY;this.dragStartValue=this.value},toggleHover:function(){},refresh:function(){this._arrange()},_setElementPosition:function(n,t,i){isNaN(t)||parseInt(n[0].style.left)!=parseInt(t)&&(n[0].style.left=t+"px");isNaN(i)||parseInt(n[0].style.top)!=parseInt(i)&&(n[0].style.top=i+"px")},_setElementTopPosition:function(n,t){isNaN(t)||(n[0].style.top=t+"px")},_setElementLeftPosition:function(n,t){isNaN(t)||(n[0].style.left=t+"px")},handlemouseleave:function(){var i=this.btnUp,r=this.btnDown,n,t;((this.buttonDownCapture||this.buttonUpCapture)&&(i.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),r.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),this._removeArrowClasses("pressed")),this.thumbCapture==!0)&&(n=this.btnThumb,t=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"),n.removeClass(t),n.removeClass(this.toThemeProperty("jqx-fill-state-pressed")))},handlemouseenter:function(){var t=this.btnUp,i=this.btnDown,n;(this.buttonUpCapture&&(t.addClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),t.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this._addArrowClasses("pressed","up")),this.buttonDownCapture&&(i.addClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),i.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this._addArrowClasses("pressed","down")),this.thumbCapture==!0)&&(n=this.btnThumb,this.vertical?n.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed")):n.addClass(this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal")),n.addClass(this.toThemeProperty("jqx-fill-state-pressed")))},handlemousemove:function(n){var r=this.btnUp,u=this.btnDown,e=0,i,h,t,o,s,f;if(u!=null&&r!=null){if(r!=null&&u!=null&&this.buttonDownCapture!=undefined&&this.buttonUpCapture!=undefined&&(this.buttonDownCapture&&n.which==e?(u.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),u.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this._removeArrowClasses("pressed","down"),this.buttonDownCapture=!1):this.buttonUpCapture&&n.which==e&&(r.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),r.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this._removeArrowClasses("pressed","up"),this.buttonUpCapture=!1)),this.thumbCapture!=!0)return!1;if(i=this.btnThumb,n.which==e&&!this.isTouchDevice&&!this._touchSupport)return this.thumbCapture=!1,this._arrange(),h=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"),i.removeClass(h),i.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),!0;n.preventDefault!=undefined&&n.preventDefault();n.originalEvent!=null&&(n.originalEvent.mouseHandled=!0);n.stopPropagation!=undefined&&n.stopPropagation();t=0;try{if(t=this.vertical?n.clientY-this.dragStartY:n.clientX-this.dragStartX,o=this._btnAndThumbSize,this._btnAndThumbSize||(o=this.vertical?r.height()+u.height()+i.height():r.width()+u.width()+i.width()),s=(this.max-this.min)/(this.scrollBarSize-o),this.thumbStep=="auto")t*=s;else return t*=s,Math.abs(this.dragStartValue+t-this.value)>=parseInt(this.thumbStep)?(f=Math.round(parseInt(t)/this.thumbStep)*this.thumbStep,this.rtl&&!this.vertical?this.setPosition(this.dragStartValue-f):this.setPosition(this.dragStartValue+f),!1):!1;f=t;this.rtl&&!this.vertical&&(f=-t);this.setPosition(this.dragStartValue+f);this.offset=parseInt(i[0].style.left);this.vertical&&(this.offset=parseInt(i[0].style.top))}catch(c){alert(c)}return!1}},handlemouseup:function(t,i){var u=!1,f,s,r,e,o;if(this.thumbCapture&&(this.thumbCapture=!1,f=this.btnThumb,s=this.vertical?this.toThemeProperty("jqx-scrollbar-thumb-state-pressed"):this.toThemeProperty("jqx-scrollbar-thumb-state-pressed-horizontal"),f.removeClass(s),f.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),u=!0,this._mouseup=new Date,n.jqx.scrollAnimation)){r=this;function n(){var f,t;if(r.amplitude)if(f=Date.now()-r.timestamp,t=-r.amplitude*Math.exp(-f/325),t>.5||t<-.5){var e=(r.max-r.min)/(r.scrollBarSize-r._btnAndThumbSize),i=e*(r.target+t),u=i;r.rtl&&!r.vertical&&(u=-i);r.setPosition(r.dragStartValue+u);requestAnimationFrame(n)}else{var e=(r.max-r.min)/(r.scrollBarSize-r._btnAndThumbSize),i=e*(r.target+t),u=i;r.rtl&&!r.vertical&&(u=-i);r.setPosition(r.dragStartValue+u)}}clearInterval(this.ticker);(this.velocity>25||this.velocity<-25)&&(this.amplitude=.8*this.velocity,this.target=Math.round(this.offset+this.amplitude),this.target-=this.vertical?this.reference:this.reference,this.timestamp=Date.now(),requestAnimationFrame(n))}this.areaDownCapture=this.areaUpCapture=!1;(this.buttonUpCapture||this.buttonDownCapture)&&(e=this.btnUp,o=this.btnDown,this.buttonUpCapture=!1,this.buttonDownCapture=!1,e.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),o.removeClass(this.toThemeProperty("jqx-scrollbar-button-state-pressed")),e.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),o.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this._removeArrowClasses("pressed"),u=!0,this._mouseup=new Date);u&&(i.preventDefault!=undefined&&i.preventDefault(),i.originalEvent!=null&&(i.originalEvent.mouseHandled=!0),i.stopPropagation!=undefined&&i.stopPropagation())},setPosition:function(t,i){var e=this.element,u,f,r;return(t==undefined||t==NaN)&&(t=this.min),t>=this.max&&(t=this.max),t<this.min&&(t=this.min),(this.value!==t||i==!0)&&(t==this.max&&(u=new n.Event("complete"),this.host.trigger(u)),f=this.value,this._triggervaluechanged&&(r=new n.Event("valueChanged"),r.previousValue=this.value,r.currentValue=t),this.value=t,this._positionelements(),this._triggervaluechanged&&this.host.trigger(r),this.valueChanged&&this.valueChanged({currentValue:this.value,previousvalue:f})),t},val:function(n){var t=function(t){for(var i in t)if(t.hasOwnProperty(i))return!1;return typeof n=="number"?!1:typeof n=="date"?!1:typeof n=="boolean"?!1:typeof n=="string"?!1:!0};return t(n)||arguments.length==0?this.value:(this.setPosition(n),n)},_getThumbSize:function(n){var i=this.max-this.min,t=0;return i>1?t=n/(i+n)*n:i==1?t=n-1:i==0&&(t=n),this.thumbSize>0&&(t=this.thumbSize),t<this.thumbMinSize&&(t=this.thumbMinSize),Math.min(t,n)},_positionelements:function(){var l=this.element,o=this.areaUp,s=this.areaDown,a=this.btnUp,v=this.btnDown,h=this.btnThumb,y=this.scrollWrap,f=this._height?this._height:this.host.height(),e=this._width?this._width:this.host.width(),t=this.vertical?e:f,r,u,i,n,c;this.showButtons||(t=0);r=this.vertical?f:e;this.scrollBarSize=r;u=this._getThumbSize(r-2*t);u=Math.floor(u);u<this.thumbMinSize&&(u=this.thumbMinSize);(f==NaN||f<10)&&(f=10);(e==NaN||e<10)&&(e=10);t+=2;this.btnSize=t;i=this._btnAndThumbSize;this._btnAndThumbSize||(i=this.vertical?2*this.btnSize+h.outerHeight():2*this.btnSize+h.outerWidth(),i=Math.round(i));n=(r-i)/(this.max-this.min)*(this.value-this.min);this.rtl&&!this.vertical&&(n=(r-i)/(this.max-this.min)*(this.max-this.value-this.min));n=Math.round(n);n<0&&(n=0);this.vertical?(c=r-n-i,c<0&&(c=0),s[0].style.height=c+"px",o[0].style.height=n+"px",this._setElementTopPosition(o,t),this._setElementTopPosition(h,t+n),this._setElementTopPosition(s,t+n+u)):(o[0].style.width=n+"px",s[0].style.width=r-n-i>=0?r-n-i+"px":"0px",this._setElementLeftPosition(o,t),this._setElementLeftPosition(h,t+n),this._setElementLeftPosition(s,2+t+n+u))},_arrange:function(){var n=this,d,g,r,u,e,f,h,s,v,o,t,y,p,w,b;if(n._initialLayout){n._initialLayout=!1;return}n.min>n.max&&(d=n.min,n.min=n.max,n.max=d);n.min<0&&(g=n.max-n.min,n.min=0,n.max=g);var tt=n.element,c=n.areaUp,l=n.areaDown,k=n.btnUp,a=n.btnDown,i=n.btnThumb,nt=n.scrollWrap,r=parseInt(n.element.style.height),u=parseInt(n.element.style.width);n.isPercentage&&(r=n.host.height(),u=n.host.width());isNaN(r)&&(r=0);isNaN(u)&&(u=0);n._width=u;n._height=r;e=n.vertical?u:r;n.showButtons||(e=0);k[0].style.width=e+"px";k[0].style.height=e+"px";a[0].style.width=e+"px";a[0].style.height=e+"px";n.vertical?nt[0].style.width=u+2+"px":nt[0].style.height=r+2+"px";n._setElementPosition(k,0,0);f=e+2;n.vertical?n._setElementPosition(a,0,r-f):n._setElementPosition(a,u-f,0);h=n.vertical?r:u;n.scrollBarSize=h;s=n._getThumbSize(h-2*f);s=Math.floor(s-2);s<n.thumbMinSize&&(s=n.thumbMinSize);v=!1;n.isTouchDevice&&n.touchModeStyle!=!1&&(v=!0);n.vertical?(i[0].style.width=u+"px",i[0].style.height=s+"px",v&&n.thumbTouchSize!==0&&(i.css({width:n.thumbTouchSize+"px"}),i.css("margin-left",(n.host.width()-n.thumbTouchSize)/2))):(i[0].style.width=s+"px",i[0].style.height=r+"px",v&&n.thumbTouchSize!==0&&(i.css({height:n.thumbTouchSize+"px"}),i.css("margin-top",(n.host.height()-n.thumbTouchSize)/2)));(r==NaN||r<10)&&(r=10);(u==NaN||u<10)&&(u=10);n.btnSize=e;o=n.vertical?2*f+(2+parseInt(i[0].style.height)):2*f+(2+parseInt(i[0].style.width));o=Math.round(o);n._btnAndThumbSize=o;t=(h-o)/(n.max-n.min)*(n.value-n.min);n.rtl&&!n.vertical&&(t=(h-o)/(n.max-n.min)*(n.max-n.value-n.min));t=Math.round(t);(isNaN(t)||t<0||t===-Infinity||t===Infinity)&&(t=0);n.vertical?(y=h-t-o,y<0&&(y=0),l[0].style.height=y+"px",l[0].style.width=u+"px",c[0].style.height=t+"px",c[0].style.width=u+"px",p=parseInt(n.element.style.height),n.isPercentage&&(p=n.host.height()),i[0].style.visibility="inherit",(p-3*parseInt(e)<0||p<o)&&(i[0].style.visibility="hidden"),n._setElementPosition(c,0,f),n._setElementPosition(i,0,f+t),n._setElementPosition(l,0,f+t+s)):(t>0&&(c[0].style.width=t+"px"),r>0&&(c[0].style.height=r+"px"),w=h-t-o,w<0&&(w=0),l[0].style.width=w+"px",l[0].style.height=r+"px",b=parseInt(n.element.style.width),n.isPercentage&&(b=n.host.width()),i[0].style.visibility="inherit",(b-3*parseInt(e)<0||b<o)&&(i[0].style.visibility="hidden"),n._setElementPosition(c,f,0),n._setElementPosition(i,f+t,0),n._setElementPosition(l,f+t+s,0))}})}(jqxBaseFramework),function(n){n.jqx.jqxWidget("jqxMenu","",{});n.extend(n.jqx._jqxMenu.prototype,{defineInstance:function(){var t={items:[],mode:"horizontal",width:null,height:null,minimizeWidth:"auto",easing:"easeInOutSine",animationShowDuration:200,animationHideDuration:200,autoCloseInterval:0,animationHideDelay:100,animationShowDelay:10,menuElements:[],autoSizeMainItems:!1,autoCloseOnClick:!0,autoCloseOnMouseLeave:!0,enableRoundedCorners:!0,disabled:!1,autoOpenPopup:!0,enableHover:!0,autoOpen:!0,autoGenerate:!0,clickToOpen:!1,showTopLevelArrows:!1,touchMode:"auto",source:null,popupZIndex:1e3,rtl:!1,keyboardNavigation:!1,lockFocus:!1,title:"",events:["shown","closed","itemclick","initialized","open","close"]};return this===n.jqx._jqxMenu.prototype?t:(n.extend(!0,this,t),t)},createInstance:function(){var i=this,r,t;this.host.attr("role","menubar");n.jqx.utilities.resize(this.host,function(){i.refresh()},!1,this.mode!="popup");this.minimizeWidth!="auto"&&this.minimizeWidth!=null&&this.width&&this.width.toString().indexOf("%")==-1&&n(window).resize(function(){i.refresh()});this.host.css("outline","none");this.source&&this.source!=null&&(r=this.loadItems(this.source),this.element.innerHTML=r);this._tmpHTML=this.element.innerHTML;this.element.innerHTML.indexOf("UL")&&(t=this.host.find("ul:first"),t.length>0&&this._createMenu(t[0]));this.host.data("autoclose",{});this._render();this._setSize();n.jqx.browser.msie&&n.jqx.browser.version<8&&this.host.attr("hideFocus",!0)},focus:function(){var r,t,i;try{this.mode==="popup"&&this.keyboardNavigation&&(r=this.host.closest("div.jqx-menu-wrapper"),r.focus());this.keyboardNavigation&&(this.host.focus(),t=this,i=function(){if(n.jqx.isHidden(n(t.items[0].element))){var i=t._nextVisibleItem(t.items[0],0);i&&(n(i.element).addClass(t.toThemeProperty("jqx-fill-state-focus")),t.activeItem=i)}else n(t.items[0].element).addClass(t.toThemeProperty("jqx-fill-state-focus")),t.activeItem=t.items[0]},this.activeItem?n.jqx.isHidden(n(this.activeItem.element))?(n(this.activeItem.element).removeClass(this.toThemeProperty("jqx-fill-state-focus")),i()):n(this.activeItem.element).addClass(this.toThemeProperty("jqx-fill-state-focus")):i())}catch(u){}},loadItems:function(t,i){var u,r;if(t!=null)return t.length==0?"":(u=this,this.items=[],r='<ul class="jqx-menu-ul">',i&&(r='<ul class="jqx-menu-ul" style="width:'+i+';">'),n.map(t,function(n){if(n==undefined)return null;r+=u._parseItem(n)}),r+="<\/ul>")},_parseItem:function(n){var t="",i,u,r;return n==undefined?null:(i=n.label,!n.label&&n.html&&(i=n.html),i||(i="Item"),typeof n=="string"&&(i=n),u=!1,n.selected!=undefined&&n.selected&&(u=!0),r=!1,n.disabled!=undefined&&n.disabled&&(r=!0),t+="<li",r&&(t+=' item-disabled="true" '),n.label&&!n.html&&(t+=' item-label="'+i+'" '),n.value!=null&&(t+=' item-value="'+n.value+'" '),n.id!=undefined&&(t+=' id="'+n.id+'" '),t+=">"+i,n.items&&(t+=n.subMenuWidth?this.loadItems(n.items,n.subMenuWidth):this.loadItems(n.items)),t+"<\/li>")},_setSize:function(){var e,t,i,f,r,u;if(this.width!=null&&this.width.toString().indexOf("%")!=-1?this.host.width(this.width):this.width!=null&&this.width.toString().indexOf("px")!=-1?this.host.width(this.width):this.width==undefined||isNaN(this.width)||this.host.width(this.width),this.height!=null&&this.height.toString().indexOf("%")!=-1?this.host.height(this.height):this.height!=null&&this.height.toString().indexOf("px")!=-1?this.host.height(this.height):this.height==undefined||isNaN(this.height)||this.host.height(this.height),this.height===null&&this.host.height("auto"),e=this,this.minimizeWidth!=null&&this.mode!="popup"){if(t=n(window).width(),!n.jqx.response&&(i=!1,navigator.userAgent.match(/Windows|Linux|MacOS/)&&(f=navigator.userAgent.indexOf("Windows Phone")>=0||navigator.userAgent.indexOf("WPDesktop")>=0||navigator.userAgent.indexOf("IEMobile")>=0||navigator.userAgent.indexOf("ZuneWP7")>=0,f||(i=!0)),r=this.minimizeWidth,i&&this.minimizeWidth=="auto"))return;this.minimizeWidth=="auto"&&n.jqx.response?(u=new n.jqx.response,(u.device.type=="Phone"||u.device.type=="Tablet")&&(this.minimized||this.minimize())):t<r&&!this.minimized?this.minimize():this.minimized&&t>=r&&this.restore()}},minimize:function(){var i,f,u,r,t,e,o;this.minimized||(i=this,this.host.addClass(this.toThemeProperty("jqx-menu-minimized")),this.minimized=!0,this._tmpMode=this.mode,this.mode="simple",t=this.host.closest("div.jqx-menu-wrapper"),t.remove(),n("#menuWrapper"+this.element.id).remove(),n.each(this.items,function(){var t=this,u=n(t.element),i=n(t.subMenuElement),r=i.closest("div.jqx-menu-popup");r.remove()}),this.source&&(f=this.loadItems(this.source),this.element.innerHTML=f,this._tmpHTML=this.element.innerHTML),this.element.innerHTML=this._tmpHTML,this.element.innerHTML.indexOf("UL")&&(u=this.host.find("ul:first"),u.length>0&&this._createMenu(u[0])),this._render(),r=this.host.find("ul:first"),r.wrap('<div class="jqx-menu-wrapper" style="z-index:'+this.popupZIndex+'; padding: 0px; display: none; margin: 0px; height: auto; width: auto; position: absolute; top: 0; left: 0; display: block; visibility: visible;"><\/div>'),t=r.closest("div.jqx-menu-wrapper"),t[0].id="menuWrapper"+this.element.id,t.detach(),t.appendTo(n(document.body)),t.addClass(this.toThemeProperty("jqx-widget")),t.addClass(this.toThemeProperty("jqx-menu")),t.addClass(this.toThemeProperty("jqx-menu-minimized")),t.addClass(this.toThemeProperty("jqx-widget-header")),r.children().hide(),t.hide(),t.find("ul").addClass(this.toThemeProperty("jqx-menu-ul-minimized")),this.minimizedItem=n("<div><\/div>"),this.minimizedItem.addClass(this.toThemeProperty("jqx-item")),this.minimizedItem.addClass(this.toThemeProperty("jqx-menu-item-top")),this.addHandler(t,"keydown",function(n){return i.handleKeyDown(n)}),this.minimizedItem.addClass(this.toThemeProperty("jqx-menu-minimized-button")),this.minimizedItem.prependTo(this.host),this.titleElement=n("<div>"+this.title+"<\/div>"),this.titleElement.addClass(this.toThemeProperty("jqx-item")),this.titleElement.addClass(this.toThemeProperty("jqx-menu-title")),this.titleElement.prependTo(this.host),n("<div style='clear:both;'><\/div>").insertAfter(this.minimizedItem),i.minimizedHidden=!0,e=function(){i.minimizedHidden=!0;i.minimizedItem.show();var n=!1;i.minimizedItem.css("float")=="right"&&(n=!0);t.animate({left:n?i.host.coord().left+i.host.width()+t.width():-t.outerWidth(),opacity:0},i.animationHideDuration,function(){t.find("ul:first").children().hide();t.hide()})},o=function(n){if(i.minimizedHidden){t.find("ul:first").children().show();i.minimizedHidden=!1;t.show();t.css("opacity",0);t.css("left",-t.outerWidth());var r=!1,u=t.width();i.minimizedItem.css("float")=="right"&&(t.css("left",i.host.coord().left+i.host.width()+u),r=!0);t.css("top",i.host.coord().top+i.host.height());t.animate({left:r?i.host.coord().left+i.host.width()-u:i.host.coord().left,opacity:.95},i.animationShowDuration,function(){})}else e(n);i._raiseEvent("2",{type:"mouse",item:i.minimizedItem[0],event:n});i._setSize()},this.addHandler(n(window),"orientationchange.jqxmenu"+this.element.id,function(){setTimeout(function(){if(!i.minimizedHidden){var r=t.width(),n=!1,r=t.width();i.minimizedItem.css("float")=="right"&&(n=!0);t.css("top",i.host.coord().top+i.host.height());t.css({left:n?i.host.coord().left+i.host.width()-r:i.host.coord().left})}},25)}),this.addHandler(this.minimizedItem,"click",function(n){o(n)}))},restore:function(){var r,t,i;this.minimized&&(this.host.find("ul").removeClass(this.toThemeProperty("jqx-menu-ul-minimized")),this.host.removeClass(this.toThemeProperty("jqx-menu-minimized")),this.minimized=!1,this.mode=this._tmpMode,this.minimizedItem&&this.minimizedItem.remove(),r=n("#menuWrapper"+this.element.id),r.remove(),this.source&&(t=this.loadItems(this.source),this.element.innerHTML=t,this._tmpHTML=t),this.element.innerHTML=this._tmpHTML,this.element.innerHTML.indexOf("UL")&&(i=this.host.find("ul:first"),i.length>0&&this._createMenu(i[0])),this._setSize(),this._render())},isTouchDevice:function(){if(this._isTouchDevice!=undefined)return this._isTouchDevice;var t=n.jqx.mobile.isTouchDevice();return this.touchMode==!0?t=!0:this.touchMode==!1&&(t=!1),t&&(this.host.addClass(this.toThemeProperty("jqx-touch")),n(".jqx-menu-item").addClass(this.toThemeProperty("jqx-touch"))),this._isTouchDevice=t,t},refresh:function(n){n||this._setSize()},resize:function(n,t){this.width=n;this.height=t;this.refresh()},_closeAll:function(t){var i=t!=null?t.data:this,u=i.items,r;n.each(u,function(){var n=this;n.hasItems==!0&&n.isOpen&&i._closeItem(i,n)});i.mode=="popup"&&t!=null&&(r=i._isRightClick(t),r||i.close())},closeItem:function(t){if(t==null)return!1;var r=t,u=document.getElementById(r),i=this;return n.each(i.items,function(){var n=this;n.isOpen==!0&&n.element==u&&(i._closeItem(i,n),n.parentId)}),!0},openItem:function(t){if(t==null)return!1;var r=t,u=document.getElementById(r),i=this;return n.each(i.items,function(){var n=this;n.isOpen==!1&&n.element==u&&(i._openItem(i,n),n.parentId&&i.openItem(n.parentId))}),!0},_getClosedSubMenuOffset:function(t){var i=n(t.subMenuElement),u=-i.outerHeight(),r=-i.outerWidth(),f=t.level==0&&this.mode=="horizontal";f?r=0:u=0;switch(t.openVerticalDirection){case"up":case"center":u=i.outerHeight()}switch(t.openHorizontalDirection){case this._getDir("left"):r=f?0:i.outerWidth();break;case"center":r=f?0:i.outerWidth()}return{left:r,top:u}},_closeItem:function(t,i,r,u){var o,s,a;if(t==null||i==null)return!1;var f=n(i.subMenuElement),v=i.level==0&&this.mode=="horizontal",h=this._getClosedSubMenuOffset(i),c=h.top,l=h.left,y=n(i.element),e=f.closest("div.jqx-menu-popup");e!=null&&(o=t.animationHideDelay,u==!0&&(o=0),f.data("timer")&&f.data("timer").show!=null&&(clearTimeout(f.data("timer").show),f.data("timer").show=null),s=function(){i.isOpen=!1;v?f.stop().animate({top:c},t.animationHideDuration,function(){n(i.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed"));n(i.element).removeClass(t.toThemeProperty("jqx-menu-item-top-selected"));n(i.element).removeClass(t.toThemeProperty("jqx-rc-b-expanded"));e.removeClass(t.toThemeProperty("jqx-rc-t-expanded"));var r=n(i.arrow);r.length>0&&t.showTopLevelArrows&&(r.removeClass(),i.openVerticalDirection=="down"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-down")),r.addClass(t.toThemeProperty("jqx-icon-arrow-down"))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-up")),r.addClass(t.toThemeProperty("jqx-icon-arrow-up"))));n.jqx.aria(n(i.element),"aria-expanded",!1);e.css({display:"none"});t.animationHideDuration==0&&f.css({top:c});t._raiseEvent("1",i)}):(!n.jqx.browser.msie,f.stop().animate({left:l},t.animationHideDuration,function(){var r;t.animationHideDuration==0&&f.css({left:l});i.level>0?(n(i.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed")),n(i.element).removeClass(t.toThemeProperty("jqx-menu-item-selected")),r=n(i.arrow),r.length>0&&(r.removeClass(),i.openHorizontalDirection!="left"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("right"))),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("left"))),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left")))))):(n(i.element).removeClass(t.toThemeProperty("jqx-fill-state-pressed")),n(i.element).removeClass(t.toThemeProperty("jqx-menu-item-top-selected")),r=n(i.arrow),r.length>0&&(r.removeClass(),i.openHorizontalDirection!="left"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-top-"+t._getDir("right"))),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-top-"+t._getDir("left"))),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left"))))));n.jqx.aria(n(i.element),"aria-expanded",!1);e.css({display:"none"});t._raiseEvent("1",i)}))},o>0?f.data("timer")&&(f.data("timer").hide=setTimeout(function(){s()},o)):s(),r!=undefined&&r&&(a=f.children(),n.each(a,function(){if(t.menuElements[this.id]&&t.menuElements[this.id].isOpen){var i=n(t.menuElements[this.id].subMenuElement);t._closeItem(t,t.menuElements[this.id],!0,!0)}})))},getSubItems:function(t,i){var u,r;if(t==null)return!1;u=this;r=[];i!=null&&n.extend(r,i);var f=t,e=this.menuElements[f],o=n(e.subMenuElement),s=o.find(".jqx-menu-item");return n.each(s,function(){r[this.id]=u.menuElements[this.id];var t=u.getSubItems(this.id,r);n.extend(r,t)}),r},disable:function(t,i){var e,u,f,r;t!=null&&(e=t,u=this,this.menuElements[e]&&(f=this.menuElements[e],f.disabled=i,r=n(f.element),f.element.disabled=i,n.each(r.children(),function(){this.disabled=i}),i?(r.addClass(u.toThemeProperty("jqx-menu-item-disabled")),r.addClass(u.toThemeProperty("jqx-fill-state-disabled"))):(r.removeClass(u.toThemeProperty("jqx-menu-item-disabled")),r.removeClass(u.toThemeProperty("jqx-fill-state-disabled")))))},getItem:function(n){return this.menuElements[n]?this.menuElements[n]:null},disableItem:function(n){this.disable(n,!0)},hideItem:function(t){if(this.menuElements[t]){var i=this.menuElements[t];n(i.element).hide()}},showItem:function(t){if(this.menuElements[t]){var i=this.menuElements[t];n(i.element).show()}},enableItem:function(n){this.disable(n,!1)},_setItemProperty:function(n,t,i){var r,f,u;n!=null&&(r=n,f=this,this.menuElements[r]&&(u=this.menuElements[r],u[t]&&(u[t]=i)))},setItemOpenDirection:function(t,i,r){var f,u,o;if(t!=null){var h=t,e=this,s=n.jqx.browser.msie&&n.jqx.browser.version<8;if(this.menuElements[h]&&(f=this.menuElements[h],i!=null&&(f.openHorizontalDirection=i,f.hasItems&&f.level>0&&(o=n(f.element),o!=undefined&&(u=n(f.arrow),f.arrow==null&&(u=n('<span id="arrow'+o[0].id+'"><\/span>'),s?u.appendTo(o):u.prependTo(o),f.arrow=u[0]),u.removeClass(),f.openHorizontalDirection=="left"?(u.addClass(e.toThemeProperty("jqx-menu-item-arrow-"+e._getDir("left"))),u.addClass(e.toThemeProperty("jqx-icon-arrow-"+e._getDir("left")))):(u.addClass(e.toThemeProperty("jqx-menu-item-arrow-"+e._getDir("right"))),u.addClass(e.toThemeProperty("jqx-icon-arrow-"+e._getDir("right")))),u.css("visibility","inherit"),s?(u.css("display","inline-block"),u.css("float","none")):(u.css("display","block"),u.css("float","right"))))),r!=null)){if(f.openVerticalDirection=r,u=n(f.arrow),o=n(f.element),!e.showTopLevelArrows)return;o!=undefined&&(f.arrow==null&&(u=n('<span id="arrow'+o[0].id+'"><\/span>'),s?u.appendTo(o):u.prependTo(o),f.arrow=u[0]),u.removeClass(),f.openVerticalDirection=="down"?(u.addClass(e.toThemeProperty("jqx-menu-item-arrow-down")),u.addClass(e.toThemeProperty("jqx-icon-arrow-down"))):(u.addClass(e.toThemeProperty("jqx-menu-item-arrow-up")),u.addClass(e.toThemeProperty("jqx-icon-arrow-up"))),u.css("visibility","inherit"),s?(u.css("display","inline-block"),u.css("float","none")):(u.css("display","block"),u.css("float","right")))}}},_getSiblings:function(n){for(var i=[],r=0,t=0;t<this.items.length;t++)this.items[t]!=n&&this.items[t].parentId==n.parentId&&this.items[t].hasItems&&(i[r++]=this.items[t]);return i},_openItem:function(t,i,r){var c,p,s,u,w,h,b,k,y,l,a,v,d;if(t==null||i==null||i.isOpen||i.disabled||t.disabled)return!1;c=t.popupZIndex;r!=undefined&&(c=r);p=t.animationHideDuration;t.animationHideDuration=0;t._closeItem(t,i,!0,!0);t.animationHideDuration=p;n(i.element).focus();s=[5,5];u=n(i.subMenuElement);u!=null&&u.stop();u.data("timer")&&u.data("timer").hide!=null&&clearTimeout(u.data("timer").hide);var f=u.closest("div.jqx-menu-popup"),e=n(i.element),o=i.level==0?this._getOffset(i.element):e.position();i.level>0&&this.hasTransform&&(w=parseInt(e.coord().top)-parseInt(this._getOffset(i.element).top),o.top+=w);i.level==0&&this.mode=="popup"&&(o=e.coord());h=i.level==0&&this.mode=="horizontal";b=h?o.left:this.menuElements[i.parentId]!=null&&this.menuElements[i.parentId].subMenuElement!=null?parseInt(n(n(this.menuElements[i.parentId].subMenuElement).closest("div.jqx-menu-popup")).outerWidth())-s[0]:parseInt(u.outerWidth());f.css({visibility:"visible",display:"block",left:b,top:h?o.top+e.outerHeight():o.top,zIndex:c});u.css("display","block");this.mode!="horizontal"&&i.level==0?(k=this._getOffset(this.element),f.css("left",-1+k.left+this.host.outerWidth()),u.css("left",-u.outerWidth())):(y=this._getClosedSubMenuOffset(i),u.css("left",y.left),u.css("top",y.top));f.css({height:parseInt(u.outerHeight())+parseInt(s[1])+"px"});l=0;a=0;switch(i.openVerticalDirection){case"up":h?(u.css("top",u.outerHeight()),l=s[1],v=parseInt(u.parent().css("padding-bottom")),isNaN(v)&&(v=0),v>0&&f.addClass(this.toThemeProperty("jqx-menu-popup-clear")),u.css("top",u.outerHeight()-v),f.css({display:"block",top:o.top-f.outerHeight(),zIndex:c})):(l=s[1],u.css("top",u.outerHeight()),f.css({display:"block",top:o.top-f.outerHeight()+s[1]+e.outerHeight(),zIndex:c}));break;case"center":h?(u.css("top",0),f.css({display:"block",top:o.top-f.outerHeight()/2+s[1],zIndex:c})):(u.css("top",0),f.css({display:"block",top:o.top+e.outerHeight()/2-f.outerHeight()/2+s[1],zIndex:c}))}switch(i.openHorizontalDirection){case this._getDir("left"):h?f.css({left:o.left-(f.outerWidth()-e.outerWidth()-s[0])}):(a=0,u.css("left",f.outerWidth()),f.css({left:o.left-f.outerWidth()+2*i.level}));break;case"center":h?f.css({left:o.left-(f.outerWidth()/2-e.outerWidth()/2-s[0]/2)}):(f.css({left:o.left-(f.outerWidth()/2-e.outerWidth()/2-s[0]/2)}),u.css("left",f.outerWidth()))}if(h){if(parseInt(u.css("top"))==l){i.isOpen=!0;return}}else if(parseInt(u.css("left"))==a){i.isOpen==!0;return}n.each(t._getSiblings(i),function(){t._closeItem(t,this,!0,!0)});d=n.data(t.element,"animationHideDelay");t.animationHideDelay=d;this.autoCloseInterval>0&&(this.host.data("autoclose")!=null&&this.host.data("autoclose").close!=null&&clearTimeout(this.host.data("autoclose").close),this.host.data("autoclose")!=null&&(this.host.data("autoclose").close=setTimeout(function(){t._closeAll()},this.autoCloseInterval)));u.data("timer")&&(u.data("timer").show=setTimeout(function(){var r;f!=null&&(h?(u.stop(),u.css("left",a),!n.jqx.browser.msie,e.addClass(t.toThemeProperty("jqx-fill-state-pressed")),e.addClass(t.toThemeProperty("jqx-menu-item-top-selected")),i.openVerticalDirection=="down"?(n(i.element).addClass(t.toThemeProperty("jqx-rc-b-expanded")),f.addClass(t.toThemeProperty("jqx-rc-t-expanded"))):(n(i.element).addClass(t.toThemeProperty("jqx-rc-t-expanded")),f.addClass(t.toThemeProperty("jqx-rc-b-expanded"))),r=n(i.arrow),r.length>0&&t.showTopLevelArrows&&(r.removeClass(),i.openVerticalDirection=="down"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-down-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-down"))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-up-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-up")))),t.animationShowDuration==0?(u.css({top:l}),i.isOpen=!0,t._raiseEvent("0",i),n.jqx.aria(n(i.element),"aria-expanded",!0)):u.animate({top:l},t.animationShowDuration,t.easing,function(){i.isOpen=!0;n.jqx.aria(n(i.element),"aria-expanded",!0);t._raiseEvent("0",i)})):(u.stop(),u.css("top",l),!n.jqx.browser.msie,i.level>0?(e.addClass(t.toThemeProperty("jqx-fill-state-pressed")),e.addClass(t.toThemeProperty("jqx-menu-item-selected")),r=n(i.arrow),r.length>0&&(r.removeClass(),i.openHorizontalDirection!="left"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("right")+"-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("left")+"-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left")))))):(e.addClass(t.toThemeProperty("jqx-fill-state-pressed")),e.addClass(t.toThemeProperty("jqx-menu-item-top-selected")),r=n(i.arrow),r.length>0&&(r.removeClass(),i.openHorizontalDirection!="left"?(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("right")+"-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("right")))):(r.addClass(t.toThemeProperty("jqx-menu-item-arrow-"+t._getDir("left")+"-selected")),r.addClass(t.toThemeProperty("jqx-icon-arrow-"+t._getDir("left")))))),!n.jqx.browser.msie,t.animationShowDuration==0?(u.css({left:a}),t._raiseEvent("0",i),i.isOpen=!0,n.jqx.aria(n(i.element),"aria-expanded",!0)):u.animate({left:a},t.animationShowDuration,t.easing,function(){t._raiseEvent("0",i);i.isOpen=!0;n.jqx.aria(n(i.element),"aria-expanded",!0)})))},this.animationShowDelay))},_getDir:function(n){switch(n){case"left":return this.rtl?"right":"left";case"right":return this.rtl?"left":"right"}return"left"},_applyOrientation:function(t,i){var r=this,e=0,f,u,o,s;r.host.removeClass(r.toThemeProperty("jqx-menu-horizontal"));r.host.removeClass(r.toThemeProperty("jqx-menu-vertical"));r.host.removeClass(r.toThemeProperty("jqx-menu"));r.host.removeClass(r.toThemeProperty("jqx-widget"));r.host.addClass(r.toThemeProperty("jqx-widget"));r.host.addClass(r.toThemeProperty("jqx-menu"));t!=undefined&&i!=undefined&&i=="popup"?r.host.parent().length>0&&r.host.parent().parent().length>0&&r.host.parent().parent()[0]==document.body&&(f=n.data(document.body,"jqxMenuOldHost"+r.element.id),f!=null&&(u=r.host.closest("div.jqx-menu-wrapper"),u.remove(),u.appendTo(f),r.host.css("display","block"),r.host.css("visibility","visible"),u.css("display","block"),u.css("visibility","visible"))):t==undefined&&i==undefined&&n.data(document.body,"jqxMenuOldHost"+r.element.id,r.host.parent()[0]);r.autoOpenPopup?r.mode=="popup"?(r.addHandler(n(document),"contextmenu."+r.element.id,function(){return!1}),r.addHandler(n(document),"mousedown.menu"+r.element.id,function(n){r._openContextMenu(n)})):(r.removeHandler(n(document),"contextmenu."+r.element.id),r.removeHandler(n(document),"mousedown.menu"+r.element.id)):(r.removeHandler(n(document),"contextmenu."+r.element.id),r.removeHandler(n(document),"mousedown.menu"+r.element.id),r.addHandler(n(document),"contextmenu."+r.element.id,function(n){if(n.target&&n.target.className.indexOf&&n.target.className.indexOf("jqx-menu")>=0)return!1}));r.rtl&&r.host.addClass(r.toThemeProperty("jqx-rtl"));switch(r.mode){case"horizontal":r.host.addClass(r.toThemeProperty("jqx-widget-header"));r.host.addClass(r.toThemeProperty("jqx-menu-horizontal"));n.each(r.items,function(){var i=this,u,t;$element=n(i.element);t=n(i.arrow);t.removeClass();i.hasItems&&i.level>0&&(t=n('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"><\/span>'),t.prependTo($element),t.css("float",r._getDir("right")),t.addClass(r.toThemeProperty("jqx-menu-item-arrow-"+r._getDir("right"))),t.addClass(r.toThemeProperty("jqx-icon-arrow-"+r._getDir("right"))),i.arrow=t[0]);i.level==0&&(n(i.element).css("float",r._getDir("left")),!i.ignoretheme&&i.hasItems&&r.showTopLevelArrows?(t=n('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"><\/span>'),u=n.jqx.browser.msie&&n.jqx.browser.version<8,i.arrow==null?u?t.appendTo($element):t.prependTo($element):t=n(i.arrow),i.openVerticalDirection=="down"?(t.addClass(r.toThemeProperty("jqx-menu-item-arrow-down")),t.addClass(r.toThemeProperty("jqx-icon-arrow-down"))):(t.addClass(r.toThemeProperty("jqx-menu-item-arrow-up")),t.addClass(r.toThemeProperty("jqx-icon-arrow-up"))),t.css("visibility","inherit"),u?t.css("display","inline-block"):(t.css("display","block"),t.css("float","right")),i.arrow=t[0]):i.ignoretheme||!i.hasItems||r.showTopLevelArrows||i.arrow!=null&&(t=n(i.arrow),t.remove(),i.arrow=null),e=Math.max(e,$element.height()))});break;case"vertical":case"popup":case"simple":r.host.addClass(r.toThemeProperty("jqx-menu-vertical"));n.each(r.items,function(){var i=this,t;if($element=n(i.element),i.hasItems&&!i.ignoretheme){if(i.arrow&&n(i.arrow).remove(),r.mode=="simple")return!0;t=n('<span style="border: none; background-color: transparent;" id="arrow'+$element[0].id+'"><\/span>');t.prependTo($element);t.css("float","right");i.level==0?(t.addClass(r.toThemeProperty("jqx-menu-item-arrow-top-"+r._getDir("right"))),t.addClass(r.toThemeProperty("jqx-icon-arrow-"+r._getDir("right")))):(t.addClass(r.toThemeProperty("jqx-menu-item-arrow-"+r._getDir("right"))),t.addClass(r.toThemeProperty("jqx-icon-arrow-"+r._getDir("right"))));i.arrow=t[0]}$element.css("float","none")});r.mode=="popup"?(r.host.addClass(r.toThemeProperty("jqx-widget-content")),r.host.wrap('<div tabindex=0 class="jqx-menu-wrapper" style="z-index:'+r.popupZIndex+'; border: none; background-color: transparent; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: visible;"><\/div>'),u=r.host.closest("div.jqx-menu-wrapper"),r.host.addClass(r.toThemeProperty("jqx-popup")),u[0].id="menuWrapper"+r.element.id,u.appendTo(n(document.body)),r.addHandler(u,"keydown",function(n){return r.handleKeyDown(n)})):r.host.addClass(r.toThemeProperty("jqx-widget-header"));r.mode=="popup"&&(o=r.host.height(),r.host.css("position","absolute"),r.host.css("top","0"),r.host.css("left","0"),r.mode!="simple"&&(r.host.height(o),r.host.css("display","none")))}s=r.isTouchDevice();r.autoCloseOnClick&&(r.removeHandler(n(document),"mousedown.menu"+r.element.id,r._closeAfterClick),r.addHandler(n(document),"mousedown.menu"+r.element.id,r._closeAfterClick,r),s&&(r.removeHandler(n(document),n.jqx.mobile.getTouchEventName("touchstart")+".menu"+r.element.id,r._closeAfterClick,r),r.addHandler(n(document),n.jqx.mobile.getTouchEventName("touchstart")+".menu"+r.element.id,r._closeAfterClick,r)))},_getBodyOffset:function(){var t=0,i=0;return n("body").css("border-top-width")!="0px"&&(t=parseInt(n("body").css("border-top-width")),isNaN(t)&&(t=0)),n("body").css("border-left-width")!="0px"&&(i=parseInt(n("body").css("border-left-width")),isNaN(i)&&(i=0)),{left:i,top:t}},_getOffset:function(t){var u=n.jqx.mobile.isSafariMobileBrowser(),f=n(t).coord(!0),i=f.top,r=f.left,e,o;return n("body").css("border-top-width")!="0px"&&(i=parseInt(i)+this._getBodyOffset().top),n("body").css("border-left-width")!="0px"&&(r=parseInt(r)+this._getBodyOffset().left),e=n.jqx.mobile.isWindowsPhone(),o=n.jqx.mobile.isTouchDevice(),this.hasTransform||u!=null&&u||e||o?{left:n.jqx.mobile.getLeftPos(t),top:n.jqx.mobile.getTopPos(t)}:{left:r,top:i}},_isRightClick:function(n){var t,n;return n||(n=window.event),n.which?t=n.which==3:n.button&&(t=n.button==2),t},_openContextMenu:function(n){var t=this,i=t._isRightClick(n);i&&t.open(parseInt(n.clientX)+5,parseInt(n.clientY)+5)},close:function(){var t=this,i=n.data(this.element,"contextMenuOpened"+this.element.id),r;i&&(r=this.host,n.each(t.items,function(){var n=this;n.hasItems&&t._closeItem(t,n)}),n.each(t.items,function(){var t=this,i;t.isOpen==!0&&($submenu=n(t.subMenuElement),i=$submenu.closest("div.jqx-menu-popup"),i.hide(this.animationHideDuration))}),this.host.hide(this.animationHideDuration),n.data(t.element,"contextMenuOpened"+this.element.id,!1),t._raiseEvent("1",t),t._raiseEvent("5"))},open:function(t,i){var u,r;this.mode=="popup"&&(u=0,this.host.css("display")=="block"&&(this.close(),u=this.animationHideDuration),r=this,(t==undefined||t==null)&&(t=0),(i==undefined||i==null)&&(i=0),setTimeout(function(){r.host.show(r.animationShowDuration);r.host.css("visibility","visible");n.data(r.element,"contextMenuOpened"+r.element.id,!0);r._raiseEvent("0",r);r._raiseEvent("4",{left:t,top:i});r.host.css("z-index",r.popupZIndex);t!=undefined&&i!=undefined&&r.host.css({left:t,top:i});r.focus()},u))},_renderHover:function(n,t){var i=this;t.ignoretheme||(this.addHandler(n,"mouseenter",function(){i.hoveredItem=t;t.disabled||t.separator||!i.enableHover||i.disabled||(t.level>0?(n.addClass(i.toThemeProperty("jqx-fill-state-hover")),n.addClass(i.toThemeProperty("jqx-menu-item-hover"))):(n.addClass(i.toThemeProperty("jqx-fill-state-hover")),n.addClass(i.toThemeProperty("jqx-menu-item-top-hover"))))}),this.addHandler(n,"mouseleave",function(){t.disabled||t.separator||!i.enableHover||i.disabled||(t.level>0?(n.removeClass(i.toThemeProperty("jqx-fill-state-hover")),n.removeClass(i.toThemeProperty("jqx-menu-item-hover"))):(n.removeClass(i.toThemeProperty("jqx-fill-state-hover")),n.removeClass(i.toThemeProperty("jqx-menu-item-top-hover"))))}))},_closeAfterClick:function(t){var i=t!=null?t.data:this,r=!1;i.autoCloseOnClick&&(n.each(n(t.target).parents(),function(){if(this.className.indexOf&&this.className.indexOf("jqx-menu")!=-1)return r=!0,!1}),r||(t.data=i,i._closeAll(t)))},_autoSizeHorizontalMenuItems:function(){var i=this,t;i.autoSizeMainItems&&this.mode=="horizontal"&&(t=this.maxHeight,parseInt(t)>parseInt(this.host.height())&&(t=parseInt(this.host.height())),t=parseInt(this.host.height()),n.each(this.items,function(){var f=this,u;if($element=n(f.element),f.level==0&&t>0){var h=$element.children().length>0?parseInt($element.children().height()):$element.height(),e=i.host.find("ul:first"),c=parseInt(e.css("padding-top")),l=parseInt(e.css("margin-top")),o=t-2*(l+c),s=parseInt(o)/2-h/2,r=parseInt(s),a=parseInt(s);$element.css("padding-top",r);$element.css("padding-bottom",a);parseInt($element.outerHeight())>o&&(u=1,$element.css("padding-top",r-u),r=r-u)}}));n.each(this.items,function(){var t=this,r,i;$element=n(t.element);t.hasItems&&t.level>0&&t.arrow&&(r=n(t.arrow),i=n(t.element).height(),i>15&&r.css("margin-top",(i-15)/2))})},_nextVisibleItem:function(n,t){if(n==null||n==undefined)return null;for(var i=n;i!=null;)if(i=i.nextItem,this._isVisible(i)&&!i.disabled&&i.type!=="separator"){if(this.minimized)return i;if(t!=undefined&&i&&i.level!=t)continue;return i}return null},_prevVisibleItem:function(n,t){if(n==null||n==undefined)return null;for(var i=n;i!=null;)if(i=i.prevItem,this._isVisible(i)&&!i.disabled&&i.type!=="separator"){if(this.minimized)return i;if(t!=undefined&&i&&i.level!=t)continue;return i}return null},_parentItem:function(t){var i,r;return t==null||t==undefined?null:(i=t.parentElement,!i)?null:(r=null,n.each(this.items,function(){if(this.element==i)return r=this,!1}),r)},_isElementVisible:function(t){return t==null?!1:n(t).css("display")!="none"&&n(t).css("visibility")!="hidden"?!0:!1},_isVisible:function(n){if(n==null||n==undefined||!this._isElementVisible(n.element))return!1;var t=this._parentItem(n);if(t==null||this.minimized)return!0;if(t!=null){if(!this._isElementVisible(t.element))return!1;if(t.isOpen||this.minimized){while(t!=null)if((t=this._parentItem(t),t!=null&&!this._isElementVisible(t.element))||t!=null&&!t.isOpen)return!1}else return!1}return!0},_render:function(t,i){var s;this.disabled&&(this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled")),this.host.addClass(this.toThemeProperty("jqx-menu-disabled")));this.host.attr("tabindex")==undefined&&this.host.attr("tabindex",0);var e=this.popupZIndex,o=[5,5],r=this;n.data(r.element,"animationHideDelay",r.animationHideDelay);var u=this.isTouchDevice(),f=u&&(n.jqx.mobile.isWindowsPhone()||navigator.userAgent.indexOf("Touch")>=0),h=!1;navigator.platform.toLowerCase().indexOf("win")!=-1&&(navigator.userAgent.indexOf("Windows Phone")>=0||navigator.userAgent.indexOf("WPDesktop")>=0||navigator.userAgent.indexOf("IEMobile")>=0||navigator.userAgent.indexOf("ZuneWP7")>=0?this.touchDevice=!0:navigator.userAgent.indexOf("Touch")>=0&&(s="MSPointerDown"in window,(s||n.jqx.mobile.isWindowsPhone()||navigator.userAgent.indexOf("ARM")>=0)&&(h=!0,f=!0,r.clickToOpen=!0,r.autoCloseOnClick=!1,r.enableHover=!1)));n.data(document.body,"menuel",this);this.hasTransform=n.jqx.utilities.hasTransform(this.host);this._applyOrientation(t,i);this.removeHandler(this.host,"blur");this.removeHandler(this.host,"focus");this.addHandler(this.host,"blur",function(){if(r.keyboardNavigation&&r.activeItem){if(r.mode==="popup"&&document.activeElement&&document.activeElement.className.indexOf("jqx-menu-wrapper")>=0)return;n(r.activeItem.element).removeClass(r.toThemeProperty("jqx-fill-state-focus"));r.activeItem=null}});this.addHandler(this.host,"focus",function(){if(r.keyboardNavigation&&!r.activeItem)if(r.hoveredItem)n(r.hoveredItem.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=r.hoveredItem;else{var t=function(){if(n.jqx.isHidden(n(r.items[0].element))){var t=r._nextVisibleItem(r.items[0],0);t&&(n(t.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=t)}else n(r.items[0].element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=r.items[0]};r.activeItem?n.jqx.isHidden(n(r.activeItem.element))?(n(r.activeItem.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),t()):n(r.activeItem.element).addClass(r.toThemeProperty("jqx-fill-state-focus")):t()}});this.removeHandler(this.host,"keydown.menu"+this.element.id);r.handleKeyDown=function(t){var i,a,p,o,l,v,w,y,f,s,u,e,b,c;if(r.keyboardNavigation){if(t.target.nodeName.toLowerCase()==="input")return!0;if(i=null,a=null,n.each(r.items,function(){var n=this;return this.disabled?!0:(this.element.className.indexOf("pressed")>=0&&(a=this),this.element.className.indexOf("focus")>=0?(i=this,!1):void 0)}),!i&&a)return i=a,!1;if(!i)return n(r.items[0].element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=r.items[0],i=r.activeItem,!1;if(p=!1,t.keyCode==27){if(t.data=r,r._closeAll(t),i)for(o=i;o!=null;)o.parentItem?o=o.parentItem:(n(r.activeItem.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=o,n(r.activeItem.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),o=o.parentItem);p=!0}t.keyCode==13&&i&&(p=!0,r._raiseEvent("2",{item:i.element,event:t,type:"keyboard"}),l=i.anchor!=null?n(i.anchor):null,l!=null&&l.length>0&&(v=l.attr("href"),w=l.attr("target"),v!=null&&(w!=null?window.open(v,w):window.location=v)),t.preventDefault(),t.stopPropagation(),n(i.element).focus());y=function(n){var i,u,t;if(n==null)return[];for(i=[],u=0,t=0;t<r.items.length;t++)r.items[t].parentId==n.parentId&&(i[u++]=r.items[t]);return i};f="";switch(t.keyCode){case 40:f="down";break;case 38:f="up";break;case 39:f="right";break;case 37:f="left"}if(i&&i.openHorizontalDirection==="left"&&f==="left"&&(f="right"),i&&i.openHorizontalDirection==="left"&&f==="right"&&(f="left"),i&&i.openVerticalDirection==="top"&&f==="top"&&(f="bottom"),i&&i.openVerticalDirection==="top"&&f==="bottom"&&(f="top"),r.rtl&&(f==="right"?f="left":f==="left"&&(f="right")),f==="right"&&!r.minimized){if(t.altKey&&(i.level!=0&&i.hasItems||r.mode!="horizontal"))r._openItem(r,i);else{var u=r._nextVisibleItem(i,0),h=r._nextVisibleItem(i),e=y(h);u||(u=h);u&&(u.parentId===i.parentId&&u.level==0&&r.mode=="horizontal"||h.id==e[0].id&&h.level!=0)&&(h.id==e[0].id&&(i.level!=0||i.level==0&&r.mode!="horizontal")&&(u=h),n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u)}t.preventDefault();t.stopPropagation()}if(f!=="left"||r.minimized||(t.altKey&&(i.level!=0&&r.mode!=="horizontal"||i.level>1&&r.mode==="horizontal"||i.level==1&&i.hasItems&&r.mode==="horizontal")?i.hasItems?r._closeItem(r,i):i.parentItem&&(r._closeItem(r,i.parentItem),n(i.parentItem.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=i.parentItem):(u=r._prevVisibleItem(i,0),s=i.parentItem,u&&u.parentId===i.parentId&&u.level==0&&r.mode=="horizontal"?(n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u):s&&s.level==0&&r.mode=="horizontal"||!s||s.level!=i.level-1||(n(s.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=s)),t.preventDefault(),t.stopPropagation()),f==="down"?(t.altKey?(i.level==0&&i.hasItems&&r._openItem(r,i),r.minimized&&r.minimizedHidden&&r.minimizedItem.trigger("click")):(u=r._nextVisibleItem(i,i.level),e=y(u),r.minimized&&u?(n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u):(u&&(u.parentId===i.parentId||u.id==e[0].id&&r.mode=="horizontal")&&(u.level==0&&r.mode=="horizontal"||(n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u)),r.mode==="horizontal"&&i.level===0&&i.isOpen&&i.hasItems&&(u=r._nextVisibleItem(i),n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u))),t.preventDefault(),t.stopPropagation()):f==="up"&&(t.altKey?(i.parentItem&&i.parentItem.level==0?(r._closeItem(r,i.parentItem),n(i.parentItem.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=i.parentItem):i.parentItem===null&&i.level===0&&r.mode==="horizontal"&&r._closeItem(r,i),r.minimized&&(r.minimizedHidden||r.minimizedItem.trigger("click"))):(u=r._prevVisibleItem(i,i.level),e=y(i),r.minimized&&u?(n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u):u&&(u.parentId===i.parentId||u.id==i.parentId&&u.level==0&&r.mode=="horizontal")?u.level==0&&r.mode==="horizontal"&&i.level===0||(n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u):i&&i.id==e[0].id&&i.parentItem&&i.parentItem.level===0&&r.mode==="horizontal"&&(u=i.parentItem,n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u)),t.preventDefault(),t.stopPropagation()),t.keyCode==9)if(u=t.shiftKey?r._prevVisibleItem(i):r._nextVisibleItem(i),u)n(u.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=u,t.preventDefault(),t.stopPropagation();else if(r.lockFocus){for(e=[],b=0,c=0;c<r.items.length;c++)r.items[c]!=i&&r.items[c].parentId==i.parentId&&(e[b++]=r.items[c]);e.length>0&&(t.shiftKey?(n(e[e.length-1].element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=e[e.length-1]):(n(e[0].element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=e[0]),n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")));t.preventDefault();t.stopPropagation()}else i&&(n(i.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=null)}else return!0};this.addHandler(this.host,"keydown.menu"+this.element.id,function(n){r.handleKeyDown(n)});r.enableRoundedCorners&&this.host.addClass(r.toThemeProperty("jqx-rc-all"));n.each(this.items,function(){var t=this,s=n(t.element),i,h,c;if(s.attr("role","menuitem"),r.enableRoundedCorners&&s.addClass(r.toThemeProperty("jqx-rc-all")),r.removeHandler(s,"click"),r.addHandler(s,"click",function(i){var f,e,o;t.disabled||r.disabled||(r.keyboardNavigation&&(r.activeItem&&n(r.activeItem.element).removeClass(r.toThemeProperty("jqx-fill-state-focus")),r.activeItem=t,n(t.element).addClass(r.toThemeProperty("jqx-fill-state-focus")),r.minimized&&i.stopPropagation()),r._raiseEvent("2",{type:"mouse",item:t.element,event:i}),r.autoOpen?!r.autoCloseOnClick||u||r.clickToOpen||t.closeOnClick&&(i.data=r,r._closeAll(i)):t.level>0&&(!r.autoCloseOnClick||u||r.clickToOpen||(i.data=r,r._closeAll(i))),u&&r.autoCloseOnClick&&(i.data=r,t.hasItems||r._closeAll(i)),i.target.tagName!="A"&&i.target.tagName!="a"&&(f=t.anchor!=null?n(t.anchor):null,f!=null&&f.length>0&&(e=f.attr("href"),o=f.attr("target"),e!=null&&(o!=null?window.open(e,o):window.location=e))))}),r.removeHandler(s,"mouseenter"),r.removeHandler(s,"mouseleave"),f||r.mode=="simple"||r._renderHover(s,t,u),t.subMenuElement!=null){if(i=n(t.subMenuElement),r.mode=="simple")return i.show(),!0;if(i.wrap('<div class="jqx-menu-popup '+r.toThemeProperty("jqx-menu-popup")+'" style="border: none; background-color: transparent; z-index:'+e+'; padding: 0px; margin: 0px; position: absolute; top: 0; left: 0; display: block; visibility: hidden;"><div style="background-color: transparent; border: none; position:absolute; overflow:hidden; left: 0; top: 0; right: 0; width: 100%; height: 100%;"><\/div><\/div>'),i.css({overflow:"hidden",position:"absolute",left:0,display:"inherit",top:-i.outerHeight()}),i.data("timer",{}),t.level>0?i.css("left",-i.outerWidth()):r.mode=="horizontal"&&i.css("left",0),e++,h=n(t.subMenuElement).closest("div.jqx-menu-popup").css({width:parseInt(n(t.subMenuElement).outerWidth())+parseInt(o[0])+"px",height:parseInt(n(t.subMenuElement).outerHeight())+parseInt(o[1])+"px"}),c=s.closest("div.jqx-menu-popup"),c.length>0){var l=i.css("margin-left"),a=i.css("margin-right"),v=i.css("padding-left"),y=i.css("padding-right");h.appendTo(c);i.css("margin-left",l);i.css("margin-right",a);i.css("padding-left",v);i.css("padding-right",y)}else{var l=i.css("margin-left"),a=i.css("margin-right"),v=i.css("padding-left"),y=i.css("padding-right");h.appendTo(n(document.body));i.css("margin-left",l);i.css("margin-right",a);i.css("padding-left",v);i.css("padding-right",y)}r.clickToOpen?(r.removeHandler(s,"mousedown"),r.addHandler(s,"mousedown",function(n){clearTimeout(i.data("timer").hide);i!=null&&i.stop();t.level!=0||t.isOpen||(n.data=r,r._closeAll(n));t.isOpen?r._closeItem(r,t,!0):r._openItem(r,t)})):((u||f)&&(r.removeHandler(s,n.jqx.mobile.getTouchEventName("touchstart")),r.addHandler(s,n.jqx.mobile.getTouchEventName("touchstart"),function(n){return clearTimeout(i.data("timer").hide),i!=null&&i.stop(),t.level!=0||t.isOpen||r.mode=="popup"||(n.data=r,r._closeAll(n)),t.isOpen?r._closeItem(r,t,!0):r._openItem(r,t),!1})),f||(r.addHandler(s,"mouseenter",function(){if((r.autoOpen||t.level>0&&!r.autoOpen)&&clearTimeout(i.data("timer").hide),t.parentId&&t.parentId!=0&&r.menuElements[t.parentId]){var n=r.menuElements[t.parentId].isOpen;if(!n)return}return(r.autoOpen||t.level>0&&!r.autoOpen)&&r._openItem(r,t),!1}),r.addHandler(s,"mousedown",function(){r.autoOpen||t.level!=0||(clearTimeout(i.data("timer").hide),i!=null&&i.stop(),t.isOpen?r._closeItem(r,t,!0):r._openItem(r,t))}),r.addHandler(s,"mouseleave",function(u){if(r.autoCloseOnMouseLeave){clearTimeout(i.data("timer").hide);var e=n(t.subMenuElement),o={left:parseInt(u.pageX),top:parseInt(u.pageY)},f={left:parseInt(e.coord().left),top:parseInt(e.coord().top),width:parseInt(e.outerWidth()),height:parseInt(e.outerHeight())},s=!0;f.left-5<=o.left&&o.left<=f.left+f.width+5&&f.top<=o.top&&o.top<=f.top+f.height&&(s=!1);s&&r._closeItem(r,t,!0)}}),r.removeHandler(h,"mouseenter"),r.addHandler(h,"mouseenter",function(){clearTimeout(i.data("timer").hide)}),r.removeHandler(h,"mouseleave"),r.addHandler(h,"mouseleave",function(){r.autoCloseOnMouseLeave&&(clearTimeout(i.data("timer").hide),clearTimeout(i.data("timer").show),i!=null&&i.stop(),r._closeItem(r,t,!0))})))}});this.mode=="simple"&&this._renderSimpleMode();this._autoSizeHorizontalMenuItems();this._raiseEvent("3",this)},_renderSimpleMode:function(){this.host.show()},createID:function(){var n=Math.random()+"";for(n=n.replace(".",""),n="99"+n,n=n/1;this.items[n];)n=Math.random()+"",n=n.replace(".",""),n=n/1;return"menuItem"+n},_createMenu:function(t,i){var g,e,o,c,s,f,v,d,w,b,a,h,k,r;if(t!=null){for(i==undefined&&(i=!0),i==null&&(i=!0),g=this,n(t).addClass("jqx-menu-ul"),e=n(t).find("li"),o=0,this.itemMapping=[],c=0;c<e.length;c++)if(s=e[c],f=n(s),s.className.indexOf("jqx-menu")!=-1||this.autoGenerate!=!1){v=s.id;v||(v=this.createID());i&&(s.id=v,this.items[o]=new n.jqx._jqxMenu.jqxMenuItem,this.menuElements[v]=this.items[o]);o+=1;var p=0,u=this,nt=f.children();nt.each(function(){return(i||(this.className="",u.autoGenerate&&(n(u.items[o-1].subMenuElement)[0].className="",u.minimized||n(u.items[o-1].subMenuElement).addClass(u.toThemeProperty("jqx-widget-content")),n(u.items[o-1].subMenuElement).addClass(u.toThemeProperty("jqx-menu-dropdown")),n(u.items[o-1].subMenuElement).addClass(u.toThemeProperty("jqx-popup")))),this.className.indexOf("jqx-menu-dropdown")!=-1)?(i&&(u.items[o-1].subMenuElement=this),!1):u.autoGenerate&&(this.tagName=="ul"||this.tagName=="UL")?(i&&(u.items[o-1].subMenuElement=this),this.className="",u.minimized||n(this).addClass(u.toThemeProperty("jqx-widget-content")),n(this).addClass(u.toThemeProperty("jqx-menu-dropdown")),n(this).addClass(u.toThemeProperty("jqx-popup")),n(this).attr("role","menu"),u.rtl?n(this).addClass(u.toThemeProperty("jqx-rc-l")):n(this).addClass(u.toThemeProperty("jqx-rc-r")),n(this).addClass(u.toThemeProperty("jqx-rc-b")),!1):void 0});d=f.parents();d.each(function(){return this.className.indexOf("jqx-menu-item")!=-1?(p=this.id,!1):u.autoGenerate&&(this.tagName=="li"||this.tagName=="LI")?(p=this.id,!1):void 0});var w=!1,y=s.getAttribute("type"),l=s.getAttribute("ignoretheme")||s.getAttribute("data-ignoretheme");l?(l=="true"||l==!0)&&(l=!0):l=!1;y?y=="separator"&&(w=!0):y=s.type;w||(y=p?"sub":"top");r=this.items[o-1];i&&(r.id=v,r.parentId=p,r.type=y,r.separator=w,r.element=e[c],b=f.children("a"),r.disabled=s.getAttribute("item-disabled")=="true"?!0:!1,r.level=f.parents("li").length,r.anchor=b.length>0?b:null,r.anchor&&n(r.anchor).attr("tabindex",-1));r.ignoretheme=l;a=this.menuElements[p];a!=null&&(a.ignoretheme&&(r.ignoretheme=a.ignoretheme,l=a.ignoretheme),r.parentItem=a,r.parentElement=a.element);this.autoGenerate&&(y=="separator"?(f.removeClass(),f.addClass(this.toThemeProperty("jqx-menu-item-separator")),f.attr("role","separator")):l||(f[0].className=f[0].className.indexOf("jqx-grid-menu-item-touch")>=0?this.toThemeProperty("jqx-grid-menu-item-touch"):"",this.rtl&&f.addClass(this.toThemeProperty("jqx-rtl")),r.level>0&&!u.minimized?(f.addClass(this.toThemeProperty("jqx-item")),f.addClass(this.toThemeProperty("jqx-menu-item"))):(f.addClass(this.toThemeProperty("jqx-item")),f.addClass(this.toThemeProperty("jqx-menu-item-top")))));r.disabled&&(f.addClass(u.toThemeProperty("jqx-menu-item-disabled")),f.addClass(u.toThemeProperty("jqx-fill-state-disabled")));this.itemMapping[c]={element:e[c],item:r};this.itemMapping["id"+e[c].id]=this.itemMapping[c];i&&!l&&(r.hasItems=f.find("li").length>0,r.hasItems&&r.element&&(n.jqx.aria(n(r.element),"aria-haspopup",!0),r.subMenuElement.id||(r.subMenuElement.id=n.jqx.utilities.createId()),n.jqx.aria(n(r.element),"aria-owns",r.subMenuElement.id)))}for(h=0;h<e.length;h++)if(k=e[h],this.itemMapping["id"+k.id]){if(r=this.itemMapping["id"+k.id].item,!r)continue;r.prevItem=null;r.nextItem=null;h>0&&this.itemMapping["id"+e[h-1].id]&&(r.prevItem=this.itemMapping["id"+e[h-1].id].item);h<e.length-1&&this.itemMapping["id"+e[h+1].id]&&(r.nextItem=this.itemMapping["id"+e[h+1].id].item)}}},destroy:function(){var t=this,i,r;n.jqx.utilities.resize(t.host,null,!0);i=t.host.closest("div.jqx-menu-wrapper");t.removeHandler(i,"keydown");i.remove();t.removeHandler(n("#menuWrapper"+t.element.id),"keydown");n("#menuWrapper"+t.element.id).remove();t.removeHandler(t.host,"keydown");t.removeHandler(t.host,"focus");t.removeHandler(t.host,"blur");t.removeHandler(n(document),"mousedown.menu"+t.element.id,t._closeAfterClick);t.removeHandler(n(document),"mouseup.menu"+t.element.id,t._closeAfterClick);t.removeHandler(n(document),"contextmenu."+t.element.id);t.removeHandler(t.host,"contextmenu."+t.element.id);n.data(document.body,"jqxMenuOldHost"+t.element.id,null);t.isTouchDevice()&&t.removeHandler(n(document),n.jqx.mobile.getTouchEventName("touchstart")+".menu"+t.element.id,t._closeAfterClick,this);n(window).off&&n(window).off("resize.menu"+t.element.id);n.each(t.items,function(){var r=this,i=n(r.element),u,f;t.removeHandler(i,"click");t.removeHandler(i,"selectstart");t.removeHandler(i,"mouseenter");t.removeHandler(i,"mouseleave");t.removeHandler(i,"mousedown");t.removeHandler(i,"mouseleave");u=n(r.subMenuElement);f=u.closest("div.jqx-menu-popup");f.remove();delete this.subMenuElement;delete this.element});n.data(document.body,"menuel",null);delete t.menuElements;t.items=[];delete t.items;r=n.data(t.element,"jqxMenu");r&&delete r.instance;t.host.removeClass();t.host.remove();delete t.host;delete t.element},_raiseEvent:function(t,i){var u,r;return i==undefined&&(i={owner:null}),u=this.events[t],args=i,args.owner=this,r=new n.Event(u),t=="2"&&(args=i.item,args.owner=this,args.clickType=i.type,n.extend(r,i.event),r.type="itemclick"),r.owner=this,r.args=args,this.host.trigger(r)},propertiesChangedHandler:function(t,i,r){var u,f;r.width&&r.height&&Object.keys(r).length==2&&(t._setSize(),t.mode==="popup"&&(u=this.host.closest("div.jqx-menu-wrapper"),u[i](r),f=this.host[0].id,n("#"+f)[i](r)))},propertyChangedHandler:function(t,i,r,u){var e,o,s,f;if(this.isInitialized!=undefined&&this.isInitialized!=!1&&(!t.batchUpdate||!t.batchUpdate.width||!t.batchUpdate.height||Object.keys(t.batchUpdate).length!=2)&&(i=="disabled"&&(t.disabled?(t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")),t.host.addClass(t.toThemeProperty("jqx-menu-disabled"))):(t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),t.host.removeClass(t.toThemeProperty("jqx-menu-disabled")))),u!=r)){if(i=="touchMode"&&(this._isTouchDevice=null,t._render(u,r)),i==="width"||i==="height"){t._setSize();t.mode==="popup"&&(e=this.host.closest("div.jqx-menu-wrapper"),e[i](u),o=this.host[0].id,n("#"+o)[i](u));return}i=="source"&&t.source!=null&&(s=t.loadItems(t.source),t.element.innerHTML=s,f=t.host.find("ul:first"),f.length>0&&(t.refresh(),t._createMenu(f[0]),t._render()));i=="autoCloseOnClick"?u==!1?t.removeHandler(n(document),"mousedown.menu"+this.element.id,t._closeAll):t.addHandler(n(document),"mousedown.menu"+this.element.id,t,t._closeAll):i=="mode"||i=="width"||i=="height"||i=="showTopLevelArrows"?(t.refresh(),i=="mode"?t._render(u,r):t._applyOrientation()):i=="theme"&&n.jqx.utilities.setTheme(r,u,t.host)}}})}(jqxBaseFramework),function(n){n.jqx._jqxMenu.jqxMenuItem=function(n,t,i){return{id:n,parentId:t,parentItem:null,anchor:null,type:i,disabled:!1,level:0,isOpen:!1,hasItems:!1,element:null,subMenuElement:null,arrow:null,openHorizontalDirection:"right",openVerticalDirection:"down",closeOnClick:!0}}}(jqxBaseFramework),function(n){n.jqx.jqxWidget("jqxListBox","",{});n.extend(n.jqx._jqxListBox.prototype,{defineInstance:function(){var t={disabled:!1,checkboxSize:16,checkboxes:!1,width:null,height:null,items:[],multiple:!1,selectedIndex:-1,selectedIndexes:[],source:null,scrollBarSize:n.jqx.utilities.scrollBarSize,enableHover:!0,enableSelection:!0,visualItems:[],groups:[],equalItemsWidth:!0,itemHeight:-1,visibleItems:[],emptyGroupText:"Group",hasThreeStates:!1,autoHeight:!1,autoItemsHeight:!1,roundedcorners:!0,touchMode:"auto",displayMember:"",groupMember:"",valueMember:"",searchMember:"",searchMode:"startswithignorecase",incrementalSearch:!0,incrementalSearchDelay:1e3,incrementalSearchKeyDownDelay:300,allowDrag:!1,allowDrop:!0,dropAction:"default",touchModeStyle:"auto",keyboardNavigation:!0,enableMouseWheel:!0,multipleextended:!1,selectedValues:[],emptyString:"",rtl:!1,rendered:null,renderer:null,dragStart:null,dragEnd:null,focusable:!0,ready:null,_checkForHiddenParent:!0,autoBind:!0,_renderOnDemand:!1,filterable:!1,filterHeight:27,filterPlaceHolder:"Looking for",filterDelay:100,filterChange:null,aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["select","unselect","change","checkChange","dragStart","dragEnd","bindingComplete","itemAdd","itemRemove","itemUpdate"]};return this===n.jqx._jqxListBox.prototype?t:(n.extend(!0,this,t),t)},createInstance:function(){var t=this,i;n.jqx.utilities.scrollBarSize!=15&&(t.scrollBarSize=n.jqx.utilities.scrollBarSize);t.width==null&&(t.width=200);t.height==null&&(t.height=200);t.renderListBox();i=t;n.jqx.utilities.resize(t.host,function(){i._updateSize()},!1,t._checkForHiddenParent)},resize:function(n,t){this.width=n;this.height=t;this._updateSize()},render:function(){this.renderListBox();this.refresh()},renderListBox:function(){var t=this,o=t.element.nodeName.toLowerCase(),u,f,h,c,l,r,y,s,e,p,w;o=="select"||o=="ul"||o=="ol"?(t.field=t.element,t.field.className&&(t._className=t.field.className),u={title:t.field.title},u.id=t.field.id.length?t.field.id.replace(/[^\w]/g,"_")+"_jqxListBox":n.jqx.utilities.createId()+"_jqxListBox",f=n("<div><\/div>",u),t.width||(t.width=n(t.field).width()),t.height||(t.height=n(t.field).outerHeight()),t.element.style.cssText=t.field.style.cssText,n(t.field).hide().after(f),h=t.host.data(),t.host=f,t.host.data(h),t.element=f[0],t.element.id=t.field.id,t.field.id=u.id,t._className&&(t.host.addClass(t._className),n(t.field).removeClass(t._className)),t.field.tabIndex&&(c=t.field.tabIndex,t.field.tabIndex=-1,t.element.tabIndex=c)):(t.host.find("li").length>0||t.host.find("option").length>0)&&(l=n.jqx.parseSourceTag(t.element),t.source=l.items);t.element.innerHTML="";t=t;r=t.element.className;r+=" "+t.toThemeProperty("jqx-listbox");r+=" "+t.toThemeProperty("jqx-reset");r+=" "+t.toThemeProperty("jqx-rc-all");r+=" "+t.toThemeProperty("jqx-widget");r+=" "+t.toThemeProperty("jqx-widget-content");t.element.className=r;var a=!1,v=window.getComputedStyle(this.element),i=parseInt(v.borderLeftWidth)*2,b=v.boxSizing;if(this.element.offsetWidth===0&&(i=2),(b==="border-box"||isNaN(i))&&(i=0),t.width!=null&&t.width.toString().indexOf("%")!=-1&&(t.host.width(t.width),i>0&&this.host.css("box-sizing","border-box"),a=!0),t.height!=null&&t.height.toString().indexOf("%")!=-1&&(t.host.height(t.height),t.host.height()==0&&t.host.height(200),a=!0),t.width!=null&&t.width.toString().indexOf("px")!=-1?t.element.style.width=parseInt(t.width)-i+"px":t.width==undefined||isNaN(t.width)||(t.element.style.width=parseInt(t.width)-i+"px"),t.height!=null&&t.height.toString().indexOf("px")!=-1?t.element.style.height=parseInt(t.height)-i+"px":t.height==undefined||isNaN(t.height)||(t.element.style.height=parseInt(t.height)-i+"px"),t.multiple||t.multipleextended||t.checkboxes?n.jqx.aria(t,"aria-multiselectable",!0):n.jqx.aria(t,"aria-multiselectable",!1),y="<div style='-webkit-appearance: none; background: transparent; outline: none; width:100%; height: 100%; align:left; border: 0px; padding: 0px; margin: 0px; left: 0px; top: 0px; valign:top; position: relative;'><div style='-webkit-appearance: none; border: none; background: transparent; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; align:left; left: 0px; top: 0px; valign:top; position: relative;'><div id='filter"+t.element.id+"' style='display: none; visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><input style='position: absolute;'/><\/div><div id='listBoxContent' style='-webkit-appearance: none; border: none; background: transparent; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='verticalScrollBar"+t.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='horizontalScrollBar"+t.element.id+"' style='visibility: inherit; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div><div id='bottomRight' style='align:left; valign:top; left: 0px; top: 0px; border: none; position: absolute;'/><\/div><\/div>",t.host.attr("role","listbox"),t.element.innerHTML=y,t._checkForHiddenParent&&(t._addInput(),t.host.attr("tabIndex")||t.host.attr("tabIndex",1)),t.filter=n(t.element.firstChild.firstChild.firstChild),t.filterInput=n(t.filter[0].firstChild),t.filterInput.attr("placeholder",t.filterPlaceHolder),t.filterInput.addClass(t.toThemeProperty("jqx-widget jqx-listbox-filter-input jqx-input jqx-rc-all")),t.addHandler(t.filterInput,"keyup.textchange",function(n){n.keyCode==13?t._search(n):t.filterDelay>0&&(t._filterTimer&&clearTimeout(t._filterTimer),t._filterTimer=setTimeout(function(){t._search(n)},t.filterDelay));n.stopPropagation()}),s=n(t.element.firstChild.firstChild.firstChild.nextSibling.nextSibling),!t.host.jqxButton)throw new Error("jqxListBox: Missing reference to jqxbuttons.js.");if(!s.jqxScrollBar)throw new Error("jqxListBox: Missing reference to jqxscrollbar.js.");e=parseInt(t.host.height())/2;e==0&&(e=10);t.vScrollBar=s.jqxScrollBar({_initialLayout:!0,vertical:!0,rtl:t.rtl,theme:t.theme,touchMode:t.touchMode,largestep:e});p=n(t.element.firstChild.firstChild.firstChild.nextSibling.nextSibling.nextSibling);t.hScrollBar=p.jqxScrollBar({_initialLayout:!0,vertical:!1,rtl:t.rtl,touchMode:t.touchMode,theme:t.theme});t.content=n(t.element.firstChild.firstChild.firstChild.nextSibling);t.content[0].id="listBoxContent"+t.element.id;t.bottomRight=n(t.element.firstChild.firstChild.firstChild.nextSibling.nextSibling.nextSibling.nextSibling).addClass(t.toThemeProperty("jqx-listbox-bottomright")).addClass(t.toThemeProperty("jqx-scrollbar-state-normal"));t.bottomRight[0].id="bottomRight"+t.element.id;t.vScrollInstance=n.data(t.vScrollBar[0],"jqxScrollBar").instance;t.hScrollInstance=n.data(t.hScrollBar[0],"jqxScrollBar").instance;t.isTouchDevice()&&(n.jqx.browser.msie&&n.jqx.browser.version<9||(w=n("<div class='overlay' unselectable='on' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div>"),t.content.parent().append(w),t.overlayContent=t.host.find(".overlay"),t.filterable&&t.overlayContent.css("top","30px")));t._updateTouchScrolling();t.host.addClass("jqx-disableselect");t.host.jqxDragDrop&&jqxListBoxDragDrop()},_highlight:function(n,t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return n.replace(new RegExp("("+i+")","ig"),function(n,t){return"<b>"+t+"<\/b>"})},_addInput:function(){var t=this.host.attr("name");t&&this.host.attr("name","");this.input=n("<input type='hidden'/>");this.host.append(this.input);this.input.attr("name",t)},_updateTouchScrolling:function(){var t=this,i;this.isTouchDevice()&&(t.enableHover=!1,i=this.overlayContent?this.overlayContent:this.content,this.removeHandler(n(i),n.jqx.mobile.getTouchEventName("touchstart")+".touchScroll"),this.removeHandler(n(i),n.jqx.mobile.getTouchEventName("touchmove")+".touchScroll"),this.removeHandler(n(i),n.jqx.mobile.getTouchEventName("touchend")+".touchScroll"),this.removeHandler(n(i),"touchcancel.touchScroll"),n.jqx.mobile.touchScroll(i,t.vScrollInstance.max,function(n,i){var r;i!=null&&t.vScrollBar.css("visibility")!="hidden"&&(r=t.vScrollInstance.value,t.vScrollInstance.setPosition(i),t._lastScroll=new Date);n!=null&&t.hScrollBar.css("visibility")!="hidden"&&(r=t.hScrollInstance.value,t.hScrollInstance.setPosition(n),t._lastScroll=new Date)},this.element.id,this.hScrollBar,this.vScrollBar),t.vScrollBar.css("visibility")!="visible"&&t.hScrollBar.css("visibility")!="visible"?n.jqx.mobile.setTouchScroll(!1,this.element.id):n.jqx.mobile.setTouchScroll(!0,this.element.id),this._arrange())},isTouchDevice:function(){var t=n.jqx.mobile.isTouchDevice();if(this.touchMode==!0){if(this.touchDevice)return!0;if(n.jqx.browser.msie&&n.jqx.browser.version<9)return!1;this.touchDevice=!0;t=!0;n.jqx.mobile.setMobileSimulator(this.element)}else this.touchMode==!1&&(t=!1);return t&&this.touchModeStyle!=!1&&(this.scrollBarSize=n.jqx.utilities.touchScrollBarSize),t&&this.host.addClass(this.toThemeProperty("jqx-touch")),t},beginUpdate:function(){this.updatingListBox=!0},endUpdate:function(){this.updatingListBox=!1;this._addItems();this._renderItems()},beginUpdateLayout:function(){this.updating=!0},resumeUpdateLayout:function(){this.updating=!1;this.vScrollInstance.value=0;this._render(!1)},propertiesChangedHandler:function(n,t,i){i.width&&i.height&&Object.keys(i).length==2&&(n._cachedItemHtml=[],n.refresh())},propertyChangedHandler:function(t,i,r,u){var e,o,f;this.isInitialized!=undefined&&this.isInitialized!=!1&&r!=u&&(t.batchUpdate&&t.batchUpdate.width&&t.batchUpdate.height&&Object.keys(t.batchUpdate).length==2||(i=="_renderOnDemand"&&(t._render(!1,!0),t.selectedIndex!=-1&&(e=t.selectedIndex,t.selectedIndex=-1,t._stopEvents=!0,t.selectIndex(e,!1,!0),t.selectedIndex==-1&&(t.selectedIndex=e),t._stopEvents=!1)),i=="filterable"&&t.refresh(),i=="filterHeight"&&t._arrange(),i=="filterPlaceHolder"&&t.filterInput.attr("placeholder",u),i=="renderer"&&(t._cachedItemHtml=[],t.refresh()),(i=="itemHeight"||i==="checkboxSize")&&t.refresh(),(i=="source"||i=="checkboxes")&&(u==null&&r&&r.unbindBindingUpdate&&(r.unbindBindingUpdate(t.element.id),r.unbindDownloadComplete(t.element.id)),t.clearSelection(),t.refresh()),(i=="scrollBarSize"||i=="equalItemsWidth")&&u!=r&&t._updatescrollbars(),i=="disabled"&&(t._renderItems(),t.vScrollBar.jqxScrollBar({disabled:u}),t.hScrollBar.jqxScrollBar({disabled:u})),(i=="touchMode"||i=="rtl")&&(t._removeHandlers(),t.vScrollBar.jqxScrollBar({touchMode:u}),t.hScrollBar.jqxScrollBar({touchMode:u}),i=="touchMode"&&(n.jqx.browser.msie&&n.jqx.browser.version<9||(o=n("<div class='overlay' unselectable='on' style='z-index: 99; -webkit-appearance: none; border: none; background: black; opacity: 0.01; outline: none; border: none; padding: 0px; overflow: hidden; margin: 0px; align:left; valign:top; left: 0px; top: 0px; position: absolute;'><\/div>"),t.content.parent().append(o),t.overlayContent=t.host.find(".overlay"))),t.filterable&&t.filterInput&&(i=="rtl"&&u?t.filterInput.addClass(t.toThemeProperty("jqx-rtl")):i!="rtl"||u||t.filterInput.removeClass(t.toThemeProperty("jqx-rtl")),t._arrange()),t._updateTouchScrolling(),t._addHandlers(),t._render(!1)),this.updating||(i=="width"||i=="height")&&t._updateSize(),i=="theme"&&r!=u&&(t.hScrollBar.jqxScrollBar({theme:t.theme}),t.vScrollBar.jqxScrollBar({theme:t.theme}),t.host.removeClass(),t.host.addClass(t.toThemeProperty("jqx-listbox")),t.host.addClass(t.toThemeProperty("jqx-widget")),t.host.addClass(t.toThemeProperty("jqx-widget-content")),t.host.addClass(t.toThemeProperty("jqx-reset")),t.host.addClass(t.toThemeProperty("jqx-rc-all")),t.refresh()),i=="selectedIndex"&&(t.clearSelection(),t.selectIndex(u,!0)),(i=="displayMember"||i=="valueMember")&&(r!=u&&(f=t.selectedIndex,t.refresh(),t.selectedIndex=f,t.selectedIndexes[f]=f),t._renderItems()),i=="autoHeight"&&(r!=u?t._render(!1):(t._updatescrollbars(),t._renderItems())),t._checkForHiddenParent&&n.jqx.isHidden(t.host)&&n.jqx.utilities.resize(this.host,function(){t._updateSize()},!1,t._checkForHiddenParent)))},loadFromSelect:function(t){var r,i;if(t!=null&&(r="#"+t,i=n(r),i.length>0)){var u=n.jqx.parseSourceTag(i[0]),f=u.items,e=u.index;this.source=f;this.fromSelect=!0;this.clearSelection();this.selectedIndex=e;this.selectedIndexes[this.selectedIndex]=this.selectedIndex;this.refresh()}},invalidate:function(){this._cachedItemHtml=[];this._renderItems();this.virtualSize=null;this._updateSize()},refresh:function(t){var i=this,r;if(this.vScrollBar!=undefined){if(this.itemHeight=parseInt(this.itemHeight),this._cachedItemHtml=[],this.visibleItems=[],r=function(n){if(n==!0&&i.selectedIndex!=-1){var t=i.selectedIndex;i.selectedIndex=-1;i._stopEvents=!0;i.selectIndex(t,!1,!0);i.selectedIndex==-1&&(i.selectedIndex=t);i._stopEvents=!1}},this.itemswrapper!=null&&(this.itemswrapper.remove(),this.itemswrapper=null),n.jqx.dataAdapter&&this.source!=null&&this.source._source){this.databind(this.source,t);r(t);return}!this.autoBind&&(this.autoBind||t)||(this.field&&this.loadSelectTag(),this.items=this.loadItems(this.source));this._render(!1,t==!0);r(t);this._raiseEvent("6")}},loadSelectTag:function(){var t=n.jqx.parseSourceTag(this.field);this.source=t.items;this.selectedIndex==-1&&(this.selectedIndex=t.index)},_render:function(n){if(this._renderOnDemand){this.visibleItems=[];this.renderedVisibleItems=[];this._renderItems();return}if(this._addItems(),this._renderItems(),this.vScrollInstance.setPosition(0),this._cachedItemHtml=[],(n==undefined||n)&&this.items!=undefined&&this.items!=null&&this.selectedIndex>=0&&this.selectedIndex<this.items.length&&this.selectIndex(this.selectedIndex,!0,!0,!0),this.allowDrag&&this._enableDragDrop&&(this._enableDragDrop(),this.isTouchDevice())){this._removeHandlers();this.overlayContent&&(this.overlayContent.remove(),this.overlayContent=null);this._updateTouchScrolling();this._addHandlers();return}this._updateTouchScrolling();this.rendered&&this.rendered();this.ready&&this.ready()},_hitTest:function(n,t){var r,i,u;return(this.filterable&&(t-=this.filterHeight,t<0&&(t=0)),r=parseInt(this.vScrollInstance.value),i=this._searchFirstVisibleIndex(t+r,this.renderedVisibleItems),this.renderedVisibleItems[i]!=undefined&&this.renderedVisibleItems[i].isGroup)?null:this.renderedVisibleItems.length>0&&(u=this.renderedVisibleItems[this.renderedVisibleItems.length-1],u.height+u.top<t+r)?null:(i=this._searchFirstVisibleIndex(t+r),this.visibleItems[i])},_searchFirstVisibleIndex:function(n,t){var r,u,i;for(n==undefined&&(n=parseInt(this.vScrollInstance.value)),r=0,(t==undefined||t==null)&&(t=this.visibleItems),u=t.length;r<=u;){if(mid=parseInt((r+u)/2),i=t[mid],i==undefined)break;if(i.initialTop>n&&i.initialTop+i.height>n)u=mid-1;else if(i.initialTop<n&&i.initialTop+i.height<=n)r=mid+1;else return mid}return 0},_renderItems:function(){var w,b,h,it,p,e,rt,f,u,ut,t,i,c,ct,lt,k,at,d,ft,a,vt,r;if(this.items==undefined||this.items.length==0){this.visibleItems=[];return}if(this.updatingListBox!=!0){var yt=this.isTouchDevice(),et=this.vScrollInstance,g=this.hScrollInstance,l=parseInt(et.value),v=parseInt(g.value);this.rtl&&this.hScrollBar[0].style.visibility!="hidden"&&(v=g.max-v);var dt=this.items.length,gt=this.host.width(),nt=parseInt(this.content[0].style.width),ot=nt+parseInt(g.max),pt=parseInt(this.vScrollBar[0].style.width)+2;this.vScrollBar[0].style.visibility=="hidden"&&(pt=0);this.hScrollBar[0].style.visibility!="visible"&&(ot=nt);var ni=this._getVirtualItemsCount(),y=[],tt=0,o=parseInt(this.element.style.height)+2;this.element.style.height.indexOf("%")!=-1&&(o=this.host.outerHeight());isNaN(o)&&(o=0);var s=0,st=0,wt=0;if(et.value==0||this.visibleItems.length==0)for(f=0;f<this.items.length;f++)t=this.items[f],t.visible&&(t.top=-l,t.initialTop=-l,!t.isGroup&&t.visible&&(this.visibleItems[st++]=t,t.visibleIndex=st-1),this.renderedVisibleItems[wt++]=t,t.left=-v,p=t.top+t.height,p>=0&&t.top-t.height<=o&&(y[tt++]={index:f,item:t}),l-=t.height,l--);for(w=l>0?this._searchFirstVisibleIndex(this.vScrollInstance.value,this.renderedVisibleItems):0,b=0,tt=0,h=this.vScrollInstance.value,it=0;b<100+o;){if(t=this.renderedVisibleItems[w],t==undefined)break;if(t.visible&&(t.left=-v,p=t.top+t.height-h,p>=0&&t.initialTop-h-t.height<=2*o&&(y[tt++]={index:w,item:t})),w++,t.visible&&(b+=t.initialTop-h+t.height-b),it++,it>this.items.length-1)break}if(!this._renderOnDemand){var ht=this.toThemeProperty("jqx-listitem-state-normal")+" "+this.toThemeProperty("jqx-item"),bt=this.toThemeProperty("jqx-listitem-state-group"),kt=this.toThemeProperty("jqx-listitem-state-disabled")+" "+this.toThemeProperty("jqx-fill-state-disabled");for(this.checkboxes&&(ht+=" checkboxes"),e=0,rt=this,f=0;f<this.visualItems.length;f++)if(u=this.visualItems[f],ut=function(){var n=u[0].firstChild,t;rt.checkboxes&&(n=u[0].lastChild);n!=null&&(n.style.visibility="hidden",n.className="");rt.checkboxes&&(t=u[0].firstChild,t.style.visibility="hidden")},f<y.length){if(t=y[f].item,t.initialTop-h>=o){ut();continue}if(i=n(u[0].firstChild),this.checkboxes&&(i=n(u[0].lastChild)),i.length==0)continue;if(i[0]==null)continue;i[0].className="";i[0].style.display="block";i[0].style.visibility="inherit";c="";c=!t.isGroup&&!this.selectedIndexes[t.index]>=0?ht:bt;(t.disabled||this.disabled)&&(c+=" "+kt);this.roundedcorners&&(c+=" "+this.toThemeProperty("jqx-rc-all"));yt&&(c+=" "+this.toThemeProperty("jqx-listitem-state-normal-touch"));i[0].className=c;this.renderer?(t.key||(t.key=this.generatekey()),this._cachedItemHtml||(this._cachedItemHtml=[]),this._cachedItemHtml[t.key]?i[0].innerHTML!=this._cachedItemHtml[t.key]&&(i[0].innerHTML=this._cachedItemHtml[t.key]):(ct=this.renderer(t.index,t.label,t.value),i[0].innerHTML=ct,this._cachedItemHtml[t.key]=i[0].innerHTML)):(this.itemHeight!==-1&&(lt=2+2*parseInt(i.css("padding-top")),i[0].style.lineHeight=t.height-lt+"px",i.css("vertical-align","middle")),t.html!=null&&t.html.toString().length>0?i[0].innerHTML=t.html:t.label!=null||t.value!=null?t.label!=null?(i[0].innerHTML!==t.label&&(i[0].innerHTML=t.label),n.trim(t.label)==""&&(i[0].innerHTML=this.emptyString,this.emptyString==""&&(i[0].style.height=t.height-8+"px")),this.incrementalSearch||t.disabled||this.searchString!=undefined&&this.searchString!=""&&(i[0].innerHTML=this._highlight(t.label.toString(),this.searchString))):t.label===null?(i[0].innerHTML=this.emptyString,this.emptyString==""&&(i[0].style.height=t.height-8+"px")):i[0].innerHTML!==t.value?i[0].innerHTML=t.value:t.label==""&&(i[0].innerHTML=" "):(t.label==""||t.label==null)&&(i[0].innerHTML="",i[0].style.height=t.height-8+"px"));u[0].style.left=t.left+"px";u[0].style.top=t.initialTop-h+"px";t.element=i[0];this.isMaterialized()&&!this.renderer&&this._checkForHiddenParent&&(n(t.element).addClass("ripple"),n.jqx.ripple(n(t.element)));t.title&&(i[0].title=t.title);this.equalItemsWidth&&!t.isGroup?(s==0&&(k=parseInt(ot),at=parseInt(i.outerWidth())-parseInt(i.width()),k-=at,d=1,d=d!=null?parseInt(d):0,this.host.css("box-sizing")==="border-box"&&(k-=2),s=k,this.checkboxes&&this.hScrollBar[0].style.visibility=="hidden"&&(s-=this.checkboxSize+13)),nt>this.virtualSize.width?(i[0].style.width=s+"px",t.width=s):(i[0].style.width=-4+this.virtualSize.width+"px",t.width=this.virtualSize.width-4)):i.width()<this.host.width()&&i.width(this.host.width()-2);this.rtl&&(i[0].style.textAlign="right");this.autoItemsHeight&&(i[0].style.whiteSpace="pre-line",i.width(s),t.width=s);e=0;this.checkboxes&&!t.isGroup?(e==0&&(e=(t.height-this.checkboxSize-3)/2,e=parseInt(e),e++),r=n(u.children()[0]),r[0].item=t,this.rtl?i[0].style.left!="0px"&&(i[0].style.left="0px"):(ft=this.checkboxSize+9,i[0].style.left!=ft+"px"&&(i[0].style.left=ft+"px")),this.rtl&&r.css("left",8+t.width+"px"),r[0].style.top=e+"px",r[0].style.display="block",r[0].style.visibility="inherit",a=t.checked,vt=t.checked?" "+this.toThemeProperty("jqx-checkbox-check-checked"):"",r[0].setAttribute("checked",t.checked),r[0].firstChild&&r[0].firstChild.firstChild&&r[0].firstChild.firstChild.firstChild&&r[0].firstChild.firstChild&&(a?r[0].firstChild.firstChild.firstChild.className=vt:a===!1?r[0].firstChild.firstChild.firstChild.className="":a===null&&(r[0].firstChild.firstChild.firstChild.className=this.toThemeProperty("jqx-checkbox-check-indeterminate"))),n.jqx.ariaEnabled&&(a?u[0].setAttribute("aria-selected",!0):u[0].removeAttribute("aria-selected"))):this.checkboxes&&(r=n(u.children()[0]),r.css({display:"none",visibility:"inherit"}));!t.disabled&&(!this.filterable&&this.selectedIndexes[t.visibleIndex]>=0||t.selected&&this.filterable)?(i.addClass(this.toThemeProperty("jqx-listitem-state-selected")),i.addClass(this.toThemeProperty("jqx-fill-state-pressed")),n.jqx.ariaEnabled&&(u[0].setAttribute("aria-selected",!0),this._activeElement=u[0])):this.checkboxes||n.jqx.ariaEnabled&&u[0].removeAttribute("aria-selected")}else ut()}}},generatekey:function(){var n=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},_calculateVirtualSize:function(t){var h,b,a,c,g,k,o,i,u,v,y,s;if(!this._renderOnDemand){var l=0,e=2,o=0,r=document.createElement("span");if(this.equalItemsWidth&&n(r).css("float","left"),r.style.whiteSpace="pre",h=0,b=undefined===t?this.host.outerHeight():t+2,document.body.appendChild(r),a=this.items.length,c=this.host.width(),this.autoItemsHeight&&(c-=10,this.vScrollBar.css("visibility")!="hidden"&&(c-=20)),this.autoItemsHeight||this.renderer||this.groups.length>=1||a>0&&this.items[0].html!=null&&this.items[0].html!="")for(o=0;o<a;o++)(i=this.items[o],i.isGroup&&i.label==""&&i.html=="")||i.visible&&(u="",u+=i.isGroup?this.toThemeProperty("jqx-listitem-state-group jqx-rc-all"):this.toThemeProperty("jqx-widget jqx-listitem-state-normal jqx-rc-all"),u+=" "+this.toThemeProperty("jqx-fill-state-normal"),this.isTouchDevice()&&(u+=" "+this.toThemeProperty("jqx-touch")),r.className=u,this.autoItemsHeight&&(r.style.whiteSpace="pre-line",v=this.checkboxSize+9,y=this.checkboxes?-v:0,r.style.width=y+c+"px"),this.renderer?(g=this.renderer(i.index,i.label,i.value),r.innerHTML=g):i.html!=null&&i.html.toString().length>0?r.innerHTML=i.html:(i.label!=null||i.value!=null)&&(i.label!=null?(r.innerHTML=i.label,i.label==""&&(r.innerHTML="Empty")):r.innerHTML=i.value),s=r.offsetHeight,k=r.offsetWidth,this.itemHeight>-1&&(s=this.itemHeight),i.height=s,i.width=k,s++,e+=s,l=Math.max(l,k),e<=b&&h++);else{var e=0,d=0,p="",f=0,w=0,nt=-1;for(o=0;o<a;o++)(i=this.items[o],i.isGroup&&i.label==""&&i.html=="")||i.visible&&(nt++,u="",nt==0&&(u+=this.toThemeProperty("jqx-listitem-state-normal jqx-rc-all"),u+=" "+this.toThemeProperty("jqx-fill-state-normal"),u+=" "+this.toThemeProperty("jqx-widget"),u+=" "+this.toThemeProperty("jqx-listbox"),u+=" "+this.toThemeProperty("jqx-widget-content"),this.isTouchDevice()&&(u+=" "+this.toThemeProperty("jqx-touch"),u+=" "+this.toThemeProperty("jqx-listitem-state-normal-touch")),r.className=u,this.autoItemsHeight&&(r.style.whiteSpace="pre-line",v=this.checkboxSize+9,y=this.checkboxes?-v:0,r.style.width=y+c+"px"),i.html==null||i.label==""||i.label==null?r.innerHTML="Item":i.html!=null&&i.html.toString().length>0?r.innerHTML=i.html:(i.label!=null||i.value!=null)&&(r.innerHTML=i.label!=null?i.label.toString().match(new RegExp("\\w"))!=null||i.label.toString().match(new RegExp("\\d"))!=null?i.label:"Item":i.value),s=1+r.offsetHeight,this.itemHeight>-1&&(s=this.itemHeight),d=s),f!=undefined&&(w=f),i.html!=null&&i.html.toString().length>0?(f=Math.max(f,i.html.toString().length),w!=f&&(p=i.html)):i.label!=null?(f=Math.max(f,i.label.length),w!=f&&(p=i.label)):i.value!=null&&(f=Math.max(f,i.value.length),w!=f&&(p=i.value)),i.height=d,e+=d,e++,e<=b&&h++);r.innerHTML=p;l=r.offsetWidth}return e+=2,h<10&&(h=10),this.filterable&&(e+=this.filterHeight),e-=4,r.parentNode.removeChild(r),{width:l,height:e,itemsPerPage:h}}},_getVirtualItemsCount:function(){if(this.virtualItemsCount==0){var n=parseInt(this.host.height())/5;return n>this.items.length&&(n=this.items.length),n}return this.virtualItemsCount},_addItems:function(t){var s,w,a,b,y,p,c,d,g,u,h,e,it,nt,r,f,i,l;if(!this._renderOnDemand&&(i=this,i.updatingListBox!=!0)){if(i.items==undefined||i.items.length==0){i.virtualSize={width:0,height:0,itemsPerPage:0};i._updatescrollbars();i.renderedVisibleItems=[];i.itemswrapper&&i.itemswrapper.children().remove();return}if(s=i.host.height(),t==!1){r=i._calculateVirtualSize(s);f=r.itemsPerPage*2;i.autoHeight&&(f=i.items.length);i.virtualItemsCount=Math.min(f,i.items.length);l=r.width;i.virtualSize=r;i._updatescrollbars();return}w=this;a=0;i.visibleItems=[];i.renderedVisibleItems=[];i._removeHandlers();i.allowDrag&&i._enableDragDrop&&(i.itemswrapper=null);i.itemswrapper==null&&(i.content[0].innerHTML="",i.itemswrapper=n('<div style="outline: 0 none; overflow:hidden; width:100%; position: relative;"><\/div>'),i.itemswrapper[0].style.height=2*s+"px",i.content[0].appendChild(i.itemswrapper[0]));r=i._calculateVirtualSize(s);f=r.itemsPerPage*2;i.autoHeight&&(f=i.items.length);i.virtualItemsCount=Math.min(f,i.items.length);i=this;l=r.width;i.virtualSize=r;b=Math.max(i.host.width(),17+r.width);i.itemswrapper[0].style.width=b+"px";var k=0,o="",tt=n.jqx.browser.msie&&n.jqx.browser.version<9,v=tt?' unselectable="on"':"";for(u=k;u<i.virtualItemsCount;u++)h=i.items[u],y="listitem"+u+i.element.id,o+=i.theme!=""?"<div"+v+" role='option' id='"+y+"' class='jqx-listitem-element jqx-listitem-element-"+i.theme+"'>":"<div"+v+" role='option' id='"+y+"' class='jqx-listitem-element'>",i.checkboxes&&(p=this.checkboxSize+8,o+='<div style="background-color: transparent; padding: 0; margin: 0; overflow:hidden; position: absolute; float: left; width: '+p+"px; height:  "+p+'px;" class="'+i.toThemeProperty("jqx-checkbox")+' chkbox">',c='<div class="'+i.toThemeProperty("jqx-checkbox-default")+" "+i.toThemeProperty("jqx-fill-state-normal")+" "+i.toThemeProperty("jqx-rc-all")+'"><div style="cursor: pointer; width:  '+this.checkboxSize+"px; height:  "+this.checkboxSize+'px;">',d=h.checked?" "+i.toThemeProperty("jqx-checkbox-check-checked"):"",c+='<span style="width: '+this.checkboxSize+"px; height:  "+this.checkboxSize+'px;" class="checkBoxCheck'+d+'"><\/span>',c+="<\/div><\/div>",o+=c,o+="<\/div>"),o+="<span"+v+" style='white-space: pre; -ms-touch-action: none;'><\/span><\/div>";for(w.WinJS?i.itemswrapper.html(o):i.itemswrapper[0].innerHTML=o,g=i.itemswrapper.children(),u=k;u<i.virtualItemsCount;u++)h=i.items[u],e=n(g[u]),i.allowDrag&&i._enableDragDrop&&e.addClass("draggable"),i.checkboxes&&(it=n(e.children()[0]),e.css("float","left"),nt=n(e[0].firstChild),nt.css("float","left")),e[0].style.height=h.height+"px",e[0].style.top=a+"px",a+=h.height+1,i.visualItems[u]=e;i._addHandlers();i._updatescrollbars();i.autoItemsHeight&&(r=i._calculateVirtualSize(s),f=r.itemsPerPage*2,i.autoHeight&&(f=i.items.length),i.virtualItemsCount=Math.min(f,i.items.length),i=this,l=r.width,i.virtualSize=r,i._updatescrollbars());n.jqx.browser.msie&&n.jqx.browser.version<8&&(i.host.attr("hideFocus",!0),i.host.find("div").attr("hideFocus",!0))}},_updatescrollbars:function(){var t=this,a,e,o,v,y;if(t.virtualSize){var s=t.virtualSize.height,r=t.virtualSize.width,i=t.vScrollInstance,u=t.hScrollInstance;t._arrange(!1);var f=!1,h=t.host.outerWidth(),c=t.host.outerHeight(),l=0;r>h&&(l=t.hScrollBar.outerHeight()+2);s+l>c?(a=i.max,i.max=2+parseInt(s)+l-parseInt(c-2),t.vScrollBar[0].style.visibility!="inherit"&&(t.vScrollBar[0].style.visibility="inherit",f=!0),a!=i.max&&i._arrange()):t.vScrollBar[0].style.visibility!="hidden"&&(t.vScrollBar[0].style.visibility="hidden",f=!0,i.setPosition(0));e=0;t.vScrollBar[0].style.visibility!="hidden"&&(e=t.scrollBarSize+6);o=t.checkboxes?this.checkboxSize+6:0;t.autoItemsHeight?t.hScrollBar[0].style.visibility="hidden":r>=h-e-o?(v=u.max,u.max=t.vScrollBar[0].style.visibility=="inherit"?o+e+parseInt(r)-t.host.width()+2:o+parseInt(r)-t.host.width()+4,t.hScrollBar[0].style.visibility!="inherit"&&(t.hScrollBar[0].style.visibility="inherit",f=!0),v!=u.max&&u._arrange(),t.vScrollBar[0].style.visibility=="inherit"&&(i.max=2+parseInt(s)+t.hScrollBar.outerHeight()+2-parseInt(t.host.height()))):t.hScrollBar[0].style.visibility!="hidden"&&(t.hScrollBar[0].style.visibility="hidden",f=!0);u.setPosition(0);f&&t._arrange();t.itemswrapper&&(t.itemswrapper[0].style.width=Math.max(0,Math.max(h-2,17+r))+"px",t.itemswrapper[0].style.height=Math.max(0,2*c)+"px");y=t.isTouchDevice();y&&(t.vScrollBar.css("visibility")!="visible"&&t.hScrollBar.css("visibility")!="visible"?n.jqx.mobile.setTouchScroll(!1,t.element.id):n.jqx.mobile.setTouchScroll(!0,t.element.id))}},clear:function(){this.source=null;this.visibleItems=[];this.renderedVisibleItems=[];this.itemsByValue=[];this.clearSelection();this.refresh()},clearSelection:function(n){for(var t=0;t<this.selectedIndexes.length;t++)this.selectedIndexes[t]&&this.selectedIndexes[t]!=-1&&this._raiseEvent("1",{index:t,type:"api",item:this.getVisibleItem(t),originalEvent:null}),this.selectedIndexes[t]=-1;this.selectedIndex=-1;this.selectedValue=null;this.selectedValues=[];n!=!1&&this._renderItems()},unselectIndex:function(n,t){var u,i,f,r;if(!isNaN(n)){for(this.selectedIndexes[n]=-1,u=!1,i=0;i<this.selectedIndexes.length;i++)f=this.selectedIndexes[i],f!=-1&&f!=undefined&&(u=!0);u||(this.selectedValue=null,this.selectedIndex=-1,r=this.getVisibleItem(n),r&&this.selectedValues[r.value]&&(this.selectedValues[r.value]=null));(t==undefined||t==!0)&&(this._renderItems(),this._raiseEvent("1",{index:n,type:"api",item:this.getVisibleItem(n),originalEvent:null}));this._updateInputSelection();this._raiseEvent("2",{index:n,type:"api",item:this.getItem(n)})}},getInfo:function(){var n=this,i=this.getItems(),t=this.getVisibleItems(),r=function(){var u=n.vScrollInstance.value,f,r,i;for(n.filterable&&(u-=n.filterHeight),f=[],r=0;r<t.length;r++)if(i=t[r],i){var e=i.initialTop,s=i.height,o=!0;(e+s-u<0||e-u>=n.host.height())&&(o=!1);o&&f.push(i)}return f}();return{items:i,visibleItems:t,viewItems:r}},getItem:function(t){if(t==-1||isNaN(t)||typeof t=="string")return t===-1?null:this.getItemByValue(t);var i=null,r=n.each(this.items,function(){if(this.index==t)return i=this,!1});return i},getVisibleItem:function(n){return n==-1||isNaN(n)||typeof n=="string"?n===-1?null:this.getItemByValue(n):this.visibleItems[n]},getVisibleItems:function(){return this.visibleItems},checkIndex:function(t,i,r){var u,f;this.checkboxes&&(isNaN(t)||t<0||t>=this.visibleItems.length||this.visibleItems[t]!=null&&this.visibleItems[t].disabled||this.disabled||(u=this.getItem(t),(this.groups.length>0||this.filterable)&&(u=this.getVisibleItem(t)),u!=null&&(f=n(u.checkBoxElement),u.checked=!0,(i==undefined||i==!0)&&this._updateCheckedItems()),(r==undefined||r==!0)&&this._raiseEvent(3,{label:u.label,value:u.value,checked:!0,item:u})))},getCheckedItems:function(){if(!this.checkboxes)return null;var t=[];if(this.items!=undefined)return n.each(this.items,function(){this.checked&&(t[t.length]=this)}),t},checkAll:function(t){if(this.checkboxes&&!this.disabled){var i=this;n.each(this.items,function(){var n=this;t!==!1&&n.checked!==!0&&i._raiseEvent(3,{label:n.label,value:n.value,checked:!0,item:n});this.checked=!0});this._updateCheckedItems()}},uncheckAll:function(t){if(this.checkboxes&&!this.disabled){var i=this;n.each(this.items,function(){var n=this;t!==!1&&n.checked!==!1&&(this.checked=!1,i._raiseEvent(3,{label:n.label,value:n.value,checked:!1,item:n}));this.checked=!1});this._updateCheckedItems()}},uncheckIndex:function(t,i,r){var u,f;this.checkboxes&&(isNaN(t)||t<0||t>=this.visibleItems.length||this.visibleItems[t]!=null&&this.visibleItems[t].disabled||this.disabled||(u=this.getItem(t),(this.groups.length>0||this.filterable)&&(u=this.getVisibleItem(t)),u!=null&&(f=n(u.checkBoxElement),u.checked=!1,(i==undefined||i==!0)&&this._updateCheckedItems()),(r==undefined||r==!0)&&this._raiseEvent(3,{label:u.label,value:u.value,checked:!1,item:u})))},indeterminateIndex:function(t,i,r){var u,f;this.checkboxes&&(isNaN(t)||t<0||t>=this.visibleItems.length||this.visibleItems[t]!=null&&this.visibleItems[t].disabled||this.disabled||(u=this.getItem(t),(this.groups.length>0||this.filterable)&&(u=this.getVisibleItem(t)),u!=null&&(f=n(u.checkBoxElement),u.checked=null,(i==undefined||i==!0)&&this._updateCheckedItems()),(r==undefined||r==!0)&&this._raiseEvent(3,{checked:null})))},getSelectedIndex:function(){return this.selectedIndex},getSelectedItems:function(){var r=this.getVisibleItems(),t=this.selectedIndexes,n=[];for(var i in t)t[i]!=-1&&(n[n.length]=r[i]);return n},getSelectedItem:function(){var n=this.getSelectedItems();return n&&n.length>0?n[0]:null},_updateCheckedItems:function(){var i=this.selectedIndex,r,t;this.clearSelection(!1);r=this.getCheckedItems();this.selectedIndex=i;this._renderItems();t=n.data(this.element,"hoveredItem");t!=null&&(n(t).addClass(this.toThemeProperty("jqx-listitem-state-hover")),n(t).addClass(this.toThemeProperty("jqx-fill-state-hover")));this._updateInputSelection()},getItemByValue:function(t){var r,i;if(this.visibleItems!=null){if(t&&t.value&&(t=t.value),this.itemsByValue)return this.itemsByValue[n.trim(t).split(" ").join("?")];for(r=this.visibleItems,i=0;i<r.length;i++)if(r[i].value==t)return r[i]}},checkItem:function(n){if(n!=null){var t=this._getItemByParam(n);return this.checkIndex(t.visibleIndex,!0)}return!1},uncheckItem:function(n){if(n!=null){var t=this._getItemByParam(n);return this.uncheckIndex(t.visibleIndex,!0)}return!1},indeterminateItem:function(n){if(n!=null){var t=this._getItemByParam(n);return this.indeterminateIndex(t.visibleIndex,!0)}return!1},val:function(n){var i,t;if(this.input)return(i=function(t){for(var i in t)if(t.hasOwnProperty(i))return!1;return typeof n=="number"?!1:typeof n=="date"?!1:typeof n=="boolean"?!1:typeof n=="string"?!1:!0},i(n)||arguments.length==0)?this.input.val():(t=this.getItemByValue(n),t!=null&&this.selectItem(t),this.input?this.input.val():void 0)},selectItem:function(n){if(n!=null){if(n.index==undefined){var t=this.getItemByValue(n);t&&(n=t)}return this.selectIndex(n.visibleIndex,!0)}return this.clearSelection(),!1},unselectItem:function(n){if(n!=null){if(n.index==undefined){var t=this.getItemByValue(n);t&&(n=t)}return this.unselectIndex(n.visibleIndex,!0)}return!1},selectIndex:function(n,t,i,r,u,f){var l,a,s,o,h,p,w,c;if(!isNaN(n)&&(l=this.selectedIndex,this.filterable&&(this.selectedIndex=-1),!(n<-1)&&!(n>=this.visibleItems.length))&&(this.visibleItems[n]==null||!this.visibleItems[n].disabled)&&!this.disabled){if(!this.multiple&&!this.multipleextended&&this.selectedIndex==n&&!r&&!this.checkboxes){this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(o=this.getVisibleItem(n),o&&(this.selectedValue=o.value,this.selectedValues[o.value]=o.value));return}if(this.checkboxes){this._updateCheckedItems();s=l;this.selectedIndex!=n||this.multiple||(s=-1);u==undefined&&(u="none");o=this.getItem(n);h=this.getItem(s);this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(o=this.getVisibleItem(n),h=this.getVisibleItem(s));this._raiseEvent("1",{index:s,type:u,item:h,originalEvent:f});this.selectedIndex=n;this.selectedIndexes[s]=-1;this.selectedIndexes[n]=n;o&&(this.selectedValue=o.value,this.selectedValues[o.value]=o.value);this._raiseEvent("0",{index:n,type:u,item:o,originalEvent:f});this._renderItems();return}if(this.focused=!0,a=!1,this.selectedIndex!=n&&(a=!0),s=l,this.selectedIndex!=n||this.multiple||(s=-1),u==undefined&&(u="none"),o=this.getItem(n),h=this.getItem(s),this.visibleItems&&this.items&&this.visibleItems.length!=this.items.length&&(o=this.getVisibleItem(n),h=this.getVisibleItem(s)),r!=undefined&&r)this._raiseEvent("1",{index:s,type:u,item:h,originalEvent:f}),this.selectedIndex=n,this.selectedIndexes[s]=-1,this.selectedIndexes[n]=n,o&&(this.selectedValue=o.value,this.selectedValues[o.value]=o.value),this._raiseEvent("0",{index:n,type:u,item:o,originalEvent:f});else{var e=this,y=function(n,t,i,r,u,f){e._raiseEvent("1",{index:t,type:i,item:r,originalEvent:f});e.selectedIndex=n;e.selectedIndexes=[];t=n;e.selectedIndexes[n]=n;e.selectedValues=[];u&&(e.selectedValues[u.value]=u.value);e._raiseEvent("0",{index:n,type:i,item:u,originalEvent:f})},v=function(n,t,i,r,u,f){e.selectedIndexes[n]==undefined||e.selectedIndexes[n]==-1?(e.selectedIndexes[n]=n,e.selectedIndex=n,u&&(e.selectedValues[u.value]=u.value,e._raiseEvent("0",{index:n,type:i,item:u,originalEvent:f}))):(t=e.selectedIndexes[n],r=e.getVisibleItem(t),r&&(e.selectedValues[r.value]=null),e.selectedIndexes[n]=-1,e.selectedIndex=-1,e._raiseEvent("1",{index:t,type:i,item:r,originalEvent:f}))};if(this.multipleextended)if(this._shiftKey||this._ctrlKey){if(this._ctrlKey)u=="keyboard"&&(this.clearSelection(!1),e._clickedIndex=n),v(n,s,u,h,o,f);else if(this._shiftKey){for(e._clickedIndex==undefined&&(e._clickedIndex=s),p=Math.min(e._clickedIndex,n),w=Math.max(e._clickedIndex,n),this.clearSelection(!1),c=p;c<=w;c++)e.selectedIndexes[c]=c,e.selectedValues[e.getVisibleItem(c).value]=e.getVisibleItem(c).value,e._raiseEvent("0",{index:c,type:u,item:this.getVisibleItem(c),originalEvent:f});e.selectedIndex=u!="keyboard"?e._clickedIndex:n}}else u!="keyboard"&&u!="mouse"?(v(n,s,u,h,o,f),e._clickedIndex=n):(this.clearSelection(!1),e._clickedIndex=n,y(n,s,u,h,o,f));else this.multiple?v(n,s,u,h,o,f):(o&&(this.selectedValue=o.value),y(n,s,u,h,o,f))}return(i==undefined||i==!0)&&this._renderItems(),t!=undefined&&t!=null&&t==!0&&this.ensureVisible(n),this._raiseEvent("2",{index:n,item:o,oldItem:h,type:u,originalEvent:f}),this._updateInputSelection(),a}},_updateInputSelection:function(){var r,t,u,i;if(this._syncSelection(),r=[],this.input&&(this.selectedIndex==-1?this.input.val(""):this.items&&this.items[this.selectedIndex]!=undefined&&(this.input.val(this.items[this.selectedIndex].value),r.push(this.items[this.selectedIndex].value)),(this.multiple||this.multipleextended||this.checkboxes)&&(t=this.checkboxes?this.getCheckedItems():this.getSelectedItems(),u="",t))){for(i=0;i<t.length;i++)undefined!=t[i]&&(u+=i==t.length-1?t[i].value:t[i].value+",",r.push(t[i].value));this.input.val(u)}this.field&&this.input&&(this.field.nodeName.toLowerCase()=="select"?n.each(this.field,function(){n(this).removeAttr("selected");this.selected=r.indexOf(this.value)>=0;this.selected&&n(this).attr("selected",!0)}):n.each(this.items,function(){n(this.originalItem.originalItem).removeAttr("data-selected");this.selected=r.indexOf(this.value)>=0;this.selected&&n(this.originalItem.originalItem).attr("data-selected",!0)}))},isIndexInView:function(n){var r,t,i,u,f;return isNaN(n)?!1:this.items?n<0||n>=this.items.length?!1:(r=this.vScrollInstance.value,t=0,this.filterable&&(t=this.filterHeight),i=this.visibleItems[n],i==undefined)?!0:(u=i.initialTop,f=i.height,u-r<t||u-r+t+f>=this.host.outerHeight())?!1:!0:!1},_itemsInPage:function(){var t=0,i=this;return this.items&&n.each(this.items,function(){if(this.initialTop+this.height>=i.content.height())return!1;t++}),t},_firstItemIndex:function(){return this.visibleItems!=null?this.visibleItems[0]?this.visibleItems[0].isGroup?this._nextItemIndex(0):0:0:-1},_lastItemIndex:function(){return this.visibleItems!=null?this.visibleItems[this.visibleItems.length-1]?this.visibleItems[this.visibleItems.length-1].isGroup?this._prevItemIndex(this.visibleItems.length-1):this.visibleItems.length-1:this.visibleItems.length-1:-1},_nextItemIndex:function(n){for(indx=n+1;indx<this.visibleItems.length;indx++)if(this.visibleItems[indx]&&!this.visibleItems[indx].disabled&&!this.visibleItems[indx].isGroup)return indx;return-1},_prevItemIndex:function(n){for(indx=n-1;indx>=0;indx--)if(this.visibleItems[indx]&&!this.visibleItems[indx].disabled&&!this.visibleItems[indx].isGroup)return indx;return-1},clearFilter:function(){this.filterInput.val("");this._updateItemsVisibility("")},_search:function(n){var t=this,i=t.filterInput.val();if(n.keyCode!=9&&t.searchMode!="none"&&t.searchMode!=null&&t.searchMode!="undefined"&&n.keyCode!=16&&n.keyCode!=17&&n.keyCode!=20){if(n.keyCode==37||n.keyCode==39)return!1;n.altKey||n.keyCode==18||n.keyCode>=33&&n.keyCode<=40||(n.ctrlKey||n.metaKey||t.ctrlKey)&&n.keyCode!=88&&n.keyCode!=86||i!==t.searchString&&t._updateItemsVisibility(i)}},_updateItemsVisibility:function(t){var f=this.getItems(),u,e,t,r;if(f==undefined)return{index:-1,matchItem:[]};var i=this,o=-1,s=[],h=0;for(n.each(f,function(){var u="",r;if(!this.isGroup){u=this.searchLabel?this.searchLabel:this.label?this.label:this.value?this.value:this.title?this.title:"jqxItem";u=u.toString();r=!1;switch(i.searchMode){case"containsignorecase":r=n.jqx.string.containsIgnoreCase(u,t);break;case"contains":r=n.jqx.string.contains(u,t);break;case"equals":r=n.jqx.string.equals(u,t);break;case"equalsignorecase":r=n.jqx.string.equalsIgnoreCase(u,t);break;case"startswith":r=n.jqx.string.startsWith(u,t);break;case"startswithignorecase":r=n.jqx.string.startsWithIgnoreCase(u,t);break;case"endswith":r=n.jqx.string.endsWith(u,t);break;case"endswithignorecase":r=n.jqx.string.endsWithIgnoreCase(u,t)}r||(this.visible=!1);r&&(s[h++]=this,this.visible=!0,o=this.visibleIndex);t==""&&(this.visible=!0,r=!1)}}),i.renderedVisibleItems=[],i.visibleItems=[],i.vScrollInstance.setPosition(0,!0),i._addItems(!1),i._renderItems(),u=0;u<i.items.length;u++)i.selectedIndexes[u]=-1;i.selectedIndex=-1;for(e in i.selectedValues)t=i.selectedValues[e],r=i.getItemByValue(t),r&&r.visible&&(i.selectedIndex=r.visibleIndex,i.selectedIndexes[r.visibleIndex]=r.visibleIndex);i._syncSelection();i.filterChange&&i.filterChange(t)},_getMatches:function(t,i){if(t==undefined||t.length==0)return-1;i==undefined&&(i=0);var u=this.getItems(),f=this,r=-1;return n.each(u,function(){var e="",u;if(!this.isGroup){e=this.searchLabel?this.searchLabel.toString():this.label?this.label.toString():this.value?this.value.toString():this.title?this.title.toString():"jqxItem";u=!1;switch(f.searchMode){case"containsignorecase":u=n.jqx.string.containsIgnoreCase(e,t);break;case"contains":u=n.jqx.string.contains(e,t);break;case"equals":u=n.jqx.string.equals(e,t);break;case"equalsignorecase":u=n.jqx.string.equalsIgnoreCase(e,t);break;case"startswith":u=n.jqx.string.startsWith(e,t);break;case"startswithignorecase":u=n.jqx.string.startsWithIgnoreCase(e,t);break;case"endswith":u=n.jqx.string.endsWith(e,t);break;case"endswithignorecase":u=n.jqx.string.endsWithIgnoreCase(e,t)}if(u&&this.visibleIndex>=i)return r=this.visibleIndex,!1}}),r},findItems:function(t){var r=this.getItems(),u=this,f=0,i=[];return n.each(r,function(){var e="",r;if(!this.isGroup){e=this.label?this.label:this.value?this.value:this.title?this.title:"jqxItem";r=!1;switch(u.searchMode){case"containsignorecase":r=n.jqx.string.containsIgnoreCase(e,t);break;case"contains":r=n.jqx.string.contains(e,t);break;case"equals":r=n.jqx.string.equals(e,t);break;case"equalsignorecase":r=n.jqx.string.equalsIgnoreCase(e,t);break;case"startswith":r=n.jqx.string.startsWith(e,t);break;case"startswithignorecase":r=n.jqx.string.startsWithIgnoreCase(e,t);break;case"endswith":r=n.jqx.string.endsWith(e,t);break;case"endswithignorecase":r=n.jqx.string.endsWithIgnoreCase(e,t)}r&&(i[f++]=this)}}),i},_syncSelection:function(){var n=this,t,i;if(n.filterable){if(n.items)for(t=0;t<n.items.length;t++)i=n.items[t],i.selected=!1;for(t=0;t<n.visibleItems.length;t++)i=n.visibleItems[t],n.selectedIndexes&&n.selectedIndexes[t]==i.visibleIndex&&(i.selected=!0);n.itemswrapper&&n._renderItems()}},_handleKeyDown:function(t){var r=t.keyCode,i=this,c=i.selectedIndex,v=i.selectedIndex,f,u,a,l,p,o,h,e,w;if(this.keyboardNavigation&&this.enableSelection&&(!this.filterInput||t.target!=this.filterInput[0])&&(!(t.target instanceof HTMLInputElement)||!n(t.target).ischildof(this.host))){if(f=function(){(i.multiple||i.checkboxes)&&i.clearSelection(!1)},t.altKey&&(r=-1),r==32&&this.checkboxes){o=this.getItem(c);o!=null&&(i._updateItemCheck(o,c),t.preventDefault());i._searchString="";i.selectIndex(o.visibleIndex,!1,!0,!0,"keyboard",t);i._renderItems();return}if(i.incrementalSearch){u=-1;i._searchString||(i._searchString="");(r==8||r==46)&&i._searchString.length>=1&&(i._searchString=i._searchString.substr(0,i._searchString.length-1));var s=String.fromCharCode(r),b=!isNaN(parseInt(s)),y=!1;if((r>=65&&r<=97||b||r==8||r==32||r==46)&&(t.shiftKey||(s=s.toLocaleLowerCase()),a=1+i.selectedIndex,r!=8&&r!=32&&r!=46&&(i._searchString.length>0&&i._searchString.substr(0,1)==s?(a=1+i.selectedIndex,i._searchString+=s):i._searchString+=s),r==32&&(i._searchString+=" "),l=this._getMatches(i._searchString,a),u=l,(u==i._lastMatchIndex||u==-1)&&(l=this._getMatches(i._searchString,0),u=l),i._lastMatchIndex=u,u>=0&&(p=function(){f();i.selectIndex(u,!1,!1,!1,"keyboard",t);var n=i.isIndexInView(u);n?i._renderItems():i.ensureVisible(u)},i._toSelectTimer&&clearTimeout(i._toSelectTimer),i._toSelectTimer=setTimeout(function(){p()},i.incrementalSearchKeyDownDelay)),y=!0),i._searchTimer!=undefined&&clearTimeout(i._searchTimer),(r==27||r==13)&&(i._searchString=""),i._searchTimer=setTimeout(function(){i._searchString="";i._renderItems()},i.incrementalSearchDelay),u>=0)return;if(y)return!1}if(r==33&&(h=i._itemsInPage(),i.selectedIndex-h>=0?(f(),i.selectIndex(v-h,!1,!1,!1,"keyboard",t)):(f(),i.selectIndex(i._firstItemIndex(),!1,!1,!1,"keyboard",t)),i._searchString=""),r==32&&this.checkboxes&&(o=this.getItem(c),o!=null&&(i._updateItemCheck(o,c),t.preventDefault()),i._searchString=""),r==36&&(f(),i.selectIndex(i._firstItemIndex(),!1,!1,!1,"keyboard",t),i._searchString=""),r==35&&(f(),i.selectIndex(i._lastItemIndex(),!1,!1,!1,"keyboard",t),i._searchString=""),r==34&&(h=i._itemsInPage(),i.selectedIndex+h<i.visibleItems.length?(f(),i.selectIndex(v+h,!1,!1,!1,"keyboard",t)):(f(),i.selectIndex(i._lastItemIndex(),!1,!1,!1,"keyboard",t)),i._searchString=""),r==38)if(i._searchString="",i.selectedIndex>0)if(e=i._prevItemIndex(i.selectedIndex),e!=i.selectedIndex&&e!=-1)f(),i.selectIndex(e,!1,!1,!1,"keyboard",t);else return!0;else return!1;else if(r==40)if(i._searchString="",i.selectedIndex+1<i.visibleItems.length)if(e=i._nextItemIndex(i.selectedIndex),e!=i.selectedIndex&&e!=-1)f(),i.selectIndex(e,!1,!1,!1,"keyboard",t);else return!0;else return!1;return r==35||r==36||r==38||r==40||r==34||r==33?(w=i.isIndexInView(i.selectedIndex),w?i._renderItems():i.ensureVisible(i.selectedIndex),!1):!0}},_updateItemCheck:function(n,t){if(!this.disabled){n.checked=n.checked==!0?n.hasThreeStates&&this.hasThreeStates?null:!1:n.checked!=null;switch(n.checked){case!0:this.checkIndex(t);break;case!1:this.uncheckIndex(t);break;default:this.indeterminateIndex(t)}}},wheel:function(n,t){var r,i;if(t.autoHeight||!t.enableMouseWheel)return n.returnValue=!0,!0;if(t.disabled)return!0;if(r=0,n||(n=window.event),n.originalEvent&&n.originalEvent.wheelDelta&&(n.wheelDelta=n.originalEvent.wheelDelta),n.wheelDelta?r=n.wheelDelta/120:n.detail&&(r=-n.detail/3),r)return i=t._handleDelta(r),i&&(n.preventDefault&&n.preventDefault(),n.originalEvent!=null&&(n.originalEvent.mouseHandled=!0),n.stopPropagation!=undefined&&n.stopPropagation()),i?(i=!1,n.returnValue=i,i):!1;n.preventDefault&&n.preventDefault();n.returnValue=!1},_handleDelta:function(n){var i=this.vScrollInstance.value,t;return(n<0?this.scrollDown():this.scrollUp(),t=this.vScrollInstance.value,i!=t)?!0:!1},focus:function(){try{this.focused=!0;this.host.focus();var n=this;setTimeout(function(){n.host.focus()},25)}catch(t){}},_removeHandlers:function(){var t=this;this.removeHandler(n(document),"keydown.listbox"+this.element.id);this.removeHandler(n(document),"keyup.listbox"+this.element.id);this.removeHandler(this.vScrollBar,"valueChanged");this.removeHandler(this.hScrollBar,"valueChanged");this._mousewheelfunc?this.removeHandler(this.host,"mousewheel",this._mousewheelfunc):this.removeHandler(this.host,"mousewheel");this.removeHandler(this.host,"keydown");this.removeHandler(this.content,"mouseleave");this.removeHandler(this.content,"focus");this.removeHandler(this.content,"blur");this.removeHandler(this.host,"focus");this.removeHandler(this.host,"blur");this.removeHandler(this.content,"mouseenter");this.removeHandler(this.content,"mouseup");this.removeHandler(this.content,"mousedown");this.removeHandler(this.content,"touchend");this._mousemovefunc?this.removeHandler(this.content,"mousemove",this._mousemovefunc):this.removeHandler(this.content,"mousemove");this.removeHandler(this.content,"selectstart");this.overlayContent&&this.removeHandler(this.overlayContent,n.jqx.mobile.getTouchEventName("touchend"))},_updateSize:function(){var n,i,t;this.virtualSize||(this._oldheight=null,this.virtualSize=this._calculateVirtualSize());n=this;n._arrange();(n.host.height()!=n._oldheight||n.host.width()!=n._oldwidth)&&(i=n.host.width()!=n._oldwidth,n.autoItemsHeight?n._render(!1):n.items&&(n.items.length>0&&n.virtualItemsCount*n.items[0].height<n._oldheight-2?n._render(!1):(t=n.vScrollInstance.value,n._updatescrollbars(),n._renderItems(),t<n.vScrollInstance.max?n.vScrollInstance.setPosition(t):n.vScrollInstance.setPosition(n.vScrollInstance.max))),n._oldwidth=n.host.width(),n._oldheight=n.host.height())},_addHandlers:function(){var t=this,i,u;this.focused=!1;var o=0,o=0,s=new Date,u=this.isTouchDevice();this.addHandler(this.vScrollBar,"valueChanged",function(){n.jqx.browser.msie&&n.jqx.browser.version>9?setTimeout(function(){t._renderItems()},1):t._renderItems()});this.addHandler(this.hScrollBar,"valueChanged",function(){t._renderItems()});this._mousewheelfunc&&this.removeHandler(this.host,"mousewheel",this._mousewheelfunc);this._mousewheelfunc=function(n){t.wheel(n,t)};this.addHandler(this.host,"mousewheel",this._mousewheelfunc);this.addHandler(n(document),"keydown.listbox"+this.element.id,function(n){t._ctrlKey=n.ctrlKey||n.metaKey;t._shiftKey=n.shiftKey});this.addHandler(n(document),"keyup.listbox"+this.element.id,function(n){t._ctrlKey=n.ctrlKey||n.metaKey;t._shiftKey=n.shiftKey});this.addHandler(this.host,"keydown",function(n){return t._handleKeyDown(n)});this.addHandler(this.content,"mouseleave",function(){t.focused=!1;var i=n.data(t.element,"hoveredItem");i!=null&&(n(i).removeClass(t.toThemeProperty("jqx-listitem-state-hover")),n(i).removeClass(t.toThemeProperty("jqx-fill-state-hover")),n.data(t.element,"hoveredItem",null))});this.addHandler(this.content,"focus",function(){t.disabled||(t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")),t.focused=!0)});this.addHandler(this.content,"blur",function(){t.focused=!1;t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus"))});this.addHandler(this.host,"focus",function(){t.disabled||(t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")),t.focused=!0)});this.addHandler(this.host,"blur",function(){n.jqx.browser.msie&&n.jqx.browser.version<9&&t.focused||(t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")),t.focused=!1)});this.addHandler(this.content,"mouseenter",function(){t.focused=!0});var f=n.jqx.utilities.hasTransform(this.host),r=t.isTouchDevice()&&this.touchMode!==!0,e=r?"touchend":"mousedown",h=r?"touchend":"mouseup";this.overlayContent?this.addHandler(this.overlayContent,n.jqx.mobile.getTouchEventName("touchend"),function(i){var s,f,u;if(!t.enableSelection||r&&(t._newScroll=new Date,t._newScroll-t._lastScroll<500))return!0;if(s=n.jqx.mobile.getTouches(i),f=s[0],f!=undefined){var h=t.host.offset(),e=parseInt(f.pageX),o=parseInt(f.pageY);if(t.touchMode==!0&&f._pageX!=undefined&&(e=parseInt(f._pageX),o=parseInt(f._pageY)),e=e-h.left,o=o-h.top,u=t._hitTest(e,o),u!=null&&!u.isGroup){if(t._newScroll=new Date,t._newScroll-t._lastScroll<500)return!1;if(t.checkboxes){t._updateItemCheck(u,u.visibleIndex);return}if(u.html.indexOf("href")!=-1)setTimeout(function(){return t.selectIndex(u.visibleIndex,!1,!0,!1,"mouse",i),t.content.trigger("click"),!1},100);else return t.selectIndex(u.visibleIndex,!1,!0,!1,"mouse",i),i.preventDefault&&i.preventDefault(),t.content.trigger("click"),!1}}}):(i=!1,this.addHandler(this.content,e,function(u){var c,l,p,v;if(!t.enableSelection)return!0;if(i=!0,r&&(t._newScroll=new Date,t._newScroll-t._lastScroll<500))return!1;if(t.focused=!0,!t.isTouchDevice()&&t.focusable&&t.host.focus(),u.target.id!="listBoxContent"+t.element.id&&t.itemswrapper[0]!=u.target){var y=u.target,s=n(y).offset(),h=t.host.offset();f&&(c=n.jqx.mobile.getLeftPos(y),l=n.jqx.mobile.getTopPos(y),s.left=c,s.top=l,c=n.jqx.mobile.getLeftPos(t.element),l=n.jqx.mobile.getTopPos(t.element),h.left=c,h.top=l);var w=parseInt(s.top)-parseInt(h.top),a=parseInt(s.left)-parseInt(h.left),o=t._hitTest(a,w);if(o==null||o.isGroup||(p=function(n,r){if(t._shiftKey||(t._clickedIndex=n.visibleIndex),t.checkboxes)if(a=20+r.pageX-s.left,t.rtl){var u=t.hScrollBar.css("visibility")!="hidden"?t.hScrollInstance.max:t.host.width();a<=t.host.width()-20&&(t.allowDrag?setTimeout(function(){t._dragItem||i||(t._updateItemCheck(n,n.visibleIndex),t.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",r))},200):(t._updateItemCheck(n,n.visibleIndex),t.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",r)))}else a+t.hScrollInstance.value>=20&&(t.allowDrag?setTimeout(function(){t._dragItem||i||(t._updateItemCheck(n,n.visibleIndex),t.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",r))},200):(t._updateItemCheck(n,n.visibleIndex),t.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",r)));else t.selectIndex(n.visibleIndex,!1,!0,!1,"mouse",r)},o.disabled||(o.html.indexOf("href")!=-1?setTimeout(function(){p(o,u)},100):p(o,u))),e=="mousedown"&&(v=!1,u.which?v=u.which==3:u.button&&(v=u.button==2),v))return!0}return!0}));this.addHandler(this.content,"mouseup",function(n){t.vScrollInstance.handlemouseup(t,n);i=!1});n.jqx.browser.msie&&this.addHandler(this.content,"selectstart",function(){return!1});u=this.isTouchDevice();this.enableHover&&!u&&(this._mousemovefunc=function(i){var y,v,s,h,c,a;if(u||!t.enableHover||(y=n.jqx.browser.msie==!0&&n.jqx.browser.version<9?0:1,i.target==null)||t.disabled)return!0;if(t.focused=!0,v=t.vScrollInstance.isScrolling(),!v&&i.target.id!="listBoxContent"+t.element.id&&t.itemswrapper[0]!=i.target){var l=i.target,e=n(l).offset(),o=t.host.offset();f&&(s=n.jqx.mobile.getLeftPos(l),h=n.jqx.mobile.getTopPos(l),e.left=s,e.top=h,s=n.jqx.mobile.getLeftPos(t.element),h=n.jqx.mobile.getTopPos(t.element),o.left=s,o.top=h);var p=parseInt(e.top)-parseInt(o.top),w=parseInt(e.left)-parseInt(o.left),r=t._hitTest(w,p);r==null||r.isGroup||r.disabled||(c=n.data(t.element,"hoveredItem"),c!=null&&(n(c).removeClass(t.toThemeProperty("jqx-listitem-state-hover")),n(c).removeClass(t.toThemeProperty("jqx-fill-state-hover"))),n.data(t.element,"hoveredItem",r.element),a=n(r.element),a.addClass(t.toThemeProperty("jqx-listitem-state-hover")),a.addClass(t.toThemeProperty("jqx-fill-state-hover")))}},this.addHandler(this.content,"mousemove",this._mousemovefunc))},_arrange:function(n){var w,i,c,a,b,v,o,k,d,y,p;n==undefined&&(n=!0);var t=this,u=null,r=null,l=t.filterable?t.filterHeight:0,g=window.getComputedStyle(this.element),s=parseInt(g.borderLeftWidth)*2,nt=g.boxSizing;this.element.offsetWidth===0&&(s=2);(nt==="border-box"||isNaN(s))&&(s=0);w=function(n){return n=t.host.height()-s,n==0&&(n=200,t.host.height(n)),n};t.width!=null&&t.width.toString().indexOf("px")!=-1?u=t.width:t.width==undefined||isNaN(t.width)||(u=t.width);t.height!=null&&t.height.toString().indexOf("px")!=-1?r=t.height:t.height==undefined||isNaN(t.height)||(r=t.height);t.width!=null&&t.width.toString().indexOf("%")!=-1&&(t.host.css("width",t.width),u=t.host.width());t.height!=null&&t.height.toString().indexOf("%")!=-1&&(t.host.css("height",t.height),r=w(r));u!=null&&(u=parseInt(u)-s,parseInt(t.element.style.width)!=parseInt(t.width)&&(t.element.style.width=parseInt(u)+"px"));t.autoHeight?t.virtualSize&&(t.hScrollBar.css("visibility")!="hidden"?(t.host.height(t.virtualSize.height+parseInt(t.scrollBarSize)+3),t.height=t.virtualSize.height+parseInt(t.scrollBarSize)+3,r=t.height):(t.host.height(t.virtualSize.height),t.height=t.virtualSize.height,r=t.virtualSize.height)):r!=null&&(r=parseInt(r),parseInt(t.element.style.height)!=parseInt(t.height)&&(t.host.height(t.height),w(r)));i=t.scrollBarSize;isNaN(i)&&(i=parseInt(i),i=isNaN(i)?"17px":i+"px");i=parseInt(i);var h=4,f=2,e=1;if(t.vScrollBar)t.vScrollBar[0].style.visibility!="hidden"?e=i+h:(e=0,t.vScrollInstance.setPosition(0));else return;if(i==0&&(e=0,f=0),t.hScrollBar)t.hScrollBar[0].style.visibility!="hidden"?f=i+h:(t.hScrollInstance.setPosition(0),f=0);else return;t.autoItemsHeight&&(t.hScrollBar[0].style.visibility="hidden",f=0);r==null&&(r=0);c=parseInt(r)-h-i;c<0&&(c=0);parseInt(t.hScrollBar[0].style.height)!=i&&(parseInt(i)<0&&(i=0),t.hScrollBar[0].style.height=parseInt(i)+"px");t.hScrollBar[0].style.top!=c+"px"&&(t.hScrollBar[0].style.top=c+"px",t.hScrollBar[0].style.left="0px");a=u-i-h;a<0&&(a=0);b=a+"px";t.hScrollBar[0].style.width!=b&&(t.hScrollBar[0].style.width=b);e<=1&&u>=2&&(t.hScrollBar[0].style.width=parseInt(u-2)+"px");i!=parseInt(t.vScrollBar[0].style.width)&&(t.vScrollBar[0].style.width=parseInt(i)+"px");parseInt(r)-f!=parseInt(t.vScrollBar[0].style.height)&&(v=parseInt(r)-f,v<0&&(v=0),t.vScrollBar[0].style.height=v+"px");u==null&&(u=0);o=parseInt(u)-parseInt(i)-h+"px";this.host.css("box-sizing")==="border-box"&&(o=parseInt(o)-2+"px");o!=t.vScrollBar[0].style.left&&(parseInt(o)>=0&&(t.vScrollBar[0].style.left=o),t.vScrollBar[0].style.top="0px");k=t.vScrollInstance;k.disabled=t.disabled;n&&k._arrange();d=t.hScrollInstance;d.disabled=t.disabled;n&&d._arrange();t.vScrollBar[0].style.visibility!="hidden"&&t.hScrollBar[0].style.visibility!="hidden"?(t.bottomRight[0].style.visibility="inherit",t.bottomRight[0].style.left=1+parseInt(t.vScrollBar[0].style.left)+"px",t.bottomRight[0].style.top=1+parseInt(t.hScrollBar[0].style.top)+"px",t.rtl&&t.bottomRight.css({left:0}),t.bottomRight[0].style.width=parseInt(i)+3+"px",t.bottomRight[0].style.height=parseInt(i)+3+"px"):t.bottomRight[0].style.visibility="hidden";parseInt(t.content[0].style.width)!=parseInt(u)-e&&(y=parseInt(u)-e,y<0&&(y=0),t.content[0].style.width=y+"px");t.rtl&&(t.vScrollBar.css({left:"0px",top:"0px"}),t.hScrollBar.css({left:t.vScrollBar.width()+2+"px"}),t.vScrollBar[0].style.visibility!="hidden"?t.content.css("margin-left",4+t.vScrollBar.width()):(t.content.css("margin-left",0),t.hScrollBar.css({left:"0px"})),t.filterable&&t.filterInput&&t.filterInput.css({left:t.vScrollBar.width()+6+"px"}));parseInt(t.content[0].style.height)!=parseInt(r)-f&&(p=parseInt(r)-f,p<0&&(p=0),t.content[0].style.height=p+"px",t.content[0].style.top="0px");l>0&&(t.content[0].style.top=l+"px",t.content[0].style.height=parseInt(t.content[0].style.height)-l+"px");t.filterable?(t.filterInput[0].style.height=l-6+"px",t.filterInput[0].style.top="3px",t.rtl||(t.filterInput[0].style.left=parseInt(t.content.css("left"))+3+"px"),t.filterInput[0].style.width=parseInt(t.content.css("width"))-7+"px",t.filter[0].style.display="block"):t.filter[0].style.display="none";t.overlayContent&&(t.overlayContent.width(parseInt(u)-e),t.overlayContent.height(parseInt(r)-f))},ensureVisible:function(t,i){var s,u,o,r,f,e;if(isNaN(t)&&(r=this.getItemByValue(t),r&&(t=r.index)),s=this.isIndexInView(t),s){if(i)for(indx=0;indx<this.visibleItems.length;indx++)r=this.visibleItems[indx],r.visibleIndex!=t||r.isGroup||(f=this.vScrollInstance.value,e=r.initialTop,this.filterable&&(e=this.filterHeight+2+r.initialTop),f+this.host.height()<this.vScrollInstance.max&&this.vScrollInstance.setPosition(e))}else{if(t<0)return;if(this.autoHeight)u=n.data(this.vScrollBar[0],"jqxScrollBar").instance,u.setPosition(0);else for(indx=0;indx<this.visibleItems.length;indx++)if(r=this.visibleItems[indx],r.visibleIndex==t&&!r.isGroup){var u=n.data(this.vScrollBar[0],"jqxScrollBar").instance,f=u.value,c=this.filterable?this.filterHeight+2:0,l=this.hScrollBar.css("visibility")==="hidden",h=l?0:this.scrollBarSize+4;r.initialTop<f?(u.setPosition(r.initialTop),indx==0&&u.setPosition(0)):r.initialTop+r.height>f+this.host.height()-c&&(o=this.host.height(),this.filterable?u.setPosition(this.filterHeight+2+r.initialTop+r.height+2-o+h):(u.setPosition(r.initialTop+r.height+2-o+h),indx===this.visibleItems.length-1&&u.setPosition(u.max)),i&&(f=u.value,e=r.initialTop,this.filterable&&(e=this.filterHeight+2+r.initialTop),f+o<u.max&&u.setPosition(e)));break}}this._renderItems()},scrollTo:function(n,t){this.vScrollBar.css("visibility")!="hidden"&&this.vScrollInstance.setPosition(t);this.hScrollBar.css("visibility")!="hidden"&&this.hScrollInstance.setPosition(n)},scrollDown:function(){if(this.vScrollBar.css("visibility")=="hidden")return!1;var n=this.vScrollInstance;return n.value+n.largestep<=n.max?(n.setPosition(n.value+n.largestep),!0):(n.setPosition(n.max),!0)},scrollUp:function(){if(this.vScrollBar.css("visibility")=="hidden")return!1;var n=this.vScrollInstance;return n.value-n.largestep>=n.min?(n.setPosition(n.value-n.largestep),!0):n.value!=n.min?(n.setPosition(n.min),!0):!1},databind:function(t,i){var o,r,s,u,f,e,h;this.records=[];o=t._source?!0:!1;r=new n.jqx.dataAdapter(t,{autoBind:!1});o&&(r=t,t=t._source);s=function(){t.type!=undefined&&(r._options.type=t.type);t.formatdata!=undefined&&(r._options.formatData=t.formatdata);t.contenttype!=undefined&&(r._options.contentType=t.contenttype);t.async!=undefined&&(r._options.async=t.async)};u=function(t,i){var o=function(i){var o=null,e,u,f,s,h,c,l,a,r;if(typeof i=="string")var u=i,f=i,e="";else t.displayMember!=undefined&&t.displayMember!=""&&(f=i[t.valueMember],u=i[t.displayMember]);return e="",t.groupMember?e=i[t.groupMember]:i&&i.group!=undefined&&(e=i.group),t.searchMember?o=i[t.searchMember]:i&&i.searchLabel!=undefined&&(o=i.searchLabel),t.valueMember||t.displayMember||n.type(i)=="string"&&(u=f=i.toString()),i&&i.label!=undefined&&(u=i.label),i&&i.value!=undefined&&(f=i.value),s=!1,i&&i.checked!=undefined&&(s=i.checked),h="",i&&i.html!=undefined&&(h=i.html),c=!0,i&&i.visible!=undefined&&(c=i.visible),l=!1,i&&i.disabled!=undefined&&(l=i.disabled),a=!1,i&&i.hasThreeStates!=undefined&&(a=i.hasThreeStates),r={},r.label=u,r.value=f,r.searchLabel=o,r.html=h,r.visible=c,r.originalItem=i,r.group=e,r.groupHtml="",r.disabled=l,r.checked=s,r.hasThreeStates=a,r},s,h,f,u,c,e;if(i!=undefined&&(s=r._changedrecords[0],s)){n.each(r._changedrecords,function(){var n=this.index,u=this.record,r;i!="remove"&&(r=o(u));switch(i){case"update":t.updateAt(r,n);break;case"add":t.insertAt(r,n);break;case"remove":t.removeAt(n)}});return}for(t.records=r.records,h=t.records.length,f=[],u=0;u<h;u++)c=t.records[u],e=o(c),e.index=u,f[u]=e;t.items=t.loadItems(f,!0);t._render();t._raiseEvent("6")};s(this);f=this;switch(t.datatype){case"local":case"array":default:(t.localdata!=null||n.isArray(t))&&(r.unbindBindingUpdate(this.element.id),!this.autoBind&&(this.autoBind||i)||r.dataBind(),u(this),r.bindBindingUpdate(this.element.id,function(n){u(f,n)}));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(t.localdata!=null){r.unbindBindingUpdate(this.element.id);!this.autoBind&&(this.autoBind||i)||r.dataBind();u(this);r.bindBindingUpdate(this.element.id,function(){u(f)});return}e={};r._options.data?n.extend(r._options.data,e):(t.data&&n.extend(e,t.data),r._options.data=e);h=function(){u(f)};r.unbindDownloadComplete(f.element.id);r.bindDownloadComplete(f.element.id,h);!this.autoBind&&(this.autoBind||i)||r.dataBind()}},loadItems:function(t,i){var p,s,l,e,c,o,h,f,w;if(t==null){this.groups=[];this.items=[];this.visualItems=[];return}var u=this,v=0,a=0,y=0;if(this.groups=[],this.items=[],this.visualItems=[],p=[],this.itemsByValue=[],n.map(t,function(t){var c,s;if(t==undefined)return null;var r=new n.jqx._jqxListBox.item,f=t.group,o=t.groupHtml,e=t.title,h=null;return u.searchMember?h=t[u.searchMember]:t&&t.searchLabel!=undefined&&(h=t.searchLabel),(e==null||e==undefined)&&(e=""),(f==null||f==undefined)&&(f=""),u.groupMember&&(f=t[u.groupMember]),(o==null||o==undefined)&&(o=""),u.groups[f]||(u.groups[f]={items:[],index:-1,caption:f,captionHtml:o},v++,c=v+"jqxGroup",u.groups[c]=u.groups[f],a++,u.groups.length=a),s=u.groups[f],s.index++,s.items[s.index]=r,typeof t=="string"?(r.label=t,r.value=t,arguments.length>1&&arguments[1]&&n.type(arguments[1])=="string"&&(r.label=t,r.value=arguments[1])):t.label==null&&t.value==null&&t.html==null&&t.group==null&&t.groupHtml==null?(r.label=t.toString(),r.value=t.toString()):(r.label=t.label,r.value=t.value,r.label===undefined&&(r.label=t.value),r.value===undefined&&(r.value=t.label)),typeof t!="string"&&(t.label===undefined&&u.displayMember!=""&&(r.label=t[u.displayMember]!=undefined?t[u.displayMember]:""),t.value===undefined&&u.valueMember!=""&&(r.value=t[u.valueMember])),r.hasThreeStates=t.hasThreeStates!=undefined?t.hasThreeStates:!0,r.originalItem=t,i&&(r.originalItem=t.originalItem),r.title=e,e&&r.value===undefined&&r.label===undefined&&(r.value=r.label=e),r.html=t.html||"",t.html&&t.html!=""&&e&&e!="",typeof r.label=="string",r.group=f,r.checked=t.checked||!1,r.groupHtml=t.groupHtml||"",r.disabled=t.disabled||!1,r.visible=t.visible!=undefined?t.visible:!0,r.searchLabel=h,r.index=y,p[y]=r,y++,r}),s=[],f=0,this.fromSelect==undefined||this.fromSelect==!1)for(l=0;l<a;l++){var v=l+1,b=v+"jqxGroup",r=this.groups[b];if(r==undefined||r==null)break;if(l==0&&r.caption==""&&r.captionHtml==""&&a<=1){for(e=0;e<r.items.length;e++)h=r.items[e].value,(r.items[e].value==undefined||r.items[e].value==null)&&(h=e),this.itemsByValue[n.trim(h).split(" ").join("?")]=r.items[e];return r.items}for(c=new n.jqx._jqxListBox.item,c.isGroup=!0,c.label=r.caption,r.caption==""&&r.captionHtml==""&&(r.caption=this.emptyGroupText,c.label=r.caption),c.html=r.captionHtml,s[f]=c,f++,o=0;o<r.items.length;o++)s[f]=r.items[o],h=r.items[o].value,(r.items[o].value==""||r.items[o].value==null)&&(h=f),u.itemsByValue[n.trim(h).split(" ").join("?")]=r.items[o],f++}else f=0,w=[],n.each(p,function(){var t,i;w[this.group]||this.group!=""&&(t=new n.jqx._jqxListBox.item,t.isGroup=!0,t.label=this.group,s[f]=t,f++,w[this.group]=!0);s[f]=this;i=this.value;(this.value==""||this.value==null)&&(i=f-1);u.itemsByValue[n.trim(i).split(" ").join("?")]=this;f++});return s},_mapItem:function(t){var i=new n.jqx._jqxListBox.item;return this.displayMember&&(t.label==undefined&&(t.label=t[this.displayMember]),t.value==undefined&&(t.value=t[this.valueMember])),typeof t=="string"?(i.label=t,i.value=t):typeof t=="number"?(i.label=t.toString(),i.value=t.toString()):(i.label=t.label!==undefined?t.label:t.value,i.value=t.value!==undefined?t.value:t.label),i.label==undefined&&i.value==undefined&&i.html==undefined&&(i.label=i.value=t),i.html=t.html||"",i.group=t.group||"",i.checked=t.checked||!1,i.title=t.title||"",i.groupHtml=t.groupHtml||"",i.disabled=t.disabled||!1,i.visible=t.visible||!0,i},addItem:function(n){return this.insertAt(n,this.items?this.items.length:0)},_getItemByParam:function(n){if(n!=null&&n.index==undefined){var t=this.getItemByValue(n);t&&(n=t)}return n},insertItem:function(n,t){var i=this._getItemByParam(n);return this.insertAt(i,t)},updateItem:function(n,t){var i=this._getItemByParam(t);return i&&i.index!=undefined?this.updateAt(n,i.index):!1},updateAt:function(t,i){if(t!=null){var r=this._mapItem(t);this.itemsByValue[n.trim(r.value).split(" ").join("?")]=this.items[i];this.items[i].value=r.value;this.items[i].label=r.label;this.items[i].html=r.html;this.items[i].disabled=r.disabled;this._raiseEvent("9",{item:this.items[i]})}this._cachedItemHtml=[];this._renderItems();this.rendered&&this.rendered()},insertAt:function(t,i){var r,f,u,h,l;if(t==null)return!1;if(this._cachedItemHtml=[],this.items==undefined||this.items.length==0)return this.source=[],this.refresh(),r=this._mapItem(t),r.index=0,this.items[this.items.length]=r,this._addItems(!0),this._renderItems(),this.rendered&&this.rendered(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),u=r.value,(r.value==""||r.value==null)&&(u=i),this.itemsByValue[n.trim(u).split(" ").join("?")]=r,!1;if(r=this._mapItem(t),i==-1||i==undefined||i==null||i>=this.items.length)r.index=this.items.length,this.items[this.items.length]=r;else{var e=[],o=0,c=!1,s=0;for(f=0;f<this.items.length;f++)this.items[f].isGroup==!1&&s>=i&&!c&&(e[o++]=r,r.index=i,s++,c=!0),e[o]=this.items[f],this.items[f].isGroup||(e[o].index=s,s++),o++;this.items=e}return u=r.value,(r.value==""||r.value==null)&&(u=i),this.itemsByValue[n.trim(u).split(" ").join("?")]=r,this.visibleItems=[],this.renderedVisibleItems=[],h=n.data(this.vScrollBar[0],"jqxScrollBar").instance,l=h.value,h.setPosition(0),this.allowDrag&&this._enableDragDrop||this.virtualSize&&this.virtualSize.height<10+this.host.height()?this._addItems(!0):this._addItems(!1),this.groups.length>1,this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),h.setPosition(l),this._raiseEvent("7",{item:r}),this.rendered&&this.rendered(),!0},removeAt:function(t){var c,l,f,i,h,u,r;if(t<0||t>this.items.length-1||t==undefined)return!1;if(c=this.items[t].height,r=this.items[t].value,(r==""||r==null)&&(r=t),this.itemsByValue[n.trim(r).split(" ").join("?")]=null,l=this.items[t],this.groups.length>1){for(f=[],i=0;i<this.items.length;i++)this.items[i].isGroup||f.push({item:this.items[i],key:i});if(f[t])this.items.splice(f[t].key,1);else return!1}else this.items.splice(t,1);var o=[],s=0,a=0;for(i=0;i<this.items.length;i++)o[s]=this.items[i],this.items[i].isGroup||(o[s].index=a,a++),s++;this.items=o;var e=n.data(this.vScrollBar[0],"jqxScrollBar").instance,e=n.data(this.vScrollBar[0],"jqxScrollBar").instance,v=e.value;for(e.setPosition(0),this.visibleItems=[],this.renderedVisibleItems=[],this.items.length>0?(this.virtualSize&&(this.virtualSize.height-=c,h=this.virtualSize.itemsPerPage*2,this.autoHeight&&(h=this.items.length),this.virtualItemsCount=Math.min(h,this.items.length)),this._updatescrollbars()):this._addItems(),this._renderItems(),this.allowDrag&&this._enableDragDrop&&this._enableDragDrop(),this.vScrollBar.css("visibility")!="hidden"?e.setPosition(v):e.setPosition(0),this.itemsByValue=[],u=0;u<this.items.length;u++)r=this.items[u].value,(this.items[u].value==""||this.items[u].value==null)&&(r=u),this.itemsByValue[n.trim(r).split(" ").join("?")]=this.items[u];return this._raiseEvent("8",{item:l}),this.items.length===0&&(this.selectedIndex=-1,this.selectedValue=null,this._updateInputSelection()),this.rendered&&this.rendered(),!0},removeItem:function(n,t){var r=this._getItemByParam(n),u=-1,i;if(r&&r.index!=undefined&&t!==!0){for(i=0;i<this.items.length;i++)if(this.items[i].label==r.label&&this.items[i].value==r.value){u=i;break}if(u!=-1)return this.removeAt(u)}if(u==-1)return this.removeAt(r.index)},getItems:function(){return this.items},disableItem:function(n){var t=this._getItemByParam(n);this.disableAt(t.index)},enableItem:function(n){var t=this._getItemByParam(n);this.enableAt(t.index)},disableAt:function(n){return this.items?n<0||n>this.items.length-1?!1:(this.items[n].disabled=!0,this._renderItems(),!0):!1},enableAt:function(n){return this.items?n<0||n>this.items.length-1?!1:(this.items[n].disabled=!1,this._renderItems(),!0):!1},destroy:function(){this.source&&this.source.unbindBindingUpdate&&this.source.unbindBindingUpdate(this.element.id);this._removeHandlers();this.vScrollBar.jqxScrollBar("destroy");this.hScrollBar.jqxScrollBar("destroy");this.vScrollBar.remove();this.hScrollBar.remove();this.content.remove();n.jqx.utilities.resize(this.host,null,!0);var t=n.data(this.element,"jqxListBox");delete this.hScrollInstance;delete this.vScrollInstance;delete this.vScrollBar;delete this.hScrollBar;delete this.content;delete this.bottomRight;delete this.itemswrapper;delete this.visualItems;delete this.visibleItems;delete this.items;delete this.groups;delete this.renderedVisibleItems;delete this._mousewheelfunc;delete this._mousemovefunc;delete this._cachedItemHtml;delete this.itemsByValue;delete this._activeElement;delete this.source;delete this.events;this.input&&(this.input.remove(),delete this.input);t&&delete t.instance;this.host.removeData();this.host.removeClass();this.host.remove();this.element=null;delete this.element;this.host=null;delete this.set;delete this.get;delete this.call;delete this.host},_raiseEvent:function(t,i){var u,r,f;return this._stopEvents==!0?!0:(i==undefined&&(i={owner:null}),u=this.events[t],args=i,args.owner=this,this._updateInputSelection(),r=new n.Event(u),r.owner=this,r.args=args,this.host!=null&&(f=this.host.trigger(r)),f)}})}(jqxBaseFramework),function(n){n.jqx.parseSourceTag=function(t){var nt=[],c=n(t).find("option"),s=n(t).find("optgroup"),k=!1,tt,r,f,i,it,e,h,rt,a,b,ut,u;if(c.length===0&&(c=n(t).find("li"),c.length>0&&(k=!0)),c.length===0){var d=[],v=n(t).find("tr"),y=n(t).find("th"),p=0;y.length===0&&v.length>0&&(y=n(v[0]).find("td"),p=1);var l=[],w=[],d=[];for(u=0;u<v.length;u++){for(tt=v[u],r={},u===p+1&&(w=[]),f=0;f<y.length;f++)i=n.trim(n(y[f]).text()),it=n(tt).find("td:eq("+f+")"),r[i]=n.trim(it.text()),u===p&&(l.push({text:i,dataField:i}),w.push({name:i})),u===p+1&&(e=typeof r[i],h="",e==="string"&&(r[i]==="true"||r[i]==="false"?e="bool":isNaN(parseFloat(r[i]))||r[i].indexOf("-")!==-1||r[i].indexOf("/")!==-1?r[i].indexOf("$")>=0||r[i].indexOf("%")>=0?(e="number",r[i].indexOf("$")>=0&&(h="c"),r[i].indexOf("%")>=0&&(h="p"),r[i]=r[i].replace("%","").replace("$","")):new Date(r[i]).toString()!=="Invalid Date"&&(e="date",h="d"):(e="number",h=r[i].indexOf(".")>=0?"f":"n")),l[f].cellsformat=h,e==="number"&&(l[f].cellsalign="right",l[f].align="right"),w.push({name:i,type:e}));u>=1&&(d[d.length]=r)}return rt={localdata:d,datatype:"array",datafields:w},{source:new n.jqx.dataAdapter(rt),columns:l}}var g=null,g=-1,ft=this,o=[];if(n.each(c,function(t){var f=s.find(this).length>0,r=null,i,u;this.text!=null&&(this.label==null||this.label=="")&&(this.label=this.text);k===!0&&(this.label=n(this).text().trim(),this.selected=n(this).attr("data-selected"),this.checked=this.selected,this.value=n(this).attr("data-value")||t,this.disabled=n(this).attr("disabled"));i={style:this.style.cssText,selected:this.selected,html:this.innerHTML.trim(),classes:this.className,disabled:this.disabled,value:this.value,label:this.label,title:this.title,originalItem:this};u=n.jqx.browser.msie&&n.jqx.browser.version<8;u&&!k&&i.value==""&&this.text!=null&&this.text.length>0&&(i.value=this.text);f&&(r=s.find(this).parent()[0].label,i.group=r,o[r]||(o[r]=[],o.length++),o[r].push(i));this.selected&&(g=t);i.checked=this.selected;i.label!==undefined&&nt.push(i)}),o.length>0){a=[];for(b in o)if(b!=="indexOf"){for(ut=null,u=0;u<s.length;u++)if(b===s[u].label||s[u].text){ut=s[u];break}n.each(o[b],function(){this.label!==undefined&&a.push(this)})}}return a&&a.length>0?{items:a,index:g}:{items:nt,index:g}};n.jqx._jqxListBox.item=function(){return{group:"",groupHtml:"",selected:!1,isGroup:!1,highlighted:!1,value:null,label:"",html:null,visible:!0,disabled:!1,element:null,width:null,height:null,initialTop:null,top:null,left:null,title:"",index:-1,checkBoxElement:null,originalItem:null,checked:!1,visibleIndex:-1}}}(jqxBaseFramework),function(n){n.jqx.jqxWidget("jqxDropDownList","",{});n.extend(n.jqx._jqxDropDownList.prototype,{defineInstance:function(){var t={disabled:!1,width:null,height:null,items:[],selectedIndex:-1,source:null,scrollBarSize:15,arrowSize:17,enableHover:!0,enableSelection:!0,autoItemsHeight:!1,visualItems:[],groups:[],equalItemsWidth:!0,itemHeight:-1,visibleItems:[],emptyGroupText:"Group",checkboxes:!1,openDelay:250,closeDelay:300,dropDownContainer:"default",animationType:"default",autoOpen:!1,dropDownWidth:"auto",dropDownHeight:"200px",autoDropDownHeight:!1,keyboardSelection:!0,enableBrowserBoundsDetection:!1,dropDownHorizontalAlignment:"left",dropDownVerticalAlignment:"bottom",displayMember:"",valueMember:"",groupMember:"",searchMember:"",searchMode:"startswithignorecase",incrementalSearch:!0,incrementalSearchDelay:700,renderer:null,placeHolder:"",promptText:"Please Choose:",emptyString:"",rtl:!1,selectionRenderer:null,listBox:null,popupZIndex:2e3,renderMode:"default",touchMode:"auto",_checkForHiddenParent:!0,autoBind:!0,ready:null,focusable:!0,filterable:!1,filterHeight:27,filterPlaceHolder:"Looking for",filterDelay:100,hint:!0,template:"default",aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["open","close","select","unselect","change","checkChange","bindingComplete","itemAdd","itemRemove","itemUpdate"]};return this===n.jqx._jqxDropDownList.prototype?t:(n.extend(!0,this,t),t)},createInstance:function(){this.render()},render:function(){var t=this,s,h,f,p,w,e,l,o,c,i,k,a,v,u,r,b,y;if(t.width||(t.width=200),t.height||(t.height=25),t.host.addClass(t.toThemeProperty("jqx-dropdownlist")),s=t.element.nodeName.toLowerCase(),s=="select"||s=="ul"||s=="ol"?(t.field=t.element,t.field.className&&(t._className=t.field.className),h={title:t.field.title},h.id=t.field.id.length?t.field.id.replace(/[^\w]/g,"_")+"_jqxDropDownList":n.jqx.utilities.createId()+"_jqxDropDownList",f=n("<div><\/div>",h),t.width||(t.width=n(t.field).width()),t.height||(t.height=n(t.field).outerHeight()),f[0].style.cssText=t.field.style.cssText,n(t.field).hide().after(f),p=t.host.data(),t.host=f,t.host.data(p),t.element=f[0],t.element.id=t.field.id,t.field.id=h.id,t._className&&(t.host.addClass(t._className),n(t.field).removeClass(t._className)),t.field.tabIndex&&(w=t.field.tabIndex,t.field.tabIndex=-1,t.element.tabIndex=w),e=n.jqx.parseSourceTag(t.field),t.source=e.items,t.selectedIndex==-1&&(t.selectedIndex=e.index)):(t.host.find("li").length>0||t.host.find("option").length>0)&&(e=n.jqx.parseSourceTag(t.element),t.source=e.items),t.element.innerHTML="",t.isanimating=!1,t.id=t.element.id||n.jqx.utilities.createId(),t.host.attr("role","combobox"),n.jqx.aria(t,"aria-autocomplete","both"),n.jqx.aria(t,"aria-readonly",!1),l="<div style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropdownlistWrapper' style='overflow: hidden; outline: none; background-color: transparent; border: none; float: left; width:100%; height: 100%; position: relative;'><div id='dropdownlistContent' unselectable='on' style='outline: none; background-color: transparent; border: none; float: left; position: relative;'><\/div><div id='dropdownlistArrow' unselectable='on' style='background-color: transparent; border: none; float: right; position: relative;'><div unselectable='on'><\/div><\/div><\/div><\/div>",n.jqx._jqxListBox==null||n.jqx._jqxListBox==undefined)throw new Error("jqxDropDownList: Missing reference to jqxlistbox.js.");t.host.attr("tabindex")||t.host.attr("tabindex",0);b=t;t.touch=n.jqx.mobile.isTouchDevice();t.comboStructure=l;t.element.innerHTML=l;t.dropdownlistWrapper=n(t.element.firstChild.firstChild);t.dropdownlistArrow=n(t.dropdownlistWrapper[0].firstChild.nextSibling);t.arrow=n(t.dropdownlistArrow[0].firstChild);t.dropdownlistContent=n(t.dropdownlistWrapper[0].firstChild);t.dropdownlistContent.addClass(t.toThemeProperty("jqx-dropdownlist-content jqx-disableselect"));t.rtl&&t.dropdownlistContent.addClass(t.toThemeProperty("jqx-rtl jqx-dropdownlist-content-rtl"));t.addHandler(t.dropdownlistWrapper,"selectstart",function(){return!1});t.dropdownlistWrapper[0].id="dropdownlistWrapper"+t.element.id;t.dropdownlistArrow[0].id="dropdownlistArrow"+t.element.id;t.dropdownlistContent[0].id="dropdownlistContent"+t.element.id;t._addInput();o=n("<label><\/label");this.hint&&(o[0].innerHTML=this.placeHolder);o.addClass(t.toThemeProperty("jqx-input-label"));t.dropdownlistWrapper.append(o);t.label=o;c=n("<span><\/span>");t.dropdownlistWrapper.append(c);c.addClass(t.toThemeProperty("jqx-input-bar"));t.bar=c;t.bar.css("top",this.host.height());i=this;i.template&&(i.bar.addClass(i.toThemeProperty("jqx-"+i.template)),i.label.addClass(i.toThemeProperty("jqx-"+i.template)));t.promptText!="Please Choose:"&&(t.placeHolder=t.promptText);k=t.toThemeProperty("jqx-widget")+" "+t.toThemeProperty("jqx-dropdownlist-state-normal")+" "+t.toThemeProperty("jqx-rc-all")+" "+t.toThemeProperty("jqx-fill-state-normal");t.element.className+=" "+k;t._firstDiv=n(t.element.firstChild);try{a="listBox"+t.id;v=n(n.find("#"+a));v.length>0&&v.remove();n.jqx.aria(t,"aria-owns",a);n.jqx.aria(t,"aria-haspopup",!0);u=n("<div style='overflow: hidden; background-color: transparent; border: none; position: absolute;' id='listBox"+t.id+"'><div id='innerListBox"+t.id+"'><\/div><\/div>");u.hide();u.addClass("jqx-listbox-container");t.dropDownContainer=="element"?u.appendTo(t.host):u.appendTo(document.body);t.container=u;t.listBoxContainer=n(n.find("#innerListBox"+t.id));r=t.width;t.dropDownWidth!="auto"&&(r=t.dropDownWidth);r==null&&(r=t.host.width(),r==0&&(r=t.dropDownWidth));t.dropDownHeight==null&&(t.dropDownHeight=200);b=t;t.container.width(parseInt(r)+25);t.container.height(parseInt(t.dropDownHeight)+25);t._ready=!1;t.addHandler(t.listBoxContainer,"bindingComplete",function(){t.listBox||(t.listBox=n.data(t.listBoxContainer[0],"jqxListBox").instance);t.selectedIndex!=t.listBoxContainer.jqxListBox("selectedIndex")?(t.listBox=n.data(t.listBoxContainer[0],"jqxListBox").instance,t.listBoxContainer.jqxListBox({selectedIndex:t.selectedIndex}),t.renderSelection("mouse")):t.renderSelection("mouse");t._ready||(t.ready&&t.ready(),t._ready=!0);t._raiseEvent("6")});t.addHandler(t.listBoxContainer,"itemAdd",function(n){t._raiseEvent("7",n.args)});t.addHandler(t.listBoxContainer,"itemRemove",function(n){t._raiseEvent("8",n.args)});t.addHandler(t.listBoxContainer,"itemUpdate",function(n){t._raiseEvent("9",n.args)});t.listBoxContainer.jqxListBox({filterHeight:t.filterHeight,filterPlaceHolder:t.filterPlaceHolder,filterDelay:t.filterDelay,autoItemsHeight:t.autoItemsHeight,filterable:t.filterable,allowDrop:!1,allowDrag:!1,autoBind:t.autoBind,_checkForHiddenParent:!1,focusable:t.focusable,touchMode:t.touchMode,checkboxes:t.checkboxes,rtl:t.rtl,_renderOnDemand:!0,emptyString:t.emptyString,itemHeight:t.itemHeight,width:r,searchMode:t.searchMode,incrementalSearch:t.incrementalSearch,incrementalSearchDelay:t.incrementalSearchDelay,groupMember:t.groupMember,searchMember:t.searchMember,displayMember:t.displayMember,valueMember:t.valueMember,height:t.dropDownHeight,autoHeight:t.autoDropDownHeight,scrollBarSize:t.scrollBarSize,selectedIndex:t.selectedIndex,source:t.source,theme:t.theme,rendered:function(){t.selectedIndex!=t.listBoxContainer.jqxListBox("selectedIndex")?(t.listBox=n.data(t.listBoxContainer[0],"jqxListBox").instance,t.listBoxContainer.jqxListBox({selectedIndex:t.selectedIndex}),t.renderSelection("mouse")):t.renderSelection("mouse")},renderer:t.renderer,filterChange:function(){t.autoDropDownHeight&&t.container.height(t.listBoxContainer.height()+25)}});t.dropDownContainer==="element"?t.listBoxContainer.css({position:"absolute",top:0,left:0}):t.listBoxContainer.css({position:"absolute",zIndex:t.popupZIndex,top:0,left:0});t.template&&t.listBoxContainer.addClass(t.toThemeProperty("jqx-"+t.template+"-item"));t.listBox=n.data(t.listBoxContainer[0],"jqxListBox").instance;t.listBox.enableSelection=t.enableSelection;t.listBox.enableHover=t.enableHover;t.listBox.equalItemsWidth=t.equalItemsWidth;t.listBox.selectIndex(t.selectedIndex);t.listBox._arrange();t.listBoxContainer.addClass(t.toThemeProperty("jqx-popup"));n.jqx.browser.msie&&t.listBoxContainer.addClass(t.toThemeProperty("jqx-noshadow"));t.addHandler(t.listBoxContainer,"unselect",function(n){t._raiseEvent("3",{index:n.args.index,type:n.args.type,item:n.args.item})});t.addHandler(t.listBoxContainer,"change",function(n){n.args&&(n.args.type!="keyboard"?t._raiseEvent("4",{index:n.args.index,type:n.args.type,item:n.args.item}):n.args.type=="keyboard"&&(t.isOpened()||t._raiseEvent("4",{index:t.selectedIndex,type:"keyboard",item:t.getItem(t.selectedIndex)})))});t.animationType=="none"?t.container.css("display","none"):t.container.hide()}catch(d){console&&console.log(d)}t=t;t.propertyChangeMap.disabled=function(i,r,u,f){f?(i.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-disabled")),i.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")),i.dropdownlistContent.addClass(t.toThemeProperty("jqx-dropdownlist-content-disabled"))):(i.host.removeClass(t.toThemeProperty("jqx-dropdownlist-state-disabled")),i.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),i.dropdownlistContent.removeClass(t.toThemeProperty("jqx-dropdownlist-content-disabled")));n.jqx.aria(i,"aria-disabled",i.disabled)};t.disabled&&(t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-disabled")),t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")),t.dropdownlistContent.addClass(t.toThemeProperty("jqx-dropdownlist-content-disabled")));t.dropDownVerticalAlignment=="top"?t.arrow.addClass(t.toThemeProperty("jqx-icon-arrow-up")):t.arrow.addClass(t.toThemeProperty("jqx-icon-arrow-down"));t.arrow.addClass(t.toThemeProperty("jqx-icon"));t.renderMode==="simple"&&(t.arrow.remove(),t.host.removeClass(t.toThemeProperty("jqx-fill-state-normal")),t.host.removeClass(t.toThemeProperty("jqx-rc-all")));t.template&&t.host.addClass(t.toThemeProperty("jqx-"+t.template));t._updateHandlers();t._setSize();t._arrange();t.listBox&&t.renderSelection();n.jqx.browser.msie&&n.jqx.browser.version<8&&t.host.parents(".jqx-window").length>0&&(y=t.host.parents(".jqx-window").css("z-index"),u.css("z-index",y+10),t.listBoxContainer.css("z-index",y+10))},resize:function(n,t){this.width=n;this.height=t;this._setSize();this._arrange()},val:function(n){var i,t;return this.dropdownlistContent?(i=function(t){for(var i in t)if(t.hasOwnProperty(i))return!1;return typeof n=="number"?!1:typeof n=="date"?!1:typeof n=="boolean"?!1:typeof n=="string"?!1:!0},this.input&&(i(n)||arguments.length==0))?this.input.val():(t=this.getItemByValue(n),t!=null&&this.selectItem(t),this.input?this.input.val():void 0):""},focus:function(){try{var n=this,t=function(){n.host&&(n.host.focus(),n._firstDiv&&n._firstDiv.focus())};t();setTimeout(function(){t()},10)}catch(i){}},_addInput:function(){var t=this.host.attr("name");this.input=n("<input type='hidden'/>");this.host.append(this.input);t&&this.input.attr("name",t)},getItems:function(){return this.listBox?this.listBox.items:[]},getVisibleItems:function(){return this.listBox.getVisibleItems()},_setSize:function(){var f=window.getComputedStyle(this.element),t=parseInt(f.borderLeftWidth)*2,o=f.boxSizing,r,i,e,u;this.element.offsetWidth===0&&(t=2);(o==="border-box"||isNaN(t))&&(t=0);this.width!=null&&this.width.toString().indexOf("px")!=-1?this.element.style.width=parseInt(this.width)-t+"px":this.width==undefined||isNaN(this.width)||(this.element.style.width=parseInt(this.width)-t+"px");this.height!=null&&this.height.toString().indexOf("px")!=-1?this.element.style.height=parseInt(this.height)-t+"px":this.height==undefined||isNaN(this.height)||(this.element.style.height=parseInt(this.height)-t+"px");r=!1;this.width!=null&&this.width.toString().indexOf("%")!=-1&&(r=!0,this.element.style.width=this.width,t>0&&(this.host.css("box-sizing","border-box"),this.listBoxContainer.css("box-sizing","border-box")));this.height!=null&&this.height.toString().indexOf("%")!=-1&&(r=!0,this.element.style.height=this.height);i=this;e=function(){if(i._arrange(),i.dropDownWidth=="auto"){var n=i.host.width()+2;i.listBoxContainer.jqxListBox({width:n});i.container.width(parseInt(n)+25)}};r&&(u=this.host.width()+2,this.dropDownWidth!="auto"&&(u=this.dropDownWidth),this.listBoxContainer.jqxListBox({width:u}),this.container.width(parseInt(u)+25));n.jqx.utilities.resize(this.host,function(){e()},!1,this._checkForHiddenParent)},isOpened:function(){var i=this,t=n.data(document.body,"openedJQXListBox"+this.id);return t!=null&&t==i.listBoxContainer?!0:!1},_updateHandlers:function(){var t=this,r=!1,i;if(this.removeHandlers(),this.touch||(this.addHandler(this.host,"mouseenter",function(){!t.disabled&&t.enableHover&&t.renderMode!=="simple"&&(r=!0,t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-hover")),t.dropDownVerticalAlignment=="top"?t.arrow.addClass(t.toThemeProperty("jqx-icon-arrow-up-hover")):t.arrow.addClass(t.toThemeProperty("jqx-icon-arrow-down-hover")),t.host.addClass(t.toThemeProperty("jqx-fill-state-hover")))}),this.addHandler(this.host,"mouseleave",function(){!t.disabled&&t.enableHover&&t.renderMode!=="simple"&&(t.host.removeClass(t.toThemeProperty("jqx-dropdownlist-state-hover")),t.host.removeClass(t.toThemeProperty("jqx-fill-state-hover")),t.arrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down-hover")),t.arrow.removeClass(t.toThemeProperty("jqx-icon-arrow-up-hover")),r=!1)})),this.host.parents()&&this.addHandler(this.host.parents(),"scroll.dropdownlist"+this.element.id,function(){var n=t.isOpened();n&&t.close()}),i="mousedown",this.touch&&(i=n.jqx.mobile.getTouchEventName("touchstart")),this.addHandler(this.dropdownlistWrapper,i,function(n){if(!t.disabled){var i=t.container.css("display")=="block";if(!t.isanimating){if(i)return t.hideListBox(),!1;t.showListBox();t.focusable?t.focus():n.preventDefault&&n.preventDefault()}}}),t.autoOpen){this.addHandler(this.host,"mouseenter",function(){var n=t.isOpened();!n&&t.autoOpen&&(t.open(),t.host.focus())});n(document).on("mousemove."+t.id,function(n){var s=t.isOpened();if(s&&t.autoOpen){var i=t.host.coord(),r=i.top,u=i.left,f=t.container.coord(),e=f.left,o=f.top;canClose=!0;n.pageY>=r&&n.pageY<=r+t.host.height()&&n.pageX>=u&&n.pageX<u+t.host.width()&&(canClose=!1);n.pageY>=o&&n.pageY<=o+t.container.height()&&n.pageX>=e&&n.pageX<e+t.container.width()&&(canClose=!1);canClose&&t.close()}})}this.touch?this.addHandler(n(document),n.jqx.mobile.getTouchEventName("touchstart")+"."+this.id,t.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.id}):this.addHandler(n(document),"mousedown."+this.id,t.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.id});this.addHandler(this.host,"keydown",function(n){var i=t.container.css("display")=="block";if(t.host.css("display")=="none")return!0;if((n.keyCode=="13"||n.keyCode=="9")&&!t.isanimating)return(i&&(t.renderSelection(),n.keyCode=="13"&&t.focusable&&t._firstDiv.focus(),t.hideListBox(),t.keyboardSelection||t._raiseEvent("2",{index:t.selectedIndex,type:"keyboard",item:t.getItem(t.selectedIndex)}),n.keyCode=="13"&&t._raiseEvent("4",{index:t.selectedIndex,type:"keyboard",item:t.getItem(t.selectedIndex)})),i&&n.keyCode!="9")?!1:!0;if(n.keyCode==115)return t.isanimating||(t.isOpened()?t.isOpened()&&t.hideListBox():t.showListBox()),!1;if(n.altKey&&t.host.css("display")=="block")if(n.keyCode==38){if(t.isOpened())return t.hideListBox(),!0}else if(n.keyCode==40&&!t.isOpened())return t.showListBox(),!0;return n.keyCode=="27"&&!t.ishiding?(t.isOpened()&&(t.hideListBox(),t.tempSelectedIndex!=undefined&&t.selectIndex(t.tempSelectedIndex)),!0):t.disabled?void 0:(t._kbnavigated=t.listBox._handleKeyDown(n),t._kbnavigated)});this.addHandler(this.listBoxContainer,"checkChange",function(n){t.renderSelection();t._updateInputSelection();t._raiseEvent(5,{label:n.args.label,value:n.args.value,checked:n.args.checked,item:n.args.item})});this.addHandler(this.listBoxContainer,"select",function(n){if(!t.disabled){if(!n.args)return;n.args.type!="keyboard"||t.isOpened()||t.renderSelection();(n.args.type!="keyboard"||t.keyboardSelection)&&(t.renderSelection(),t._raiseEvent("2",{index:n.args.index,type:n.args.type,item:n.args.item,originalEvent:n.args.originalEvent}),n.args.type=="mouse"&&(t.checkboxes||(t.hideListBox(),t._firstDiv&&t.focusable&&t._firstDiv.focus())))}});this.listBox&&this.listBox.content&&this.addHandler(this.listBox.content,"click",function(n){if(!t.disabled){if(t.listBox.itemswrapper&&n.target===t.listBox.itemswrapper[0])return!0;t.renderSelection("mouse");t.touch||t.ishiding||t.checkboxes||(t.hideListBox(),t._firstDiv&&t.focusable&&t._firstDiv.focus());t.keyboardSelection||(t._kbnavigated===!1&&(t.tempSelectedIndex!=t.selectedIndex&&t._raiseEvent("4",{index:t.selectedIndex,type:"mouse",item:t.getItem(t.selectedIndex)}),t._kbnavigated=!0),t._oldSelectedInd==undefined&&(t._oldSelectedIndx=t.selectedIndex),t.selectedIndex!=t._oldSelectedIndx&&(t._raiseEvent("2",{index:t.selectedIndex,type:"keyboard",item:t.getItem(t.selectedIndex)}),t._oldSelectedIndx=t.selectedIndex))}});this.addHandler(this.host,"focus",function(){t.renderMode!=="simple"&&(t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-focus")),t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")));t.bar.addClass("focused");t.label.addClass("focused")});this.addHandler(this.host,"blur",function(){t.renderMode!=="simple"&&(t.host.removeClass(t.toThemeProperty("jqx-dropdownlist-state-focus")),t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")));t.bar.removeClass("focused");t.label.removeClass("focused")});this.addHandler(this._firstDiv,"focus",function(){t.renderMode!=="simple"&&(t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-focus")),t.host.addClass(t.toThemeProperty("jqx-fill-state-focus")));t.bar.addClass("focused");t.label.addClass("focused")});this.addHandler(this._firstDiv,"blur",function(){t.renderMode!=="simple"&&(t.host.removeClass(t.toThemeProperty("jqx-dropdownlist-state-focus")),t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")));t.bar.removeClass("focused");t.label.removeClass("focused")})},removeHandlers:function(){var i=this,t="mousedown";this.touch&&(t=n.jqx.mobile.getTouchEventName("touchstart"));this.removeHandler(this.dropdownlistWrapper,t);this.listBox&&this.listBox.content&&this.removeHandler(this.listBox.content,"click");this.removeHandler(this.host,"loadContent");this.removeHandler(this.listBoxContainer,"checkChange");this.removeHandler(this.host,"keydown");this.removeHandler(this.host,"focus");this.removeHandler(this.host,"blur");this.removeHandler(this._firstDiv,"focus");this.removeHandler(this._firstDiv,"blur");this.removeHandler(this.host,"mouseenter");this.removeHandler(this.host,"mouseleave");this.removeHandler(n(document),"mousemove."+i.id)},getItem:function(n){return this.listBox.getItem(n)},getItemByValue:function(n){return this.listBox.getItemByValue(n)},selectItem:function(n){this.listBox!=undefined&&(this.listBox.selectItem(n),this.selectedIndex=this.listBox.selectedIndex,this.renderSelection("mouse"))},unselectItem:function(n){this.listBox!=undefined&&(this.listBox.unselectItem(n),this.renderSelection("mouse"))},checkItem:function(n){this.listBox!=undefined&&this.listBox.checkItem(n)},uncheckItem:function(n){this.listBox!=undefined&&this.listBox.uncheckItem(n)},indeterminateItem:function(n){this.listBox!=undefined&&this.listBox.indeterminateItem(n)},renderSelection:function(){var i,w,b,y,k,a,t,v,g,f,r,e,h,c,p,s,l,o,u;if(this.listBox!=null){if(this.height&&this.height.toString().indexOf("%")!=-1&&this._arrange(),i=this.listBox.visibleItems[this.listBox.selectedIndex],this.filterable&&this.listBox.selectedIndex==-1)for(w in this.listBox.selectedValues)b=this.listBox.selectedValues[w],y=this.listBox.getItemByValue(b),y&&(i=y);if(k=this,this.checkboxes&&(a=this.getCheckedItems(),i=a!=null&&a.length>0?a[0]:null),this.hint&&(this.label&&(this.label[0].innerHTML=this.placeHolder),i!=null?this.element.setAttribute("hint",!0):this.element.removeAttribute("hint")),this.bar.css("top",this.host.height()),i==null){t=n('<span unselectable="on" style="color: inherit; border: none; background-color: transparent;"><\/span>');t.appendTo(n(document.body));t.addClass(this.toThemeProperty("jqx-widget"));t.addClass(this.toThemeProperty("jqx-listitem-state-normal"));t.addClass(this.toThemeProperty("jqx-item"));n.jqx.utilities.html(t,this.placeHolder);this.isMaterialized()&&!this.element.getAttribute("default-placeholder")&&this.hint&&(t[0].innerHTML="",this.label&&(this.label[0].innerHTML=this.placeHolder));f=this.dropdownlistContent.css("padding-top");r=this.dropdownlistContent.css("padding-bottom");t.css("padding-top",f);t.css("padding-bottom",r);e=t.outerHeight();t.remove();t.removeClass();n.jqx.utilities.html(this.dropdownlistContent,t);o=this.host.height();this.height!=null&&this.height!=undefined&&this.height.toString().indexOf("%")===-1&&(o=parseInt(this.height));u=parseInt((parseInt(o)-parseInt(e))/2);u>0&&(this.dropdownlistContent.css("margin-top",u+"px"),this.dropdownlistContent.css("margin-bottom",u+"px"));this.selectionRenderer?(n.jqx.utilities.html(this.dropdownlistContent,this.selectionRenderer(t,-1,"","")),this.dropdownlistContent.css("margin-top","0px"),this.dropdownlistContent.css("margin-bottom","0px"),this._updateInputSelection()):this._updateInputSelection();this.selectedIndex=this.listBox.selectedIndex;this.width==="auto"&&this._arrange();this.focusable&&this.isOpened()&&this.focus();return}this.selectedIndex=this.listBox.selectedIndex;t=n(document.createElement("span"));t[0].setAttribute("unselectable","on");try{t[0].style.color="inherit"}catch(nt){}t[0].style.borderWidth="0px";t[0].style.backgroundColor="transparent";t.appendTo(n(document.body));t.addClass(this.toThemeProperty("jqx-widget jqx-listitem-state-normal jqx-item"));v=!1;try{i.html!=undefined&&i.html!=null&&i.html.toString().length>0?n.jqx.utilities.html(t,i.html):i.label!=undefined&&i.label!=null&&i.label.toString().length>0?n.jqx.utilities.html(t,i.label):i.label===null||i.label===""?(v=!0,n.jqx.utilities.html(t,"")):i.value!=undefined&&i.value!=null&&i.value.toString().length>0?n.jqx.utilities.html(t,i.value):i.title!=undefined&&i.title!=null&&i.title.toString().length>0?n.jqx.utilities.html(t,i.title):(i.label==""||i.label==null)&&(v=!0,n.jqx.utilities.html(t,""))}catch(d){g=d}if(f=this.dropdownlistContent[0].style.paddingTop,r=this.dropdownlistContent[0].style.paddingBottom,f===""&&(f="0px"),r===""&&(r="0px"),t[0].style.paddingTop=f,t[0].style.paddingBottom=r,e=t.outerHeight(),e===0&&(e=16),(i.label==""||i.label==null)&&v&&n.jqx.utilities.html(t,""),h=this.width&&this.width.toString().indexOf("%")<=0,t.remove(),t.removeClass(),this.selectionRenderer)n.jqx.utilities.html(this.dropdownlistContent,this.selectionRenderer(t,i.index,i.label,i.value)),this.focusable&&this.isOpened()&&this.focus();else if(this.checkboxes){for(c=this.getCheckedItems(),p="",s=0;s<c.length;s++)p+=s==c.length-1?c[s].label:c[s].label+",";t.text(p);h&&t.css("max-width",this.host.width()-30);t.css("overflow","hidden");t.css("display","block");this.rtl||h&&t.css("width",this.host.width()-30);t.css("text-overflow","ellipsis");t.css("padding-bottom",1+parseInt(r));this.dropdownlistContent.html(t);this.focusable&&this.isOpened()&&this.focus()}else l=this.host.width()-this.arrowSize-1,this.width&&this.width!=="auto"&&(h&&(this.rtl||t.css("max-width",l+"px")),t[0].style.overflow="hidden",t[0].style.display="block",t[0].style.paddingTop=1+parseInt(r)+"px",this.rtl||h&&(l<0&&(l=0),t[0].style.width=l+"px"),t[0].style.textOverflow="ellipsis"),this.dropdownlistContent[0].innerHTML=t[0].innerHTML,this.focusable&&this.isOpened()&&this.focus();o=this.host.height();this.height!=null&&this.height!=undefined&&this.height.toString().indexOf("%")===-1&&(o=parseInt(this.height));u=parseInt((parseInt(o)-parseInt(e))/2);u>=0&&(this.dropdownlistContent[0].style.marginTop=u+"px",this.dropdownlistContent[0].style.marginBottom=u+"px");this.selectionRenderer&&(this.dropdownlistContent[0].style.marginTop="0px",this.dropdownlistContent[0].style.marginBottom="0px");this.dropdownlistContent&&this.input&&this._updateInputSelection();this.listBox&&this.listBox._activeElement&&n.jqx.aria(this,"aria-activedescendant",this.listBox._activeElement.id);this.width==="auto"&&this._arrange()}},_updateInputSelection:function(){var t,f,i,e,r,u;if(this.input&&(t=[],this.selectedIndex==-1?this.input.val(""):(f=this.getSelectedItem(),f!=null?(this.input.val(f.value),t.push(f.value)):this.input.val(this.dropdownlistContent.text())),this.checkboxes)){if(i=this.getCheckedItems(),e="",i!=null)for(r=0;r<i.length;r++)(u=i[r].value,u!=undefined)&&(e+=r==i.length-1?u:u+",",t.push(u));this.input.val(e)}this.field&&this.input&&(this.field.nodeName.toLowerCase()=="select"?n.each(this.field,function(){n(this).removeAttr("selected");this.selected=t.indexOf(this.value)>=0;this.selected&&n(this).attr("selected",!0)}):n.each(this.items,function(){n(this.originalItem.originalItem).removeAttr("data-selected");this.selected=t.indexOf(this.value)>=0;this.selected&&n(this.originalItem.originalItem).attr("data-selected",!0)}))},setContent:function(t){n.jqx.utilities.html(this.dropdownlistContent,t);this._updateInputSelection()},dataBind:function(){this.listBoxContainer.jqxListBox({source:this.source});this.renderSelection("mouse");this.source==null&&this.clearSelection()},clear:function(){this.listBoxContainer.jqxListBox({source:null});this.clearSelection()},clearSelection:function(){this.selectedIndex=-1;this._updateInputSelection();this.listBox.clearSelection();this.renderSelection();this.selectionRenderer||this.hint||this.isMaterialized()||n.jqx.utilities.html(this.dropdownlistContent,this.placeHolder)},unselectIndex:function(n,t){isNaN(n)||(this.listBox.unselectIndex(n,t),this.renderSelection())},selectIndex:function(n,t,i,r){this.listBox.selectIndex(n,t,i,r,"api")},getSelectedIndex:function(){return this.selectedIndex},getSelectedItem:function(){return this.listBox.getVisibleItem(this.selectedIndex)},getCheckedItems:function(){return this.listBox.getCheckedItems()},checkIndex:function(n){this.listBox.checkIndex(n)},uncheckIndex:function(n){this.listBox.uncheckIndex(n)},indeterminateIndex:function(n){this.listBox.indeterminateIndex(n)},checkAll:function(){this.listBox.checkAll();this.renderSelection("mouse")},uncheckAll:function(){this.listBox.uncheckAll();this.renderSelection("mouse")},addItem:function(n){return this.listBox.addItem(n)},insertAt:function(n,t){return n==null?!1:this.listBox.insertAt(n,t)},removeAt:function(n){var t=this.listBox.removeAt(n);return this.renderSelection("mouse"),t},removeItem:function(n){var t=this.listBox.removeItem(n);return this.renderSelection("mouse"),t},updateItem:function(n,t){var i=this.listBox.updateItem(n,t);return this.renderSelection("mouse"),i},updateAt:function(n,t){var i=this.listBox.updateAt(n,t);return this.renderSelection("mouse"),i},ensureVisible:function(n){return this.listBox.ensureVisible(n)},disableAt:function(n){return this.listBox.disableAt(n)},enableAt:function(n){return this.listBox.enableAt(n)},disableItem:function(n){return this.listBox.disableItem(n)},enableItem:function(n){return this.listBox.enableItem(n)},_findPos:function(t){while(t&&(t.type=="hidden"||t.nodeType!=1||n.expr.filters.hidden(t)))t=t.nextSibling;var i=n(t).coord(!0);return[i.left,i.top]},testOffset:function(t,i,r){var u=t.outerWidth(),f=t.outerHeight(),h=n(window).width()+n(window).scrollLeft(),e=n(window).height()+n(window).scrollTop(),o,s;return i.left+u>h&&u>this.host.width()&&(o=this.host.coord().left,s=u-this.host.width(),i.left=o-s+2),i.left<0&&(i.left=parseInt(this.host.coord().left)+"px"),i.top-=Math.min(i.top,i.top+f>e&&e>f?Math.abs(f+r+22):0),i},open:function(){this.showListBox()},close:function(){this.hideListBox()},_getBodyOffset:function(){var t=0,i=0;return n("body").css("border-top-width")!="0px"&&(t=parseInt(n("body").css("border-top-width")),isNaN(t)&&(t=0)),n("body").css("border-left-width")!="0px"&&(i=parseInt(n("body").css("border-left-width")),isNaN(i)&&(i=0)),{left:i,top:t}},showListBox:function(){var f,c,b,o,l,a,y,p,w,s,v;n.jqx.aria(this,"aria-expanded",!0);this.listBox._renderOnDemand&&this.listBoxContainer.jqxListBox({_renderOnDemand:!1});this.dropDownWidth=="auto"&&this.width!=null&&this.width.indexOf&&(this.width.indexOf("%")!=-1||this.width.indexOf("auto")!=-1)&&this.listBox.host.width()!=this.host.width()&&(f=this.element.offsetWidth,this.listBoxContainer.jqxListBox({width:f}),this.container.width(parseInt(f)+25));this.dropDownWidth=="auto"&&this.host.css("border-left-width")==="0px"&&(f=this.element.offsetWidth,this.listBoxContainer.jqxListBox({width:f+1}),this.container.width(parseInt(f)+25));var i=this,t=this.listBoxContainer,r=this.listBox,k=n(window).scrollTop(),d=n(window).scrollLeft(),u=parseInt(this._findPos(this.host[0])[1])+parseInt(this.host.outerHeight())-1+"px",e,h=parseInt(Math.round(this.host.coord(!0).left));(e=h+"px",this.dropDownContainer==="element"&&(u=parseInt(this.host.outerHeight())-1+"px",e=0),c=n.jqx.mobile.isSafariMobileBrowser()||n.jqx.mobile.isWindowsPhone(),this.listBox!=null)&&(this.ishiding=!1,this.keyboardSelection||(this.listBox.selectIndex(this.selectedIndex),this.listBox.ensureVisible(this.selectedIndex)),this.tempSelectedIndex=this.selectedIndex,this.autoDropDownHeight&&this.container.height(this.listBoxContainer.height()+25),c!=null&&c&&(e=n.jqx.mobile.getLeftPos(this.element),u=n.jqx.mobile.getTopPos(this.element)+parseInt(this.host.outerHeight()),n("body").css("border-top-width")!="0px"&&(u=parseInt(u)-this._getBodyOffset().top+"px"),n("body").css("border-left-width")!="0px"&&(e=parseInt(e)-this._getBodyOffset().left+"px")),t.stop(),this.renderMode!=="simple"&&(this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-selected")),this.host.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.dropDownVerticalAlignment=="top"?this.arrow.addClass(this.toThemeProperty("jqx-icon-arrow-up-selected")):this.arrow.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected"))),this.container.css("left",e),this.container.css("top",u),r._arrange(),b=!0,o=!1,(this.dropDownHorizontalAlignment=="right"||this.rtl)&&(l=this.container.outerWidth(),a=-2+Math.abs(l-this.host.width()),l>this.host.width()?this.container.css("left",25+parseInt(Math.round(h))-a+"px"):this.container.css("left",25+parseInt(Math.round(h))+a+"px")),this.dropDownVerticalAlignment=="top"&&(y=t.height(),o=!0,t.css("top",23),t.addClass(this.toThemeProperty("jqx-popup-up")),p=parseInt(this.host.outerHeight()),w=parseInt(u)-Math.abs(y+p+23),this.container.css("top",w)),this.enableBrowserBoundsDetection&&(s=this.testOffset(t,{left:parseInt(this.container.css("left")),top:parseInt(u)},parseInt(this.host.outerHeight())),parseInt(this.container.css("top"))!=s.top?(o=!0,t.css("top",23),t.addClass(this.toThemeProperty("jqx-popup-up"))):t.css("top",0),this.container.css("top",s.top),parseInt(this.container.css("left"))!=s.left&&this.container.css("left",s.left)),this.animationType=="none"?(this.container.css("display","block"),n.data(document.body,"openedJQXListBoxParent",i),n.data(document.body,"openedJQXListBox"+this.id,t),t.css("margin-top",0),t.css("opacity",1),r._renderItems(),i._raiseEvent("0",r)):(this.container.css("display","block"),i.isanimating=!0,this.animationType=="fade"?(t.css("margin-top",0),t.css("opacity",0),t.animate({opacity:1},this.openDelay,function(){n.data(document.body,"openedJQXListBoxParent",i);n.data(document.body,"openedJQXListBox"+i.id,t);i.ishiding=!1;i.isanimating=!1;r._renderItems();i._raiseEvent("0",r)})):(t.css("opacity",1),v=t.outerHeight(),o?t.css("margin-top",v):t.css("margin-top",-v),t.animate({"margin-top":0},this.openDelay,function(){n.data(document.body,"openedJQXListBoxParent",i);n.data(document.body,"openedJQXListBox"+i.id,t);i.ishiding=!1;i.isanimating=!1;r._renderItems();i._raiseEvent("0",r)}))),o?(this.host.addClass(this.toThemeProperty("jqx-rc-t-expanded")),t.addClass(this.toThemeProperty("jqx-rc-b-expanded"))):(this.host.addClass(this.toThemeProperty("jqx-rc-b-expanded")),t.addClass(this.toThemeProperty("jqx-rc-t-expanded"))),this.renderMode!=="simple"&&(t.addClass(this.toThemeProperty("jqx-fill-state-focus")),this.host.addClass(this.toThemeProperty("jqx-dropdownlist-state-focus")),this.host.addClass(this.toThemeProperty("jqx-fill-state-focus"))),this.element.setAttribute("opened",!0))},hideListBox:function(){var r,u;n.jqx.aria(this,"aria-expanded",!1);var t=this.listBoxContainer,e=this.listBox,f=this.container,i=this;this.element.removeAttribute("opened");n.data(document.body,"openedJQXListBox"+this.id,null);this.animationType=="none"?this.container.css("display","none"):i.ishiding||(t.stop(),r=t.outerHeight(),t.css("margin-top",0),i.isanimating=!0,u=-r,parseInt(this.container.coord().top)<parseInt(this.host.coord().top)&&(u=r),this.animationType=="fade"?(t.css({opacity:1}),t.animate({opacity:0},this.closeDelay,function(){f.css("display","none");i.isanimating=!1;i.ishiding=!1})):t.animate({"margin-top":u},this.closeDelay,function(){f.css("display","none");i.isanimating=!1;i.ishiding=!1}));this.ishiding=!0;this.host.removeClass(this.toThemeProperty("jqx-dropdownlist-state-selected"));this.host.removeClass(this.toThemeProperty("jqx-fill-state-pressed"));this.arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected"));this.arrow.removeClass(this.toThemeProperty("jqx-icon-arrow-up-selected"));this.host.removeClass(this.toThemeProperty("jqx-rc-b-expanded"));t.removeClass(this.toThemeProperty("jqx-rc-t-expanded"));this.host.removeClass(this.toThemeProperty("jqx-rc-t-expanded"));t.removeClass(this.toThemeProperty("jqx-rc-b-expanded"));t.removeClass(this.toThemeProperty("jqx-fill-state-focus"));this.host.removeClass(this.toThemeProperty("jqx-dropdownlist-state-focus"));this.host.removeClass(this.toThemeProperty("jqx-fill-state-focus"));this._raiseEvent("1",e)},closeOpenedListBox:function(t){var i=t.data.me,f=n(t.target),u=t.data.listbox,e,r;return u==null?!0:n(t.target).ischildof(t.data.me.host)?!0:i.isOpened()?n(t.target).ischildof(i.listBoxContainer)?!0:(e=i,r=!1,n.each(f.parents(),function(){if(this.className!="undefined"&&this.className.indexOf){if(this.className.indexOf("jqx-listbox")!=-1)return r=!0,!1;if(this.className.indexOf("jqx-dropdownlist")!=-1)return i.element.id==this.id&&(r=!0),!1}}),u!=null&&!r&&i.isOpened()&&i.hideListBox(),!0):!0},clearFilter:function(){this.listBox.clearFilter()},loadFromSelect:function(n){this.listBox.loadFromSelect(n)},refresh:function(n){n!==!0&&(this._setSize(),this._arrange(),this.listBox&&this.renderSelection())},_arrange:function(){var n=this,t=parseInt(n.host.width()),u=parseInt(n.host.height()),s=n.arrowSize,i=n.arrowSize,f=3,r=t-i-2*f,e,o;r>0&&n.width!=="auto"?n.dropdownlistContent[0].style.width=r+"px":r<=0&&(n.dropdownlistContent[0].style.width="0px");n.width==="auto"&&(n.dropdownlistContent.css("width","auto"),t=2+n.dropdownlistContent.width()+i+2*f,t<47&&(t=47),n.host.width(t));n.dropdownlistContent[0].style.height=u+"px";n.dropdownlistContent[0].style.left="0px";n.dropdownlistContent[0].style.top="0px";n.dropdownlistArrow[0].style.width=i+"px";n.width&&n.width.toString().indexOf("%")>=0&&(e=i*100/t,o=r*100/t,n.dropdownlistArrow[0].style.width=e+"%",n.dropdownlistContent[0].style.width=o+"%");n.dropdownlistArrow[0].style.height=u+"px";n.rtl&&(n.dropdownlistArrow.css("float","left"),n.dropdownlistContent.css("float","right"))},destroy:function(){n.jqx.utilities.resize(this.host,null,!0);this.removeHandler(this.listBoxContainer,"select");this.removeHandler(this.listBoxContainer,"unselect");this.removeHandler(this.listBoxContainer,"change");this.removeHandler(this.dropdownlistWrapper,"selectstart");this.removeHandler(this.dropdownlistWrapper,"mousedown");this.removeHandler(this.host,"keydown");this.removeHandler(this.listBoxContainer,"select");this.removeHandler(this.listBox.content,"click");this.removeHandler(this.listBoxContainer,"bindingComplete");this.host.parents()&&this.removeHandler(this.host.parents(),"scroll.dropdownlist"+this.element.id);this.removeHandlers();this.listBoxContainer.jqxListBox("destroy");this.listBoxContainer.remove();this.host.removeClass();this.removeHandler(n(document),"mousedown."+this.id,this.closeOpenedListBox);this.touch&&this.removeHandler(n(document),n.jqx.mobile.getTouchEventName("touchstart")+"."+this.id);this.dropdownlistArrow.remove();delete this.dropdownlistArrow;delete this.dropdownlistWrapper;delete this.listBoxContainer;delete this.input;delete this.arrow;delete this.dropdownlistContent;delete this.listBox;delete this._firstDiv;this.container.remove();delete this.container;var t=n.data(this.element,"jqxDropDownList");t&&delete t.instance;this.host.removeData();this.host.remove();delete this.comboStructure;delete this.host;delete this.element},_raiseEvent:function(t,i){var u,r;return i==undefined&&(i={owner:null}),u=this.events[t],args=i,args.owner=this,r=new n.Event(u),r.owner=this,(t==2||t==3||t==4||t==5||t==6||t==7||t==8||t==9)&&(r.args=i),this.host.trigger(r)},propertiesChangedHandler:function(n,t,i){if(i.width&&i.height&&Object.keys(i).length==2){if(n._setSize(),t=="width"&&n.dropDownWidth=="auto"){var r=n.host.width();n.listBoxContainer.jqxListBox({width:r});n.container.width(parseInt(r)+25)}n._arrange();n.close()}},propertyChangedHandler:function(t,i,r,u){var f;t.isInitialized!=undefined&&t.isInitialized!=!1&&(t.batchUpdate&&t.batchUpdate.width&&t.batchUpdate.height&&Object.keys(t.batchUpdate).length==2||(i=="template"&&(t.listBoxContainer.removeClass(t.toThemeProperty("jqx-"+r+"-item")),t.listBoxContainer.addClass(t.toThemeProperty("jqx-"+t.template+"-item")),t.host.removeClass(t.toThemeProperty("jqx-"+r+"")),t.host.addClass(t.toThemeProperty("jqx-"+t.template+""))),i=="dropDownVerticalAlignment"&&(t.close(),t.arrow.removeClass(t.toThemeProperty("jqx-icon-arrow-up")),t.arrow.removeClass(t.toThemeProperty("jqx-icon-arrow-down")),t.dropDownVerticalAlignment=="top"?t.arrow.addClass(t.toThemeProperty("jqx-icon-arrow-up")):t.arrow.addClass(t.toThemeProperty("jqx-icon-arrow-down")),t.listBoxContainer.css("top",0),t.listBoxContainer.removeClass(this.toThemeProperty("jqx-popup-up"))),i=="autoItemsHeight"&&t.listBoxContainer.jqxListBox({autoItemsHeight:u}),i=="filterable"&&t.listBoxContainer.jqxListBox({filterable:u}),i=="filterHeight"&&t.listBoxContainer.jqxListBox({filterHeight:u}),i=="filterPlaceHolder"&&t.listBoxContainer.jqxListBox({filterPlaceHolder:u}),i=="filterDelay"&&t.listBoxContainer.jqxListBox({filterDelay:u}),i=="enableSelection"&&t.listBoxContainer.jqxListBox({enableSelection:u}),i=="enableHover"&&t.listBoxContainer.jqxListBox({enableHover:u}),i=="autoOpen"&&t._updateHandlers(),i=="emptyString"&&(t.listBox.emptyString=t.emptyString),i=="itemHeight"&&t.listBoxContainer.jqxListBox({itemHeight:u}),i=="renderer"&&t.listBoxContainer.jqxListBox({renderer:u}),i=="rtl"&&(u?(t.dropdownlistArrow.css("float","left"),t.dropdownlistContent.css("float","right")):(t.dropdownlistArrow.css("float","right"),t.dropdownlistContent.css("float","left")),t.listBoxContainer.jqxListBox({rtl:t.rtl})),i=="source"&&(t.listBoxContainer.jqxListBox({source:t.source}),t.listBox.selectedIndex=-1,t.listBox.selectIndex(this.selectedIndex),t.renderSelection(),u==null&&t.clear()),(i=="displayMember"||i=="valueMember")&&(t.listBoxContainer.jqxListBox({displayMember:t.displayMember,valueMember:t.valueMember}),t.renderSelection()),i=="placeHolder"&&t.renderSelection(),i=="theme"&&u!=null&&(t.listBoxContainer.jqxListBox({theme:u}),t.listBoxContainer.addClass(t.toThemeProperty("jqx-popup")),n.jqx.utilities.setTheme(r,u,t.host)),i=="autoDropDownHeight"&&(t.listBoxContainer.jqxListBox({autoHeight:t.autoDropDownHeight}),t.autoDropDownHeight?t.container.height(t.listBoxContainer.height()+25):(t.listBoxContainer.jqxListBox({height:t.dropDownHeight}),t.container.height(parseInt(t.dropDownHeight)+25)),t.listBox._arrange(),t.listBox._updatescrollbars()),i=="searchMode"&&t.listBoxContainer.jqxListBox({searchMode:t.searchMode}),i=="incrementalSearch"&&t.listBoxContainer.jqxListBox({incrementalSearch:t.incrementalSearch}),i=="incrementalSearchDelay"&&t.listBoxContainer.jqxListBox({incrementalSearchDelay:t.incrementalSearchDelay}),i=="dropDownHeight"&&(t.autoDropDownHeight||(t.listBoxContainer.jqxListBox({height:t.dropDownHeight}),t.container.height(parseInt(t.dropDownHeight)+25))),(i=="dropDownWidth"||i=="scrollBarSize")&&(f=t.width,t.dropDownWidth!="auto"&&(f=t.dropDownWidth),t.listBoxContainer.jqxListBox({width:f,scrollBarSize:t.scrollBarSize}),t.container.width(parseInt(f)+25)),(i=="width"||i=="height")&&u!=r&&(this.refresh(),i=="width"&&t.dropDownWidth=="auto"&&(f=2+t.host.width(),t.listBoxContainer.jqxListBox({width:f}),t.container.width(parseInt(f)+25)),t.close()),i=="checkboxes"&&t.listBoxContainer.jqxListBox({checkboxes:t.checkboxes}),i=="selectedIndex"&&t.listBox!=null&&(t.listBox.selectIndex(parseInt(u)),t.renderSelection())))}})}(jqxBaseFramework),function(n){function t(t,i){return this.owner=t,this.datafield=null,this.displayfield=null,this.text="",this.createfilterpanel=null,this.sortable=!0,this.hideable=!0,this.editable=!0,this.hidden=!1,this.adaptivehidden=!1,this.groupable=!0,this.renderer=null,this.cellsrenderer=null,this.checkchange=null,this.threestatecheckbox=!1,this.buttonclick=null,this.columntype=null,this.cellsformat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.filteritems=[],this.resizable=!0,this.initeditor=null,this.createeditor=null,this.createwidget=null,this.initwidget=null,this.destroywidget=null,this.destroyeditor=null,this.geteditorvalue=null,this.validation=null,this.classname="",this.cellclassname="",this.cellendedit=null,this.cellbeginedit=null,this.cellvaluechanging=null,this.aggregates=null,this.aggregatesrenderer=null,this.menu=!0,this.createfilterwidget=null,this.filtertype="default",this.filtercondition=null,this.rendered=null,this.exportable=!0,this.exporting=!1,this.draggable=!0,this.nullable=!0,this.clipboard=!0,this.enabletooltips=!0,this.columngroup=null,this.filterdelay=800,this.reseteverpresentrowwidgetvalue=null,this.geteverpresentrowwidgetvalue=null,this.createeverpresentrowwidget=null,this.initeverpresentrowwidget=null,this.validateeverpresentrowwidgetvalue=null,this.destroyeverpresentrowwidget=null,this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(n,t){var i;this[n]?(i=this[n],this[n]=t,this.owner._columnPropertyChanged(this,n,t,i)):this[n.toLowerCase()]&&(i=this[n.toLowerCase()],this[n.toLowerCase()]=t,this.owner._columnPropertyChanged(this,n.toLowerCase(),t,i))},this._initfields=function(i){var u,r;if(i!=null&&(u=this.that,n.jqx.hasProperty(i,"dataField")&&(this.datafield=n.jqx.get(i,"dataField")),this.displayfield=n.jqx.hasProperty(i,"displayField")?n.jqx.get(i,"displayField"):this.datafield,n.jqx.hasProperty(i,"enableTooltips")&&(this.enabletooltips=n.jqx.get(i,"enableTooltips")),this.text=n.jqx.hasProperty(i,"text")?n.jqx.get(i,"text"):this.displayfield,n.jqx.hasProperty(i,"createfilterpanel")&&(this.createfilterpanel=n.jqx.get(i,"createfilterpanel")),n.jqx.hasProperty(i,"sortable")&&(this.sortable=n.jqx.get(i,"sortable")),n.jqx.hasProperty(i,"hideable")&&(this.hideable=n.jqx.get(i,"hideable")),n.jqx.hasProperty(i,"hidden")&&(this.hidden=n.jqx.get(i,"hidden")),n.jqx.hasProperty(i,"adaptivehidden")&&(this.adaptivehidden=n.jqx.get(i,"adaptivehidden")),n.jqx.hasProperty(i,"groupable")&&(this.groupable=n.jqx.get(i,"groupable")),n.jqx.hasProperty(i,"renderer")&&(this.renderer=n.jqx.get(i,"renderer")),n.jqx.hasProperty(i,"align")&&(this.align=n.jqx.get(i,"align")),n.jqx.hasProperty(i,"cellsAlign")&&(this.cellsalign=n.jqx.get(i,"cellsAlign")),n.jqx.hasProperty(i,"clipboard")&&(this.clipboard=n.jqx.get(i,"clipboard")),n.jqx.hasProperty(i,"cellsFormat")&&(this.cellsformat=n.jqx.get(i,"cellsFormat")),n.jqx.hasProperty(i,"width")&&(this.width=n.jqx.get(i,"width")),n.jqx.hasProperty(i,"minWidth")&&(this.minwidth=parseInt(n.jqx.get(i,"minWidth")),isNaN(this.minwidth)&&(this.minwidth=25)),n.jqx.hasProperty(i,"maxWidth")&&(this.maxwidth=parseInt(n.jqx.get(i,"maxWidth")),isNaN(this.maxwidth)&&(this.maxwidth="auto")),n.jqx.hasProperty(i,"cellsRenderer")?this.cellsrenderer=n.jqx.get(i,"cellsRenderer"):i.cellsRenderer&&(this.cellsrenderer=i.cellsRenderer),n.jqx.hasProperty(i,"columnType")&&(this.columntype=n.jqx.get(i,"columnType")),n.jqx.hasProperty(i,"checkChange")&&(this.checkchange=n.jqx.get(i,"checkChange")),n.jqx.hasProperty(i,"buttonClick")?this.buttonclick=n.jqx.get(i,"buttonClick"):i.buttonClick&&(this.buttonclick=i.buttonClick),n.jqx.hasProperty(i,"pinned")&&(this.pinned=n.jqx.get(i,"pinned")),n.jqx.hasProperty(i,"visibleIndex")&&(this.visibleindex=n.jqx.get(i,"visibleIndex")),n.jqx.hasProperty(i,"filterable")&&(this.filterable=n.jqx.get(i,"filterable")),n.jqx.hasProperty(i,"filter")&&(this.filter=n.jqx.get(i,"filter")),n.jqx.hasProperty(i,"resizable")&&(this.resizable=n.jqx.get(i,"resizable")),n.jqx.hasProperty(i,"editable")&&(this.editable=n.jqx.get(i,"editable")),n.jqx.hasProperty(i,"initEditor")?this.initeditor=n.jqx.get(i,"initEditor"):i.initEditor&&(this.initeditor=i.initEditor),n.jqx.hasProperty(i,"createEditor")?this.createeditor=n.jqx.get(i,"createEditor"):i.createEditor&&(this.createeditor=i.createEditor),n.jqx.hasProperty(i,"initWidget")?this.initwidget=n.jqx.get(i,"initWidget"):i.initWidget&&(this.initwidget=i.initWidget),n.jqx.hasProperty(i,"createWidget")?this.createwidget=n.jqx.get(i,"createWidget"):i.createWidget&&(this.createwidget=i.createWidget),n.jqx.hasProperty(i,"destroyWidget")?this.destroywidget=n.jqx.get(i,"destroyWidget"):i.destroyWidget&&(this.destroywidget=i.destroyWidget),n.jqx.hasProperty(i,"reseteverpresentrowwidgetvalue")||n.jqx.hasFunction(i,"reseteverpresentrowwidgetvalue")?this.reseteverpresentrowwidgetvalue=n.jqx.get(i,"reseteverpresentrowwidgetvalue"):i.resetEverPresentRowWidgetValue&&(this.reseteverpresentrowwidgetvalue=i.resetEverPresentRowWidgetValue),n.jqx.hasProperty(i,"geteverpresentrowwidgetvalue")||n.jqx.hasFunction(i,"geteverpresentrowwidgetvalue")?this.geteverpresentrowwidgetvalue=n.jqx.get(i,"geteverpresentrowwidgetvalue"):i.getEverPresentRowWidgetValue&&(this.geteverpresentrowwidgetvalue=i.getEverPresentRowWidgetValue),n.jqx.hasProperty(i,"createeverpresentrowwidget")||n.jqx.hasFunction(i,"createeverpresentrowwidget")?this.createeverpresentrowwidget=n.jqx.get(i,"createeverpresentrowwidget"):i.createEverPresentRowWidget&&(this.createeverpresentrowwidget=i.createEverPresentRowWidget),n.jqx.hasProperty(i,"initeverpresentrowwidget")||n.jqx.hasFunction(i,"initeverpresentrowwidget")?this.initeverpresentrowwidget=n.jqx.get(i,"initeverpresentrowwidget"):i.initEverPresentRowWidget&&(this.initeverpresentrowwidget=i.initEverPresentRowWidget),n.jqx.hasProperty(i,"validateeverpresentrowwidgetvalue")?this.validateeverpresentrowwidgetvalue=n.jqx.get(i,"validateeverpresentrowwidgetvalue"):i.validateEverPresentRowWidgetValue&&(this.validateeverpresentrowwidgetvalue=i.validateEverPresentRowWidgetValue),n.jqx.hasProperty(i,"destroyeverpresentrowwidget")||n.jqx.hasFunction(i,"destroyeverpresentrowwidget")?this.destroyeverpresentrowwidget=n.jqx.get(i,"destroyeverpresentrowwidget"):i.destroyEverPresentRowWidget&&(this.destroyEverPresentRowWidget=i.destroyEverPresentRowWidget),n.jqx.hasProperty(i,"destroyEditor")?this.destroyeditor=n.jqx.get(i,"destroyEditor"):i.destroyEditor&&(this.destroyeditor=i.destroyEditor),n.jqx.hasProperty(i,"getEditorValue")?this.geteditorvalue=n.jqx.get(i,"getEditorValue"):i.getEditorValue&&(this.geteditorvalue=i.getEditorValue),n.jqx.hasProperty(i,"validation")?this.validation=n.jqx.get(i,"validation"):i.validation&&(this.validation=i.validation),n.jqx.hasProperty(i,"cellBeginEdit")?this.cellbeginedit=n.jqx.get(i,"cellBeginEdit"):i.cellBeginEdit&&(this.cellbeginedit=i.cellBeginEdit),n.jqx.hasProperty(i,"cellEndEdit")?this.cellendedit=n.jqx.get(i,"cellEndEdit"):i.cellEndEdit&&(this.cellendedit=i.cellEndEdit),n.jqx.hasProperty(i,"className")&&(this.classname=n.jqx.get(i,"className")),n.jqx.hasProperty(i,"cellClassName")?this.cellclassname=n.jqx.get(i,"cellClassName"):i.cellClassName&&(this.cellclassname=i.cellClassName),n.jqx.hasProperty(i,"menu")&&(this.menu=n.jqx.get(i,"menu")),n.jqx.hasProperty(i,"aggregates")&&(this.aggregates=n.jqx.get(i,"aggregates")),n.jqx.hasProperty(i,"aggregatesRenderer")&&(this.aggregatesrenderer=n.jqx.get(i,"aggregatesRenderer")),n.jqx.hasProperty(i,"createFilterWidget")&&(this.createfilterwidget=n.jqx.get(i,"createFilterWidget")),n.jqx.hasProperty(i,"filterType")&&(this.filtertype=n.jqx.get(i,"filterType")),n.jqx.hasProperty(i,"filterDelay")&&(this.filterdelay=n.jqx.get(i,"filterDelay")),n.jqx.hasProperty(i,"rendered")&&(this.rendered=n.jqx.get(i,"rendered")),n.jqx.hasProperty(i,"exportable")&&(this.exportable=n.jqx.get(i,"exportable")),n.jqx.hasProperty(i,"filterItems")&&(this.filteritems=n.jqx.get(i,"filterItems")),n.jqx.hasProperty(i,"cellValueChanging")&&(this.cellvaluechanging=n.jqx.get(i,"cellValueChanging")),n.jqx.hasProperty(i,"draggable")&&(this.draggable=n.jqx.get(i,"draggable")),n.jqx.hasProperty(i,"filterCondition")&&(this.filtercondition=n.jqx.get(i,"filterCondition")),n.jqx.hasProperty(i,"threeStateCheckbox")&&(this.threestatecheckbox=n.jqx.get(i,"threeStateCheckbox")),n.jqx.hasProperty(i,"nullable")&&(this.nullable=n.jqx.get(i,"nullable")),n.jqx.hasProperty(i,"columnGroup")&&(this.columngroup=n.jqx.get(i,"columnGroup")),!i instanceof String&&!(typeof i=="string")))for(r in i)if(!u.hasOwnProperty(r)&&!u.hasOwnProperty(r.toLowerCase())){t.host.remove();throw new Error("jqxGrid: Invalid property name - "+r+".");}},this._initfields(i),this}function i(n,t){return this.setdata=function(n){n!=null&&(this.bounddata=n,this.boundindex=n.boundindex,this.visibleindex=n.visibleindex,this.group=n.group,this.parentbounddata=n.parentItem,this.uniqueid=n.uniqueid,this.level=n.level)},this.setdata(t),this.parentrow=null,this.subrows=[],this.owner=n,this.height=25,this.hidden=!1,this.rowdetails=null,this.rowdetailsheight=100,this.rowdetailshidden=!0,this.top=-1,this.setrowinfo=function(n){this.hidden=n.hidden;this.rowdetails=n.rowdetails;this.rowdetailsheight=n.rowdetailsheight;this.rowdetailshidden=!n.showdetails;this.height=n.height},this}n.jqx.jqxWidget("jqxGrid","",{});n.extend(n.jqx._jqxGrid.prototype,{defineInstance:function(){var t={adaptive:!1,adaptivewidth:600,disabled:!1,width:600,height:400,pagerheight:40,groupsheaderheight:34,pagesize:10,pagesizeoptions:["5","10","20"],rowsheight:32,columnsheight:32,filterrowheight:36,groupindentwidth:30,rowdetails:!1,enablerowdetailsindent:!0,enablemousewheel:!0,initrowdetails:null,layoutrowdetails:null,editable:!1,editmode:"selectedcell",pageable:!1,pagermode:"default",pagerbuttonscount:5,groupable:!1,sortable:!1,sortmode:"one",filterable:!1,filtermode:"default",autoshowfiltericon:!0,showfiltercolumnbackground:!0,showpinnedcolumnbackground:!0,showsortcolumnbackground:!0,altrows:!1,altstart:1,altstep:1,showrowdetailscolumn:!0,showrowlines:!0,showcolumnlines:!0,showcolumnheaderlines:!0,showtoolbar:!1,toolbarheight:36,showstatusbar:!1,statusbarheight:36,enableellipsis:!0,groups:[],groupsrenderer:null,groupcolumnrenderer:null,groupsexpandedbydefault:!1,pagerrenderer:null,touchmode:"auto",columns:[],selectedrowindex:-1,selectedrowindexes:[],selectedcells:[],autobind:!0,selectedcell:null,tableZIndex:79,headerZIndex:29,updatefilterconditions:null,showgroupaggregates:!1,showaggregates:!1,showfilterrow:!1,showeverpresentrow:!1,everpresentrowposition:"top",everpresentrowactions:"add reset",everpresentrowactionsmode:"buttons",everpresentrowheight:30,autorowheight:!1,autokoupdates:!0,handlekeyboardnavigation:null,showsortmenuitems:!0,showfiltermenuitems:!0,showgroupmenuitems:!0,enablebrowserselection:!1,enablekeyboarddelete:!0,clipboard:!0,clipboardbegin:null,clipboardend:null,copytoclipboardwithheaders:!1,copytoclipboardhiddencolumns:!1,ready:null,updatefilterpanel:null,autogeneratecolumns:!1,rowdetailstemplate:null,scrollfeedback:null,rendertoolbar:null,renderstatusbar:null,rendered:null,multipleselectionbegins:null,columngroups:null,cellhover:null,source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},filter:null,dataview:null,updatedelay:null,autoheight:!1,autowidth:!1,showheader:!0,showgroupsheader:!0,closeablegroups:!0,scrollbarsize:n.jqx.utilities.scrollBarSize,touchscrollbarsize:n.jqx.utilities.touchScrollBarSize,scrollbarautoshow:n.jqx.utilities.scrollBarAutoShow,virtualmode:!1,sort:null,columnsmenu:!0,columnsresize:!1,columnsautoresize:!0,columnsreorder:!1,columnsmenuwidth:16,autoshowcolumnsmenubutton:!0,showcolumnsactionbutton:!1,popupwidth:"auto",popupheight:"auto",columnmenuopening:null,columnmenuclosing:null,sorttogglestates:2,rendergridrows:null,enableanimations:!0,enablecolumnsvirtualization:!0,enabletooltips:!1,selectionmode:"singlerow",enablehover:!0,loadingerrormessage:"The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.",verticalscrollbarstep:30,verticalscrollbarlargestep:400,horizontalscrollbarstep:10,horizontalscrollbarlargestep:50,keyboardnavigation:!0,keyboardmenunavigation:!0,touchModeStyle:"auto",autoshowloadelement:!0,showdefaultloadelement:!0,showemptyrow:!0,autosavestate:!1,autoloadstate:!1,_updating:!1,_pagescache:[],_pageviews:[],_cellscache:[],_rowdetailscache:[],_rowdetailselementscache:[],_requiresupdate:!1,_hasOpenedMenu:!1,scrollmode:"physical",deferreddatafields:null,localization:null,rtl:!1,menuitemsarray:[],events:["initialized","rowClick","rowSelect","rowUnselect","groupExpand","groupCollapse","sort","columnClick","cellClick","pageChanged","pageSizeChanged","bindingComplete","groupsChanged","filter","columnResized","cellSelect","cellUnselect","cellBeginEdit","cellEndEdit","cellValueChanged","rowExpand","rowCollapse","rowDoubleClick","cellDoubleClick","columnReordered","pageChanging"]};return this===n.jqx._jqxGrid.prototype?t:(n.extend(!0,this,t),t)},createInstance:function(t){var i,v,l,y,o,s,h,r,c,u,e,f,a;if(this.that=this,i=this,i.pagesize=parseInt(i.pagesize),i.toolbarheight=parseInt(i.toolbarheight),i.columnsheight=parseInt(i.columnsheight),i.filterrowheight=parseInt(i.filterrowheight),i.statusbarheight=parseInt(i.statusbarheight),i.groupsheaderheight=parseInt(i.groupsheaderheight),i.detailsVisibility=[],i.savedArgs=t&&t.length>0?t[0]:null,v="<div class='jqx-clear jqx-border-reset jqx-overflow-hidden jqx-max-size jqx-position-relative'><div tabindex='1' class='jqx-clear jqx-max-size jqx-position-relative jqx-overflow-hidden jqx-background-reset' id='wrapper"+i.element.id+"'><div class='jqx-clear jqx-position-absolute' id='toolbar' style='visibility: hidden;'><\/div><div class='jqx-clear jqx-position-absolute' id='groupsheader' style='visibility: hidden;'><\/div><div class='jqx-clear jqx-overflow-hidden jqx-position-absolute jqx-border-reset jqx-background-reset' id='content"+i.element.id+"'><\/div><div class='jqx-clear jqx-position-absolute' id='verticalScrollBar"+i.element.id+"'><\/div><div class='jqx-clear jqx-position-absolute' id='horizontalScrollBar"+i.element.id+"'><\/div><div class='jqx-clear jqx-position-absolute jqx-border-reset' id='bottomRight'><\/div><div class='jqx-clear jqx-position-absolute' id='addrow'><\/div><div class='jqx-clear jqx-position-absolute' id='statusbar'><\/div><div class='jqx-clear jqx-position-absolute' id='pager' style='z-index: 20;'><\/div><\/div><\/div>",i.element.innerHTML="",n.jqx.utilities.scrollBarSize!=15&&(i.scrollbarsize=n.jqx.utilities.scrollBarSize),i.source){if(!i.source.dataBind){if(!n.jqx.dataAdapter)throw new Error("jqxGrid: Missing reference to jqxdata.js");i.source=new n.jqx.dataAdapter(i.source)}r=i.source._source.datafields;r&&r.length>0&&(i.editmode=i.editmode.toLowerCase(),i.selectionmode=i.selectionmode.toLowerCase())}if(i.host.attr("role","grid"),i.host.attr("align","left"),i.element.innerHTML=v,i.host.addClass(i.toTP("jqx-grid")),i.host.addClass(i.toTP("jqx-reset")),i.host.addClass(i.toTP("jqx-rc-all")),i.host.addClass(i.toTP("jqx-widget")),i.host.addClass(i.toTP("jqx-widget-content")),i.wrapper=i.host.find("#wrapper"+i.element.id),i.content=i.host.find("#content"+i.element.id),i.content.addClass(i.toTP("jqx-reset")),l=i.host.find("#verticalScrollBar"+i.element.id),y=i.host.find("#horizontalScrollBar"+i.element.id),i.bottomRight=i.host.find("#bottomRight").addClass(i.toTP("jqx-grid-bottomright jqx-scrollbar-state-normal")),!l.jqxScrollBar)throw new Error("jqxGrid: Missing reference to jqxscrollbar.js");if(i.editors=[],i.vScrollBar=l.jqxScrollBar({vertical:!0,rtl:i.rtl,touchMode:i.touchmode,step:i.verticalscrollbarstep,largestep:i.verticalscrollbarlargestep,theme:i.theme,_triggervaluechanged:!1}),i.hScrollBar=y.jqxScrollBar({vertical:!1,rtl:i.rtl,touchMode:i.touchmode,step:i.horizontalscrollbarstep,largestep:i.horizontalscrollbarlargestep,theme:i.theme,_triggervaluechanged:!1}),i.addnewrow=i.host.find("#addrow"),i.addnewrow[0].id="addrow"+i.element.id,i.addnewrow.addClass(i.toTP("jqx-widget-header")),i.pager=i.host.find("#pager"),i.pager[0].id="pager"+i.element.id,i.toolbar=i.host.find("#toolbar"),i.toolbar[0].id="toolbar"+i.element.id,i.toolbar.addClass(i.toTP("jqx-grid-toolbar")),i.toolbar.addClass(i.toTP("jqx-widget-header")),i.statusbar=i.host.find("#statusbar"),i.statusbar[0].id="statusbar"+i.element.id,i.statusbar.addClass(i.toTP("jqx-grid-statusbar")),i.statusbar.addClass(i.toTP("jqx-widget-header")),i.pager.addClass(i.toTP("jqx-grid-pager")),i.pager.addClass(i.toTP("jqx-widget-header")),i.groupsheader=i.host.find("#groupsheader"),i.groupsheader.addClass(i.toTP("jqx-grid-groups-header")),i.groupsheader.addClass(i.toTP("jqx-widget-header")),i.groupsheader[0].id="groupsheader"+i.element.id,i.vScrollBar.css("visibility","hidden"),i.hScrollBar.css("visibility","hidden"),i.vScrollInstance=n.data(i.vScrollBar[0],"jqxScrollBar").instance,i.hScrollInstance=n.data(i.hScrollBar[0],"jqxScrollBar").instance,i.gridtable=null,i.isNestedGrid=i.host.parent()?i.host.parent().css("z-index")==299:!1,i.touchdevice=i.isTouchDevice(),i.localizestrings&&(i.localizestrings(),i.localization!=null&&i.localizestrings(i.localization,!1)),i.rowdetailstemplate&&(undefined==i.rowdetailstemplate.rowdetails&&(i.rowdetailstemplate.rowdetails="<div><\/div>"),undefined==i.rowdetailstemplate.rowdetailsheight&&(i.rowdetailstemplate.rowdetailsheight=200),undefined==i.rowdetailstemplate.rowdetailshidden&&(i.rowdetailstemplate.rowdetailshidden=!0)),i.showfilterrow&&!i.filterable)throw new Error('jqxGrid: "showfilterrow" requires setting the "filterable" property to true!');if(i.autorowheight&&!i.autoheight&&!i.pageable)throw new Error('jqxGrid: "autorowheight" requires setting the "autoheight" or "pageable" property to true!');if(i.virtualmode&&i.rendergridrows==null)throw new Error('jqxGrid: "virtualmode" requires setting the "rendergridrows"!');if(i.virtualmode&&!i.pageable&&i.groupable)throw new Error('jqxGrid: "grouping" in "virtualmode" without paging is not supported!');if(!i._testmodules()){if(i._builddataloadelement(),i._cachedcolumns=i.columns,i.columns&&i.columns.length>i.headerZIndex&&(i.headerZIndex=i.columns.length+100),i.theme&&i.theme.indexOf("material")>=0&&(o=n("<span>Test<\/span>"),u=n("<span>Test<\/span>"),o.addClass(i.toTP("jqx-grid-row-cell")),u.addClass(i.toTP("jqx-grid-column-header-cell")),i.host.append(o),i.host.append(u),s=o.outerHeight(),h=u.outerHeight(),s>this.rowsheight&&(i.rowsheight=s,this._cellheight=s),h>this.columnsheight&&(i.columnsheight=h,this._columnHeight=h),o.remove(),u.remove()),i.rowsheight!=31&&i._measureElement("cell"),(i.columnsheight!=32||i.columngroups)&&i._measureElement("column"),i.source&&(r=i.source.datafields,r==null&&i.source._source&&(r=i.source._source.datafields),r))for(c=0;c<i.columns.length;c++)if(u=i.columns[c],u&&u.cellsformat&&u.cellsformat.length>2)for(e=0;e<r.length;e++)if(r[e].name==u.datafield&&!r[e].format){r[e].format=u.cellsformat;break}i.databind(i.source);i.showtoolbar&&i.toolbar.css("visibility","inherit");i.showstatusbar&&i.statusbar.css("visibility","inherit");i._arrange();i.pageable&&i._initpager&&i._initpager();i.tableheight=null;f=i.that;a=function(){f.content&&(f.content[0].scrollTop=0,f.content[0].scrollLeft=0);f.gridcontent&&(f.gridcontent[0].scrollLeft=0,f.gridcontent[0].scrollTop=0)};i.addHandler(i.content,"mousedown",function(){a()});i.addHandler(i.content,"scroll",function(){return a(),!1});i.showfilterrow||(i.showstatusbar||i.showtoolbar||i.host.addClass("jqx-disableselect"),i.content.addClass("jqx-disableselect"));i.enablebrowserselection&&(i.content.removeClass("jqx-disableselect"),i.host.removeClass("jqx-disableselect"));i._resizeWindow();i.disabled&&i.host.addClass(i.toThemeProperty("jqx-fill-state-disabled"));i.hasTransform=n.jqx.utilities.hasTransform(i.host);i.scrollmode=="logical"&&(i.vScrollInstance.thumbStep=i.rowsheight,i.vScrollInstance.step=i.rowsheight);n.jqx.isHidden(i.host)||(i.filterable||i.groupable||i.sortable)&&i._initmenu()}},_resizeWindow:function(){var t=this.that,i,r;(this.width!=null&&this.width.toString().indexOf("%")!=-1||this.height!=null&&this.height.toString().indexOf("%")!=-1)&&(this._updatesizeonwindowresize=!0,n.jqx.utilities.resize(this.host,function(i){var e=n(window).width(),o=n(window).height(),r=t.host.width(),u=t.host.height(),f;if(t.pageable&&(f=t.host.find(".jqx-grid-pager-input"),e<350?f.hide():f.show()),t.autoheight&&(t._lastHostWidth=o),t._lastHostWidth!=r||t._lastHostHeight!=u){if(t.touchdevice&&t.editcell&&i!=="orientationchange")return;t._updatesize(t._lastHostWidth!=r,t._lastHostHeight!=u)}t._lastWidth=e;t._lastHeight=o;t._lastHostWidth=r;t._lastHostHeight=u}),i=t.host.width(),r=t.host.height(),t._lastHostWidth=i,t._lastHostHeight=r)},_builddataloadelement:function(){if(this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=n('<div style="overflow: hidden; position: absolute;"><\/div>'),this.showdefaultloadelement){var t=n('<div style="z-index: 99; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"/><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"<\/span><\/div><\/div>");t.addClass(this.toTP("jqx-rc-all"));this.dataloadelement.addClass(this.toTP("jqx-rc-all"));t.addClass(this.toTP("jqx-fill-state-normal"));this.dataloadelement.append(t)}else this.dataloadelement.addClass(this.toTP("jqx-grid-load"));this.dataloadelement.width(this.host.width());this.dataloadelement.height(this.host.height());this.wrapper.prepend(this.dataloadelement)},_measureElement:function(t){var i=n("<span style='visibility: hidden; white-space: nowrap;'>measure Text<\/span>");i.addClass(this.toTP("jqx-widget"));n(document.body).append(i);t=="cell"?this._cellheight=i.height():this._columnheight=i.height();i.remove()},_measureMenuElement:function(){var t=n("<span style='visibility: hidden; white-space: nowrap;'>measure Text<\/span>"),i;return t.addClass(this.toTP("jqx-widget")),t.addClass(this.toTP("jqx-menu")),t.addClass(this.toTP("jqx-menu-item-top")),t.addClass(this.toTP("jqx-fill-state-normal")),this.isTouchDevice()&&t.addClass(this.toTP("jqx-grid-menu-item-touch")),n(document.body).append(t),i=t.outerHeight(),t.remove(),i},_measureElementWidth:function(t){var i=n("<span style='visibility: hidden; white-space: nowrap;'>"+t+"<\/span>"),r;return i.addClass(this.toTP("jqx-widget")),i.addClass(this.toTP("jqx-grid")),i.addClass(this.toTP("jqx-grid-column-header")),i.addClass(this.toTP("jqx-widget-header")),n(document.body).append(i),r=i.outerWidth()+20,i.remove(),r},_getBodyOffset:function(){var t=0,i=0;return n("body").css("border-top-width")!="0px"&&(t=parseInt(n("body").css("border-top-width")),isNaN(t)&&(t=0)),n("body").css("border-left-width")!="0px"&&(i=parseInt(n("body").css("border-left-width")),isNaN(i)&&(i=0)),{left:i,top:t}},_testmodules:function(){var t="",u=this.that,i=function(){t.length!=""&&(t+=",")},r,o,f,e;if(this.columnsmenu&&!this.host.jqxMenu&&(this.sortable||this.groupable||this.filterable)&&(i(),t+=" jqxmenu.js"),this.host.jqxScrollBar||(i(),t+=" jqxscrollbar.js"),this.host.jqxButton||(i(),t+=" jqxbuttons.js"),n.jqx.dataAdapter||(i(),t+=" jqxdata.js"),this.pageable&&!this.gotopage&&(i(),t+="jqxgrid.pager.js"),this.filterable&&!this.applyfilters&&(i(),t+=" jqxgrid.filter.js"),this.groupable&&!this._initgroupsheader&&(i(),t+=" jqxgrid.grouping.js"),this.columnsresize&&!this.autoresizecolumns&&(i(),t+=" jqxgrid.columnsresize.js"),this.columnsreorder&&!this.setcolumnindex&&(i(),t+=" jqxgrid.columnsreorder.js"),this.sortable&&!this.sortby&&(i(),t+=" jqxgrid.sort.js"),this.editable&&!this.begincelledit&&(i(),t+=" jqxgrid.edit.js"),this.showaggregates&&!this.getcolumnaggregateddata&&(i(),t+=" jqxgrid.aggregates.js"),this.keyboardnavigation&&!this.selectrow&&(i(),t+=" jqxgrid.selection.js"),t!=""||this.editable||this.filterable||this.pageable){for(r=[],o=function(n){switch(n){case"checkbox":u.host.jqxCheckBox||r.checkbox||(r.checkbox=!0,i(),t+=" jqxcheckbox.js");break;case"numberinput":u.host.jqxNumberInput||r.numberinput||(r.numberinput=!0,i(),t+=" jqxnumberinput.js");break;case"datetimeinput":u.host.jqxDateTimeInput||r.datetimeinput?u.host.jqxCalendar||r.calendar||(i(),t+=" jqxcalendar.js"):(i(),r.datetimeinput=!0,t+=" jqxdatetimeinput.js(requires: jqxcalendar.js)");break;case"combobox":u.host.jqxComboBox||r.combobox?u.host.jqxListBox||r.listbox||(i(),r.listbox=!0,t+=" jqxlistbox.js"):(i(),r.combobox=!0,t+=" jqxcombobox.js(requires: jqxlistbox.js)");break;case"dropdownlist":u.host.jqxDropDownList||r.dropdownlist?u.host.jqxListBox||r.listbox||(i(),r.listbox=!0,t+=" jqxlistbox.js"):(i(),r.dropdownlist=!0,t+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}},(this.filterable||this.pageable)&&o("dropdownlist"),f=0;f<this.columns.length;f++)this.columns[f]!=undefined&&(e=this.columns[f].columntype,o(e),this.filterable&&this.showfilterrow&&(e=this.columns[f].filtertype,(e=="checkedlist"||e=="bool")&&o("checkbox"),e=="date"&&o("datetimeinput")));if(t!="")throw new Error("jqxGrid: Missing references to the following module(s): "+t);}return!1},focus:function(){try{this.wrapper.focus();var n=this.that;setTimeout(function(){n.wrapper.focus()},25);this.focused=!0}catch(t){}},hiddenParent:function(){return n.jqx.isHidden(this.host)},resize:function(n,t){this.width=n;this.height=t;this._updatesize(!0,!0)},_updatesize:function(t,i){var r,u,f,e;this._loading||(r=this.that,r._newmax=null,u=r.host.width(),f=r.host.height(),r._oldWidth||(r._oldWidth=u),r._oldHeight||(r._oldHeight=f),r._resizeTimer&&clearTimeout(r._resizeTimer),e=5,r._resizeTimer=setTimeout(function(){var h,c,e,s,o,a,v,f,l;if(r.resizingGrid=!0,!n.jqx.isHidden(r.host)){if(r.editcell&&(r.endcelledit(r.editcell.row,r.editcell.column,!0,!0),r._oldselectedcell=null),(e!=r._oldHeight||i==!0)&&(h=r.groupable&&r.groups.length>0,c=r.vScrollBar.css("visibility"),r.autoheight||(r.virtualmode&&(r._pageviews=[]),h||r.rowdetails||r.pageable?(r._arrange(),r.prerenderrequired=!0,e=Math.round(r.host.height())+2*r.rowsheight,realheight=r._gettableheight(),s=Math.round(e/r.rowsheight),o=Math.max(r.dataview.totalrows,r.dataview.totalrecords),r.pageable&&(o=r.pagesize,r.pagesize>Math.max(r.dataview.totalrows,r.dataview.totalrecords)&&r.autoheight?o=Math.max(r.dataview.totalrows,r.dataview.totalrecords):r.autoheight||r.dataview.totalrows<r.pagesize&&(o=Math.max(r.dataview.totalrows,r.dataview.totalrecords))),a=o*r.rowsheight,v=r._getpagesize(),!r.pageable&&r.autoheight&&(s=o),r.virtualsizeinfo&&(r.virtualsizeinfo.visiblerecords=s),r.rendergridcontent(!0,!1),r._renderrows(r.virtualsizeinfo)):(r._arrange(),r.virtualsizeinfo=r._calculatevirtualheight(),e=Math.round(r.host.height())+2*r.rowsheight,parseInt(e)>=parseInt(r._oldHeight)&&(r.prerenderrequired=!0),r._renderrows(r.virtualsizeinfo),r.rtl&&(r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths())),c!=r.vScrollBar.css("visibility")&&(r.vScrollInstance.setPosition(0),r._arrange(),r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths()))),u!=r._oldWidth||t==!0){if(f=!1,r.editcell&&r.editcell.editor)switch(r.editcell.columntype){case"dropdownlist":if(f=r.editcell.editor.jqxDropDownList("isOpened")||r.editcell.editor.jqxDropDownList("isanimating")&&!r.editcell.editor.jqxDropDownList("ishiding"),f){r.editcell.editor.jqxDropDownList({openDelay:0});r.editcell.editor.jqxDropDownList("open");r.editcell.editor.jqxDropDownList({openDelay:250});return}break;case"combobox":if(f=r.editcell.editor.jqxComboBox("isOpened")||r.editcell.editor.jqxComboBox("isanimating")&&!r.editcell.editor.jqxComboBox("ishiding"),f){r.editcell.editor.jqxComboBox({openDelay:0});r.editcell.editor.jqxComboBox("open");r.editcell.editor.jqxComboBox({openDelay:250});return}break;case"datetimeinput":if(f){f=r.editcell.editor.jqxDateTimeInput("isOpened")||r.editcell.editor.jqxDateTimeInput("isanimating")&&!r.editcell.editor.jqxDateTimeInput("ishiding");r.editcell.editor.jqxDateTimeInput({openDelay:0});r.editcell.editor.jqxDateTimeInput("open");r.editcell.editor.jqxDateTimeInput({openDelay:250});return}}l=r.hScrollBar.css("visibility");r._arrange();r._updatecolumnwidths();r.table&&r.table.width(r.columnsheader.width());r._updatecellwidths();t==!1&&r._oldWidth>u||i&&r.dataview.rows.length!=0||r._renderrows(r.virtualsizeinfo);l!=r.hScrollBar.css("visibility")&&r.hScrollInstance.setPosition(0)}r._oldWidth=u;r._oldHeight=e;r.resizingGrid=!1}},e))},getTouches:function(t){return n.jqx.mobile.getTouches(t)},_updateTouchScrolling:function(){var t=this.that;if(t.isTouchDevice()){t.scrollmode="logical";t.vScrollInstance.thumbStep=t.rowsheight;var i=n.jqx.mobile.getTouchEventName("touchstart"),r=n.jqx.mobile.getTouchEventName("touchend"),u=n.jqx.mobile.getTouchEventName("touchmove");t.enablehover=!1;t.gridcontent&&(t.removeHandler(t.gridcontent,i+".touchScroll"),t.removeHandler(t.gridcontent,u+".touchScroll"),t.removeHandler(t.gridcontent,r+".touchScroll"),t.removeHandler(t.gridcontent,"touchcancel.touchScroll"),n.jqx.mobile.touchScroll(t.gridcontent[0],t.vScrollInstance.max,function(n,i){i!=null&&t.vScrollBar.css("visibility")=="visible"&&t.vScrollInstance.setPosition(i);n!=null&&t.hScrollBar.css("visibility")=="visible"&&t.hScrollInstance.setPosition(n);t.vScrollInstance.thumbCapture=!0;t._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),t._overlayElement&&(t.removeHandler(t._overlayElement,i+".touchScroll"),t.removeHandler(t._overlayElement,u+".touchScroll"),t.removeHandler(t._overlayElement,r+".touchScroll"),t.removeHandler(t._overlayElement,"touchcancel.touchScroll"),n.jqx.mobile.touchScroll(t._overlayElement[0],t.vScrollInstance.max,function(n,i){i!=null&&t.vScrollBar.css("visibility")=="visible"&&t.vScrollInstance.setPosition(i);n!=null&&t.hScrollBar.css("visibility")=="visible"&&t.hScrollInstance.setPosition(n);t.vScrollInstance.thumbCapture=!0;t._lastScroll=new Date},this.element.id,this.hScrollBar,this.vScrollBar),this.addHandler(this.host,i,function(){t.editcell?t._overlayElement.css("visibility","hidden"):t._overlayElement.css("visibility","visible")}),this.addHandler(this.host,r,function(){t.editcell?t._overlayElement.css("visibility","hidden"):t._overlayElement.css("visibility","visible")})))}},_rendercelltexts:function(){var i;if(n.jqx.credits!=="12F129D4-0E1B-44B8-9BBB-BB4CF78CC6BA"&&(i="www.jqwidgets.com",location.hostname.indexOf(i.substring(4))==-1)){this._gridRenderElement&&n(this._gridRenderElement).remove();var r=String.fromCharCode(83,80,65,78),u=String.fromCharCode(72,84,84,80,58,47,47),t=document.createElement(r);t.id=n.jqx.utilities.createId();t.innerHTML=i;t.style.position="absolute";t.style.right="5px";t.style.bottom="5px";t.style.color="#909090";t.style.cursor="pointer";t.style.zIndex="999999";t.style.display="none";t.style.fontSize="9px";t.onmousedown=function(){open(u+i)};this.content[0].appendChild(t);this._gridRenderElement=t}},isTouchDevice:function(){if(this.touchDevice!=undefined)return this.touchDevice;var t=n.jqx.mobile.isTouchDevice();if(this.touchDevice=t,this.touchmode==!0){if(n.jqx.browser.msie&&n.jqx.browser.version<9)return this.enablehover=!1,!1;t=!0;n.jqx.mobile.setMobileSimulator(this.element);this.touchDevice=t}else this.touchmode==!1&&(t=!1);return t&&this.touchModeStyle!=!1&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollbarsize=this.touchscrollbarsize),t},toTP:function(n){return this.toThemeProperty(n)},localizestrings:function(t,i){var r;if(this._cellscache=[],n.jqx.dataFormat&&n.jqx.dataFormat.cleardatescache(),this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(t!=null){for(r in t)r.toLowerCase()!==r&&(t[r.toLowerCase()]=t[r]);if(t.okstring&&(this.gridlocalization.okstring=t.okstring),t.cancelstring&&(this.gridlocalization.cancelstring=t.cancelstring),t.pagergotopagestring&&(this.gridlocalization.pagergotopagestring=t.pagergotopagestring),t.pagershowrowsstring&&(this.gridlocalization.pagershowrowsstring=t.pagershowrowsstring),t.pagerrangestring&&(this.gridlocalization.pagerrangestring=t.pagerrangestring),t.pagernextbuttonstring&&(this.gridlocalization.pagernextbuttonstring=t.pagernextbuttonstring),t.pagerpreviousbuttonstring&&(this.gridlocalization.pagerpreviousbuttonstring=t.pagerpreviousbuttonstring),t.pagerfirstbuttonstring&&(this.gridlocalization.pagerfirstbuttonstring=t.pagerfirstbuttonstring),t.pagerlastbuttonstring&&(this.gridlocalization.pagerlastbuttonstring=t.pagerlastbuttonstring),t.groupsheaderstring&&(this.gridlocalization.groupsheaderstring=t.groupsheaderstring),t.sortascendingstring&&(this.gridlocalization.sortascendingstring=t.sortascendingstring),t.sortdescendingstring&&(this.gridlocalization.sortdescendingstring=t.sortdescendingstring),t.sortremovestring&&(this.gridlocalization.sortremovestring=t.sortremovestring),t.groupbystring&&(this.gridlocalization.groupbystring=t.groupbystring),t.groupremovestring&&(this.gridlocalization.groupremovestring=t.groupremovestring),t.firstDay&&(this.gridlocalization.firstDay=t.firstDay),t.days&&(this.gridlocalization.days=t.days),t.months&&(this.gridlocalization.months=t.months),t.AM&&(this.gridlocalization.AM=t.AM),t.PM&&(this.gridlocalization.PM=t.PM),t.patterns&&(this.gridlocalization.patterns=t.patterns),t.percentsymbol&&(this.gridlocalization.percentsymbol=t.percentsymbol),t.currencysymbol&&(this.gridlocalization.currencysymbol=t.currencysymbol),t.currencysymbolposition&&(this.gridlocalization.currencysymbolposition=t.currencysymbolposition),t.decimalseparator!=undefined&&(this.gridlocalization.decimalseparator=t.decimalseparator),t.thousandsseparator!=undefined&&(this.gridlocalization.thousandsseparator=t.thousandsseparator),t.filterclearstring&&(this.gridlocalization.filterclearstring=t.filterclearstring),t.filterstring&&(this.gridlocalization.filterstring=t.filterstring),t.filtershowrowstring&&(this.gridlocalization.filtershowrowstring=t.filtershowrowstring),t.filtershowrowdatestring&&(this.gridlocalization.filtershowrowdatestring=t.filtershowrowdatestring),t.filterselectallstring&&(this.gridlocalization.filterselectallstring=t.filterselectallstring),t.filterchoosestring&&(this.gridlocalization.filterchoosestring=t.filterchoosestring),t.filterorconditionstring&&(this.gridlocalization.filterorconditionstring=t.filterorconditionstring),t.filterandconditionstring&&(this.gridlocalization.filterandconditionstring=t.filterandconditionstring),t.filterstringcomparisonoperators&&(this.gridlocalization.filterstringcomparisonoperators=t.filterstringcomparisonoperators),t.filternumericcomparisonoperators&&(this.gridlocalization.filternumericcomparisonoperators=t.filternumericcomparisonoperators),t.filterdatecomparisonoperators&&(this.gridlocalization.filterdatecomparisonoperators=t.filterdatecomparisonoperators),t.filterbooleancomparisonoperators&&(this.gridlocalization.filterbooleancomparisonoperators=t.filterbooleancomparisonoperators),t.emptydatastring&&(this.gridlocalization.emptydatastring=t.emptydatastring),t.filterselectstring&&(this.gridlocalization.filterselectstring=t.filterselectstring),t.todaystring&&(this.gridlocalization.todaystring=t.todaystring),t.clearstring&&(this.gridlocalization.clearstring=t.clearstring),t.validationstring&&(this.gridlocalization.validationstring=t.validationstring),t.loadtext&&(this.gridlocalization.loadtext=t.loadtext),t.addrowstring&&(this.gridlocalization.addrowstring=t.addrowstring),t.udpaterowstring&&(this.gridlocalization.udpaterowstring=t.udpaterowstring),t.deleterowstring&&(this.gridlocalization.deleterowstring=t.deleterowstring),t.resetrowstring&&(this.gridlocalization.resetrowstring=t.resetrowstring),t.everpresentrowplaceholder&&(this.gridlocalization.everpresentrowplaceholder=t.everpresentrowplaceholder),i!==!1){if(this._initpager&&this._initpager(),this._initgroupsheader&&this._initgroupsheader(),this._initmenu&&this._initmenu(),this._builddataloadelement(),n(this.dataloadelement).css("visibility","hidden"),n(this.dataloadelement).css("display","none"),this.filterable&&this.showfilterrow&&this._updatefilterrow){for(r in this._filterrowcache)n(this._filterrowcache[r]).remove();this._filterrowcache=[];this._updatefilterrow()}this.showaggregates&&this.refresheaggregates&&this.refresheaggregates();this._renderrows(this.virtualsizeinfo)}}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",groupbystring:"Group By this column",groupremovestring:"Remove from groups",filterclearstring:"Clear",filterstring:"Filter",filtershowrowstring:"Show rows where:",filtershowrowdatestring:"Show rows where date:",filterorconditionstring:"Or",filterandconditionstring:"And",filterselectallstring:"(Select All)",filterchoosestring:"Please Choose:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today",addrowstring:"Add",udpaterowstring:"Update",deleterowstring:"Delete",resetrowstring:"Reset",everpresentrowplaceholder:"Enter ",okstring:"Ok",cancelstring:"Cancel"}},_getmenudefaultheight:function(){var t=this,r=0,u,i;return this.sortable&&this._togglesort&&this.showsortmenuitems&&(r=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(r+=2),u=t._measureMenuElement(),i=r*u+9,t.filterable&&!t.showfilterrow&&t.showfiltermenuitems&&(i+=194,n.jqx.browser.msie&&n.jqx.browser.version<8&&(i+=20)),i},_initmenu:function(){var t=this.that,r,f,h,l,b,g,s;if(this.host.jqxMenu){if(this.gridmenu){if(this._hasOpenedMenu)return;this.filterable&&this._destroyfilterpanel&&this._destroyfilterpanel();this.removeHandler(this.gridmenu,"keydown");this.removeHandler(this.gridmenu,"closed");this.removeHandler(this.gridmenu,"itemclick");this.gridmenu.jqxMenu("destroy");this.gridmenu.removeData();this.gridmenu.remove()}this.menuitemsarray=[];r="";this.isTouchDevice()&&(r="jqx-grid-menu-item-touch");this.gridmenu=n('<div tabindex=0 id="gridmenu'+this.element.id+'" style="z-index: 99;"><\/div>');this.host.append(this.gridmenu);var i=n("<ul><\/ul>"),a=n('<li class="'+r+'"><div class="jqx-grid-sortasc-icon"><\/div>'+this.gridlocalization.sortascendingstring+"<\/li>"),v=n('<li class="'+r+'"><div class="jqx-grid-sortdesc-icon"><\/div>'+this.gridlocalization.sortdescendingstring+"<\/li>"),y=n('<li class="'+r+'"><div class="jqx-grid-sortremove-icon"><\/div>'+this.gridlocalization.sortremovestring+"<\/li>"),k='<div class="jqx-grid-groupby-icon"><\/div>',p=n('<li class="'+r+'">'+k+this.gridlocalization.groupbystring+"<\/li>"),w=n('<li class="'+r+'">'+k+this.gridlocalization.groupremovestring+"<\/li>"),nt=n('<li type="separator"><\/li>'),e=n('<li class="filter '+r+'" style="height: 194px;" ignoretheme="true"><div class="filter"><\/div><\/li>'),u=this.gridlocalization.sortascendingstring.length,o=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>u&&(u=this.gridlocalization.sortdescendingstring.length,o=this.gridlocalization.sortdescendingstring);this.gridlocalization.sortremovestring.length>u&&(u=this.gridlocalization.sortremovestring.length,o=this.gridlocalization.sortremovestring);this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(this.gridlocalization.groupbystring.length>u&&(u=this.gridlocalization.groupbystring.length,o=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>u&&(u=this.gridlocalization.groupremovestring.length,o=this.gridlocalization.groupremovestring));f=200;o=n.trim(o).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");h=n("<span>"+o+"<\/span>");h.addClass(this.toThemeProperty("jqx-menu-item"));this.host.append(h);f=h.outerWidth()+60;h.remove();l=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(i.append(a),this.menuitemsarray[0]=a[0],i.append(v),this.menuitemsarray[1]=v[0],i.append(y),this.menuitemsarray[2]=y[0],l=3);this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(i.append(p),this.menuitemsarray[3]=p[0],i.append(w),this.menuitemsarray[4]=w[0],l+=2);var tt=this._measureMenuElement(),c=l*tt+9,d=!0;if(this.filterable&&!this.showfilterrow&&this.showfiltermenuitems)if(this._initfilterpanel)this.menuitemsarray[5]=e[0],this.menuitemsarray[6]=e[0],i.append(nt),i.append(e),c+=194,n.jqx.browser.msie&&n.jqx.browser.version<8&&(c+=20),this.isTouchDevice()&&(c+=30),b=n(e).find("div:first"),this.excelfilterpanel=n("<div><\/div>"),this.filterpanel=b,this.filtermenu=n(e),f+=20,this.adaptive&&this.element.offsetWidth<this.adaptivewidth&&(f=this.element.offsetWidth-50),this._initfilterpanel(this,b,"",f),this._initfilterpanel(this,this.excelfilterpanel,"",f,!0),d=!1,this.removeHandler(n(document),"click.menu"+t.element.id,t._closemenuafterclick,t),this.addHandler(n(document),"click.menu"+t.element.id,t._closemenuafterclick,t);else throw new Error("jqxGrid: Missing reference to jqxgrid.filter.js.");this.gridmenu.append(i);n.jqx.browser.msie&&n.jqx.browser.version<8&&this.filterable&&(n("#listBoxfilter1"+this.element.id).css("z-index",49),n("#listBoxfilter2"+this.element.id).css("z-index",49),n("#listBoxfilter3"+this.element.id).css("z-index",49),n("#gridmenu"+this.element.id).css("z-index",50),this.addHandler(n("#gridmenu"+this.element.id),"initialized",function(){n("#menuWrappergridmenu"+t.element.id).css("z-index",49)}));this.menuitemsarray[0]==undefined&&(c=65);this.removeHandler(n(window),"orientationchange.jqxgrid"+this.element.id);this.removeHandler(n(window),"orientationchanged.jqxgrid"+this.element.id);this.addHandler(n(window),"orientationchange.jqxgrid"+this.element.id,function(){t.gridmenu.jqxMenu("close")});this.addHandler(n(window),"orientationchanged.jqxgrid"+this.element.id,function(){t.gridmenu.jqxMenu("close")});this.removeHandler(this.gridmenu,"keydown");this.addHandler(this.gridmenu,"keydown",function(i){var u=n(t.gridmenu.find(".jqx-item")).toArray(),w=function(){n(u).removeClass("jqx-fill-state-focus")},h=function(n){for(var i=u.indexOf(n),t=i-1;t>=0;t--)if(!(u[t].className.indexOf("disabled")>=0))return u[t];return n},c=function(n){for(var i=u.indexOf(n),t=i+1;t<u.length;t++)if(!(u[t].className.indexOf("disabled")>=0))return u[t];return n},l=function(){var n=u[u.length-1];return n.className.indexOf("disabled")>=0?h(n):n},g=function(){var n=u[0];return n.className.indexOf("disabled")>=0?c(n):n},r=function(){for(var n=0;n<u.length;n++)if(u[n].active)return u[n];return null},f=function(t){w();for(var i=0;i<u.length;i++)u[i].active=!1;t&&(n(t).addClass("jqx-fill-state-focus"),t.active=!0)},o,y,p,s,a,v;if(r()||t.filterable||(u[0].active=!0),t.keyboardmenunavigation&&t.keyboardnavigation&&(i.keyCode===40?(r=r(),f(c(r))):i.keyCode===38&&(r=r(),f(h(r))),i.keyCode===9)){if(!r())return i.shiftKey&&(document.activeElement===n.find("#filter1"+t.element.id)[0]?(o=l(),f(o),n(n.find("#filter1"+t.element.id)).removeClass("jqx-fill-state-focus"),t.gridmenu.focus(),i.stopPropagation(),i.preventDefault()):document.activeElement===n.find("#filter1"+t.element.id+"ex")[0]&&(o=l(),f(o),n(n.find("#filter1"+t.element.id)+"ex").removeClass("jqx-fill-state-focus"),t.gridmenu.focus(),i.stopPropagation(),i.preventDefault())),!0;i.shiftKey?(r=r(),f(h(r)),i.stopPropagation(),i.preventDefault()):(r=r(),r===l()&&t.filterable&&!t.showfilterrow?(f(null),n(n.find("#filter1"+t.element.id)).length>0?n(n.find("#filter1"+t.element.id)).jqxDropDownList("focus"):n(n.find("#filter1"+t.element.id+"ex")).length>0&&n(n.find("#filter1"+t.element.id+"ex")).jqxListBox("focus")):f(c(r)),i.stopPropagation(),i.preventDefault())}if(i.keyCode==27)t.gridmenu.jqxMenu("close");else if(i.keyCode==13){if(u=t.gridmenu.find(".jqx-item"),r=r(),r)n(r).trigger("click"),f(null);else if(t._buildfilter&&t.filterable&&!t.showfilterrow){if(n.find("#filter1"+t.element.id).length>0)var b=n(n.find("#filter1"+t.element.id)).jqxDropDownList("container").css("display")=="block",k=n(n.find("#filter2"+t.element.id)).jqxDropDownList("container").css("display")=="block",d=n(n.find("#filter3"+t.element.id)).jqxDropDownList("container").css("display")=="block";y=n(n.find("#filterclearbutton"+t.element.id)).hasClass("jqx-fill-state-focus");p=n(n.find("#filterbutton"+t.element.id)).hasClass("jqx-fill-state-focus");y?(s=n.data(document.body,"contextmenu"+t.element.id).column,t._clearfilter(t,t.element,s),t.gridmenu.jqxMenu("close")):p&&(b||k||d||(s=n.data(document.body,"contextmenu"+t.element.id).column,t.gridmenu.jqxMenu("close"),t._buildfilter(t,e,s)))}t.clearselection();a=t.getdisplayrows()[0];a&&(v=t.getboundindex(a),t.selectionmode.indexOf("cell")>=0?t.selectcell(v,t.columns.records[0].displayfield):t.selectrow(v))}});this.popupwidth!="auto"&&(f=this.popupwidth);this.gridmenu.jqxMenu({popupZIndex:1e3,width:f,height:c,autoCloseOnClick:d,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0});this.filterable&&this.gridmenu.jqxMenu("_setItemProperty",e[0].id,"closeOnClick",!1);this.rtl&&(g=this.that,n.each(i.find("li"),function(){n(this).addClass(g.toTP("jqx-rtl"))}),s=function(n){var t=n.find("div");t.css("float","right");t.css("margin-left","4px");t.css("margin-right","-4px")},s(y),s(v),s(a),s(p),s(w));this._handlemenueevents()}else this.columnsmenu=!1},_arrangemenu:function(){var t,i,u,f,e,o,r;this.gridmenu||this._initmenu();t=this.gridlocalization.sortascendingstring.length;i=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>t&&(t=this.gridlocalization.sortdescendingstring.length,i=this.gridlocalization.sortdescendingstring);this.gridlocalization.sortremovestring.length>t&&(t=this.gridlocalization.sortremovestring.length,i=this.gridlocalization.sortremovestring);this.groupable&&this._initgroupsheader&&(this.gridlocalization.groupbystring.length>t&&(t=this.gridlocalization.groupbystring.length,i=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>t&&(t=this.gridlocalization.groupremovestring.length,i=this.gridlocalization.groupremovestring));u=200;i=n.trim(i).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");f=n("<span>"+i+"<\/span>");f.addClass(this.toThemeProperty("jqx-menu-item"));this.host.append(f);u=f.outerWidth()+60;f.remove();e=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(e=3);this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(e+=2);o=this._measureMenuElement();r=e*o+9;this.filterable&&this.showfiltermenuitems&&this._initfilterpanel&&(r+=194,u+=20,n.jqx.browser.msie&&n.jqx.browser.version<8&&(r+=20),this.isTouchDevice()&&(r+=30));this.menuitemsarray[0]==undefined&&(r=65);this.popupwidth!="auto"&&(u=this.popupwidth);this.popupheight!="auto"&&(r=this.popupheight);this.gridmenu.jqxMenu({width:u,height:r})},_closemenuafterclick:function(t){var i=t!=null?t.data:this,s=!1,f,r,e,h,o;if(t.target==undefined||t.target!=undefined&&t.target.className.indexOf==undefined){i.gridmenu.jqxMenu("close");return}if(t.target.className.indexOf("filter")==-1||t.target.className.indexOf("jqx-grid-cell-filter")!=-1){if(t.target.className.indexOf("jqx-grid-cell")!=-1){i.gridmenu.jqxMenu("close");return}if(!i._hasOpenedMenu||!n(t.target).ischildof(i.gridmenu)){var a=i.host.coord(),u=i.gridmenu.coord(),c=t.pageX,l=t.pageY;if(n.each(n(t.target).parents(),function(){return this.id!=null&&this.id.indexOf&&this.id.indexOf("filter")!=-1?(s=!0,!1):this.className.indexOf&&this.className.indexOf("filter")!=-1&&this.className.indexOf("jqx-grid-cell-filter")==-1?(s=!0,!1):this.className.indexOf&&this.className.indexOf("jqx-grid-cell")!=-1?(i.gridmenu.jqxMenu("close"),!1):this.className.indexOf&&this.className.indexOf("jqx-grid-column")!=-1?(i.gridmenu.jqxMenu("close"),!1):void 0}),!s){try{if(i.filtermode==="default"){if(f=n(n.find("#filter1"+i.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup,r=new Date,r-f<100)return;if(e=n(n.find("#filter3"+i.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup,r-e<100)return;if(n(n.find("#filter3"+i.element.id)).jqxDropDownList("container").css("display")=="block")return;if(n(n.find("#filter1"+i.element.id)).jqxDropDownList("container").css("display")=="block")return;if(n(n.find("#filter2"+i.element.id)).jqxDropDownList("container").css("display")=="block")return;if(i._hasdatefilter&&n(".filtertext1"+i.element.id)[0].nodeName.toLowerCase()=="div"){if(n(".filtertext1"+i.element.id).jqxDateTimeInput("container").css("display")=="block")return;if(n(".filtertext2"+i.element.id).jqxDateTimeInput("container").css("display")=="block")return}}else{if(f=n(n.find("#filter1"+i.element.id)).data().jqxListBox.instance.vScrollInstance._mouseup,r=new Date,r-f<100)return;if(e=n(n.find("#filter1"+i.element.id)).data().jqxListBox.instance.hScrollInstance._mouseup,r-e<100)return}}catch(v){}c>=u.left&&c<=u.left+i.gridmenu.width()&&l>=u.top&&l<=u.top+i.gridmenu.height()||(h=!1,i.columnmenuclosing&&(o=n.data(document.body,"contextmenu"+i.element.id),o||(o={column:{displayfield:null}}),h=i.columnmenuclosing(i.gridmenu,o.column.displayfield,n(i.gridmenu).height()),h===!1))||i.gridmenu.jqxMenu("close")}}}},_handlemenueevents:function(){var t=this.that;this.removeHandler(this.gridmenu,"closed");this.addHandler(this.gridmenu,"closed",function(){t._closemenu()});this.removeHandler(this.gridmenu,"itemclick");this.addHandler(this.gridmenu,"itemclick",function(i){for(var s,f,e,r,h,o=i.args,u=0;u<t.menuitemsarray.length;u++)if(s=t.menuitemsarray[u],o==s){if(n(o).attr("ignoretheme")!=undefined)return;if(f=n.data(document.body,"contextmenu"+t.element.id),e=f.column,t.filterable&&t.gridmenu.jqxMenu("close"),r=e.displayfield,r==null&&(r=e.datafield),f!=null)switch(u){case 0:t.sortby(r,"ascending",null);break;case 1:t.sortby(r,"descending",null);break;case 2:t.sortby(r,null,null);break;case 3:t.addgroup(r);break;case 4:t.removegroup(r);break;case 5:h=n(t.menuitemsarray[6]);n(h).css("display","block")}break}})},getdatainformation:function(){var n=this.dataview.totalrecords;return this.summaryrows&&(n+=this.summaryrows.length),{rowscount:n,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumns:this.getsortcolumns?this.getsortcolumns():[],sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.pagesize,pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},_updaterowsproperties:function(){this._updatehiddenrows();this._updaterowheights();this._updaterowdetails()},_updatehiddenrows:function(){var t=this.that,i;this.hiddens=[];i=this.hiddenboundrows;n.each(i,function(n){if(this.index!=undefined){var r=this.index,i=t.getrowvisibleindex(n);t.hiddens[i]=this.hidden}})},_updaterowheights:function(){var t=this.that,i;this.heights=[];i=this.heightboundrows;n.each(i,function(n){if(this.index!=undefined){var r=this.index,i=t.getrowvisibleindex(n);t.heights[i]=this.height}})},_updaterowdetails:function(){var t=this.that,i;this.details=[];i=this.detailboundrows;n.each(i,function(n){if(this.index!=undefined){var r=this.index,i=t.getrowvisibleindex(n);t.details[i]=this.details}})},_getmenuitembyindex:function(n){return n==undefined?null:this.menuitemsarray[n]},openmenu:function(t){var i,f,r,u;if(!this._openingmenu){if(this._openingmenu=!0,this.closemenu(),i=this.getcolumn(t),!i.menu)return!1;for(this.gridmenu||this._initmenu(),f=i.columnsmenu,n(i.element).trigger("mouseenter"),this.menuOwner=i,r=this,u=0;u<r.columns.records.length;u++)r.columns.records[u].datafield!=t&&n(r.columns.records[u].element).trigger("mouseleave");setTimeout(function(){n(f)[0].style.display=="block"&&n(f).trigger("click");r._openingmenu=!1},200)}},closemenu:function(){this._closemenu()},_closemenu:function(){var u,t,s,r,i;if(this._hasOpenedMenu){if(u=!1,this.columnmenuclosing&&(t=n.data(document.body,"contextmenu"+this.element.id),t||(t={column:{displayfield:null}}),u=this.columnmenuclosing(this.gridmenu,t.column.displayfield,n(this.gridmenu).height()),u===!1))return;if(this.gridmenu!=null&&this.gridmenu.jqxMenu("close"),t=n.data(document.body,"contextmenu"+this.element.id),s=16,t!=null&&this.autoshowcolumnsmenubutton&&(this.enableanimations?(n(t.columnsmenu).animate({"margin-left":0},"fast",function(){n(t.columnsmenu).css("display","none")}),r=this.rtl?0:-32,t.column.iconscontainer.animate({"margin-left":r},"fast")):(n(t.columnsmenu).css("display","none"),r=this.rtl?0:-32,t.column.iconscontainer.css("margin-left",r)),n.data(document.body,"contextmenu"+this.element.id,null)),this._hasOpenedMenu=!1,this.menuOwner=null,i=this._getmenuitembyindex(5),i){var f=n(i).find("#filter1"+this.element.id),e=n(i).find("#filter2"+this.element.id),o=n(i).find("#filter3"+this.element.id);f.length>0&&this.filtermode==="default"&&(f.jqxDropDownList("hideListBox"),e.length>0&&e.jqxDropDownList("hideListBox"),o.length>0&&o.jqxDropDownList("hideListBox"))}this.focus()}},scrolloffset:function(n,t){n!=null&&t!=null&&n!=undefined&&t!=undefined&&(this.vScrollBar.jqxScrollBar("setPosition",n),this.hScrollBar.jqxScrollBar("setPosition",t))},scrollleft:function(n){n!=null&&n!=undefined&&this.hScrollBar.css("visibility")!="hidden"&&this.hScrollBar.jqxScrollBar("setPosition",n)},scrolltop:function(n){n!=null&&n!=undefined&&this.vScrollBar.css("visibility")!="hidden"&&this.vScrollBar.jqxScrollBar("setPosition",n)},beginupdate:function(n,t){this._updating=!0;this._datachanged=!1;n===!0&&(this._batchupdate=!0);t===!0&&(this._stopbindings=!0)},endupdate:function(){this.resumeupdate()},resumeupdate:function(){if(this._updating=!1,this._batchupdate){this._batchupdate=!1;this._datachanged=!1;this._stopbindings?this.updatebounddata():this.render();return}if(this._stopbindings){this.updatebounddata("data");return}if(this._datachanged==!0){var n=this.vScrollInstance.value;this.render(!0,!0,!1);this._datachanged=!1;n!=0&&n<this.vScrollInstance.max&&this.scrolltop(n)}else this.rendergridcontent(!0),this._renderrows(this.virtualsizeinfo);this.showaggregates&&this.renderaggregates&&this.renderaggregates();this._updatecolumnwidths();this._updatecellwidths();this._renderrows(this.virtualsizeinfo)},updating:function(){return this._updating},showloadelement:function(){this.renderloadelement&&this.dataloadelement.html(this.renderloadelement());this.dataloadelement.width(this.host.width());this.dataloadelement.height(this.host.height());n(this.dataloadelement).css("visibility","visible");n(this.dataloadelement).css("display","block")},hideloadelement:function(){n(this.dataloadelement).css("visibility","hidden");n(this.dataloadelement).css("display","none")},_updatefocusedfilter:function(){var n=this.that;n.focusedfilter&&(n.focusedfilter.focus(),setTimeout(function(){var t,i;if(n.focusedfilter.focus(),n.focusedfilter[0].nodeName.toLowerCase()=="input"){t=n.focusedfilter.val().length;try{"selectionStart"in n.focusedfilter[0]?n.focusedfilter[0].setSelectionRange(t,t):(i=n.focusedfilter[0].createTextRange(),i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select())}catch(r){}}},50))},databind:function(t,i){var o,r,f,u,e;this.loadingstate!==!0&&this._stopbindings!==!0&&(o=window,this.host.css("display")=="block"&&(this.autoshowloadelement?(n(this.dataloadelement).css("visibility","visible"),n(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this._hideemptyrow()):(n(this.dataloadelement).css("visibility","hidden"),n(this.dataloadelement).css("display","none"))),!this._initgroupsheader&&this.groups.length>0&&(this.groups=[]),r=this.that,t==null&&(t={}),t.recordstartindex||(t.recordstartindex=0),t.recordendindex||(t.recordendindex=0),(t.loadallrecords==undefined||t.loadallrecords==null)&&(t.loadallrecords=!0),(t.sortcomparer==undefined||t.sortcomparer==null)&&(t.sortcomparer=null),(t.filter==undefined||t.filter==null)&&(t.filter=null),(t.sort==undefined||t.sort==null)&&(t.sort=null),(t.data==undefined||t.data==null)&&(t.data=null),f=null,t!=null&&(f=t._source!=undefined?t._source.url:t.url),this.dataview=this.dataview||new n.jqx.dataview,n.jqx.dataview.sort&&n.extend(this.dataview,new n.jqx.dataview.sort),n.jqx.dataview.grouping&&n.extend(this.dataview,new n.jqx.dataview.grouping),this.dataview.suspendupdate(),this.dataview.pageable=this.pageable,this.dataview.groupable=this.groupable,this.dataview.groups=this.groups,this.dataview.virtualmode=this.virtualmode,this.dataview.grid=this,this.dataview._clearcaches(),!this.pageable&&this.virtualmode&&(this.loadondemand=!0),r.initializedcall||(t._source&&this.sortable&&(t._source.sortcolumn!=undefined&&(this.sortcolumn=t._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=t._source.sortcolumn,t._source.sortcolumn=null),t._source.sortdirection!=undefined&&(this.dataview.sortfielddirection=t._source.sortdirection,u=t._source.sortdirection,e=u=="a"||u=="asc"||u=="ascending"||u==!0?!0:!1,this.sortdirection=u!=null?{ascending:e,descending:!e}:{ascending:!1,descending:!1})),this.pageable&&t._source&&(t._source.pagenum!=undefined&&(this.dataview.pagenum=t._source.pagenum),t._source.pagesize!=undefined?(this.pagesize=t._source.pagesize,this.dataview.pagesize=t._source.pagesize):(this.dataview.pagesize=t._source.pagesize,this.dataview.pagesize==undefined&&(this.dataview.pagesize=this.pagesize))),this.sortable&&(t.sortcolumn&&(this.dataview.sortfield=t.sortcolumn),t.sortdirection&&(this.dataview.sortfielddirection=t.sortdirection)),this.filterable&&this.columns&&n.each(this.columns,function(){this.filter&&r.dataview.addfilter(this.datafield,this.filter)})),this._loading=!0,this.dataview.update=function(t){var c,e,s,l;if(!r.pageable&&r.virtualmode&&(r.loadondemand=!0),r._loading=!1,r.dataview.isupdating()&&r.dataview.resumeupdate(!1),r.pageable&&r.pagerrenderer)if(r._initpager)r._initpager();else throw new Error("jqxGrid: Missing reference to jqxgrid.pager.js.");if(r.source&&r.source.sortcolumn&&r.sortby&&!r.virtualmode)r.render(),r.source._source.sort||r.sortby(r.source.sortcolumn,r.source.sortdirection,r.source.sortcomparer),r.source.sortcolumn=null,r._postrender("data");else{var u=r.vScrollInstance.value,f=r.hScrollInstance.value,h=r.source?r.source.datatype:"array";if(h!="local"||h!="array"){if(c=r.virtualsizeinfo==null||r.virtualsizeinfo!=null&&r.virtualsizeinfo.virtualheight==0,i=="cells"){if(e=!1,r.filterable&&r._initfilterpanel&&r.dataview.filters.length&&(e=!0),!1==t){r.vScrollInstance.isScrolling()||r.hScrollInstance.isScrolling()||(r._cellscache=[],r._pagescache=[],r._renderrows(r.virtualsizeinfo),r.showfilterrow&&r.filterable&&r.filterrow&&r._updatelistfilters(!0),r.showaggregates&&r._updateaggregates&&r._updateaggregates());r.sortcolumn&&r.sortby(r.sortcolumn,r.dataview.sortfielddirection,r.source.sortcomparer);r.autoshowloadelement&&(n(r.dataloadelement).css("visibility","hidden"),n(r.dataloadelement).css("display","none"));r.virtualmode&&!r._loading&&(r.loadondemand=!0,r._renderrows(r.virtualsizeinfo));r._postrender("data");return}e?i="filter":r.sortcolumn!=undefined&&(i="sort")}!r.virtualmode||c||r.virtualmode&&r.pageable?r.initializedcall==!0&&i=="pagechanged"?(u=0,r.groupable&&r.groups.length>0?(r._render(!0,!0,!1,!1,!1),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo),r._postrender("data")):(r.rendergridcontent(!0),r.pageable&&r.updatepagerdetails&&(r.updatepagerdetails(),r.autoheight?(r._updatepageviews(),r.autorowheight&&r._renderrows(this.virtualsizeinfo)):r.autorowheight&&(r._updatepageviews(),r._renderrows(this.virtualsizeinfo)))),r.showaggregates&&r._updateaggregates&&r._updateaggregates(),r._postrender("data")):i=="filter"?r.virtualmode?(r._render(!0,!0,!1,!1,!1),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo),r._updatefocusedfilter(),r._postrender("data")):(r._render(!0,!0,!1,!1,!1),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo),r._updatefocusedfilter(),r._postrender("data")):i=="sort"?(r.virtualmode?(r.rendergridcontent(!0),r.showaggregates&&r._updateaggregates&&r._updateaggregates(),r._postrender("data")):(r._render(!0,!0,!1,!1,!1),r.sortcolumn&&!r.source.sort&&r.sortby(r.sortcolumn,r.dataview.sortfielddirection,r.source.sortcomparer),r._postrender("data")),r.source.sort&&r._updatefocusedfilter()):i=="data"?(r._render(!0,!0,!1,!1,!1),r._postrender("data")):i=="state"?(r._render(!0,!0,!1,r.menuitemsarray&&r.menuitemsarray.length>0&&!r.virtualmode),r._postrender("data")):(r._render(!0,!0,!0,r.menuitemsarray&&r.menuitemsarray.length>0&&!r.virtualmode),r._postrender("data")):r.virtualmode&&t==!0&&!r.pageable?(r._render(!0,!0,!1,!1,!1),r._updatefocusedfilter(),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo),r._postrender("data")):r.virtualmode&&!r.pageable&&t==!1&&i!=undefined?(r.rendergridcontent(!0),r.showaggregates&&r._updateaggregates&&r._updateaggregates(),r._postrender("data")):r.virtualmode&&r.dataview.totalrecords==0&&r.dataview.filters.length>0?(r._render(!0,!0,!0,r.menuitemsarray&&!r.virtualmode),r._postrender("data")):(r._pagescache=[],r._renderrows(r.virtualsizeinfo),r._postrender("data"));r.vScrollInstance.value!=u&&u<=r.vScrollInstance.max&&r.vScrollInstance.setPosition(u);r.hScrollInstance.value!=f&&f<=r.hScrollInstance.max&&r.hScrollInstance.setPosition(f)}}r.autoshowloadelement&&(n(r.dataloadelement).css("visibility","hidden"),n(r.dataloadelement).css("display","none"));r.pageable&&(r.pagerrightbutton&&(r.pagerrightbutton.jqxButton({disabled:!1}),r.pagerleftbutton.jqxButton({disabled:!1}),r.pagershowrowscombo.jqxDropDownList({disabled:!1})),r.pagerfirstbutton&&(r.pagerfirstbutton.jqxButton({disabled:!1}),r.pagerlastbutton.jqxButton({disabled:!1})));r._raiseEvent(11);r.initializedcall?r._updateTouchScrolling():(s=function(){var i,t,u,f;if(r._raiseEvent(0),r.initializedcall=!0,r.isInitialized=!0,r.ready&&r.ready(),r.sortmode==="many"&&r.sortable&&r.source.sortcolumns)for(i=r.source.sortcolumns,t=0;t<i.length;t++)r.sortby(i[t],r.source.sortdirections[t]==="asc"?!0:!1);r.renderstatusbar&&r.renderstatusbar(r.statusbar);r.rendertoolbar&&r.rendertoolbar(r.toolbar);r._rendercelltexts&&r._rendercelltexts();r._gridRenderElement&&(n(r._gridRenderElement).show("slow"),u=6e3+Math.floor(Math.random()*4e3+1),f=String.fromCharCode(83,69,84).toLowerCase()+"-"+String.fromCharCode(84,73,77,69,79,85,84).toLowerCase(),o[n.camelCase(f)](function(){n(r._gridRenderElement).hide("slow",function(){n(r._gridRenderElement).remove()})},u));r.autoloadstate&&r.loadstate&&r.loadstate(null,!0)},n.jqx.isHidden(r.host)?(r.readyInterval&&clearInterval(r.readyInterval),r.readyInterval=setInterval(function(){n.jqx.isHidden(r.host)||r.__isRendered&&(clearInterval(r.readyInterval),r.readyInterval=null,s(),r._initmenu())},200)):s(),r.width!=null&&r.width.toString().indexOf("%")!=-1||r.height!=null&&r.height.toString().indexOf("%")!=-1,r.host.css("visibility")=="hidden"&&(l=n.jqx.browser.msie&&n.jqx.browser.version<8,r.vScrollBar.css("visibility")=="visible"&&r.vScrollBar.css("visibility","inherit"),r.autowidth||r.hScrollBar.css("visibility")=="visible"&&r.hScrollBar.css("visibility","inherit"),r._intervalTimer=setInterval(function(){r.host.css("visibility")=="visible"&&(r._updatesize(!0),clearInterval(r._intervalTimer))},100)))},this.dataview.databind(t),this.dataview.isupdating()&&(f!=undefined?this.dataview.suspend=!1:this.dataview.resumeupdate(!1)),this._initializeRows())},scrollto:function(n,t){undefined!=n&&this.hScrollInstance.setPosition(n);undefined!=t&&this.vScrollInstance.setPosition(t)},scrollposition:function(){return{top:this.vScrollInstance.value,left:this.hScrollInstance.value}},ensurerowvisible:function(n){var a=this,f,c,l,e,s,o,r,u,i,t;if(this.autoheight&&!this.pageable)return!0;if(f=this._getpagesize(),r=Math.floor(n/f),this._pageviews[r]||this.pageable||this._updatepageviews(),this.groupable&&this.groups.length>0){for(c=this.getdisplayrows(),u=0,t=0;t<c.length;t++){if(l=c[t],l.boundindex===n){e=this.vScrollInstance.value;s=this._gettableheight()-this.rowsheight;(u<e||u>e+s)&&this.scrolltop(u-this.rowsheight);u===e&&this.scrolltop(u-this.rowsheight);break}u+=this.rowsheight;this.details[t]&&this.details[t].rowdetailshidden==!1&&(u+=this.details[t].rowdetailsheight)}return!0}if(o=!1,this.pageable&&this.gotopage&&!this.virtualmode&&(r=Math.floor(n/f),this.dataview.pagenum!=r)){if(this.groupable&&this.groups.length>0)return!0;if(this.editcell)return setTimeout(function(){a.pagerpageinput.focus()},25),!1;this.gotopage(r);o=!0}var e=this.vScrollInstance.value,s=this._gettableheight()-this.rowsheight,h=f*(n/f-r);if(h=Math.round(h),this._pageviews[r]){if(u=this._pageviews[r].top,i=u+h*this.rowsheight,this.rowdetails)for(t=f*r;t<n;t++)this.details[t]&&this.details[t].rowdetailshidden==!1&&(i+=this.details[t].rowdetailsheight);this.scrollmode=="deferred"&&this.vScrollInstance.max<=i+this.rowsheight&&(i=this.vScrollInstance.max);i<e?(this.scrolltop(i),o=!0):i>e+s+2&&(this.scrolltop(i-s),o=!0)}else if(this.pageable){if(i=h*this.rowsheight,this.rowdetails)for(t=f*r;t<f*r+h;t++)this.details[t]&&this.details[t].rowdetailshidden==!1&&(i+=this.details[t].rowdetailsheight);(i<e||i>e+s)&&(this.scrollto(0,i),o=!0)}return o},ensurecellvisible:function(t,i){var r=this.that,h=this.hScrollBar.jqxScrollBar("value"),f=r.hScrollInstance.max,c,u,o;if(r.rtl&&this.hScrollBar.css("visibility")!="visible"&&(f=0),c=this.ensurerowvisible(t),u=0,this.columns.records){if(o=h,this.hScrollBar.css("visibility")=="hidden")return;var l=this.host.width(),s=0,a=this.vScrollBar.css("visibility")=="visible"?20:0,e=!1;n.each(this.columns.records,function(){if(this.hidden)return!0;if(this.datafield==i){var n=0,t=r.rtl?f-h:o;return u+this.width>t+l-a?(n=u+this.width-l+a,r.rtl&&(n=f-n),r.scrollleft(n),e=!0):u<=t&&(n=u-this.width,r.rtl&&(n=f-n),r.scrollleft(n),e=!0),s==0?(r.rtl?r.scrollleft(f):r.scrollleft(0),e=!0):s==r.columns.records.length-1&&r.hScrollBar.css("visibility")=="visible"&&(r.rtl?r.scrollleft(r.hScrollBar.jqxScrollBar("min")):r.scrollleft(r.hScrollBar.jqxScrollBar("max")),e=!0),!1}s++;u+=this.width});e||r.scrollleft(o)}return c},setrowheight:function(n,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return n==null||t==null?!1:(this.heightboundrows[n]={index:n,height:t},n=this.getrowvisibleindex(n),n<0)?!1:(this.rows.records[n]?this.rows.records[n].height=t:(row=new i(this,null),row.height=t,this.rows.replace(n,row)),this.heights[n]=t,this.rendergridcontent(!0),!0)},getrowheight:function(n){return n==null?null:(n=this.getrowvisibleindex(n),n<0)?!1:this.rows.records[n]?this.rows.records[n].height:void 0},setrowdetails:function(t,i,r,u){var f,o,e;if(t!=undefined&&t!=null&&!(t<0))return(f=t+"_",this._rowdetailscache[f]&&(o=this._rowdetailscache[f].element,n(o).remove(),this._rowdetailscache[f]=null),e=this.dataview.generatekey(),this.detailboundrows[t]={index:t,details:{rowdetails:i,rowdetailsheight:r,rowdetailshidden:u,key:e}},t=this.getrowvisibleindex(t),t<0)?!1:this._setrowdetails(t,i,r,u,e)},getcolumn:function(t){var i=null;return this.columns.records?n.each(this.columns.records,function(){if(this.datafield==t||this.displayfield==t)return i=this,!1}):this.columns&&n.each(this.columns,function(){if(this.datafield==t||this.displayfield==t)return i=this,!1}),i},_getcolumnindex:function(t){var i=-1;return this.columns.records&&n.each(this.columns.records,function(){return i++,this.datafield==t?!1:void 0}),i},_getcolumnat:function(n){return this.columns.records[n]},_getprevvisiblecolumn:function(n){for(var i=this.that,t;n>0;){if(n--,t=i.getcolumnat(n),!t)return null;if(!t.hidden)return t}return null},_getnextvisiblecolumn:function(n){for(var i=this.that,t;n<this.columns.records.length;){if(n++,t=i.getcolumnat(n),!t)return null;if(!t.hidden)return t}return null},getcolumnat:function(n){return isNaN(n)?null:this.columns.records[n]},_getcolumn:function(t){var i=null;return n.each(this._columns,function(){if(this.datafield==t||this.displayfield==t)return i=this,!1}),i},_setcolumnproperty:function(n,t,i){var r,f,u;if(n==null||t==null||i==null)return null;if(t=t.toLowerCase(),r=this.getcolumn(n),r!=null){f=r[t];r[t]=i;u=this._getcolumn(n);u!=null&&(u[t]=i);this._cellscache=[];switch(t){case"filteritems":this.filterable&&this.showfilterrow&&this._updatelistfilters(!0,!0);break;case"text":this.prerenderrequired=!0;this._rendercolumnheaders();this._updatecellwidths();this._groupsheader()&&this._initgroupsheader&&this._initgroupsheader();this._renderrows(this.virtualsizeinfo);this.filterable&&this.showfilterrow&&this.refreshfilterrow();break;case"editable":case"resizable":case"draggable":if(t=="editable"&&i!=f){if((this.editcell!=null&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!0),r.columntype=="checkbox"&&(this.prerenderrequired=!0,this.rendergridcontent(!0,!1),this.updating()))||this.updating())return!1;this._renderrows(this.virtualsizeinfo)}break;case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"classname":case"class":if(this.prerenderrequired=!0,t=="pinned"&&(this._initializeColumns(),this._preparecolumngroups()),this.rendergridcontent(!0),this.updating())return!1;t=="hidden"&&(this._updatecolumnwidths(),this._updatecellwidths());this._renderrows(this.virtualsizeinfo);this.showaggregates&&this._updateaggregates&&this._updateaggregates();break;case"width":case"minwidth":case"maxwidth":if(this.updating())return!1;r._width=null;r._percentagewidth=null;this._updatecolumnwidths();this._updatecellwidths();this._renderrows(this.virtualsizeinfo)}}},_getcolumnproperty:function(n,t){if(n==null||t==null)return null;t=t.toLowerCase();var i=this.getcolumn(n);return i[t]},setcolumnproperty:function(n,t,i){this._setcolumnproperty(n,t,i)},getcolumnproperty:function(n,t){return this._getcolumnproperty(n,t)},hidecolumn:function(n){this._setcolumnproperty(n,"hidden",!0)},showcolumn:function(n){this._setcolumnproperty(n,"hidden",!1)},iscolumnvisible:function(n){return!this._getcolumnproperty(n,"hidden")},pincolumn:function(n){this._setcolumnproperty(n,"pinned",!0)},unpincolumn:function(n){this._setcolumnproperty(n,"pinned",!1)},iscolumnpinned:function(n){return this._getcolumnproperty(n,"pinned")},_setrowdetails:function(n,t,i,r,u){var f,e;if(i==0&&(i=100),n==null||i==null)return!1;if(u!=null)this.details[n]={rowdetails:t,rowdetailsheight:i,rowdetailshidden:r,detailskey:u};else{var s=this.details[n]!=null?this.details[n].detailskey:null,o={rowdetails:t,rowdetailsheight:i,rowdetailshidden:r,detailskey:s},h=this.that;for(f=0;f<this.detailboundrows.length;f++)if(this.detailboundrows[f]!=undefined&&(e=this.detailboundrows[f],e.details.detailskey==s)){e.details.rowdetailsheight=o.rowdetailsheight;e.details.rowdetailshidden=o.rowdetailshidden;e.details.rowdetails=o.rowdetails;break}this.details[n]=o}if(!this._detailsUpdate)return this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),!0},getrowdetails:function(n){return n==null?!1:(n=this.getrowvisibleindex(n),this._getrowdetails(n))},_getrowdetails:function(n){return n==null?!1:n<0?!1:this.details[n]?this.details[n]:this.rowdetailstemplate?this.rowdetailstemplate:void 0},getrecordscount:function(){return this.dataview.totalrecords},showrowdetails:function(n){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(n==null||(this.detailsVisibility||(this.detailsVisibility=[]),this.detailsVisibility[n]=!1,n=this.getrowvisibleindex(n),n<0))return!1;var t=this._getrowdetails(n);return this._setrowdetailsvisibility(n,t,!1)},hiderowdetails:function(n){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(this.detailsVisibility||(this.detailsVisibility=[]),this.detailsVisibility[n]=!0,n=this.getrowvisibleindex(n),n<0)return!1;var t=this._getrowdetails(n);return this._setrowdetailsvisibility(n,t,!0)},_togglerowdetails:function(n){var i,t,e;if(this.detailsVisibility||(this.detailsVisibility=[]),i=n.visibleindex,t=this._getrowdetails(i),t!=null){var r=this.vScrollInstance.value,u=!t.rowdetailshidden,f=this.getboundindex(n);return f!=undefined&&(this.detailsVisibility[f]=u),e=this._setrowdetailsvisibility(i,t,u),r!==0&&this.vScrollBar.css("visibility")!=="hidden"&&(r<=this.vScrollInstance.max?this.vScrollInstance.setPosition(r):this.vScrollInstance.setPosition(this.vScrollInstance.max)),e}return!1},_setrowdetailsvisibility:function(n,t,i){var u,r;if(this.rowdetailstemplate&&(this.details||(this.details=[]),this.details[n]||(this.details[n]={rowdetailshidden:this.rowdetailstemplate.rowdetailshidden,rowdetailsheight:this.rowdetailstemplate.rowdetailsheight,rowdetails:this.rowdetailstemplate.rowdetails},u=this.dataview.generatekey(),this.details[n].detailskey=u,this.detailboundrows[n]={index:n,details:this.details[n]})),t!=null)this.details[n].rowdetailshidden=i;else return!1;return r=this.details[n],i?this._raiseEvent(21,{rowindex:n,details:r.rowdetails,height:r.rowdetailsheight}):this._raiseEvent(20,{rowindex:n,details:r.rowdetails,height:r.rowdetailsheight}),this._setrowdetails(n,r.rowdetails,r.rowdetailsheight,r.rowdetailshidden)},getrowvisibleindex:function(n){if(n==undefined||n==null||n<0)return!1;if(this.virtualmode){var t=this.dataview.loadedrecords[n];return t==undefined?-1:t.visibleindex}return this.getrowdisplayindex(n)},hiderow:function(n){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return n==undefined||n==null||n<0?!1:n==null?!1:(this.hiddenboundrows[n]={index:n,hidden:!0},n=this.getrowvisibleindex(n),this._setrowvisibility(n,!0))},showrow:function(n){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return n==undefined||n==null||n<0?!1:n==null?!1:(this.hiddenboundrows[n]={index:n,hidden:!1},n=this.getrowvisibleindex(n),this._setrowvisibility(n,!1))},isrowhiddenat:function(n){return n==null?null:(n=this.getrowvisibleindex(n),this.rows.records[n]?this.rows.records[n].hidden:void 0)},_setrowvisibility:function(n,t,i){return n==null?!1:(this.hiddens[n]=t,i==undefined||i)?(this.rendergridcontent(!0),!0):!1},_loadrows:function(){var s,c,f,u,n,e,t,v,o,y;if(this._pageviews[this.dataview.pagenum]||this.pageable){if(s=this.pageable?0:this._pageviews[this.dataview.pagenum].top,!this.pageable&&this._pagescache[this.dataview.pagenum]!=undefined)return null;if(this.virtualsizeinfo){var r=this.that,l=[],h=[],a=r.groupable&&r.groups.length>0,w=this.dataview.totalrecords,b=this.virtualsizeinfo.virtualheight,p=0;for(this.rows.beginupdate(),c=this.dataview.pagesize,this.pageable&&a&&(c=this.dataview.rows.length),f=0;f<c;f++){if(f>=this.dataview.rows.length)break;(u=this.dataview.rows[f],n=null,r.rows.records[u.visibleindex]?(n=r.rows.records[u.visibleindex],n.setdata(u)):n=new i(r,u),n.hidden=this.hiddens[n.visibleindex],this.rowdetailstemplate&&(n.rowdetails=this.rowdetailstemplate.rowdetails,n.rowdetailsheight=this.rowdetailstemplate.rowdetailsheight,n.rowdetailshidden=this.rowdetailstemplate.rowdetailshidden),e=this.details[n.visibleindex],e?(n.rowdetails=e.rowdetails,n.rowdetailsheight=e.rowdetailsheight,n.rowdetailshidden=e.rowdetailshidden):this.rowdetailstemplate||(n.rowdetails=null),a&&this.pageable&&n.parentbounddata!=null&&(t=l[n.parentbounddata.uniqueid],t!=null&&(v=this._findgroupstate(t.uniqueid),this._setsubgroupsvisibility&&this._setsubgroupsvisibility(this,n.parentbounddata,!v,!1),n.hidden=this.hiddens[n.visibleindex]),t!=null&&t!=undefined&&(n.parentrow=t,t.subrows[t.subrows.length++]=n)),n.hidden)||(o=u.visibleindex,this.heights[o]||(this.heights[o]=this.rowsheight),n.height=this.heights[o],this.rowdetails&&n.rowdetails&&!n.rowdetailshidden&&(n.height+=n.rowdetailsheight),l[n.uniqueid]=n,h[p++]=n,n.top=s,s+=n.height,y=o,r.rows.replace(y,n))}(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews&&this._pageviews.length>0&&(this._pageviews[0].height=s);this.rows.resumeupdate();h.length>0&&(this._pagescache[this.dataview.pagenum]=h)}}},_updateaddnewrowui:function(t){for(var r,f,e,h,o,c,i=this,l=i.everpresentrowposition!="bottom"?i.addnewrowtop:i.addnewrowbottom,a=i.columns.records.length,s=0,u=0;u<a;u++)r=i.columns.records[u],r.addnewrowwidget&&n(r.addnewrowwidget).detach();for(u=0;u<a;u++)r=i.columns.records[u],f=r.width,f<r.minwidth&&(f=r.minwidth),f>r.maxwidth&&(f=r.maxwidth),e=n(l[0].cells[u]),e.css("left",s),h=!0,e.width()==f&&(h=!1),t&&(h=!0),e.width(f),e[0].left=s,r.addnewrowwidget&&(e.html(""),e.append(r.addnewrowwidget)),r.hidden&&r.hideable||r.adaptivehidden?e.css("display","none"):s+=f,!h;o=i.everpresentrowactions.split(" ");i.addnewrowbutton.show();i.addnewrowupdatebutton.show();i.addnewrowresetbutton.show();i.addnewrowdeletebutton.show();o.indexOf("add")==-1&&o.indexOf("addBottom")==-1&&i.addnewrowbutton.hide();o.indexOf("update")==-1&&i.addnewrowupdatebutton.hide();o.indexOf("reset")==-1&&i.addnewrowresetbutton.hide();o.indexOf("delete")==-1&&i.addnewrowdeletebutton.hide();c=n(l.children()[0]);c.width(parseInt(s)+2);c.height(i.everpresentrowheight);c.css("max-height",i.everpresentrowheight+"px")},_removeaddnewrow:function(){for(var t,n=this,r=n.columns.records.length,i=0;i<r;i++)t=n.columns.records[i],t.addnewrowwidget&&(t.destroyeverpresentrowwidget?t.destroyeverpresentrowwidget(t.addnewrowwidget):t.addnewrowwidget.remove(),t.addnewrowwidget=null);n.addnewrowbutton&&n.addnewrowbutton.remove();n.addnewrowupdatebutton&&n.addnewrowupdatebutton.remove();n.addnewrowdeletebutton&&n.addnewrowdeletebutton.remove();n.addnewrowresetbutton&&n.addnewrowresetbutton.remove();n.addnewrowpopup&&(n.addnewrowpopup.remove(),n.addnewrowpopup=null);n.addnewrowtop&&(n.addnewrowtop.remove(),n.addnewrowtop=null);n.addnewrowbottom&&(n.addnewrowbottom.remove(),n.addnewrowbottom=null)},_updateaddnewrow:function(){var t=this,e=t.everpresentrowposition!="bottom"?t.addnewrowtop:t.addnewrowbottom,l=n('<div style="position: relative;" id="row000'+t.element.id+'"><\/div>'),k=0,f=t.columns.records.length,d=t.toThemeProperty("jqx-grid-cell"),y,h,r,s,u,g,p,nt,rt,w,b,ut;d+=" "+t.toThemeProperty("jqx-grid-cell-add-new-row");d+=" "+t.toThemeProperty("jqx-grid-cell-filter-row");var tt=f+10,it=[],ft=t.that;e[0].cells=it;l.height(t.everpresentrowheight);t.showfilterrow||t.everpresentrowposition=="bottom"?t.showfilterrow&&t.everpresentrowposition!="bottom"&&e.css("max-height",t.everpresentrowheight-3+"px"):e.css("max-height",t.everpresentrowheight-1+"px");l.css("max-height",t.everpresentrowheight+"px");e.append(l);var i=n("<div style='border-width: 1px; border-style: solid; padding: 5px; z-index: 99; display: none; position: absolute;'><div>").appendTo(n(document.body)),o=n("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+t.gridlocalization.addrowstring+"<\/button>"),a=n("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+t.gridlocalization.udpaterowstring+"<\/button>"),v=n("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+t.gridlocalization.deleterowstring+"<\/button>"),c=n("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+t.gridlocalization.resetrowstring+"<\/button>");for(i.addClass(t.toThemeProperty("jqx-popup")),i.addClass(t.toThemeProperty("jqx-rc-all")),i.addClass(t.toThemeProperty("jqx-fill-state-normal")),i.addClass(t.toThemeProperty("jqx-shadow")),i.append(o),i.append(a),i.append(v),i.append(c),y=t.everpresentrowactions.split(" "),y.indexOf("add")==-1&&y.indexOf("addBottom")==-1&&o.hide(),y.indexOf("update")==-1&&a.hide(),y.indexOf("reset")==-1&&c.hide(),y.indexOf("delete")==-1&&v.hide(),t.addnewrowpopup=i,t.addnewrowbutton=o,t.addnewrowupdatebutton=a,t.addnewrowdeletebutton=v,t.addnewrowresetbutton=c,o.jqxButton({template:"success",theme:t.theme}),v.jqxButton({template:"danger",theme:t.theme}),a.jqxButton({template:"primary",theme:t.theme}),c.jqxButton({template:"warning",theme:t.theme}),a.mousedown(function(n){for(var c,a,r,u,v,s={},h={},e=0;e<f;e++)(r=t.columns.records[e],r.geteverpresentrowwidgetvalue)&&(u=r.geteverpresentrowwidgetvalue(r.displayfield,r.addnewrowwidget),h[r.datafield]=u,r.datafield!=r.displayfield&&(h[r.datafield]=u.value,h[r.displayfield]=u.label));for(c=!1,e=0;e<f;e++)if(r=t.columns.records[e],r.geteverpresentrowwidgetvalue){if(u=r.geteverpresentrowwidgetvalue(r.displayfield,r.addnewrowwidget),r.createeverpresentrowwidget&&r.validateeverpresentrowwidgetvalue){var y=r.validateeverpresentrowwidgetvalue(r.displayfield,u,h),o=y,l=t.gridlocalization.validationstring;o.message!=undefined&&(l=o.message);a=typeof o=="boolean"?o:o.result;a?(r.addnewrowwidget.attr("title",""),r.addnewrowwidget.removeClass(t.toThemeProperty("jqx-input-invalid"))):(u="invalid editor state",r.addnewrowwidget.attr("title",l),r.addnewrowwidget.addClass(t.toThemeProperty("jqx-input-invalid")))}if(u==="invalid editor state"){n.preventDefault();n.stopPropagation();c=!0;continue}c}if(c){i.hide();t.focus();return}for(e=0;e<f;e++)(r=t.columns.records[e],r.geteverpresentrowwidgetvalue)&&(u=r.geteverpresentrowwidgetvalue(r.displayfield,r.addnewrowwidget),s[r.datafield]=u,r.datafield!=r.displayfield&&(s[r.datafield]=u.value,s[r.displayfield]=u.label),r.reseteverpresentrowwidgetvalue&&r.reseteverpresentrowwidgetvalue(r.displayfield,r.addnewrowwidget));(t.selectedcells.length>0||t.selectedrowindexes.length>0)&&(v=t.selectionmode.indexOf("cell")>=0?t.getselectedcells()[0].rowindex:t.selectedrowindexes[0],rowData=t.getrowdata(v),rowData&&t.updaterow(rowData.uid,s));i.hide();t.focus()}),v.mousedown(function(){var u,r,n;for((t.selectedcells.length>0||t.selectedrowindexes.length>0)&&(u=t.selectionmode.indexOf("cell")>=0?t.getselectedcells()[0].rowindex:t.selectedrowindexes[0],rowData=t.getrowdata(u),rowData&&t.deleterow(rowData.uid)),r=0;r<f;r++)n=t.columns.records[r],n.reseteverpresentrowwidgetvalue&&n.reseteverpresentrowwidgetvalue(n.displayfield,n.addnewrowwidget);i.hide();t.focus();t.updateeverpresentrow()}),o.mousedown(function(n){for(var h,a,r,u,v,c={},o={},e=0;e<f;e++)(r=t.columns.records[e],r.geteverpresentrowwidgetvalue)&&(u=r.geteverpresentrowwidgetvalue(r.displayfield,r.addnewrowwidget),o[r.datafield]=u,r.datafield!=r.displayfield&&(o[r.datafield]=u.value,o[r.displayfield]=u.label),r.datafield!=r.displayfield&&(o[r.datafield]=u.label,o[r.displayfield]=u.value));for(h=!1,e=0;e<f;e++)if(r=t.columns.records[e],r.geteverpresentrowwidgetvalue){if(u=r.geteverpresentrowwidgetvalue(r.displayfield,r.addnewrowwidget),r.createeverpresentrowwidget&&r.validateeverpresentrowwidgetvalue){var y=r.validateeverpresentrowwidgetvalue(r.displayfield,u,o),s=y,l=t.gridlocalization.validationstring;s.message!=undefined&&(l=s.message);a=typeof s=="boolean"?s:s.result;a?(r.addnewrowwidget.attr("title",""),r.addnewrowwidget.removeClass(t.toThemeProperty("jqx-input-invalid"))):(u="invalid editor state",r.addnewrowwidget.attr("title",l),r.addnewrowwidget.addClass(t.toThemeProperty("jqx-input-invalid")))}if(u==="invalid editor state"){n.preventDefault();n.stopPropagation();h=!0;continue}h}if(h){i.hide();t.focus();return}for(e=0;e<f;e++)(r=t.columns.records[e],r.geteverpresentrowwidgetvalue)&&(u=r.geteverpresentrowwidgetvalue(r.displayfield,r.addnewrowwidget),c[r.datafield]=u,r.datafield!=r.displayfield&&(o[r.datafield]=u.label,o[r.displayfield]=u.value),r.reseteverpresentrowwidgetvalue&&r.reseteverpresentrowwidgetvalue(r.displayfield,r.addnewrowwidget));v=t.everpresentrowactions.indexOf("addBottom")>=0?"last":"first";t.addrow(null,c,v);i.hide();t.focus()}),c.mousedown(function(){for(var n,r=0;r<f;r++)n=t.columns.records[r],n.reseteverpresentrowwidgetvalue&&n.reseteverpresentrowwidgetvalue(n.displayfield,n.addnewrowwidget),n.addnewrowwidget&&(n.addnewrowwidget.attr("title",""),n.addnewrowwidget.removeClass(t.toThemeProperty("jqx-input-invalid")));i.hide();t.focus()}),h=0;h<f;h++){if(r=t.columns.records[h],s=r.width,s<r.minwidth&&(s=r.minwidth),s>r.maxwidth&&(s=r.maxwidth),u=n('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+d+'"><\/div>'),l.append(u),u.css("left",k),t.rtl?(u.css("z-index",tt++),u.css("border-left-width","1px")):u.css("z-index",tt--),s=="auto"&&(s=0),u[0].style.width=parseFloat(s)+"px",u[0].left=k,r.hidden&&r.hideable||r.adaptivehidden?u.css("display","none"):k+=s,it[it.length]=u[0],r.checkboxcolumn){g=t.toThemeProperty("jqx-grid-cell");g+=" "+t.toThemeProperty("jqx-grid-cell-filter-row");g+=" "+t.toThemeProperty("jqx-grid-cell-pinned");u.removeClass().addClass(g);continue}if(p=!0,t.rtl?(t.groupable&&(nt=t.showrowdetailscolumn&&t.rowdetails?1:0,t.groups.length+nt+h>f-1&&(p=!1)),t.showrowdetailscolumn&&t.rowdetails&&h==f-1&&(p=!1)):(t.groupable&&(nt=t.showrowdetailscolumn&&t.rowdetails?1:0,t.groups.length+nt>h&&(p=!1)),t.showrowdetailscolumn&&t.rowdetails&&h==0&&(p=!1)),t.updateeverpresentrow=function(){var u=null,r,i,n,f;if((t.selectedcells.length>0||t.selectedrowindexes.length>0)&&(r=t.selectionmode.indexOf("cell")>=0?t.getselectedcells()[0].rowindex:t.selectedrowindexes[0],u=t.getrowdata(r)),u)for(i=0;i<t.columns.records.length;i++)n=t.columns.records[i],n.seteverpresentrowwidgetvalue&&(f=t.getcelltext(r,n.displayfield),n.seteverpresentrowwidgetvalue(n.addnewrowwidget,f))},p)if(r.createeverpresentrowwidget)rt=function(){o.trigger("mousedown")},r.addnewrowwidget=r.createeverpresentrowwidget(r.datafield,u,i,rt),r.initeverpresentrowwidget&&r.initeverpresentrowwidget(r.datafield,u,i);else{if(t._measureElement("column"),w=t.everpresentrowheight/2-t._columnheight/2,w<0&&(w=6),w+="px",r.datafield==="addButtonColumn"){b=n('<div style="padding-bottom: 2px; text-align: center; margin-top: '+w+';"><a href="#">'+t.gridlocalization.addrowstring+"<\/a><\/div>");u.append(b);b.mousedown(function(){o.trigger("mousedown")});continue}else if(r.datafield==="resetButtonColumn"){b=n('<div style="padding-bottom: 2px; text-align: center; margin-top: '+w+';"><a href="#">'+t.gridlocalization.resetrowstring+"<\/a><\/div>");u.append(b);b.mousedown(function(){c.trigger("mousedown")});continue}ut=function(r,u,e){var s=n('<input style="box-sizing: border-box; padding-right: 4px; padding-left: 4px; border:none;" autocomplete="off" type="textarea"/>'),h;s[0].id=n.jqx.utilities.createId();s.addClass(r.toThemeProperty("jqx-widget"));s.addClass(r.toThemeProperty("jqx-input"));s.addClass(r.toThemeProperty("jqx-widget-content"));s.addClass(r.toThemeProperty("jqx-enableselect"));s.addClass(r.toThemeProperty("jqx-grid-cell-add-new-row"));s.css("text-align",e.cellsalign);r.rtl&&s.css("direction","rtl");r.disabled&&s.attr("disabled",!0);s.attr("disabled",!1);s.attr("placeholder",r.gridlocalization.everpresentrowplaceholder+e.text);s.appendTo(u);s.css("width","100%");s.css("height",r.everpresentrowheight+"px");s.css("line-height",r.everpresentrowheight+"px");s.css("max-height",r.everpresentrowheight+"px");s.css("margin","0px");s.focus(function(){var f,u,n;return(t.selectedcells.length>0||t.selectedrowindexes.length>0)&&(f=t.selectionmode.indexOf("cell")>=0?t.getselectedcells()[0].rowindex:t.selectedrowindexes[0]),s.addClass(r.toThemeProperty("jqx-fill-state-focus")),u=r.columns.records.indexOf(e),r.everpresentrowactionsmode!=="columns"&&i.css({display:"block",top:s.coord().top+r.everpresentrowheight-1,left:u>0?s.coord().left:s.coord().left-1}),n=i.children().width(),e.cellsalign==="right"?(n=o.width()+c.width(),i.children().css("left",n-n+"px")):i.children().css("left","0px"),r.content[0].scrollLeft=0,r.content[0].scrollTop=0,setTimeout(function(){r.content[0].scrollLeft=0;r.content[0].scrollTop=0},50),!1});e.addnewrowwidget=s;e.reseteverpresentrowwidgetvalue||(e.reseteverpresentrowwidgetvalue=function(n,i){i.val("");i.focus();i.blur();i.removeClass(t.toThemeProperty("jqx-input-invalid"));i.attr("title","")});e.seteverpresentrowwidgetvalue||(e.seteverpresentrowwidgetvalue=function(n,t){n.val(t)});e.geteverpresentrowwidgetvalue||(h=e,e.geteverpresentrowwidgetvalue=function(i,r,u){var e=r.val(),g,l,v,o,y,k,c,w,p,d;if(u!==!1&&h.validateeverpresentrowwidgetvalue){for(g={},l={},v=0;v<f;v++)(o=t.columns.records[v],o.geteverpresentrowwidgetvalue)&&(y=o.geteverpresentrowwidgetvalue(o.displayfield,o.addnewrowwidget,!1),l[o.datafield]=y,o.datafield!=o.displayfield&&(l[o.datafield]=y.value,l[o.displayfield]=y.label));var nt=h.validateeverpresentrowwidgetvalue(h.displayfield,e,l),a=nt,b=t.gridlocalization.validationstring;if(a.message!=undefined&&(b=a.message),k=typeof a=="boolean"?a:a.result,k)s.removeClass(t.toThemeProperty("jqx-input-invalid")),s.attr("title","");else return s.addClass(t.toThemeProperty("jqx-input-invalid")),s.attr("title",b),"invalid editor state"}return(c="string",w=t.source.datafields||(t.source._source?t.source._source.datafields:null),w&&(p="",n.each(w,function(){if(this.name==h.displayfield)return this.type&&(p=this.type),!1}),p&&(c=p)),c==="number"&&(d=parseFloat(e),isNaN(d)))?null:c==="date"?n.jqx.dataFormat.tryparsedate(e,t.gridlocalization):c==="bool"||c==="boolean"?e==="true"?!0:e=="1"?!0:e==="false"?!1:e=="0"?!1:e===!0?e:e===!1?e:!1:e});s.keydown(function(n){n.keyCode===13&&(t.everpresentrowactions.indexOf("add")>=0?o.trigger("mousedown"):t.everpresentrowactions.indexOf("update")>=0?a.trigger("mousedown"):t.everpresentrowactions.indexOf("delete")>=0&&v.trigger("mousedown"))});s.blur(function(){s.removeClass(r.toThemeProperty("jqx-fill-state-focus"));i.css("display","none")});e.initeverpresentrowwidget&&e.initeverpresentrowwidget(e.datafield,u,i)};ut(this,u,r)}}n.jqx.browser.msie&&n.jqx.browser.version<8&&l.css("z-index",tt--);l.width(parseFloat(k)+2);e.addClass(d);e.css("border-bottom-width","0px");t.showfilterrow?e.css("border-top-width","0px"):e.css("border-top-width","1px");e.css("box-sizing","border-box");e.css("border-right-width","0px")},_gettableheight:function(){var n,t;return this.tableheight!=undefined?this.tableheight:(n=this.host.height(),this.columnsheader&&(t=this.columnsheader.outerHeight(),this.showheader||(t=0)),n-=t,this.hScrollBar[0].style.visibility=="visible"&&(n-=this.hScrollBar.outerHeight()),this.pageable&&(n-=this.pager.outerHeight()),this._groupsheader()&&(n-=this.groupsheader.outerHeight()),this.showtoolbar&&(n-=this.toolbarheight),this.showstatusbar&&(n-=this.statusbarheight),this.showeverpresentrow&&this.everpresentrowposition==="bottom"&&(n-=this.everpresentrowheight),n>0)?(this.tableheight=n,n):this.host.height()},_getpagesize:function(){if(this.pageable)return this.pagesize;if(this.virtualmode){var n=Math.round(this.host.height())+2*this.rowsheight;return Math.round(n/this.rowsheight)}return this.autoheight||this.autorowheight?this.dataview.totalrows==0?1:this.dataview.totalrows:this.dataview.totalrows<100&&this.dataview.totalrecords<100&&this.dataview.totalrows>0?this.dataview.totalrows:100},_calculatevirtualheight:function(){var a=this.that,l=Math.round(this.host.height())+2*this.rowsheight,o,n,s,e,t;realheight=this._gettableheight();o=Math.round(l/this.rowsheight);this.heights=[];this.hiddens=[];this.details=[];this.expandedgroups=[];this.hiddenboundrows=[];this.heightboundrows=[];this.detailboundrows=[];n=Math.max(this.dataview.totalrows,this.dataview.totalrecords);this.pageable&&(n=this.pagesize,this.pagesize>Math.max(this.dataview.totalrows,this.dataview.totalrecords)&&this.autoheight?n=Math.max(this.dataview.totalrows,this.dataview.totalrecords):this.autoheight||this.dataview.totalrows<this.pagesize&&(n=Math.max(this.dataview.totalrows,this.dataview.totalrecords)));var r=n*this.rowsheight,h=0,c=0,u=0,i=this._getpagesize(),f=i*this.rowsheight,t=0;if(!this.pageable&&this.autoheight&&(o=n),n+i>0)while(t<=n+i){if(h+=f,t-i<n&&t>=n){s=t-n;s>0&&(u-=f,this._pageviews[c-1]={top:u,height:f-s*this.rowsheight});break}else this._pageviews[c++]={top:u,height:f};u=h;t+=i}if(this.resizingGrid!=!0&&this.vScrollBar.jqxScrollBar({value:0}),this.hScrollBar.css("visibility")=="hidden"&&(e=0,this.columns&&this.columns.records)){for(t=0;t<this.columns.records.length;t++)e+=isNaN(this.columns.records[t].width)?this.columns.records[t].minwidth:this.columns.records[t].width;!isNaN(e)&&parseInt(e)>this.host.width()&&(realheight-=30)}return r>realheight&&!this.autoheight?(this.vScrollBar.css("visibility","visible"),this.scrollmode=="deferred"?this.vScrollBar.jqxScrollBar({max:r}):this.vScrollBar.jqxScrollBar({max:r-realheight})):this.vScrollBar.css("visibility","hidden"),this.dataview.pagesize=i,this.dataview.updateview(),{visiblerecords:o,virtualheight:r}},_updatepageviews:function(){var i,t,r,u,s,v;if(!this.updating()){this._pagescache=[];this._pageviews=[];this.tableheight=null;var h=this.that,y=Math.round(this.host.height())+2*this.rowsheight,c=Math.round(y/this.rowsheight),f=Math.max(this.dataview.totalrows,this.dataview.totalrecords),n=f*this.rowsheight,l=0,e=0,p=0,a=0,o=0,w=this._getpagesize();if(this.pageable)this._updatepagedview&&(n=this._updatepagedview(f,n,0)),this.autoheight&&this._arrange();else for(i=0;i<f;i++)t={index:i,height:this.heights[i],hidden:this.hiddens[i],details:this.details[i]},this.heights[i]==undefined&&(this.heights[i]=this.rowsheight,t.height=this.rowsheight),this.hiddens[i]==undefined&&(this.hiddens[i]=!1,t.hidden=!1),this.details[i]==undefined&&(this.details[i]=null),t.height!=h.rowsheight&&(n-=h.rowsheight,n+=t.height),t.hidden?n-=t.height:(e+=t.height,r=0,this.rowdetails&&(this.rowdetailstemplate&&(t.details||(t.details=this.rowdetailstemplate)),t.details&&t.details.rowdetails&&!t.details.rowdetailshidden&&(r=t.details.rowdetailsheight,e+=r,n+=r)),l+=t.height+r),o++,(o>=w||i==f-1)&&(this._pageviews[p++]={top:a,height:e},e=0,a=l,o=0);u=this._gettableheight();n>u?(this.pageable&&this.gotopage&&(n=this._pageviews[0].height,n<0&&(n=this._pageviews[0].height)),this.vScrollBar.css("visibility")!="visible"&&this.vScrollBar.css("visibility","visible"),(n<=u||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),n-u>0?this.scrollmode!="deferred"?(s=n-u,v=this.vScrollInstance.max,this.vScrollBar.jqxScrollBar({max:s}),s!=v&&this.vScrollBar.jqxScrollBar({value:0})):this.vScrollBar.jqxScrollBar({value:0,max:n}):this.vScrollBar.jqxScrollBar({value:0,max:n})):(this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0}));this._arrange();this.autoheight&&(c=Math.round(this.host.height()/this.rowsheight));this.virtualsizeinfo={visiblerecords:c,virtualheight:n}}},updatebounddata:function(n){n=="data"||n=="sort"||n=="filter"||n=="cells"||n=="pagechanged"||n=="pagesizechanged"||this.virtualmode||(this.virtualsizeinfo=null,this.showfilterrow&&this.filterable&&this.filterrow?(this.clearfilters&&this.clearfilters(!1),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.filterrow.remove(),this._filterrowcache=[],this.filterrow=null):this.filterable&&this.clearfilters&&this.clearfilters(!1),this.showeverpresentrow&&this._removeaddnewrow(),this.detailsVisibility=[],this.groupsVisibility=[],this.groupable&&(this.dataview.groups=[],this.groups=[]),this.pageable&&(this.pagenum=0,this.dataview.pagenum=0),this.sortable&&(this.sortcolumn=null,this.sortdirection="",this.dataview.sortfielddirection="",this.dataview.clearsortdata()));this.databind(this.source,n)},refreshdata:function(){this._refreshdataview();this.render()},_updatevscrollbarmax:function(){var n,t,i;this._pageviews&&this._pageviews.length>0&&(n=this._pageviews[0].height,(this.virtualmode||!this.pageable)&&(n=this.virtualsizeinfo.virtualheight),t=this._gettableheight(),n>t?(this.pageable&&this.gotopage&&(n=this._pageviews[0].height,n<0&&(n=this._pageviews[0].height)),this.vScrollBar.css("visibility")!="visible"&&this.vScrollBar.css("visibility","visible"),(n<=t||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),n-t>0?(i=n-t,this.vScrollBar.jqxScrollBar({max:i})):this.vScrollBar.jqxScrollBar({value:0,max:n})):(this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})))},_refreshdataview:function(){this.dataview.refresh()},refresh:function(t){if(t!=!0){if(n.jqx.isHidden(this.host))return;this.virtualsizeinfo!=null&&(this._cellscache=[],this._renderrows(this.virtualsizeinfo),this._updatesize())}},render:function(){this._render(!0,!0,!0,!0)},invalidate:function(){this.virtualsizeinfo&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},clear:function(){this.databind(null);this.render()},_preparecolumngroups:function(){var v=this.columnsheight,h,c,i,s,r,y,l,n,t,f,u,a,e,o;if(this.columngroups){if(this.columnshierarchy=[],this.columngroups.length){for(h=this,n=0;n<this.columngroups.length;n++)this.columngroups[n].parent=null,this.columngroups[n].groups=null;for(n=0;n<this.columns.records.length;n++)this.columns.records[n].parent=null,this.columns.records[n].groups=null;for(c=function(n){for(var i,t=0;t<h.columngroups.length;t++)if(i=h.columngroups[t],i.name===n)return i;return null},n=0;n<this.columngroups.length;n++)t=this.columngroups[n],t.groups||(t.groups=null),t.parentgroup&&(i=c(t.parentgroup),i&&(t.parent=i,i.groups||(i.groups=[]),i.groups.indexOf(t)===-1&&i.groups.push(t)));for(n=0;n<this.columns.records.length;n++)t=this.columns.records[n],t.columngroup&&(i=c(t.columngroup),i&&(i.groups||(i.groups=[]),t.parent=i,i.groups.indexOf(t)===-1&&i.groups.push(t)));for(s=0,n=0;n<this.columns.records.length;n++){for(t=this.columns.records[n],r=t,t.level=0;r.parent;)r=r.parent,t.level++;for(r=t,y=t.level,s=Math.max(s,t.level);r.parent;)r=r.parent,r&&(r.level=--y)}for(l=function(n){var i=[],t,u,r;if(n.columngroup&&i.push(n),n.groups)for(t=0;t<n.groups.length;t++)if(n.groups[t].columngroup)i.push(n.groups[t]);else if(n.groups[t].groups)for(u=l(n.groups[t]),r=0;r<u.length;r++)i.push(u[r]);return i},n=0;n<this.columngroups.length;n++){for(t=this.columngroups[n],f=l(t),t.columns=f,u=[],a=0,e=0;e<f.length;e++)u.push(this.columns.records.indexOf(f[e])),f[e].pinned&&a++;if(a!=0)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group cannot be pinned.");for(u.sort(function(n,t){return(n=parseInt(n),t=parseInt(t),n<t)?-1:n>t?1:0}),o=1;o<u.length;o++)if(u[o]!=u[o-1]+1)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group are expected to be siblings in the columns array.");}}this.columngroupslevel=1+s;v=this.columngroupslevel*this.columnsheight}return v},_render:function(t,i,r,u,f){var o,e,s,h;if(this.dataview!=null&&!this._loading&&!this._batchupdate){if(n.jqx.isHidden(this.host)){o=this;o.___hiddenTimer&&(clearInterval(o.___hiddenTimer),o.___hiddenTimer=null);this.___hiddenTimer=setInterval(function(){n.jqx.isHidden(o.host)||(clearInterval(o.___hiddenTimer),o.render())},300);return}this.editcell!=null&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!1);this.validationpopup=null;this._removeHandlers();this._addHandlers();this._initializeRows();this._requiresupdate=i!=undefined?i:!0;this._newmax=null;r&&(this._requiresupdate||u!=!1&&this._initmenu(),this.columns==null?this.columns=new n.jqx.collection(this.element):(e=this,this.columns&&this.columns.name==="observableArray"&&(this.columns.notifier=function(n){var i=function(){e.columns=e._columns;e.render()},t,r;switch(n.type){case"add":i();break;case"update":if(n.name==="index"){e.beginupdate();for(t in n.newValue)e.setcolumnproperty(n.newValue.datafield,t,n.newValue[t]);e.endupdate()}else r=n.path.split("."),e.setcolumnproperty(e.columns[r[0]].datafield,n.name,n.newValue);break;case"delete":i()}}),this.columngroups&&this.columngroups.name==="observableArray"&&(this.columngroups.notifier=function(){e.render()}),this._initializeColumns()));this.tableheight=null;this._pagescache=[];this._pageviews=[];this.visiblerows=[];this.hittestinfo=[];this._requiresupdate&&(this._clearcaches(),u==!0&&this._initmenu());this.virtualsizeinfo=null;this.prerenderrequired=!0;(this.groupable&&this.groups.length>0&&this.rowdetails||this.rowdetails)&&this.gridcontent&&(this._rowdetailscache=[],this._rowdetailselementscache=[],this.detailboundrows=[],this.details=[],n.jqx.utilities.html(this.gridcontent,""),this.gridcontent=null);this.gridcontent&&this.editable&&this._destroyeditors&&this._destroyeditors();r?(this.filterrow&&this.filterrow.detach(),n.jqx.utilities.html(this.content,""),this.columnsheader=this.columnsheader||n('<div style="overflow: hidden;"><\/div>'),this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("jqx-widget-header")),this.columnsheader.addClass(this.toTP("jqx-grid-header"))):this.gridcontent&&n.jqx.utilities.html(this.gridcontent,"");this.showheader?this.columnsheader&&this.columnsheader.css("display","block"):this.columnsheader.css("display","none");this.gridcontent=this.gridcontent||n('<div style="width: 100%; overflow: hidden; position: absolute;"><\/div>');this.gridcontent.remove();s=this.columnsheight;s=this._preparecolumngroups();this.showfilterrow&&this.filterable?(this.columnsheader.height(s+this.filterrowheight),this.showeverpresentrow&&this.everpresentrowposition!=="bottom"&&this.columnsheader.height(s+this.filterrowheight+this.everpresentrowheight)):this.showeverpresentrow&&this.everpresentrowposition!=="bottom"?this.columnsheader.height(s+this.everpresentrowheight):this.columnsheader.height(s);this.content.append(this.columnsheader);this.content.append(this.gridcontent);this._arrange();this._initgroupsheader&&this._initgroupsheader();this.selectionarea=this.selectionarea||n("<div style='z-index: 99; visibility: hidden; position: absolute;'><\/div>");this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea"));this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed"));this.content.append(this.selectionarea);this.tableheight=null;this.rendergridcontent(!1,r);this.groups.length>0&&this.groupable&&(h=this.vScrollBar[0].style.visibility,this.suspendgroupevents=!0,this.collapseallgroups&&(this.groupsexpandedbydefault?this.expandallgroups(!1):(this.collapseallgroups(!1),this._updatescrollbarsafterrowsprerender())),this.vScrollBar[0].style.visibility!=h&&(this._updatecolumnwidths(),this._updatecellwidths()),this.suspendgroupevents=!1);this.pageable&&this.updatepagerdetails&&(this.updatepagerdetails(),this.autoheight&&this._updatepageviews(),this.autorowheight&&(this.autoheight||this._updatepageviews(),this._renderrows(this.virtualsizeinfo)));this.showaggregates&&this._updateaggregates&&this._updateaggregates();this._addoverlayelement();this.scrollmode=="deferred"&&this._addscrollelement();this.showfilterrow&&this.filterable&&this.filterrow&&(f==undefined||f==!0)&&this._updatelistfilters(!r);this.rendered&&this.rendered("full");this.__isRendered=!0}},_addoverlayelement:function(){var i=n.jqx.utilities.getBrowser(),t,r;(i.browser=="msie"&&parseInt(i.version)<9||this.isTouchDevice())&&(this._overlayElement&&this._overlayElement.remove(),this._overlayElement=n("<div class='jqxgrid-overlay' style='visibility: hidden; position: absolute; width: 100%; height: 100%;'><\/div>"),this._overlayElement.css("background","white"),this._overlayElement.css("z-index",180),this._overlayElement.css("opacity",.001),this.isTouchDevice()?this.vScrollBar.css("visibility")!=="hidden"||this.hScrollBar.css("visibility")!=="hidden"?(t=0,this.selectionmode=="checkbox"&&(t+=30),(this.groupable||this.rowdetails)&&this._overlayElement.css("left",30*(this.groups.length+(this.rowdetails?1:0))),r=this._overlayElement.css("left"),this._overlayElement.css("left",r+t)):this._overlayElement&&this._overlayElement.remove():this.content.prepend(this._overlayElement));this._updateTouchScrolling()},_addscrollelement:function(){this._scrollelement&&this._scrollelement.remove();this._scrollelementoverlay&&this._scrollelementoverlay.remove();this._scrollelementoverlay=n("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'><\/div>");this._scrollelementoverlay.css("background","black");this._scrollelementoverlay.css("z-index",1800);this._scrollelementoverlay.css("opacity",.1);this._scrollelement=n("<span style='visibility: hidden; top: 50%; right: 10px; position: absolute;'><\/span>");this._scrollelement.css("z-index",1900);this._scrollelement.addClass(this.toThemeProperty("jqx-button"));this._scrollelement.addClass(this.toThemeProperty("jqx-fill-state-normal"));this._scrollelement.addClass(this.toThemeProperty("jqx-rc-all"));this._scrollelement.addClass(this.toThemeProperty("jqx-shadow"));this.content.prepend(this._scrollelement);this.content.prepend(this._scrollelementoverlay)},_postrender:function(n){var t,i,r,u,f;if((n=="filter"||n=="sort"||n=="group")&&this.rowdetails&&this.detailsVisibility&&this.detailsVisibility.length>0){for(this._detailsUpdate=!0,t=0;t<this.details.length;t++)this.details[t]&&(this.details[t].rowdetailshidden=!0);for(t=0;t<this.detailsVisibility.length;t++)!1===this.detailsVisibility[t]?this.showrowdetails(t):!0===this.detailsVisibility[t]&&this.hiderowdetails(t);this._detailsUpdate=!1;this.rendergridcontent(!0);this._updatecolumnwidths();this._updatecellwidths();this._renderrows(this.virtualsizeinfo)}if(this.groupable&&this.groups.length>0)if(n=="filter"||n=="sort")for(t=0;t<this.dataview.loadedgroups.length;t++){i=this.dataview.loadedgroups[t];r=0;for(u in this.groupsVisibility)u==i.group&&this.groupsVisibility[u]&&(suspendgroupevents=!0,this._setgroupstate(i,!0,!1),r++);r>0&&(suspendgroupevents=!1,f=this.vScrollBar[0].style.visibility,this.rendergridcontent(!0,!1),(f!=this.vScrollBar[0].style.visibility||this._hiddencolumns)&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)))}else n=="group"&&(this.groupsVisibility=[])},rendergridcontent:function(t,i){var f,r,i,e,u,o;return this.updating()?!1:((t==undefined||t==null)&&(t=!1),this._requiresupdate=t,f=this.prerenderrequired,this.prerenderrequired&&this._arrange(),r=this.that,i=i,(i==null||i==undefined)&&(i=!0),this.tableheight=null,r.virtualsizeinfo=r.virtualsizeinfo||r._calculatevirtualheight(),r.pageable&&!r.autoheight&&r.dataview.totalrows<r.pagesize&&(r._requiresupdate=!0),i?r._rendercolumnheaders():(this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn()),r._renderrows(r.virtualsizeinfo),this.gridcontent&&(this.gridcontent[0].scrollTop!=0&&(this.gridcontent[0].scrollTop=0),this.gridcontent[0].scrollLeft!=0&&(this.gridcontent[0].scrollLeft=0)),f&&(e=this.tableheight,this._arrange(),e!=this.tableheight&&this.autoheight&&r._renderrows(r.virtualsizeinfo)),this.rtl&&this._renderhorizontalscroll(),this.autosavestate&&this.initializedcall!=null&&this.savestate&&this.savestate(),this.adaptive&&this.element.offsetWidth<=this.adaptivewidth&&(u=0,o=r.element.offsetWidth-2,n.each(this.columns.records,function(){if(u+=this.width,this.columntype==="adaptive")return!0;u>=o&&(this.adaptivehidden=!0)}),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)),!0)},_updatecolumnwidths:function(){var t=this.host.width(),i=t,y="",h,c,p,l,a,o,s,v;if(this.columns!=undefined&&this.columns.records!=undefined){var e=this.that,s=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth,w=this.adaptive&&this.element.offsetWidth<=this.adaptivewidth,u=0;if(w&&(h=1,n.each(this.columns.records,function(){this.adaptivehidden&&h++}),c=this.vScrollBar[0].offsetWidth>0?this.vScrollBar[0].offsetWidth+4:0,this.vScrollBar.css("visibility")=="hidden"&&(c=0),p=this.columns.records.length-h,u=(this.element.offsetWidth-32-c)/p),n.each(this.columns.records,function(n,r){var r,u,f;this.hidden&&this.hideable||this.adaptivehidden||(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined?(r=0,u=e.vScrollBar[0].style.visibility=="hidden"?0:e.scrollbarsize+5,(e.scrollbarautoshow||e.scrollbarsize==0)&&(u=0),f=i,r=parseFloat(this.width)*f/100,u+=s,this._percentagewidth!=undefined&&(r=parseFloat(this._percentagewidth)*(f-u)/100),r<this.minwidth&&this.minwidth!="auto"&&(r=this.minwidth),r>this.maxwidth&&this.maxwidth!="auto"&&(r=this.maxwidth),t-=r):this.width=="auto"||this._width?y+=this.text:t-=this.width)}),l=this._gettableheight(),!this.autoheight&&this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>l)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){if(a=this.dataview.loadedrootgroups.length*this.rowsheight,this.pageable)for(o=0;o<this.dataview.rows.length;o++)this.dataview.rows[o].group&&this.dataview.rows[o].level===0&&(a+=this.rowsheight);a>l?(t-=this.scrollbarsize+5,i-=this.scrollbarsize+5):this.vScrollBar.css("visibility")=="visible"&&(t-=this.scrollbarsize+5,i-=this.scrollbarsize+5)}else t-=this.scrollbarsize+5,i-=this.scrollbarsize+5;else this.vScrollBar.css("visibility")!="hidden"&&this.scrollbarsize>0&&(t-=this.scrollbarsize+5,i-=this.scrollbarsize+5);if((s=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth,i-=s,this.columnsheader)&&(v=this.columnsheader.find("#columntable"+this.element.id),v.length!=0)){var f=0,b=this,r=0;n.each(this.columns.records,function(o){var c=n(this.element),l,h,s;this.hidden||this.adaptivehidden||this.element.style.display!=="none"||(this.element.style.display="block");this.adaptivehidden&&(this.element.style.display="none");l=!1;h=this.width;(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined)&&(h=this._percentagewidth!=undefined?parseFloat(this._percentagewidth)*i/100:parseFloat(this.width)*i/100,l=!0);u>0&&this.columntype!=="adaptive"?(c.width(u),this.adaptivewidth=u):this.width=="auto"||this._width||l?l?(h<this.minwidth&&this.minwidth!="auto"&&(h=this.minwidth,this.width=h),h>this.maxwidth&&this.maxwidth!="auto"&&(h=this.maxwidth,this.width=h),parseInt(c[0].style.width)!=h&&(c.width(h),this.width=h)):(s=Math.floor(t*(this.text.length/y.length)),r+=s,t-r<3&&t!=r&&t-r>.01?t-r==1?s++:s+=2:o==e.columns.records.length-1&&r<t&&(s+=t-r),isNaN(s)&&(s=this.minwidth),isNaN(s)&&(s=this.minwidth),s==Infinity&&(s=0),s<0&&($element=n("<span>"+this.text+"<\/span>"),n(document.body).append($element),s=10+$element.width(),$element.remove()),s<this.minwidth&&(s=this.minwidth),s>this.maxwidth&&(s=this.maxwidth),this._width="auto",this.width=s,c.width(this.width)):parseInt(c[0].style.width)!=this.width&&c.width(this.width);parseInt(c[0].style.left)!=f&&c.css("left",f);this.hidden&&this.hideable||this.adaptivehidden||(f+=u>0&&this.columntype!=="adaptive"?u:this.width);this._requirewidthupdate=!0});this.columnsheader.width(2+f);v.width(this.columnsheader.width());this.columnsheader[0].style.visibility=f==0?"hidden":"inherit";this._resizecolumngroups();this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui());this.showeverpresentrow&&(this.everpresentrowposition!=="bottom"?this.addnewrowtop.width(this.columnsheader.width()):this.addnewrowbottom.width(this.columnsheader.width()),this._updateaddnewrowui());this.autowidth&&this._arrange()}}},_rendercolumnheaders:function(){var t=this.that,u,it,o,e,y,s,i,g,w,p,b,k,d;if(!this.prerenderrequired){this._rendersortcolumn&&this._rendersortcolumn();this._renderfiltercolumn&&this._renderfiltercolumn();this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui());this.showeverpresentrow&&(this.everpresentrowposition!=="bottom"?this.addnewrowtop.width(this.columnsheader.width()):this.addnewrowbottom.width(this.columnsheader.width()),this._updateaddnewrowui());return}this._columnsbydatafield=[];this.columnsheader.find("#columntable"+this.element.id).remove();u=n('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"><\/div>');u[0].cells=[];var v=0,f=0,nt="",r=this.host.width(),c=r,h=[],a=[],tt=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(n.each(this.columns.records,function(n,i){if(!(this.hidden&&this.hideable)&&!this.adaptivehidden)if(this.width=="auto"||this._width)nt+=this.text;else if(this.width<this.minwidth&&this.minwidth!="auto")r-=this.minwidth;else if(this.width>this.maxwidth&&this.maxwidth!="auto")r-=this.maxwidth;else if(this.width.toString().indexOf("%")!=-1){var i=0,u=t.vScrollBar[0].style.visibility=="hidden"?0:t.scrollbarsize+5;u+=tt;i=parseFloat(this.width)*(c-u)/100;i<this.minwidth&&this.minwidth!="auto"&&(i=this.minwidth);i>this.maxwidth&&this.maxwidth!="auto"&&(i=this.maxwidth);r-=i}else typeof this.width=="string"&&(this.width=parseInt(this.width)),r-=this.width;this.pinned||this.grouped||this.checkboxcolumn?(t._haspinned&&(this.pinned=!0),h[h.length]=this):a[a.length]=this}),this.rtl){for(it=0,h.reverse(),o=this.columns.records.length-1;o>=this.columns.records.length-h.length;o--)this.columns.replace(o,h[it++]);for(e=0;e<a.length;e++)this.columns.replace(e,a[e])}else{for(o=0;o<h.length;o++)this.columns.replace(o,h[o]);for(e=0;e<a.length;e++)this.columns.replace(h.length+e,a[e])}if(y=this.headerZIndex,s=t.groupable?t.groups.length:0,this.rowdetails&&this.showrowdetailscolumn&&s++,i=t.columnsheader.height(),this.showfilterrow&&(this.columngroups?i-=this.filterrowheight:i=this.columnsheight),this.showeverpresentrow&&this.everpresentrowposition!=="bottom"&&(this.columngroups?i-=this.everpresentrowheight:i=this.columnsheight),g=this._gettableheight(),this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>g&&!this.scrollbarautoshow)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){if(w=0,this.pageable){if(this.pageable)for(p=0;p<this.dataview.rows.length;p++)this.dataview.rows[p].group&&this.dataview.rows[p].level===0&&(w+=this.rowsheight)}else w=this.dataview.loadedrootgroups.length*this.rowsheight;w>g&&(r-=this.scrollbarsize+5,c-=this.scrollbarsize+5)}else r-=this.scrollbarsize+5,c-=this.scrollbarsize+5;else!this.autoheight&&this.scrollbarsize>0&&(r-=this.scrollbarsize+5,c-=this.scrollbarsize+5);c-=tt;var ut=function(n,i){var r=t.columngroupslevel*t.columnsheight;return r-i.level*t.columnsheight},rt=document.createDocumentFragment(),l=0;n.each(this.columns.records,function(e){var ft,a,it,p,k,et,d,w,b,tt,h,st,ht,vt,g,yt;this.height=t.columnsheight;t.columngroups&&t.columngroups.length&&(this.height=ut(this.datafield,this),i=this.height);ft=t.toTP("jqx-grid-column-header")+" "+t.toTP("jqx-widget-header");t.rtl&&(ft+=" "+t.toTP("jqx-grid-column-header-rtl"));var pt=t.rtl?150+y+1:150+y-1,wt=t.rtl?y++:y--,o=n('<div role="columnheader" style="z-index: '+wt+';position: absolute; height: 100%;" class="'+ft+'"><div style="height: 100%; width: 100%;"><\/div><\/div>');t.columngroups&&(o[0].style.height=i+"px",o[0].style.bottom="0px",this.pinned&&(o[0].style.zIndex=pt));this.uielement=o;this.classname!=""&&this.classname&&o.addClass(this.classname);a=this.width;it=!1;this.width===null&&(this.width="auto");(this.width.toString().indexOf("%")!=-1||this._percentagewidth!=undefined)&&(a=this._percentagewidth!=undefined?parseFloat(this._percentagewidth)*c/100:parseFloat(this.width)*c/100,it=!0);this.width=="auto"||this._width||it?it?(a<this.minwidth&&this.minwidth!="auto"&&(a=this.minwidth),a>this.maxwidth&&this.maxwidth!="auto"&&(a=this.maxwidth),(this._percentagewidth==undefined||this.width.toString().indexOf("%")!=-1)&&(this._percentagewidth=this.width),o.width(a),this.width=a):this.hidden||this.adaptivehidden||(p=Math.floor(r*(this.text.length/nt.length)),l+=p,r-l<3&&r!=l&&r-l>.01?r-l==1?p++:p+=2:e==t.columns.records.length-1&&l<r&&(p+=r-l),isNaN(p)&&(p=this.minwidth),p<0&&($element=n("<span>"+this.text+"<\/span>"),n(document.body).append($element),p=10+$element.width(),$element.remove()),p<this.minwidth&&(p=this.minwidth),p>this.maxwidth&&(p=this.maxwidth),this._width="auto",this.width=p,a=this.width,o.width(this.width)):(a<this.minwidth&&this.minwidth!="auto"&&(a=this.minwidth,this.width=a),a>this.maxwidth&&this.maxwidth!="auto"&&(a=this.maxwidth,this.width=a),o[0].style.width=parseInt(a)+"px");(this.hidden&&this.hideable||this.adaptivehidden)&&o.css("display","none");k=n(o.children()[0]);et=t.rtl?t.toTP("jqx-grid-column-menubutton")+" "+t.toTP("jqx-grid-column-menubutton-rtl"):t.toTP("jqx-grid-column-menubutton");et+=" "+t.toTP("jqx-icon-arrow-down");d=n('<div style="height: '+i+'px; display: none; left: 100%; top: 0%; position: absolute;"><div class="'+et+'" style="width: 100%; height:100%;"><\/div><\/div>');t.enableanimations||d.css("margin-left",-16);t.rtl&&d.css("left","0px");this.columnsmenu=d[0];u[0].cells[e]=o[0];d[0].style.width=parseInt(t.columnsmenuwidth)+"px";var ot=t.columnsmenu,ct=!1,lt=!1,at=t.groupable&&s>0&&v<s||t.rowdetails&&v<s;if(t.rtl&&(at=(t.groupable&&s>0&&v<s||t.rowdetails&&v<s)&e>t.columns.records.length-1-s),at?(v++,ot&=!1,this.sortable=!1,this.editable=!1,lt=!0):(w=this.renderer!=null?this.renderer(this.text,this.align,i):t._rendercolumnheader(this.text,this.align,i,t),w==null&&(w=t._rendercolumnheader(this.text,this.align,i,t)),this.renderer!=null&&(w=n(w)),ot&=!0,ct=!0),t.WinJS?MSApp.execUnsafeLocalFunction(function(){k.append(n(w))}):this.renderer?k.append(n(w)):w&&(k[0].innerHTML=w),w!=null&&(b=n('<div class="iconscontainer" style="height: '+i+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+t.toTP("jqx-widget-header")+'" style="height: '+i+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"><\/div><\/div><div class="sortasc '+t.toTP("jqx-widget-header")+'" style="height: '+i+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortascbutton")+" "+t.toTP("jqx-icon-arrow-up")+'" style="width: 100%; height:100%;"><\/div><\/div><div class="sortdesc '+t.toTP("jqx-widget-header")+'" style="height: '+i+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortdescbutton")+" "+t.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"><\/div><\/div><div class="sorticon '+t.toTP("jqx-widget-header")+'" style="height: '+i+'px; float: right; visibility: hidden; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sorticon")+" "+t.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"><\/div><\/div><\/div>'),d.addClass(t.toTP("jqx-widget-header")),k.append(b),tt=b.children(),this.sorticon=tt[3],this.sortasc=tt[1],this.sortdesc=tt[2],this.filtericon=tt[0],this.iconscontainer=b,t.rtl&&(b.css("margin-left","0px"),b.css("left","0px"),n(this.sorticon).css("float","left"),n(this.sortasc).css("float","left"),n(this.filtericon).css("float","left"),n(this.sortdesc).css("float","left")),!t.autoshowfiltericon&&this.filterable&&n(this.filtericon).css("display","block")),this.element=o[0],ot&&(t._handlecolumnsmenu(t,k,o,d,this),this.menu||d.hide()),rt.appendChild(o[0]),t.groupable&&ct)if(o[0].id=t.dataview.generatekey(),t._handlecolumnstogroupsdragdrop)t._handlecolumnstogroupsdragdrop(this,o);else throw new Error("jqxGrid: Missing reference to jqxgrid.grouping.js.");if(t.columnsreorder&&this.draggable&&t._handlecolumnsdragreorder&&t._handlecolumnsdragreorder(this,o),h=this,t.addHandler(o,"click",function(n){if(h.checkboxcolumn)return!0;if(t.sorttogglestates>0&&t._togglesort&&!t._loading){if(t.suspendClick)return!0;t._togglesort(h)}n.preventDefault();t._raiseEvent(7,{column:h.getcolumnproperties(),datafield:h.datafield,originalEvent:n})}),h.resizable&&t.columnsresize&&!lt&&(st=!1,ht="mousemove",t.isTouchDevice()&&t.touchmode!==!0&&(st=!0,ht=n.jqx.mobile.getTouchEventName("touchstart")),t.addHandler(o,ht,function(i){var r=parseInt(i.pageX),u=5,f=parseInt(o.coord().left),s,c,e;if(t.hasTransform&&(f=n.jqx.utilities.getOffset(o).left),t.resizing)return!0;if(t._handlecolumnsresize){if(st)return s=t.getTouches(i),c=s[0],r=c.pageX,u=40,r>=f+h.width-u?(t.resizablecolumn={columnelement:o,column:h},o.css("cursor","col-resize")):(o.css("cursor",""),t.resizablecolumn=null),!0;if(e=h.width,t.rtl&&(e=0),r>=f+e-u){if(r<=f+e+u)return t.resizablecolumn={columnelement:o,column:h},o.css("cursor","col-resize"),!1;o.css("cursor","");t.resizablecolumn=null}else o.css("cursor",""),r<f+e-u&&(h._animating||h._menuvisible||o.mouseenter()),t.resizablecolumn=null}})),o.css("left",f),this.hidden&&this.hideable||this.adaptivehidden||(f+=a),h.rendered&&(vt=h.rendered(n(k[0].firstChild),h.align,i),vt&&b!=null&&b.hide()),h.checkboxcolumn){if(b&&b.hide(),!t.host.jqxCheckBox)throw new Error("jqxGrid: Missing reference to jqxcheckbox.js");k.html('<div style="cursor: pointer; margin-left: 3px; top: 50%; margin-top: -9px; position: relative;"><\/div>');g=k.find("div:first");g.jqxCheckBox({_canFocus:!1,disabled:t.disabled,disabledContainer:!0,theme:t.theme,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0});g.addClass(t.toThemeProperty("jqx-checkbox"));h.checkboxelement=g;yt=g.data().jqxCheckBox.instance;t._checkboxcolumn=h;yt.updated=function(n,i,r){t._checkboxcolumnupdating=!0;t.disabled&&(g.jqxCheckBox({disabled:t.disabled}),i=r);i?t.selectallrows():t.unselectallrows();t._checkboxcolumnupdating=!1}}});f>0?this.columnsheader.width(2+f):this.columnsheader.width(f);u[0].appendChild(rt);this.columnsrow=u;t.columnsheader.append(u);this.showfilterrow&&this._updatefilterrow&&(this.columngroups?u.height(this.columngroupslevel*this.columnsheight):u.height(this.columnsheight),this.filterrow||(b=n("<div style='position: relative !important; '><\/div>"),b[0].id="filterrow."+this.element.id,b.height(this.filterrowheight),this.filterrow=b),this.filterrow.width(2+f),this.columnsheader.append(this.filterrow),this._updatefilterrow());this.showeverpresentrow&&this.everpresentrowposition!=="bottom"?(this.columngroups?u.height(this.columngroupslevel*this.columnsheight):u.height(this.columnsheight),this.addnewrowtop||(k=n("<div style='position: relative !important; z-index:"+this.headerZIndex+";'><\/div>"),k[0].id="addnewrowtop."+this.element.id,k.height(this.everpresentrowheight),this.addnewrowtop=k),this.addnewrowtop.width(2+f),this.everpresentrowposition=="topAboveFilterRow"?this.filterrow?this.addnewrowtop.insertBefore(this.filterrow):this.columnsheader.append(this.addnewrowtop):this.columnsheader.append(this.addnewrowtop),this._updateaddnewrow()):this.showeverpresentrow&&this.everpresentrowposition==="bottom"&&(this.addnewrowbottom||(d=n("<div style='position: relative !important; z-index:"+this.headerZIndex+";'><\/div>"),d[0].id="addnewrowbottom."+this.element.id,d.height(this.everpresentrowheight),this.addnewrowbottom=d),this.addnewrowbottom.width(2+f),this.addnewrow.append(this.addnewrowbottom),this._updateaddnewrow());u[0].style.visibility=f==0?"hidden":"inherit";u.width(f);this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop();this._handlecolumnsreorder&&this._handlecolumnsreorder();this._rendersortcolumn&&this._rendersortcolumn();this._renderfiltercolumn&&this._renderfiltercolumn();this._handlecolumnsresize&&this._handlecolumnsresize();this.columngroups&&this._rendercolumngroups();this._updatecheckboxselection&&this._updatecheckboxselection()},_rendercolumngroups:function(){var s,h,e,r,t,c,y,u,l,o,p;if(this.columngroups){for(s=0,r=0;r<this.columns.records.length;r++)this.columns.records[r].pinned&&s++;var w=this.headerZIndex-s+this.columns.records.length,f=this.that,v=f.toTP("jqx-grid-column-header")+" "+f.toTP("jqx-grid-columngroup-header")+" "+f.toTP("jqx-widget-header");for(f.rtl&&(v+=" "+f.toTP("jqx-grid-columngroup-header-rtl")),h=this.columnsheader.find("#columntable"+this.element.id),h.find("jqx-grid-columngroup-header").remove(),e=0;e<this.columngroupslevel-1;e++)for(r=0;r<this.columngroups.length;r++)if((t=this.columngroups[r],c=t.level,c===e)&&(y=c*this.columnsheight,u=99999,t.groups)){l=function(n){for(var t,i=0,r=0;r<n.groups.length;r++)t=n.groups[r],t.groups?i+=l(t):t.hidden||(i+=t.width,u=Math.min(parseFloat(t.element.style.left),u));return i};t.width=l(t);t.left=u;var a=this.columnsheight,b=w--,i=n('<div role="columnheader" style="z-index: '+b+';position: absolute;" class="'+v+'"><\/div>'),o=n(this._rendercolumnheader(t.text,t.align,this.columnsheight,this));t.renderer&&(o=n("<div style='height: 100%; width: 100%;'><\/div>"),p=t.renderer(t.text,t.align,a),o.html(p));i.append(o);i[0].style.left=u+"px";u===0&&(i[0].style.borderLeftColor="transparent");this.showcolumnheaderlines||(i[0].style.borderRightColor="transparent",i[0].style.borderBottomColor="transparent",i[0].style.boxShadow="none");i[0].style.top=y+"px";i[0].style.height=a+"px";i[0].style.width=-1+t.width+"px";h.append(i);t.element=i;t.rendered&&t.rendered(o,t.align,a)}}},_resizecolumngroups:function(){var i,u,f,t;if(this.columngroups)for(i=0;i<this.columngroups.length;i++){var n=this.columngroups[i],e=n.level,o=e*this.columnsheight,r=99999;n.groups&&(u=function(n){for(var t,i=0,f=0;f<n.groups.length;f++)t=n.groups[f],t.groups?i+=u(t):t.hidden||(i+=t.width,r=Math.min(parseFloat(t.element.style.left),r));return i},n.width=u(n),n.left=r,f=this.columnsheight,t=n.element,t[0].style.left=r+"px",t[0].style.top=o+"px",t[0].style.height=f+"px",t[0].style.width=-1+n.width+"px")}},_handlecolumnsmenu:function(t,i,r,u,f){var l,h;t.dragmousedown=null;u[0].id=t.dataview.generatekey();i.append(u);r[0].columnsmenu=u[0];f.element=r[0];var o=this.columnsmenuwidth+1,v=function(){var n;if(!f.menu)return!1;if(!t.resizing){if(f._menuvisible&&t._hasOpenedMenu)return!1;f._animating=!0;t.menuitemsarray&&t.menuitemsarray.length>0&&(t.enableanimations?(u.css("display","block"),u.stop(),f.iconscontainer.stop(),t.rtl?(u.css("margin-left",-o),u.animate({"margin-left":"0px"},"fast",function(){u.css("display","block");f._animating=!1;f._menuvisible=!0})):(u.css("margin-left","0px"),u.animate({"margin-left":-o},"fast",function(){u.css("display","block");f._animating=!1;f._menuvisible=!0})),n=t.rtl?o:-(32+o),f.iconscontainer.animate({"margin-left":n},"fast")):(u.css("display","block"),n=t.rtl?16:-48,f.iconscontainer.css("margin-left",n+"px"),f._animating=!1,f._menuvisible=!0))}},c="mouseenter";t.isTouchDevice()&&(c="touchstart");t.addHandler(r,c,function(i){var s=parseInt(i.pageX),e=t.columnsresize&&f.resizable?3:0,o=parseInt(r.coord().left),u,h;if(t.hasTransform&&(o=n.jqx.utilities.getOffset(r).left),u=f.width,t.rtl&&(u=0),e!=0&&s>=o+u-e&&s<=o+u+e)return!1;h=t.vScrollInstance.isScrolling();f.menu&&t.autoshowcolumnsmenubutton&&!h&&!t.disabled&&v()});t.autoshowcolumnsmenubutton||(u.css("display","block"),l=t.rtl?16:-48,f.iconscontainer.css("margin-left",l+"px"),t.rtl?u.css({"margin-left":"0px"}):u.css({"margin-left":-o}));t.addHandler(r,"mouseleave",function(){var r,i;if(t.menuitemsarray&&t.menuitemsarray.length>0&&f.menu){if(r=n.data(document.body,"contextmenu"+t.element.id),r!=undefined&&u[0].id==r.columnsmenu.id)return;t.autoshowcolumnsmenubutton&&(t.enableanimations?(t.rtl?u.css("margin-left","0px"):u.css("margin-left",-o),u.stop(),f.iconscontainer.stop(),t.rtl?u.animate({"margin-left":-o},"fast",function(){u.css("display","none");f._menuvisible=!1}):u.animate({"margin-left":0},"fast",function(){u.css("display","none");f._menuvisible=!1}),i=t.rtl?0:-32,f.iconscontainer.animate({"margin-left":i},"fast")):(u.css("display","none"),i=t.rtl?0:-32,f.iconscontainer.css("margin-left",i+"px"),f._menuvisible=!1))}});var s=!0,e="",a=n(f.filtericon);t.addHandler(u,"mousedown",function(){t.gridmenu||t._initmenu();s=!n.data(t.gridmenu[0],"contextMenuOpened"+t.gridmenu[0].id);e=n.data(document.body,"contextmenu"+t.element.id);e!=null&&(e=e.column.datafield)});t.addHandler(a,"mousedown",function(){t.gridmenu||t._initmenu();s=!n.data(t.gridmenu[0],"contextMenuOpened"+t.gridmenu[0].id);e=n.data(document.body,"contextmenu"+t.element.id);e!=null&&(e=e.column.datafield)});h=function(){var r,a,v,b,i,o,c,nt,l,tt;if(!f.menu||(t.gridmenu||t._initmenu(),t.disabled))return!1;for(i=0;i<t.columns.records.length;i++)t.columns.records[i].datafield!=f.datafield&&(t.columns.records[i]._menuvisible=!1);if(r=u.coord(!0),a=u.height(),!s&&(s=!0,e==f.datafield))return t._closemenu(),!1;if(v=t.host.coord(!0),t.hasTransform&&(v=n.jqx.utilities.getOffset(t.host),r=n.jqx.utilities.getOffset(u)),v.left+t.host.width()>parseInt(r.left)+t.gridmenu.width()?t.gridmenu.jqxMenu("open",r.left,r.top+a):t.gridmenu.jqxMenu("open",u.width()+r.left-t.gridmenu.width(),r.top+a),t.gridmenu.width()<100&&t._arrangemenu(),t.adaptive&&t.element.offsetWidth<t.adaptivewidth){for(t.gridmenu.jqxMenu("close"),t.gridmenu.jqxMenu("open",v.left,r.top+a),b=0,i=0;i<t.columns.records.length;i++)(o=t.columns.records[i],o.hidden||o.adaptivehidden||o.columntype==="adaptive")||(b+=o.adaptivewidth);t.gridmenu.width(b);t.gridmenu.height(t.content.height())}(!t.filterable||t.filterable&&t.showfilterrow)&&setTimeout(function(){var i,r,u;for(t.gridmenu.focus(),i=t.gridmenu.find(".jqx-item"),r=0;r<i.length;r++)i[r].active&&(i[r].active=!1);u=i[0];i[0].className.indexOf("disabled")>=0&&(u=i[1]);n(i).removeClass("jqx-fill-state-focus");n(u).addClass("jqx-fill-state-focus");u.active=!0},225);t._hasOpenedMenu=!0;var k=t._getmenuitembyindex(0),d=t._getmenuitembyindex(1),g=t._getmenuitembyindex(2),y=t._getmenuitembyindex(3),p=t._getmenuitembyindex(4),h=t._getmenuitembyindex(5);if(k!=null&&d!=null&&g!=null&&(c=f.sortable&&t.sortable,t.gridmenu.jqxMenu("disable",k.id,!c),t.gridmenu.jqxMenu("disable",d.id,!c),t.gridmenu.jqxMenu("disable",g.id,!c),f.displayfield!=undefined&&(t.sortcolumn==f.displayfield?(nt=t.getsortinformation(),c&&(nt.sortdirection.ascending?t.gridmenu.jqxMenu("disable",k.id,!0):t.gridmenu.jqxMenu("disable",d.id,!0))):t.gridmenu.jqxMenu("disable",g.id,!0))),y!=null&&p!=null&&(t.groupable&&f.groupable?t.groups&&t.groups.indexOf(f.datafield)!=-1?(t.gridmenu.jqxMenu("disable",y.id,!0),t.gridmenu.jqxMenu("disable",p.id,!1)):(t.gridmenu.jqxMenu("disable",y.id,!1),t.gridmenu.jqxMenu("disable",p.id,!0)):(t.gridmenu.jqxMenu("disable",p.id,!0),t.gridmenu.jqxMenu("disable",y.id,!0))),h!=null){t.menuOwner=f;t._updatefilterpanel(t,h,f);l=0;t.sortable&&t._togglesort&&t.showsortmenuitems&&(l+=3);t.groupable&&t.addgroup&&t.showgroupmenuitems&&(l+=2);var w=l*33+6,it=t._measureMenuElement(),w=l*it+14;n.jqx.browser.msie&&n.jqx.browser.version<8&&(w+=20,n(h).height(194));t.isTouchDevice()&&(w+=10);t.filterable&&t.showfiltermenuitems&&(f.filterable?(t.gridmenu.height(w+194),n(h).css("display","block")):(t.gridmenu.height(w),n(h).css("display","none")))}t.columnmenuopening&&(tt=t.columnmenuopening(t.gridmenu,f.displayfield,t.gridmenu.height()),!1===tt&&t._closemenu());n.data(document.body,"contextmenu"+t.element.id,{column:f,columnsmenu:u[0]})};t.addHandler(a,"click",function(){return f.menu?(t.showfilterrow||(u[0].style.display!="block"&&r.trigger("mouseenter"),setTimeout(function(){u[0].style.display!="block"&&r.trigger("mouseenter");h()},200)),!1):!1});t.addHandler(u,"click",function(){return f.menu?(h(),!1):!1});t.isTouchDevice()&&t.addHandler(u,n.jqx.mobile.getTouchEventName("touchstart"),function(){return f.menu?(t._hasOpenedMenu?t._closemenu():h(),!1):!1})},_removecolumnhandlers:function(t){var i=this.that,r=n(t.element),f,u;r.length>0&&(i.removeHandler(r,"mouseenter"),i.removeHandler(r,"mouseleave"),f=n(t.filtericon),i.removeHandler(f,"mousedown"),i.removeHandler(f,"click"),i.removeHandler(r,"click"),i.removeHandler(r,"mousemove"),i.columnsreorder&&(i.removeHandler(r,"mousedown.drag"),i.removeHandler(r,"mousemove.drag")),i.removeHandler(r,"dragstart"),r[0].columnsmenu&&(u=n(r[0].columnsmenu),i.removeHandler(u,"click"),i.removeHandler(u,"mousedown"),i.removeHandler(u,n.jqx.mobile.getTouchEventName("touchstart"))))},_rendercolumnheader:function(n,t,i,r){var u="8px";return(r.columngroups?(u=i/2-this._columnheight/2,u<0&&(u=6),u+="px"):this.columnsheight!=32&&(u=this.columnsheight/2-this._columnheight/2,u<0&&(u=6),u+="px"),this.enableellipsis)?t=="left"?'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 4px; margin-right: 2px; line-height: "+i+'px;"><span style="text-overflow: ellipsis; cursor: default;">'+n+"<\/span><\/div>":'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 2px; margin-right: 4px; line-height: "+i+'px;"><span style="text-overflow: ellipsis; cursor: default;">'+n+"<\/span><\/div>":t=="center"||t=="middle"?'<div style="padding-bottom: 2px; text-align: center; line-height: '+i+'px;"><a href="#">'+n+"<\/a><\/div>":'<a style="line-height: '+i+"px; float: "+t+';" href="#">'+n+"<\/a>"},_renderrows:function(t,i){var r=this.that,a,u,v,y,e,p,c,s,w,o,h,f,l,b,k;if((this.pageable||this.groupable)&&(this.autoheight||this.autorowheight)&&this.table!=null&&this.table[0].rows!=null&&this.table[0].rows.length<this.dataview.rows.length&&(r.prerenderrequired=!0),!this.pageable&&(this.autoheight||this.autorowheight)&&(this.virtualmode||this.unboundmode)&&(a=this.source.totalrecords,isNaN(a)||this.table!=null&&this.table[0].rows!=null&&this.table[0].rows.length!=a&&(r.prerenderrequired=!0)),(this.autoheight||this.autorowheight)&&!r.prerenderrequired&&this.table&&this.table[0].rows&&(this.table[0].rows.length<this.dataview.records.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?r.prerenderrequired=!0:this.pageable||(r.prerenderrequired=!0)),this.table[0].rows.length<this.dataview.cachedrecords.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?r.prerenderrequired=!0:this.pageable||(r.prerenderrequired=!0))),r._prerenderrows(t),r._requiresupdate&&(r._requiresupdate=!1,r._updatepageviews()),u=function(){r._loading||(r.WinJS?MSApp.execUnsafeLocalFunction(function(){r._rendervisualrows()}):r._rendervisualrows(),r.virtualmode&&r.showaggregates&&r._updateaggregates&&r.refreshaggregates())},v=n.jqx.browser.msie&&n.jqx.browser.version<10,this.virtualmode)y=function(){var n,t,u,f;if(r.rendergridrows&&(n=r._startboundindex,n==undefined&&(n=0),t=n+1+r.dataview.pagesize,n!=null&&t!=null&&(u=r.source._source?!0:!1,f=u?r.source._source.recordstartindex:r.source.recordstartindex,f!=n||i==!0))){if(u){if(t>=r.source._source.totalrecords&&(t=r.source._source.totalrecords,n=t-r.dataview.pagesize-1,n<0&&(n=0),r.source._source.recordendindex==t&&r.source._source.recordstartindex==n))return;r.source._source.recordstartindex=n;r.source._source.recordendindex=t}else r.source.recordstartindex=n,r.source.recordendindex=t;r.updatebounddata("cells")}},this.loadondemand&&(u(),y(),this.loadondemand=!1),s=this._browser==undefined?this._isIE10():this._browser,this.editable&&this.editcell&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()?u():this.autoheight?u():s||v||navigator&&navigator.userAgent.indexOf("Safari")!=-1?(this._scrolltimer!=null&&clearTimeout(this._scrolltimer),this._scrolltimer=setTimeout(function(){u()},5)):u();else{if(this.scrollmode=="deferred"&&(this.hScrollInstance.isScrolling()||this.vScrollInstance.isScrolling())){this._scrolltimer!=null&&clearInterval(this._scrolltimer);e=this._getfirstvisualrow();e!=null&&(p=function(){var o,i,f,s,u,t;if(e==null)return"";for(o="<table>",i=r.deferreddatafields,i==null&&r.columns.records.length>0&&(i=[],i.push(r.columns.records[0].displayfield)),f=0;f<i.length;f++)s=i[f],u=r._getcolumnbydatafield(s),u&&(t=r._getcellvalue(u,e),u.cellsformat!=""&&n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(t)?t=n.jqx.dataFormat.formatdate(t,u.cellsformat,r.gridlocalization):n.jqx.dataFormat.isNumber(t)&&(t=n.jqx.dataFormat.formatnumber(t,u.cellsformat,r.gridlocalization))),o+="<tr><td>"+t+"<\/td><\/tr>");return o+"<\/table>"},c=this.scrollfeedback?this.scrollfeedback(e.bounddata):p(e.bounddata),c!=this._scrollelementcontent&&(this._scrollelement[0].innerHTML=c,this._scrollelementcontent=c));this._scrollelement.css("visibility","visible");this._scrollelementoverlay.css("visibility","visible");this._scrollelement.css("margin-top",-this._scrollelement.height()/2);this._scrolltimer=setInterval(function(){r.hScrollInstance.isScrolling()||r.vScrollInstance.isScrolling()||(u(),r._scrollelement.css("visibility","hidden"),r._scrollelementoverlay.css("visibility","hidden"),clearInterval(r._scrolltimer),e&&r.ensurerowvisible(e.visibleindex))},100);return}if(navigator&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Safari")!=-1&&(this._updatedelay=1),this.touchDevice!=undefined&&this.touchDevice==!0&&(this._updatedelay=5),s=this._browser==undefined?this._isIE10():this._browser,(s||v)&&(this._updatedelay=5),s&&this.hScrollInstance.isScrolling()){u();return}n.jqx.browser.mozilla&&this._updatedelay==0&&(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&(this._updatedelay=0);w=this.isTouchDevice();w&&(this._updatedelay=0);this.updatedelay!=null&&(this._updatedelay=this.updatedelay);this._updatedelay==0?u():(o=this._jqxgridrendertimer,o!=null&&clearTimeout(o),this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()?(this._updatedelay?o=setTimeout(function(){u()},this._updatedelay):(o=null,u()),this._jqxgridrendertimer=o):(this._jqxgridrendertimer=o,u()))}r.autorowheight&&!r.autoheight&&this._pageviews.length>0&&(h=this._gettableheight(),f=this._pageviews[0].height,f>h?(this.pageable&&this.gotopage&&(f=this._pageviews[0].height,f<0&&(f=this._pageviews[0].height)),this.vScrollBar.css("visibility")!="visible"&&this.vScrollBar.css("visibility","visible"),(f<=h||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),f-h>0?this.scrollmode!="deferred"&&(l=f-h,b=this.vScrollInstance.max,this.vScrollBar.jqxScrollBar({max:l}),Math.round(l)!=Math.round(b)&&(k=this.vScrollBar.jqxScrollBar("value"),k>l&&this.vScrollBar.jqxScrollBar({value:0}))):this.vScrollBar.jqxScrollBar({value:0,max:f})):(this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})),this._arrange(),this.virtualsizeinfo&&(this.virtualsizeinfo.virtualheight=f))},scrolling:function(){var n=this.vScrollInstance.isScrolling(),t=this.hScrollInstance.isScrolling();return{vertical:n,horizontal:t}},_renderhorizontalscroll:function(){var a=this.hScrollInstance,u=a.value,n,i,c,t,r,l,e,y;if(this.hScrollBar.css("visibility")==="hidden"&&(a.value=0,u=0),n=parseInt(u),this.table!=null){var p=this.table[0].rows.length,f=this.columnsrow,v=this.groupable&&this.groups.length>0?this.groups.length:0,w=this.columns.records.length-v,b=this.columns.records,k=this.dataview.rows.length==0;if(this.rtl&&this.hScrollBar.css("visibility")!="hidden"&&(n=a.max-n),k&&!this._haspinned){for(i=0;i<p;i++)for(c=this.table[0].rows[i],t=0;t<v+w;t++)r=c.cells[t],r!=undefined&&(l=b[t],l.pinned&&(r.style.marginLeft=n+"px",i==0&&(e=f[0].cells[t],e.style.marginLeft=n+"px")));this.table[0].style.marginLeft=-n+"px";f[0].style.marginLeft=-n+"px"}else if(this._haspinned||this._haspinned==undefined){for(i=0;i<p;i++)for(c=this.table[0].rows[i],t=0;t<v+w;t++)if(r=c.cells[t],r!=undefined&&(l=b[t],l.pinned)){if(n==0&&r.style.marginLeft=="")continue;var o=null,s=null,h=null;this.showeverpresentrow&&this.addnewrowtop&&this.addnewrowtop[0].cells&&(h=this.addnewrowtop[0].cells[t]);this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(s=this.filterrow[0].cells[t]);this.showaggregates&&this.statusbar[0].cells&&(o=this.statusbar[0].cells[t]);this.rtl?(r.style.marginLeft=-parseInt(u)+"px",i==0&&(e=f[0].cells[t],e.style.marginLeft=-parseInt(u)+"px",o&&(o.style.marginLeft=-parseInt(u)+"px"),s&&(s.style.marginLeft=-parseInt(u)+"px"),h&&(h.style.marginLeft=-parseInt(u)+"px"))):(r.style.marginLeft=n+"px",i==0&&(e=f[0].cells[t],e.style.marginLeft=n+"px",o&&(o.style.marginLeft=n+"px"),s&&(s.style.marginLeft=n+"px"),h&&(h.style.marginLeft=n+"px")))}this.table[0].style.marginLeft=-n+"px";f[0].style.marginLeft=-n+"px"}else this._haspinned==!1&&(this.table[0].style.marginLeft=-n+"px",f[0].style.marginLeft=-n+"px");this.showaggregates&&this.statusbar[0].cells&&(y=0,this.rtl&&this.vScrollBar.css("visibility")!="hidden"&&this.hScrollBar.css("visibility")!="hidden"&&(y=2+parseInt(this.hScrollBar.css("left"))),this.statusbar[0].style.marginLeft=-n+y+"px");this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(this.filterrow[0].style.marginLeft=-n+"px");this.showeverpresentrow&&this.addnewrowtop&&this.addnewrowtop[0].cells&&(this.addnewrowtop[0].style.marginLeft=-n+"px")}},_updaterowdetailsvisibility:function(){if(this.rowdetails)for(var t=0;t<this._rowdetailselementscache.length;t++)n(this._rowdetailselementscache[t]).css("display","none")},_getvisualcolumnsindexes:function(n,t,i,r,u,f){var e,l;if(this.rowdetails||this.rtl||this.editcell||this.width&&this.width.toString().indexOf("%")>=0||this.exporting)return{start:0,end:i+r};var h=0,o=-1,s=i+r,c=!1;if(this.autorowheight)return{start:0,end:i+r};if(!u)for(e=0;e<i+r;e++)if(l=e,c||this.columns.records[e].pinned&&f&&(c=!0),this.columns.records[e].hidden||this.columns.records[e].adaptivehidden||(h+=this.columns.records[e].width),h>=n&&o==-1&&(o=e),h>t+n){s=e;break}return s++,s>i+r&&(s=i+r),(o==-1||c)&&(o=0),{start:o,end:s}},_getvirtualcolumnsindexes:function(n,t,i,r,u){var f,h;if(this.rtl||this.editcell||this.exporting)return{start:0,end:i+r};var s=0,e=-1,o=i+r;if(this.autorowheight)return{start:0,end:i+r};if(!u)for(f=0;f<i+r;f++)if(h=f,this.columns.records[f].hidden||this.columns.records[f].adaptivehidden||(s+=this.columns.records[f].width),s>=n&&e==-1&&(e=f),s>t+n){o=f;break}return o++,o>i+r&&(o=i+r),e==-1&&(e=0),{start:e,end:o}},_getfirstvisualrow:function(){var u=this.vScrollInstance,f=u.value,i=parseInt(f),n,r,t;if(this._pagescache.length==0&&(this.dataview.updateview(),this._loadrows()),this.vScrollBar[0].style.visibility!="visible"&&(i=0),!this.pageable){if(n=this._findvisiblerow(i,this._pageviews),n==-1)return null;n!=this.dataview.pagenum?(this.dataview.pagenum=n,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}return r=this._findvisiblerow(i,this._pagescache[this.dataview.pagenum]),t=this._pagescache[this.dataview.pagenum],t&&t[0]?t[r]:void 0},_rendervisualrows:function(){var ni,it,st,b,wt,l,e,y,o,r,ei,bt,k,d,oi,t,c,u,kt,dt,a,s,i,g,p,w,hi;if(this.virtualsizeinfo){var nt=this.vScrollInstance,gt=this.hScrollInstance,ci=nt.value,li=gt.value,tt=parseInt(ci),et=parseInt(li),ot=this._gettableheight(),ct=this._hostwidth!=undefined?this._hostwidth:this.host.width();if(this.hScrollBar[0].style.visibility=="visible"&&(ot+=29),this.scrollmode=="deferred"&&this._newmax!=0&&tt>this._newmax&&this._newmax!=null&&(tt=this._newmax),ni=nt.isScrolling()||gt.isScrolling()||this._keydown,it=this.groupable&&this.groups.length>0,this.visiblerows=[],this.hittestinfo=[],this.editcell&&this.editrow==undefined&&this._hidecelleditor(!1),this.editrow!=undefined&&this._hideeditors(),this.virtualmode&&!this.pageable&&(this._pagescache=[]),this._pagescache.length==0&&(this.dataview.updateview(),this._loadrows()),this.vScrollBar[0].style.visibility=="hidden"&&(tt=0),!this.pageable){if(st=this._findvisiblerow(tt,this._pageviews),st==-1){this._clearvisualrows();this._renderemptyrow();this._updaterowdetailsvisibility();return}st!=this.dataview.pagenum?(this.dataview.pagenum=st,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}if(b=this.groupable&&this.groups.length>0?this.groups.length:0,this.columns.records){var ft=this.columns.records.length-b,ai=this._findvisiblerow(tt,this._pagescache[this.dataview.pagenum]),f=this._pagescache[this.dataview.pagenum],h=ai;h<0&&(h=0);var lt=0,v=0,at=0,vt=0,ht=this.virtualsizeinfo.visiblerecords,ti=this.groupable?this.groups.length:0,rt=this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");this.rtl&&(rt+=" "+this.toTP("jqx-grid-cell-rtl"));(this.autoheight||this.autorowheight)&&this.pageable&&(!this.groupable||this.groupable&&this.groups.length===0)&&(ht=this.dataview.pagesize);it&&(rt=" "+this.toTP("jqx-grid-group-cell"));this.isTouchDevice()&&(rt+=" "+this.toTP("jqx-touch"));this.autorowheight&&(rt+=" jqx-grid-cell-wrap");var c=this.rowsheight,pi=h,vi=this._rendercell,ii=this._getvisualcolumnsindexes(et,ct,b,ft,it,!0),yt=ii.start,pt=ii.end,ri=this._getvirtualcolumnsindexes(et,ct,b,ft,it),ui=ri.start,fi=ri.end,wi=n.jqx.browser.msie&&n.jqx.browser.version<9;if((this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews[0]&&(this._oldpageviewheight=this._pageviews[0].height),this.autorowheight&&(h=0),h>=0){if(this._updaterowdetailsvisibility(),this._startboundindex=f!=null?f[h].bounddata.boundindex:0,this._startvisibleindex=f!=null?f[h].bounddata.visibleindex:0,wt=this.table[0].rows,this.columns.records.length>10&&this.enablecolumnsvirtualization)for(l=function(n){return n.parentNode&&n.parentNode.nodeName!="#document-fragment"?!0:!1},a=0;a<wt.length;a++){for(u=wt[a],i=0;i<ui;i++)(t=i,this.columns.records[t].pinned)||this.columns.records[t].datafield!=null&&(e=u.cells[t],l(e)&&e.parentNode.removeChild(e),y=this.columns.records[t].element,this.columns.records[t]._rendered=!1,l(y)&&this.columnsrow[0].removeChild(y),this.filterrow&&l(this.filterrow[0].cells[t])&&this.columns.records[t].filterable&&this.filterrow[0].cells[t].parentNode.removeChild(this.filterrow[0].cells[t]));for(i=fi;i<this.columns.records.length;i++)(t=i,this.columns.records[t].pinned)||this.columns.records[t].datafield!=null&&(e=u.cells[t],l(e)&&e.parentNode.removeChild(e),y=this.columns.records[t].element,this.columns.records[t]._rendered=!1,l(y)&&this.columnsrow[0].removeChild(y),this.filterrow&&l(this.filterrow[0].cells[t])&&this.columns.records[t].filterable&&this.filterrow[0].cells[t].parentNode.removeChild(this.filterrow[0].cells[t]));for(i=ui;i<fi;i++)t=i,e=u.cells[t],l(e)||u.appendChild(e),y=this.columns.records[t].element,this.columns.records[t]._rendered=!0,l(y)||this.columnsrow[0].appendChild(y),this.filterrow&&!l(this.filterrow[0].cells[t])&&this.columns.records[t].filterable&&this.filterrow[0].firstChild.appendChild(this.filterrow[0].cells[t])}for(o=0;o<ht&&v<ht;o++){if(r=f!=undefined?f[h+o]:null,this.virtualmode&&o>=this.source.totalrecords&&(r=null),r==null){if(h=-o,this._pagescache[this.dataview.pagenum+1])f=this._pagescache[this.dataview.pagenum+1],this.dataview.pagenum++;else{ei=this._pageviews.length;do if(this.dataview.pagenum<this._pageviews.length-1)this.dataview.pagenum++,f=undefined,this._pageviews[this.dataview.pagenum].height>0&&(this.dataview.updateview(),this._loadrows(),f=this._pagescache[this.dataview.pagenum]);else{f=undefined;break}while(f==undefined&&this.dataview.pagenum<ei)}f!=undefined&&(r=f[h+o])}if(r!=null){if(r.hidden)continue;if(this._endboundindex=this._startboundindex+o,this._endvisibleindex=this._startvisibleindex+o,o==0&&(bt=Math.abs(tt-r.top),this.table[0].style.top=-bt+"px",vt=-bt),u=this.table[0].rows[v],!u)continue;for(parseInt(u.style.height)!=r.height&&(u.style.height=parseInt(r.height)+"px"),at+=r.height,k=this.rowdetails&&r.rowdetails,d=!r.rowdetailshidden,k&&d&&(u.style.height=parseInt(r.height-r.rowdetailsheight)+"px",ht++),oi=this._isrowselected(!0,r),i=yt;i<pt;i++)t=i,this._rendervisualcell(vi,rt,oi,k,d,it,ti,u,r,t,v,ni);if(r.group!=undefined&&this._rendergroup&&this._rendergroup(ti,u,r,b,ft,v,ct),this.autorowheight&&(this.autoheight||this.pageable)){for(c=this.rowsheight,i=yt;i<pt;i++){if(this.editable&&this.editcell&&this.editcell.column==this.columns.records[i].datafield&&this.editcell.row==this.getboundindex(r)&&this.editcell.editor){c=Math.max(c,this.editcell.editor.height());continue}u.cells[i].firstChild&&(c=Math.max(c,8+parseInt(u.cells[i].firstChild.offsetHeight)))}u.style.height=parseInt(c)+"px";this.heights[this._startboundindex+o]=c;k&&d&&(c+=r.rowdetailsheight);r.height=c}if(this.visiblerows[this.visiblerows.length]=r,this.hittestinfo[this.hittestinfo.length]={row:r,visualrow:u,details:!1},k&&d&&(v++,u=this.table[0].rows[v],this._renderrowdetails(rt,u,r,b,ft,v),this.visiblerows[this.visiblerows.length]=r,this.hittestinfo[this.hittestinfo.length]={row:r,visualrow:u,details:!0}),!this.autorowheight&&at+vt>=ot)break}else cansetheight=!0,this._clearvisualrow(et,it,v,b,ft),at+lt+vt<=ot&&(lt+=c);v++}if(this._horizontalvalue=et,lt>0&&this.vScrollBar[0].style.visibility=="visible"){var bi=parseInt(this.table.css("top")),si=this._pageviews[this._pageviews.length-1],yi=nt.max,ut=si.top+si.height-ot;this.hScrollBar.css("visibility")=="visible"&&(ut+=this.scrollbarsize+20);yi==ut||this.autorowheight||ut>=0&&(this.scrollmode!="deferred"?(nt.max=ut,nt.setPosition(nt.max)):this._newmax!=ut&&(this._newmax=ut,this._rendervisualrows()))}}if((this.autoheight||this.pageable)&&this.autorowheight){for(this._pagescache=[],kt=0,dt=0,a=0;a<this.visiblerows.length;a++){s=this.visiblerows[a];s.top=kt;kt+=s.height;dt+=s.height;var k=this.rowdetails&&s.rowdetails,d=!s.rowdetailshidden,u=this.table[0].rows[a];for(k&&d&&a++,i=yt;i<pt;i++)if(g=this.columns.records[i],!g.hidden&&!g.adaptivehidden&&!g.cellsrenderer&&(p=u.cells[i],w=0,p.firstChild?(w=(s.height-parseInt(p.firstChild.offsetHeight)-8)/2,k&&d&&(w=(s.height-s.rowdetailsheight-n(p.firstChild).height()-8)/2)):w=(s.height-parseInt(n(p).height())-8)/2,w>=0&&(w=parseInt(w)+4,p.firstChild&&p.firstChild.className.indexOf("jqx-grid-groups-row")==-1&&g.columntype!="checkbox"&&g.columntype!="button"))){if(this.editable&&this.editcell&&this.editcell.column==g.datafield&&this.editcell.row==this.getboundindex(s))continue;p.firstChild.style.marginTop=w+"px"}}this._pageviews[0]&&(this._pageviews[0].height=dt);this._arrange()}this._renderemptyrow();this.toCompile&&this.toCompile.length>0&&(hi=this,n.each(hi.toCompile,function(){if(this.compiled)return!0;var t=this.cell;if(!t)return!0;n.jqx.angularCompile&&n.jqx.angularCompile(t,"<div>"+this.value+"<\/div>");this.compiled=!0}))}}},_hideemptyrow:function(){var i,u,r,t;if(this.showemptyrow&&this.table&&this.table[0].rows&&(i=this.table[0].rows[0],i))for(u=!1,r=0;r<i.cells.length;r++)t=n(i.cells[r]),t.css("display")=="none"||u||(t.width()==this.host.width()||t.text()==this.gridlocalization.emptydatastring)&&(t[0].checkbox=null,t[0].button=null,u=!0,t[0].innerHTML="")},_renderemptyrow:function(){var e,s,r,u,t,i,o,f;if(!this._loading&&this.dataview.records.length==0&&this.showemptyrow&&(e=!1,s=this.toTP("jqx-grid-cell"),this.table&&this.table.length>0&&this.table[0].rows&&this.table[0].rows.length>0))for(r=this.table[0].rows[0],this.table[0].style.top="0px",u=0;u<r.cells.length;u++)t=n(r.cells[u]),t.css("display")=="none"||e||(t[0].checkbox=null,t[0].button=null,t[0].className=s,e=!0,t[0].innerHTML="",i=n("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'><\/span>"),i.text(this.gridlocalization.emptydatastring),t.append(i),o=0,this.oldhscroll||(o=parseInt(this.table[0].style.marginLeft),this.rtl&&(t.css("z-index",999),t.css("overflow","visible"))),i.css("left",-o-i.width()/2),i.css("top",this._gettableheight()/2-i.height()/2),n.jqx.browser.msie&&n.jqx.browser.version<8&&(i.css("margin-left","0px"),i.css("left",this.host.width()/2-i.width()/2)),f=Math.abs(parseInt(this.table[0].style.top)),isNaN(f)&&(f=0),n(r).height(this._gettableheight()+f),t.css("margin-left","0px"),t.width(this.host.width()),this.table.width()<this.host.width()&&this.table.width(this.host.width())),t.addClass(this.toThemeProperty("jqx-grid-empty-cell"))},_clearvisualrows:function(){var t=this.virtualsizeinfo.visiblerecords,i=this.hScrollInstance,r=i.value,u=parseInt(r),f=this.groupable&&this.groups.length>0,n;if(this.columns.records)for(n=0;n<t;n++)this._clearvisualrow(u,f,n,0,this.columns.records.length)},_iscellselected:function(n,t,i){var u=!1,f=0,e,r;if(this.virtualmode&&this.pageable&&this.groupable&&this.groups.length>0&&(f=this.dataview.pagesize*this.dataview.pagenum),this.groups.length>0&&this.pageable&&this.groupable){if(e=this.getrowboundindexbyid(t.bounddata.uid),e!=-1){for(r in this.selectedcells)r==e+"_"+i&&(u=!0);return u}return!1}if(n&&t.bounddata!=null)if(this.selectionmode!="singlerow"){if(this.dataview.filters.length>0)if(this.virtualmode||t.bounddata.dataindex==undefined)for(r in this.selectedcells)r==f+t.bounddata.boundindex+"_"+i&&(u=!0);else for(r in this.selectedcells)r==f+t.bounddata.dataindex+"_"+i&&(u=!0);else for(r in this.selectedcells)if(r==f+t.bounddata.boundindex+"_"+i){u=!0;break}}else if(this.dataview.filters.length>0){if(this.virtualmode||t.bounddata.dataindex==undefined){for(r in this.selectedcells)if(r==f+t.bounddata.boundindex+"_"+i){u=!0;break}}else for(r in this.selectedcells)if(r==f+t.bounddata.dataindex+"_"+i){u=!0;break}}else for(r in this.selectedcells)if(r==f+t.bounddata.boundindex==this.selectedrowindex){u=!0;break}return u},_isrowselected:function(n,t){var i=!1,r=0,u;return(this.virtualmode&&this.pageable&&this.groupable&&this.groups.length>0&&(r=this.dataview.pagesize*this.dataview.pagenum),this.groupable&&this.groups.length>0&&this.pageable)?(u=this.getrowboundindexbyid(t.bounddata.uid),u==undefined||u==-1)?!1:(this.selectedrowindexes.indexOf(u)!=-1&&(i=!0),i||(i=u==this.selectedrowindex&&this.selectedrowindex!=-1),i):(n&&t.bounddata!=null&&(this.selectionmode!="singlerow"?this.dataview.filters.length>0?this.virtualmode||t.bounddata.dataindex==undefined?this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)!=-1&&(i=!0):this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)!=-1&&(i=!0):this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)!=-1&&(i=!0):this.dataview.filters.length>0?this.virtualmode||t.bounddata.dataindex==undefined?this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)!=-1&&(i=!0):this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)!=-1&&(i=!0):r+t.bounddata.boundindex==this.selectedrowindex&&(i=!0)),i)},_rendervisualcell:function(t,i,r,u,f,e,o,s,h,c,l,a){var y=this.columns.records[c],p,v,tt,k,it,d,rt,g,b,nt,w;if(y.hidden||y.adaptivehidden){p=s.cells[c];p.innerHTML="";return}if(cellvalue=this._getcellvalue(y,h),p=s.cells[c],v=i,this.selectionmode.indexOf("cell")!=-1&&(r=this.dataview.filters.length>0?this.selectedcells[h.bounddata.dataindex+"_"+y.datafield]?!0:!1:this.selectedcells[h.boundindex+"_"+y.datafield]?!0:!1,this.editcell&&this.editcell.row===h.boundindex&&this.editcell.column===y.datafield&&y.columntype!=="checkbox"&&(r=!1),(this.virtualmode||this.groupable&&this.groups.length>0&&this.pageable)&&(r=this._iscellselected(!0,h,y.datafield))),y.cellclassname!=""&&y.cellclassname&&(typeof y.cellclassname=="string"?v+=" "+y.cellclassname:(tt=y.cellclassname(this.getboundindex(h),y.datafield,cellvalue,h.bounddata),tt&&(v+=" "+tt))),k=this.showsortcolumnbackground&&this.sortcolumn&&y.displayfield==this.sortcolumn,this.sortmode==="many"&&this.showsortcolumnbackground)for(it=this.getsortcolumns(),d=0;d<it.length;d++)y.displayfield===it[d].dataField&&(k=!0);if(k&&(v+=" "+this.toTP("jqx-grid-cell-sort")),y.filter&&this.showfiltercolumnbackground&&(v+=" "+this.toTP("jqx-grid-cell-filter")),h.bounddata.totalsrow&&(v+=" "+this.toTP("jqx-grid-cell-pinned")),(y.pinned&&this.showpinnedcolumnbackground||y.grouped)&&(e?h.bounddata.totalsrow||(v+=" "+this.toTP("jqx-grid-cell-pinned")):v+=" "+this.toTP("jqx-grid-cell-pinned")),this.altrows&&h.group==undefined&&(rt=h.visibleindex,rt>=this.altstart&&(this.altstart+rt)%(1+this.altstep)==0&&(v+=k?" "+this.toTP("jqx-grid-cell-sort-alt"):" "+this.toTP("jqx-grid-cell-alt"),y.filter&&this.showfiltercolumnbackground&&(v+=" "+this.toTP("jqx-grid-cell-filter-alt")),y.pinned&&this.showpinnedcolumnbackground&&(v+=" "+this.toTP("jqx-grid-cell-pinned-alt")))),c<=o?(e||this.rowdetails||this.pageable&&this.virtualmode)&&(g=n(p),b=this.columns.records[c].width,p.style.width!=parseInt(b)+"px"&&g.width(b)):(e||this.rowdetails)&&this._hiddencolumns&&(g=n(p),b=this.columns.records[c].width,parseInt(p.style.width)!=b&&g.width(b)),nt=!0,this.rowdetails&&u&&(f&&!e?v+=" "+this.toTP("jqx-grid-details-cell"):e&&(v+=" "+this.toTP("jqx-grid-group-details-cell")),this.showrowdetailscolumn))if(this.rtl){if(h.group==undefined&&c==s.cells.length-o-1){w=this.toThemeProperty("jqx-icon-arrow-down");f?(v+=" "+this.toTP("jqx-grid-group-expand-rtl"),v+=" "+w):(v+=" "+this.toTP("jqx-grid-group-collapse-rtl"),w=this.toThemeProperty("jqx-icon-arrow-left"),v+=" "+w);nt=!1;p.title="";p.innerHTML="";p.className!=v&&(p.className=v);return}}else if(h.group==undefined&&c==o&&!h.bounddata.totalsrow){w=this.toThemeProperty("jqx-icon-arrow-down");f?(v+=" "+this.toTP("jqx-grid-group-expand"),v+=" "+w):(v+=" "+this.toTP("jqx-grid-group-collapse"),w=this.toThemeProperty("jqx-icon-arrow-right"),v+=" "+w);nt=!1;p.title="";p.innerHTML="";p.className!=v&&(p.className=v);return}if(r&&nt&&c>=o&&(v+=" "+this.toTP("jqx-grid-cell-selected"),v+=" "+this.toTP("jqx-fill-state-pressed")),p.className!=v&&(p.className=v),h.group!=undefined){cellvalue="";p.title="";p.innerHTML="";return}t(this,y,h,cellvalue,p,a)},_rendercell:function(t,i,r,u,f,e){var a=u+"_"+i.visibleindex,h,y,b,w,o,l,v,p;if((i.columntype=="number"||i.cellsrenderer!=null)&&(a=r.uniqueid+"_"+i.visibleindex),i.columntype=="number"&&(u=r.visibleindex),i.columntype==="adaptive"&&(u="..."),f.style.borderBottomColor=t.showrowlines?"":"transparent",t.showcolumnheaderlines?(i.element.style.borderRightColor="",i.element.style.boxShadow=""):(i.element.style.borderRightColor="transparent",i.element.style.boxShadow="none"),f.style.borderRightColor=t.showcolumnlines?"":"transparent",t.editcell&&t.editrow==undefined)if(t.editmode=="selectedrow"&&i.editable&&t.editable){if(t.editcell.row==t.getboundindex(r)&&t._showcelleditor){t.hScrollInstance.isScrolling()||t.vScrollInstance.isScrolling()?t._showcelleditor(t.editcell.row,i,f,!1,!1):t._showcelleditor(t.editcell.row,i,f,t.editcell.init);f.className+=" "+t.toTP("jqx-grid-cell-edit");return}}else if(t.editcell.row==t.getboundindex(r)&&t.editcell.column==i.datafield&&(t.editcell.element=f,t.editcell.editing&&t._showcelleditor)){t.hScrollInstance.isScrolling()||t.vScrollInstance.isScrolling()?t._showcelleditor(t.editcell.row,i,t.editcell.element,t.editcell.init,!1):t._showcelleditor(t.editcell.row,i,t.editcell.element,t.editcell.init);f.className+=" "+t.toTP("jqx-grid-cell-edit");return}if(h=t._defaultcellsrenderer(u,i),y=t._cellscache[a],y){if(i.columntype=="checkbox"){if(t.host.jqxCheckBox){u===""&&(u=null);b=f.innerHTML.toString().length==0;!f.checkbox||t.groupable||b?t._rendercheckboxcell(t,f,i,r,u):(f.checkboxrow=t.getboundindex(r),u==""&&(u=!1),u=="1"&&(u=!0),u=="0"&&(u=!1),u==1&&(u=!0),u==0&&(u=!1),u=="true"&&(u=!0),u=="false"&&(u=!1),u!=null||i.threestatecheckbox||(u=!1),i.checkboxcolumn&&(u=!1,t.dataview.filters.length>0&&!t.virtualmode&&r.bounddata.dataindex!=undefined?t.selectedrowindexes.indexOf(r.bounddata.dataindex)!=-1&&(u=!0):t.selectedrowindexes.indexOf(r.bounddata.boundindex)!=-1&&(u=!0)),t.disabled||(f.checkboxinstance?f.checkboxinstance._setState(u):f.checkbox.jqxCheckBox("_setState",u)));i.cellsrenderer!=null&&(w=i.cellsrenderer(t.getboundindex(r),i.datafield,u,h,i.getcolumnproperties(),r.bounddata),w!=undefined&&(f.innerHTML=w));return}}else if(i.columntype=="button"&&t.host.jqxButton){u==""&&(u=!1);i.cellsrenderer!=null&&(u=i.cellsrenderer(t.getboundindex(r),i.datafield,u,h,i.getcolumnproperties(),r.bounddata));f.innerHTML==""&&(f.buttonrow=t.getboundindex(r),f.button=null,t._renderbuttoncell(t,f,i,r,u));f.button&&!t.groupable?(f.buttonrow=t.getboundindex(r),f.button.val(u)):t._renderbuttoncell(t,f,i,r,u);return}if(i.createwidget){if(f.innerHTML==""&&(f.widgetrow=t.getboundindex(r),f.widget=null,t._renderwidgetcell(t,f,i,r,u)),f.widget&&!t.groupable)if(f.widgetrow=t.getboundindex(r),i.initwidget)i.initwidget(t.getboundindex(r),i.datafield,u,f.firstChild);else throw new Error("jqxGrid: 'initwidget' column function is not implemented. Please, implement 'initwidget'");else t._renderwidgetcell(t,f,i,r,u);return}if(o=y.element,i.cellsrenderer!=null||f.childNodes&&f.childNodes.length==0||t.groupable||t.rowdetails)f.innerHTML!=o&&(f.innerHTML=o);else if(f.innerHTML.indexOf("editor")>=0)f.innerHTML=o;else if(e){var k=o.indexOf(">"),d=o.indexOf("<\/"),s=o.substring(k+1,d),c=f.childNodes[0];s.indexOf(">")>=0?f.innerHTML=o:c.childNodes[0]?s!=c.childNodes[0].nodeValue&&(s.indexOf("&")>=0?f.innerHTML=o:c.childNodes[0].nodeValue=s):(p=document.createTextNode(s),c.appendChild(p))}else f.innerHTML!=o&&(f.innerHTML=o);t.enabletooltips&&i.enabletooltips&&(f.title=y.title);return}if(i.columntype=="checkbox"){t._rendercheckboxcell(t,f,i,r,u);t._cellscache[a]={element:"",title:u};t.enabletooltips&&i.enabletooltips&&(f.title=""+u);return}if(i.columntype=="button"){i.cellsrenderer!=null&&(u=i.cellsrenderer(t.getboundindex(r),i.datafield,u,h,i.getcolumnproperties(),r.bounddata));t._renderbuttoncell(t,f,i,r,u);t._cellscache[a]={element:"",title:u};t.enabletooltips&&i.enabletooltips&&(f.title=""+u);return}if(i.columntype=="number"&&(u=r.visibleindex),i.createwidget){i.cellsrenderer!=null&&(u=i.cellsrenderer(t.getboundindex(r),i.datafield,u,h,i.getcolumnproperties(),r.bounddata));t._renderwidgetcell(t,f,i,r,u);t._cellscache[a]={element:"",title:u};t.enabletooltips&&i.enabletooltips&&(f.title=u);return}if(o=null,i.cellsrenderer!=null){if(o=i.cellsrenderer(t.getboundindex(r),i.datafield,u,h,i.getcolumnproperties(),r.bounddata),o&&(o.indexOf("<jqx-")>=0||o.indexOf(" ng-")>=0)){t.toCompile&&t.toCompile.push({cell:f,value:o,row:t.getboundindex(r)});return}}else o=h;if(o==null&&(o=h),l=u,t.enabletooltips&&i.enabletooltips&&(i.cellsformat!=""&&n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(u)?l=n.jqx.dataFormat.formatdate(l,i.cellsformat,t.gridlocalization):n.jqx.dataFormat.isNumber(u)&&(l=n.jqx.dataFormat.formatnumber(l,i.cellsformat,t.gridlocalization))),f.title=l),t.WinJS)n(f).html(o);else if(v=f.innerHTML,v.indexOf("editor")>=0||i.cellsrenderer!=null||t.groupable||t.virtualmode)f.innerHTML=o;else if(v.length>0){var k=o.indexOf(">"),d=o.indexOf("<\/"),s=o.substring(k+1,d),c=f.childNodes[0];s.indexOf(">")>=0?f.innerHTML=o:c.childNodes[0]?s!=c.childNodes[0].nodeValue&&(s.indexOf("&")>=0||v.indexOf("span")>=0?f.innerHTML=o:c.childNodes[0].nodeValue=s):(p=document.createTextNode(s),c.appendChild(p))}else v!=o&&(f.innerHTML=o);return t._cellscache[a]={element:f.innerHTML,title:l},!0},_isIE10:function(){var i,t;return this._browser==undefined&&(i=n.jqx.utilities.getBrowser(),i.browser=="msie"&&parseInt(i.version)>9?this._browser=!0:(this._browser=!1,i.browser=="msie"&&(t="Browser CodeName: "+navigator.appCodeName+"",t+="Browser Name: "+navigator.appName+"",t+="Browser Version: "+navigator.appVersion+"",t+="Platform: "+navigator.platform+"",t+="User-agent header: "+navigator.userAgent+"",t.indexOf("Zune 4.7")!=-1&&(this._browser=!0)))),this._browser},_renderinlinecell:function(t,i){var r=n(i);i.innerHTML='<div style="position: absolute;"><\/div>'},_rendercheckboxcell:function(t,i,r,u,f){var e,o,s;t.host.jqxCheckBox&&(e=n(i),f===""&&(f=r.threestatecheckbox?null:!1),f!==null||r.threestatecheckbox||(f=!1),f=="1"&&(f=!0),f=="0"&&(f=!1),f==1&&(f=!0),f==0&&(f=!1),f=="true"&&(f=!0),f=="false"&&(f=!1),r.checkboxcolumn&&(f=!1,o=this.getboundindex(u),this.selectedrowindexes.indexOf(o)!=-1&&(f=!0)),e.find(".jqx-checkbox").length==0?(i.innerHTML='<div style="position: absolute; top: 50%; left: 50%; margin-top: -9px; margin-left: -12px;"><\/div>',n(i.firstChild).jqxCheckBox({disabled:t.disabled,_canFocus:!1,hasInput:!1,hasThreeStates:r.threestatecheckbox,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,locked:!0,theme:t.theme,checked:f}),this.enabletooltips&&r.enabletooltips&&(i.title=""+f),this.editable&&r.editable&&n(i.firstChild).jqxCheckBox({locked:!1}),r.checkboxcolumn&&n(i.firstChild).jqxCheckBox({locked:!1}),i.checkbox=n(i.firstChild),i.checkboxinstance=i.checkbox.data().jqxCheckBox.instance,i.checkboxrow=this.getboundindex(u),s=n.data(i.firstChild,"jqxCheckBox").instance,s.updated=function(u,f,e){var h,c,v,l,o,s,a;if(t.disabled)for(f=e,h=t.table[0].rows.length,c=t._getcolumnindex(r.datafield),o=0;o<h;o++)s=t.table[0].rows[o].cells[c].firstChild,s&&n(s).jqxCheckBox({disabled:t.disabled});if(r.editable&&!t.disabled){if(h=t.table[0].rows.length,c=t._getcolumnindex(r.datafield),t.editrow==undefined){if(r.cellbeginedit&&(v=r.cellbeginedit(i.checkboxrow,r.datafield,r.columntype,!f),v==!1)){t.setcellvalue(i.checkboxrow,r.datafield,!f,!0);return}if(r.cellvaluechanging&&(l=r.cellvaluechanging(i.checkboxrow,r.datafield,r.columntype,e,f),l!=undefined&&(f=l)),t.editmode!=="selectedrow")for(o=0;o<h;o++)s=t.table[0].rows[o].cells[c].firstChild,s&&n(s).jqxCheckBox("destroy");t.editcell&&t.editcell.validated==!1?t.setcellvalue(i.checkboxrow,r.datafield,!f,!0):t.editmode!=="selectedrow"||t.editcell==null?(a=t.getrowdata(i.checkboxrow),t._raiseEvent(17,{rowindex:i.checkboxrow,row:a,datafield:r.datafield,value:e,columntype:r.columntype}),t.setcellvalue(i.checkboxrow,r.datafield,f,!0),t._raiseEvent(18,{rowindex:i.checkboxrow,row:a,datafield:r.datafield,oldvalue:e,value:f,columntype:r.columntype})):t.setcellvalue(i.checkboxrow,r.datafield,f,!1,!1);r.cellendedit&&r.cellendedit(i.checkboxrow,r.datafield,r.columntype,f)}}else r.checkboxcolumn&&(t.editcell&&t.endcelledit(t.editcell.row,t.editcell.column,!1,!0),t.disabled||(f?t.selectrow(i.checkboxrow):t.unselectrow(i.checkboxrow),t.autosavestate&&t.savestate&&t.savestate()))}):(i.checkboxrow=this.getboundindex(u),n(i.firstChild).jqxCheckBox("_setState",f,!(this.editable&&r.editable)&&!r.checkboxcolumn)))},_renderwidgetcell:function(t,i,r,u,f){var o=n(i),e;o.find(".jqx-grid-widget").length==0?(e='<div class="jqx-grid-widget" style="opacity: 0.99; position: absolute; width: 100%; height:100%; top: 0%; left: 0%; padding: 0px;"><\/div>',i.innerHTML=e,r.createwidget(u,r.datafield,f,i.firstChild),n(i.firstChild).attr("hideFocus","true"),n(i.firstChild).children().addClass("jqx-grid-widget"),i.widget=n(i.firstChild),i.widgetrow=t.getboundindex(u)):(r.initwidget(t.getboundindex(u),r.datafield,f,i.firstChild),i.widgetrow=t.getboundindex(u),n(i.firstChild).val(f))},_renderbuttoncell:function(t,i,r,u,f){var e,o,s;t.host.jqxButton&&(e=n(i),f==""&&(f=!1),e.find(".jqx-button").length==0?(i.innerHTML='<input type="button" style="opacity: 0.99; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>',n(i.firstChild).val(f),n(i.firstChild).attr("hideFocus","true"),n(i.firstChild).jqxButton({disabled:t.disabled,theme:t.theme,height:t.rowsheight-4,width:r.width-4}),i.button=n(i.firstChild),i.buttonrow=t.getboundindex(u),o=this.isTouchDevice(),o?(s=n.jqx.mobile.getTouchEventName("touchend"),t.addHandler(n(i.firstChild),s,function(n){r.buttonclick&&r.buttonclick(i.buttonrow,n)})):t.addHandler(n(i.firstChild),"click",function(n){r.buttonclick&&r.buttonclick(i.buttonrow,n)})):(i.buttonrow=t.getboundindex(u),n(i.firstChild).val(f)))},_clearvisualrow:function(t,i,r,u,f){var l=this.toTP("jqx-grid-cell"),h,c,e,s,a,o;for(i&&(l=" "+this.toTP("jqx-grid-group-cell")),l+=" "+this.toTP("jqx-grid-cleared-cell"),h=this.table[0].rows,c=0;c<u+f;c++)h[r]&&(e=h[r].cells[c],e.className!=l&&(e.className=l),s=this.columns.records[c],this._horizontalvalue==t||s.pinned||this.oldhscroll==!0&&(a=-t,e.style.marginLeft=-t+"px"),o=s.width,s.adaptivewidth&&(o=s.adaptivewidth),o<s.minwidth&&(o=s.minwidth),o>s.maxwidth&&(o=s.maxwidth),parseInt(e.style.width)!=o&&(n(e)[0].style.width=o!="auto"?o+"px":o),e.title!=""&&(e.title=""),e.innerHTML!=""&&(e.innerHTML=""));h[r]&&parseInt(h[r].style.height)!=this.rowsheight&&(h[r].style.height=parseInt(this.rowsheight)+"px")},_findgroupstate:function(n){var t=this._findgroup(n);return t==null?!1:t.expanded},_findgroup:function(n){return this.expandedgroups[n]?this.expandedgroups[n]:null},_clearcaches:function(){this._columnsbydatafield=[];this._pagescache=[];this._pageviews=[];this._cellscache=[];this.heights=[];this.hiddens=[];this.hiddenboundrows=[];this.heightboundrows=[];this.detailboundrows=[];this.details=[];this.expandedgroups=[];this._rowdetailscache=[];this._rowdetailselementscache=[];n.jqx.dataFormat&&n.jqx.dataFormat.cleardatescache();this.tableheight=null},_getColumnText:function(t){if(this._columnsbydatafield==undefined&&(this._columnsbydatafield=[]),this._columnsbydatafield[t])return this._columnsbydatafield[t];var i=t,r=null;return n.each(this.columns.records,function(){if(this.datafield==t||this.displayfield==t)return i=this.text,r=this,!1}),this._columnsbydatafield[t]={label:i,column:r},this._columnsbydatafield[t]},_getcolumnbydatafield:function(t){if(this.__columnsbydatafield==undefined&&(this.__columnsbydatafield=[]),this.__columnsbydatafield[t])return this.__columnsbydatafield[t];var r=t,i=null;return n.each(this.columns.records,function(){if(this.datafield==t||this.displayfield==t)return r=this.text,i=this,!1}),this.__columnsbydatafield[t]=i,this.__columnsbydatafield[t]},isscrollingvertically:function(){return this.vScrollBar.jqxScrollBar("isScrolling")},_renderrowdetails:function(t,i,r,u,f){var y,o,l,s,h,nt,tt,v,e,a,b;if(i!=undefined){var rt=n(i),k=0,c=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(this.groupable&&this.groups.length>0)for(y=0;y<=f;y++)o=n(i.cells[y]),o[0].innerHTML="",o[0].className="jqx-grid-details-cell";if(o=n(i.cells[k]),o[0].style.display=="none"){for(var p=i.cells[k],d=2,ut=k;p!=undefined&&p.style.display=="none"&&d<10;)p=i.cells[ut+d-1],d++;o=n(p)}if(this.rtl)for(l=u;l<f;l++)i.cells[l].innerHTML="",i.cells[l].className="jqx-grid-details-cell";if(o.css("width","100%"),rt.height(r.rowdetailsheight),o[0].className=t,s=this.getboundindex(r),h=s+"_",this._rowdetailscache[h]){if(nt=this._rowdetailscache[h],tt=nt.html,this.initrowdetails){if(this._rowdetailscache[h].element){var e=this._rowdetailscache[h].element,a=o.coord(),w=this.gridcontent.coord(),it=parseInt(a.top)-parseInt(w.top),g=parseInt(a.left)-parseInt(w.left);this.rtl&&(g=0);n(e).css("top",it);n(e).css("left",g);n(e).css("display","block");n(e).width(this.host.width()-c);this.layoutrowdetails&&this.layoutrowdetails(s,e,this.element,this.getrowdata(s))}}else o[0].innerHTML=tt;return}if(o[0].innerHTML="",this.enablerowdetailsindent||(c=0),v='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: '+c+'px;">'+r.rowdetails+"<\/div>",this.rtl&&(v='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: 0px; margin-right: '+c+'px;">'+r.rowdetails+"<\/div>"),this._rowdetailscache[h]={id:i.id,html:v},this.initrowdetails){e=n(v)[0];n(this.gridcontent).prepend(n(e));n(e).css("position","absolute");n(e).width(this.host.width()-c);n(e).height(o.height());a=o.coord();n(e).css("z-index",599);this.isTouchDevice()&&n(e).css("z-index",999);n(e).addClass(this.toThemeProperty("jqx-widget-content"));var a=o.coord(),w=this.gridcontent.coord(),it=parseInt(a.top)-parseInt(w.top),g=parseInt(a.left)-parseInt(w.left);n(e).css("top",it);n(e).css("left",g);this.content[0].scrollTop=0;this.content[0].scrollLeft=0;b=n(n(e).children()[0]);b[0].id!=""&&(b[0].id=b[0].id+s);this.initrowdetails(s,e,this.element,this.getrowdata(s));this._rowdetailscache[h].element=e;this._rowdetailselementscache[s]=e}else o[0].innerHTML=v}},_defaultcellsrenderer:function(t,i){i.cellsformat!=""&&n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(t)?t=n.jqx.dataFormat.formatdate(t,i.cellsformat,this.gridlocalization):n.jqx.dataFormat.isNumber(t)&&(t=n.jqx.dataFormat.formatnumber(t,i.cellsformat,this.gridlocalization)));var r="8px";if(this.rowsheight!=31&&(r=this.rowsheight/2-this._cellheight/2,r<0&&(r=4),r+="px"),this.enableellipsis){if(i.cellsalign=="center"||i.cellsalign=="middle")return'<div class="jqx-grid-cell-middle-align" style="margin-top: '+r+';">'+t+"<\/div>";if(i.cellsalign=="left")return'<div class="jqx-grid-cell-left-align" style="margin-top: '+r+';">'+t+"<\/div>";if(i.cellsalign=="right")return'<div class="jqx-grid-cell-right-align" style="margin-top: '+r+';">'+t+"<\/div>"}return i.cellsalign=="center"||i.cellsalign=="middle"?'<div style="text-align: center; margin-top: '+r+';">'+t+"<\/div>":'<span style="margin-left: 4px; margin-right: 2px; margin-top: '+r+"; float: "+i.cellsalign+';">'+t+"<\/span>"},getcelltext:function(t,i){if(t==null||i==null)return null;var r=this.getcellvalue(t,i),u=this.getcolumn(i);return u&&u.cellsformat!=""&&n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(r)?r=n.jqx.dataFormat.formatdate(r,u.cellsformat,this.gridlocalization):n.jqx.dataFormat.isNumber(r)&&(r=n.jqx.dataFormat.formatnumber(r,u.cellsformat,this.gridlocalization))),r},getcelltextbyid:function(t,i){if(t==null||i==null)return null;var r=this.getcellvaluebyid(t,i),u=this.getcolumn(i);return u&&u.cellsformat!=""&&n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(r)?r=n.jqx.dataFormat.formatdate(r,u.cellsformat,this.gridlocalization):n.jqx.dataFormat.isNumber(r)&&(r=n.jqx.dataFormat.formatnumber(r,u.cellsformat,this.gridlocalization))),r},_getcellvalue:function(n,t){var i=null;return i=t.bounddata[n.datafield],n.displayfield!=null&&(i=t.bounddata[n.displayfield]),i==null&&(i=""),i},getcell:function(n,t){if(n==null||t==null)return null;var r=parseInt(n),i=n,u="";return isNaN(r)||(i=this.getrowdata(r)),i!=null&&(u=i[t]),this._getcellresult(u,n,t)},getrenderedcell:function(n,t){if(n==null||t==null)return null;var r=parseInt(n),i=n,u="";return isNaN(r)||(i=this.getrenderedrowdata(r)),i!=null&&(u=i[t]),this._getcellresult(u,n,t)},_getcellresult:function(n,t,i){var u=this.getcolumn(i);if(u==null||u==undefined)return null;var r=u.getcolumnproperties(),e=r.hidden,o=r.width,s=r.pinned,h=r.cellsalign,c=r.cellsformat,f=this.getrowheight(t);return f==!1?null:{value:n,row:t,column:i,datafield:i,width:o,height:f,hidden:e,pinned:s,align:h,format:c}},setcellvaluebyid:function(n,t,i,r,u){var f=this.getrowboundindexbyid(n);return this.setcellvalue(f,t,i,r,u)},getcellvaluebyid:function(n,t){var i=this.getrowboundindexbyid(n);return this.getcellvalue(i,t)},setcellvalue:function(t,i,r,u,f){var b,l,p,nt,a,ft,c,k,s,et,ot,h,w,tt,it,ht,rt,d,lt,at,ct;if(t==null||i==null)return!1;var y=parseInt(t),pt=y,e=t;if(isNaN(y)||(e=this.getrowdata(y)),b=!1,this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(b=!0),this.virtualmode&&(this._pagescache=[]),this.sortcache&&(this.sortcache={}),l="",p="",e!=null&&e[i]!==r){if(e[i]===null&&r==="")return;var s=this._getcolumnbydatafield(i),v="string",g=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(g&&(nt="",n.each(g,function(){if(this.name==s.displayfield)return this.type&&(nt=this.type),!1}),nt&&(v=nt),p=e[s.displayfield]),l=e[i],(!s.nullable||r!=null&&r!==""&&s.nullable&&r.label===undefined)&&(n.jqx.dataFormat.isNumber(l)||v=="number"||v=="float"||v=="int"||v=="decimal"&&v!="date"?(this.gridlocalization&&this.gridlocalization.decimalseparator==","&&r&&r.indexOf&&r.indexOf(",")>=0&&(r=r.replace(",",".")),r=new Number(r),r=parseFloat(r),isNaN(r)&&(r=0)):(n.jqx.dataFormat.isDate(l)||v=="date")&&r!=""&&(a=r,a=new Date(a),a!="Invalid Date"&&a!=null?r=a:a=="Invalid Date"&&(a=new Date,r=a)),e[i]===r)){this._updating||u==!1||this._renderrows(this.virtualsizeinfo);return}if(ft=this.source&&this.source._source.localdata&&this.source._source.localdata.name==="observableArray",e[i]=r,ft&&(c=this.source._source.localdata,c._updating||(c._updating=!0,c[t][i]=r,c._updating=!1)),k=this.getrenderedrowdata(y,!0),!k)return;k[i]=r;r!=null&&r.label!=null&&(s=this._getcolumnbydatafield(i),e[s.displayfield]=r.label,k[s.displayfield]=r.label,e[i]=r.value,k[i]=r.value,ft&&!c._updating&&(c._updating=!0,c[t][i]=r.value,c[t][s.displayfield]=r.label,c._updating=!1));b&&e.dataindex!=undefined&&(pt=e.dataindex,this.dataview.cachedrecords[e.dataindex][i]=r,r!=null&&r.label!=undefined&&(this.dataview.cachedrecords[e.dataindex][i]=r.value,this.dataview.cachedrecords[e.dataindex][s.displayfield]=r.label))}else return this._updating||u==!1||this._renderrows(this.virtualsizeinfo),!1;if(this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){if(et=y,b&&e.dataindex!=undefined&&(et=e.dataindex),ot=this.source._source._localdata()[et],this.source.suspendKO=!0,h=ot,h[i]&&h[i].subscribe)r!=null&&r.label!=null?(h[s.displayfield](r.label),h[i](r.value)):h[i](r);else{var g=this.source._source.datafields,st=null;if(g&&n.each(g,function(){if(this.name==i)return st=this.map,!1}),st==null)r!=null&&r.label!=null?(h[i]=r.value,h[s.displayfield]=r.label):h[i]=r;else if(w=st.split(this.source.mapChar),w.length>0){for(tt=h,it=0;it<w.length-1;it++)tt=tt[w[it]];tt[w[w.length-1]]=r}this.source._source._localdata.replace(ot,n.extend({},h))}this.source.suspendKO=!1}if(this.sortcolumn&&this.dataview.sortby&&!this._updating){if(ht=this.getsortinformation(),this.sortcolumn==i&&this.sortmode!=="many")this.dataview.clearsortdata(),this.dataview.sortby(ht.sortcolumn,ht.sortdirection.ascending);else if(this.sortmode==="many")for(rt=this.getsortcolumns(),this.dataview.clearsortdata(),this.sortby(null),d=0;d<rt.length;d++)this.sortby(rt[d].dataField,rt[d].ascending)}else this._updating||this.dataview.sortby&&this.dataview.sortcache[i]&&(this.dataview.sortcache[i]=null);if(this._cellscache=[],this._pagescache=[],this.source.updaterow&&(f==undefined||f==!0)){var ut=!1,o=this.that,wt=function(n){!1==n&&(o.setcellvalue(t,i,l,!0,!1),l!=p&&o.setcellvalue(t,o.getcolumn(i).displayfield,p,!0,!1))};try{lt=this.getrowid(y);ut=this.source.updaterow(lt,e,wt);ut==undefined&&(ut=!0)}catch(bt){ut=!1;o.setcellvalue(t,i,l,!0,!1);l!=p&&o.setcellvalue(t,o.getcolumn(i).displayfield,p,!0,!1);return}}if(at=this.vScrollInstance.value,this._updating&&u!=!0&&(u=!1),u==!0||u==undefined){var o=this.that,vt=function(){o.pageable&&o.updatepagerdetails&&(o.updatepagerdetails(),(o.autoheight||o.autorowheight)&&o._updatepageviews())},yt=this.groupable&&this.groups.length>0;b&&!yt?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.refresh(),this.rendergridcontent(!0,!1),vt(),this._renderrows(this.virtualsizeinfo)):this.sortcolumn&&!yt?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.reloaddata(),this.rendergridcontent(!0,!1),vt(),this._renderrows(this.virtualsizeinfo)):this.groupable&&this.groups.length>0?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.pageable?this.groups.indexOf(i)!=-1?(this._pagescache=[],this._cellscache=[],this.dataview.refresh(),this._render(!0,!0,!1,!1)):(this._pagescache=[],this._cellscache=[],this.dataview.updateview(),this._renderrows(this.virtualsizeinfo)):(this._pagescache=[],this._cellscache=[],this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))):(this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))}return this.vScrollInstance.setPosition(at),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this.showfilterrow&&this.filterable&&this.filterrow&&(ct=this.getcolumn(i).filtertype,(ct=="list"||ct=="checkedlist")&&this._updatelistfilters(!0)),this._raiseEvent(19,{rowindex:t,datafield:i,newvalue:r,value:r,oldvalue:l}),!0},getcellvalue:function(n,t){var r,i;return n==null||t==null?null:(r=parseInt(n),i=n,isNaN(r)||(i=this.getrowdata(r)),i!=null)?i[t]:null},getrows:function(){var e=this.dataview.records.length,u,r,t,i,f;if(this.virtualmode){for(t=[],i=0;i<this.dataview.records.length;i++)u=this.dataview.records[i],u&&t.push(u);return(this.dataview.records.length===undefined&&n.each(this.dataview.records,function(){var n=this;n&&t.push(n)}),r=0,this.pageable&&(r=this.dataview.pagenum*this.dataview.pagesize),t.length>this.source._source.totalrecords-r)?t.slice(0,this.source._source.totalrecords-r):t}if(this.dataview.sortdata){for(t=[],i=0;i<e;i++)f={},f=n.extend({},this.dataview.sortdata[i].value),t[i]=f;return t}return this.dataview.records},getrowboundindexbyid:function(n){var r=this.dataview.recordsbyid["id"+n],i,t;if(r&&r.boundindex)return this.getboundindex(r);for(i=this.getboundrows(),t=0;t<i.length;t++)if(i[t]&&i[t].uid==n)return t;return-1},getrowdatabyid:function(n){var t=this.dataview.recordsbyid["id"+n],i;return t?t:(i=this.getrowboundindexbyid(n),this.getboundrows()[i])},getrowdata:function(n){var t;return n==undefined&&(n=0),this.virtualmode?this.dataview.records[n]:this.getboundrows()[n]},getrenderedrowdata:function(n,t){var i,r;return(n==undefined&&(n=0),this.virtualmode)?(i=this.getrowvisibleindex(n),r=this.dataview.loadedrecords[i],r):(i=this.getrowvisibleindex(n),i>=0)?(this.groupable&&this.groups.length>0?r=this.dataview.loadedrecords[i]:(r=this.dataview.loadedrecords[i],this.pageable&&(t==undefined||t==!1)&&(r=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+n])),r):null},getboundrows:function(){return this.dataview.cachedrecords},getrowdisplayindex:function(n){for(var i=this.getdisplayrows(),t=0;t<i.length;t++)if(i[t])if(i[t].dataindex!==undefined){if(i[t].dataindex==n)return i[t].visibleindex}else if(i[t].boundindex==n)return i[t].visibleindex;return-1},getboundindex:function(n){var t=n.boundindex;return this.groupable&&this.groups.length>0&&this.pageable&&n.bounddata&&(t=this.getrowboundindexbyid(n.bounddata.uid)),this.dataview.filters.length>0&&(n.bounddata?n.bounddata.dataindex!==undefined&&(t=n.bounddata.dataindex):n.dataindex!==undefined&&(t=n.dataindex)),t},getrowboundindex:function(n){var t=this.getdisplayrows()[n];return t?t.dataindex!==undefined?t.dataindex:t.boundindex:-1},getdisplayrows:function(){return this.dataview.loadedrecords},getloadedrows:function(){return this.getdisplayrows()},getvisiblerowdata:function(n){var t=this.getvisiblerows();return t?t[n]:null},getloadedrowdata:function(n){var t=this.getloadedrows();return t?t[n]:null},getvisiblerows:function(){var t,n,i;if(this.virtualmode)return this.dataview.loadedrecords;if(this.pageable){for(t=[],n=0;n<this.dataview.pagesize;n++){if(i=this.dataview.loadedrecords[n+this.dataview.pagesize*this.dataview.pagenum],i==undefined)break;t.push(i)}return t}if(this._startboundindex!=undefined&&this._endboundindex!=undefined){for(t=[],n=this._startvisibleindex;n<=this._endvisibleindex;n++){if(i=this.dataview.loadedrecords[n],i==undefined)break;t.push(i)}return t}return this.dataview.loadedrecords},getrowid:function(n){var r,i,t;if(n==undefined&&(n=0),this.virtualmode){if(i=this.getrowvisibleindex(n),t=this.dataview.loadedrecords[i],t)return t.uid}else{if(t=null,r=this.dataview.filters.length>0,n>=0&&n<this.dataview.bounditems.length&&!r&&(this.groupable&&this.groups.length>0?(i=this.getrowvisibleindex(n),t=this.dataview.loadedrecords[i]):(i=this.getrowvisibleindex(n),t=this.dataview.loadedrecords[i]),t))return t.uid;if(this.dataview.filters.length>0)return(t=this.getboundrows()[n],t&&t.uid!=null)?t.uid:null}return null},_updateGridData:function(n){var t=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(t=!0);t?(this.dataview.refresh(),n=="updaterow"?(this._render(!0,!0,!1,!1,!1),this.invalidate()):this.render()):this.sortcolumn||this.groupable&&this.groups.length>0?(this.dataview.reloaddata(),this.render()):(n==="updaterow"&&(this.dataview.refresh(),this.virtualmode||this._render(!0,!0,!1,!1,!1)),this._cellscache=[],this._pagescache=[],this._renderrows(this.virtualsizeinfo));this.showfilterrow&&this.filterable&&this.filterrow&&this._updatelistfilters(!0)},updaterow:function(t,i,r){var f,u,e,o;if(t!=undefined&&i!=undefined){if(f=this.that,u=!1,f._datachanged=!0,e=function(t,i,u){var f,e,s,h;if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);if(f=!1,n.isArray(i)?(n.each(i,function(n){f=t.dataview.updaterow(this,u[n],!1)}),t._cellscache=[],t._pagescache=[],t.dataview.refresh()):f=t.dataview.updaterow(i,u),e=t.vScrollInstance.value,(r==undefined||r==!0)&&(t._updating==undefined||t._updating==!1)&&t._updateGridData("updaterow"),t.showaggregates&&t._updatecolumnsaggregates&&t._updatecolumnsaggregates(),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata){var o=t.dataview.recordsbyid["id"+i],c=t.dataview.records.indexOf(o),l=t.source._source._localdata()[c];t.source.suspendKO=!0;t.source._source._localdata.replace(l,n.extend({},o));t.source.suspendKO=!1}return s=t.source&&t.source._source.localdata&&t.source._source.localdata.name==="observableArray",s&&(t.source._source.localdata._updating||(t.source._source.localdata._updating=!0,h=t.getrowboundindexbyid(i),t.source._source.localdata.set(h,u),t.source._source.localdata._updating=!1)),t.vScrollInstance.setPosition(e),f},this.source.updaterow){o=function(n){n==!0||n==undefined?e(f,t,i):u=!1};try{u=this.source.updaterow(t,i,o);u==undefined&&(u=!0)}catch(s){u=!1}}else u=e(f,t,i);return u}return!1},deleterow:function(t,i){var h,e,c,o,l;if(t!=undefined){this._datachanged=!0;var u=!1,r=this.that,f=this.getrowboundindexbyid(t),s=[];if(f!=undefined&&(this.selectedrowindexes.indexOf(f)>=0&&this.selectedrowindexes.splice(this.selectedrowindexes.indexOf(f),1),this.selectedrowindex==f&&(this.selectedrowindex=-1),!this.virtualmode))if(r.selectionmode.indexOf("row")>=0)n.each(this.selectedrowindexes,function(){var n=r.getrowid(this);s.push(n)}),this.selectedrowindexes=[],this.selectedrowindex=-1;else if(r.selectionmode.indexOf("cell")>=0)for(h in r.selectedcells)e=r.selectedcells[h],c=r.getrowid(e.rowindex),e.rowid=c;if(o=function(t,r){var l,e,h,a,v,u;if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);if(e=!1,l=t.vScrollInstance.value,n.isArray(r)?(n.each(r,function(){e=t.dataview.deleterow(this,!1)}),t._cellscache=[],t._pagescache=[],t.dataview.refresh()):e=t.dataview.deleterow(r),!t.virtualmode)if(t.selectionmode.indexOf("row")>=0)n.each(s,function(){var n=t.getrowboundindexbyid(this);n!=-1&&t.selectrow(n,!1)});else{h=[];for(a in t.selectedcells){var o=t.selectedcells[a],y=o.rowid,c=t.getrowboundindexbyid(y);c!=-1&&(o.rowindex=c,h[c+"_"+o.datafield]=o)}t.selectedcells=h}return(t._updating==undefined||t._updating==!1)&&(i==undefined||i==!0)&&setTimeout(function(){t._render(!0,!0,!1,!1);t.vScrollBar.css("visibility")!="visible"&&(t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._renderrows(t.virtualsizeinfo))}),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.pop(rowdata),t.source.suspendKO=!1),v=t.source&&t.source._source.localdata&&t.source._source.localdata.name==="observableArray",v&&(t.source._source.localdata._updating||(t.source._source.localdata._updating=!0,t.source._source.localdata.splice(f,1),t.source._source.localdata._updating=!1)),t.dataview.sortby&&t.sortmode!=="many"&&(u=t.getsortinformation(),u.sortcolumn&&(t.dataview.clearsortdata(),t.dataview.sortby(u.sortcolumn,u.sortdirection?u.sortdirection.ascending:null))),t.vScrollInstance.setPosition(l),e},this.source.deleterow){l=function(n){(n==!0||n==undefined)&&o(r,t)};try{this.source.deleterow(t,l);u==undefined&&(u=!0)}catch(a){u=!1}}else u=o(r,t);return u}return!1},addrow:function(t,i,r){var u,f,h,e,o,s,c;if(i!=undefined){if(this._datachanged=!0,r==undefined&&(r="last"),u=!1,f=this.that,t==null)if(h=this.dataview.filters&&this.dataview.filters.length>0,e=h?this.dataview.cachedrecords.length:this.dataview.totalrecords,n.isArray(i))o=[],n.each(i,function(n){var t=f.dataview.getid(f.dataview.source.id,i[n],e+n);o.push(t)}),t=o;else for(t=this.dataview.getid(this.dataview.source.id,i,e);null!=this.dataview.recordsbyid["id"+t];)t++;if(s=function(t,i,r,u){var e,f,o,s;if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);return e=t.vScrollInstance.value,f=!1,n.isArray(r)?(n.each(r,function(n){this.dataindex!=undefined&&delete this.dataindex;var r=null;i!=null&&i[n]!=null&&(r=i[n]);f=t.dataview.addrow(r,this,u,!1)}),t._cellscache=[],t._pagescache=[],t.dataview.refresh()):(r!=undefined&&r.dataindex!=undefined&&delete r.dataindex,f=t.dataview.addrow(i,r,u)),(t._updating==undefined||t._updating==!1)&&(t._render(!0,!0,!1,!1),t.invalidate()),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.push(r),t.source.suspendKO=!1),o=t.source&&t.source._source.localdata&&t.source._source.localdata.name==="observableArray",o&&(t.source._source.localdata._updating||(t.source._source.localdata._updating=!0,s=t.getrowboundindexbyid(i),t.source._source.localdata.set(s,r),t.source._source.localdata._updating=!1)),t.scrollmode!="deferred"?t.vScrollInstance.setPosition(e):t.vScrollInstance.setPosition(0),f},this.source.addrow){c=function(n,u){(n==!0||n==undefined)&&(u!=undefined&&(t=u),s(f,t,i,r))};try{u=this.source.addrow(t,i,r,c);u==undefined&&(u=!0)}catch(l){u=!1}if(u==!1)return!1}else s(this,t,i,r);return u}return!1},_findvisiblerow:function(n,t){var r,u,i;for(n==undefined&&(n=parseInt(this.vScrollInstance.value)),r=0,(t==undefined||t==null)&&(t=this.rows.records),u=t.length;r<=u;){if(mid=parseInt((r+u)/2),i=t[mid],i==undefined)break;if(i.top>n&&i.top+i.height>n)u=mid-1;else if(i.top<n&&i.top+i.height<n)r=mid+1;else return mid}return-1},_updatecellwidths:function(){var h=this.virtualsizeinfo,n,l,a,o,s,v,i,f,t,e,r;if(h&&(n=this.that,n.gridcontent!=undefined)){n.table==undefined&&(n.table=n.gridcontent.find("#contenttable"+n.element.id));var y=n.groupable&&n.groups.length>0,c=0,u=h.visiblerecords;if(n.pageable&&(n.autoheight||n.autorowheight)&&(u=n.dataview.pagesize,n.groupable&&(n.dataview.updateview(),u=n.dataview.rows.length)),n.groupable||n.pageable||!(n.autoheight||n.autorowheight)||(u=n.dataview.totalrecords),n.rowdetails&&(u+=n.dataview.pagesize),n.columns.records){for(l=n.columns.records.length,a=n.table[0].rows,o=0;o<u;o++){if(s=a[o],!s)break;for(v=s.cells,i=0,f=0;f<l;f++)t=n.columns.records[f],e=t.width,t.adaptivewidth&&(e=t.adaptivewidth),r=v[f],parseInt(r.style.left)!=i&&(r.style.left=i+"px"),parseInt(r.style.width)!=e&&(r.style.width=e+"px"),t.hidden&&t.hideable||t.adaptivehidden?r.style.display="none":i+=parseFloat(e);c==0&&(n.table.width(parseFloat(i)+2),c=i)}n.showaggregates&&n._updateaggregates&&n._updateaggregates();n.showfilterrow&&n.filterable&&n._updatefilterrowui&&n._updatefilterrowui();n.showeverpresentrow&&n._updateaddnewrowui();n._updatescrollbarsafterrowsprerender();y&&n._renderrows(n.virtualsizeinfo)}}},_updatescrollbarsafterrowsprerender:function(){var n=this.that,u=n.hScrollBar[0].style.visibility,t=0,f=n.vScrollBar[0].style.visibility,i,r;f=="visible"&&(t=n.scrollbarsize+3);n.scrollbarsize==0&&(t=0);n.scrollbarautoshow&&(t=0);i=n.element.style.width;i=i.toString().indexOf("%")>=0?n.host.width():parseInt(i);parseInt(n.table[0].style.width)-2>i-t?(u!="visible"&&(n.autowidth||(n.hScrollBar[0].style.visibility="visible"),n._arrange()),f=="visible"?n.scrollmode=="deferred"||n.virtualmode?n._updatevscrollbarmax():n.virtualsizeinfo&&(r=n.virtualsizeinfo.virtualheight-n._gettableheight(),!isNaN(r)&&r>0&&(u!="hidden"?n.vScrollBar.jqxScrollBar("max",r+n.scrollbarsize+4):n.vScrollBar.jqxScrollBar("max",r))):t=-2,n.hScrollBar.jqxScrollBar("max",t+n.table.width()-n.host.width())):u!="hidden"&&(n.hScrollBar.css("visibility","hidden"),n._arrange());n._renderhorizontalscroll()},_prerenderrows:function(t){var i=this.that,k,y,p,e,a,w,h,d,g,nt,tt,c,v,it,s,l,u,r,f,o;if(i.prerenderrequired==!0){if(i.prerenderrequired=!1,i.editable&&i._destroyeditors&&i._destroyeditors(),i.gridcontent==undefined)return;if(i.gridcontent.find("#contenttable"+i.element.id).remove(),i.table!=null&&(i.table.remove(),i.table=null),i.table=n('<div id="contenttable'+i.element.id+'" style="overflow: hidden; position: relative;"><\/div>'),i.gridcontent.addClass(i.toTP("jqx-grid-content")),i.gridcontent.addClass(i.toTP("jqx-widget-content")),i.gridcontent.append(i.table),k=i.groupable&&i.groups.length>0,y=0,i.table[0].rows=[],p=i.toTP("jqx-grid-cell"),k&&(p=" "+i.toTP("jqx-grid-group-cell")),e=t.visiblerecords,i.pageable&&(i.autoheight||i.autorowheight)&&(e=i.dataview.pagesize,i.groupable&&(i.dataview.updateview(),e=i.dataview.rows.length,e<i.dataview.pagesize&&(e=i.dataview.pagesize))),!i.pageable&&(i.autoheight||i.autorowheight)&&(e=i.dataview.totalrecords),i.groupable&&i.groups.length>0&&(i.autoheight||i.autorowheight)&&!i.pageable&&(e=i.dataview.rows.length),i.rowdetails&&(e+=i.autoheight||i.autorowheight?i.dataview.pagesize:e),!i.columns.records)return;a=i.columns.records.length;n.jqx.browser.msie&&n.jqx.browser.version>8&&i.table.css("opacity","0.99");n.jqx.browser.mozilla;navigator.userAgent.indexOf("Safari")!=-1&&i.table.css("opacity","0.99");w=n.jqx.browser.msie&&n.jqx.browser.version<8;w&&i.host.attr("hideFocus","true");h=i.tableZIndex;e*a>h&&(h=e*a);var rt=i.dataview.records.length==0,ut=i.isTouchDevice(),b="";for(i._hiddencolumns=!1,d=5+i.columns.records.length,c=0;c<e;c++){for(l='<div role="row" style="position: relative; height:'+i.rowsheight+'px;" id="row'+c+i.element.id+'">',w&&(l='<div role="row" style="position: relative; z-index: '+h+"; height:"+i.rowsheight+'px;" id="row'+c+i.element.id+'">',h--),s=0,u=0;u<a;u++)r=i.columns.records[u],f=r.width,f<r.minwidth&&(f=r.minwidth),f>r.maxwidth&&(f=r.maxwidth),i.rtl?(g=h-a+2*u,o='<div role="gridcell" style="left: '+s+"px; z-index: "+g+"; width:"+f+"px;",h--):o='<div role="gridcell" style="left: '+s+"px; z-index: "+h--+"; width:"+f+"px;",r.hidden&&r.hideable||r.adaptivehidden?(o+="display: none;",i._hiddencolumns=!0,h++):s+=f,c===0&&u===0&&(o+='" tabindex="'+d+'"'),o+='" class="'+p+'">',nt=this._defaultcellsrenderer("",r),o+=nt,o+="<\/div>",l+=o;y==0&&(i.table.width(parseInt(s)+2),y=s);l+="<\/div>";b+=l}for(i.WinJS?MSApp.execUnsafeLocalFunction(function(){i.table.html(b)}):i.table[0].innerHTML=b,i.table[0].rows=[],tt=i.table.children(),c=0;c<e;c++)for(v=tt[c],i.table[0].rows.push(v),v.cells=[],it=n(v).children(),u=0;u<a;u++)v.cells.push(it[u]);if(e==0){for(s=0,i.showemptyrow&&(l=n('<div style="position: relative;" id="row0'+i.element.id+'"><\/div>'),i.table.append(l),l.height(i.rowsheight),i.table[0].rows[0]=l[0],i.table[0].rows[0].cells=[]),u=0;u<a;u++)r=i.columns.records[u],f=r.width,i.showemptyrow&&(o=n('<div style="position: absolute; height: 100%; left: '+s+"px; z-index: "+h--+"; width:"+f+'px;" class="'+p+'"><\/div>'),o.height(i.rowsheight),l.append(o),i.table[0].rows[0].cells[u]=o[0]),f<r.minwidth&&(f=r.minwidth),f>r.maxwidth&&(f=r.maxwidth),r.hidden&&r.hideable||r.adaptivehidden||(s+=f);i.table.width(parseInt(s)+2);y=s}i._updatescrollbarsafterrowsprerender();i.rendered&&i.rendered("rows");i.toCompile=[];i._addoverlayelement()}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){var i=null,t=null,c,l,a,y,p,u,h,ut,r,s,g,nt,tt,it,rt,w;this.tableheight=null;var n=this.that,b=!1,v=!1;if(n.width!=null&&n.width.toString().indexOf("px")!=-1?i=n.width:n.width==undefined||isNaN(n.width)||(i=n.width),n.width!=null&&n.width.toString().indexOf("%")!=-1&&(i=n.width,b=!0),n.scrollbarautoshow&&(n.vScrollBar[0].style.display="none",n.hScrollBar[0].style.display="none",n.vScrollBar[0].style.zIndex=n.tableZIndex+n.headerZIndex,n.hScrollBar[0].style.zIndex=n.tableZIndex+n.headerZIndex),n.autowidth){for(c=0,l=0;l<n.columns.records.length;l++)a=n.columns.records[l].width,a=="auto"?(a=n._measureElementWidth(n.columns.records[l].text),c+=a):c+=a;n.vScrollBar.css("visibility")!="hidden"&&(c+=n.scrollbarsize+4);i=c;n.width=i}n.height!=null&&n.height.toString().indexOf("px")!=-1?t=n.height:n.height==undefined||isNaN(n.height)||(t=n.height);n.height!=null&&n.height.toString().indexOf("%")!=-1&&(t=n.height,v=!0);y=function(){var t=0,i=n.showheader?n.columnsheader!=null?n.columnsheader.height()+2:0:0;return t+=i,n.pageable&&(t+=n.pagerheight),n._groupsheader()&&(t+=n.groupsheaderheight),n.showtoolbar&&(t+=n.toolbarheight),n.showstatusbar&&(t+=n.statusbarheight),n.showeverpresentrow&&n.everpresentrowposition==="bottom"&&(t+=n.everpresentrowheight),n.hScrollBar[0].style.visibility=="visible"&&(t+=15),t};n.autoheight&&n.virtualsizeinfo?n.pageable&&n.gotopage?(p=0,t=p+(n._pageviews[0]?n._pageviews[0].height:0),t+=y(),n.showemptyrow&&n.dataview.totalrecords==0&&(t+=n.rowsheight)):(p=n.host.height()-n._gettableheight(),n._pageviews.length>0?(t=p+n._pageviews[n._pageviews.length-1].height+n._pageviews[n._pageviews.length-1].top,n.vScrollBar[0].style.visibility="hidden"):(t=y(),n.showemptyrow&&(t+=n.rowsheight))):n.autoheight&&(t=n.dataview.totalrecords*n.rowsheight,n.pageable&&n.gotopage&&(t=n.pagesize*n.rowsheight),n._loading&&(t=250,n.dataloadelement.height(t)),t+=y(),t>1e4&&(t=1e4));i!=null?(i=parseInt(i),b?n.element.style.width=n.width:n.element.style.width!=parseInt(n.width)+"px"&&(n.element.style.width=parseInt(n.width)+"px"),b&&(i=n.host.width(),i<=2&&(i=600,n.host.width(i)),n._oldWidth||(n._oldWidth=i))):n.host.width(250);t!=null?(v||(t=parseInt(t)),v?n.element.style.height=n.height:n.element.style.height!=parseInt(t)+"px"&&(n.element.style.height=parseInt(t)+"px"),v&&!n.autoheight&&(t=n.host.height(),t==0&&(t=400,n.host.height(t)),n._oldHeight||(n._oldHeight=t))):n.host.height(250);n.autoheight&&(n.tableheight=null,n._gettableheight());u=0;n.showtoolbar?(n.toolbar.width(i),n.toolbar.height(n.toolbarheight-1),n.toolbar.css("top",0),u+=n.toolbarheight,t-=parseInt(n.toolbarheight)):n.toolbar[0].style.height="0px";n.showstatusbar?(n.showaggregates?n.statusbar.width(n.table?Math.max(i,n.table.width()):i):n.statusbar.width(i),n.statusbar.height(n.statusbarheight)):n.statusbar[0].style.height="0px";n.showeverpresentrow&&n.everpresentrowposition==="bottom"?(n.addnewrow.width(i),n.addnewrow.height(n.everpresentrowheight)):n.addnewrow[0].style.height="0px";n._groupsheader()?(n.groupsheader.width(i),n.groupsheader.height(n.groupsheaderheight),n.groupsheader.css("top",u),h=n.groupsheader.height()+1,u+=h,t>h&&(t-=parseInt(h))):(n.groupsheader[0].style.width!=i+"px"&&(n.groupsheader[0].style.width=parseInt(i)+"px"),n.groupsheader[0].style.height="0px",n.groupsheader[0].style.top!=u+"px"&&n.groupsheader.css("top",u),h=n.showgroupsheader&&n.groupable?n.groupsheaderheight:0,ut=u+h+"px",n.content[0].style.top!=ut&&n.content.css("top",u+n.groupsheaderheight));r=n.scrollbarsize;isNaN(r)&&(r=parseInt(r),r=isNaN(r)?"17px":r+"px");r=parseInt(r);var f=4,e=2,o=0;n.vScrollBar[0].style.visibility=="visible"&&(o=r+f);n.hScrollBar[0].style.visibility=="visible"&&(e=r+f+2);r==0&&(o=0,e=0);s=0;n.pageable&&(s=n.pagerheight,e+=n.pagerheight);n.showstatusbar&&(e+=n.statusbarheight,s+=n.statusbarheight);n.showeverpresentrow&&n.everpresentrowposition==="bottom"&&(e+=n.everpresentrowheight,s+=n.everpresentrowheight);n.hScrollBar[0].style.height!=r+"px"&&(n.hScrollBar[0].style.height=parseInt(r)+"px");(n.hScrollBar[0].style.top!=u+t-f-r-s+"px"||n.hScrollBar[0].style.left!="0px")&&n.hScrollBar.css({top:u+t-f-r-s+"px",left:"0px"});var ft=n.hScrollBar[0].style.width,k=!1,d=!1;o==0?ft!=i-2+"px"&&(n.hScrollBar.width(i-2),k=!0):ft!=i-r-f+"px"&&(n.hScrollBar.width(i-r-f+"px"),k=!0);n.autoheight||(n.vScrollBar[0].style.width!=r+"px"&&(n.vScrollBar.width(r),d=!0),n.vScrollBar[0].style.height!=parseInt(t)-e+"px"&&(n.vScrollBar.height(parseInt(t)-e+"px"),d=!0),(n.vScrollBar[0].style.left!=parseInt(i)-parseInt(r)-f+"px"||n.vScrollBar[0].style.top!=u+"px")&&n.vScrollBar.css({left:parseInt(i)-parseInt(r)-f+"px",top:u}));n.rtl&&(n.vScrollBar.css({left:"0px",top:u}),n.vScrollBar.css("visibility")!="hidden"&&n.hScrollBar.css({left:r+2}));g=n.vScrollInstance;g.disabled=n.disabled;n.autoheight||d&&g.refresh();nt=n.hScrollInstance;nt.disabled=n.disabled;k&&nt.refresh();n.autowidth&&(n.hScrollBar[0].style.visibility="hidden");n.statusbarheight=parseInt(n.statusbarheight);n.toolbarheight=parseInt(n.toolbarheight);tt=function(n){if(n.vScrollBar[0].style.visibility=="visible"&&n.hScrollBar[0].style.visibility=="visible"){n.bottomRight[0].style.visibility="visible";n.bottomRight.css({left:1+parseInt(n.vScrollBar.css("left")),top:parseInt(n.hScrollBar.css("top"))});n.rtl&&n.bottomRight.css("left","0px");n.bottomRight.width(parseInt(r)+3);n.bottomRight.height(parseInt(r)+4);var i=n.showeverpresentrow&&n.everpresentrowposition=="bottom",t=i?n.everpresentrowheight:0;t>0&&!n.showaggregates&&(n.bottomRight.css("z-index",99),n.bottomRight.height(parseInt(r)+4+t),n.bottomRight.css({top:parseInt(n.hScrollBar.css("top"))-t}));n.showaggregates&&(n.bottomRight.css("z-index",99),n.bottomRight.height(parseInt(r)+4+n.statusbarheight+t),n.bottomRight.css({top:parseInt(n.hScrollBar.css("top"))-n.statusbarheight-t}))}else n.bottomRight[0].style.visibility="hidden"};tt(this);n.content[0].style.width!=i-o+"px"&&n.content.width(i-o);n.content[0].style.height!=t-e+3+"px"&&n.content.height(t-e+3);n.scrollbarautoshow&&(n.content[0].style.width!=i+"px"&&n.content.width(i),n.content[0].style.height!=t+"px"&&n.content.height(t));n.content[0].style.top!=u+"px"&&n.content.css("top",u);n.rtl&&(n.content.css("left",o),n.scrollbarautoshow&&n.content.css("left","0px"),n.table&&(it=n.table.width(),it<i-o&&n.content.css("left",i-it)));n.showstatusbar&&(n.statusbar.css("top",u+t-n.statusbarheight-(n.pageable?n.pagerheight:0)),n.showaggregates&&(n.hScrollBar.css("visibility")=="visible"&&(n.hScrollBar.css({top:u+t-f-r-s+n.statusbarheight+"px"}),n.statusbar.css("top",1+u+t-r-5-n.statusbarheight-(n.pageable?n.pagerheight:0))),tt(this)),n.rtl&&(n.hScrollBar.css("visibility")!="visible"?n.statusbar.css("left",n.content.css("left")):n.statusbar.css("left","0px")));n.showeverpresentrow&&n.everpresentrowposition==="bottom"&&(n.addnewrow.css("top",u+t-(n.showstatusbar?n.statusbarheight:0)-(n.pageable?n.pagerheight:0)-n.everpresentrowheight),n.rtl&&(n.hScrollBar.css("visibility")!="visible"?n.addnewrow.css("left",n.content.css("left")):n.addnewrow.css("left","0px")));n.pageable?(n.pager.width(i),n.pager.height(n.pagerheight),n.pager.css("top",u+t-n.pagerheight-1)):n.pager[0].style.height="0px";n.table!=null&&(rt=-2,n.vScrollBar[0].style.visibility=="visible"&&(rt=n.scrollbarsize+3),n.hScrollBar[0].style.visibility=="visible"&&(w=rt+n.table.width()-n.host.width(),w>=0&&n.hScrollBar.jqxScrollBar("max",w),n.hScrollBar[0].style.visibility=="visible"&&w==0&&(n.hScrollBar[0].style.visibility="hidden",n._arrange())));i!=parseInt(n.dataloadelement[0].style.width)&&(n.dataloadelement[0].style.width=n.element.style.width);t!=parseInt(n.dataloadelement[0].style.height)&&(n.dataloadelement[0].style.height=n.element.style.height);this.pagergotoinput&&(this.pagergotoinput.offset().top!==this.pagergoto.offset().top?(this.pagergotoinput.css("visibility","hidden"),this.pagergoto.css("visibility","hidden")):(this.pagergotoinput.css("visibility","inherit"),this.pagergoto.css("visibility","inherit")));n._hostwidth=i},destroy:function(){var s,u,t,h,i;if(delete n.jqx.dataFormat.datescache,delete this.gridlocalization,n.jqx.utilities.resize(this.host,null,!0),(document.referrer!=""||window.frameElement)&&window.top!=null&&window.top!=window.self&&this.removeHandler(n(window.top.document),"mouseup.grid"+this.element.id),this.table&&this.table[0]){for(s=this.table[0].rows.length,i=0;i<s;i++){var r=this.table[0].rows[i],c=r.cells,l=c.length;for(u=0;u<l;u++)n(r.cells[u]).remove(),r.cells[u]=null,delete r.cells[u];r.cells=null;r.cells&&delete r.cells;n(this.table[0].rows[i]).remove();this.table[0].rows[i]=null}try{delete this.table[0].rows}catch(a){}this.table.remove();delete this.table}if(this.columns&&this.columns.records){for(i=0;i<this.columns.records.length;i++)t=this.columns.records[i],t.addnewrowwidget&&t.destroyeverpresentrowwidget&&t.destroyeverpresentrowwidget(t.addnewrowwidget),this._removecolumnhandlers(this.columns.records[i]),t.element&&(n(t.element).remove(),n(t.sortasc).remove(),n(t.sortdesc).remove(),n(t.filtericon).remove(),n(t.menu).remove(),t.element=null,t.uielement=null,t.sortasc=null,t.sortdesc=null,t.filtericon=null,t.menu=null,delete t.element,delete t.uielement,delete t.sortasc,delete t.sortdesc,delete t.filtericon,delete t.menu,delete this.columnsrow[0].cells[i]);try{delete this.columnsrow[0].cells}catch(a){}delete this.columnsrow}if(n.removeData(document.body,"contextmenu"+this.element.id),this.host.jqxDropDownList&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.editable&&this._destroyeditors&&this._destroyeditors(),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.host.jqxMenu&&this.gridmenu&&(this.removeHandler(n(document),"click.menu"+this.element.id),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu=null),this.pagershowrowscombo&&(this.pagershowrowscombo.jqxDropDownList("destroy"),this.pagershowrowscombo=null),this.pagerrightbutton&&(this.removeHandler(this.pagerrightbutton,"mousedown"),this.removeHandler(this.pagerrightbutton,"mouseup"),this.removeHandler(this.pagerrightbutton,"click"),this.pagerrightbutton.jqxButton("destroy"),this.pagerrightbutton=null),this.pagerleftbutton&&(this.removeHandler(this.pagerleftbutton,"mousedown"),this.removeHandler(this.pagerleftbutton,"mouseup"),this.removeHandler(this.pagerleftbutton,"click"),this.pagerleftbutton.jqxButton("destroy"),this.removeHandler(n(document),"mouseup.pagerbuttons"+this.element.id),this.pagerleftbutton=null),this.removeHandler(n(document),"selectstart."+this.element.id),this.removeHandler(n(document),"mousedown.resize"+this.element.id),this.removeHandler(n(document),"mouseup.resize"+this.element.id),this.removeHandler(n(document),"mousemove.resize"+this.element.id),this.isTouchDevice()){var f=n.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,e=n.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,o=n.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id;this.removeHandler(n(document),f);this.removeHandler(n(document),e);this.removeHandler(n(document),o)}if(this.removeHandler(n(document),"mousedown.reorder"+this.element.id),this.removeHandler(n(document),"mouseup.reorder"+this.element.id),this.removeHandler(n(document),"mousemove.reorder"+this.element.id),this.isTouchDevice()){var f=n.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,e=n.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,o=n.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id;this.removeHandler(n(document),f);this.removeHandler(n(document),e);this.removeHandler(n(document),o)}if(this.removeHandler(n(window),"resize."+this.element.id),this.resizeline&&this.resizeline.remove(),this.resizestartline&&this.resizestartline.remove(),this.groupable){var f="mousemove.grouping"+this.element.id,e="mousedown.grouping"+this.element.id,o="mouseup.grouping"+this.element.id;this.removeHandler(n(document),f);this.removeHandler(n(document),e);this.removeHandler(n(document),o)}if(this.columnsreorder){var f="mousemove.reorder"+this.element.id,e="mousedown.reorder"+this.element.id,o="mouseup.reorder"+this.element.id;this.removeHandler(n(document),f);this.removeHandler(n(document),e);this.removeHandler(n(document),o);delete this.columnsbounds}if(this.content&&(this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll")),this._removeHandlers(),this.hScrollInstance.destroy(),this.vScrollInstance.destroy(),this.hScrollBar.remove(),this.vScrollBar.remove(),this._clearcaches(),delete this.hScrollInstance,delete this.vScrollInstance,delete this.visiblerows,delete this.hittestinfo,delete this.rows,delete this.columns,delete this.columnsbydatafield,delete this.pagescache,delete this.pageviews,delete this.cellscache,delete this.heights,delete this.hiddens,delete this.hiddenboundrows,delete this.heightboundrows,delete this.detailboundrows,delete this.details,delete this.expandedgroups,delete this._rowdetailscache,delete this._rowdetailselementscache,delete this.columnsmenu,this.columnsheader&&(this.columnsheader.remove(),delete this.columnsheader),this.selectionarea&&(this.selectionarea.remove(),delete this.selectionarea),this.menuitemsarray&&this.menuitemsarray.length)for(h=this.menuitemsarray.length,i=0;i<h;i++)n(this.menuitemsarray[i]).remove();delete this.menuitemsarray;this.dataview._clearcaches();this.content.removeClass();this.content.remove();this.content=null;delete this.content;this.vScrollBar=null;this.hScrollBar=null;delete this.hScrollBar;delete this.hScrollBar;this.gridcontent&&(this.gridcontent.remove(),delete this.gridcontent);this.gridmenu&&(this.gridmenu=null,delete this.gridmenu);delete this._mousemovefunc;delete this._mousewheelfunc;this.dataview.destroy();delete this.dataview;this.bottomRight.remove();delete this.bottomRight;this.wrapper.remove();delete this.wrapper;this.pagerdiv&&(this.pagerdiv.remove(),delete this.pagerdiv);this.pagerpageinput&&(this.pagerpageinput.remove(),delete this.pagerpageinput);this.pagergoto&&(this.pagergoto.remove(),delete this.pagergoto);this.pagershowrows&&(this.pagershowrows.remove(),delete this.pagershowrows);this.pagerfirstbutton&&(this.pagerfirstbutton.remove(),delete this.pagerfirstbutton);this.pagerlastbutton&&(this.pagerlastbutton.remove(),delete this.pagerlastbutton);this.pagerbuttons&&(this.pagerbuttons.remove(),delete this.pagerbuttons);this.pagerdetails&&(this.pagerdetails.remove(),delete this.pagerdetails);this.pagergotoinput&&(this.pagergotoinput.remove(),delete this.pagergotoinput);this.pager.remove();delete this.pager;this.groupsheader.remove();delete this.groupsheader;this.dataloadelement.remove();delete this.dataloadelement;this.toolbar.remove();delete this.toolbar;this.statusbar.remove();delete this.statusbar;this.host.removeData();this.host.removeClass();this.host.remove();this.host=null;delete this.host;delete this.element;delete this.set;delete this.get;delete this.that;delete this.call},_initializeColumns:function(){var f=this.source?this.source.datafields:null,c,o,l,s,h,i;if(f==null&&this.source&&this.source._source&&(f=this.source._source.datafields),c=f?f.length>0:!1,this.autogeneratecolumns){if(o=[],f)n.each(f,function(){var n={datafield:this.name,text:this.text||this.name,cellsformat:this.format||""};o.push(n)});else if(this.source.records.length>0){l=this.source.records[0];for(obj in l)obj!="uid"&&(i={width:100,datafield:obj,text:obj},o.push(i))}this.columns=o}if(this.columns&&this.columns.records)for(s=0;s<this.columns.records.length;s++)this._removecolumnhandlers(this.columns.records[s]);var r=this.that,u=new n.jqx.collection(this.element),e=0;this._haspinned=!1;this._columns?this.columns=this._columns:this._columns=this.columns;this.groupable&&n.each(this.groups,function(){var n=new t(r,this);n.visibleindex=e++;n.width=r.groupindentwidth;u.add(n);n.grouped=!0;n.filterable=!1;n.sortable=!1;n.editable=!1;n.resizable=!1;n.draggable=!1});this.rowdetails&&this.showrowdetailscolumn&&(i=new t(r,this),i.visibleindex=e++,i.width=r.groupindentwidth,i.pinned=!0,i.editable=!1,i.filterable=!1,i.draggable=!1,i.groupable=!1,i.resizable=!1,u.add(i),r._haspinned=!0);this.selectionmode=="checkbox"&&(i=new t(r,null),i.visibleindex=e++,i.width=r.groupindentwidth,i.checkboxcolumn=!0,i.editable=!1,i.columntype="checkbox",i.groupable=!1,i.draggable=!1,i.filterable=!1,i.resizable=!1,i.datafield="_checkboxcolumn",u.add(i));h=[];n.each(this.columns,function(n){if(r.columns[n]!=undefined){var i=new t(r,this);if(i.visibleindex=e++,this.dataField!=undefined&&(this.datafield=this.dataField),this.pinned&&(r._haspinned=!0),r.showeverpresentrow&&(this.datafield==="addButtonColumn"||this.datafield==="resetButtonColumn"||this.datafield==="updateButtonColumn"||this.datafield==="deleteButtonColumn")&&(i.editable=!1,i.groupable=!1,i.draggable=!1,i.filterable=!1,i.resizable=!1,i.menu=!1),this.datafield==null)r.source&&r.source._source&&r.source._source.datatype=="array"&&(c||(r.source._source.datafields?r.source._source.datafields.push({name:n.toString()}):(r.source._source.datafields=[],r.source._source.datafields.push({name:n.toString()}))),this.datafield=n.toString(),this.displayfield=n.toString(),i.datafield=this.datafield,i.displayfield=this.displayfield);else if(h[this.datafield])throw new Error("jqxGrid: Invalid column 'datafield' setting. jqxGrid's columns should be initialized with unique data fields.");else h[this.datafield]=!0;u.add(i)}});this.adaptive&&(i=new t(r,null),i.visibleindex=e++,i.width=r.groupindentwidth,i.editable=!1,i.columntype="adaptive",i.cellsalign="center",i.groupable=!1,i.draggable=!1,i.menu=!1,i.sortable=!1,i.filterable=!1,i.resizable=!1,i.datafield="_adaptivecolumn",u.add(i));this.rtl&&u.records.reverse();this.columns=u},_initializeRows:function(){var t=new n.jqx.collection(this.element);this.rows&&this.rows.clear();this.rows=t},_raiseEvent:function(t,i){var u,f,r,e;if(i==undefined&&(i={owner:null}),this._trigger!==!1)return u=this.events[t],this._camelCase||(u=u.toLowerCase()),(t==2||t==15)&&this.showeverpresentrow&&(this.everpresentrowactions.indexOf("delete")>=0||this.everpresentrowactions.indexOf("update")>=0)&&(this.updateeverpresentrow&&(f=this),setTimeout(function(){f.updateeverpresentrow()},50)),args=i,args.owner=this,r=new n.Event(u),r.owner=this,r.args=args,e=this.host.trigger(r),i=r.args,e},wheel:function(n,t){var r,i;if(t.autoheight&&t.hScrollBar.css("visibility")!="visible")return n.returnValue=!0,!0;if(r=0,n||(n=window.event),n.originalEvent&&n.originalEvent.wheelDelta&&(n.wheelDelta=n.originalEvent.wheelDelta),n.wheelDelta?r=n.wheelDelta/120:n.detail&&(r=-n.detail/3),r)return i=t._handleDelta(r),i&&(n.preventDefault&&n.preventDefault(),n.originalEvent!=null&&(n.originalEvent.mouseHandled=!0),n.stopPropagation!=undefined&&n.stopPropagation()),i?(i=!1,n.returnValue=i,i):!1;n.preventDefault&&n.preventDefault();n.returnValue=!1},_handleDelta:function(n){var t,i;if(this.vScrollBar.css("visibility")!="hidden"){if(t=this.vScrollInstance.value,n<0?this.scrollDown():this.scrollUp(),i=this.vScrollInstance.value,t!=i)return!0}else if(this.hScrollBar.css("visibility")!="hidden"&&(t=this.hScrollInstance.value,n>0?this.hScrollInstance.value>2*this.horizontalscrollbarstep?this.hScrollInstance.setPosition(this.hScrollInstance.value-2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(this.hScrollInstance.max),i=this.hScrollInstance.value,t!=i))return!0;return!1},scrollDown:function(){if(this.vScrollBar.css("visibility")!="hidden"){var n=this.vScrollInstance;n.value+this.rowsheight<=n.max?n.setPosition(parseInt(n.value)+this.rowsheight):n.setPosition(n.max)}},scrollUp:function(){if(this.vScrollBar.css("visibility")!="hidden"){var n=this.vScrollInstance;n.value-this.rowsheight>=n.min?n.setPosition(parseInt(n.value)-this.rowsheight):n.setPosition(n.min)}},_removeHandlers:function(){var t=this.that,i;t.removeHandler(n(window),"orientationchange.jqxgrid"+t.element.id);t.removeHandler(n(window),"orientationchanged.jqxgrid"+t.element.id);t.removeHandler(t.vScrollBar,"valueChanged");t.removeHandler(t.hScrollBar,"valueChanged");t.vScrollInstance.valueChanged=null;t.hScrollInstance.valueChanged=null;i="mousedown.jqxgrid";t.isTouchDevice()&&(i=n.jqx.mobile.getTouchEventName("touchend"));t.removeHandler(t.host,"dblclick.jqxgrid");t.removeHandler(t.host,i);t.removeHandler(t.content,"mousemove",t._mousemovefunc);t.removeHandler(t.host,"mouseleave.jqxgrid");t.removeHandler(t.content,"mouseenter");t.removeHandler(t.content,"mouseleave");t.removeHandler(t.content,"mousedown");t.removeHandler(t.content,"scroll");t.removeHandler(t.content,"selectstart."+t.element.id);t.removeHandler(t.host,"dragstart."+t.element.id);t.removeHandler(t.host,"keydown.edit"+t.element.id);t.removeHandler(n(document),"keydown.edit"+t.element.id);t.removeHandler(n(document),"keyup.edit"+t.element.id);t._mousemovedocumentfunc&&t.removeHandler(n(document),"mousemove.selection"+t.element.id,t._mousemovedocumentfunc);t.removeHandler(n(document),"mouseup.selection"+t.element.id);t._mousewheelfunc&&t.removeHandler(t.host,"mousewheel",t._mousewheelfunc);t.editable&&t.removeHandler(n(document),"mousedown.gridedit"+t.element.id);t.host.off&&(t.content.off("mousemove"),t.host.off("mousewheel"))},_addHandlers:function(){var t=this.that,i=t.isTouchDevice(),u,r,f;i||t.addHandler(t.host,"dragstart."+t.element.id,function(){return!1});t.scrollbarautoshow&&(t.addHandler(t.host,"mouseenter.gridscroll"+t.element.id,function(){t.vScrollBar.fadeIn("fast");t.hScrollBar.fadeIn("fast")}),t.addHandler(t.host,"mouseleave.gridscroll"+t.element.id,function(){t.vScrollInstance.isScrolling()||t.hScrollInstance.isScrolling()||(t.vScrollBar.fadeOut("fast"),t.hScrollBar.fadeOut("fast"))}));t.editable&&t.addHandler(n(document),"mousedown.gridedit"+t.element.id,function(n){var y,r,u,s,h,o,c;if(t.editable&&t.begincelledit&&t.editcell&&!t.vScrollInstance.isScrolling()&&!t.vScrollInstance.isScrolling()){var e=t.host.coord(),l=t.host.width(),a=t.host.height(),i=!1,f=!1,v=!1;if((n.pageY<e.top||n.pageY>e.top+a)&&(i=!0,f=!0),(n.pageX<e.left||n.pageX>e.left+l)&&(i=!0,v=!0),i){if(y=!1,t.editcell&&t.editcell.editor)switch(t.editcell.columntype){case"datetimeinput":if(t.editcell.editor.jqxDateTimeInput&&t.editcell.editor.jqxDateTimeInput("container")&&t.editcell.editor.jqxDateTimeInput("container")[0].style.display=="block")if(r=t.editcell.editor.jqxDateTimeInput("container").coord().top,u=t.editcell.editor.jqxDateTimeInput("container").coord().top+t.editcell.editor.jqxDateTimeInput("container").height(),f&&(n.pageY<r||n.pageY>u))i=!0,t.editcell.editor.jqxDateTimeInput("close");else return;break;case"combobox":if(t.editcell.editor.jqxComboBox&&t.editcell.editor.jqxComboBox("container")&&t.editcell.editor.jqxComboBox("container")[0].style.display=="block")if(r=t.editcell.editor.jqxComboBox("container").coord().top,u=t.editcell.editor.jqxComboBox("container").coord().top+t.editcell.editor.jqxComboBox("container").height(),f&&(n.pageY<r||n.pageY>u))i=!0,t.editcell.editor.jqxComboBox("close");else return;break;case"dropdownlist":if(t.editcell.editor.jqxDropDownList&&t.editcell.editor.jqxDropDownList("container")&&t.editcell.editor.jqxDropDownList("container")[0].style.display=="block")if(r=t.editcell.editor.jqxDropDownList("container").coord().top,u=t.editcell.editor.jqxDropDownList("container").coord().top+t.editcell.editor.jqxDropDownList("container").height(),f&&(n.pageY<r||n.pageY>u))i=!0,t.editcell.editor.jqxDropDownList("close");else return;break;case"template":case"custom":for(s=["jqxDropDownList","jqxComboBox","jqxDropDownButton","jqxDateTimeInput"],h=function(r){var u=t.editcell.editor.data();if(u[r]&&u[r].instance.container&&u[r].instance.container[0].style.display=="block"){var e=u[r].instance,o=e.container.coord().top,s=e.container.coord().top+e.container.height();return f&&(n.pageY<o||n.pageY>s)?(i=!0,e.close(),!0):!1}},o=0;o<s.length;o++)if(c=h(s[o]),c==!1)return}t.endcelledit(t.editcell.row,t.editcell.column,!1,!0);t._oldselectedcell=null}}});t.vScrollInstance.valueChanged=function(n){t.virtualsizeinfo&&(t._closemenu(),t.scrollmode!="physical"?(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=n.currentValue):t.currentScrollValue!=undefined&&Math.abs(t.currentScrollValue-n.currentValue)>=5?(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=n.currentValue):(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=n.currentValue),t.pageable||t.groupable||!t.dataview.virtualmode||(t.loadondemandupdate&&clearTimeout(t.loadondemandupdate),t.loadondemandupdate=setTimeout(function(){t.loadondemand=!0;t._renderrows(t.virtualsizeinfo)},100)),i&&(t._lastScroll=new Date))};t.hScrollInstance.valueChanged=function(){var r,u;t.virtualsizeinfo&&(t._closemenu(),r=function(){t._renderhorizontalscroll();t._renderrows(t.virtualsizeinfo);t.editcell&&!t.editrow&&t._showcelleditor&&t.editcell.editing&&(t.hScrollInstance.isScrolling()||t._showcelleditor(t.editcell.row,t.getcolumn(t.editcell.column),t.editcell.element,t.editcell.init))},i?r():(u=t._browser==undefined?t._isIE10():t._browser,navigator&&navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1?(t._hScrollTimer&&clearTimeout(t._hScrollTimer),t._hScrollTimer=setTimeout(function(){r()},1)):n.jqx.browser.msie?(t._hScrollTimer&&clearTimeout(t._hScrollTimer),t._hScrollTimer=setTimeout(function(){r()},.01)):r()),i&&(t._lastScroll=new Date))};t._mousewheelfunc=t._mousewheelfunc||function(n){if(!t.editcell&&t.enablemousewheel)return t.wheel(n,t),!1};t.removeHandler(t.host,"mousewheel",t._mousewheelfunc);t.addHandler(t.host,"mousewheel",t._mousewheelfunc);u="mousedown.jqxgrid";i&&(u=n.jqx.mobile.getTouchEventName("touchend"));t.addHandler(t.host,u,function(i){if(t.isTouchDevice()&&((t._newScroll=new Date,t._newScroll-t._lastScroll<500)||n(i.target).ischildof(t.vScrollBar)||n(i.target).ischildof(t.hScrollBar)))return!1;t._mousedown=new Date;var r=t._handlemousedown(i,t);return t.isNestedGrid&&(t.resizablecolumn||t.columnsreorder||i.stopPropagation()),t._lastmousedown=new Date,r});i||(t.addHandler(t.host,"dblclick.jqxgrid",function(i){if(t.editable&&t.begincelledit&&t.editmode=="dblclick")t._handledblclick(i,t);else if(n.jqx.browser.msie&&n.jqx.browser.version<9)var r=t._handlemousedown(i,t);return t.mousecaptured=!1,t._lastmousedown=new Date,!0}),t._mousemovefunc=function(n){if(t._handlemousemove)return t._handlemousemove(n,t)},t.addHandler(t.content,"mousemove",t._mousemovefunc),t._handlemousemoveselection&&(t._mousemovedocumentfunc=function(n){if(t._handlemousemoveselection)return t._handlemousemoveselection(n,t)},t.addHandler(n(document),"mousemove.selection"+t.element.id,t._mousemovedocumentfunc)),t.addHandler(n(document),"mouseup.selection"+t.element.id,function(n){t._handlemouseupselection&&t._handlemouseupselection(n,t)}));try{(document.referrer!=""||window.frameElement)&&window.top!=null&&window.top!=window.self&&(r=null,window.parent&&document.referrer&&(r=document.referrer),r&&r.indexOf(document.location.host)!=-1&&(f=function(n){if(t._handlemouseupselection)try{t._handlemouseupselection(n,t)}catch(i){}},t.addHandler(n(window.top.document),"mouseup.grid"+t.element.id,f)))}catch(e){}t.focused=!1;i||(t.addHandler(t.content,"mouseenter",function(){t.focused=!0;t.wrapper&&(t.wrapper.attr("tabindex",1),t.content.attr("tabindex",2));t._overlayElement&&(t._overlayElement[0].style.visibility=t.vScrollInstance.isScrolling()||t.hScrollInstance.isScrolling()?"visible":"hidden")}),t.addHandler(t.content,"mouseleave",function(){t._handlemousemove&&t.enablehover&&t._clearhoverstyle();t._overlayElement&&(t._overlayElement[0].style.visibility="hidden");t.focused=!1}),(t.groupable||t.columnsreorder)&&t.addHandler(n(document),"selectstart."+t.element.id,function(){if(t.__drag===!0)return!1}),t.addHandler(t.content,"selectstart."+t.element.id,function(i){if(t.enablebrowserselection||t.showfilterrow&&n(i.target).ischildof(t.filterrow)||t.showeverpresentrow&&(n(i.target).ischildof(t.addnewrow)||t.addnewrowtop&&n(i.target).ischildof(t.addnewrowtop))||i.target.className&&i.target.className.indexOf("jqx-grid-widget")>=0)return!0;if(!t.editcell)return!1;i.stopPropagation&&i.stopPropagation()}),t.addHandler(n(document),"keyup.edit"+t.element.id,function(){t._keydown=!1}),t.addHandler(n(document),"keydown.edit"+t.element.id,function(i){var f,u,r;if(t.adaptiveview)return!0;if(t._keydown=!0&&!t.editcell,r=i.charCode?i.charCode:i.keyCode?i.keyCode:0,r===20&&(t._capsLock=t._capsLock?!1:!0),t.handlekeyboardnavigation&&(t.focused||i.target===t.element||n(i.target).ischildof(t.host))&&(f=t.handlekeyboardnavigation(i),f==!0))return!1;if(t.editable&&t.editcell&&(r==13||r==27||r==9||r==32)&&t._handleeditkeydown&&(u=t._handleeditkeydown(i,t)),r==27&&(t.mousecaptured=!1,t.selectionarea.css("visibility")=="visible"&&t.selectionarea.css("visibility","hidden")),n.jqx.browser.msie&&n.jqx.browser.version<12&&t.focused&&!t.isNestedGrid){if(r==13&&u==!1)return u;if(u=!0,r=i.charCode?i.charCode:i.keyCode?i.keyCode:0,!t.editcell&&t.editable&&t.editmode!="programmatic"&&t._handleeditkeydown&&(u=t._handleeditkeydown(i,t)),u&&t.keyboardnavigation&&t._handlekeydown)return u=t._handlekeydown(i,t),u||(i.preventDefault&&i.preventDefault(),i.stopPropagation!=undefined&&i.stopPropagation()),u}return!0}),t.addHandler(t.host,"keyup.edit"+t.element.id,function(i){var r,u;if(t.adaptiveview)return!0;if(i.keyCode===9&&!n(document.activeElement).ischildof(t.filterrow)&&!n(document.activeElement).ischildof(t.pager))switch(t.selectionmode){case"singlecell":case"multiplecells":case"multiplecellsextended":case"multiplecellsadvanced":r=t.getselectedcell();r===null&&t.selectcell(0,t.columns.records[0].displayfield);break;default:u=t.getselectedrowindex();u===-1&&t.selectrow(0)}}),t.addHandler(t.host,"keydown.edit"+t.element.id,function(i){var r=!0,f,u;return t.adaptiveview?!0:t.handlekeyboardnavigation&&(f=t.handlekeyboardnavigation(i),f==!0)?!1:(t.editable&&t.editmode!="programmatic"&&t._handleeditkeydown&&(r=t._handleeditkeydown(i,t),t.isNestedGrid&&i.stopPropagation()),!t.editcell&&i.altKey&&(n(document.activeElement).ischildof(t.filterrow)||n(document.activeElement).ischildof(t.pager)||(i.keyCode===40?(u=t.getselectedcell(),u&&t.openmenu(u.column)):i.keyCode===38&&t._closemenu())),n.jqx.browser.msie&&n.jqx.browser.version<8?t.isNestedGrid&&r&&t.keyboardnavigation&&t._handlekeydown&&(r=t._handlekeydown(i,t),i.stopPropagation()):r&&t.keyboardnavigation&&t._handlekeydown&&(r=t._handlekeydown(i,t),t.isNestedGrid&&i.stopPropagation()),r||(i.preventDefault&&i.preventDefault(),i.stopPropagation!=undefined&&i.stopPropagation()),r&&t.selectedcells&&t.selectedcells.length>0&&i.keyCode===9&&i.shiftKey&&t.table&&t.table[0].rows&&t.table[0].rows.length>0&&(n(document.activeElement).ischildof(t.filterrow)||n(document.activeElement).ischildof(t.pager)||t.table[0].rows[0].cells[0].focus()),r)}))},_hittestrow:function(t,i){var e,c,y,o,r,s,h,l;if(this.vScrollInstance!=null&&this.hScrollInstance!=null){t==undefined&&(t=0);i==undefined&&i==0;var a=this.vScrollInstance,v=this.hScrollInstance,f=a.value;if((this.vScrollBar.css("visibility")!="visible"&&(f=0),e=v.value,this.hScrollBar.css("visibility")!="visible"&&(e=0),this.scrollmode=="deferred"&&this._newmax!=null&&f>this._newmax&&(f=this._newmax),c=parseInt(f)+i,y=parseInt(e)+t,this.visiblerows!=null)&&this.visiblerows.length!=0){if(o=!1,r=this._findvisiblerow(c,this.visiblerows),r>=0){var u=this.visiblerows[r],p=this.rowdetails&&u.rowdetails,w=!u.rowdetailshidden;p&&(s=this.visiblerows[r-1],s==u&&(u=s,r--),w&&(h=n(this.hittestinfo[r].visualrow).position().top+parseInt(this.table.css("top")),l=n(this.hittestinfo[r].visualrow).height(),i>=h&&i<=h+l||(r++,u=this.visiblerows[r],o=!0)))}return{index:r,row:u,details:o}}}},getcellatposition:function(t,i){var o=this.that,k=this.showheader?this.columnsheader.height()+2:0,y=this._groupsheader()?this.groupsheader.height():0,d=this.showtoolbar?this.toolbarheight:0,u,l,e,r,a,t,b,v;y+=d;u=this.host.coord();this.hasTransform&&(u=n.jqx.utilities.getOffset(this.host));var s=t-u.left,h=i-k-u.top-y,p=this._hittestrow(s,h),f=p.row,g=p.index,c=this.table[0].rows[g];if(this.dataview&&this.dataview.records.length==0){for(l=this.table[0].rows,e=0,r=0;r<l.length;r++){if(h>=e&&h<e+this.rowsheight){c=l[r];break}e+=this.rowsheight}f={boundindex:r}}if(c==null)return!0;var nt=this.hScrollInstance,tt=nt.value,w=0,it=this.groupable?this.groups.length:0;for(r=0;r<c.cells.length;r++)if((a=parseInt(n(this.columnsrow[0].cells[r]).css("left")),t=a-tt,o.columns.records[r].pinned&&(t=a),!o.columns.records[r].hidden&&!o.columns.records[r].adaptivehidden)&&(b=t+n(this.columnsrow[0].cells[r]).width(),b>=s&&s>=t)){w=r;break}return f!=null?(v=this._getcolumnat(w),{row:this.getboundindex(f),column:v.datafield,value:this.getcellvalue(this.getboundindex(f),v.datafield)}):null},_handlemousedown:function(t,i){var v,yt,y,pt,ft,ri,d,g,wt,ui,p,ot,tt,o,l,st,h,ht,bt,s,it,nt,f,r,c,at,kt,dt,gt,rt,vt,a,ti,ni;if(t.target==null||i.disabled||n(t.target).ischildof(this.columnsheader)||n(t.target).ischildof(this.hScrollBar)||n(t.target).ischildof(this.vScrollBar)||t.target===i.bottomRight[0]||(t.which?v=t.which==3:t.button&&(v=t.button==2),t.which?yt=t.which==2:t.button&&(yt=t.button==1),yt)||this.adaptiveview&&(n(t.target).ischildof(n(this.adaptiveview))||t.target==this.adaptiveview)||this.showstatusbar&&(n(t.target).ischildof(this.statusbar)||t.target==this.statusbar[0])||this.showtoolbar&&(n(t.target).ischildof(this.toolbar)||t.target==this.toolbar[0])||this.pageable&&(n(t.target).ischildof(this.pager)||t.target==this.pager[0])||!this.columnsheader||!this.editcell&&this.pageable&&n(t.target).ischildof(this.pager))return!0;var ii=this.showheader?this.columnsheader.height()+2:0,ut=this._groupsheader()?this.groupsheader.height():0,ei=this.showtoolbar?this.toolbarheight:0;if((ut+=ei,y=this.host.coord(),this.hasTransform&&(y=n.jqx.utilities.getOffset(this.host),pt=this._getBodyOffset(),y.left-=pt.left,y.top-=pt.top),h=parseInt(t.pageX),ft=parseInt(t.pageY),this.isTouchDevice()&&(ri=i.getTouches(t),d=ri[0],h=parseInt(d.pageX),ft=parseInt(d.pageY),i.touchmode==!0&&d._pageX!=undefined&&(h=parseInt(d._pageX),ft=parseInt(d._pageY))),g=h-y.left,wt=ft-ii-y.top-ut,!this.pageable||this.autoheight||!this.gotopage||(ui=this.pager.coord().top-y.top-ut-ii,!(wt>ui)))&&(p=this._hittestrow(g,wt),p)&&!p.details){var u=p.row,nt=p.index,et=t.target.className,w=this.table[0].rows[nt];if(w==null)return i.editable&&i.begincelledit&&i.editcell&&i.endcelledit(i.editcell.row,i.editcell.column,!1,!0),!0;for(i.mousecaptured=!0,i.mousecaptureposition={left:t.pageX,top:t.pageY-ut,clickedrow:w},ot=this.hScrollInstance,tt=ot.value,this.rtl&&this.hScrollBar.css("visibility")!="hidden"&&(tt=ot.max-ot.value),o=-1,l=this.groupable?this.groups.length:0,this.rtl&&(this.vScrollBar[0].style.visibility!="hidden"&&(tt-=this.scrollbarsize+4),this.hScrollBar[0].style.visibility=="hidden"&&(tt=-parseInt(this.content.css("left")))),f=0;f<w.cells.length;f++)if((st=parseInt(n(this.columnsrow[0].cells[f]).css("left")),h=st-tt,i.columns.records[f].pinned&&!i.rtl&&(h=st),r=this._getcolumnat(f),r==null||!r.hidden)&&(r==null||!r.adaptivehidden)&&(ht=h+n(this.columnsrow[0].cells[f]).width(),ht>=g&&g>=h)){o=f;i.mousecaptureposition.clickedcell=f;break}if(this.rtl&&this._haspinned)for(f=w.cells.length-1;f>=0;f--){if(!i.columns.records[f].pinned)break;var st=n(this.columnsrow[0].cells[f]).coord().left-this.host.coord().left,h=st,r=this._getcolumnat(f);if((r==null||!r.hidden)&&(r==null||!r.adaptivehidden)&&(ht=h+n(this.columnsrow[0].cells[f]).width(),ht>=g&&g>=h)){o=f;i.mousecaptureposition.clickedcell=f;break}}if(u!=null&&o>=0){if(this._raiseEvent(1,{rowindex:this.getboundindex(u),visibleindex:u.visibleindex,row:u,group:u.group,rightclick:v,originalEvent:t}),r=this._getcolumnat(o),bt=this.getcellvalue(this.getboundindex(u),r.datafield),this.editable&&this.editcell&&(this._currentEditableColumn=o,r.datafield==this.editcell.column&&this.getboundindex(u)==this.editcell.row&&(this.mousecaptured=!1)),r.columntype==="adaptive"){var e=document.createElement("div"),b=document.createElement("div"),ct=document.createElement("a"),lt=document.createElement("a"),k=document.createElement("div"),fi=this.getrowdata(this.getboundindex(u));for(ct.href="#",lt.href="#",e.style.zIndex=99999,e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.width="100%",e.style.height="100%",e.className="jqx-adaptive-view jqx-widget-content",k.style.position="relative",k.style.top="100%",k.style.textAlign="center",k.style.marginTop="-40px",b.style.position="absolute",b.style.left="0px",b.style.top="0px",b.style.width="100%",b.style.height="100%",this.theme&&(e.className="jqx-widget-content jqx-widget-content-"+this.theme),s=document.createElement("span"),s.className="jqx-icon-close",this.theme&&(s.className="jqx-icon-close jqx-widget-close-"+this.theme),s.style.zIndex=99,s.style.position="absolute",s.style.right="10px",s.style.top="10px",s.style.width="16px",s.style.height="16px",e.appendChild(b),e.appendChild(s),ct.innerHTML=this.gridlocalization.okstring,lt.innerHTML=this.gridlocalization.cancelstring,ct.addEventListener("mousedown",function(n){for(var f,o,u={},r=i.adaptiveview.querySelectorAll("input"),t=0;t<r.length;t++)f=r[t].value,o=r[t].getAttribute("data-column"),u[o]=f;return i.updaterow(fi.uid,u),e.parentNode.removeChild(e),i.adaptiveview=null,n.stopPropagation(),!1}),lt.addEventListener("mousedown",function(){return e.parentNode.removeChild(e),i.adaptiveview=null,t.stopPropagation(),!1}),this.editable&&(k.appendChild(ct),k.appendChild(lt),e.appendChild(k)),it="<table class='jqx-adaptive-table'><tr>",nt=0,f=0;f<this.columns.records.length;f++)(r=this.columns.records[f],r.columntype!=="adaptive")&&(f>0&&nt%2==0&&(it+="<\/tr><tr>"),c=fi[r.displayfield],r.cellsformat!=""&&n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(c)?c=n.jqx.dataFormat.formatdate(c,r.cellsformat,this.gridlocalization):n.jqx.dataFormat.isNumber(c)&&(c=n.jqx.dataFormat.formatnumber(c,r.cellsformat,this.gridlocalization))),at=this.filterable?'<div datafield="'+r.datafield+'" class="'+i.toTP("jqx-grid-column-filterbutton")+'" style="position: relative; top: 4px; display: inline-block; width: 16px; height:16px;"><\/div>':"",it+=this.editable?r.editable?"<td>"+at+r.text+": <input data-column='"+r.displayfield+"' value='"+c+"'/><\/td>":"<td>"+at+r.text+": <input data-column='"+r.displayfield+"' readonly value='"+c+"'/><\/td>":"<td>"+at+r.text+": "+c+"<\/td>",nt++);it+="<\/tr><\/table>";b.innerHTML=it;s.addEventListener("mousedown",function(){e.parentNode.removeChild(e);i.adaptiveview=null});this.wrapper[0].appendChild(e);this.adaptiveview=e;n(this.adaptiveview).find(".jqx-grid-column-filterbutton").on("click",function(){var n=this.getAttribute("datafield"),t=this.offsetTop;i.openmenu(n);setTimeout(function(){i.gridmenu.css("top",30+t);i.gridmenu.css("left",25);i.gridmenu.css("z-index",99999);i.gridmenu.parent().css("z-index",99999)},300)});return}if(this._raiseEvent(8,{rowindex:this.getboundindex(u),column:r?r.getcolumnproperties():null,row:u,visibleindex:u.visibleindex,datafield:r?r.datafield:null,columnindex:o,value:bt,rightclick:v,originalEvent:t}),r.createwidget)return!0;if(this.isTouchDevice())if(r.columntype=="checkbox"&&this.editable&&this._overlayElement){if(!this.editcell)return this._overlayElement.css("visibility","hidden"),this.editcell=this.getcell(nt,r.datafield),!0}else if(r.columntype=="button"&&this._overlayElement)return r.buttonclick&&r.buttonclick(w.cells[o].buttonrow,t),!0;if(kt=!1,this._lastmousedown!=null&&this._mousedown-this._lastmousedown<300&&this._clickedrowindex==this.getboundindex(u)&&(this._raiseEvent(22,{rowindex:this.getboundindex(u),row:u,visibleindex:u.visibleindex,group:u.group,rightclick:v,originalEvent:t}),this._clickedcolumn==r.datafield&&this._raiseEvent(23,{rowindex:this.getboundindex(u),row:u,visibleindex:u.visibleindex,column:r?r.getcolumnproperties():null,datafield:r?r.datafield:null,columnindex:o,value:bt,rightclick:v,originalEvent:t}),kt=!0,this._clickedrowindex=-1,this._clickedcolumn=null,t.isPropagationStopped&&t.isPropagationStopped()))return!1;if(v)return!0;if(kt||(this._clickedrowindex=this.getboundindex(u),this._clickedcolumn=r.datafield),dt=n.jqx.utilities.getBrowser(),dt.browser=="msie"&&parseInt(dt.version)<=7&&(o==0&&this.rowdetails&&(et="jqx-grid-group-collapse"),l>0&&o<=l&&(et="jqx-grid-group-collapse")),et.indexOf("jqx-grid-group-expand")!=-1||et.indexOf("jqx-grid-group-collapse")!=-1)this.rtl?l>0&&o>w.cells.length-l-1&&this._togglegroupstate?this._togglegroupstate(u.bounddata,!0):o==w.cells.length-1-l&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(u.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0):l>0&&o<l&&this._togglegroupstate?this._togglegroupstate(u.bounddata,!0):o==l&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(u.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0);else if(u.boundindex!=-1&&(gt=this.selectedrowindexes.slice(0),rt=!1,i.selectionmode!="none"&&i.selectionmode!="checkbox"&&this._selectrowwithmouse&&((i.selectionmode=="multiplecellsadvanced"||i.selectionmode=="multiplecellsextended"||i.selectionmode=="multiplerowsextended"||i.selectionmode=="multiplerowsadvanced")&&(t.ctrlKey||t.shiftKey||t.metaKey||(i.selectedrowindexes=[],i.selectedcells=[])),vt=!1,a=this.getboundindex(u),(i._oldselectedrow===a||i.selectionmode==="none")&&(vt=!0),i.selectionmode.indexOf("cell")==-1?(i.selectionmode!="singlerow"||i.selectedrowindex!=a&&i.selectionmode=="singlerow")&&(this._applyrowselection(a,!0,!1,null,r.datafield),this._selectrowwithmouse(i,p,gt,r.datafield,t.ctrlKey||t.metaKey,t.shiftKey)):r.datafield!=null&&(this._selectrowwithmouse(i,p,gt,r.datafield,t.ctrlKey||t.metaKey,t.shiftKey),t.shiftKey||this._applycellselection(a,r.datafield,!0,!1)),i._oldselectedcell&&i._oldselectedcell.datafield==i.selectedcell.datafield&&i._oldselectedcell.rowindex==i.selectedcell.rowindex&&(rt=!0),i._oldselectedcell=i.selectedcell,i._oldselectedrow=a),i.autosavestate&&i.savestate&&i.savestate(),i.editable&&i.begincelledit&&i.editmode!="programmatic"))return t.isPropagationStopped&&t.isPropagationStopped()?!1:(i.editmode=="selectedrow"?vt&&!i.editcell?r.columntype!=="checkbox"&&(this._currentEditableColumn=o,ni=i.beginrowedit(this.getboundindex(u))):i.editcell&&!vt&&i.selectionmode!="none"&&(ni=i.endrowedit(i.editcell.row)):(a=this.getboundindex(u),ti=i.editmode=="click"||rt&&i.editmode=="selectedcell",i.selectionmode.indexOf("cell")==-1&&i.editmode!="dblclick"&&(ti=!0),ti&&u.boundindex!=undefined&&r.editable&&(ni=i.begincelledit(this.getboundindex(u),r.datafield,r.defaulteditorvalue),i.selectionmode.indexOf("cell")!=-1&&i._applycellselection(a,r.datafield,!1,!1)),i.selectionmode.indexOf("cell")!=-1&&i.editmode=="selectedcell"&&!rt&&i.editcell&&i.endcelledit(i.editcell.row,i.editcell.column,!1,!0),i.editmode!="dblclick"||rt||!i.editcell||i.editcell.row==a&&r.datafield==i.editcell.column||i.endcelledit(i.editcell.row,i.editcell.column,!1,!0)),!0)}return!0}},_columnPropertyChanged:function(){},_rowPropertyChanged:function(){},_serializeObject:function(t){if(t==null)return"";var i="";return n.each(t,function(n){var r=this,t;n>0&&(i+=", ");i+="[";t=0;for(obj in r)t>0&&(i+=", "),i+="{"+obj+":"+r[obj]+"}",t++;i+="]"}),i},isbindingcompleted:function(){return!this._loading},propertiesChangedHandler:function(n,t,i){i.width&&i.height&&Object.keys(i).length==2&&(n._updatesize(!0,!0),n._resizeWindow(),n.virtualmode&&!n._loading?n.vScrollInstance.setPosition(0):setTimeout(function(){n._renderrows(n.virtualsizeinfo)},100))},propertyChangedHandler:function(t,i,r,u){var f,e;if(this.isInitialized!=undefined&&this.isInitialized!=!1&&(!t.batchUpdate||!t.batchUpdate.width||!t.batchUpdate.height||Object.keys(t.batchUpdate).length!=2)){i=i.toLowerCase();switch(i){case"editable":case"showcolumnheaderlines":case"showcolumnlines":case"showrowlines":t.refresh();break;case"everpresentrowactionsmode":r!=u&&(t._removeaddnewrow(),t.render());break;case"everpresentrowactions":t._updateaddnewrowui();break;case"showeverpresentrow":case"everpresentrowposition":case"everpresentrowheight":r!=u&&(t._removeaddnewrow(),t.render());break;case"rtl":t.content.css("left","");t.columns=t._columns;t._filterrowcache=[];t.vScrollBar.jqxScrollBar({rtl:u});t.hScrollBar.jqxScrollBar({rtl:u});t._initpager&&t._initpager();t._initgroupsheader&&t._initgroupsheader();t.render();break;case"enablebrowserselection":t.showfilterrow||(t.showstatusbar||t.showtoolbar||t.host.addClass("jqx-disableselect"),t.content.addClass("jqx-disableselect"));t.enablebrowserselection&&(t.content.removeClass("jqx-disableselect"),t.host.removeClass("jqx-disableselect"));break;case"columnsheight":(t.columnsheight!=32||t.columngroups)&&t._measureElement("column");t._render(!0,!0,!0,!1,!1);break;case"rowsheight":u!=r&&(t.rowsheight!=31&&t._measureElement("cell"),t.virtualsizeinfo=null,t.rendergridcontent(!0,!1),t.refresh());break;case"scrollMode":t.vScrollInstance.thumbStep=t.rowsheight;break;case"showdefaultloadelement":t._builddataloadelement();break;case"showfiltermenuitems":case"showsortmenuitems":case"showgroupmenuitems":case"filtermode":t._initmenu();break;case"touchmode":r!=u&&(t._removeHandlers(),t.touchDevice=null,t.vScrollBar.jqxScrollBar({touchMode:u}),t.hScrollBar.jqxScrollBar({touchMode:u}),t._updateTouchScrolling(),t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._addHandlers());break;case"autoshowcolumnsmenubutton":r!=u&&t._rendercolumnheaders();break;case"rendergridrows":r!=u&&t.updatebounddata();break;case"editmode":r!=u&&(t._removeHandlers(),t._addHandlers());break;case"source":t.updatebounddata();t.virtualmode&&!t._loading&&(t.loadondemand=!0,t._renderrows(t.virtualsizeinfo));break;case"horizontalscrollbarstep":case"verticalscrollbarstep":case"horizontalscrollbarlargestep":case"verticalscrollbarlargestep":this.vScrollBar.jqxScrollBar({step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep});this.hScrollBar.jqxScrollBar({step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep});break;case"closeablegroups":t._initgroupsheader&&t._initgroupsheader();break;case"showgroupsheader":r!=u&&(t._arrange(),t._initgroupsheader&&t._initgroupsheader(),t._renderrows(t.virtualsizeinfo));break;case"theme":u!=r&&(n.jqx.utilities.setTheme(r,u,t.host),t.gridmenu&&t.gridmenu.jqxMenu({theme:u}),t.pageable&&t._updatepagertheme(),t.filterable&&t._updatefilterrowui(!0),t.showeverpresentrow&&t._updateaddnewrowui(!0));break;case"showtoolbar":case"toolbarheight":r!=u&&(t._arrange(),t.refresh());break;case"showstatusbar":r!=u&&(t.statusbar&&(u?t.statusbar.show():t.statusbar.hide()),t._arrange(),t.refresh());break;case"statusbarheight":r!=u&&(t._arrange(),t.refresh());break;case"filterable":case"showfilterrow":r!=u&&t.render();break;case"autoshowfiltericon":case"showfiltercolumnbackground":case"showpinnedcolumnbackground":case"showsortcolumnbackground":r!=u&&t.rendergridcontent();break;case"showrowdetailscolumn":r!=u&&t.render();break;case"scrollbarsize":r!=u&&t._arrange();break;case"width":case"height":r!=u&&(t._updatesize(!0,!0),t._resizeWindow(),t.virtualmode&&!t._loading?t.vScrollInstance.setPosition(0):setTimeout(function(){t._renderrows(t.virtualsizeinfo)},100));break;case"altrows":case"altstart":case"altstep":r!=u&&t._renderrows(t.virtualsizeinfo);break;case"groupsheaderheight":r!=u&&(t._arrange(),t._initgroupsheader&&t._initgroupsheader());break;case"pagerheight":r!=u&&t._initpager();break;case"selectedrowindex":t.selectrow(u);break;case"selectionmode":r!=u&&(u=="none"&&(t.selectedrowindexes=[],t.selectedcells=[],t.selectedrowindex=-1),t._renderrows(t.virtualsizeinfo),u=="checkbox"&&t._render(!1,!1,!0,!1,!1));break;case"showheader":u?t.columnsheader.css("display","block"):t.columnsheader.css("display","none");break;case"virtualmode":r!=u&&(t.dataview.virtualmode=t.virtualmode,t.dataview.refresh(!1),t._render(!1,!1,!1));break;case"columnsmenu":r!=u&&t.render();break;case"columngroups":t._render(!0,!0,!0,!1,!1);break;case"columns":t.columns&&t.columns.length>t.headerZIndex&&(t.headerZIndex=t.columns.length+100);t._serializeObject(t._cachedcolumns)!==t._serializeObject(u)?(f=!1,t.filterable&&r&&r.records&&n.each(r.records,function(){this.filter&&(f=!0);t.dataview.removefilter(this.displayfield,this.filter)}),t._columns=null,t._filterrowcache=[],t.render(),f&&t.applyfilters(),t._cachedcolumns=t.columns,t.removesort&&t.removesort()):t[i]=r;break;case"autoheight":r!=u&&t._render(!1,!1,!0);break;case"pagermode":case"pagerbuttonscount":r!=u&&t._initpager&&(t.pagershowrowscombo&&(t.pagershowrowscombo.jqxDropDownList("destroy"),t.pagershowrowscombo=null),t.pagerrightbutton&&(t.removeHandler(t.pagerrightbutton,"mousedown"),t.removeHandler(t.pagerrightbutton,"mouseup"),t.removeHandler(t.pagerrightbutton,"click"),t.pagerrightbutton.jqxButton("destroy"),t.pagerrightbutton=null),t.pagerleftbutton&&(t.removeHandler(t.pagerleftbutton,"mousedown"),t.removeHandler(t.pagerleftbutton,"mouseup"),t.removeHandler(t.pagerleftbutton,"click"),t.pagerleftbutton.jqxButton("destroy"),t.removeHandler(n(document),"mouseup.pagerbuttons"+t.element.id),t.pagerleftbutton=null),t.pagerdiv.remove(),t._initpager());break;case"pagesizeoptions":case"pageable":case"pagesize":if(r!=u){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);if(!t.host.jqxDropDownList||!t.host.jqxListBox){t._testmodules();return}if(t._initpager){if(i!="pageable"&&i!="pagermode"&&typeof u=="string"){e="The expected value type is: Int.";i!="pagesize"&&(e="The expected value type is: Array of Int values.");throw new Error("Invalid Value for: "+i+". "+e);}t.dataview.pageable=t.pageable;t.dataview.pagenum=0;t.dataview.pagesize=t._getpagesize();t.virtualmode&&t.updatebounddata();t.dataview.refresh(!0);t._initpager();i=="pagesizeoptions"&&u!=null&&u.length>0&&(t.pagesize=parseInt(u[0]),t.dataview.pagesize=parseInt(u[0]),t.prerenderrequired=!0,t._requiresupdate=!0,t.dataview.pagenum=-1,t.gotopage(0))}t._render(!1,!1,!1)}break;case"groups":t._serializeObject(r)!==t._serializeObject(u)&&(t.dataview.groups=u,t._refreshdataview(),t._render(!0,!0,!0,!1));break;case"groupable":r!=u&&(t.dataview.groupable=t.groupable,t.dataview.pagenum=0,t.dataview.refresh(!1),t._render(!1,!1,!0));break;case"renderstatusbar":u!=null&&t.renderstatusbar(t.statusbar);break;case"rendertoolbar":u!=null&&t.rendertoolbar(t.toolbar);break;case"disabled":u?t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")):t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled"));n.jqx.aria(t,"aria-disabled",t.disabled);t.pageable&&(t.pagerrightbutton&&(t.pagerrightbutton.jqxButton({disabled:u}),t.pagerleftbutton.jqxButton({disabled:u}),t.pagershowrowscombo.jqxDropDownList({disabled:u}),t.pagergotoinput.attr("disabled",u)),t.pagerfirstbutton&&(t.pagerfirstbutton.jqxButton({disabled:u}),t.pagerlastbutton.jqxButton({disabled:u})));t.vScrollBar.jqxScrollBar({disabled:u});t.hScrollBar.jqxScrollBar({disabled:u});t.filterable&&t.showfilterrow&&t._updatefilterrowui(!0);t.showeverpresentrow&&t._updateaddnewrowui(!0)}}}});n.jqx.collection=function(n){return this.records=[],this.owner=n,this.updating=!1,this.beginupdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this._raiseEvent=function(){},this.clear=function(){this.records=[]},this.replace=function(n,t){this.records[n]=t;this.updating||this._raiseEvent({type:"replace",element:t})},this.isempty=function(n){return this.records[n]==undefined?!0:!1},this.initialize=function(n){n<1&&(n=1);this.records[n-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(n){return this.records.indexOf(n)},this.add=function(n){return n==null?!1:(this.records[this.records.length]=n,this.updating||this._raiseEvent({type:"add",element:n}),!0)},this.insertAt=function(n,t){return n==null||n==undefined?!1:t==null?!1:n>=0?n<this.records.length?(this.records.splice(n,0,t),this.updating||this._raiseEvent({type:"insert",index:n,element:t}),!0):this.add(t):!1},this.remove=function(n){if(n==null||n==undefined)return!1;var t=this.records.indexOf(n);return t!=-1?(this.records.splice(t,1),this.updating||this._raiseEvent({type:"remove",element:n}),!0):!1},this.removeAt=function(n){if(n==null||n==undefined||n<0)return!1;if(n<this.records.length){var t=this.records[n];return this.records.splice(n,1),this.updating||this._raiseEvent({type:"removeAt",index:n,element:t}),!0}return!1},this};n.jqx.dataview=function(){return this.self=this,this.aggregates=!1,this.grid=null,this.uniqueId="id",this.records=[],this.rows=[],this.columns=[],this.groups=[],this.filters=[],this.updated=null,this.update=null,this.suspend=!1,this.pagesize=0,this.pagenum=0,this.totalrows=0,this.totalrecords=0,this.groupable=!0,this.loadedrecords=[],this.loadedrootgroups=[],this.loadedgroups=[],this.loadedgroupsByKey=[],this.virtualmode=!0,this._cachegrouppages=[],this.source=null,this.changedrecords=[],this.rowschangecallback=null,this.that=this,this.destroy=function(){delete this.self;delete this.grid;delete this.uniqueId;delete this.records;delete this.rows;delete this.columns;delete this.groups;delete this.filters;delete this.updated;delete this.update;delete this.suspend;delete this.pagesize;delete this.pagenum;delete this.totalrows;delete this.totalrecords;delete this.groupable;delete this.loadedrecords;delete this.loadedrootgroups;delete this.loadedgroups;delete this.loadedgroupsByKey;delete this.virtualmode;delete this._cachegrouppages;delete this.source;delete this.changedrecords;delete this.rowschangecallback;delete this.that},this.suspendupdate=function(){this.suspend=!0},this.isupdating=function(){return this.suspend},this.resumeupdate=function(n){this.suspend=!1;n==undefined&&(n=!0);this.refresh(n)},this.getrecords=function(){return this.records},this.clearrecords=function(){this.recordids=[]},this.databind=function(t,i){var rt=t._source?!0:!1,u=null,tt,p,r,v,w,e,f,y,b,d,l,g,k,nt,h,it,c;this.grid&&(this.aggregates=this.grid.showgroupaggregates);rt?(u=t,t=t._source):u=new n.jqx.dataAdapter(t,{autoBind:!1});tt=function(n){u.recordids=[];u.records=[];u.cachedrecords=[];u.originaldata=[];u._options.virtualmode=n.virtualmode;u._options.totalrecords=n.totalrecords;u._options.originaldata=n.originaldata;u._options.recordids=n.recordids;u._options.cachedrecords=[];u._options.pagenum=n.pagenum;u._options.pageable=n.pageable;t.type!=undefined&&(u._options.type=t.type);t.formatdata!=undefined&&(u._options.formatData=t.formatdata);t.contenttype!=undefined&&(u._options.contentType=t.contenttype);t.async!=undefined&&(u._options.async=t.async);t.updaterow!=undefined&&(u._options.updaterow=t.updaterow);t.addrow!=undefined&&(u._options.addrow=t.addrow);t.deleterow!=undefined&&(u._options.deleterow=t.deleterow);n.pagesize==0&&(n.pagesize=10);u._options.pagesize=n.pagesize};p=function(i){var r,f,e,o,c,s,h;if(i.totalrecords=u.totalrecords,i.virtualmode){if(r={startindex:i.pagenum*i.pagesize,endindex:i.pagenum*i.pagesize+i.pagesize},t.recordstartindex!=undefined&&(r.startindex=parseInt(t.recordstartindex)),t.recordendindex!=undefined?r.endindex=parseInt(t.recordendindex):i.grid.pageable||(r.endindex=r.startindex+100,i.grid.autoheight&&(r.endindex=r.startindex+i.totalrecords)),t.recordendindex||(i.grid.pageable?r={startindex:i.pagenum*i.pagesize,endindex:i.pagenum*i.pagesize+i.pagesize}:(r.endindex=r.startindex+100,i.grid.autoheight&&(r.endindex=r.startindex+i.totalrecords))),r.data=u.records,i.grid.rendergridrows&&i.totalrecords>0&&(f=0,t.records=i.grid.rendergridrows(r),t.records.length&&(f=t.records.length),t.records&&!t.records[r.startindex]&&(e=[],o=r.startindex,n.each(t.records,function(){e[o]=this;o++;f++}),t.records=e),f==0&&t.records&&n.each(t.records,function(){f++}),f>0&&f<r.endindex-r.startindex&&!i.grid.groupable))for(c=t.records[0],s=0;s<r.endindex-r.startindex-f;s++){h={};for(obj in c)h[obj]="";t.records.push&&t.records.push(h)}t.records&&i.totalrecords!=0||(t.records=[]);i.originaldata=t.records;i.records=t.records;i.cachedrecords=t.records}else i.originaldata=u.originaldata,i.records=u.records,i.recordids=u.recordids,i.cachedrecords=u.cachedrecords};tt(this);this.source=t;i!==undefined&&(uniqueId=i);r=this.that;switch(t.datatype){case"local":case"array":default:t.localdata==null&&(t.localdata=[]);t.localdata!=null&&(u.unbindBindingUpdate(r.grid.element.id),(!r.grid.autobind&&r.grid.isInitialized||r.grid.autobind)&&u.dataBind(),c=function(i){var e,f,o;(i==undefined||i==""||(e=u._changedrecords[0],e&&(f=[],n.each(u._changedrecords,function(n){var o=this.index,e=this.record,t;r.grid._updateFromAdapter=!0;switch(i){case"update":t=r.grid.getrowid(o);n==u._changedrecords.length-1?r.grid.updaterow(t,e):r.grid.updaterow(t,e,!1);r.grid._updateFromAdapter=!1;return;case"add":r.grid.addrow(null,e);r.grid._updateFromAdapter=!1;return;case"remove":t=r.grid.getrowid(o);f.push(t);return}}),f.length>0&&(r.grid.deleterow(f,!1),r.grid._updateFromAdapter=!1)),i!="update"))&&(o=r.totalrecords,p(r,i),t.localdata.notifier===null&&t.localdata.name=="observableArray"&&(t.localdata.notifier=function(i){var e,o,s,f;if(!this._updating){this._updating=!0;e=r.grid.getrowid(i.index);switch(i.type){case"add":f=n.extend({},i.object[i.index]);o=u.getid(t.id,f,i.index);i.index===0?r.grid.addrow(o,f,"first"):r.grid.addrow(o,f);break;case"delete":r.grid.deleterow(e);break;case"update":i.path&&i.path.split(".").length>1?(s=i.path.split("."),r.grid.setcellvalue(i.index,s[s.length-1],i.newValue)):(f=n.extend({},i.object[i.index]),r.grid.updaterow(e,f))}this._updating=!1}}),i=="updateData"?(r.refresh(),r.grid._updateGridData()):(t.recordstartindex&&this.virtualmode?r.updateview(t.recordstartindex,t.recordstartindex+r.pagesize):r.refresh(),r.update(o!=r.totalrecords)))},c(),u.bindBindingUpdate(r.grid.element.id,c));break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(t.localdata!=null){u.unbindBindingUpdate(r.grid.element.id);(!r.grid.autobind&&r.grid.isInitialized||r.grid.autobind)&&u.dataBind();c=function(n){var i=r.totalrecords;p(r);n=="updateData"?(r.refresh(),r.grid._updateGridData()):(t.recordstartindex&&r.virtualmode?r.updateview(t.recordstartindex,t.recordstartindex+r.pagesize):r.refresh(),r.update(i!=r.totalrecords))};c();u.bindBindingUpdate(r.grid.element.id,c);return}var a=[],s=0,o={};for(h=0;h<this.filters.length;h++)if(v=this.filters[h].datafield,w=this.filters[h].filter,w.getfilters)for(e=w.getfilters(),o[v+"operator"]=w.operator,f=0;f<e.length;f++){if(e[f].datafield=v,y=e[f].value,e[f].type=="datefilter"?e[f].value&&e[f].value.toLocaleString?(b=this.grid.getcolumn(e[f].datafield),b&&b.cellsformat?(d=this.grid.source.formatDate(e[f].value,b.cellsformat,this.grid.gridlocalization),o["filtervalue"+s]=d?d:e[f].value.toLocaleString()):o["filtervalue"+s]=y.toString()):o["filtervalue"+s]=y.toString():(o["filtervalue"+s]=y.toString(),e[f].data&&(o["filterid"+s]=e[f].data.toString()),e[f].id&&(o["filterid"+s]=e[f].id.toString())),o["filtercondition"+s]=e[f].condition,o["filteroperator"+s]=e[f].operator,o["filterdatafield"+s]=v,l={label:y.toString()},e[f].data&&(l.value=e[f].data.toString()),l.value=e[f].id?e[f].id.toString():y.toString(),l.condition=e[f].condition,l.operator=e[f].operator==0?"and":"or",l.field=v,l.type=e[f].type,g=!1,a.length>0)for(k=0;k<a.length;k++)if(nt=a[k],nt.field==v){nt.filters.push(l);g=!0;break}g||(a.push({field:v,filters:[]}),a[a.length-1].filters.push(l));s++}for(o.filterGroups=a,o.filterscount=s,o.groupscount=r.groups.length,h=0;h<r.groups.length;h++)o["group"+h]=r.groups[h];t.recordstartindex==undefined&&(t.recordstartindex=0);(t.recordendindex==undefined||t.recordendindex==0)&&(r.grid.height&&r.grid.height.toString().indexOf("%")==-1?(t.recordendindex=parseInt(r.grid.height)/r.grid.rowsheight,t.recordendindex+=2,t.recordendindex=parseInt(t.recordendindex)):(t.recordendindex=n(window).height()/r.grid.rowsheight,t.recordendindex=parseInt(t.recordendindex)),this.pageable&&(t.recordendindex=this.pagesize));this.pageable&&(t.recordstartindex=this.pagenum*this.pagesize,t.recordendindex=(this.pagenum+1)*this.pagesize);n.extend(o,{sortdatafield:r.sortfield,sortorder:r.sortfielddirection,pagenum:r.pagenum,pagesize:r.grid.pagesize,recordstartindex:t.recordstartindex,recordendindex:t.recordendindex});it=u._options.data;u._options.data?n.extend(u._options.data,o):(t.data&&n.extend(o,t.data),u._options.data=o);c=function(){var u=n.jqx.browser.msie&&n.jqx.browser.version<9,i=function(){var n=r.totalrecords;p(r);t.recordstartindex&&r.virtualmode?r.updateview(t.recordstartindex,t.recordstartindex+r.pagesize):r.refresh();r.update(n!=r.totalrecords)};if(u)try{i()}catch(f){}else i()};u.unbindDownloadComplete(r.grid.element.id);u.bindDownloadComplete(r.grid.element.id,c);!r.grid.autobind&&r.grid.isInitialized||r.grid.autobind?u.dataBind():r.grid.isInitialized||r.grid.autobind||c();u._options.data=it}},this.getid=function(t,i,r){if(n(t,i).length>0)return n(t,i).text();if(t&&t.toString().length>0){var u=n(i).attr(t);if(u!=null&&u.toString().length>0)return u}return r},this.getvaluebytype=function(t,i){var u=t,r,t;return i.type=="date"?(r=new Date(t),t=r.toString()=="NaN"||r.toString()=="Invalid Date"?n.jqx.dataFormat?n.jqx.dataFormat.tryparsedate(t):r:r,t==null&&(t=u)):i.type=="float"?(t=parseFloat(t),isNaN(t)&&(t=u)):i.type=="int"?(t=parseInt(t),isNaN(t)&&(t=u)):i.type=="bool"&&(t!=null&&(t.toLowerCase()=="false"?t=!1:t.toLowerCase()=="true"&&(t=!0)),t=t==1?!0:t==0?!1:""),t},this.setpaging=function(n){n.pageSize!=undefined&&(this.pagesize=n.pageSize);n.pageNum!=undefined&&(this.pagenum=Math.min(n.pageNum,Math.ceil(this.totalrows/this.pagesize)));this.refresh()},this.getpagingdetails=function(){return{pageSize:this.pagesize,pageNum:this.pagenum,totalrows:this.totalrows}},this._clearcaches=function(){this.sortcache={};this.sortdata=null;this.changedrecords=[];this.records=[];this.rows=[];this.cacheddata=[];this.originaldata=[];this.bounditems=[];this.loadedrecords=[];this.loadedrootgroups=[];this.loadedgroups=[];this.loadedgroupsByKey=[];this._cachegrouppages=[];this.recordsbyid=[];this.cachedrecords=[];this.recordids=[]},this.addfilter=function(n,t){for(var r=-1,i=0;i<this.filters.length;i++)if(this.filters[i].datafield==n){r=i;break}r==-1?this.filters[this.filters.length]={filter:t,datafield:n}:this.filters[r]={filter:t,datafield:n}},this.removefilter=function(n){for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==n){this.filters.splice(t,1);break}},this.getItemFromIndex=function(n){return this.records[n]},this.updaterow=function(n,t,i){var h=this.filters&&this.filters.length>0&&!this.virtualmode,f,r,u,s,o;if(h||t==undefined||n==undefined){if(this.filters&&this.filters.length>0){var e=this.cachedrecords,f=null,r=-1;for(u=0;u<e.length;u++)if(e[u].uid==n){f=e[u];r=u;break}if(f){s=this.that;for(o in t)s.cachedrecords[r][o]=t[o];return(i==!0||i==undefined)&&this.refresh(),!0}}}else return(t.uid=n,t[this.source.id]||(t[this.source.id]=t.uid),f=this.recordsbyid["id"+n],r=this.records.indexOf(f),r==-1)?!1:(this.records[r]=t,this.cachedrecords&&(this.cachedrecords[r]=t),(i==!0||i==undefined)&&this.refresh(),this.changedrecords[t.uid]={Type:"Update",OldData:f,Data:t},!0);return!1},this.addrow=function(t,i,r,u){var f,e;if(i!=undefined){if(n.isEmptyObject(i)&&this.source&&this.source.datafields&&n.each(this.source.datafields,function(){var n="";this.type=="number"&&(n=null);this.type=="date"&&(n=null);(this.type=="bool"||this.type=="boolean")&&(n=!1);i[this.name]=n}),!t||this.recordsbyid["id"+t])for(i.uid=this.getid(this.source.id,i,this.totalrecords),f=this.recordsbyid["id"+i.uid];f!=null;)e=Math.floor(Math.random()*1e4).toString(),i.uid=e,f=this.recordsbyid["id"+e];else i.uid=t;return i[this.source.id]||this.source.id!=undefined&&(i[this.source.id]=i.uid),r=="last"?this.records.push(i):typeof r=="number"&&isFinite(r)?this.records.splice(r,0,i):this.records.splice(0,0,i),this.filters&&this.filters.length>0&&(r=="last"?this.cachedrecords.push(i):typeof r=="number"&&isFinite(r)?this.cachedrecords.splice(r,0,i):this.cachedrecords.splice(0,0,i)),this.totalrecords++,this.virtualmode&&(this.source.totalrecords=this.totalrecords),(u==!0||u==undefined)&&this.refresh(),this.changedrecords[i.uid]={Type:"New",Data:i},!0}return!1},this.deleterow=function(n,t){var e,u,r,i;if(n!=undefined){if(e=this.filters&&this.filters.length>0,this.recordsbyid["id"+n]&&!e){if(u=this.recordsbyid["id"+n],r=this.records.indexOf(u),this.grid&&this.grid.sortable&&this.grid.sortmode=="many")for(i=0;i<this.records.length;i++)if(this.records[i].boundindex===u.boundindex){r=i;break}return this.changedrecords[n]={Type:"Delete",Data:this.records[r]},this.records.splice(r,1),this.totalrecords--,this.virtualmode&&(this.source.totalrecords=this.totalrecords),(t==!0||t==undefined)&&this.refresh(),!0}if(this.filters&&this.filters.length>0){var f=this.cachedrecords,u=null,r=-1;for(i=0;i<f.length;i++)if(f[i].uid==n){u=f[i];r=i;break}if(u)return this.cachedrecords.splice(r,1),(t==!0||t==undefined)&&(this.totalrecords=0,this.records=this.cachedrecords,this.refresh()),!0}return!1}return!1},this.reload=function(t,i,r,u,f,e,o){var b=this.that,l=[],k=t,h=i,v=r,y=u,c=h.length,p=0,s=0,w,e,o,a;if(this.columns=[],this.bounditems=[],this.loadedrecords=[],this.loadedrootgroups=[],this.loadedgroups=[],this.loadedgroupsByKey=[],this._cachegrouppages=[],this.recordsbyid={},this.totalrecords==0&&(Object.size=function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t},w=Object.size(k),this.totalrecords=w,n.each(this.records,function(){var t=this,i=0;return n.each(t,function(n){b.columns[i++]=n}),!1})),this.virtualmode){if(this.pageable){this.updateview();return}if(e=0,this.groupable)o=this.totalrecords;else{this.updateview();return}}else e=0,o=this.totalrecords;return this.groupable&&this.groups.length>0&&this.loadgrouprecords?(a=e,a=this.loadgrouprecords(0,e,o,v,s,y,h,c,l)):p=this.loadflatrecords(e,o,v,s,y,h,c,l),c>s&&h.splice(s,c-s),this.totalrows=this.groups.length>0&&this.groupable?a:p,l},this.loadflatrecords=function(t,i,r,u,f,e,o,s){var c=this.that,a=t,v=t,l,h,p;i=Math.min(i,this.totalrecords);var w=this.sortdata!=null,b=this.source.id&&(this.source.datatype=="local"||this.source.datatype=="array"||this.source.datatype==""),y=w?this.sortdata:this.records;for(l=t;l<i;l++)h={},w?(h=n.extend({},y[l].value),id=h[c.uniqueId],h.boundindex=y[l].index,h.uid==undefined&&(h.uid=c.getid(c.source.id,h,h.boundindex)),c.recordsbyid["id"+h.uid]=y[l].value,c.loadedrecords[a]=h,h.uniqueid=c.generatekey(),c.bounditems[h.boundindex]=h):(h=new Object(y[l]),id=h[c.uniqueId],h.boundindex=a,c.loadedrecords[a]=h,h.uid==undefined&&(h.uid=c.getid(c.source.id,h,a)),c.recordsbyid["id"+h.uid]=y[l],h.uniqueid=c.generatekey(),c.bounditems[this.bounditems.length]=h),(u>=o||id!=e[u][c.uniqueId]||f&&f[id])&&(s[s.length]=u),e[u]=h,u++,h.visibleindex=v,v++,a++;return c.grid.summaryrows&&(p=a,n.each(c.grid.summaryrows,function(){var t=n.extend({},this);t.boundindex=i++;c.loadedrecords[p]=t;t.uniqueid=c.generatekey();c.bounditems[c.bounditems.length]=t;e[u]=t;u++;t.visibleindex=v;v++;p++})),v},this.updateview=function(n,t){var v=this.that,c=this.pagesize*this.pagenum,u=0,i=[],e=this.filters,l=this.updated,o=i.length,a,s,y,h,r,f;if(this.pageable){if(this.virtualmode)if(this.groupable&&this.groups.length!=0){if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){if(this._cachegrouppages[this.pagenum+"_"+this.pagesize]!=undefined){this.rows=this._cachegrouppages[this.pagenum+"_"+this.pagesize];this.totalrows=this.rows.length;return}a=this.pagesize*(1+this.pagenum);a>this.totalrecords&&(a=this.totalrecords);this.loadgrouprecords(0,this.pagesize*this.pagenum,a,e,u,l,i,o,[]);this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows;this.totalrows=this.rows.length;return}}else this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),e,u,l,i,o,[]),this.totalrows=i.length}else if(this.virtualmode&&(!this.groupable||this.groups.length==0)&&(s=this.pagesize,s==0&&(s=Math.min(100,this.totalrecords)),y=s*this.pagenum,this.loadedrecords.length==0&&(y=0),n!=null&&t!=null?this.loadflatrecords(n,t,e,u,l,i,o,[]):this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),e,u,l,i,o,[]),this.totalrows=this.loadedrecords.length,this.rows=i,i.length>=s))return;if(this.groupable&&this.pageable&&this.groups.length>0&&this._updategroupsinpage)i=this._updategroupsinpage(v,e,c,u,o,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum));else for(r=this.pagesize*this.pagenum;r<this.pagesize*(1+this.pagenum);r++)(f=r<this.loadedrecords.length?this.loadedrecords[r]:null,f!=null)&&((!this.pagesize||c>=this.pagesize*this.pagenum&&c<=this.pagesize*(this.pagenum+1))&&(i[u]=f,u++),c++);if((i.length==0||i.length<this.pagesize)&&!this.pageable&&this.virtualmode)for(u=i.length,h=i.length,r=this.pagesize*this.pagenum;r<this.pagesize*(1+this.pagenum)-h;r++)f={},f.boundindex=r+h,f.visibleindex=r+h,f.uniqueid=v.generatekey(),f.empty=!0,v.bounditems[r+h]=f,i[u]=f,u++;this.rows=i},this.generatekey=function(){var n=function(){return(1+Math.random())*16|0};return""+n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},this.reloaddata=function(){this.reload(this.records,this.rows,this.filter,this.updated,!0)},this.refresh=function(t){var c,d,nt,f,v,e,o,b,l,r,y,s,u,h,p,k;if(!this.suspend){if(t==undefined&&(t=!0),c=this.rows.length,d=this.totalrows,this.filters.length>0&&!this.virtualmode){var w="",g=this.cachedrecords.length,i=[];if(this.totalrecords=0,l=this.cachedrecords,this._dataIndexToBoundIndex=[],nt=this.filters.length,this.source!=null&&this.source.filter!=undefined&&this.source.localdata!=undefined)i=this.source.filter(this.filters,l,g),i==undefined&&(i=[]),this.records=i;else if(this.source.filter==null||this.source.filter==undefined){for(f=0;f<g;f++){for(v=l[f],e=undefined,o=0;o<nt;o++){var w=this.filters[o].filter,tt=v[this.filters[o].datafield],a=w.evaluate(tt);this.grid.filter&&(b=this.grid.filter(tt,v,this.filters[o].datafield,w,a),b!==undefined&&(a=b));e=e==undefined?a:w.operator=="or"?e||a:e&&a}e?(i[i.length]=n.extend({dataindex:f},v),this._dataIndexToBoundIndex[f]={boundindex:i.length-1}):this._dataIndexToBoundIndex[f]=null}this.records=i}if(this.sortdata)if(this.grid&&this.grid.sortmode!=="many"){if(r=this.sortfield,this.sortcache[r]){this.sortdata=null;y=this.sortcache[r].direction;this.sortcache[r]=null;this.sortby(this.sortfield,y);return}}else{for(s=this.grid.getsortcolumns(),u=0;u<s.length;u++)h=s[u],p=h.dataField,this.grid.sortby(p,h.ascending,null);return}}else if(this.filters.length==0&&!this.virtualmode&&this.cachedrecords&&(this.totalrecords=0,l=this.cachedrecords,this.records=l,this.sortdata))if(this.grid&&this.grid.sortmode!=="many"){if(r=this.sortfield,this.sortcache[r]){this.sortdata=null;y=this.sortcache[r].direction;this.sortcache[r]=null;this.sortby(this.sortfield,y);return}}else{for(s=this.grid.getsortcolumns(),u=0;u<s.length;u++)h=s[u],p=h.dataField,this.grid.sortby(p,h.ascending,null);return}k=this.reload(this.records,this.rows,this.filter,this.updated,t);this.updated=null;this.rowschangecallback!=null&&(d!=totalrows&&this.rowschangecallback({type:"PagingChanged",data:getpagingdetails()}),c!=rows.length&&this.rowschangecallback({type:"RowsCountChanged",data:{previous:c,current:rows.length}}),(k.length>0||c!=rows.length)&&this.rowschangecallback({type:"RowsChanged",data:{previous:c,current:rows.length,diff:k}}))}},this}}(jqxBaseFramework),function(n){n.extend(n.jqx._jqxGrid.prototype,{autoresizecolumns:function(t,i){var b,a,k,g,e,w,tt,u,rt,it,d,s,y,p,o,ut,f,r;t!="cells"&&t!="all"&&t!="column"&&(t="all");b=this.that;a=this.getrows();this.pageable&&(a=this.dataview.rows,this.groupable&&(a=this.dataview.records));i=i==undefined?0:parseInt(i);k=a.length;k==undefined&&a!=undefined&&(g=[],n.each(a,function(){g.push(this)}),a=g,k=a.length);e=n("<span><\/span>");e.addClass(this.toThemeProperty("jqx-widget"));e.addClass(this.toThemeProperty("jqx-grid-cell"));n(document.body).append(e);var h=[],c=[],l=[],v=[],nt=b.host.width();for(b.vScrollBar[0].style.visibility!="hidden"&&(nt-=this.scrollbarsize+5),nt<0&&(nt=0),w=0;w<k;w++)for(tt=a[w],f=0;f<this.columns.records.length;f++)if((r=this.columns.records[f],!r.hidden)&&(!(this.groups.length>0)||!(f<=this.groups.length-1))){if(c[r.displayfield]==undefined&&(c[r.displayfield]=0),l[r.displayfield]==undefined&&(l[r.displayfield]=""),u=tt[r.displayfield],r.cellsformat!=""?n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(u)?u=n.jqx.dataFormat.formatdate(u,r.cellsformat,this.gridlocalization):n.jqx.dataFormat.isNumber(u)&&(u=n.jqx.dataFormat.formatnumber(u,r.cellsformat,this.gridlocalization))):r.cellsrenderer&&(rt=b._defaultcellsrenderer(u,r),it=r.cellsrenderer(w,r.datafield,u,rt,r.getcolumnproperties(),tt),it!=undefined&&(u=n(it).text())),(t==undefined||t=="cells"||t=="all")&&u!=null){var h=u.toString().length,d=u.toString(),s=d.replace(/[^A-Z]/g,"").length;h>c[r.displayfield]&&(c[r.displayfield]=h,l[r.displayfield]=u,v[r.displayfield]=s);h>0&&h>=s&&(y=s*20+(h-s)*15,p=v[r.displayfield]*20+(c[r.displayfield]-v[r.displayfield])*15,y>p&&y>0&&p>0&&(c[r.displayfield]=h,l[r.displayfield]=u,v[r.displayfield]=s))}if(t=="column"||t=="all"){r.text.toString().length>c[r.displayfield]&&(l[r.displayfield]=r.text,c[r.displayfield]=r.text.length,d=r.text.toString(),s=d.replace(/[^A-Z]/g,"").length,v[r.displayfield]=s);var u=r.text,h=u.toString().length,d=u.toString(),s=d.replace(/[^A-Z]/g,"").length;h>0&&h>=s&&(y=s*20+(h-s)*15,p=v[r.displayfield]*20+(c[r.displayfield]-v[r.displayfield])*15,y>p&&y>0&&p>0&&(c[r.displayfield]=h,l[r.displayfield]=u,v[r.displayfield]=s))}}if(this.columns.records){for(f=0;f<this.columns.records.length;f++)(r=this.columns.records[f],r.displayfield)&&(l[r.displayfield]==undefined&&(l[r.displayfield]=r.text),e[0].className.indexOf("jqx-grid-column-header")>=0&&e.removeClass(this.toThemeProperty("jqx-grid-column-header")),l[r.displayfield]==r.text&&e.addClass(this.toThemeProperty("jqx-grid-column-header")),e[0].innerHTML=l[r.displayfield].toString(),o=e.outerWidth()+10,e.children().length>0&&(o=e.children().outerWidth()+10),n.jqx.browser.msie&&n.jqx.browser.version<8&&(o+=10),this.filterable&&this.showfilterrow&&(o+=5),o+=i,o>r.maxwidth&&(o=r.maxwidth),r._width!=undefined&&(r.__width=r._width),r._width=null,(r.maxwidth=="auto"||o<=r.maxwidth)&&(ut=r.width,o<r.minwidth&&(o=r.minwidth),r.width=o,r._percentagewidth!=undefined&&(r._percentagewidth=null),this._raiseEvent(14,{columntext:r.text,column:r.getcolumnproperties(),datafield:r.datafield,displayfield:r.displayfield,oldwidth:ut,newwidth:o})));for(e.remove(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),f=0;f<this.columns.records.length;f++)r=this.columns.records[f],r.__width!=undefined&&(r._width=r.__width)}},autoresizecolumn:function(t,i,r){var p,u,d,h,w,f,k,v,y,e,tt;if((i!="cells"&&i!="all"&&i!="column"&&(i="all"),t==undefined)||(p=this.getrows(),this.pageable&&(p=this.dataview.rows,this.groupable&&(p=this.dataview.records)),u=this.getcolumn(t),u==undefined))return!1;r=r==undefined?0:parseInt(r);d=p.length;h=n("<span><\/span>");h.addClass(this.toThemeProperty("jqx-widget"));h.addClass(this.toThemeProperty("jqx-grid-cell"));n(document.body).append(h);var l=0,c="",a=0,g=this.that,b=g.host.width();if(g.vScrollBar[0].style.visibility!="hidden"&&(b-=this.scrollbarsize+5),b<0&&(b=0),i==undefined||i=="cells"||i=="all")for(w=0;w<d;w++)if(f=p[w][u.displayfield],u.cellsformat!=""?n.jqx.dataFormat&&(n.jqx.dataFormat.isDate(f)?f=n.jqx.dataFormat.formatdate(f,u.cellsformat,this.gridlocalization):n.jqx.dataFormat.isNumber(f)&&(f=n.jqx.dataFormat.formatnumber(f,u.cellsformat,this.gridlocalization))):u.cellsrenderer&&(k=u.cellsrenderer(w,u,f),k!=undefined&&(f=n(k).text())),f!=null){var o=f.toString().length,nt=f.toString(),s=nt.replace(/[^A-Z]/g,"").length;o>l&&(l=o,c=f,a=s);o>0&&o>=s&&(v=s*20+(o-s)*15,y=a*20+(l-a)*15,v>y&&v>0&&y>0&&(l=o,c=f,a=s))}if(i=="column"||i=="all"){u.text.toString().length>l&&(c=u.text);var f=u.text.toString(),o=f.toString().length,nt=f.toString(),s=nt.replace(/[^A-Z]/g,"").length;o>0&&o>=s&&(v=s*20+(o-s)*15,y=a*20+(l-a)*15,v>y&&v>0&&y>0&&(l=o,c=f,a=s))}c==undefined&&(c=u.text);h[0].innerHTML=c;c==u.text&&h.addClass(this.toThemeProperty("jqx-grid-column-header"));e=h.outerWidth()+10;n.jqx.browser.msie&&n.jqx.browser.version<8&&(e+=5);this.filterable&&this.showfilterrow&&(e+=5);e+=r;h.remove();e>u.maxwidth&&(e=u.maxwidth);(u.maxwidth=="auto"||e<=u.maxwidth)&&(tt=u.width,e<u.minwidth&&(e=u.minwidth),u.width=e,u._width!=undefined&&(u.__width=u._width),u._width=null,u._percentagewidth!=undefined&&(u._percentagewidth=null),this._updatecolumnwidths(),this._updatecellwidths(),this._raiseEvent(14,{columntext:u.text,column:u.getcolumnproperties(),datafield:t,displayfield:u.displayfield,oldwidth:tt,newwidth:e}),this._renderrows(this.virtualsizeinfo),u._width!=undefined&&(u._width=u.__width))},_handlecolumnsresize:function(){var t=this.that,i,u,r,f;if(this.columnsresize){i=!1;t.isTouchDevice()&&t.touchmode!==!0&&(i=!0);var e="mousemove.resize"+this.element.id,o="mousedown.resize"+this.element.id,s="mouseup.resize"+this.element.id;if(i)var e=n.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,o=n.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,s=n.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id;this.removeHandler(n(document),e);this.addHandler(n(document),e,function(r){var y=n.data(document.body,"contextmenu"+t.element.id),f,u,a,v,o,c;if(y!=null&&t.autoshowcolumnsmenubutton)return!0;if(t.resizablecolumn!=null&&!t.disabled&&t.resizing&&t.resizeline!=null){var p=t.resizablecolumn.columnelement,s=t.host.coord(),h=parseInt(t.resizestartline.coord().left),l=h-t._startcolumnwidth,e=t.resizablecolumn.column.minwidth;if(e=e=="auto"?0:parseInt(e),f=t.resizablecolumn.column.maxwidth,f=f=="auto"?0:parseInt(f),u=r.pageX,i&&(a=t.getTouches(r),v=a[0],u=v.pageX),l+=e,o=f>0?h+f:0,c=f==0?!0:t._startcolumnwidth+u-h<f?!0:!1,t.rtl&&(c=!0),c)if(t.rtl){if(u>=s.left&&u<=s.left+t.host.width()&&(t.resizeline.css("left",u),i))return!1}else if(u>=s.left&&u>=l&&(o!=0&&r.pageX<o?t.resizeline.css("left",u):o==0&&t.resizeline.css("left",u),i))return!1}if(!i&&t.resizablecolumn!=null)return!1});this.removeHandler(n(document),o);this.addHandler(n(document),o,function(i){var s=n.data(document.body,"contextmenu"+t.element.id),r,f,h,o,u,e;if(s!=null&&t.autoshowcolumnsmenubutton)return!0;if(t.resizablecolumn!=null&&!t.disabled){if(r=t.resizablecolumn.columnelement,r.coord().top+r.height()+5<i.pageY){t.resizablecolumn=null;return}if(r.coord().top-5>i.pageY){t.resizablecolumn=null;return}if(t._startcolumnwidth=t.resizablecolumn.column.width,t.resizablecolumn.column._width=null,n(document.body).addClass("jqx-disableselect"),n(document.body).addClass("jqx-position-reset"),t.host.addClass("jqx-disableselect"),t.content.addClass("jqx-disableselect"),t._mouseDownResize=new Date,t.resizing=!0,t._lastmouseDownResize&&t.columnsautoresize&&t._lastmouseDownResize-t._mouseDownResize<300&&t._lastmouseDownResize-t._mouseDownResize>-500&&(f=t.resizablecolumn.column,f.resizable))return h=t.resizablecolumn.column.width,o=t.hScrollBar[0].style.visibility,t._resizecolumn=null,t.resizeline.hide(),t.resizestartline.hide(),t.resizebackground.remove(),t.resizablecolumn=null,t.columndragstarted=!1,t.dragmousedown=null,t.__drag=!1,t.autoresizecolumn(f.displayfield,"all"),o!=t.hScrollBar[0].style.visibility&&t.hScrollInstance.setPosition(0),t.rtl&&t._arrange(),t.autosavestate&&t.savestate&&t.savestate(),i.stopPropagation(),t.suspendClick=!0,setTimeout(function(){t.suspendClick=!1},100),!1;t._lastmouseDownResize=new Date;t._resizecolumn=t.resizablecolumn.column;t.resizeline=t.resizeline||n('<div style="position: absolute;"><\/div>');t.resizestartline=t.resizestartline||n('<div style="position: absolute;"><\/div>');t.resizebackground=t.resizebackground||n('<div style="position: absolute; left: 0; top: 0; background: #000;"><\/div>');t.resizebackground.css("opacity",.01);t.resizebackground.css("cursor","col-resize");t.resizeline.css("cursor","col-resize");t.resizestartline.css("cursor","col-resize");t.resizeline.addClass(t.toThemeProperty("jqx-grid-column-resizeline"));t.resizestartline.addClass(t.toThemeProperty("jqx-grid-column-resizestartline"));n(document.body).append(t.resizeline);n(document.body).append(t.resizestartline);n(document.body).append(t.resizebackground);u=t.resizablecolumn.columnelement.coord();t.resizebackground.css("left",t.host.coord().left);t.resizebackground.css("top",t.host.coord().top);t.resizebackground.width(t.host.width());t.resizebackground.height(t.host.height());t.resizebackground.css("z-index",9999);e=function(n){var e,r,f;t.rtl?n.css("left",parseInt(u.left)):n.css("left",parseInt(u.left)+t._startcolumnwidth);var o=t._groupsheader(),i=o?t.groupsheader.height():0,s=t.showtoolbar?t.toolbarheight:0;i+=s;e=t.showstatusbar?t.statusbarheight:0;i+=e;r=0;t.pageable&&(r=t.pagerheight);f=t.hScrollBar.css("visibility")=="visible"?17:0;n.css("top",parseInt(u.top));n.css("z-index",99999);t.columngroups?n.height(t.host.height()+t.resizablecolumn.columnelement.height()-r-i-f-t.columngroupslevel*t.columnsheight):n.height(t.host.height()-r-i-f);t.enableanimations?n.show("fast"):n.show()};e(t.resizeline);e(t.resizestartline);t.dragmousedown=null}});u=function(){var f,u,r,s,i,h;if(n(document.body).removeClass("jqx-disableselect"),n(document.body).removeClass("jqx-position-reset"),(t.showfilterrow||t.showstatusbar||t.showtoolbar||t.enablebrowserselection)&&(t.host.removeClass("jqx-disableselect"),t.content.removeClass("jqx-disableselect")),t.resizing){if(t._mouseUpResize=new Date,f=t._mouseUpResize-t._mouseDownResize,f<200){t.resizing=!1;t._resizecolumn!=null&&t.resizeline!=null&&t.resizeline.css("display")=="block"&&(t._resizecolumn=null,t.resizeline.hide(),t.resizestartline.hide(),t.resizebackground.remove());return}if(t.resizing=!1,!t.disabled)if(u=t.host.width(),t.vScrollBar[0].style.visibility!="hidden"&&(u-=20),u<0&&(u=0),t._resizecolumn!=null&&t.resizeline!=null&&t.resizeline.css("display")=="block"){var e=parseInt(t.resizeline.css("left")),o=parseInt(t.resizestartline.css("left")),r=t._startcolumnwidth+e-o;for(t.rtl&&(r=t._startcolumnwidth-e+o),s=t._resizecolumn.width,t._closemenu(),r<t._resizecolumn.minwidth&&(r=t._resizecolumn.minwidth),t._resizecolumn.width=r,t._resizecolumn._percentagewidth!=undefined&&(t._resizecolumn._percentagewidth=r/u*100),i=0;i<t._columns.length;i++)if(t._columns[i].datafield===t._resizecolumn.datafield){t._columns[i].width=t._resizecolumn.width;t._columns[i].width<t._resizecolumn.minwidth&&(t._columns[i].width=t._resizecolumn.minwidth);break}h=t.hScrollBar[0].style.visibility;t._updatecolumnwidths();t._updatecellwidths();t._raiseEvent(14,{columntext:t._resizecolumn.text,column:t._resizecolumn.getcolumnproperties(),datafield:t._resizecolumn.datafield,oldwidth:s,newwidth:r});t._renderrows(t.virtualsizeinfo);t.autosavestate&&t.savestate&&t.savestate();h!=t.hScrollBar[0].style.visibility&&t.hScrollInstance.setPosition(0);t.rtl&&t._arrange();t._resizecolumn=null;t.resizeline.hide();t.resizestartline.hide();t.resizebackground.remove();t.resizablecolumn=null}else t.resizablecolumn=null}};try{(document.referrer!=""||window.frameElement)&&(r=null,window.top!=null&&window.top!=window.self&&window.parent&&document.referrer&&(r=document.referrer),r&&r.indexOf(document.location.host)!=-1&&(f=function(){u()},window.top.document.addEventListener?window.top.document.addEventListener("mouseup",f,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",f)))}catch(h){}this.removeHandler(n(document),s);this.addHandler(n(document),s,function(){var i=n.data(document.body,"contextmenu"+t.element.id);if(i!=null&&t.autoshowcolumnsmenubutton)return!0;u()})}}})}(jqxBaseFramework),function(n){n.extend(n.jqx._jqxGrid.prototype,{selectallrows:function(){var r,u,n,t,i;for(this._trigger=!1,r=this.virtualmode?this.dataview.totalrecords:this.dataview.loadedrecords.length,this.selectedrowindexes=[],u=this.dataview.loadedrecords,n=0;n<r;n++){if(t=u[n],!t){this.selectedrowindexes[n]=n;continue}i=this.getboundindex(t);i!=undefined&&(this.selectedrowindexes[n]=i)}this.selectionmode!="checkbox"||this._checkboxcolumnupdating||this._checkboxcolumn&&this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!0});this._renderrows(this.virtualsizeinfo);this._trigger=!0;this.selectionmode=="checkbox"&&this._raiseEvent(2,{rowindex:this.selectedrowindexes})},unselectallrows:function(){this._trigger=!1;var n=this.virtualmode?this.dataview.totalrecords:this.dataview.loadedrecords.length;this.selectedrowindexes=[];this.selectionmode!="checkbox"||this._checkboxcolumnupdating||this._checkboxcolumn&&this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1});this._renderrows(this.virtualsizeinfo);this._trigger=!0;this.selectionmode=="checkbox"&&this._raiseEvent(2,{rowindex:this.selectedrowindexes})},selectrow:function(n,t){this._applyrowselection(n,!0,t);t!==!1&&this._updatecheckboxselection()},_updatecheckboxselection:function(){var n,t,i;if(this.selectionmode=="checkbox"&&(n=this.getrows(),n&&this._checkboxcolumn)){if(n.length===0){this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1});return}t=n.length;this.groupable&&(t=this.dataview.loadedrecords.length);this.virtualmode&&(t=this.source._source.totalrecords);i=this.selectedrowindexes.length;i===t?this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!0}):i===0?this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1}):this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:null})}},unselectrow:function(n,t){this._applyrowselection(n,!1,t);t!==!1&&this._updatecheckboxselection()},selectcell:function(n,t){this._applycellselection(n,t,!0)},unselectcell:function(n,t){this._applycellselection(n,t,!1)},clearselection:function(n,t){if(this._trigger=!1,this.selectedrowindex=-1,this._oldselectedcell=null,t!==!1)for(var i=0;i<this.selectedrowindexes.length;i++)this._raiseEvent(3,{rowindex:this.selectedrowindexes[i]});if(this.selectedrowindexes=[],this.selectedcells=[],this.selectedcell=null,this.selectionmode!="checkbox"||this._checkboxcolumnupdating||this._checkboxcolumn.checkboxelement.jqxCheckBox({checked:!1}),!1===n){this._trigger=!0;return}this._renderrows(this.virtualsizeinfo);this._trigger=!0;this.selectionmode=="checkbox"&&this._raiseEvent(3,{rowindex:this.selectedrowindexes})},getselectedrowindex:function(){if(this.selectedrowindex==-1||this.selectedrowindex==undefined)for(var n=0;n<this.selectedrowindexes.length;n++)return this.selectedrowindexes[n];return this.selectedrowindex},getselectedrowindexes:function(){return this.selectedrowindexes},getselectedcell:function(){if(!this.selectedcell)return null;var n=this.selectedcell;return n.row=this.selectedcell.rowindex,n.column=this.selectedcell.datafield,n.value=this.getcellvalue(n.row,n.column),n},getselectedcells:function(){var n=[];for(obj in this.selectedcells)n[n.length]=this.selectedcells[obj];return n},_getcellsforcopypaste:function(){var u=[],i,t,r,n,e,f;if(this.selectionmode.indexOf("cell")==-1)for(i=this.selectedrowindexes,t=0;t<i.length;t++)for(r=i[t],n=0;n<this.columns.records.length;n++)this.columns.records[n].datafield!=="_checkboxcolumn"&&(e=r+"_"+this.columns.records[n].datafield,f={rowindex:r,datafield:this.columns.records[n].datafield},u.push(f));return u},deleteselection:function(){var t=this,u=t.getselectedcells(),f,r;if(this.selectionmode.indexOf("cell")==-1&&(u=this._getcellsforcopypaste()),u!=null&&u.length>0){for(f=0;f<u.length;f++){var n=u[f],i=t.getcolumn(n.datafield),e=t.getcellvalue(n.rowindex,n.datafield);i&&e!==""&&(r=null,i.columntype=="checkbox"&&(i.threestatecheckbox||(r=!1)),t._raiseEvent(17,{rowindex:n.rowindex,datafield:n.datafield,value:e}),f==u.length-1?(t.setcellvalue(n.rowindex,n.datafield,r,!0),i.displayfield!=i.datafield&&t.setcellvalue(n.rowindex,i.displayfield,r,!0)):(t.setcellvalue(n.rowindex,n.datafield,r,!1),i.displayfield!=i.datafield&&t.setcellvalue(n.rowindex,i.displayfield,r,!0)),t._raiseEvent(18,{rowindex:n.rowindex,datafield:n.datafield,oldvalue:e,value:r}))}this.dataview.updateview();this._renderrows(this.virtualsizeinfo)}},copyselection:function(){var u="",f=this,e,b,s,h,o,a,c,t,y,r,p,w,l,i,v;if(this.clipboardselection={},this.logicalclipboardselection={},this._clipboardselection=[],e=f.getselectedcells(),this.selectionmode.indexOf("cell")==-1&&(e=this._getcellsforcopypaste()),b=0,s=[],e!=null&&e.length>0){for(h=999999999999999,o=-1,a=0;a<e.length;a++)c=e[a],t=f.getcolumn(c.datafield),t!=null&&t.clipboard&&(!t.hidden||this.copytoclipboardhiddencolumns)&&(s.indexOf(t.text)==-1&&s.push(t.text),y=f.getcelltext(c.rowindex,t.displayfield),r=this.getrowdisplayindex(c.rowindex),this.clipboardselection[r]||(this.clipboardselection[r]={}),this.clipboardselection[r][t.displayfield]=y,this.logicalclipboardselection[r]||(this.logicalclipboardselection[r]={}),this.logicalclipboardselection[r][t.displayfield]=y,t.displayfield!=t.datafield&&(this.logicalclipboardselection[r][t.datafield]=f.getcellvalue(c.rowindex,t.datafield)),h=Math.min(h,r),o=Math.max(o,r));for(p=[],i=h;i<=o;i++)this.logicalclipboardselection[i]&&(w=n.extend({},this.logicalclipboardselection[i]),p.push(w));if(this.logicalclipboardselection=p,this.copytoclipboardwithheaders){for(l=0;l<s.length;l++)l>0&&(u+="\t"),u+=s[l];u+="\r\n"}for(i=h;i<=o;i++){if(v=0,this._clipboardselection[this._clipboardselection.length]=[],this.clipboardselection[i]!=undefined)n.each(this.clipboardselection[i],function(n,t){v>0&&(u+="\t");var i=t;t==null&&(i="");f._clipboardselection[f._clipboardselection.length-1][v]=i;v++;u+=i});else continue;i<o&&(u+="\r\n")}}return this.clipboardselectedtext=u,u},pasteselection:function(){var s=this.getselectedcells(),c,r,a,v,i,h,n,l,w,t,b,f,e,o,y;if(this._oldselectedcell=null,this.selectionmode.indexOf("cell")==-1&&(s=this._getcellsforcopypaste()),s!=null&&s.length>0){var d=s[0].rowindex,g=this.getrowdisplayindex(d),nt=s[0].datafield,tt=this._getcolumnindex(nt);this.selectedrowindexes=[];this.selectedcells=[];var it=s.length,k=0,p=[];for(this.copytoclipboardwithheaders&&this._clipboardselection.splice(0,1),i=0;i<this._clipboardselection.length;i++)for(k+=this._clipboardselection[i].length,p[i]=[],h=0;h<this._clipboardselection[i].length;h++)n=this._clipboardselection[i][h],p[i].push(n);if(k<s.length){for(c=[],i=0;i<s.length;i++)r=s[i],c[r.rowindex]||(c[r.rowindex]=[]),c[r.rowindex].push(r);for(a=0,v=0,i=0;i<c.length;i++)if(c[i]){for(h=0;h<c[i].length;h++){var r=c[i][h],u=r.rowindex,t=this.getcolumn(r.datafield);if(t.datafield!=="_checkboxcolumn"&&!t.hidden){if(n="",undefined==p[a][v]&&(v=0),n=p[a][v],v++,t.cellsformat&&(t.cellsformat.indexOf("p")!=-1||t.cellsformat.indexOf("c")!=-1||t.cellsformat.indexOf("n")!=-1||t.cellsformat.indexOf("f")!=-1)){for(n.indexOf(this.gridlocalization.currencysymbol)>-1&&(n=n.replace(this.gridlocalization.currencysymbol,"")),b=function(n,t,i){var r=n,u;if(t==i)return n;for(u=r.indexOf(t);u!=-1;)r=r.replace(t,i),u=r.indexOf(t);return r},n=b(n,this.gridlocalization.thousandsseparator,""),n=n.replace(this.gridlocalization.decimalseparator,"."),n.indexOf(this.gridlocalization.percentsymbol)>-1&&(n=n.replace(this.gridlocalization.percentsymbol,"")),f="",e=0;e<n.length;e++)o=n.substring(e,e+1),o==="-"&&(f+="-"),o==="."&&(f+="."),o.match(/^[0-9]+$/)!=null&&(f+=o);n=f;n=n.replace(/ /g,"");n=new Number(n);isNaN(n)&&(n="")}this._raiseEvent(17,{rowindex:u,datafield:r.datafield,value:n});this.setcellvalue(u,t.displayfield,n,!1);t.displayfield!=t.datafield&&this.logicalclipboardselection&&this.logicalclipboardselection[u]&&(y=this.logicalclipboardselection[u][t.datafield],y!=undefined&&this.setcellvalue(u,t.datafield,y,!1));this._raiseEvent(18,{rowindex:u,datafield:r.datafield,oldvalue:this.getcellvalue(r.rowindex,r.datafield),value:n});this._applycellselection(u,r.datafield,!0,!1)}}a++;v=0;p[a]||(a=0)}}else{if(!this._clipboardselection)return;for(l=0;l<this._clipboardselection.length;l++)for(w=0;w<this._clipboardselection[l].length;w++)if((t=this.getcolumnat(tt+w),t)&&t.datafield!=="_checkboxcolumn"&&!t.hidden){var u=this.getrowboundindex(g+l),r=this.getcell(u,t.datafield),n=null;if(n=this._clipboardselection[l][w],n!=null){if(t.cellsformat&&(t.cellsformat.indexOf("p")!=-1||t.cellsformat.indexOf("c")!=-1||t.cellsformat.indexOf("n")!=-1||t.cellsformat.indexOf("f")!=-1)){for(n.indexOf(this.gridlocalization.currencysymbol)>-1&&(n=n.replace(this.gridlocalization.currencysymbol,"")),b=function(n,t,i){var r=n,u;if(t==i)return n;for(u=r.indexOf(t);u!=-1;)r=r.replace(t,i),u=r.indexOf(t);return r},n=b(n,this.gridlocalization.thousandsseparator,""),n=n.replace(this.gridlocalization.decimalseparator,"."),n.indexOf(this.gridlocalization.percentsymbol)>-1&&(n=n.replace(this.gridlocalization.percentsymbol,"")),f="",e=0;e<n.length;e++)o=n.substring(e,e+1),o==="-"&&(f+="-"),o==="."&&(f+="."),o.match(/^[0-9]+$/)!=null&&(f+=o);n=f;n=n.replace(/ /g,"");n=new Number(n);isNaN(n)&&(n="")}this._raiseEvent(17,{rowindex:u,datafield:r.datafield,value:n});this.setcellvalue(u,t.displayfield,n,!1);t.displayfield!=t.datafield&&this.logicalclipboardselection&&(y=this.logicalclipboardselection[l][t.datafield],y!=undefined&&this.setcellvalue(u,t.datafield,y,!1));this._raiseEvent(18,{rowindex:u,datafield:r.datafield,oldvalue:this.getcellvalue(r.rowindex,r.datafield),value:n});this._applycellselection(u,r.datafield,!0,!1)}}}this.selectionmode=="checkbox"&&this._updatecheckboxselection();this.dataview.updateview();this._renderrows(this.virtualsizeinfo)}this.clipboardend&&this.clipboardend("paste")},_applyrowselection:function(n,t,i,r){var e,u,f,o;return n==null?!1:(e=this.selectedrowindex,this.selectionmode=="singlerow"&&(t?this._raiseEvent(2,{rowindex:n,row:this.getrowdata(n)}):this._raiseEvent(3,{rowindex:n,row:this.getrowdata(n)}),this._raiseEvent(3,{rowindex:e}),this.selectedrowindexes=[],this.selectedcells=[]),r==!0&&(this.selectedrowindexes=[]),this.dataview.filters.length>0&&(u=this.getrowdata(n),u&&u.dataindex!==undefined?n=u.dataindex:u&&u.dataindex===undefined&&u.uid!=undefined&&(n=this.getrowboundindexbyid(u.uid))),f=this.selectedrowindexes.indexOf(n),t?(this.selectedrowindex=n,f==-1?(this.selectedrowindexes.push(n),this.selectionmode!="singlerow"&&this._raiseEvent(2,{rowindex:n,row:this.getrowdata(n)})):this.selectionmode=="multiplerows"&&(this.selectedrowindexes.splice(f,1),this._raiseEvent(3,{rowindex:this.selectedrowindex,row:this.getrowdata(n)}),this.selectedrowindex=this.selectedrowindexes.length>0?this.selectedrowindexes[this.selectedrowindexes.length-1]:-1)):(f>=0||this.selectionmode=="singlerow"||this.selectionmode=="multiplerowsextended"||this.selectionmode=="multiplerowsadvanced")&&(o=this.selectedrowindexes[f],this.selectedrowindexes.splice(f,1),this._raiseEvent(3,{rowindex:o,row:this.getrowdata(n)}),this.selectedrowindex=-1),(i==undefined||i)&&this._rendervisualrows(),!0)},_applycellselection:function(n,t,i,r){var s,u,f,e,o;return n==null?!1:t==null?!1:(s=this.selectedrowindex,this.selectionmode=="singlecell"&&(u=this.selectedcell,u!=null&&this._raiseEvent(16,{rowindex:u.rowindex,datafield:u.datafield}),this.selectedcells=[]),(this.selectionmode=="multiplecellsextended"||this.selectionmode=="multiplecellsadvanced")&&(u=this.selectedcell,u!=null&&this._raiseEvent(16,{rowindex:u.rowindex,datafield:u.datafield})),e=n+"_"+t,this.dataview.filters.length>0&&(f=this.getrowdata(n),f&&f.dataindex!==undefined?(n=f.dataindex,e=n+"_"+t):f&&f.dataindex===undefined&&f.uid&&(n=this.getrowboundindexbyid(f.uid),e=n+"_"+t)),o={rowindex:n,datafield:t},i?(this.selectedcell=o,this.selectedcells[e]?(this.selectionmode=="multiplecells"||this.selectionmode=="multiplecellsextended"||this.selectionmode=="multiplecellsadvanced")&&(delete this.selectedcells[e],this.selectedcells.length>0&&this.selectedcells.length--,this._raiseEvent(16,o)):(this.selectedcells[e]=o,this.selectedcells.length++,this._raiseEvent(15,o))):(delete this.selectedcells[e],this.selectedcells.length>0&&this.selectedcells.length--,this._raiseEvent(16,o)),(r==undefined||r)&&this._rendervisualrows(),!0)},_getcellindex:function(t){var i=-1;return n.each(this.selectedcells,function(){return i++,this[t]?!1:void 0}),i},_clearhoverstyle:function(){if(undefined!=this.hoveredrow&&this.hoveredrow!=-1&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()){var n=this.table.find(".jqx-grid-cell-hover");n.length>0&&(n.removeClass(this.toTP("jqx-grid-cell-hover")),n.removeClass(this.toTP("jqx-fill-state-hover")));this.hoveredrow=-1}},_clearselectstyle:function(){for(var i,r,t,e=this.table[0].rows.length,o=this.table[0].rows,s=this.toTP("jqx-grid-cell-selected"),h=this.toTP("jqx-fill-state-pressed"),c=this.toTP("jqx-grid-cell-hover"),l=this.toTP("jqx-fill-state-hover"),u=0;u<e;u++){var f=o[u],a=f.cells.length,v=f.cells;for(i=0;i<a;i++)r=v[i],t=n(r),r.className.indexOf("jqx-grid-cell-selected")!=-1&&(t.removeClass(s),t.removeClass(h)),r.className.indexOf("jqx-grid-cell-hover")!=-1&&(t.removeClass(c),t.removeClass(l))}},_selectpath:function(n,t){var u=this,f=this._lastClickedCell?Math.min(this._lastClickedCell.row,n):0,e=this._lastClickedCell?Math.max(this._lastClickedCell.row,n):0,h,i,r,n;if(f<=e){var o=this._getcolumnindex(this._lastClickedCell.column),s=this._getcolumnindex(t),c=Math.min(o,s),l=Math.max(o,s);for(this.selectedcells=[],h=this.dataview.loadedrecords,i=f;i<=e;i++)for(r=c;r<=l;r++)n=h[i],this._applycellselection(u.getboundindex(n),u._getcolumnat(r).datafield,!0,!1);this._rendervisualrows()}},_selectrowpath:function(n){var t,n,u;if(this.selectionmode=="multiplerowsextended"){var e=this,i=this._lastClickedCell?Math.min(this._lastClickedCell.row,n):0,r=this._lastClickedCell?Math.max(this._lastClickedCell.row,n):0,f=this.dataview.loadedrecords;if(i<=r){for(this.selectedrowindexes=[],t=i;t<=r;t++)n=f[t],u=this.getrowboundindex(t),this._applyrowselection(u,!0,!1);this._rendervisualrows()}}},_selectrowwithmouse:function(n,t,i,r,u,f){var e=t.row,s,o,b,v,h,p,y,w,c,l,a;if(e!=undefined&&(s=t.index,this.hittestinfo[s]!=undefined)&&(o=this.hittestinfo[s].visualrow,!this.hittestinfo[s].details)&&(b=o.cells[0].className,!e.group)){if(this.selectionmode=="multiplerows"||this.selectionmode=="multiplecells"||this.selectionmode=="checkbox"||this.selectionmode.indexOf("multiple")!=-1&&(f==!0||u==!0)){if(h=this.getboundindex(e),this.dataview.filters.length>0&&(v=this.getrowdata(h),v&&(h=v.dataindex,h==undefined&&(h=this.getboundindex(e)))),p=i.indexOf(h)!=-1,y=this.getboundindex(e)+"_"+r,this.selectionmode.indexOf("cell")!=-1)w=this.selectedcells[y]!=undefined,this.selectedcells[y]!=undefined&&w?this._selectcellwithstyle(n,!1,s,r,o):this._selectcellwithstyle(n,!0,s,r,o),f&&this._lastClickedCell==undefined&&(c=this.getselectedcells(),c&&c.length>0&&(this._lastClickedCell={row:c[0].rowindex,column:c[0].datafield})),f&&this._lastClickedCell&&(this._selectpath(e.visibleindex,r),this.mousecaptured=!1,this.selectionarea.css("visibility")=="visible"&&this.selectionarea.css("visibility","hidden"));else if(p?u?this._applyrowselection(this.getboundindex(e),!1):this._selectrowwithstyle(n,o,!1,r):this._selectrowwithstyle(n,o,!0,r),f&&this._lastClickedCell==undefined&&(l=this.getselectedrowindexes(),l&&l.length>0&&(this._lastClickedCell={row:l[0],column:r})),f&&this._lastClickedCell){this.selectedrowindexes=[];var k=this._lastClickedCell?Math.min(this._lastClickedCell.row,e.visibleindex):0,d=this._lastClickedCell?Math.max(this._lastClickedCell.row,e.visibleindex):0,g=this.dataview.loadedrecords;for(a=k;a<=d;a++)e=g[a],e&&this._applyrowselection(this.getboundindex(e),!0,!1,!1);this._rendervisualrows()}}else this._clearselectstyle(),this._selectrowwithstyle(n,o,!0,r),this.selectionmode.indexOf("cell")!=-1&&this._selectcellwithstyle(n,!0,s,r,o);f||(this._lastClickedCell={row:e.visibleindex,column:r})}},_selectcellwithstyle:function(t,i,r,u,f){var e=n(f.cells[t._getcolumnindex(u)]);e.removeClass(this.toTP("jqx-grid-cell-hover"));e.removeClass(this.toTP("jqx-fill-state-hover"));i?(e.addClass(this.toTP("jqx-grid-cell-selected")),e.addClass(this.toTP("jqx-fill-state-pressed"))):(e.removeClass(this.toTP("jqx-grid-cell-selected")),e.removeClass(this.toTP("jqx-fill-state-pressed")))},_selectrowwithstyle:function(t,i,r){var f=i.cells.length,o=0,e,u;for(t.rowdetails&&t.showrowdetailscolumn?this.rtl?(f-=1,f-=this.groups.length):o=1+this.groups.length:this.groupable&&(this.rtl?f-=this.groups.length:o=this.groups.length),e=o;e<f;e++)u=i.cells[e],r?(n(u).removeClass(this.toTP("jqx-grid-cell-hover")),n(u).removeClass(this.toTP("jqx-fill-state-hover")),t.selectionmode.indexOf("cell")==-1&&(n(u).addClass(this.toTP("jqx-grid-cell-selected")),n(u).addClass(this.toTP("jqx-fill-state-pressed")))):(n(u).removeClass(this.toTP("jqx-grid-cell-hover")),n(u).removeClass(this.toTP("jqx-grid-cell-selected")),n(u).removeClass(this.toTP("jqx-fill-state-hover")),n(u).removeClass(this.toTP("jqx-fill-state-pressed")))},_handlemousemoveselection:function(t,i){var bt,f,ut,u,a,kt,ft,it,ct,y,lt,p,ni,r,h,g,yt,b,c,k,ht,rt,ii,pt,ri,wt;if(i.hScrollInstance.isScrolling()||i.vScrollInstance.isScrolling())return!1;if((i.selectionmode=="multiplerowsextended"||i.selectionmode=="multiplecellsextended"||i.selectionmode=="multiplecellsadvanced")&&i.mousecaptured){if(i.multipleselectionbegins&&(bt=i.multipleselectionbegins(t),bt===!1))return!0;var ui=this.showheader?this.columnsheader.height()+2:0,d=this._groupsheader()?this.groupsheader.height():0,fi=this.showtoolbar?this.toolbar.height():0;if(d+=fi,f=this.host.coord(),this.hasTransform&&(f=n.jqx.utilities.getOffset(this.host),ut=this._getBodyOffset(),f.left-=ut.left,f.top-=ut.top),this.host.css("border-top-width")==="0px"&&(d-=2),u=t.pageX,a=t.pageY-d,Math.abs(this.mousecaptureposition.left-u)>3||Math.abs(this.mousecaptureposition.top-a)>3){kt=parseInt(this.columnsheader.coord().top);this.hasTransform&&(kt=n.jqx.utilities.getOffset(this.columnsheader).top);u<f.left&&(u=f.left);u>f.left+this.host.width()&&(u=f.left+this.host.width());ft=f.top+ui;a<ft&&(a=ft+5);var l=parseInt(Math.min(i.mousecaptureposition.left,u)),o=-5+parseInt(Math.min(i.mousecaptureposition.top,a)),et=parseFloat(Math.abs(i.mousecaptureposition.left-u)),ot=parseInt(Math.abs(i.mousecaptureposition.top-a));if(l-=f.left,o-=f.top,this.selectionarea.css("visibility","visible"),i.selectionmode=="multiplecellsadvanced"){var u=l,nt=u+et,oi=u,st=i.hScrollInstance,tt=st.value;this.rtl&&(this.hScrollBar.css("visibility")!="hidden"&&(tt=st.max-st.value),this.vScrollBar[0].style.visibility!="hidden");var dt=i.table[0].rows[0],ht=0,s=i.mousecaptureposition.clickedcell,e=s,v=!1,gt=0,ei=dt.cells.length;for(i.mousecaptureposition.left<=t.pageX&&(gt=s),it=!1,r=gt;r<ei;r++){if(ct=parseFloat(n(this.columnsrow[0].cells[r]).css("left")),y=ct-tt,i.columns.records[r].pinned&&!i.columns.records[r].hidden){if(r==s&&(it=!0),p=ct+n(this.columnsrow[0].cells[r]).width(),i.mousecaptureposition.left>t.pageX){if(p>=u&&u>=y){e=r;v=!0;break}}else if(p>=nt&&nt>=y){e=r;v=!0;break}continue}if(it){v=!0;e--;break}if((lt=this._getcolumnat(r),lt==null||!lt.hidden)&&(!i.groupable||!(i.groups.length>0)||!(r<i.groups.length)))if(p=y+n(this.columnsrow[0].cells[r]).width(),i.mousecaptureposition.left>t.pageX){if(p>=u&&u>=y){e=r;v=!0;break}}else if(p>=nt&&nt>=y){e=r;v=!0;break}}v||(i.mousecaptureposition.left>t.pageX?n.each(this.columns.records,function(n){return i.groupable&&i.groups.length>0&&n<i.groups.length?!0:!this.pinned&&!this.hidden?(e=n,!1):void 0}):(!i.groupable||i.groupable&&!i.groups.length>0)&&(e=dt.cells.length-1));ni=s;s=Math.min(s,e);e=Math.max(ni,e);o+=5;o+=d;var si=i.table[0].rows.indexOf(i.mousecaptureposition.clickedrow),at=0,w=-1,ti=-1,vt=0;for(r=0;r<i.table[0].rows.length;r++){if(h=n(i.table[0].rows[r]),r==0&&(vt=h.coord().top),g=h.height(),yt=vt-f.top,w==-1&&yt+g>=o){for(b=!1,c=0;c<i.groups.length;c++)if(k=h[0].cells[c].className,k.indexOf("jqx-grid-group-collapse")!=-1||k.indexOf("jqx-grid-group-expand")!=-1){b=!0;break}if(b)continue;w=r}if(vt+=g,i.groupable&&i.groups.length>0){for(b=!1,c=0;c<i.groups.length;c++)if(k=h[0].cells[c].className,k.indexOf("jqx-grid-group-collapse")!=-1||k.indexOf("jqx-grid-group-expand")!=-1){b=!0;break}if(b)continue;for(ht=0,rt=i.groups.length;rt<h[0].cells.length;rt++)ii=h[0].cells[rt],n(ii).html()==""&&ht++;if(ht==h[0].cells.length-i.groups.length)continue}if(w!=-1&&(at+=g),yt+g>o+ot){ti=r;break}}if(w!=-1&&(o=n(i.table[0].rows[w]).coord().top-f.top-d-2,pt=0,this.filterable&&this.showfilterrow&&(pt=this.filterrowheight),parseFloat(i.table[0].style.top)<0&&o<this.rowsheight+pt&&(o-=parseFloat(i.table[0].style.top),at+=parseFloat(i.table[0].style.top)),ot=at,ri=n(this.columnsrow[0].cells[s]),wt=n(this.columnsrow[0].cells[e]),l=parseFloat(ri.css("left")),et=parseFloat(wt.css("left"))-parseFloat(l)+wt.width()-2,l-=tt,it&&(l+=tt),i.editcell&&i.editable&&i.endcelledit&&(s!=e||w!=ti))){if(i.editcell.validated==!1)return;i.endcelledit(i.editcell.row,i.editcell.column,!0,!0)}}this.selectionarea.width(et);this.selectionarea.height(ot);this.selectionarea.css("left",l);this.selectionarea.css("top",o)}}},_handlemouseupselection:function(t,i){var nt,s,tt,c,l,h,y,p,rt,d,ut,u,it,f,e,o,g;if(this.selectionarea){if(this.selectionarea[0].style.visibility!="visible")return i.mousecaptured=!1,!0;if(i.mousecaptured&&(i.selectionmode=="multiplerowsextended"||i.selectionmode=="multiplerowsadvanced"||i.selectionmode=="multiplecellsextended"||i.selectionmode=="multiplecellsadvanced")&&(i.mousecaptured=!1,this.selectionarea.css("visibility")=="visible")){this.selectionarea.css("visibility","hidden");nt=this.showheader?this.columnsheader.height()+2:0;s=this._groupsheader()?this.groupsheader.height():0;this.host.css("border-top-width")==="0px"&&(s-=2);tt=this.showtoolbar?this.toolbar.height():0;s+=tt;c=this.selectionarea.coord();l=this.host.coord();this.hasTransform&&(l=n.jqx.utilities.getOffset(this.host),c=n.jqx.utilities.getOffset(this.selectionarea));this.host.css("border-top-width")==="0px"&&(s-=2);var a=c.left-l.left,r=c.top-nt-l.top-s,h=r,w=a+this.selectionarea.width(),b=a,k=[],v=[];if(i.selectionmode=="multiplerowsextended"){while(r<h+this.selectionarea.height()){var u=this._hittestrow(a,r),it=u.row,f=u.index;f!=-1&&(v[f]||(v[f]=!0,k[k.length]=u));r+=20}h=0;n.each(k,function(){var r=this,n=this.row;i.selectionmode!="none"&&i._selectrowwithmouse&&(t.ctrlKey||t.metaKey?i._applyrowselection(i.getboundindex(n),!0,!1,!1):h==0?i._applyrowselection(i.getboundindex(n),!0,!1,!0):i._applyrowselection(i.getboundindex(n),!0,!1,!1),h++)})}else for(i.selectionmode=="multiplecellsadvanced"&&(r+=2),y=i.hScrollInstance,p=y.value,this.rtl&&(this.hScrollBar.css("visibility")!="hidden"&&(p=y.max-y.value),this.vScrollBar[0].style.visibility!="hidden"&&(p-=this.scrollbarsize+4)),rt=i.table[0].rows[0],d=i.selectionarea.height(),!t.ctrlKey&&!t.metaKey&&d>0&&(i.selectedcells=[]),ut=d;r<h+ut;){if(u=i._hittestrow(a,r),!u){r+=5;continue}if(it=u.row,f=u.index,f!=-1&&!v[f])for(v[f]=!0,e=0;e<rt.cells.length;e++)o=parseFloat(n(i.columnsrow[0].cells[e]).css("left"))-p,g=o+n(i.columnsrow[0].cells[e]).width(),(b>=o&&b<=g||w>=o&&w<=g||o>=b&&o<=w)&&i._applycellselection(i.getboundindex(it),i._getcolumnat(e).datafield,!0,!1);r+=5}i.autosavestate&&i.savestate&&i.savestate();i._renderrows(i.virtualsizeinfo)}}},selectprevcell:function(n,t){var r=this._getcolumnindex(t),u=this.columns.records.length,i=this._getprevvisiblecolumn(r);i!=null&&(this.clearselection(),this.selectcell(n,i.datafield))},selectnextcell:function(n,t){var r=this._getcolumnindex(t),u=this.columns.records.length,i=this._getnextvisiblecolumn(r);i!=null&&(this.clearselection(),this.selectcell(n,i.datafield))},_getfirstvisiblecolumn:function(){for(var n,r=this,i=this.columns.records.length,t=0;t<i;t++)if(n=this.columns.records[t],!n.hidden&&n.datafield!=null)return n;return null},_getlastvisiblecolumn:function(){for(var n,r=this,i=this.columns.records.length,t=i-1;t>=0;t--)if(n=this.columns.records[t],!n.hidden&&n.datafield!=null)return n;return null},_handlekeydown:function(t,i){var r,c,o,g,ft,p,v,nt,tt,st,y,et,ot,ht,d,ct,u,h;if(i.groupable&&i.groups.length>0,i.disabled)return!1;if(r=t.charCode?t.charCode:t.keyCode?t.keyCode:0,i.editcell&&i.selectionmode!="multiplecellsadvanced")return!0;if(i.editcell&&i.selectionmode=="multiplecellsadvanced")if(r>=33&&r<=40){if(t.altKey)return i._cancelkeydown=!1,!0;if(i._cancelkeydown==undefined||i._cancelkeydown==!1)if(i.editmode!=="selectedrow"){if(i.endcelledit(i.editcell.row,i.editcell.column,!1,!0),i._cancelkeydown=!1,i.editcell&&!i.editcell.validated)return i._rendervisualrows(),i.endcelledit(i.editcell.row,i.editcell.column,!1,!0),!1}else return!0;else return i._cancelkeydown=!1,!0}else return!0;if(i.selectionmode=="none"||i.showfilterrow&&i.filterable&&this.filterrow&&n(t.target).ischildof(i.filterrow)||i.showeverpresentrow&&(i.addnewrowtop&&n(t.target).ischildof(i.addnewrowtop)||i.addnewrowbottom&&n(t.target).ischildof(i.addnewrowbottom))||t.target.className&&t.target.className.indexOf("jqx-grid-widget")>=0||i.pageable&&n(t.target).ischildof(this.pager)||this.showtoolbar&&n(t.target).ischildof(this.toolbar)||this.showstatusbar&&n(t.target).ischildof(this.statusbar)||(c=!1,t.altKey))return!0;if((t.ctrlKey||t.metaKey)&&this.clipboard){if(o=String.fromCharCode(r).toLowerCase(),this.clipboardbegin&&(g=null,o=="c"?g=this.clipboardbegin("copy",this.copyselection()):o=="x"?g=this.clipboardbegin("cut",this.copyselection()):o=="v"&&(g=this.clipboardbegin("paste")),g===!1))return!1;if(o=="c"||o=="x"){if(ft=this.copyselection(),o=="c"&&this.clipboardend&&this.clipboardend("copy"),o=="x"&&this.clipboardend&&this.clipboardend("cut"),window.clipboardData?window.clipboardData.setData("Text",ft):(p=n('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>'),p.val(ft),n("body").append(p),p.select(),setTimeout(function(){document.designMode="off";p.select();p.remove();i.focus()},100)),o=="c"&&n.jqx.browser.msie)return!1;if(o=="c")return!0}else if(o=="v")return v=n('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>'),n("body").append(v),v.select(),nt=this,setTimeout(function(){var r,t,n,i;for(nt._clipboardselection=[],r=v.val(),r.length==0&&window.clipboardData&&(v.val(window.clipboardData.getData("Text")),r=v.val()),t=r.split("\n"),n=0;n<t.length;n++)if(t[n].split("\t").length>0){if(i=t[n].split("\t"),i.length==1&&n==t.length-1&&i[0]=="")continue;i.length>0&&nt._clipboardselection.push(i)}nt.pasteselection();v.remove();nt.focus()},100),!0;if(o=="x")return this.deleteselection(),this.host.focus(),!1}var lt=Math.round(i._gettableheight()),a=Math.round(lt/i.rowsheight),w=i.getdatainformation();switch(i.selectionmode){case"singlecell":case"multiplecells":case"multiplecellsextended":case"multiplecellsadvanced":if(tt=i.getselectedcell(),tt===null&&i.selectcell(0,i.columns.records[0].displayfield),tt!=null){var at=this.getrowvisibleindex(tt.rowindex),u=at,s=tt.datafield,ut=i._getcolumnindex(s),vt=i.columns.records.length,e=function(n,r,u,f){var e=function(n,r){var e=i.dataview.loadedrecords[n],s,h,l,o,y;if(i.groupable&&i.groups.length>0){s=n;f=="up"&&s++;f=="down"&&s--;for(var e=i.getdisplayrows()[s],p=function(n){if(n.group){if(i.expandedgroups[n.uniqueid])return i.expandedgroups[n.uniqueid].expanded}else return!1},a=1,v=!0;v&&a<300;){if(v=!1,f=="down"?e=i.getdisplayrows()[s+a]:f=="up"&&(e=i.getdisplayrows()[s-a]),!e)break;for(e&&e.group&&(v=!0),h=e.parentItem;h;)h&&!p(h)&&(v=!0),h=h.parentItem;if(!v)break;a++}if(a==300&&(e=null),i.pageable&&(l=!1,e)){for(o=0;o<i.dataview.rows.length;o++)i.dataview.rows[o].boundindex==e.boundindex&&(l=!0);l||(e=null)}}else if(i.pageable&&(l=!1,e)){for(o=0;o<i.dataview.rows.length;o++)i.dataview.rows[o].boundindex==e.boundindex&&(l=!0);l||(i.pagerpageinput&&t.keyCode===9&&e.boundindex>i.dataview.rows[i.dataview.rows.length-1].boundindex&&(i.pagerpageinput.focus(),t.preventDefault()),i.ensurerowvisible(e))}return e!=undefined&&r!=null?((u||u==undefined)&&i.clearselection(),y=i.getboundindex(e),i.selectcell(y,r),i._oldselectedcell=i.selectedcell,c=!0,i.groupable?i.ensurecellvisible(y,r):i.ensurecellvisible(n,r),!0):!1},o,s,h;if(e(n,r)||i.groupable||(i.ensurecellvisible(n,r),e(n,r),i.virtualmode&&i.host.focus()),o=i.groupable&&i.groups.length>0,!o)if(t.shiftKey&&t.keyCode!=9){if((i.selectionmode=="multiplecellsextended"||i.selectionmode=="multiplecellsadvanced")&&i._lastClickedCell){i._selectpath(n,r);s=i.dataview.loadedrecords[n];h=i.getboundindex(s);i.selectedcell={rowindex:h,datafield:r};return}}else t.shiftKey||(i._lastClickedCell={row:n,column:r})},f=t.shiftKey&&i.selectionmode!="singlecell"&&i.selectionmode!="multiplecells",it=function(){if(i.pageable){var n=i.dataview.pagenum*i.dataview.pagesize;e(n,s,!f)}else e(0,s,!f)},rt=function(){var n=w.rowscount-1,t;i.pageable&&(t=i.dataview.pagenum*i.dataview.pagesize,n=t+i.dataview.rows.length-1);e(n,s,!f)},b=r==9&&!t.shiftKey,k=r==9&&t.shiftKey;if(i.rtl&&(st=b,b=k,k=st),(b||k)&&(f=!1),(b||k)&&document.activeElement&&document.activeElement.className&&document.activeElement.className.indexOf("jqx-grid-cell-add-new-row")>=0)return!0;y=t.ctrlKey||t.metaKey;y&&r==37?(d=i._getfirstvisiblecolumn(ut),d!=null&&e(u,d.datafield)):y&&r==39?(et=i._getlastvisiblecolumn(ut),et!=null&&e(u,et.datafield)):r==39||b?(ot=i._getnextvisiblecolumn(ut),ot!=null?e(u,ot.datafield,!f):b?(ht=i._getfirstvisiblecolumn(),r=40,s=ht.displayfield):c=!0):r==37||k?(d=i._getprevvisiblecolumn(ut),d!=null?e(u,d.datafield,!f):k?(ct=i._getlastvisiblecolumn(),r=38,s=ct.displayfield):c=!0):r==36?it():r==35?rt():r==33?u-a>=0?(h=u-a,e(h,s,!f),i.pageable&&i.virtualmode&&(i.gotoprevpage(),setTimeout(function(){e(h,s,!f)},25))):it():r==34&&(w.rowscount>u+a?(h=u+a,e(h,s,!f),i.pageable&&i.virtualmode&&(i.gotonextpage(),setTimeout(function(){e(h,s,!f)},25))):rt());r==38&&(y?it():u>0?e(u-1,s,!f,"up"):c=!1);r==40&&(y?rt():w.rowscount>u+1||i.groupable&&i.groups.length>0?e(u+1,s,!f,"down"):c=!0)}break;case"singlerow":case"multiplerows":case"multiplerowsextended":case"multiplerowsadvanced":if(u=i.getselectedrowindex(),u==null||u==-1)return!0;u=this.getrowvisibleindex(u);var l=function(n,u,f){var e=function(n){var t=i.dataview.loadedrecords[n],r,h,s,l,a,v;if(i.groupable&&i.groups.length>0){f=="up"&&n++;f=="down"&&n--;for(var t=i.getdisplayrows()[n],y=function(n){if(n.group){if(i.expandedgroups[n.uniqueid])return i.expandedgroups[n.uniqueid].expanded}else return!1},e=1,o=!0;o&&e<300;){if(o=!1,f=="down"?t=i.getdisplayrows()[n+e]:f=="up"&&(t=i.getdisplayrows()[n-e]),!t)break;for(t&&t.group&&(o=!0),r=t.parentItem;r;)r&&!y(r)&&(o=!0),r=r.parentItem;if(!o)break;e++}if(e==300&&(t=null),i.pageable&&(h=!1,t)){for(s=0;s<i.dataview.rows.length;s++)i.dataview.rows[s].boundindex==t.boundindex&&(h=!0);h||(t=null)}}return t!=undefined?(l=i.getboundindex(t),a=i.selectedrowindex,(u||u==undefined)&&i.clearselection(),i.selectedrowindex=a,i.selectrow(l,!1),v=i.groupable?i.ensurerowvisible(l):i.ensurerowvisible(n),(!v||i.autoheight||i.groupable)&&i._rendervisualrows(),c=!0,!0):!1},o;if(e(n)||i.groupable||(i.ensurerowvisible(n),e(n,u),i.virtualmode&&setTimeout(function(){e(n,u)},25),i.virtualmode&&i.host.focus()),o=i.groupable&&i.groups.length>0,!o)if(t.shiftKey&&r!=9){if(i.selectionmode=="multiplerowsextended"&&i._lastClickedCell){i._selectrowpath(n);i.selectedrowindex=i.getrowboundindex(n);return}}else t.shiftKey||(i._lastClickedCell={row:n},i.selectedrowindex=i.getrowboundindex(n))},f=t.shiftKey&&i.selectionmode!="singlerow"&&i.selectionmode!="multiplerows",it=function(){if(i.pageable){var n=i.dataview.pagenum*i.dataview.pagesize;l(n,!f)}else l(0,!f)},rt=function(){var n=w.rowscount-1,t;i.pageable&&(t=i.dataview.pagenum*i.dataview.pagesize,n=t+i.dataview.rows.length-1);l(n,!f)},y=t.ctrlKey||t.metaKey;r==36||y&&r==38?it():r==35||y&&r==40?rt():r==33?u-a>=0?(h=u-a,l(h,!f),i.pageable&&i.virtualmode&&(i.gotoprevpage(),setTimeout(function(){l(h,!f)},25))):it():r==34?w.rowscount>u+a?(h=u+a,l(h,!f),i.pageable&&i.virtualmode&&(i.gotonextpage(),setTimeout(function(){l(h,!f)},25))):rt():r==38?u>0?l(u-1,!f,"up"):c=!0:r==40&&(w.rowscount>u+1||i.groupable&&i.groups.length>0?l(u+1,!f,"down"):c=!0)}return c?(i.autosavestate&&i.savestate&&i.savestate(),!1):!0},_handlemousemove:function(t,i){var d,y,o,c,g,nt,p,l,w,e,u,s,h,tt,v,rt,k,r,f;if(!i.vScrollInstance.isScrolling()&&!i.hScrollInstance.isScrolling()&&((i.enablehover||i.selectionmode=="multiplerows")&&(d=this.showheader?this.columnsheader.height()+2:0,y=this._groupsheader()?this.groupsheader.height():0,nt=this.showtoolbar?this.toolbarheight:0,y+=nt,o=this.host.coord(),this.hasTransform&&(o=n.jqx.utilities.getOffset(this.host),p=this._getBodyOffset(),o.left-=p.left,o.top-=p.top),c=t.pageX-o.left,g=t.pageY-d-o.top-y),i.selectionmode!="multiplerowsextended"&&i.selectionmode!="multiplecellsextended"&&i.selectionmode!="multiplecellsadvanced"||i.mousecaptured!=!0))if(i.enablehover){if(i.disabled)return;if(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())return;if(l=this._hittestrow(c,g),!l)return;if(w=l.row,e=l.index,this.hoveredrow!=-1&&e!=-1&&this.hoveredrow==e&&this.selectionmode.indexOf("cell")==-1&&this.selectionmode!="checkbox")return;if(this._clearhoverstyle(),e==-1||w==undefined)return;if(u=this.hittestinfo[e].visualrow,u==null)return;if(this.hittestinfo[e].details)return;if(t.clientX>n(u).width()+n(u).coord().left)return;if(s=0,h=u.cells.length,i.rowdetails&&i.showrowdetailscolumn?this.rtl?(h-=1,h-=this.groups.length):s=1+this.groups.length:this.groupable&&(this.rtl?h-=this.groups.length:s=this.groups.length),u.cells.length==0)return;if(tt=u.cells[s].className,w.group||this.selectionmode.indexOf("row")>=0&&tt.indexOf("jqx-grid-cell-selected")!=-1)return;if(this.hoveredrow=e,this.selectionmode.indexOf("cell")!=-1||this.selectionmode=="checkbox"){var a=-1,b=this.hScrollInstance,it=b.value;for(this.rtl&&this.hScrollBar.css("visibility")!="hidden"&&(it=b.max-b.value),r=s;r<h;r++)if(v=parseInt(n(this.columnsrow[0].cells[r]).css("left"))-it,this.columns.records[r].pinned&&!this.rtl&&(v=parseInt(n(this.columnsrow[0].cells[r]).css("left"))),rt=v+n(this.columnsrow[0].cells[r]).width(),rt>=c&&c>=v){a=r;break}if(a!=-1&&(f=u.cells[a],this.cellhover&&this.cellhover(f,t.pageX,t.pageY),f.className.indexOf("jqx-grid-cell-selected")==-1)){if(this.editcell&&(k=this._getcolumnat(a),k&&this.editcell.row==e&&this.editcell.column==k.datafield))return;n(f).addClass(this.toTP("jqx-grid-cell-hover"));n(f).addClass(this.toTP("jqx-fill-state-hover"))}return}for(r=s;r<h;r++)f=u.cells[r],n(f).addClass(this.toTP("jqx-grid-cell-hover")),n(f).addClass(this.toTP("jqx-fill-state-hover")),this.cellhover&&this.cellhover(f,t.pageX,t.pageY)}else return!0}})}(jqxBaseFramework);var container=$("#preview"),grid,previewUrl="Home/GetPreviewData",dataUrl="Home/GetData",demo=new Demo;subscribeDomEvents();updateVersion();subscribeToExchangeData();AQB.Web.onQueryBuilderReady(subscribeToChanges);AQB.Web.onCriteriaBuilderReady(subscribeToChangesCb);insertJqueryTheme();createQueryResults();Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(n){var i,u,f,t,r;if(this==null)throw new TypeError('"this" is null or not defined');if(i=Object(this),u=i.length>>>0,typeof n!="function")throw new TypeError("predicate must be a function");for(f=arguments[1],t=0;t<u;){if(r=i[t],n.call(f,r,t,i))return r;t++}return undefined},configurable:!0,writable:!0});